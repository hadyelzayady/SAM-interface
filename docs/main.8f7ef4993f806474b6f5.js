(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+SKG":function(e,t){e.exports=function(e){return n&&Buffer.isBuffer(e)||i&&(e instanceof ArrayBuffer||r(e))};var n="function"==typeof Buffer&&"function"==typeof Buffer.isBuffer,i="function"==typeof ArrayBuffer,r=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}},"+tJ4":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){return function(t){for(var n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()}}},"+umK":function(e,t,n){"use strict";function i(){}n.d(t,"a",function(){return i})},"+wA8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Ip0R"),r=n("CcnG"),o=n("CYgj"),s=n("DYXb"),a=n("xN82"),l=n("/Sf3"),c=n("91uq"),h=c.defaultSimpleModalOptions;t.\u02750=h,t.SimpleModalModule=function(){function e(){}return e.forRoot=function(t,n){return{ngModule:e,providers:[{provide:a.SimpleModalServiceConfig,useValue:t},{provide:a.SimpleModalService,useFactory:l.SimpleModalServiceFactory,deps:[r.ComponentFactoryResolver,r.ApplicationRef,r.Injector,a.SimpleModalServiceConfig]},{provide:c.DefaultSimpleModalOptionConfig,useValue:n||c.defaultSimpleModalOptions}]}},e.decorators=[{type:r.NgModule,args:[{declarations:[o.SimpleModalHolderComponent,s.SimpleModalWrapperComponent],providers:[a.SimpleModalService,{provide:c.DefaultSimpleModalOptionConfig,useValue:h}],imports:[i.CommonModule],entryComponents:[o.SimpleModalHolderComponent,s.SimpleModalWrapperComponent]}]}],e}()},"/21U":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("isby");function r(e){return!Object(i.a)(e)&&e-parseFloat(e)+1>=0}},"/Sf3":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("xN82");t.SimpleModalServiceFactory=function(e,t,n,r){return new i.SimpleModalService(e,t,n,r)}},"/WYv":function(e,t,n){"use strict";function i(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,"a",function(){return i})},0:function(e,t,n){e.exports=n("zUnb")},"0/uQ":function(e,t,n){"use strict";var i=n("6blF"),r=n("/WYv"),o=n("2ePl"),s=n("xTla"),a=n("En8+"),l=n("IUTb"),c=n("pugT"),h=n("S5XQ"),d=n("u67D"),u=n("JcRv"),p=n("Fxb1");function f(e,t){if(!t)return e instanceof i.a?e:new i.a(Object(p.a)(e));if(null!=e){if(function(e){return e&&"function"==typeof e[s.a]}(e))return function(e,t){return new i.a(t?function(n){var i=new c.a;return i.add(t.schedule(function(){var r=e[s.a]();i.add(r.subscribe({next:function(e){i.add(t.schedule(function(){return n.next(e)}))},error:function(e){i.add(t.schedule(function(){return n.error(e)}))},complete:function(){i.add(t.schedule(function(){return n.complete()}))}}))})),i}:Object(u.a)(e))}(e,t);if(Object(r.a)(e))return function(e,t){return new i.a(t?function(n){var i=new c.a;return i.add(t.schedule(function(){return e.then(function(e){i.add(t.schedule(function(){n.next(e),i.add(t.schedule(function(){return n.complete()}))}))},function(e){i.add(t.schedule(function(){return n.error(e)}))})})),i}:Object(h.a)(e))}(e,t);if(Object(o.a)(e))return Object(l.a)(e,t);if(function(e){return e&&"function"==typeof e[a.a]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new i.a(t?function(n){var i,r=new c.a;return r.add(function(){i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(function(){i=e[a.a](),r.add(t.schedule(function(){if(!n.closed){var e,t;try{var r=i.next();e=r.value,t=r.done}catch(o){return void n.error(o)}t?n.complete():(n.next(e),this.schedule())}}))})),r}:Object(d.a)(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}n.d(t,"a",function(){return f})},"0z79":function(e,t,n){var i=n("AdPF"),r=n("CUme"),o=n("1Mk5"),s=n("Yvos"),a=n("HjK1")("engine.io-client:polling-xhr");function l(){}function c(e){if(r.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function h(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=c,e.exports.Request=h,s(c,r),c.prototype.supportsBinary=!0,c.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new h(e)},c.prototype.doWrite=function(e,t){var n=this.request({method:"POST",data:e,isBinary:"string"!=typeof e&&void 0!==e}),i=this;n.on("success",t),n.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=n},c.prototype.doPoll=function(){a("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},o(h.prototype),h.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new i(e),n=this;try{a("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.extraHeaders[r])}catch(o){}if("POST"===this.method)try{t.setRequestHeader("Content-type",this.isBinary?"application/octet-stream":"text/plain;charset=UTF-8")}catch(o){}try{t.setRequestHeader("Accept","*/*")}catch(o){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");n.supportsBinary&&"application/octet-stream"===e&&(t.responseType="arraybuffer")}catch(o){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},a("xhr data %s",this.data),t.send(this.data)}catch(o){return void setTimeout(function(){n.onError(o)},0)}"undefined"!=typeof document&&(this.index=h.requestsCount++,h.requests[this.index]=this)},h.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},h.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},h.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},h.prototype.cleanup=function(e){if(null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,e)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete h.requests[this.index],this.xhr=null}},h.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(n){}e="application/octet-stream"===t&&this.xhr.response||this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},h.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},h.prototype.abort=function(){this.cleanup()},h.requestsCount=0,h.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",u);else if("function"==typeof addEventListener){var d="onpagehide"in self?"pagehide":"unload";addEventListener(d,u,!1)}function u(){for(var e in h.requests)h.requests.hasOwnProperty(e)&&h.requests[e].abort()}},1:function(e,t){},"14A5":function(e,t){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,i=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),r=i&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;function s(e){return e.map(function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e})}function a(e,t){t=t||{};var i=new n;return s(e).forEach(function(e){i.append(e)}),t.type?i.getBlob(t.type):i.getBlob()}function l(e,t){return new Blob(s(e),t||{})}"undefined"!=typeof Blob&&(a.prototype=Blob.prototype,l.prototype=Blob.prototype),e.exports=i?r?Blob:l:o?a:void 0},"1Mk5":function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var i=0,r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},"1fDf":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("FFOo");function r(e){for(;e;){var t=e.destination;if(e.closed||e.isStopped)return!1;e=t&&t instanceof i.a?t:null}return!0}},"26FU":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),r=n("K9Ia"),o=n("8g8A"),s=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return i.c(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.a;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(r.a)},"2Bdj":function(e,t,n){"use strict";function i(e){return"function"==typeof e}n.d(t,"a",function(){return i})},"2Dig":function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},"2ePl":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},"2pII":function(e,t,n){var i=n("akSB"),r=n("1Mk5"),o=n("HjK1")("engine.io-client:socket"),s=n("7jRU"),a=n("Wm4p"),l=n("Uxeu"),c=n("TypT");function h(e,t){if(!(this instanceof h))return new h(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=l(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=l(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=h,h.priorWebsocketSuccess=!1,r(h.prototype),h.protocol=a.protocol,h.Socket=h,h.Transport=n("Gbct"),h.transports=n("akSB"),h.parser=n("Wm4p"),h.prototype.createTransport=function(e){o('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=a.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new i[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},h.prototype.open=function(){var e;if(this.rememberUpgrade&&h.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},h.prototype.setTransport=function(e){o("setting transport %s",e.name);var t=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},h.prototype.probe=function(e){o('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,i=this;function r(){i.onlyBinaryUpgrades&&(n=n||!this.supportsBinary&&i.transport.supportsBinary),n||(o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(r){if(!n)if("pong"===r.type&&"probe"===r.data){if(o('probe transport "%s" pong',e),i.upgrading=!0,i.emit("upgrading",t),!t)return;h.priorWebsocketSuccess="websocket"===t.name,o('pausing current transport "%s"',i.transport.name),i.transport.pause(function(){n||"closed"!==i.readyState&&(o("changing transport and sending upgrade packet"),u(),i.setTransport(t),t.send([{type:"upgrade"}]),i.emit("upgrade",t),t=null,i.upgrading=!1,i.flush())})}else{o('probe transport "%s" failed',e);var s=new Error("probe error");s.transport=t.name,i.emit("upgradeError",s)}}))}function s(){n||(n=!0,u(),t.close(),t=null)}function a(n){var r=new Error("probe error: "+n);r.transport=t.name,s(),o('probe transport "%s" failed because of error: %s',e,n),i.emit("upgradeError",r)}function l(){a("transport closed")}function c(){a("socket closed")}function d(e){t&&e.name!==t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),s())}function u(){t.removeListener("open",r),t.removeListener("error",a),t.removeListener("close",l),i.removeListener("close",c),i.removeListener("upgrading",d)}h.priorWebsocketSuccess=!1,t.once("open",r),t.once("error",a),t.once("close",l),this.once("close",c),this.once("upgrading",d),t.open()},h.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",h.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},h.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else o('packet received with socket readyState "%s"',this.readyState)},h.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},h.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},h.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},h.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},h.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},h.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},h.prototype.write=h.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},h.prototype.sendPacket=function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var r={type:e,data:t,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}},h.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?i():t()}):this.upgrading?i():t()}function t(){e.onClose("forced close"),o("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function i(){e.once("upgrade",n),e.once("upgradeError",n)}return this},h.prototype.onError=function(e){o("socket error %j",e),h.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},h.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(o('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},h.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;n<i;n++)~s(this.transports,e[n])&&t.push(e[n]);return t}},"2xqC":function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var i=0,r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},"3fWJ":function(e,t,n){"use strict";function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}n.d(t,"a",function(){return r}),i.prototype=Object.create(Error.prototype);var r=i},"3tVA":function(e,t){},"5M3R":function(e,t,n){function i(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=n("Nq7k")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,i)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=i,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(i())},"60iU":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("G5J1"),r=n("F/XL"),o=n("XlPw"),s=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Object(r.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(i.b)()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}()},"67Y/":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),r=n("FFOo");function o(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}(),a=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.project=n,r.count=0,r.thisArg=i||r,r}return i.c(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(r.a)},"6C75":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},"6ahw":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("iLxQ"),r=n("DKTb"),o={closed:!0,next:function(e){},error:function(e){if(i.a.useDeprecatedSynchronousErrorHandling)throw e;Object(r.a)(e)},complete:function(){}}},"6blF":function(e,t,n){"use strict";var i=n("1fDf"),r=n("FFOo"),o=n("L/V9"),s=n("6ahw"),a=n("xTla"),l=n("y3By"),c=n("iLxQ");n.d(t,"a",function(){return h});var h=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var i=this.operator,a=function(e,t,n){if(e){if(e instanceof r.a)return e;if(e[o.a])return e[o.a]()}return e||t||n?new r.a(e,t,n):new r.a(s.a)}(e,t,n);if(i?i.call(a,this.source):a.add(this.source||c.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){c.a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),Object(i.a)(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=d(t))(function(t,i){var r;r=n.subscribe(function(t){try{e(t)}catch(n){i(n),r&&r.unsubscribe()}},i,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[a.a]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Object(l.b)(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=d(e))(function(e,n){var i;t.subscribe(function(e){return i=e},function(e){return n(e)},function(){return e(i)})})},e.create=function(t){return new e(t)},e}();function d(e){if(e||(e=c.a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},"7jRU":function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},"8g8A":function(e,t,n){"use strict";function i(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}n.d(t,"a",function(){return r}),i.prototype=Object.create(Error.prototype);var r=i},"91uq":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("CcnG");t.DefaultSimpleModalOptionConfig=new i.InjectionToken("default-simple-modal.config"),t.SimpleModalOptions=function(){return function(){}}(),t.defaultSimpleModalOptions={closeOnEscape:!1,closeOnClickOutside:!1,bodyClass:"modal-open",wrapperDefaultClasses:"modal fade-anim",wrapperClass:"in",animationDuration:300}},AdPF:function(e,t,n){var i=n("yeub");e.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(o){}if(!t)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(o){}}},Aplp:function(e,t,n){"use strict";var i,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,s={},a=0,l=0;function c(e){var t="";do{t=r[e%o]+t,e=Math.floor(e/o)}while(e>0);return t}function h(){var e=c(+new Date);return e!==i?(a=0,i=e):e+"."+c(a++)}for(;l<o;l++)s[r[l]]=l;h.encode=c,h.decode=function(e){var t=0;for(l=0;l<e.length;l++)t=t*o+s[e.charAt(l)];return t},e.exports=h},C2QD:function(e,t){function n(e){this.ms=(e=e||{}).min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},CIKq:function(e,t,n){var i,r,o=n("Gbct"),s=n("Wm4p"),a=n("TypT"),l=n("Yvos"),c=n("Aplp"),h=n("HjK1")("engine.io-client:websocket");if("undefined"!=typeof WebSocket)i=WebSocket;else if("undefined"!=typeof self)i=self.WebSocket||self.MozWebSocket;else try{r=n(1)}catch(p){}var d=i||r;function u(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=i&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(d=r),o.call(this,e)}e.exports=u,l(u,o),u.prototype.name="websocket",u.prototype.supportsBinary=!0,u.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new d(e,t):new d(e):new d(e,t,n)}catch(i){return this.emit("error",i)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},u.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},u.prototype.write=function(e){var t=this;this.writable=!1;for(var n=e.length,i=0,r=n;i<r;i++)!function(e){s.encodePacket(e,t.supportsBinary,function(i){if(!t.usingBrowserWebSocket){var r={};e.options&&(r.compress=e.options.compress),t.perMessageDeflate&&("string"==typeof i?Buffer.byteLength(i):i.length)<t.perMessageDeflate.threshold&&(r.compress=!1)}try{t.usingBrowserWebSocket?t.ws.send(i):t.ws.send(i,r)}catch(p){h("websocket closed before onclose event")}--n||(t.emit("flush"),setTimeout(function(){t.writable=!0,t.emit("drain")},0))})}(e[i])},u.prototype.onClose=function(){o.prototype.onClose.call(this)},u.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},u.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===u.prototype.name)}},CS9Q:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),r=n("siIJ"),o=function(e){function t(n,i){void 0===i&&(i=r.a.now);var o=e.call(this,n,function(){return t.delegate&&t.delegate!==o?t.delegate.now():i()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return i.c(t,e),t.prototype.schedule=function(n,i,r){return void 0===i&&(i=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,i,r):e.prototype.schedule.call(this,n,i,r)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(r.a)},CUme:function(e,t,n){var i=n("Gbct"),r=n("TypT"),o=n("Wm4p"),s=n("Yvos"),a=n("Aplp"),l=n("HjK1")("engine.io-client:polling");e.exports=h;var c=null!=new(n("AdPF"))({xdomain:!1}).responseType;function h(e){c&&!(e&&e.forceBase64)||(this.supportsBinary=!1),i.call(this,e)}s(h,i),h.prototype.name="polling",h.prototype.doOpen=function(){this.poll()},h.prototype.pause=function(e){var t=this;function n(){l("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(l("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){l("pre-pause polling complete"),--i||n()})),this.writable||(l("we are currently writing - waiting to pause"),i++,this.once("drain",function(){l("pre-pause writing complete"),--i||n()}))}else n()},h.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},h.prototype.onData=function(e){var t=this;l("polling got data %s",e),o.decodePayload(e,this.socket.binaryType,function(e,n,i){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},h.prototype.doClose=function(){var e=this;function t(){l("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(l("transport open - closing"),t()):(l("transport not open - deferring close"),this.once("open",t))},h.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};o.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},h.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=r.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},CYgj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("CcnG"),r=(n("91uq"),n("DYXb"));t.SimpleModalHolderComponent=function(){function e(e,t){this.resolver=e,this.defaultSimpleModalOptions=t,this.modals=[]}return e.prototype.addModal=function(e,t,n){var i=this,o=this.resolver.resolveComponentFactory(r.SimpleModalWrapperComponent),s=this.viewContainer.createComponent(o).instance,a=s.addComponent(e);return a.options=n=Object.assign({},this.defaultSimpleModalOptions,n),s.modalClasses=n.wrapperDefaultClasses,this.modals.push(a),this.wait().then(function(){i.toggleWrapperClass(s.wrapper,n.wrapperClass),i.toggleBodyClass(n.bodyClass)}),a.onClosing(function(e){return i.removeModal(e)}),this.configureCloseOnClickOutside(s),a.mapDataObject(t),a.setupObserver()},e.prototype.removeModal=function(e){var t=this,n=e.options;return this.toggleWrapperClass(e.wrapper,n.wrapperClass),this.wait(n.animationDuration).then(function(){t.removeModalFromArray(e),t.toggleBodyClass(n.bodyClass)})},e.prototype.removeAllModals=function(){var e=this;return Promise.all(this.modals.map(function(t){return e.removeModal(t)}))},e.prototype.toggleBodyClass=function(e){if(e){var t,n,i=document.getElementsByTagName("body")[0],r=e.split(" ");this.modals.length?(n=i.classList).add.apply(n,r):(t=i.classList).remove.apply(t,r)}},e.prototype.configureCloseOnClickOutside=function(e){e.content.options.closeOnClickOutside&&e.onClickOutsideModalContent(e.content.options.closeOnClickOutside,function(){e.content.close()})},e.prototype.toggleWrapperClass=function(e,t){var n=e.nativeElement.classList,i=t.split(" ");-1!==n.toString().indexOf(t)?n.remove.apply(n,i):n.add.apply(n,i)},e.prototype.wait=function(e){return void 0===e&&(e=0),new Promise(function(t,n){setTimeout(function(){return t()},e)})},e.prototype.removeModalFromArray=function(e){var t=this.modals.indexOf(e);t>-1&&(this.viewContainer.remove(t),this.modals.splice(t,1))},e.decorators=[{type:i.Component,args:[{selector:"simple-modal-holder",template:"<ng-template #viewContainer></ng-template>"}]}],e.propDecorators={viewContainer:[{type:i.ViewChild,args:["viewContainer",{read:i.ViewContainerRef}]}]},e}()},CcnG:function(e,t,n){"use strict";n.r(t),n.d(t,"\u0275angular_packages_core_core_t",function(){return Jf}),n.d(t,"\u0275angular_packages_core_core_q",function(){return Xf}),n.d(t,"\u0275angular_packages_core_core_r",function(){return Zf}),n.d(t,"\u0275angular_packages_core_core_s",function(){return Kf}),n.d(t,"\u0275angular_packages_core_core_h",function(){return Zu}),n.d(t,"\u0275angular_packages_core_core_o",function(){return kf}),n.d(t,"\u0275angular_packages_core_core_p",function(){return _f}),n.d(t,"\u0275angular_packages_core_core_n",function(){return mf}),n.d(t,"\u0275angular_packages_core_core_m",function(){return gf}),n.d(t,"\u0275angular_packages_core_core_c",function(){return pa}),n.d(t,"\u0275angular_packages_core_core_d",function(){return Tt}),n.d(t,"\u0275angular_packages_core_core_e",function(){return Wu}),n.d(t,"\u0275angular_packages_core_core_f",function(){return Mu}),n.d(t,"\u0275angular_packages_core_core_g",function(){return Bu}),n.d(t,"\u0275angular_packages_core_core_l",function(){return od}),n.d(t,"\u0275angular_packages_core_core_u",function(){return Sp}),n.d(t,"\u0275angular_packages_core_core_w",function(){return wp}),n.d(t,"\u0275angular_packages_core_core_v",function(){return bp}),n.d(t,"\u0275angular_packages_core_core_z",function(){return Ap}),n.d(t,"\u0275angular_packages_core_core_x",function(){return Cp}),n.d(t,"\u0275angular_packages_core_core_y",function(){return xp}),n.d(t,"\u0275angular_packages_core_core_bc",function(){return Dn}),n.d(t,"\u0275angular_packages_core_core_bj",function(){return p}),n.d(t,"\u0275angular_packages_core_core_bd",function(){return Kt}),n.d(t,"\u0275angular_packages_core_core_be",function(){return $t}),n.d(t,"\u0275angular_packages_core_core_bf",function(){return yn}),n.d(t,"\u0275angular_packages_core_core_bi",function(){return rr}),n.d(t,"\u0275angular_packages_core_core_bm",function(){return Ke}),n.d(t,"\u0275angular_packages_core_core_i",function(){return dl}),n.d(t,"\u0275angular_packages_core_core_j",function(){return ul}),n.d(t,"\u0275angular_packages_core_core_k",function(){return pl}),n.d(t,"\u0275angular_packages_core_core_a",function(){return k}),n.d(t,"\u0275angular_packages_core_core_b",function(){return P}),n.d(t,"\u0275angular_packages_core_core_bk",function(){return c}),n.d(t,"\u0275angular_packages_core_core_ba",function(){return Qm}),n.d(t,"\u0275angular_packages_core_core_bb",function(){return cg}),n.d(t,"createPlatform",function(){return Gp}),n.d(t,"assertPlatform",function(){return Qp}),n.d(t,"destroyPlatform",function(){return Yp}),n.d(t,"getPlatform",function(){return Xp}),n.d(t,"PlatformRef",function(){return Zp}),n.d(t,"ApplicationRef",function(){return Jp}),n.d(t,"createPlatformFactory",function(){return qp}),n.d(t,"NgProbeToken",function(){return Wp}),n.d(t,"enableProdMode",function(){return zl}),n.d(t,"isDevMode",function(){return Fl}),n.d(t,"APP_ID",function(){return Xu}),n.d(t,"PACKAGE_ROOT_URL",function(){return np}),n.d(t,"PLATFORM_INITIALIZER",function(){return $u}),n.d(t,"PLATFORM_ID",function(){return ep}),n.d(t,"APP_BOOTSTRAP_LISTENER",function(){return tp}),n.d(t,"APP_INITIALIZER",function(){return Qu}),n.d(t,"ApplicationInitStatus",function(){return Yu}),n.d(t,"DebugElement",function(){return Df}),n.d(t,"DebugNode",function(){return If}),n.d(t,"asNativeElements",function(){return yf}),n.d(t,"getDebugNode",function(){return Of}),n.d(t,"Testability",function(){return Np}),n.d(t,"TestabilityRegistry",function(){return Bp}),n.d(t,"setTestabilityGetter",function(){return Fp}),n.d(t,"TRANSLATIONS",function(){return qf}),n.d(t,"TRANSLATIONS_FORMAT",function(){return Qf}),n.d(t,"LOCALE_ID",function(){return Gf}),n.d(t,"MissingTranslationStrategy",function(){return Yf}),n.d(t,"ApplicationModule",function(){return $f}),n.d(t,"wtfCreateScope",function(){return Ep}),n.d(t,"wtfLeave",function(){return Ip}),n.d(t,"wtfStartTimeRange",function(){return Dp}),n.d(t,"wtfEndTimeRange",function(){return kp}),n.d(t,"Type",function(){return cd}),n.d(t,"EventEmitter",function(){return gh}),n.d(t,"ErrorHandler",function(){return Su}),n.d(t,"Sanitizer",function(){return Il}),n.d(t,"SecurityContext",function(){return El}),n.d(t,"ANALYZE_FOR_ENTRY_COMPONENTS",function(){return T}),n.d(t,"Attribute",function(){return M}),n.d(t,"ContentChild",function(){return L}),n.d(t,"ContentChildren",function(){return R}),n.d(t,"Query",function(){return j}),n.d(t,"ViewChild",function(){return N}),n.d(t,"ViewChildren",function(){return _}),n.d(t,"Component",function(){return Ud}),n.d(t,"Directive",function(){return Vd}),n.d(t,"HostBinding",function(){return Yd}),n.d(t,"HostListener",function(){return Xd}),n.d(t,"Input",function(){return qd}),n.d(t,"Output",function(){return Qd}),n.d(t,"Pipe",function(){return Wd}),n.d(t,"CUSTOM_ELEMENTS_SCHEMA",function(){return ou}),n.d(t,"NO_ERRORS_SCHEMA",function(){return su}),n.d(t,"NgModule",function(){return au}),n.d(t,"ViewEncapsulation",function(){return ie}),n.d(t,"Version",function(){return Dl}),n.d(t,"VERSION",function(){return kl}),n.d(t,"defineInjectable",function(){return b}),n.d(t,"defineInjector",function(){return w}),n.d(t,"forwardRef",function(){return K}),n.d(t,"resolveForwardRef",function(){return J}),n.d(t,"Injectable",function(){return gu}),n.d(t,"INJECTOR",function(){return ua}),n.d(t,"Injector",function(){return fa}),n.d(t,"inject",function(){return Mt}),n.d(t,"\u0275inject",function(){return Mt}),n.d(t,"InjectFlags",function(){return It}),n.d(t,"ReflectiveInjector",function(){return Uu}),n.d(t,"createInjector",function(){return La}),n.d(t,"ResolvedReflectiveFactory",function(){return Lu}),n.d(t,"ReflectiveKey",function(){return ku}),n.d(t,"InjectionToken",function(){return A}),n.d(t,"Inject",function(){return xt}),n.d(t,"Optional",function(){return At}),n.d(t,"Self",function(){return St}),n.d(t,"SkipSelf",function(){return Ot}),n.d(t,"Host",function(){return Et}),n.d(t,"NgZone",function(){return Pp}),n.d(t,"\u0275NoopNgZone",function(){return _p}),n.d(t,"RenderComponentType",function(){return yl}),n.d(t,"Renderer",function(){return bl}),n.d(t,"Renderer2",function(){return Al}),n.d(t,"RendererFactory2",function(){return Cl}),n.d(t,"RendererStyleFlags2",function(){return xl}),n.d(t,"RootRenderer",function(){return wl}),n.d(t,"COMPILER_OPTIONS",function(){return yp}),n.d(t,"Compiler",function(){return mp}),n.d(t,"CompilerFactory",function(){return vp}),n.d(t,"ModuleWithComponentFactories",function(){return rp}),n.d(t,"ComponentFactory",function(){return Ka}),n.d(t,"\u0275ComponentFactory",function(){return Ka}),n.d(t,"ComponentRef",function(){return Za}),n.d(t,"ComponentFactoryResolver",function(){return rl}),n.d(t,"ElementRef",function(){return fl}),n.d(t,"NgModuleFactory",function(){return ll}),n.d(t,"NgModuleRef",function(){return al}),n.d(t,"NgModuleFactoryLoader",function(){return td}),n.d(t,"getModuleFactory",function(){return ad}),n.d(t,"QueryList",function(){return ef}),n.d(t,"SystemJsNgModuleLoader",function(){return rf}),n.d(t,"SystemJsNgModuleLoaderConfig",function(){return tf}),n.d(t,"TemplateRef",function(){return mh}),n.d(t,"ViewContainerRef",function(){return sf}),n.d(t,"EmbeddedViewRef",function(){return pf}),n.d(t,"ViewRef",function(){return uf}),n.d(t,"ChangeDetectionStrategy",function(){return B}),n.d(t,"ChangeDetectorRef",function(){return cf}),n.d(t,"DefaultIterableDiffer",function(){return Tf}),n.d(t,"IterableDiffers",function(){return Ff}),n.d(t,"KeyValueDiffers",function(){return zf}),n.d(t,"SimpleChange",function(){return hi}),n.d(t,"WrappedValue",function(){return ci}),n.d(t,"platformCore",function(){return Wf}),n.d(t,"\u0275ALLOW_MULTIPLE_PLATFORMS",function(){return Up}),n.d(t,"\u0275APP_ID_RANDOM_PROVIDER",function(){return Ku}),n.d(t,"\u0275defaultIterableDiffers",function(){return Vf}),n.d(t,"\u0275defaultKeyValueDiffers",function(){return Uf}),n.d(t,"\u0275devModeEqual",function(){return li}),n.d(t,"\u0275isListLikeIterable",function(){return di}),n.d(t,"\u0275ChangeDetectorStatus",function(){return F}),n.d(t,"\u0275isDefaultChangeDetectionStrategy",function(){return z}),n.d(t,"\u0275Console",function(){return ip}),n.d(t,"\u0275getInjectableDef",function(){return C}),n.d(t,"\u0275setCurrentInjector",function(){return kt}),n.d(t,"\u0275APP_ROOT",function(){return ka}),n.d(t,"\u0275ivyEnabled",function(){return tg}),n.d(t,"\u0275CodegenComponentFactoryResolver",function(){return ol}),n.d(t,"\u0275resolveComponentResources",function(){return $}),n.d(t,"\u0275ReflectionCapabilities",function(){return fd}),n.d(t,"\u0275RenderDebugInfo",function(){return vl}),n.d(t,"\u0275_sanitizeHtml",function(){return lc}),n.d(t,"\u0275_sanitizeStyle",function(){return qh}),n.d(t,"\u0275_sanitizeUrl",function(){return Wl}),n.d(t,"\u0275global",function(){return U}),n.d(t,"\u0275looseIdentical",function(){return Y}),n.d(t,"\u0275stringify",function(){return X}),n.d(t,"\u0275makeDecorator",function(){return I}),n.d(t,"\u0275isObservable",function(){return qu}),n.d(t,"\u0275isPromise",function(){return Gu}),n.d(t,"\u0275clearOverrides",function(){return kv}),n.d(t,"\u0275initServicesIfNeeded",function(){return Wy}),n.d(t,"\u0275overrideComponentView",function(){return Dv}),n.d(t,"\u0275overrideProvider",function(){return Iv}),n.d(t,"\u0275NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR",function(){return ey}),n.d(t,"\u0275defineBase",function(){return ue}),n.d(t,"\u0275defineComponent",function(){return ae}),n.d(t,"\u0275defineDirective",function(){return pe}),n.d(t,"\u0275definePipe",function(){return fe}),n.d(t,"\u0275defineNgModule",function(){return he}),n.d(t,"\u0275detectChanges",function(){return ms}),n.d(t,"\u0275renderComponent",function(){return Zs}),n.d(t,"\u0275Render3ComponentFactory",function(){return Ll}),n.d(t,"\u0275Render3ComponentRef",function(){return _l}),n.d(t,"\u0275directiveInject",function(){return _s}),n.d(t,"\u0275injectAttribute",function(){return Ns}),n.d(t,"\u0275getFactoryOf",function(){return Nn}),n.d(t,"\u0275getInheritedFactory",function(){return Bn}),n.d(t,"\u0275templateRefExtractor",function(){return Lh}),n.d(t,"\u0275ProvidersFeature",function(){return Xa}),n.d(t,"\u0275InheritDefinitionFeature",function(){return ia}),n.d(t,"\u0275NgOnChangesFeature",function(){return sa}),n.d(t,"\u0275LifecycleHooksFeature",function(){return ea}),n.d(t,"\u0275Render3NgModuleRef",function(){return Yc}),n.d(t,"\u0275markDirty",function(){return ws}),n.d(t,"\u0275NgModuleFactory",function(){return Xc}),n.d(t,"\u0275NO_CHANGE",function(){return fi}),n.d(t,"\u0275container",function(){return is}),n.d(t,"\u0275nextContext",function(){return uo}),n.d(t,"\u0275elementStart",function(){return xo}),n.d(t,"\u0275namespaceHTML",function(){return vo}),n.d(t,"\u0275namespaceMathML",function(){return yo}),n.d(t,"\u0275namespaceSVG",function(){return mo}),n.d(t,"\u0275element",function(){return bo}),n.d(t,"\u0275listener",function(){return ko}),n.d(t,"\u0275text",function(){return Go}),n.d(t,"\u0275embeddedViewStart",function(){return as}),n.d(t,"\u0275query",function(){return jh}),n.d(t,"\u0275registerContentQuery",function(){return Bs}),n.d(t,"\u0275projection",function(){return ds}),n.d(t,"\u0275bind",function(){return Cs}),n.d(t,"\u0275interpolation1",function(){return Ss}),n.d(t,"\u0275interpolation2",function(){return Os}),n.d(t,"\u0275interpolation3",function(){return Es}),n.d(t,"\u0275interpolation4",function(){return Is}),n.d(t,"\u0275interpolation5",function(){return Ds}),n.d(t,"\u0275interpolation6",function(){return ks}),n.d(t,"\u0275interpolation7",function(){return Ps}),n.d(t,"\u0275interpolation8",function(){return Ts}),n.d(t,"\u0275interpolationV",function(){return As}),n.d(t,"\u0275pipeBind1",function(){return lh}),n.d(t,"\u0275pipeBind2",function(){return ch}),n.d(t,"\u0275pipeBind3",function(){return hh}),n.d(t,"\u0275pipeBind4",function(){return dh}),n.d(t,"\u0275pipeBindV",function(){return uh}),n.d(t,"\u0275pureFunction0",function(){return Kc}),n.d(t,"\u0275pureFunction1",function(){return Jc}),n.d(t,"\u0275pureFunction2",function(){return $c}),n.d(t,"\u0275pureFunction3",function(){return eh}),n.d(t,"\u0275pureFunction4",function(){return th}),n.d(t,"\u0275pureFunction5",function(){return nh}),n.d(t,"\u0275pureFunction6",function(){return ih}),n.d(t,"\u0275pureFunction7",function(){return rh}),n.d(t,"\u0275pureFunction8",function(){return oh}),n.d(t,"\u0275pureFunctionV",function(){return sh}),n.d(t,"\u0275getCurrentView",function(){return Hs}),n.d(t,"\u0275getHostElement",function(){return ti}),n.d(t,"\u0275restoreView",function(){return Jt}),n.d(t,"\u0275containerRefreshStart",function(){return os}),n.d(t,"\u0275containerRefreshEnd",function(){return ss}),n.d(t,"\u0275queryRefresh",function(){return Rh}),n.d(t,"\u0275loadQueryList",function(){return Rs}),n.d(t,"\u0275elementEnd",function(){return Po}),n.d(t,"\u0275elementProperty",function(){return Mo}),n.d(t,"\u0275componentHostSyntheticProperty",function(){return jo}),n.d(t,"\u0275projectionDef",function(){return cs}),n.d(t,"\u0275reference",function(){return js}),n.d(t,"\u0275enableBindings",function(){return Xt}),n.d(t,"\u0275disableBindings",function(){return Zt}),n.d(t,"\u0275allocHostVars",function(){return xs}),n.d(t,"\u0275elementAttribute",function(){return To}),n.d(t,"\u0275elementContainerStart",function(){return wo}),n.d(t,"\u0275elementContainerEnd",function(){return Co}),n.d(t,"\u0275elementStyling",function(){return Fo}),n.d(t,"\u0275elementHostAttrs",function(){return zo}),n.d(t,"\u0275elementStylingMap",function(){return Wo}),n.d(t,"\u0275elementStyleProp",function(){return Vo}),n.d(t,"\u0275elementStylingApply",function(){return Ho}),n.d(t,"\u0275elementClassProp",function(){return Uo}),n.d(t,"\u0275textBinding",function(){return qo}),n.d(t,"\u0275template",function(){return ns}),n.d(t,"\u0275embeddedViewEnd",function(){return ls}),n.d(t,"\u0275store",function(){return Ms}),n.d(t,"\u0275load",function(){return Ls}),n.d(t,"\u0275pipe",function(){return ah}),n.d(t,"\u0275whenRendered",function(){return ta}),n.d(t,"\u0275i18n",function(){return _c}),n.d(t,"\u0275i18nAttributes",function(){return Nc}),n.d(t,"\u0275i18nExp",function(){return zc}),n.d(t,"\u0275i18nStart",function(){return Pc}),n.d(t,"\u0275i18nEnd",function(){return jc}),n.d(t,"\u0275i18nApply",function(){return Hc}),n.d(t,"\u0275i18nPostprocess",function(){return Mc}),n.d(t,"\u0275setClassMetadata",function(){return Zc}),n.d(t,"\u0275compileComponent",function(){return Rd}),n.d(t,"\u0275compileDirective",function(){return Ld}),n.d(t,"\u0275compileNgModule",function(){return Od}),n.d(t,"\u0275compileNgModuleDefs",function(){return Ed}),n.d(t,"\u0275patchComponentDefWithScope",function(){return kd}),n.d(t,"\u0275resetCompiledComponents",function(){return Id}),n.d(t,"\u0275compilePipe",function(){return Hd}),n.d(t,"\u0275sanitizeHtml",function(){return Qh}),n.d(t,"\u0275sanitizeStyle",function(){return Yh}),n.d(t,"\u0275defaultStyleSanitizer",function(){return Jh}),n.d(t,"\u0275sanitizeScript",function(){return Kh}),n.d(t,"\u0275sanitizeUrl",function(){return Xh}),n.d(t,"\u0275sanitizeResourceUrl",function(){return Zh}),n.d(t,"\u0275bypassSanitizationTrustHtml",function(){return Bh}),n.d(t,"\u0275bypassSanitizationTrustStyle",function(){return Fh}),n.d(t,"\u0275bypassSanitizationTrustScript",function(){return zh}),n.d(t,"\u0275bypassSanitizationTrustUrl",function(){return Hh}),n.d(t,"\u0275bypassSanitizationTrustResourceUrl",function(){return Vh}),n.d(t,"\u0275getLContext",function(){return Fn}),n.d(t,"\u0275bindPlayerFactory",function(){return ir}),n.d(t,"\u0275addPlayer",function(){return Ws}),n.d(t,"\u0275getPlayers",function(){return Gs}),n.d(t,"\u0275compileNgModuleFactory__POST_R3__",function(){return Vp}),n.d(t,"\u0275SWITCH_COMPILE_COMPONENT__POST_R3__",function(){return Zd}),n.d(t,"\u0275SWITCH_COMPILE_DIRECTIVE__POST_R3__",function(){return Kd}),n.d(t,"\u0275SWITCH_COMPILE_PIPE__POST_R3__",function(){return Jd}),n.d(t,"\u0275SWITCH_COMPILE_NGMODULE__POST_R3__",function(){return lu}),n.d(t,"\u0275getDebugNode__POST_R3__",function(){return Sf}),n.d(t,"\u0275SWITCH_COMPILE_INJECTABLE__POST_R3__",function(){return mu}),n.d(t,"\u0275SWITCH_IVY_ENABLED__POST_R3__",function(){return eg}),n.d(t,"\u0275SWITCH_CHANGE_DETECTOR_REF_FACTORY__POST_R3__",function(){return hf}),n.d(t,"\u0275Compiler_compileModuleSync__POST_R3__",function(){return lp}),n.d(t,"\u0275Compiler_compileModuleAsync__POST_R3__",function(){return hp}),n.d(t,"\u0275Compiler_compileModuleAndAllComponentsSync__POST_R3__",function(){return up}),n.d(t,"\u0275Compiler_compileModuleAndAllComponentsAsync__POST_R3__",function(){return fp}),n.d(t,"\u0275SWITCH_ELEMENT_REF_FACTORY__POST_R3__",function(){return gl}),n.d(t,"\u0275SWITCH_TEMPLATE_REF_FACTORY__POST_R3__",function(){return yh}),n.d(t,"\u0275SWITCH_VIEW_CONTAINER_REF_FACTORY__POST_R3__",function(){return af}),n.d(t,"\u0275SWITCH_RENDERER2_FACTORY__POST_R3__",function(){return Sl}),n.d(t,"\u0275getModuleFactory__POST_R3__",function(){return sd}),n.d(t,"\u0275publishGlobalUtil",function(){return Xs}),n.d(t,"\u0275publishDefaultGlobalUtils",function(){return Ys}),n.d(t,"\u0275SWITCH_INJECTOR_FACTORY__POST_R3__",function(){return ga}),n.d(t,"\u0275registerModuleFactory",function(){return id}),n.d(t,"\u0275EMPTY_ARRAY",function(){return Kg}),n.d(t,"\u0275EMPTY_MAP",function(){return Jg}),n.d(t,"\u0275and",function(){return $g}),n.d(t,"\u0275ccf",function(){return bm}),n.d(t,"\u0275cmf",function(){return Pv}),n.d(t,"\u0275crt",function(){return wg}),n.d(t,"\u0275did",function(){return Wm}),n.d(t,"\u0275eld",function(){return em}),n.d(t,"\u0275elementEventFullName",function(){return Tg}),n.d(t,"\u0275getComponentViewDefinitionFactory",function(){return wm}),n.d(t,"\u0275inlineInterpolate",function(){return Xg}),n.d(t,"\u0275interpolate",function(){return Yg}),n.d(t,"\u0275mod",function(){return hm}),n.d(t,"\u0275mpd",function(){return cm}),n.d(t,"\u0275ncd",function(){return uy}),n.d(t,"\u0275nov",function(){return Tm}),n.d(t,"\u0275pid",function(){return Gm}),n.d(t,"\u0275prd",function(){return qm}),n.d(t,"\u0275pad",function(){return gy}),n.d(t,"\u0275pod",function(){return my}),n.d(t,"\u0275ppd",function(){return fy}),n.d(t,"\u0275qud",function(){return ay}),n.d(t,"\u0275ted",function(){return vy}),n.d(t,"\u0275unv",function(){return yg}),n.d(t,"\u0275vid",function(){return Cy});var i=n("mrSG"),r=n("pugT"),o=n("K9Ia"),s=n("6blF"),a=n("p0ib"),l=n("S1nX");function c(e){for(var t in e)if(e[t]===c)return t;throw Error("Could not find renamed property on target object.")}function h(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}var d=c({ngComponentDef:c}),u=c({ngDirectiveDef:c}),p=c({ngInjectableDef:c}),f=c({ngInjectorDef:c}),g=c({ngPipeDef:c}),m=c({ngModuleDef:c}),y=c({ngBaseDef:c}),v=c({__NG_ELEMENT_ID__:c});function b(e){return{providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function w(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function C(e){return e&&e.hasOwnProperty(p)?e[p]:null}function x(e){return e&&e.hasOwnProperty(f)?e[f]:null}var A=function(){function e(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==t?b({providedIn:t.providedIn||"root",factory:t.factory}):void 0}return e.prototype.toString=function(){return"InjectionToken "+this._desc},e}(),S="__annotations__",O="__parameters__",E="__prop__metadata__";function I(e,t,n,r,o){var s=D(t);function a(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this instanceof a)return s.call.apply(s,Object(i.g)([this],t)),this;var l=new((e=a).bind.apply(e,Object(i.g)([void 0],t)));return function(e){return o&&o.apply(void 0,Object(i.g)([e],t)),(e.hasOwnProperty(S)?e[S]:Object.defineProperty(e,S,{value:[]})[S]).push(l),r&&r(e),e}}return n&&(a.prototype=Object.create(n.prototype)),a.prototype.ngMetadataName=e,a.annotationCls=a,a}function D(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e){var r=e.apply(void 0,Object(i.g)(t));for(var o in r)this[o]=r[o]}}}function k(e,t,n){var r=D(t);function o(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this instanceof o)return r.apply(this,t),this;var s=new((e=o).bind.apply(e,Object(i.g)([void 0],t)));return a.annotation=s,a;function a(e,t,n){for(var i=e.hasOwnProperty(O)?e[O]:Object.defineProperty(e,O,{value:[]})[O];i.length<=n;)i.push(null);return(i[n]=i[n]||[]).push(s),e}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o}function P(e,t,n,r){var o=D(t);function s(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this instanceof s)return o.apply(this,t),this;var a=new((e=s).bind.apply(e,Object(i.g)([void 0],t)));return function(e,n){var o=e.constructor,s=o.hasOwnProperty(E)?o[E]:Object.defineProperty(o,E,{value:{}})[E];s[n]=s.hasOwnProperty(n)&&s[n]||[],s[n].unshift(a),r&&r.apply(void 0,Object(i.g)([e,n],t))}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s}var T=new A("AnalyzeForEntryComponents"),M=k("Attribute",function(e){return{attributeName:e}}),j=function(){return function(){}}(),R=P("ContentChildren",function(e,t){return void 0===t&&(t={}),Object(i.a)({selector:e,first:!1,isViewQuery:!1,descendants:!1},t)},j),L=P("ContentChild",function(e,t){return void 0===t&&(t={}),Object(i.a)({selector:e,first:!0,isViewQuery:!1,descendants:!0},t)},j),_=P("ViewChildren",function(e,t){return void 0===t&&(t={}),Object(i.a)({selector:e,first:!1,isViewQuery:!0,descendants:!0},t)},j),N=P("ViewChild",function(e,t){return Object(i.a)({selector:e,first:!0,isViewQuery:!0,descendants:!0},t)},j),B=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),F=function(e){return e[e.CheckOnce=0]="CheckOnce",e[e.Checked=1]="Checked",e[e.CheckAlways=2]="CheckAlways",e[e.Detached=3]="Detached",e[e.Errored=4]="Errored",e[e.Destroyed=5]="Destroyed",e}({});function z(e){return null==e||e===B.Default}var H="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global||H||V,W=Promise.resolve(0),G=null;function q(){if(!G){var e=U.Symbol;if(e&&e.iterator)G=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var i=t[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(G=i)}}return G}function Q(e){"undefined"==typeof Zone?W.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}function Y(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function X(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(X).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}var Z=c({__forward_ref__:c});function K(e){return e.__forward_ref__=K,e.toString=function(){return X(this())},e}function J(e){var t=e;return"function"==typeof t&&t.hasOwnProperty(Z)&&t.__forward_ref__===K?t():e}function $(e){var t=[],n=new Map;function i(i){var r=n.get(i);if(!r){var o=e(i);n.set(i,r=o.then(ne)),t.push(r)}return r}return ee.forEach(function(e){e.templateUrl&&i(e.templateUrl).then(function(t){e.template=t,e.templateUrl=void 0});var t=e.styleUrls,n=e.styles||(e.styles=[]),r=e.styles.length;t&&t.forEach(function(o,s){n.push(""),i(o).then(function(i){n[r+s]=i,t.splice(t.indexOf(o),1),0==t.length&&(e.styleUrls=void 0)})})}),ee.clear(),Promise.all(t).then(function(){return null})}var ee=new Set;function te(e){return e.templateUrl||e.styleUrls&&e.styleUrls.length}function ne(e){return"string"==typeof e?e:e.text()}var ie=function(e){return e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({}),re={},oe=[],se=0;function ae(e){var t=e.type,n=t.prototype,i={},r={type:t,providersResolver:null,consts:e.consts,vars:e.vars,factory:e.factory,template:e.template||null,hostBindings:e.hostBindings||null,contentQueries:e.contentQueries||null,contentQueriesRefresh:e.contentQueriesRefresh||null,attributes:e.attributes||null,declaredInputs:i,inputs:null,outputs:null,exportAs:e.exportAs||null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:e.changeDetection===B.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||ie.Emulated,id:"c",styles:e.styles||oe,_:null};return r._=""+{toString:function(){var t=e.directives,n=e.features,o=e.pipes;r.id+=se++,r.inputs=de(e.inputs,i),r.outputs=de(e.outputs),n&&n.forEach(function(e){return e(r)}),r.directiveDefs=t?function(){return("function"==typeof t?t():t).map(le)}:null,r.pipeDefs=o?function(){return("function"==typeof o?o():o).map(ce)}:null}},r}function le(e){return ge(e)||me(e)}function ce(e){return ye(e)}function he(e){return{type:e.type,bootstrap:e.bootstrap||oe,declarations:e.declarations||oe,imports:e.imports||oe,exports:e.exports||oe,transitiveCompileScopes:null}}function de(e,t){if(null==e)return re;var n={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,t&&(t[r]=o)}return n}function ue(e){var t={};return{inputs:de(e.inputs,t),declaredInputs:t,outputs:de(e.outputs)}}var pe=ae;function fe(e){return{name:e.name,factory:e.factory,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function ge(e){return e[d]||null}function me(e){return e[u]||null}function ye(e){return e[g]||null}function ve(e,t){var n=e[m]||null;if(!n&&!0===t)throw new Error("Type "+X(e)+" does not have 'ngModuleDef' property.");return n}var be=0,we=1,Ce=2,xe=3,Ae=4,Se=5,Oe=6,Ee=7,Ie=8,De=9,ke=10,Pe=11,Te=12,Me=13,je=14,Re=15,Le=16,_e=17,Ne=18,Be=0,Fe=1,ze=6,He=7,Ve=8,Ue="__ngContext__",We=8,Ge=8,qe=9,Qe=-1,Ye=function(){return function(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}(),Xe=Ye.prototype;function Ze(e){return"function"==typeof e?e.name||e:"string"==typeof e?e:null==e?"":"object"==typeof e&&"function"==typeof e.type?e.type.name||e.type:""+e}function Ke(e,t){return e[t+Ne]}function Je(e){for(;Array.isArray(e);)e=e[Se];return e}function $e(e,t){return Je(t[e+Ne])}function et(e,t){return Je(t[e.index])}function tt(e,t){return t[be].data[e+Ne]}function nt(e,t){var n=t[e];return n.length>=Ne?n:n[Se]}function it(e){return 0!=(4&e.flags)}function rt(e){return 1==(1&e.flags)}function ot(e){return null!==e.template}function st(e){return Array.isArray(e)&&e.length===Ve}function at(e){return 0!=(128&e[we])}function lt(e){for(var t=Array.isArray(e)?e:dt(e);t&&!(128&t[we]);)t=t[Ce];return t}function ct(e){return lt(e)[De]}function ht(e){return e[Ue]}function dt(e){var t=ht(e);return t?Array.isArray(t)?t:t.lView:null}function ut(e){return e!==Qe}function pt(e){return 32767&e}function ft(e){return e>>16}function gt(e,t){for(var n=ft(e),i=t;n>0;)i=i[_e],n--;return i}var mt=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(U);function yt(e,t){for(var n=0;n<e.length;n++)t.push(e[n])}function vt(e){for(var t=e[Oe];t&&2===t.type;)t=(e=e[_e])[Oe];return e}function bt(){var e=U.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}var wt,Ct,xt=k("Inject",function(e){return{token:e}}),At=k("Optional"),St=k("Self"),Ot=k("SkipSelf"),Et=k("Host"),It=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({}),Dt=void 0;function kt(e){var t=Dt;return Dt=e,t}function Pt(e){var t=wt;return wt=e,t}function Tt(e,t){if(void 0===t&&(t=It.Default),void 0===Dt)throw new Error("inject() must be called from an injection context");return null===Dt?jt(e,void 0,t):Dt.get(e,t&It.Optional?null:void 0,t)}function Mt(e,t){return void 0===t&&(t=It.Default),(wt||Tt)(e,t)}function jt(e,t,n){var i=C(e);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&It.Optional)return null;if(void 0!==t)return t;throw new Error("Injector: NOT_FOUND ["+X(e)+"]")}function Rt(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");for(var r=void 0,o=It.Default,s=0;s<i.length;s++){var a=i[s];a instanceof At||"Optional"===a.ngMetadataName?o|=It.Optional:a instanceof Ot||"SkipSelf"===a.ngMetadataName?o|=It.SkipSelf:a instanceof St||"Self"===a.ngMetadataName?o|=It.Self:r=a instanceof xt?a.token:a}t.push(Mt(r,o))}else t.push(Mt(i))}return t}function Lt(e,t,n,i){t&&(i.initHooks||(i.initHooks=[])).push(e,t),n&&((i.initHooks||(i.initHooks=[])).push(e,n),(i.checkHooks||(i.checkHooks=[])).push(e,n))}function _t(e,t){if(e.firstTemplatePass)for(var n=t.directiveStart,i=t.directiveEnd;n<i;n++){var r=e.data[n];Nt(r,e,n),Bt(r,e,n),Ft(r,e,n)}}function Nt(e,t,n){e.afterContentInit&&(t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentInit),e.afterContentChecked&&((t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentChecked),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,e.afterContentChecked))}function Bt(e,t,n){e.afterViewInit&&(t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewInit),e.afterViewChecked&&((t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewChecked),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,e.afterViewChecked))}function Ft(e,t,n){null!=e.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(n,e.onDestroy)}function zt(e,t,n){!n&&32&e[we]&&(Ht(e,t.initHooks,t.checkHooks,n),e[we]&=-33)}function Ht(e,t,n,i){if(!i){var r=2&e[we]?t:n;r&&Vt(e,r)}}function Vt(e,t){for(var n=0;n<t.length;n+=2)t[n+1].call(e[t[n]])}var Ut,Wt,Gt,qt,Qt=null;function Yt(e){Qt=e}function Xt(){Ut=!0}function Zt(){Ut=!1}function Kt(){return qt}function Jt(e){sn=e}function $t(){return Wt}function en(e){Wt=e}function tn(e,t){Wt=e,qt=t}function nn(){return Gt}function rn(e){Gt=e}function on(e){return void 0===e&&(e=qt),1==(1&e[we])}var sn=null,an=!1;function ln(){return an}function cn(e){an=e}var hn=!0;function dn(){return hn}function un(e){hn=e}var pn=-1;function fn(){return pn}function gn(e){pn=e}function mn(e,t){var n=qt;if(e){var i=e[be];hn=i.firstTemplatePass,pn=i.bindingStartIndex}return Wt=t,Gt=!0,qt=sn=e,n}function yn(e){return void 0===e&&(e=1),(sn=function(e,t){for(;e>0;)t=t[_e],e--;return t}(e,sn))[De]}function vn(e){var t=qt[be];on(qt)?qt[we]&=-2:(Ht(qt,t.viewHooks,t.viewCheckHooks,an),qt[we]&=-11,qt[we]|=32,qt[Ee]=t.bindingStartIndex),mn(e,null)}var bn=!0;function wn(e){var t=bn;return bn=e,t}var Cn=255,xn=0;function An(e,t){var n=On(e,t);if(-1!==n)return n;var i=t[be];i.firstTemplatePass&&(e.injectorIndex=t.length,Sn(i.data,e),Sn(t,null),Sn(i.blueprint,null));var r=En(e,t),o=pt(r),s=gt(r,t),a=e.injectorIndex;if(ut(r))for(var l=s[be].data,c=0;c<8;c++)t[a+c]=s[o+c]|l[o+c];return t[a+Ge]=r,a}function Sn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function On(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+Ge]?-1:e.injectorIndex}function En(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=t[Oe],i=1;n&&-1===n.injectorIndex;)n=(t=t[_e])?t[Oe]:null,i++;return n?n.injectorIndex|i<<16:-1}function In(e,t,n){!function(e,t,n){var i="string"!=typeof n?n[v]:n.charCodeAt(0)||0;null==i&&(i=n[v]=xn++);var r=i&Cn,o=1<<r,s=64&r,a=32&r,l=t.data;128&r?s?a?l[e+7]|=o:l[e+6]|=o:a?l[e+5]|=o:l[e+4]|=o:s?a?l[e+3]|=o:l[e+2]|=o:a?l[e+1]|=o:l[e]|=o}(e,t[be],n)}function Dn(e,t){var n=e.attrs;if(n)for(var i=0;i<n.length;i+=2){var r=n[i];if(3===r)break;if(r==t)return n[i+1]}return null}function kn(e,t,n,i,r){if(void 0===i&&(i=It.Default),e){var o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e[v];return"number"==typeof t?t&Cn:t}(n);if("function"==typeof o){var s=$t(),a=Kt();tn(e,t);try{var l=o();if(null!=l||i&It.Optional)return l;throw new Error("No provider for "+Ze(n)+"!")}finally{tn(s,a)}}else if("number"==typeof o){var c=null,h=On(e,t),d=Qe,u=i&It.Host?vt(t)[Oe]:null;for((-1===h||i&It.SkipSelf)&&(d=-1===h?En(e,t):t[h+Ge],Ln(i,!1)?(c=t[be],h=pt(d),t=gt(d,t)):h=-1);-1!==h;){d=t[h+Ge];var p=t[be];if(Rn(o,h,p.data)){var f=Tn(h,t,n,c,i,u);if(f!==Pn)return f}Ln(i,t[be].data[h+We]===u)&&Rn(o,h,t)?(c=p,h=pt(d),t=gt(d,t)):h=-1}}}if(i&It.Optional&&void 0===r&&(r=null),0==(i&(It.Self|It.Host))){var g=t[ke];return g?g.get(n,r,i&It.Optional):jt(n,r,i&It.Optional)}if(i&It.Optional)return r;throw new Error("NodeInjector: NOT_FOUND ["+Ze(n)+"]")}var Pn={};function Tn(e,t,n,i,r,o){var s=t[be],a=s.data[e+We],l=Mn(a,t,n,null==i?rt(a)&&bn:i!=s&&3===a.type,r&It.Host&&o===a);return null!==l?jn(s.data,t,l,a):Pn}function Mn(e,t,n,i,r){for(var o=e.providerIndexes,s=t[be].data,a=65535&o,l=e.directiveStart,c=o>>16,h=r?a+c:e.directiveEnd,d=i?a:a+c;d<h;d++){var u=s[d];if(d<l&&n===u||d>=l&&u.type===n)return d}if(r){var p=s[l];if(p&&ot(p)&&p.type===n)return l}return null}function jn(e,t,n,i){var r,o=t[n];if(null!=(r=o)&&"object"==typeof r&&Object.getPrototypeOf(r)==Xe){var s=o;if(s.resolving)throw new Error("Circular dep for "+Ze(e[n]));var a=wn(s.canSeeViewProviders);s.resolving=!0;var l=void 0;s.injectImpl&&(l=Pt(s.injectImpl));var c=$t(),h=Kt();tn(i,t);try{o=t[n]=s.factory(null,e,t,i)}finally{s.injectImpl&&Pt(l),wn(a),s.resolving=!1,tn(c,h)}}return o}function Rn(e,t,n){var i=64&e,r=32&e;return!!((128&e?i?r?n[t+7]:n[t+6]:r?n[t+5]:n[t+4]:i?r?n[t+3]:n[t+2]:r?n[t+1]:n[t])&1<<e)}function Ln(e,t){return!(e&It.Self||e&It.Host&&t)}var _n=function(){function e(e,t){this._tNode=e,this._lView=t}return e.prototype.get=function(e,t){return kn(this._tNode,this._lView,e,void 0,t)},e}();function Nn(e){var t=e,n=ge(t)||me(t)||ye(t)||C(t)||x(t);return n&&void 0!==n.factory?n.factory:null}function Bn(e){var t=Nn(Object.getPrototypeOf(e.prototype).constructor);return null!==t?t:function(e){return new e}}function Fn(e){var t,n=ht(e);if(n){if(Array.isArray(n)){var i=n,r=void 0,o=void 0,s=void 0;if((t=e)&&t.constructor&&t.constructor.ngComponentDef){if(-1==(r=Gn(i,e)))throw new Error("The provided component was not found in the application");o=e}else if(e&&e.constructor&&e.constructor.ngDirectiveDef){if(-1==(r=function(e,t){for(var n=e[be].firstChild;n;){for(var i=n.directiveEnd,r=n.directiveStart;r<i;r++)if(e[r]===t)return n.index;n=Wn(n)}return-1}(i,e)))throw new Error("The provided directive was not found in the application");s=qn(r,i,!1)}else if(-1==(r=Un(i,e)))return null;var a=ht(f=Je(i[r])),l=a&&!Array.isArray(a)?a:zn(i,r,f);if(o&&void 0===l.component&&(l.component=o,Vn(l.component,l)),s&&void 0===l.directives){l.directives=s;for(var c=0;c<s.length;c++)Vn(s[c],l)}Vn(l.native,l),n=l}}else for(var h=e,d=h;d=d.parentNode;){var u=ht(d);if(u){if(i=void 0,!(i=Array.isArray(u)?u:u.lView))return null;var p=Un(i,h);if(p>=0){var f;Vn(f=Je(i[p]),l=zn(i,p,f)),n=l;break}}}return n||null}function zn(e,t,n){return{lView:e,nodeIndex:t,native:n,component:void 0,directives:void 0,localRefs:void 0}}function Hn(e){var t,n=ht(e);if(Array.isArray(n)){var i=Gn(n,e);(r=zn(n,i,(t=nt(i,n))[Se])).component=e,Vn(e,r),Vn(r.native,r)}else{var r;t=nt((r=n).nodeIndex,r.lView)}return t}function Vn(e,t){e[Ue]=t}function Un(e,t){for(var n=e[be].firstChild;n;){if(et(n,e)===t)return n.index;n=Wn(n)}return-1}function Wn(e){if(e.child)return e.child;if(e.next)return e.next;for(;e.parent&&!e.parent.next;)e=e.parent;return e.parent&&e.parent.next}function Gn(e,t){var n=e[be].components;if(n)for(var i=0;i<n.length;i++){var r=n[i];if(nt(r,e)[De]===t)return r}else if(nt(Ne,e)[De]===t)return Ne;return-1}function qn(e,t,n){var i=t[be].data[e],r=i.directiveStart;return 0==r?oe:(!n&&1&i.flags&&r++,t.slice(r,i.directiveEnd))}function Qn(e){var t,n,i=ni(e);return void 0===i.component&&(i.component=1&(n=(t=i.lView)[be].data[i.nodeIndex]).flags?t[n.directiveStart]:null),i.component}function Yn(e){return ni(e).lView[De]}function Xn(e){for(var t=ei(e).lView;t[Ce]&&null===t[Se];)t=t[Ce];return 128&t[we]?null:t[De]}function Zn(e){return function(e){var t;for(t=Array.isArray(e)?e:dt(e);t&&!(128&t[we]);)t=t[Ce];return t}(Array.isArray(e)?e:ei(e).lView)[De]}function Kn(e){return Object(i.g)(Zn(e).components)}function Jn(e){var t=ei(e);return new _n(t.lView[be].data[t.nodeIndex],t.lView)}function $n(e){var t=ei(e);return void 0===t.directives&&(t.directives=qn(t.nodeIndex,t.lView,!1)),t.directives||[]}function ei(e,t){void 0===t&&(t=!0);var n=Fn(e);if(!n&&t)throw new Error("Invalid ng target");return n}function ti(e){return Fn(e).native}function ni(e){if(!(e instanceof Node))throw new Error("Expecting instance of DOM Node");return ei(e)}function ii(e){return"boolean"==typeof e.useCapture}function ri(e){var t=ni(e).lView,n=t[Ie],i=t[be].cleanup,r=[];if(i&&n)for(var o=0;o<i.length;){var s=i[o++],a=i[o++];if("string"==typeof s){var l=s,c=Je(t[a]),h=n[i[o++]],d=i[o++];e==c&&r.push({element:e,name:l,callback:h,useCapture:"boolean"==typeof d?d:!(d>=0)&&null})}}return r.sort(oi),r}function oi(e,t){return e.name==t.name?0:e.name<t.name?-1:1}var si=/([A-Z])/g;function ai(e){try{return null!=e?e.toString().slice(0,30):e}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function li(e,t){var n=di(e),i=di(t);return n&&i?function(e,t,n){for(var i=e[q()](),r=t[q()]();;){var o=i.next(),s=r.next();if(o.done&&s.done)return!0;if(o.done||s.done)return!1;if(!n(o.value,s.value))return!1}}(e,t,li):!(n||!e||"object"!=typeof e&&"function"!=typeof e||i||!t||"object"!=typeof t&&"function"!=typeof t)||Y(e,t)}var ci=function(){function e(e){this.wrapped=e}return e.wrap=function(t){return new e(t)},e.unwrap=function(t){return e.isWrapped(t)?t.wrapped:t},e.isWrapped=function(t){return t instanceof e},e}(),hi=function(){function e(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}return e.prototype.isFirstChange=function(){return this.firstChange},e}();function di(e){return!!ui(e)&&(Array.isArray(e)||!(e instanceof Map)&&q()in e)}function ui(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function pi(e){throw new Error("Multiple components match node with tagname "+e.tagName)}var fi={};function gi(e,t,n){return e[t]=n}function mi(e,t){return e[t]}function yi(e,t,n){if(e[t]===fi)e[t]=n;else{if(r=n,(i=e[t])!=i&&r!=r||i===r)return!1;e[t]=n}var i,r;return!0}function vi(e,t,n,i){var r=yi(e,t,n);return yi(e,t+1,i)||r}function bi(e,t,n,i,r){var o=vi(e,t,n,i);return yi(e,t+2,r)||o}function wi(e,t,n,i,r,o){var s=vi(e,t,n,i);return vi(e,t+2,r,o)||s}var Ci="ngProjectAs",xi=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});function Ai(e){return!!e.listen}var Si={createRenderer:function(e,t){return document}};function Oi(e,t){return null==e.parent?function(e){var t=e[Oe];return t&&2!==t.type?et(t,e[Ce]):null}(t):et(Ei(e),t)}function Ei(e){for(var t=e.parent;t&&5===t.type;)t=t.parent;return t}function Ii(e,t){if(-1===e.index){var n=t[Re];return n>-1?t[Ce][n]:null}return t[Ce][e.parent.index]}function Di(e,t){var n=Ii(e,t);return n?n[He]:null}var ki=[];function Pi(e,t,n,i,r){for(var o=e[be].node,s=-1,a=e,l=o.child;l;){var c=null;if(3===l.type){Ti(t,n,i,et(l,a),r);var h=a[l.index];st(h)&&Ti(t,n,i,h[ze],r)}else if(0===l.type){var d=a[l.index];Ti(t,n,i,d[ze],r),i&&(d[He]=i),d[Fe].length&&(c=(a=d[Fe][0])[be].node,r=d[ze])}else if(1===l.type){var u=vt(a),p=u[Oe].projection[l.projection];ki[++s]=l,ki[++s]=a,p&&(c=(a=u[Ce])[be].data[p.index])}else c=l.child;if(null===c)for(null===l.next&&2&l.flags&&(a=ki[s--],l=ki[s--]),c=l.next;!c;){if(null===(l=l.parent||a[be].node)||l===o)return null;0===l.type&&(r=(a=a[Ce])[l.index][ze]),c=2===l.type&&a[xe]?(a=a[xe])[be].node:l.next}l=c}}function Ti(e,t,n,i,r){0===e?Ai(t)?t.insertBefore(n,i,r):n.insertBefore(i,r,!0):1===e?Ai(t)?t.removeChild(n,i):n.removeChild(i):2===e&&t.destroyNode(i)}function Mi(e,t){return Ai(t)?t.createText(Ze(e)):t.createTextNode(Ze(e))}function ji(e,t,n){var i=Di(e[be].node,e);i&&Pi(e,t?0:1,e[Te],i,n)}function Ri(e,t,n,i,r){var o=t[Fe];i>0&&(o[i-1][xe]=e),i<o.length?(e[xe]=o[i],o.splice(i,0,e)):(o.push(e),e[xe]=null),r>-1&&(e[Re]=r,e[Ce]=n),e[Ae]&&e[Ae].insertView(i),e[we]|=16}function Li(e,t,n){var i=e[Fe],r=i[t];return t>0&&(i[t-1][xe]=r[xe]),i.splice(t,1),n||ji(r,!1),r[Ae]&&r[Ae].removeView(),r[Re]=-1,r[Ce]=null,r[we]&=-17,r}function _i(e,t,n){var i=e[Fe][n];Li(e,n,!!t.detached),Bi(i)}function Ni(e){var t=e[be].childIndex;return-1===t?null:e[t]}function Bi(e){var t=e[Te];Ai(t)&&t.destroyNode&&Pi(e,2,t,null),function(e){if(-1===e[be].childIndex)return zi(e);for(var t=Ni(e);t;){var n=null;if(t.length>=Ne?t[be].childIndex>-1&&(n=Ni(t)):t[Fe].length&&(n=t[Fe][0]),null==n){for(;t&&!t[xe]&&t!==e;)zi(t),t=Fi(t,e);zi(t||e),n=t&&t[xe]}t=n}}(e),e[we]|=64}function Fi(e,t){var n;return e.length>=Ne&&(n=e[Oe])&&2===n.type?Ii(n,e):e[Ce]===t?null:e[Ce]}function zi(e){if(e.length>=Ne){var t=e;!function(e){var t,n=e[be];null!=n&&null!=(t=n.destroyHooks)&&Vt(e,t)}(t),(r=(i=t)[be]&&i[be].pipeDestroyHooks)&&Vt(i,r),function(e){var t=e[be].cleanup;if(null!=t){for(var n=e[Ie],i=0;i<t.length-1;i+=2)if("string"==typeof t[i]){var r=n[t[i+2]],o=Je(e[t[i+1]]),s=t[i+3];"boolean"==typeof s?o.removeEventListener(t[i],r,s):s>=0?n[s]():n[-s].unsubscribe(),i+=2}else"number"==typeof t[i]?(0,n[t[i]])():t[i].call(n[t[i+1]]);e[Ie]=null}}(t);var n=t[Oe];n&&3===n.type&&Ai(t[Te])&&t[Te].destroy()}var i,r}function Hi(e,t){if(Vi(e,t)){if(at(t))return Wi(t[Te],et(e,t));var n=t[Oe],i=e.parent;return null!=i&&4===i.type&&(e=qi(i)),null==e.parent&&2===n.type?Di(n,t):Oi(e,t)}return null}function Vi(e,t){var n,i=e,r=e.parent;return e.parent&&(4===e.parent.type?r=(i=qi(e)).parent:5===e.parent.type&&(r=(i=Ei(i)).parent)),null===r&&(r=t[Oe]),r&&2===r.type?null!=(n=Ii(r,t))&&null!=n[He]:null==i.parent||!(3!==i.parent.type||1&i.parent.flags)}function Ui(e,t,n,i){Ai(e)?e.insertBefore(t,n,i):t.insertBefore(n,i,!0)}function Wi(e,t){return Ai(e)?e.parentNode(t):t.parentNode}function Gi(e,t,n){if(void 0===e&&(e=null),null!==e&&Vi(t,n)){var i=n[Te],r=Oi(t,n),o=t.parent||n[Oe];if(2===o.type){var s=Ii(o,n),a=s[Fe],l=a.indexOf(n);Ui(i,s[He],e,Qi(l,a,s[ze]))}else 4===o.type?Ui(i,Hi(t,n),e,r):5===o.type?Ui(i,r,e,et(t.parent,n)):Ai(i)?i.appendChild(r,e):r.appendChild(e);return!0}return!1}function qi(e){for(;null!=e.parent&&4===e.parent.type;)e=e.parent;return e}function Qi(e,t,n){if(e+1<t.length){var i=t[e+1],r=i[Oe];return r.child?et(r.child,i):n}return n}function Yi(e,t,n){if(null!==t&&Vi(e,n)){var i=Oi(e,n),r=n[Te];return Ai(r)?r.removeChild(i,t):i.removeChild(t),!0}return!1}function Xi(e,t,n,i){var r=et(e,i);Gi(r,t,n),Vn(r,i);var o=Hi(t,n),s=i[e.index];if(0===e.type){s[He]=o;for(var a=s[Fe],l=0;l<a.length;l++)ji(a[l],!0,s[ze])}else{if(4===e.type)for(var c=e.child;c;)Xi(c,t,n,i),c=c.next;st(s)&&(s[He]=o,Gi(s[ze],t,n))}}var Zi="ng-template";function Ki(e,t,n){return t===e.tagName&&(n||3===e.type||4===e.type||0===e.type&&t===Zi)}function Ji(e,t,n){for(var i,r,o,s,a,l=4,c=e.attrs,h=c?c.indexOf(3):-1,d=!1,u=0;u<t.length;u++){var p=t[u];if("number"!=typeof p){if(!d)if(4&l){if(l=2|1&l,""!==p&&!Ki(e,p,n)||""===p&&1===t.length){if($i(l))return!1;d=!0}}else{var f=er(8&l?"class":p,c);if(-1===f){if($i(l))return!1;d=!0;continue}var g,m=8&l?p:t[++u];if(""!==m)if(g=h>-1&&f>h?"":c[f+1],8&l&&(o=(i=g).length,a=(s=i.indexOf(r=m))+r.length,-1===s||s>0&&" "!==i[s-1]||a<o&&" "!==i[a])||2&l&&m!==g){if($i(l))return!1;d=!0}}}else{if(!d&&!$i(l)&&!$i(p))return!1;if(d&&$i(p))continue;d=!1,l=p|1&l}}return $i(l)||d}function $i(e){return 0==(1&e)}function er(e,t){if(null===t)return-1;for(var n=!1,i=0;i<t.length;){var r=t[i];if(r===e)return i;0===r?i+=4:(3===r&&(n=!0),i+=n?1:2)}return-1}function tr(e,t,n){void 0===n&&(n=!1);for(var i=0;i<t.length;i++)if(Ji(e,t[i],n))return!0;return!1}function nr(e,t,n){for(var i=function(e){var t=e.attrs;if(null!=t){var n=t.indexOf(Ci);if(0==(1&n))return t[n+1]}return null}(e),r=0;r<t.length;r++)if(i===n[r]||null===i&&tr(e,t[r],!0))return r+1;return 0}function ir(e,t){return new rr(e,t)}var rr=function(){return function(e,t){this.fn=e,this.value=t}}(),or=function(){function e(){this._players=[]}return e.prototype.flushPlayers=function(){for(var e=0;e<this._players.length;e++){var t=this._players[e];t.parent||0!==t.state||t.play()}this._players.length=0},e.prototype.queuePlayer=function(e){this._players.push(e)},e}(),sr="@";function ar(e,t,n,i){return[0,[null,-1,!1,t||null],n||[null],i||[null],[0,0],e||null,null,null,null]}function lr(e,t){for(var n=e,i=t[n],r=t;Array.isArray(i);)r=i,i=i[Se];if(a=r,Array.isArray(a)&&"number"==typeof a[0]&&Array.isArray(a[2]))return r;var o,s,a,l=tt(e-Ne,t).stylingTemplate;return r!==t&&(n=Se),r[n]=l?(o=i,(s=l.slice())[5]=o,s[0]|=32,s):ar(i)}function cr(e){return e[0]===sr}function hr(e,t,n,i,r,o){return o=o||n,r?e[r]=i:e.push(i),!!i&&(i.addEventListener(200,function(){var t=e.indexOf(i);t&&(t<e[0]?e[t]=null:e.splice(t,1)),i.destroy()}),(t.playerHandler||(t.playerHandler=new or)).queuePlayer(i,o),!0)}function dr(e){return e[8]}function ur(e){return e[8]=[5,null,null,null,null]}function pr(e){return!!(8&e.flags)}function fr(e){for(var t=ar(),n=t[3]=[null],i=t[2]=[null],r=-1,o=0;o<e.length;o++){var s=e[o];if("number"==typeof s)r=s;else if(2===r)i.push(s,e[++o]);else if(1===r)n.push(s,!0);else if(3===r)break}return t}function gr(e,t,n){for(var i=1;i<e.length;){if(e[i]===t){var r=e[i+1];return void(null!=r&&0!=r||(e[i+1]=n))}i+=2}e.push(t,n)}function mr(e,t,n,i){for(var r=1;r<n.length;r+=2){var o=n[r+1];o&&(i?wr(e,n[r+0],!0,t,null):br(e,n[r+0],o,t,null))}}function yr(e,t,n,i){for(var r=n;r<i;r+=4)if(zr(e,r)===t)return r;return-1}function vr(e,t,n,i,r){var o=Jr(e,r||null),s=function(e,t,n,i){var r=e[1][4*t+1],o=e[4];return o[r+2+(i?o[r+0]:0)+n]}(e,o,t,i),a=Fr(e,s),l=Br(e,s),c=Kr(e,s),h=n instanceof rr?n.value:n;if(Xr(l,a,h)&&(!a||(h?o<=c:c===o))){var d=2==(2&l),u=n instanceof rr?new Zr(n,e[5],d?1:2):null,p=u?n.value:n,f=Lr(e,s),g=!1,m=u?f:0;if(Mr(e,u,f)){var y=jr(e,u,f);m=u?y:0,g=!0}if((g||c!==o)&&Rr(e,s,m,o),c!==o){var v=zr(e,s),b=to(e,o);!function(e,t,n){b&&b(v)?e[t]|=4:e[t]&=-5}(e,s)}Tr(e,s,p);var w=Dr(l),C=Fr(e,w);if(!C||Xr(l,C,p)){var x=!1,A=!0;!Qr(p,d)&&Qr(C,d)&&(x=!0,A=!1),Cr(e,w,x),Cr(e,s,A),no(e,o,!0),Vr(e,!0)}g&&Ur(e,!0)}}function br(e,t,n,i,r,o,s){n=r&&n?r(t,n):n,o||s?(o&&o.setValue(t,n),s&&s.setValue(t,n)):n?(n=n.toString(),Ai(i)?i.setStyle(e,t,n,xi.DashCase):e.style.setProperty(t,n)):Ai(i)?i.removeStyle(e,t,xi.DashCase):e.style.removeProperty(t)}function wr(e,t,n,i,r,o){r||o?(r&&r.setValue(t,n),o&&o.setValue(t,n)):n?Ai(i)?i.addClass(e,t):e.classList.add(t):Ai(i)?i.removeClass(e,t):e.classList.remove(t)}function Cr(e,t,n){var i=t>=9?t+0:t;n?e[i]|=1:e[i]&=-2}function xr(e,t){return 1==(1&e[t>=9?t+0:t])}function Ar(e,t){return 2==(2&e[t>=9?t+0:t])}function Sr(e,t){return 4==(4&e[t>=9?t+0:t])}function Or(e,t,n){return 63&e|t<<6|n<<20}function Er(e,t){var n=Ir(t);return(2&t?e[3]:e[2])[n]}function Ir(e){return e>>6&16383}function Dr(e){var t=e>>20&16383;return t>=9?t:-1}function kr(e){return Dr(e[0])}function Pr(e,t,n){e[t+1]=n}function Tr(e,t,n){e[t+2]=n}function Mr(e,t,n){var i=e[8];if(t){if(!i||0===n)return!0}else if(!i)return!1;return i[n]!==t}function jr(e,t,n){var i=e[8]||ur(e);return n>0?i[n]=t:(i.splice(n=i[0],0,t,null),i[0]+=2),n}function Rr(e,t,n,i){var r=function(e,t){return n<<16|e}(i);e[t+3]=r}function Lr(e,t){return e[t+3]>>16&65535}function _r(e,t){var n=Lr(e,t);if(n){var i=e[8];if(i)return i[n]}return null}function Nr(e,t,n){e[0===t?t:t+0]=n}function Br(e,t){return e[0===t?t:t+0]}function Fr(e,t){return e[t+2]}function zr(e,t){return e[t+1]}function Hr(e){return 16&e[0]}function Vr(e,t){Cr(e,0,t)}function Ur(e,t){t?e[0]|=8:e[0]&=-9}function Wr(e,t,n){for(var i=(n||0)+1;i<e.length;i+=4)if(e[i]==t)return i-1;return-1}function Gr(e,t,n){var i=Fr(e,t),r=zr(e,t),o=Br(e,t),s=Lr(e,t),a=o,l=Br(e,n),c=Dr(a);c>=0&&Nr(e,c,Or(h=Br(e,c),Ir(h),n));var h,d=Dr(l);d>=0&&Nr(e,d,Or(h=Br(e,d),Ir(h),t)),Tr(e,t,Fr(e,n)),Pr(e,t,zr(e,n)),Nr(e,t,Br(e,n)),Rr(e,t,Lr(e,n),0),Tr(e,n,i),Pr(e,n,r),Nr(e,n,o),Rr(e,n,s,0)}function qr(e,t,n,i,r,o,s,a){var l=t<e.length;e.splice(t,0,1|r|(n?2:0),i,o,0),Rr(e,t,a,s),l&&function(e,n){for(var i=t+4;i<e.length;i+=4){var r=Dr(Br(e,i));if(r>0){var o=Ir(Br(e,r));Nr(e,r,Or((xr(e,r)?1:0)|(Ar(e,r)?2:0)|(Sr(e,r)?4:0),o,i))}}}(e)}function Qr(e,t){return t?!!e:null!==e}function Yr(e,t,n,i){var r,o=i&&i(t)?4:0;return n?(o|=2,r=eo(e[3],t)):r=eo(e[2],t),Or(o,r=r>0?r+1:0,0)}function Xr(e,t,n){return!(2&e)&&t&&n&&4&e?t.toString()!==n.toString():t!==n}var Zr=function(){function e(e,t,n){this._element=t,this._type=n,this._values={},this._dirty=!1,this._factory=e}return e.prototype.setValue=function(e,t){this._values[e]!==t&&(this._values[e]=t,this._dirty=!0)},e.prototype.buildPlayer=function(e,t){if(this._dirty){var n=this._factory.fn(this._element,this._type,this._values,t,e||null);return this._values={},this._dirty=!1,n}},e}();function Kr(e,t){return 65535&e[t+3]}function Jr(e,t){var n=$r(e[1],t);return n>0?n/4:0}function $r(e,t){for(var n=0;n<e.length;n+=4)if(e[n]===t)return n;return-1}function eo(e,t){for(var n=1;n<e.length;n+=2)if(e[n]===t)return n;return-1}function to(e,t){var n=e[1];return n[4*t+3]||n[3]||null}function no(e,t,n){e[1][4*t+2]=n}function io(e){var t=e[6];if(null==t){t="";for(var n=e[3],i=1;i<n.length;i+=2)n[i+1]&&(t+=(t.length?" ":"")+n[i]);e[6]=t}return t}var ro=Promise.resolve(null);function oo(e){var t=e[be];if(t.firstTemplatePass=!1,un(!1),!on(e)){var n=ln();zt(e,t,n),function(e){for(var t=Ni(e);null!==t;t=t[xe])if(t.length<Ne&&-1===t[Be])for(var n=t,i=0;i<n[Fe].length;i++){var r=n[Fe][i];ho(r,r[be],r[De])}}(e),function(e){if(null!=e.contentQueries)for(var t=0;t<e.contentQueries.length;t+=2){var n=e.contentQueries[t];e.data[n].contentQueriesRefresh(n-Ne,e.contentQueries[t+1])}}(t),Ht(e,t.contentHooks,t.contentCheckHooks,n),function(e,t){if(e.expandoInstructions){var n=t[Ee]=e.expandoStartIndex;gn(n);for(var i=-1,r=-1,o=0;o<e.expandoInstructions.length;o++){var s=e.expandoInstructions[o];if("number"==typeof s){if(s<=0){r=-s;var a=e.expandoInstructions[++o];i=n+=qe+a}else n+=s;gn(n)}else null!==s&&(t[Ee]=n,s(2,Je(t[i]),r)),i++}}}(t,e)}!function(e){if(null!=e)for(var t=0;t<e.length;t++)void 0,void 0,16==(16&(n=nt(e[t],Kt()))[we])&&12&n[we]&&(function(e){for(var t=e[be],n=e.length;n<t.blueprint.length;n++)e[n]=t.blueprint[n]}(n),bs(n,n[De]));var n}(t.components)}function so(e,t,n,i,r,o,s,a){var l=t.blueprint.slice();return l[we]=51|i,l[Ce]=l[_e]=e,l[De]=n,l[Pe]=r||e&&e[Pe],l[Te]=o||e&&e[Te],l[Me]=s||e&&e[Me]||null,l[ke]=a||e&&e[ke]||null,l}function ao(e,t,n,i,r){var o=Kt(),s=o[be],a=e+Ne;o[a]=n;var l=s.data[a];null==l&&(l=s.data[a]=_o(o,t,a,i,r,null));var c=$t(),h=nn();return c&&(!h||null!=c.child||null===l.parent&&2!==c.type?h||(c.next=l):c.child=l),null==s.firstChild&&(s.firstChild=l),en(l),rn(!0),l}function lo(e,t){return null==t[be].node&&(t[be].node=_o(t,2,e,null,null,null)),t[Oe]=t[be].node}function co(e){var t=e[be];t.firstTemplatePass&&(t.expandoStartIndex++,t.blueprint.push(null),t.data.push(null),e.push(null))}function ho(e,t,n){var i,r=nn(),o=$t();if(rn(!0),en(null),128&e[we])gs(ct(e));else try{rn(!0),en(null),i=mn(e,e[Oe]),vo(),t.template(fo(e),n),e[be].firstTemplatePass=!1,un(!1),oo(e)}finally{vn(i),rn(r),en(o)}}function uo(e){return void 0===e&&(e=1),yn(e)}function po(e,t,n){var i=e[Pe],r=mn(e,e[Oe]),o=!ln();try{o&&i.begin&&i.begin(),on(e)&&(n&&(vo(),n(1,t)),oo(e),e[we]&=-2),n&&n(2,t),oo(e)}finally{o&&i.end&&i.end(),vn(r)}}function fo(e){return on(e)?1:2}var go=null;function mo(){go="http://www.w3.org/2000/svg"}function yo(){go="http://www.w3.org/1998/MathML/"}function vo(){go=null}function bo(e,t,n,i){xo(e,t,n,i),Po()}function wo(e,t,n){var i=Kt(),r=i[be],o=i[Te].createComment("");Gi(o,ao(e,4,o,"ng-container",t||null),i),So(r,i,n),Vn(o,i)}function Co(){var e=$t(),t=Kt(),n=t[be];nn()?rn(!1):en(e=e.parent);var i=t[Ae];i&&(t[Ae]=i.addNode(e)),_t(n,e)}function xo(e,t,n,i){var r,o,s,a=Kt(),l=a[be],c=Ao(t),h=ao(e,3,c,t,n||null);if(n&&(l.firstTemplatePass&&!h.stylingTemplate&&function(e){for(var t=0;t<e.length;t++){var n=e[t];if(1==n||2==n)return!0}return!1}(n)&&(h.stylingTemplate=fr(n)),Io(c,n)),Gi(c,h,a),So(l,a,i),0===Ct&&Vn(c,a),Ct++,l.firstTemplatePass){var d=zs(h);d&&d.hasOwnProperty("class")&&(h.flags|=8)}h.stylingTemplate&&0==(8&h.flags)&&(mr(r=c,s=a[Te],(o=h.stylingTemplate)[3],!0),mr(r,s,o[2],!1))}function Ao(e,t){var n=t||Kt()[Te];return Ai(n)?n.createElement(e,go):null===go?n.createElement(e):n.createElementNS(go,e)}function So(e,t,n,i){if(void 0===i&&(i=et),Ut){var r=$t();dn()&&function(e,t,n,i,r){var o=r?{"":-1}:null;if(n){Jo(i,e.data.length,n.length);for(var s=0;s<n.length;s++)(a=n[s]).providersResolver&&a.providersResolver(a);for(Qo(e,i,n.length),s=0;s<n.length;s++){var a,l=e.data.length;$o(e,t,a=n[s],a.factory),Ko(e.data.length-1,a,o),Lt(l,a.onInit,a.doCheck,e)}}o&&function(e,t,n){if(t)for(var i=e.localNames=[],r=0;r<t.length;r+=2){var o=n[t[r+1]];if(null==o)throw new Error("Export of name '"+t[r+1]+"' not found!");i.push(t[r],o)}}(i,r,o)}(e,t,function(e,t,n){var i=e.directiveRegistry,r=null;if(i)for(var o=0;o<i.length;o++){var s=i[o];tr(n,s.selectors,!1)&&(r||(r=[]),In(An($t(),t),t,s.type),ot(s)?(1&n.flags&&pi(n),n.flags=1,r.unshift(s)):r.push(s))}return r}(e,t,r),r,n||null),function(e,t,n){var i=n.directiveStart,r=n.directiveEnd;!dn()&&i<r&&An(n,t);for(var o=i;o<r;o++){var s=e.data[o];ot(s)&&es(t,n,s),Yo(t,jn(e.data,t,o,n),s,o)}}(e,t,r),function(e,t,n){for(var i=n.directiveStart,r=n.directiveEnd,o=e.expandoInstructions,s=dn(),a=i;a<r;a++){var l=e.data[a],c=t[a];if(l.hostBindings){var h=o.length;Yt(l),l.hostBindings(1,c,n.index-Ne),Yt(null),h===o.length&&s&&o.push(l.hostBindings)}else s&&o.push(null)}}(e,t,r),function(e,t,n){var i=t.localNames;if(i)for(var r=t.index+1,o=0;o<i.length;o+=2){var s=i[o+1],a=-1===s?n(t,e):e[s];e[r++]=a}}(t,r,i)}}function Oo(e,t,n,i,r,o){return e.ngPrivateData||(e.ngPrivateData=Eo(-1,e,t,n,i,r,o))}function Eo(e,t,n,i,r,o,s){var a=Ne+n,l=a+i,c=function(e,t){var n=new Array(t).fill(null,0,e).fill(fi,e);return n[Re]=-1,n[Ee]=e,n}(a,l);return c[be]={id:e,blueprint:c,template:t,viewQuery:s,node:null,data:c.slice(),childIndex:-1,bindingStartIndex:a,expandoStartIndex:l,expandoInstructions:null,firstTemplatePass:!0,initHooks:null,checkHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,pipeDestroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof o?o():o,firstChild:null}}function Io(e,t){for(var n=Kt()[Te],i=Ai(n),r=0;r<t.length;){var o=t[r++];if("number"==typeof o){if(0!==o)break;var s=t[r++],a=t[r++],l=t[r++];i?n.setAttribute(e,a,l,s):e.setAttributeNS(s,a,l)}else l=t[r++],o!==Ci&&(cr(o)?i&&n.setProperty(e,o,l):i?n.setAttribute(e,o,l):e.setAttribute(o,l))}}function Do(e,t){var n=e.createRenderer(null,null);return"string"==typeof t?Ai(n)?n.selectRootElement(t):n.querySelector(t):t}function ko(e,t,n){void 0===n&&(n=!1);var i=Kt(),r=$t(),o=i[be],s=o.firstTemplatePass&&(o.cleanup||(o.cleanup=[]));if(3===r.type){var a=et(r,i),l=i[Te],c=(m=Vs(i)).length,h=n;if(Ai(l)){var d=l.listen(a,e,t);m.push(t,d),h=c+1}else{var u=function(e){return function(t){!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}(t);a.addEventListener(e,u,n),m.push(u)}s&&s.push(e,r.index,c,h)}void 0===r.outputs&&(r.outputs=Bo(r,1));var p,f=r.outputs;if(f&&(p=f[e])){var g=p.length;if(g)for(var m=Vs(i),y=0;y<g;y+=2){var v=i[p[y]][p[y+1]].subscribe(t),b=m.length;m.push(t,v),s&&s.push(e,r.index,b,-(b+1))}}}function Po(){var e=$t();nn()?rn(!1):en(e=e.parent);var t=Kt(),n=t[Ae];if(n&&(t[Ae]=n.addNode(e)),_t(Kt()[be],e),Ct--,pr(e)){var i=lr(e.index,t);No(t,e.inputs.class,io(i))}}function To(e,t,n,i){if(n!==fi){var r=Kt(),o=r[Te],s=$e(e,r);if(null==n)Ai(o)?o.removeAttribute(s,t):s.removeAttribute(t);else{var a=null==i?Ze(n):i(n);Ai(o)?o.setAttribute(s,t,a):s.setAttribute(t,a)}}}function Mo(e,t,n,i,r){Lo(e,t,n,i,r)}function jo(e,t,n,i,r){Lo(e,t,n,i,r,Ro)}function Ro(e,t){return t[e.index][Te]}function Lo(e,t,n,i,r,o){if(n!==fi){var s,a,l=Kt(),c=$e(e,l),h=tt(e,l);if(!r&&(s=zs(h))&&(a=s[t]))No(l,a,n),rt(h)&&function(t,n){var i=nt(e+Ne,t);4&i[we]||(i[we]|=8)}(l);else if(3===h.type){var d=o?o(h,l):l[Te];n=null!=i?i(n):n,Ai(d)?d.setProperty(c,t,n):cr(t)||(c.setProperty?c.setProperty(t,n):c[t]=n)}}}function _o(e,t,n,i,r,o){var s=$t(),a=nn()?s:s&&s.parent,l=a&&e&&a!==e[Oe]?a:null;return{type:t,index:n,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,flags:0,providerIndexes:0,tagName:i,attrs:r,localNames:null,initialInputs:void 0,inputs:void 0,outputs:void 0,tViews:o,next:null,child:null,parent:l,detached:null,stylingTemplate:null,projection:null}}function No(e,t,n){for(var i=0;i<t.length;i+=2)e[t[i]][t[i+1]]=n}function Bo(e,t){var n=Kt()[be],i=null,r=e.directiveStart,o=e.directiveEnd;if(o>r)for(var s=0===t,a=n.data,l=r;l<o;l++){var c=a[l],h=s?c.inputs:c.outputs;for(var d in h)if(h.hasOwnProperty(d)){var u=h[d];(i=i||{}).hasOwnProperty(d)?i[d].push(l,u):i[d]=[l,u]}}return i}function Fo(e,t,n,i){var r=$t();r.stylingTemplate||(r.stylingTemplate=ar()),function(e,t,n,i,r,o){if(!(32&e[0])){var s=function(e,t,n){var i,r=e[1],o=e[4].length,s=$r(r,t);if(-1===s)i=r.length/4,r.push(t,o,!1,n||null);else{if(r[s+1]>=0)return-1;i=s/4,r[s+1]=o,r[s+3]=n||null}return i}(e,t,r);if(-1!==s){var a=e[4],l=a[1],c=a[0],h=4*c,d=9+h,u=d+4*l,p=u+h,f=a.length;a.push(i?i.length:0,n?n.length:0);var g=0,m=[];if(i&&i.length)for(var y=0;y<i.length;y++){var v=i[y];-1==(C=yr(e,v,9,d))&&(C=d+g,g+=4,m.push(v)),a.push(C)}var b=[];if(n&&n.length)for(var w=0;w<n.length;w++){var C,x=n[w];-1==(C=yr(e,x,d,u))?(C=u+g,g+=4,b.push(x)):C+=4*m.length,a.push(C)}var A=2;if(m.length)for(;A<f;){var S=a[A+0],O=a[A+1];if(O)for(var E=A+2+S,I=E;I<E+O;I++)a[I]+=4*m.length;A+=2+(S+O)}for(var D=b.length+m.length,k=9;k<e.length;k+=4){var P=k>=u,T=k>=(P?p:d),M=Br(e,k),j=Ir(M),R=Dr(M);Nr(e,k,Or(M,j,R+=P?T?4*m.length:0:4*D+4*(T?m.length:0)))}for(var L=0;L<4*m.length;L++)e.splice(p,0,null),e.splice(d,0,null),d++,u++,p+=2;for(var _=0;_<4*b.length;_++)e.splice(u,0,null),e.push(null),u++,p++;for(var N=e[3],B=e[2],F=0;F<D;F++){var z=F>=m.length,H=z?F-m.length:F,V=z?b[H]:m[H],U=void 0,W=void 0;z?(U=p+4*(l+H),W=d+4*(l+H)):(U=u+4*(c+H),W=9+4*(c+H));var G=z?N:B,q=eo(G,V);-1===q?(q=G.length+1,G.push(V,!z&&null)):q+=1;var Q=Yr(e,V,z,r||null);Nr(e,W,Or(Q,q,U)),Pr(e,W,V),Tr(e,W,null),Rr(e,W,0,s),Nr(e,U,Or(Q,q,W)),Pr(e,U,V),Tr(e,U,null),Rr(e,U,0,s)}a[1]=l+b.length,a[0]=c+m.length,Nr(e,0,Or(0,0,u)|(o?16:0))}}}(r.stylingTemplate,i||null,e,t,n,pr(r))}function zo(e,t){var n=$t();n.stylingTemplate||(n.stylingTemplate=fr(t)),function(e,t,n){var i=e[1];if(-1==$r(i,n)){i.push(n,-1,!1,null);for(var r=null,o=null,s=-1,a=0;a<t.length;a++){var l=t[a];"number"==typeof l?s=l:1==s?gr(r=r||e[3],l,!0):2==s&&gr(o=o||e[2],l,t[++a])}}}(n.stylingTemplate,t,e)}function Ho(e,t){var n=Kt(),i=0!=(2&n[we]);(function(e,n,i,r,o,s,a){var l=0,c=Jr(e,t||null);if(function(e){return xr(e,0)}(e)&&function(e,t){return e[1][4*c+2]}(e)){for(var h=8&e[0],d=e[5],u=kr(e),p=Hr(e),f=!1,g=9;g<e.length;g+=4)if(xr(e,g)){var m=Br(e,g),y=Kr(e,g);if(c!==y){f=!0;continue}var v=zr(e,g),b=Fr(e,g),w=4&m?to(e,y):null,C=_r(e,g),x=!!(2&m),A=!x||!p,S=b;g<u&&!Qr(S,x)&&(S=Fr(e,Dr(m))),x||Qr(S,x)||!A||(S=Er(e,m)),(!r||S)&&(x?wr(d,v,!!S,n,null,C):br(d,v,S,n,w,null,C)),Cr(e,g,!1)}if(h){var O=Array.isArray(i)?ct(i):i,E=dr(e),I=E[0];for(g=1;g<I;g+=2){var D=E[g],k=g+1,P=E[k];if(D){var T=D.buildPlayer(P,r);void 0!==T&&(null!=T&&hr(E,O,d,T,k)&&l++,P&&P.destroy())}else P&&P.destroy()}Ur(e,!1)}no(e,c,!1),Vr(e,f)}return l})(lr(e+Ne,n),n[Te],n,i)>0&&fs(ct(n),2)}function Vo(e,t,n,i,r){var o=null;null!==n&&(o=i?Ze(n)+i:n),vr(lr(e+Ne,Kt()),t,o,!1,r)}function Uo(e,t,n,i){var r=n instanceof rr?n:!!n;vr(lr(e+Ne,Kt()),t,r,!0,i)}function Wo(e,t,n,i){if(null!=i)return function(e,t,n,i){throw new Error("unimplemented. Should not be needed by ViewEngine compatibility")}();var r=Kt(),o=tt(e,r),s=lr(e+Ne,r);if(pr(o)&&t!==fi){var a=io(s);No(r,o.inputs.class,(a.length?a+" ":"")+t)}else!function(e,t,n,i){n=n||null;var r=Jr(e,null),o=e[5],s=t instanceof rr?new Zr(t,o,1):null,a=n instanceof rr?new Zr(n,o,2):null,l=s?t.value:t,c=a?n.value:n,h=Hr(e)||l===fi||l===e[6],d=c===fi||c===e[7];if(!h||!d){e[6]=l,e[7]=c;var u=oe,p=!1,f=!1,g=s?1:0;Mr(e,s,1)&&(jr(e,s,1),f=!0);var m=a?3:0;Mr(e,a,3)&&(jr(e,a,3),f=!0),h||("string"==typeof l?(u=l.split(/\s+/),p=!0):u=l?Object.keys(l):oe);for(var y=l||re,v=c?Object.keys(c):oe,b=c||re,w=v.length,C=!1,x=kr(e),A=0,S=v.length+u.length;x<e.length&&A<S;){if(!(_=A>=w)&&!d||_&&!h){var O=_?A-w:A,E=_?u[O]:v[O],I=_?!!p||y[E]:b[E],D=_?g:m;if((N=zr(e,x))===E){var k=Fr(e,x),P=Br(e,x);if(Rr(e,x,D,r),Xr(P,k,I)){Tr(e,x,I),f=f||!!D;var T=Er(e,P);(null!=k||Xr(P,T,I))&&(Cr(e,x,!0),C=!0)}}else{var M=Wr(e,E,x);if(M>0){var j=Fr(e,M),R=Br(e,M);Gr(e,x,M),Xr(R,j,I)&&(T=Er(e,R),Tr(e,x,I),(null!=j||Xr(R,T,I))&&(Cr(e,x,!0),f=f||!!D,C=!0))}else f=f||!!D,qr(e,x,_,E,Yr(e,E,_,to(e,r)),I,r,D),C=!0}}x+=4,A++}for(;x<e.length;)(!(_=2==(2&(P=Br(e,x))))&&!d||_&&!h)&&Qr(k=Fr(e,x),_)&&(Cr(e,x,!0),Tr(e,x,null),Rr(e,x,D=_?g:m,r),C=!0),x+=4;for(var L=to(e,r);A<S;){var _;if(!(_=A>=w)&&!d||_&&!h){O=_?A-w:A;var N=_?u[O]:v[O],B=(k=_?!!p||y[N]:b[N],P=1|Yr(e,N,_,L),D=_?g:m,e.length);e.push(P,N,k,0),Rr(e,B,D,r),C=!0}A++}C&&(Vr(e,!0),no(e,r,!0)),f&&Ur(e,!0)}}(s,t,n)}function Go(e,t){var n=Kt(),i=Mi(t,n[Te]),r=ao(e,3,i,null,null);rn(!1),Gi(i,r,n)}function qo(e,t){if(t!==fi){var n=Kt(),i=$e(e,n),r=n[Te];Ai(r)?r.setValue(i,Ze(t)):i.textContent=Ze(t)}}function Qo(e,t,n){var i=-(t.index-Ne),r=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(i,r,n)}function Yo(e,t,n,i){var r=$t();Xo(e,r,t,n),r&&r.attrs&&function(e,t,i,o){var s=r.initialInputs;(void 0===s||e>=s.length)&&(s=function(e,t,n){var i=n.initialInputs||(n.initialInputs=[]);i[e]=null;for(var r=n.attrs,o=0;o<r.length;){var s=r[o];if(3===s)break;if(0!==s){var a=t[s],l=r[o+1];void 0!==a&&(i[e]||(i[e]=[])).push(a,l),o+=2}else o+=4}return i}(e,n.inputs,r));var a=s[e];if(a)for(var l=0;l<a.length;l+=2)t[a[l]]=a[l+1]}(i,t),n.contentQueries&&n.contentQueries(i),ot(n)&&(nt(r.index,e)[De]=t)}function Xo(e,t,n,i){var r=et(t,e);Vn(n,e),r&&Vn(r,e),null!=i.attributes&&3==t.type&&Io(r,i.attributes)}function Zo(e){var t=Kt()[be];(t.components||(t.components=[])).push(e.index)}function Ko(e,t,n){n&&(t.exportAs&&(n[t.exportAs]=e),t.template&&(n[""]=e))}function Jo(e,t,n){e.flags=1&e.flags,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function $o(e,t,n,i){e.data.push(n);var r=new Ye(i,ot(n),null);e.blueprint.push(r),t.push(r)}function es(e,t,n){var i=et(t,e),r=Oo(n.template,n.consts,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery),o=us(e,t.index,so(e,r,null,n.onPush?8:4,e[Pe],e[Pe].createRenderer(i,n)));o[Oe]=t,o[Se]=e[t.index],e[t.index]=o,dn()&&Zo(t)}function ts(e,t,n,i,r){return[r?-1:0,[],n,null,null,e,i,Hi(t,n)]}function ns(e,t,n,i,r,o,s,a){var l=Kt(),c=l[be],h=rs(e,r||null,o||null);dn()&&(h.tViews=Eo(-1,t,n,i,c.directiveRegistry,c.pipeRegistry,null)),So(c,l,s,a);var d=l[Ae],u=$t();Vn(et(u,l),l),d&&(l[Ae]=d.addNode(u)),_t(c,h),rn(!1)}function is(e){var t=rs(e,null,null);dn()&&(t.tViews=[]),rn(!1)}function rs(e,t,n){var i=Kt(),r=e+Ne,o=i[Te].createComment(""),s=ao(e,0,o,t,n),a=i[r]=ts(i[r],s,i,o);Gi(o,s,i),us(i,e+Ne,a);var l=i[Ae];return l&&(a[Ae]=l.container()),s}function os(e){var t=Kt(),n=t[be];en(Ke(n.data,e)),rn(!0),t[e+Ne][Be]=0,zt(t,n,ln())}function ss(){var e=$t();nn()?rn(!1):en(e=e.parent);for(var t=Kt()[e.index],n=t[Be];n<t[Fe].length;)_i(t,e,n)}function as(e,t,n){var i=Kt(),r=$t(),o=2===r.type?r.parent:r,s=i[o.index],a=function(e,t,n,i){for(var r=e[Fe],o=n;o<r.length;o++){var s=r[o][be].id;if(s===i)return r[o];if(!(s<i))break;_i(e,t,o)}return null}(s,o,s[Be],e);return a?(rn(!0),mn(a,a[be].node)):(a=so(i,function(e,t,n,i){var r=Kt()[be],o=i.tViews;return(e>=o.length||null==o[e])&&(o[e]=Eo(e,null,t,n,r.directiveRegistry,r.pipeRegistry,null)),o[e]}(e,t,n,o),null,4),s[Ae]&&(a[Ae]=s[Ae].createView()),lo(e,a),mn(a,a[be].node)),s&&(on(a)&&Ri(a,s,i,s[Be],-1),s[Be]++),on(a)?3:2}function ls(){var e=Kt(),t=e[Oe];on(e)&&(oo(e),e[we]&=-2),oo(e),vn(e[Ce]),en(t),rn(!1)}function cs(e,t){var n=vt(Kt())[Oe];if(!n.projection)for(var i=n.projection=new Array(e?e.length+1:1).fill(null),r=i.slice(),o=n.child;null!==o;){var s=e?nr(o,e,t):0,a=o.next;r[s]?r[s].next=o:(i[s]=o,o.next=null),r[s]=o,o=a}}var hs=[];function ds(e,t,n){void 0===t&&(t=0);var i=Kt(),r=ao(e,1,null,null,n||null);null===r.projection&&(r.projection=t),rn(!1);for(var o=vt(i),s=o[Oe].projection[t],a=o[Ce],l=-1;s;){if(1===s.type){var c=vt(a),h=c[Oe].projection[s.projection];if(h){hs[++l]=s,hs[++l]=a,s=h,a=c[Ce];continue}}else s.flags|=2,Xi(s,r,i,a);null===s.next&&a!==o[Ce]&&(a=hs[l--],s=hs[l--]),s=s.next}}function us(e,t,n){var i=e[be],r=dn();return e[je]?e[je][xe]=n:r&&(i.childIndex=t),e[je]=n,n}function ps(e){for(;e&&!(128&e[we]);)e[we]|=8,e=e[Ce];e[we]|=8,fs(e[De],1)}function fs(e,t){var n,i=0===e.flags;e.flags|=t,i&&e.clean==ro&&(e.clean=new Promise(function(e){return n=e}),e.scheduler(function(){if(1&e.flags&&(e.flags&=-2,gs(e)),2&e.flags){e.flags&=-3;var t=e.playerHandler;t&&t.flushPlayers()}e.clean=ro,n(null)}))}function gs(e){for(var t=0;t<e.components.length;t++){var n=e.components[t];po(dt(n),n)}}function ms(e){ys(Hn(e),e)}function ys(e,t){var n=e[Pe];n.begin&&n.begin(),on(e)&&bs(e,t),bs(e,t),n.end&&n.end()}function vs(e){gs(e[De])}function bs(e,t){var n=e[be],i=mn(e,e[Oe]),r=n.template,o=n.viewQuery;try{vo(),function(t,n,i){t&&on(e)&&t(1,i)}(o,0,t),r(fo(e),t),oo(e),function(t,n,i){t&&!on(e)&&t(2,i)}(o,0,t)}finally{vn(i)}}function ws(e){ps(Hn(e))}function Cs(e){var t=Kt();return yi(t,t[Ee]++,e)?e:fi}function xs(e){if(dn()){var t=Kt(),n=t[be];!function(e,t,n){var i=e.expandoInstructions,r=i.length;r>=2&&i[r-2]===t.hostBindings?i[r-1]=i[r-1]+n:i.push(t.hostBindings,n)}(n,Qt,e),function(e,t,n){for(var i=0;i<n;i++)t.push(fi),e.blueprint.push(fi),e.data.push(null)}(n,t,e)}}function As(e){for(var t=!1,n=Kt(),i=n[Ee],r=1;r<e.length;r+=2)yi(n,i++,e[r])&&(t=!0);if(n[Ee]=i,!t)return fi;var o=e[0];for(r=1;r<e.length;r+=2)o+=Ze(e[r])+e[r+1];return o}function Ss(e,t,n){var i=Kt(),r=yi(i,i[Ee],t);return i[Ee]+=1,r?e+Ze(t)+n:fi}function Os(e,t,n,i,r){var o=Kt(),s=vi(o,o[Ee],t,i);return o[Ee]+=2,s?e+Ze(t)+n+Ze(i)+r:fi}function Es(e,t,n,i,r,o,s){var a=Kt(),l=bi(a,a[Ee],t,i,o);return a[Ee]+=3,l?e+Ze(t)+n+Ze(i)+r+Ze(o)+s:fi}function Is(e,t,n,i,r,o,s,a,l){var c=Kt(),h=wi(c,c[Ee],t,i,o,a);return c[Ee]+=4,h?e+Ze(t)+n+Ze(i)+r+Ze(o)+s+Ze(a)+l:fi}function Ds(e,t,n,i,r,o,s,a,l,c,h){var d=Kt(),u=d[Ee],p=wi(d,u,t,i,o,a);return p=yi(d,u+4,c)||p,d[Ee]+=5,p?e+Ze(t)+n+Ze(i)+r+Ze(o)+s+Ze(a)+l+Ze(c)+h:fi}function ks(e,t,n,i,r,o,s,a,l,c,h,d,u){var p=Kt(),f=p[Ee],g=wi(p,f,t,i,o,a);return g=vi(p,f+4,c,d)||g,p[Ee]+=6,g?e+Ze(t)+n+Ze(i)+r+Ze(o)+s+Ze(a)+l+Ze(c)+h+Ze(d)+u:fi}function Ps(e,t,n,i,r,o,s,a,l,c,h,d,u,p,f){var g=Kt(),m=g[Ee],y=wi(g,m,t,i,o,a);return y=bi(g,m+4,c,d,p)||y,g[Ee]+=7,y?e+Ze(t)+n+Ze(i)+r+Ze(o)+s+Ze(a)+l+Ze(c)+h+Ze(d)+u+Ze(p)+f:fi}function Ts(e,t,n,i,r,o,s,a,l,c,h,d,u,p,f,g,m){var y=Kt(),v=y[Ee],b=wi(y,v,t,i,o,a);return b=wi(y,v+4,c,d,p,g)||b,y[Ee]+=8,b?e+Ze(t)+n+Ze(i)+r+Ze(o)+s+Ze(a)+l+Ze(c)+h+Ze(d)+u+Ze(p)+f+Ze(g)+m:fi}function Ms(e,t){var n=Kt(),i=n[be],r=e+Ne;r>=i.data.length&&(i.data[r]=null),n[r]=t}function js(e){return Ke(sn,e)}function Rs(e){return Kt()[Le][e]}function Ls(e){return Ke(Kt(),e)}function _s(e,t){return void 0===t&&(t=It.Default),e=J(e),kn($t(),Kt(),e,t)}function Ns(e){return Dn($t(),e)}function Bs(e,t){var n=Kt(),i=n[be],r=(n[Le]||(n[Le]=[])).push(e);if(dn()){var o=i.contentQueries||(i.contentQueries=[]);t!==(i.contentQueries.length?i.contentQueries[i.contentQueries.length-2]:-1)&&o.push(t,r-1)}}var Fs=ro;function zs(e){return e?(void 0===e.inputs&&(e.inputs=Bo(e,0)),e.inputs):null}function Hs(){return Kt()}function Vs(e){return e[Ie]||(e[Ie]=[])}function Us(e){return e[be].cleanup||(e[be].cleanup=[])}function Ws(e,t){var n=Fn(e);if(n){var i=n.native,r=n.lView,o=function(e,t){if(!(t=t||Fn(i)))return null;var n=lr(t.nodeIndex,t.lView);return dr(n)||ur(n)}(0,n),s=Zn(r);hr(o,s,i,t,0,e),fs(s,2)}}function Gs(e){var t=Fn(e);if(!t)return[];var n=lr(t.nodeIndex,t.lView),i=n?dr(n):null;return i?function(e){for(var t=[],n=e[0],i=2;i<n;i+=2){var r=e[i];r&&t.push(r)}for(i=n;i<e.length;i++)t.push(e[i]);return t}(i):[]}var qs="ng",Qs=!1;function Ys(){Qs||(Qs=!0,Xs("getComponent",Qn),Xs("getContext",Yn),Xs("getListeners",ri),Xs("getViewComponent",Xn),Xs("getHostElement",ti),Xs("getInjector",Jn),Xs("getRootComponents",Kn),Xs("getDirectives",$n),Xs("getPlayers",Gs),Xs("markDirty",ws))}function Xs(e,t){if(U){var n=U[qs];n||(n=U[qs]={}),n[e]=t}}function Zs(e,t){void 0===t&&(t={});var n=t.rendererFactory||Si,i=t.sanitizer||null,r=ge(e);r.type!=e&&(r.type=e);var o,s=Do(n,t.host||r.selectors[0][0]),a=r.onPush?136:132,l=$s(t.scheduler,t.playerHandler),c=n.createRenderer(s,r),h=so(null,Eo(-1,null,1,0,null,null,null),l,a,n,c,void 0,t.injector||null),d=mn(h,null);try{n.begin&&n.begin(),o=Js(Ks(s,r,h,n,c,i),r,h,l,t.hostFeatures||null),oo(h),h[we]&=-2,oo(h)}finally{vn(d),n.end&&n.end()}return o}function Ks(e,t,n,i,r,o){Gt=!1,Wt=null,Ct=0,Ut=!0;var s=n[be],a=so(n,Oo(t.template,t.consts,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery),null,t.onPush?8:4,i,r,o),l=ao(0,3,e,null,null);return s.firstTemplatePass&&(In(An(l,n),n,t.type),l.flags=1,Jo(l,n.length,1),Zo(l)),a[Se]=n[Ne],a[Oe]=l,n[Ne]=a}function Js(e,t,n,i,r){var o=n[be],s=function(e,t,n){var i=$t();e.firstTemplatePass&&(n.providersResolver&&n.providersResolver(n),Qo(e,i,1),$o(e,t,n,n.factory));var r=jn(e.data,t,t.length-1,i);return Xo(t,i,r,n),r}(o,n,t);if(i.components.push(s),e[De]=s,r&&r.forEach(function(e){return e(s,t)}),o.firstTemplatePass&&t.hostBindings){var a=$t();Yt(t),t.hostBindings(1,s,a.index-Ne),Yt(null)}return s}function $s(e,t){return{components:[],scheduler:e||mt,clean:Fs,playerHandler:t||null,flags:0}}function ea(e,t){var n=dt(e)[be],i=n.data.length-1;Lt(i,t.onInit,t.doCheck,n),_t(n,{directiveStart:i,directiveEnd:i+1})}function ta(e){return function(e){return lt(e)[De]}(e).clean}function na(e){return"function"==typeof e.template}function ia(e){for(var t=Object.getPrototypeOf(e.type.prototype).constructor,n=function(){var n,r,o=void 0;if(na(e))o=t.ngComponentDef||t.ngDirectiveDef;else{if(t.ngComponentDef)throw new Error("Directives cannot inherit Components");o=t.ngDirectiveDef}var s=t.ngBaseDef;if(s||o){var a=e;a.inputs=ra(e.inputs),a.declaredInputs=ra(e.declaredInputs),a.outputs=ra(e.outputs)}if(s&&(h(e.inputs,s.inputs),h(e.declaredInputs,s.declaredInputs),h(e.outputs,s.outputs)),o){var l=e.hostBindings,c=o.hostBindings;if(c&&(e.hostBindings=l?function(e,t,n){c(e,t,n),l(e,t,n)}:c),na(e)&&na(o)){var d=e.viewQuery,u=o.viewQuery;u&&(e.viewQuery=d?function(e,t){u(e,t),d(e,t)}:u)}var p=e.contentQueries,f=o.contentQueries;f&&(e.contentQueries=p?function(e){f(e),p(e)}:f);var g=e.contentQueriesRefresh,m=o.contentQueriesRefresh;m&&(e.contentQueriesRefresh=g?function(e,t){m(e,t),g(e,t)}:m),h(e.inputs,o.inputs),h(e.declaredInputs,o.declaredInputs),h(e.outputs,o.outputs),e.afterContentChecked=e.afterContentChecked||o.afterContentChecked,e.afterContentInit=e.afterContentInit||o.afterContentInit,e.afterViewChecked=e.afterViewChecked||o.afterViewChecked,e.afterViewInit=e.afterViewInit||o.afterViewInit,e.doCheck=e.doCheck||o.doCheck,e.onDestroy=e.onDestroy||o.onDestroy,e.onInit=e.onInit||o.onInit;var y=o.features;if(y)try{for(var v=Object(i.h)(y),b=v.next();!b.done;b=v.next()){var w=b.value;w&&w.ngInherit&&w(e)}}catch(x){n={error:x}}finally{try{b&&!b.done&&(r=v.return)&&r.call(v)}finally{if(n)throw n.error}}return"break"}var C=t.prototype;C&&(e.afterContentChecked=e.afterContentChecked||C.afterContentChecked,e.afterContentInit=e.afterContentInit||C.afterContentInit,e.afterViewChecked=e.afterViewChecked||C.afterViewChecked,e.afterViewInit=e.afterViewInit||C.afterViewInit,e.doCheck=e.doCheck||C.doCheck,e.onDestroy=e.onDestroy||C.onDestroy,e.onInit=e.onInit||C.onInit),t=Object.getPrototypeOf(t)};t&&"break"!==n(););}function ra(e){return e===re?{}:e===oe?[]:e}var oa="__ngOnChanges_";function sa(e){var t=e.declaredInputs,n=e.inputs,i=e.type.prototype,r=function(e){if(t.hasOwnProperty(e)){for(var r=n[e],o=t[e],s=oa+r,a=void 0,l=i;!a&&l&&Object.getPrototypeOf(l)!==Object.getPrototypeOf(Object.prototype);)a=Object.getOwnPropertyDescriptor(l,r),l=Object.getPrototypeOf(l);var c=a&&a.set;Object.defineProperty(i,r,{get:a&&a.get||(c?void 0:function(){return this[s]}),set:function(e){var t=this[oa];t||(t={},Object.defineProperty(this,oa,{value:t,writable:!0}));var n=!this.hasOwnProperty(s),i=t[o];i?i.currentValue=e:t[o]=new hi(this[s],e,n),n?Object.defineProperty(this,s,{value:e,writable:!0}):this[s]=e,c&&c.call(this,e)},configurable:!1})}};for(var o in t)r(o);null!=e.onInit&&(e.onInit=aa(e.onInit)),e.doCheck=aa(e.doCheck)}function aa(e){return function(){var t=this[oa];null!=t&&(this.ngOnChanges(t),this[oa]=null),e&&e.apply(this)}}function la(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}sa.ngInherit=!0;var ca="__source",ha=new Object,da=ha,ua=new A("INJECTOR"),pa=function(){function e(){}return e.prototype.get=function(e,t){if(void 0===t&&(t=ha),t===ha)throw new Error("NullInjectorError: No provider for "+X(e)+"!");return t},e}(),fa=function(){function e(){}return e.create=function(e,t){return Array.isArray(e)?new Oa(e,t):new Oa(e.providers,e.parent,e.name||null)},e.THROW_IF_NOT_FOUND=ha,e.NULL=new pa,e.ngInjectableDef=b({providedIn:"any",factory:function(){return Mt(ua)}}),e.__NG_ELEMENT_ID__=function(){return ma()},e}(),ga=function(){return e=$t(),new _n(e,Kt());var e},ma=la,ya=function(e){return e},va=[],ba=ya,wa=function(){return Array.prototype.slice.call(arguments)},Ca=c({provide:String,useValue:c}),xa=fa.NULL,Aa=/\n/gm,Sa="\u0275",Oa=function(){function e(e,t,n){void 0===t&&(t=xa),void 0===n&&(n=null),this.parent=t,this.source=n;var i=this._records=new Map;i.set(fa,{token:fa,fn:ya,deps:va,value:this,useNew:!1}),i.set(ua,{token:ua,fn:ya,deps:va,value:this,useNew:!1}),function e(t,n){if(n)if((n=J(n))instanceof Array)for(var i=0;i<n.length;i++)e(t,n[i]);else{if("function"==typeof n)throw Da("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Da("Unexpected provider",n);var r=J(n.provide),o=function(e){var t=function(e){var t=va,n=e.deps;if(n&&n.length){t=[];for(var i=0;i<n.length;i++){var r=6;if((l=J(n[i]))instanceof Array)for(var o=0,s=l;o<s.length;o++){var a=s[o];a instanceof At||a==At?r|=1:a instanceof Ot||a==Ot?r&=-3:a instanceof St||a==St?r&=-5:l=a instanceof xt?a.token:J(a)}t.push({token:l,options:r})}}else if(e.useExisting){var l;t=[{token:l=J(e.useExisting),options:6}]}else if(!(n||Ca in e))throw Da("'deps' required",e);return t}(e),n=ya,i=va,r=!1,o=J(e.provide);if(Ca in e)i=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)r=!0,n=J(e.useClass);else{if("function"!=typeof o)throw Da("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);r=!0,n=o}return{deps:t,fn:n,useNew:r,value:i}}(n);if(!0===n.multi){var s=t.get(r);if(s){if(s.fn!==wa)throw Ea(r)}else t.set(r,s={token:n.provide,deps:[],useNew:!1,fn:wa,value:va});s.deps.push({token:r=n,options:6})}var a=t.get(r);if(a&&a.fn==wa)throw Ea(r);t.set(r,o)}}(i,e)}return e.prototype.get=function(e,t,n){void 0===n&&(n=It.Default);var r=this._records.get(e);try{return function e(t,n,r,o,s,a){try{return function(t,n,r,o,s,a){var l,c;if(!n||a&It.SkipSelf)a&It.Self||(c=o.get(t,s,It.Default));else{if((c=n.value)==ba)throw Error(Sa+"Circular dependency");if(c===va){n.value=ba;var h=n.useNew,d=n.fn,u=n.deps,p=va;if(u.length){p=[];for(var f=0;f<u.length;f++){var g=u[f],m=g.options,y=2&m?r.get(g.token):void 0;p.push(e(g.token,y,r,y||4&m?o:xa,1&m?null:fa.THROW_IF_NOT_FOUND,It.Default))}}n.value=c=h?new((l=d).bind.apply(l,Object(i.g)([void 0],p))):d.apply(void 0,p)}}return c}(t,n,r,o,s,a)}catch(l){throw l instanceof Error||(l=new Error(l)),(l.ngTempTokenPath=l.ngTempTokenPath||[]).unshift(t),n&&n.value==ba&&(n.value=va),l}}(e,r,this._records,this.parent,t,n)}catch(s){var o=s.ngTempTokenPath;throw e[ca]&&o.unshift(e[ca]),s.message=Ia("\n"+s.message,o,this.source),s.ngTokenPath=o,s.ngTempTokenPath=null,s}},e.prototype.toString=function(){var e=[];return this._records.forEach(function(t,n){return e.push(X(n))}),"StaticInjector["+e.join(", ")+"]"},e}();function Ea(e){return Da("Cannot mix multi providers and regular providers",e)}function Ia(e,t,n){void 0===n&&(n=null),e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Sa?e.substr(2):e;var i=X(t);if(t instanceof Array)i=t.map(X).join(" -> ");else if("object"==typeof t){var r=[];for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];r.push(o+":"+("string"==typeof s?JSON.stringify(s):X(s)))}i="{"+r.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+i+"]: "+e.replace(Aa,"\n  ")}function Da(e,t){return new Error(Ia(e,t))}var ka=new A("The presence of this token marks an injector as being the root injector."),Pa={},Ta={},Ma=[],ja=void 0;function Ra(){return void 0===ja&&(ja=new pa),ja}function La(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),t=t||Ra(),new _a(e,n,t)}var _a=function(){function e(e,t,n){var i=this;this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this.destroyed=!1;var r=[];za([e],function(e){return i.processInjectorType(e,[],r)}),t&&za(t,function(n){return i.processProvider(n,e,t)}),this.records.set(ua,Fa(void 0,this)),this.isRootInjector=this.records.has(ka),this.injectorDefTypes.forEach(function(e){return i.get(e)})}return e.prototype.destroy=function(){this.assertNotDestroyed(),this.destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}},e.prototype.get=function(e,t,n){void 0===t&&(t=da),void 0===n&&(n=It.Default),this.assertNotDestroyed();var i,r=kt(this);try{if(!(n&It.SkipSelf)){var o=this.records.get(e);if(void 0===o){var s=("function"==typeof(i=e)||"object"==typeof i&&i instanceof A)&&C(e);s&&this.injectableDefInScope(s)&&(o=Fa(Na(e),Pa),this.records.set(e,o))}if(void 0!==o)return this.hydrate(e,o)}return(n&It.Self?Ra():this.parent).get(e,t)}finally{kt(r)}},e.prototype.assertNotDestroyed=function(){if(this.destroyed)throw new Error("Injector has already been destroyed.")},e.prototype.processInjectorType=function(e,t,n){var i=this;if(e=J(e)){var r=x(e),o=null==r&&e.ngModule||void 0,s=void 0===o?e:o,a=-1!==n.indexOf(s),l=void 0!==o&&e.providers||Ma;if(void 0!==o&&(r=x(o)),null!=r){if(this.injectorDefTypes.add(s),this.records.set(s,Fa(r.factory,Pa)),null!=r.imports&&!a){n.push(s);try{za(r.imports,function(e){return i.processInjectorType(e,t,n)})}finally{}}var c=r.providers;if(null!=c&&!a){var h=e;za(c,function(e){return i.processProvider(e,h,c)})}var d=e.ngModule;za(l,function(e){return i.processProvider(e,d,l)})}}},e.prototype.processProvider=function(e,t,n){var i=Va(e=J(e))?e:J(e&&e.provide),r=function(e,t,n){var i=Ba(e,t,n);return Ha(e)?Fa(void 0,e.useValue):Fa(i,Pa)}(e,t,n);if(Va(e)||!0!==e.multi){var o=this.records.get(i);if(o&&void 0!==o.multi)throw new Error("Mixed multi-provider for "+X(i))}else{var s=this.records.get(i);if(s){if(void 0===s.multi)throw new Error("Mixed multi-provider for "+i+".")}else(s=Fa(void 0,Pa,!0)).factory=function(){return Rt(s.multi)},this.records.set(i,s);i=e,s.multi.push(e)}this.records.set(i,r)},e.prototype.hydrate=function(e,t){if(t.value===Ta)throw new Error("Cannot instantiate cyclic dependency! "+X(e));var n;return t.value===Pa&&(t.value=Ta,t.value=t.factory()),"object"==typeof t.value&&t.value&&"object"==typeof(n=t.value)&&null!=n&&n.ngOnDestroy&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value},e.prototype.injectableDefInScope=function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||"root"===e.providedIn&&this.isRootInjector:this.injectorDefTypes.has(e.providedIn))},e}();function Na(e){var t=C(e);if(null===t){var n=x(e);if(null!==n)return n.factory;if(e instanceof A)throw new Error("Token "+X(e)+" is missing an ngInjectableDef definition.");if(e instanceof Function){var i=e.length;if(i>0){var r=new Array(i).fill("?");throw new Error("Can't resolve all parameters for "+X(e)+": ("+r.join(", ")+").")}return function(){return new e}}throw new Error("unreachable")}return t.factory}function Ba(e,t,n){var r,o=void 0;if(Va(e))return Na(J(e));if(Ha(e))o=function(){return J(e.useValue)};else if((r=e)&&r.useExisting)o=function(){return Mt(J(e.useExisting))};else if(e&&e.useFactory)o=function(){return e.useFactory.apply(e,Object(i.g)(Rt(e.deps||[])))};else{var s=J(e&&(e.useClass||e.provide));if(!s){var a="";throw t&&n&&(a=" - only instances of Provider and Type are allowed, got: ["+n.map(function(t){return t==e?"?"+e+"?":"..."}).join(", ")+"]"),new Error("Invalid provider for the NgModule '"+X(t)+"'"+a)}if(!e.deps)return Na(s);o=function(){return new(s.bind.apply(s,Object(i.g)([void 0],Rt(e.deps))))}}return o}function Fa(e,t,n){return void 0===n&&(n=!1),{factory:e,value:t,multi:n?[]:void 0}}function za(e,t){e.forEach(function(e){return Array.isArray(e)?za(e,t):t(e)})}function Ha(e){return e&&"object"==typeof e&&Ca in e}function Va(e){return"function"==typeof e}function Ua(e,t,n,i,r){if(e=J(e),Array.isArray(e))for(var o=0;o<e.length;o++)Ua(e[o],t,n,i,r);else{var s=Kt(),a=Va(e)?e:J(e.provide),l=Ba(e),c=$t(),h=65535&c.providerIndexes,d=c.directiveStart,u=c.providerIndexes>>16;if(Va(e)||!e.multi){var p=new Ye(l,r,_s),f=Ga(a,t,r?h:h+u,d);-1==f?(In(An(c,s),s,a),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=65536),n.push(p),s.push(p)):(n[f]=p,s[f]=p)}else{var g=Ga(a,t,h+u,d),m=Ga(a,t,h,h+u),y=m>=0&&n[m];r&&!y||!r&&!(g>=0&&n[g])?(In(An(c,s),s,a),p=function(e,t,n,i,r){var o=new Ye(e,n,_s);return o.multi=[],o.index=t,o.componentProviders=0,Wa(o,r,i&&!n),o}(r?Qa:qa,n.length,r,i,l),!r&&y&&(n[m].providerFactory=p),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=65536),n.push(p),s.push(p)):Wa(n[r?m:g],l,!r&&i),!r&&i&&y&&n[m].componentProviders++}}}function Wa(e,t,n){e.multi.push(t),n&&e.componentProviders++}function Ga(e,t,n,i){for(var r=n;r<i;r++)if(t[r]===e)return r;return-1}function qa(e,t,n,i){return Ya(this.multi,[])}function Qa(e,t,n,i){var r,o=this.multi;if(this.providerFactory){var s=this.providerFactory.componentProviders,a=jn(t,n,this.providerFactory.index,i);Ya(o,r=a.slice(0,s));for(var l=s;l<a.length;l++)r.push(a[l])}else Ya(o,r=[]);return r}function Ya(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function Xa(e,t){return void 0===t&&(t=[]),function(n){n.providersResolver=function(n){return function(e,t,n){var i=Kt()[be];if(i.firstTemplatePass){var r=ot(e);Ua(n,i.data,i.blueprint,r,!0),Ua(t,i.data,i.blueprint,r,!1)}}(n,e,t)}}}var Za=function(){return function(){}}(),Ka=function(){return function(){}}();function Ja(e){var t=Error("No component factory found for "+X(e)+". Did you add it to @NgModule.entryComponents?");return t[nl]=e,t}var $a,el,tl,nl="ngComponent",il=function(){function e(){}return e.prototype.resolveComponentFactory=function(e){throw Ja(e)},e}(),rl=function(){function e(){}return e.NULL=new il,e}(),ol=function(){function e(e,t,n){this._parent=t,this._ngModule=n,this._factories=new Map;for(var i=0;i<e.length;i++){var r=e[i];this._factories.set(r.componentType,r)}}return e.prototype.resolveComponentFactory=function(e){var t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw Ja(e);return new sl(t,this._ngModule)},e}(),sl=function(e){function t(t,n){var i=e.call(this)||this;return i.factory=t,i.ngModule=n,i.selector=t.selector,i.componentType=t.componentType,i.ngContentSelectors=t.ngContentSelectors,i.inputs=t.inputs,i.outputs=t.outputs,i}return Object(i.c)(t,e),t.prototype.create=function(e,t,n,i){return this.factory.create(e,t,n,i||this.ngModule)},t}(Ka),al=function(){return function(){}}(),ll=function(){return function(){}}(),cl=function(){function e(e,t,n){this._context=t,this._componentIndex=n,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null,this._lView=e}return Object.defineProperty(e.prototype,"rootNodes",{get:function(){return null==this._lView[Se]?function e(t,n,i){for(var r=n.child;r;)i.push(et(r,t)),4===r.type&&e(t,r,i),r=r.next;return i}(this._lView,this._lView[Oe],[]):[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context?this._context:this._lookUpContext()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return 64==(64&this._lView[we])},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}Bi(this._lView)},e.prototype.onDestroy=function(e){var t,n;n=e,Vs(t=this._lView).push(n),t[be].firstTemplatePass&&Us(t).push(t[Ie].length-1,null)},e.prototype.markForCheck=function(){ps(this._lView)},e.prototype.detach=function(){this._lView[we]&=-17},e.prototype.reattach=function(){this._lView[we]|=16},e.prototype.detectChanges=function(){ys(this._lView,this.context)},e.prototype.checkNoChanges=function(){!function(e){cn(!0);try{ms(e)}finally{cn(!1)}}(this.context)},e.prototype.attachToViewContainerRef=function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e},e.prototype.detachFromAppRef=function(){this._appRef=null},e.prototype.attachToAppRef=function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e},e.prototype._lookUpContext=function(){return this._context=this._lView[Ce][this._componentIndex]},e}(),hl=function(e){function t(t){var n=e.call(this,t,null,-1)||this;return n._view=t,n}return Object(i.c)(t,e),t.prototype.detectChanges=function(){vs(this._view)},t.prototype.checkNoChanges=function(){!function(e){cn(!0);try{vs(e)}finally{cn(!1)}}(this._view)},Object.defineProperty(t.prototype,"context",{get:function(){return null},enumerable:!0,configurable:!0}),t}(cl);function dl(e,t,n){return $a||($a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t}(e)),new $a(et(t,n))}function ul(e,t,n,r){if(el||(el=function(e){function t(t,n,i,r,o,s){var a=e.call(this)||this;return a._declarationParentView=t,a.elementRef=n,a._tView=i,a._renderer=r,a._queries=o,a._injectorIndex=s,a}return Object(i.c)(t,e),t.prototype.createEmbeddedView=function(e,t,n,i,r){var o=function(e,t,n,i,r,o){var s=nn(),a=$t();rn(!0),en(null);var l=so(n,e,t,4);return l[_e]=n,r&&(l[Ae]=r.createView()),lo(-1,l),e.firstTemplatePass&&(e.node.injectorIndex=o),rn(s),en(a),l}(this._tView,e,this._declarationParentView,0,this._queries,this._injectorIndex);t&&Ri(o,t,i,r,n.index),ho(o,this._tView,e);var s=new cl(o,e,-1);return s._tViewNode=o[Oe],s},t}(e)),0===n.type){var o=r[n.index];return new el(r,dl(t,n,r),n.tViews,Kt()[Te],o[Ae],n.injectorIndex)}return null}function pl(e,t,n){if(rt(e)){var i=e.directiveStart,r=nt(e.index,t);return new cl(r,n,i)}if(3===e.type){var o=vt(t);return new cl(o,o[De],-1)}return null}var fl=function(){function e(e){this.nativeElement=e}return e.__NG_ELEMENT_ID__=function(){return ml(e)},e}(),gl=function(e){return dl(e,$t(),Kt())},ml=la,yl=function(){return function(e,t,n,i,r,o){this.id=e,this.templateUrl=t,this.slotCount=n,this.encapsulation=i,this.styles=r,this.animations=o}}(),vl=function(){return function(){}}(),bl=function(){return function(){}}(),wl=function(){return function(){}}(),Cl=function(){return function(){}}(),xl=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({}),Al=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return Ol()},e}(),Sl=function(){return function(e){var t=Kt()[Te];if(Ai(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}()},Ol=la,El=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({}),Il=function(){return function(){}}(),Dl=function(){return function(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}(),kl=new Dl("7.2.15"),Pl=function(e){function t(t){var n=e.call(this)||this;return n.ngModule=t,n}return Object(i.c)(t,e),t.prototype.resolveComponentFactory=function(e){var t=ge(e);return new Ll(t,this.ngModule)},t}(rl);function Tl(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var Ml=new A("ROOT_CONTEXT_TOKEN",{providedIn:"root",factory:function(){return $s(Mt(jl))}}),jl=new A("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return mt}}),Rl={},Ll=function(e){function t(t,n){var i=e.call(this)||this;return i.componentDef=t,i.ngModule=n,i.componentType=t.type,i.selector=t.selectors[0][0],i.ngContentSelectors=[],i}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"inputs",{get:function(){return Tl(this.componentDef.inputs)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return Tl(this.componentDef.outputs)},enumerable:!0,configurable:!0}),t.prototype.create=function(e,t,n,i){var r=void 0===n,o=(i=i||this.ngModule)?function(e,t){return{get:function(n,i){var r=e.get(n,Rl);return r!==Rl||i===Rl?r:t.get(n,i)}}}(e,i.injector):e,s=o.get(Cl,Si),a=o.get(Il,null),l=r?Ao(this.selector,s.createRenderer(null,this.componentDef)):Do(s,n),c=this.componentDef.onPush?136:132,h=r?$s():o.get(Ml),d=s.createRenderer(l,this.componentDef);n&&l&&(Ai(d)?d.setAttribute(l,"ng-version",kl.full):l.setAttribute("ng-version",kl.full));var u,p,f=so(null,Eo(-1,null,1,0,null,null,null),h,c,s,d,a,o),g=mn(f,null);try{s.begin&&s.begin();var m=Ks(l,this.componentDef,f,s,d);if(p=tt(0,f),t)for(var y=0,v=f[be],b=p.projection=[],w=0;w<t.length;w++){for(var C=t[w],x=null,A=null,S=0;S<C.length;S++){v.firstTemplatePass&&(v.expandoStartIndex++,v.blueprint.splice(++y+Ne,0,null),v.data.splice(y+Ne,0,null),f.splice(y+Ne,0,null));var O=ao(y,3,C[S],null,null);A?A.next=O:x=O,A=O}b.push(x)}u=Js(m,this.componentDef,f,h,[ea]),us(f,Ne,m),oo(f)}finally{vn(g),s.end&&s.end()}var E=new _l(this.componentType,u,dl(fl,p,f),f,p);return r&&(E.hostView._tViewNode.child=p),E},t}(Ka),_l=function(e){function t(t,n,i,r,o){var s=e.call(this)||this;return s.location=i,s._rootLView=r,s._tNode=o,s.destroyCbs=[],s.instance=n,s.hostView=s.changeDetectorRef=new hl(r),s.hostView._tViewNode=lo(-1,r),s.componentType=t,s}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"injector",{get:function(){return new _n(this._tNode,this._rootLView)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null,this.hostView.destroy()},t.prototype.onDestroy=function(e){this.destroyCbs.push(e)},t}(Za),Nl=!0,Bl=!1;function Fl(){return Bl=!0,Nl}function zl(){if(Bl)throw new Error("Cannot enable prod mode after platform setup.");Nl=!1}var Hl=function(){function e(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),this.inertBodyElement=this.inertDocument.createElement("body"),t.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return e.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(i){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);var n=t.response.body;return n.removeChild(n.firstChild),n},e.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(n){return null}},e.prototype.getInertBodyElement_InertDocument=function(e){var t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},e.prototype.stripCustomNsAttrs=function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var i=t.item(n).name;"xmlns:ns1"!==i&&0!==i.indexOf("ns1:")||e.removeAttribute(i)}for(var r=e.firstChild;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling},e}(),Vl=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,Ul=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wl(e){return(e=String(e)).match(Vl)||e.match(Ul)?e:(Fl()&&console.warn("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function Gl(e){return(e=String(e)).split(",").map(function(e){return Wl(e.trim())}).join(", ")}function ql(e){var t,n,r={};try{for(var o=Object(i.h)(e.split(",")),s=o.next();!s.done;s=o.next())r[s.value]=!0}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}function Ql(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o={};try{for(var s=Object(i.h)(n),a=s.next();!a.done;a=s.next()){var l=a.value;for(var c in l)l.hasOwnProperty(c)&&(o[c]=!0)}}catch(h){e={error:h}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return o}var Yl,Xl=ql("area,br,col,hr,img,wbr"),Zl=ql("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Kl=ql("rp,rt"),Jl=Ql(Kl,Zl),$l=Ql(Xl,Ql(Zl,ql("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ql(Kl,ql("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jl),ec=ql("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),tc=ql("srcset"),nc=Ql(ec,tc,ql("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),ic=ql("script,style,template"),rc=function(){function e(){this.sanitizedSomething=!1,this.buf=[]}return e.prototype.sanitizeChildren=function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")},e.prototype.startElement=function(e){var t=e.nodeName.toLowerCase();if(!$l.hasOwnProperty(t))return this.sanitizedSomething=!0,!ic.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n=e.attributes,i=0;i<n.length;i++){var r=n.item(i),o=r.name,s=o.toLowerCase();if(nc.hasOwnProperty(s)){var a=r.value;ec[s]&&(a=Wl(a)),tc[s]&&(a=Gl(a)),this.buf.push(" ",o,'="',ac(a),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0},e.prototype.endElement=function(e){var t=e.nodeName.toLowerCase();$l.hasOwnProperty(t)&&!Xl.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))},e.prototype.chars=function(e){this.buf.push(ac(e))},e.prototype.checkClobberedElement=function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return t},e}(),oc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,sc=/([^\#-~ |!])/g;function ac(e){return e.replace(/&/g,"&amp;").replace(oc,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(sc,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function lc(e,t){var n=null;try{Yl=Yl||new Hl(e);var i=t?String(t):"";n=Yl.getInertBodyElement(i);var r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=Yl.getInertBodyElement(i)}while(i!==o);var s=new rc,a=s.sanitizeChildren(cc(n)||n);return Fl()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n)for(var l=cc(n)||n;l.firstChild;)l.removeChild(l.firstChild)}}function cc(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var hc={marker:"element"},dc={marker:"comment"},uc="\ufffd",pc=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,fc=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,gc=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,mc=/\ufffd(\d+):?\d*\ufffd/gi,yc=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,vc=/\[(\ufffd.+?\ufffd?)\]/g,bc=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,wc=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g;function Cc(e){if(!e)return[];var t,n=0,i=[],r=[],o=/[{}]/g;for(o.lastIndex=0;t=o.exec(e);){var s=t.index;if("}"==t[0]){if(i.pop(),0==i.length){var a=e.substring(n,s);pc.test(a)?r.push(xc(a)):a&&r.push(a),n=s+1}}else{if(0==i.length){var l=e.substring(n,s);r.push(l),n=s+1}i.push("{")}}var c=e.substring(n);return""!=c&&r.push(c),r}function xc(e){for(var t=[],n=[],i=1,r=0,o=Cc(e=e.replace(pc,function(e,t,n){return i="select"===n?0:1,r=parseInt(t.substr(1),10),""})),s=0;s<o.length;){var a=o[s++].trim();1===i&&(a=a.replace(/\s*(?:=)?(\w+)\s*/,"$1")),a.length&&t.push(a);var l=Cc(o[s++]);l.length&&n.push(l)}return c=t.indexOf("other"),h='Missing key "other" in ICU statement.',c<=-1&&function(e){throw new Error("ASSERTION ERROR: "+e)}(h),{type:i,mainBinding:r,cases:t,values:n};var c,h}function Ac(e){for(var t,n,i="",r=0,o=!1;null!==(t=fc.exec(e));)o?t[0]===uc+"/*"+n+uc&&(r=t.index,o=!1):(i+=e.substring(r,t.index+t[0].length),n=t[1],o=!0);return i+e.substr(r)}function Sc(e,t,n,i){void 0===i&&(i=null);for(var r=[null,null],o=e.split(mc),s=0,a=0;a<o.length;a++){var l=o[a];if(1&a){var c=parseInt(l,10);r.push(-1-c),s|=Dc(c)}else""!==l&&r.push(l)}return r.push(t<<2|(n?1:0)),n&&r.push(n,i),r[0]=s,r[1]=r.length-2,r}function Oc(e,t){var n;void 0===t&&(t=0),t|=Dc(e.mainBinding);for(var i=0;i<e.values.length;i++)for(var r=e.values[i],o=0;o<r.length;o++){var s=r[o];if("string"==typeof s)for(;n=mc.exec(s);)t|=Dc(parseInt(n[1],10));else t=Oc(s,t)}return t}var Ec=[],Ic=-1;function Dc(e){return 1<<Math.min(e,31)}var kc=[];function Pc(e,t,n){var i=Kt()[be];Ec[++Ic]=e,i.firstTemplatePass&&null===i.data[e+Ne]&&function(e,t,n,i){var r=Kt(),o=e.blueprint.length-Ne,s=$t(),a=nn()?$t():s&&s.parent,l=a&&a!==r[Oe]?a.index-Ne:t,c=0;kc[c]=l;var h=[];t>0&&s!==a&&h.push(s.index<<3|0);for(var d=[],u=[],p=function(e,t){if("number"!=typeof t)return Ac(e);var n=e.indexOf(":"+t+uc)+2+t.toString().length,i=e.search(new RegExp(uc+"\\/\\*\\d+:"+t+uc));return Ac(e.substring(n,i))}(n,i).split(gc),f=0;f<p.length;f++){var g=p[f];if(1&f)if("/"===g.charAt(0)){if("#"===g.charAt(1)){var m=parseInt(g.substr(2),10);l=kc[--c],h.push(m<<3|5)}}else m=parseInt(g.substr(1),10),h.push(m<<3|0,l<<17|1),"#"===g.charAt(0)&&(kc[++c]=l=m);else for(var y=g.split(yc),v=0;v<y.length;v++)if(g=y[v],1&v){co(r);var b=e.blueprint.length-1-Ne;h.push(dc,"",l<<17|1);var w=xc(g.substr(1,g.length-2)),C=Oc(w);Wc(u,w,b,b);var x=u.length-1;d.push(Dc(w.mainBinding),3,-1-w.mainBinding,b<<2|2,x,C,2,b<<2|3,x)}else if(""!==g){var A=g.match(mc);co(r),h.push(A?"":g,l<<17|1),A&&yt(Sc(g,e.blueprint.length-1-Ne),d)}}e.data[t+Ne]={vars:e.blueprint.length-Ne-o,expandoStartIndex:o,create:h,update:d,icus:u.length?u:null}}(i,e,t,n)}function Tc(e,t,n){var i=Kt();n||(n=t),n===t&&e!==t.child?(e.next=t.child,t.child=e):n!==t&&e!==n.next?(e.next=n.next,n.next=e):e.next=null,t!==i[Oe]&&(e.parent=t),Gi(et(e,i),e,i);var r=i[e.index];return 0!==e.type&&st(r)&&Gi(r[ze],e,i),e}function Mc(e,t){var n={},i=e.replace(vc,function(e,t){if(n[t]||(n[t]=t.split("|")),!n[t].length)throw new Error("i18n postprocess: unmatched placeholder - "+t);return n[t].shift()});if(Object.keys(n).some(function(e){return!!n[e].length}))throw new Error("i18n postprocess: unmatched values - "+JSON.stringify(n));return Object.keys(t).length?i=(i=i.replace(bc,function(e,n,i,r,o,s){return t.hasOwnProperty(i)?""+n+t[i]+s:e})).replace(wc,function(e,n){if(t.hasOwnProperty(n)){var i=t[n];if(!i.length)throw new Error("i18n postprocess: unmatched ICU - "+e+" with key: "+n);return i.shift()}return e}):i}function jc(){!function(e){for(var t=Kt(),n=Ec[Ic--],i=e.data[n+Ne],r=$t(),o=Rc(n,i.create,i.expandoStartIndex,t),s=n+1;s<=r.index-Ne;s++)-1===o.indexOf(s)&&Lc(s,t)}(Kt()[be])}function Rc(e,t,n,i){for(var r=Kt()[Te],o=null,s=null,a=[],l=0;l<t.length;l++){var c=t[l];if("string"==typeof c)s=o,o=ao(n++,3,Mi(c,r),null,null),rn(!1);else if("number"==typeof c)switch(7&c){case 1:var h=c>>>17,d=void 0;s=Tc(o,d=h===e?i[Oe]:tt(h,i),s),d.next=null;break;case 0:var u=c>>>3;a.push(u),s=o,(o=tt(u,i))&&(en(o),3===o.type&&rn(!0));break;case 5:s=o=tt(c>>>3,i),en(o),rn(!1);break;case 4:To(c>>>3,t[++l],t[++l]);break;default:throw new Error('Unable to determine the type of mutate operation for "'+c+'"')}else switch(c){case dc:var p=t[++l],f=r.createComment(p);s=o,o=ao(n++,5,f,null,null),Vn(f,i),o.activeCaseIndex=null,rn(!1);break;case hc:var g=t[++l];s=o,o=ao(n++,3,r.createElement(g),g,null);break;default:throw new Error('Unable to determine the type of mutate operation for "'+c+'"')}}return rn(!1),a}function Lc(e,t){var n=tt(e,t);Yi(n,$e(e,t)||null,t),n.detached=!0;var i=Ls(e);if(st(i)){var r=i;0!==n.type&&Yi(n,r[ze]||null,t),r[He]=null}}function _c(e,t,n){Pc(e,t,n),jc()}function Nc(e,t){var n=Kt()[be];n.firstTemplatePass&&null===n.data[e+Ne]&&function(e,t,n){for(var i=$t().index-Ne,r=[],o=0;o<n.length;o+=2)for(var s=n[o],a=n[o+1].split(yc),l=0;l<a.length;l++){var c=a[l];1&l||""!==c&&(c.match(mc)?yt(Sc(c,i,s),r):To(i,s,c))}e.data[t+Ne]=r}(n,e,t)}var Bc=0,Fc=0;function zc(e){e!==fi&&(Bc|=1<<Fc),Fc++}function Hc(e){if(Fc){var t=Kt(),n=t[be].data[e+Ne],i=void 0,r=null;Array.isArray(n)?i=n:(i=n.update,r=n.icus),function e(t,n,i,r,o,s){void 0===s&&(s=!1);for(var a=!1,l=0;l<t.length;l++){var c=t[l],h=t[++l];if(s||c&r)for(var d="",u=l+1;u<=l+h;u++){var p=t[u];if("string"==typeof p)d+=p;else if("number"==typeof p)if(p<0)d+=Ze(o[i-p]);else{var f=p>>>2,g=void 0,m=void 0;switch(3&p){case 1:To(f,t[++u],d,t[++u]);break;case 0:qo(f,d);break;case 2:if(g=n[t[++u]],null!==(m=tt(f,o)).activeCaseIndex)for(var y=g.remove[m.activeCaseIndex],v=0;v<y.length;v++){var b=y[v];switch(7&b){case 3:Lc(b>>>3,o);break;case 6:var w=tt(y[v+1]>>>3,o).activeCaseIndex;null!==w&&yt(n[b>>>3].remove[w],y)}}var C=Uc(g,d);m.activeCaseIndex=-1!==C?C:null,Rc(-1,g.create[C],g.expandoStartIndex,o),a=!0;break;case 3:g=n[t[++u]],m=tt(f,o),e(g.update[m.activeCaseIndex],n,i,r,o,a)}}}l+=h}}(i,r,t[Ee]-Fc-1,Bc,t),Bc=0,Fc=0}}var Vc=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({});function Uc(e,t){var n=e.cases.indexOf(t);if(-1===n)switch(e.type){case 1:var i=function(e,n){switch(function(e,t){"string"==typeof t&&(t=parseInt(t,10));var n=t,i=n.toString().replace(/^[^.]*\.?/,""),r=Math.floor(Math.abs(n)),o=i.length,s=parseInt(i,10),a=parseInt(n.toString().replace(/^[^.]*\.?|0+$/g,""),10)||0;switch(e.split("-")[0].toLowerCase()){case"af":case"asa":case"az":case"bem":case"bez":case"bg":case"brx":case"ce":case"cgg":case"chr":case"ckb":case"ee":case"el":case"eo":case"es":case"eu":case"fo":case"fur":case"gsw":case"ha":case"haw":case"hu":case"jgo":case"jmc":case"ka":case"kk":case"kkj":case"kl":case"ks":case"ksb":case"ky":case"lb":case"lg":case"mas":case"mgo":case"ml":case"mn":case"nb":case"nd":case"ne":case"nn":case"nnh":case"nyn":case"om":case"or":case"os":case"ps":case"rm":case"rof":case"rwk":case"saq":case"seh":case"sn":case"so":case"sq":case"ta":case"te":case"teo":case"tk":case"tr":case"ug":case"uz":case"vo":case"vun":case"wae":case"xog":return 1===n?Vc.One:Vc.Other;case"ak":case"ln":case"mg":case"pa":case"ti":return n===Math.floor(n)&&n>=0&&n<=1?Vc.One:Vc.Other;case"am":case"as":case"bn":case"fa":case"gu":case"hi":case"kn":case"mr":case"zu":return 0===r||1===n?Vc.One:Vc.Other;case"ar":return 0===n?Vc.Zero:1===n?Vc.One:2===n?Vc.Two:n%100===Math.floor(n%100)&&n%100>=3&&n%100<=10?Vc.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=99?Vc.Many:Vc.Other;case"ast":case"ca":case"de":case"en":case"et":case"fi":case"fy":case"gl":case"it":case"nl":case"sv":case"sw":case"ur":case"yi":return 1===r&&0===o?Vc.One:Vc.Other;case"be":return n%10==1&&n%100!=11?Vc.One:n%10===Math.floor(n%10)&&n%10>=2&&n%10<=4&&!(n%100>=12&&n%100<=14)?Vc.Few:n%10==0||n%10===Math.floor(n%10)&&n%10>=5&&n%10<=9||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=14?Vc.Many:Vc.Other;case"br":return n%10==1&&n%100!=11&&n%100!=71&&n%100!=91?Vc.One:n%10==2&&n%100!=12&&n%100!=72&&n%100!=92?Vc.Two:n%10===Math.floor(n%10)&&(n%10>=3&&n%10<=4||n%10==9)&&!(n%100>=10&&n%100<=19||n%100>=70&&n%100<=79||n%100>=90&&n%100<=99)?Vc.Few:0!==n&&n%1e6==0?Vc.Many:Vc.Other;case"bs":case"hr":case"sr":return 0===o&&r%10==1&&r%100!=11||s%10==1&&s%100!=11?Vc.One:0===o&&r%10===Math.floor(r%10)&&r%10>=2&&r%10<=4&&!(r%100>=12&&r%100<=14)||s%10===Math.floor(s%10)&&s%10>=2&&s%10<=4&&!(s%100>=12&&s%100<=14)?Vc.Few:Vc.Other;case"cs":case"sk":return 1===r&&0===o?Vc.One:r===Math.floor(r)&&r>=2&&r<=4&&0===o?Vc.Few:0!==o?Vc.Many:Vc.Other;case"cy":return 0===n?Vc.Zero:1===n?Vc.One:2===n?Vc.Two:3===n?Vc.Few:6===n?Vc.Many:Vc.Other;case"da":return 1===n||0!==a&&(0===r||1===r)?Vc.One:Vc.Other;case"dsb":case"hsb":return 0===o&&r%100==1||s%100==1?Vc.One:0===o&&r%100==2||s%100==2?Vc.Two:0===o&&r%100===Math.floor(r%100)&&r%100>=3&&r%100<=4||s%100===Math.floor(s%100)&&s%100>=3&&s%100<=4?Vc.Few:Vc.Other;case"ff":case"fr":case"hy":case"kab":return 0===r||1===r?Vc.One:Vc.Other;case"fil":return 0===o&&(1===r||2===r||3===r)||0===o&&r%10!=4&&r%10!=6&&r%10!=9||0!==o&&s%10!=4&&s%10!=6&&s%10!=9?Vc.One:Vc.Other;case"ga":return 1===n?Vc.One:2===n?Vc.Two:n===Math.floor(n)&&n>=3&&n<=6?Vc.Few:n===Math.floor(n)&&n>=7&&n<=10?Vc.Many:Vc.Other;case"gd":return 1===n||11===n?Vc.One:2===n||12===n?Vc.Two:n===Math.floor(n)&&(n>=3&&n<=10||n>=13&&n<=19)?Vc.Few:Vc.Other;case"gv":return 0===o&&r%10==1?Vc.One:0===o&&r%10==2?Vc.Two:0!==o||r%100!=0&&r%100!=20&&r%100!=40&&r%100!=60&&r%100!=80?0!==o?Vc.Many:Vc.Other:Vc.Few;case"he":return 1===r&&0===o?Vc.One:2===r&&0===o?Vc.Two:0!==o||n>=0&&n<=10||n%10!=0?Vc.Other:Vc.Many;case"is":return 0===a&&r%10==1&&r%100!=11||0!==a?Vc.One:Vc.Other;case"ksh":return 0===n?Vc.Zero:1===n?Vc.One:Vc.Other;case"kw":case"naq":case"se":case"smn":return 1===n?Vc.One:2===n?Vc.Two:Vc.Other;case"lag":return 0===n?Vc.Zero:0!==r&&1!==r||0===n?Vc.Other:Vc.One;case"lt":return n%10!=1||n%100>=11&&n%100<=19?n%10===Math.floor(n%10)&&n%10>=2&&n%10<=9&&!(n%100>=11&&n%100<=19)?Vc.Few:0!==s?Vc.Many:Vc.Other:Vc.One;case"lv":case"prg":return n%10==0||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19||2===o&&s%100===Math.floor(s%100)&&s%100>=11&&s%100<=19?Vc.Zero:n%10==1&&n%100!=11||2===o&&s%10==1&&s%100!=11||2!==o&&s%10==1?Vc.One:Vc.Other;case"mk":return 0===o&&r%10==1||s%10==1?Vc.One:Vc.Other;case"mt":return 1===n?Vc.One:0===n||n%100===Math.floor(n%100)&&n%100>=2&&n%100<=10?Vc.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19?Vc.Many:Vc.Other;case"pl":return 1===r&&0===o?Vc.One:0===o&&r%10===Math.floor(r%10)&&r%10>=2&&r%10<=4&&!(r%100>=12&&r%100<=14)?Vc.Few:0===o&&1!==r&&r%10===Math.floor(r%10)&&r%10>=0&&r%10<=1||0===o&&r%10===Math.floor(r%10)&&r%10>=5&&r%10<=9||0===o&&r%100===Math.floor(r%100)&&r%100>=12&&r%100<=14?Vc.Many:Vc.Other;case"pt":return n===Math.floor(n)&&n>=0&&n<=2&&2!==n?Vc.One:Vc.Other;case"ro":return 1===r&&0===o?Vc.One:0!==o||0===n||1!==n&&n%100===Math.floor(n%100)&&n%100>=1&&n%100<=19?Vc.Few:Vc.Other;case"ru":case"uk":return 0===o&&r%10==1&&r%100!=11?Vc.One:0===o&&r%10===Math.floor(r%10)&&r%10>=2&&r%10<=4&&!(r%100>=12&&r%100<=14)?Vc.Few:0===o&&r%10==0||0===o&&r%10===Math.floor(r%10)&&r%10>=5&&r%10<=9||0===o&&r%100===Math.floor(r%100)&&r%100>=11&&r%100<=14?Vc.Many:Vc.Other;case"shi":return 0===r||1===n?Vc.One:n===Math.floor(n)&&n>=2&&n<=10?Vc.Few:Vc.Other;case"si":return 0===n||1===n||0===r&&1===s?Vc.One:Vc.Other;case"sl":return 0===o&&r%100==1?Vc.One:0===o&&r%100==2?Vc.Two:0===o&&r%100===Math.floor(r%100)&&r%100>=3&&r%100<=4||0!==o?Vc.Few:Vc.Other;case"tzm":return n===Math.floor(n)&&n>=0&&n<=1||n===Math.floor(n)&&n>=11&&n<=99?Vc.One:Vc.Other;default:return Vc.Other}}("en-US",t)){case Vc.Zero:return"zero";case Vc.One:return"one";case Vc.Two:return"two";case Vc.Few:return"few";case Vc.Many:return"many";default:return"other"}}();-1===(n=e.cases.indexOf(i))&&"other"!==i&&(n=e.cases.indexOf("other"));break;case 0:n=e.cases.indexOf("other")}return n}function Wc(e,t,n,r){for(var o=[],s=[],a=[],l=[],c=[],h=0;h<t.values.length;h++){for(var d=t.values[h],u=[],p=0;p<d.length;p++){var f=d[p];if("string"!=typeof f){var g=u.push(f)-1;d[p]="\x3c!--\ufffd"+g+"\ufffd--\x3e"}}var m=Gc(d.join(""),n,u,e,r);o.push(m.create),s.push(m.remove),a.push(m.update),l.push(m.vars),c.push(m.childIcus)}e.push({type:t.type,vars:l,expandoStartIndex:r+1,childIcus:c,cases:t.cases,create:o,remove:s,update:a});var y=Kt(),v=Math.max.apply(Math,Object(i.g)(l));for(h=0;h<v;h++)co(y)}function Gc(e,t,n,r,o){var s=new Hl(document).getInertBodyElement(e);if(!s)throw new Error("Unable to generate inert body element");var a={vars:0,childIcus:[],create:[],remove:[],update:[]};return function e(t,n,r,o,s,a){if(t){for(var l=[];t;){var c=t.nextSibling,h=a+ ++n.vars;switch(t.nodeType){case Node.ELEMENT_NODE:var d=t,u=d.tagName.toLowerCase();if($l.hasOwnProperty(u)){n.create.push(hc,u,r<<17|1);for(var p=d.attributes,f=0;f<p.length;f++){var g=p.item(f),m=g.name.toLowerCase();g.value.match(mc)?nc.hasOwnProperty(m)&&yt(ec[m]?Sc(g.value,h,g.name,Wl):tc[m]?Sc(g.value,h,g.name,Gl):Sc(g.value,h,g.name),n.update):n.create.push(h<<3|4,g.name,g.value)}e(t.firstChild,n,h,o,s,a),n.remove.push(h<<3|3)}else n.vars--;break;case Node.TEXT_NODE:var y=t.textContent||"",v=y.match(mc);n.create.push(v?"":y,r<<17|1),n.remove.push(h<<3|3),v&&yt(Sc(y,h),n.update);break;case Node.COMMENT_NODE:var b=qc.exec(t.textContent||"");if(b){var w=parseInt(b[1],10);n.create.push(dc,"",r<<17|1),l.push([C=o[w],h])}else n.vars--;break;default:n.vars--}t=c}for(f=0;f<l.length;f++){var C,x=l[f][1];Wc(s,C=l[f][0],x,a+n.vars);var A=s.length-1;n.vars+=Math.max.apply(Math,Object(i.g)(s[A].vars)),n.childIcus.push(A);var S=Oc(C);n.update.push(Dc(C.mainBinding),3,-1-C.mainBinding,x<<2|2,A,S,2,x<<2|3,A),n.remove.push(A<<3|6,x<<3|3)}}}((cc(s)||s).firstChild,a,t,n,r,o),a}var qc=/\ufffd(\d+)\ufffd/,Qc={provide:rl,useClass:Pl,deps:[al]},Yc=function(e){function t(t,n){var i=e.call(this)||this;i._parent=n,i._bootstrapComponents=[],i.injector=i,i.destroyCbs=[];var r=ve(t);return i._bootstrapComponents=r.bootstrap,i._r3Injector=La(t,n,[{provide:al,useValue:i},Qc]),i.instance=i.get(t),i}return Object(i.c)(t,e),t.prototype.get=function(e,t,n){return void 0===t&&(t=fa.THROW_IF_NOT_FOUND),void 0===n&&(n=It.Default),e===fa||e===al||e===ua?this:this._r3Injector.get(e,t,n)},Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(rl)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null},t.prototype.onDestroy=function(e){this.destroyCbs.push(e)},t}(al),Xc=function(e){function t(t){var n=e.call(this)||this;return n.moduleType=t,n}return Object(i.c)(t,e),t.prototype.create=function(e){return new Yc(this.moduleType,e)},t}(ll);function Zc(e,t,n,r){var o,s=e;null!==t&&(void 0!==s.decorators?(o=s.decorators).push.apply(o,Object(i.g)(t)):s.decorators=t),null!==n&&(s.ctorParameters=n),null!==r&&(s.propDecorators=void 0!==s.propDecorators?Object(i.a)({},s.propDecorators,r):r)}function Kc(e,t,n){var i=fn()+e,r=Kt();return on()?gi(r,i,n?t.call(n):t()):mi(r,i)}function Jc(e,t,n,i){var r=Kt(),o=fn()+e;return yi(r,o,n)?gi(r,o+1,i?t.call(i,n):t(n)):mi(r,o+1)}function $c(e,t,n,i,r){var o=fn()+e,s=Kt();return vi(s,o,n,i)?gi(s,o+2,r?t.call(r,n,i):t(n,i)):mi(s,o+2)}function eh(e,t,n,i,r,o){var s=fn()+e,a=Kt();return bi(a,s,n,i,r)?gi(a,s+3,o?t.call(o,n,i,r):t(n,i,r)):mi(a,s+3)}function th(e,t,n,i,r,o,s){var a=fn()+e,l=Kt();return wi(l,a,n,i,r,o)?gi(l,a+4,s?t.call(s,n,i,r,o):t(n,i,r,o)):mi(l,a+4)}function nh(e,t,n,i,r,o,s,a){var l=fn()+e,c=Kt(),h=wi(c,l,n,i,r,o);return yi(c,l+4,s)||h?gi(c,l+5,a?t.call(a,n,i,r,o,s):t(n,i,r,o,s)):mi(c,l+5)}function ih(e,t,n,i,r,o,s,a,l){var c=fn()+e,h=Kt(),d=wi(h,c,n,i,r,o);return vi(h,c+4,s,a)||d?gi(h,c+6,l?t.call(l,n,i,r,o,s,a):t(n,i,r,o,s,a)):mi(h,c+6)}function rh(e,t,n,i,r,o,s,a,l,c){var h=fn()+e,d=Kt(),u=wi(d,h,n,i,r,o);return bi(d,h+4,s,a,l)||u?gi(d,h+7,c?t.call(c,n,i,r,o,s,a,l):t(n,i,r,o,s,a,l)):mi(d,h+7)}function oh(e,t,n,i,r,o,s,a,l,c,h){var d=fn()+e,u=Kt(),p=wi(u,d,n,i,r,o);return wi(u,d+4,s,a,l,c)||p?gi(u,d+8,h?t.call(h,n,i,r,o,s,a,l,c):t(n,i,r,o,s,a,l,c)):mi(u,d+8)}function sh(e,t,n,i){for(var r=fn()+e,o=!1,s=Kt(),a=0;a<n.length;a++)yi(s,r++,n[a])&&(o=!0);return o?gi(s,r,t.apply(i,n)):mi(s,r)}function ah(e,t){var n,i=Kt()[be],r=e+Ne;i.firstTemplatePass?(n=function(e,t){if(t)for(var n=t.length-1;n>=0;n--){var i=t[n];if(e===i.name)return i}throw new Error("The pipe '"+e+"' could not be found!")}(t,i.pipeRegistry),i.data[r]=n,n.onDestroy&&(i.pipeDestroyHooks||(i.pipeDestroyHooks=[])).push(r,n.onDestroy)):n=i.data[r];var o=n.factory(null);return Ms(e,o),o}function lh(e,t,n){var i=Ls(e);return fh(ph(e)?Jc(t,i.transform,n,i):i.transform(n))}function ch(e,t,n,i){var r=Ls(e);return fh(ph(e)?$c(t,r.transform,n,i,r):r.transform(n,i))}function hh(e,t,n,i,r){var o=Ls(e);return fh(ph(e)?eh(t,o.transform,n,i,r,o):o.transform(n,i,r))}function dh(e,t,n,i,r,o){var s=Ls(e);return fh(ph(e)?th(t,s.transform,n,i,r,o,s):s.transform(n,i,r,o))}function uh(e,t,n){var i=Ls(e);return fh(ph(e)?sh(t,i.transform,n,i):i.transform.apply(i,n))}function ph(e){return Kt()[be].data[e+Ne].pure}function fh(e){return ci.isWrapped(e)&&(e=ci.unwrap(e),Kt()[fn()]=fi),e}var gh=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this)||this;return n.__isAsync=t,n}return Object(i.c)(t,e),t.prototype.emit=function(t){e.prototype.next.call(this,t)},t.prototype.subscribe=function(t,n,i){var o,s=function(e){return null},a=function(){return null};t&&"object"==typeof t?(o=this.__isAsync?function(e){setTimeout(function(){return t.next(e)})}:function(e){t.next(e)},t.error&&(s=this.__isAsync?function(e){setTimeout(function(){return t.error(e)})}:function(e){t.error(e)}),t.complete&&(a=this.__isAsync?function(){setTimeout(function(){return t.complete()})}:function(){t.complete()})):(o=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)},n&&(s=this.__isAsync?function(e){setTimeout(function(){return n(e)})}:function(e){n(e)}),i&&(a=this.__isAsync?function(){setTimeout(function(){return i()})}:function(){i()}));var l=e.prototype.subscribe.call(this,o,s,a);return t instanceof r.a&&t.add(l),l},t}(o.a),mh=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return vh(e,fl)},e}(),yh=function(e,t){return ul(e,t,$t(),Kt())},vh=la,bh=function(){function e(e,t,n){this.parent=e,this.shallow=t,this.deep=n}return e.prototype.track=function(e,t,n,i){n?this.deep=Th(this.deep,e,t,null!=i?i:null):this.shallow=Th(this.shallow,e,t,null!=i?i:null)},e.prototype.clone=function(){return new e(this,null,this.deep)},e.prototype.container=function(){var t=wh(this.shallow),n=wh(this.deep);return t||n?new e(this,t,n):null},e.prototype.createView=function(){var t=Ch(this.shallow),n=Ch(this.deep);return t||n?new e(this,t,n):null},e.prototype.insertView=function(e){xh(e,this.shallow),xh(e,this.deep)},e.prototype.addNode=function(e){return Dh(this.deep,e),it(e)?(Dh(this.shallow,e),e.parent&&it(e.parent)&&Dh(this.parent.shallow,e),this.parent):(function(e){return null===e.parent||it(e.parent)}(e)&&Dh(this.shallow,e),this)},e.prototype.removeView=function(){Ah(this.shallow),Ah(this.deep)},e}();function wh(e){for(var t=null;e;){var n=[];e.values.push(n),t={next:t,list:e.list,predicate:e.predicate,values:n,containerValues:null},e=e.next}return t}function Ch(e){for(var t=null;e;)t={next:t,list:e.list,predicate:e.predicate,values:[],containerValues:e.values},e=e.next;return t}function xh(e,t){for(;t;)t.containerValues.splice(e,0,t.values),t=t.next}function Ah(e){for(;e;){var t=e.containerValues,n=t.indexOf(e.values);t.splice(n,1)[0].length&&e.list.setDirty(),e=e.next}}function Sh(e,t){var n=e.localNames;if(n)for(var i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function Oh(e,t,n){var i=e[v];if("function"==typeof i)return i();var r=Mn(t,n,e,!1,!1);return null!==r?jn(n[be].data,n,r,t):null}function Eh(e,t,n,i){var r=e[v]();return i?r?Oh(i,t,n):null:r}function Ih(e,t,n,i){return n?Oh(n,e,t):i>-1?jn(t[be].data,t,i,e):function(e,t){return 3===e.type||4===e.type?dl(fl,e,t):0===e.type?ul(mh,fl,e,t):null}(e,t)}function Dh(e,t){for(var n=Kt();e;){var i=e.predicate,r=i.type;if(r){var o=null;r===mh?o=Eh(r,t,n,i.read):null!==(l=Mn(t,n,r,!1,!1))&&(o=Ih(t,n,i.read,l)),null!==o&&kh(e,o)}else for(var s=i.selector,a=0;a<s.length;a++){var l;null!==(l=Sh(t,s[a]))&&null!==(o=Ih(t,n,i.read,l))&&kh(e,o)}e=e.next}}function kh(e,t){e.values.push(t),e.list.setDirty()}function Ph(e,t){var n=Array.isArray(e);return{type:n?null:e,selector:n?e:null,read:t}}function Th(e,t,n,i){return{next:e,list:t,predicate:Ph(n,i),values:t._valuesTree,containerValues:null}}var Mh=function(){function e(){this.dirty=!0,this.changes=new gh,this._values=[],this._valuesTree=[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){var e=this._values;return e.length?e[0]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){var e=this._values;return e.length?e[e.length-1]:null},enumerable:!0,configurable:!0}),e.prototype.map=function(e){return this._values.map(e)},e.prototype.filter=function(e){return this._values.filter(e)},e.prototype.find=function(e){return this._values.find(e)},e.prototype.reduce=function(e,t){return this._values.reduce(e,t)},e.prototype.forEach=function(e){this._values.forEach(e)},e.prototype.some=function(e){return this._values.some(e)},e.prototype.toArray=function(){return this._values.slice(0)},e.prototype[q()]=function(){return this._values[q()]()},e.prototype.toString=function(){return this._values.toString()},e.prototype.reset=function(e){this._values=function(e){for(var t=[],n=0;n<e.length;){var i=e[n];Array.isArray(i)?i.length>0?(e=i.concat(e.slice(n+1)),n=0):n++:(t.push(i),n++)}return t}(e),this.dirty=!1},e.prototype.notifyOnChanges=function(){this.changes.emit(this)},e.prototype.setDirty=function(){this.dirty=!0},e.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},e}();function jh(e,t,n,i){var r,o,s,a=new Mh;return(r=bh,o=Kt(),s=o[Ae],Wt&&Wt!==o[Oe]&&!it(Wt)&&(s&&(s=o[Ae]=s.clone()),Wt.flags|=4),s||(o[Ae]=new r(null,null,null))).track(a,t,n,i),function(e,t,n){var i=Vs(e);i.push(t),e[be].firstTemplatePass&&Us(e).push(n,i.length-1)}(Kt(),a,a.destroy),null!=e&&Ms(e,a),a}function Rh(e){return!!e.dirty&&(e.reset(e._valuesTree),e.notifyOnChanges(),!0)}function Lh(e,t){return ul(mh,fl,e,t)}var _h="__SANITIZER_TRUSTED_BRAND__";function Nh(e,t){return e instanceof String&&e[_h]===t}function Bh(e){return Uh(e,"Html")}function Fh(e){return Uh(e,"Style")}function zh(e){return Uh(e,"Script")}function Hh(e){return Uh(e,"Url")}function Vh(e){return Uh(e,"ResourceUrl")}function Uh(e,t){var n=new String(e);return n[_h]=t,n}var Wh=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Gh=/^url\(([^)]+)\)$/;function qh(e){if(!(e=String(e).trim()))return"";var t=e.match(Gh);return t&&Wl(t[1])===t[1]||e.match(Wh)&&function(e){for(var t=!0,n=!0,i=0;i<e.length;i++){var r=e.charAt(i);"'"===r&&n?t=!t:'"'===r&&t&&(n=!n)}return t&&n}(e)?e:(Fl()&&console.warn("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}function Qh(e){var t=$h();return t?t.sanitize(El.HTML,e)||"":Nh(e,"Html")?e.toString():lc(document,Ze(e))}function Yh(e){var t=$h();return t?t.sanitize(El.STYLE,e)||"":Nh(e,"Style")?e.toString():qh(Ze(e))}function Xh(e){var t=$h();return t?t.sanitize(El.URL,e)||"":Nh(e,"Url")?e.toString():Wl(Ze(e))}function Zh(e){var t=$h();if(t)return t.sanitize(El.RESOURCE_URL,e)||"";if(Nh(e,"ResourceUrl"))return e.toString();throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)")}function Kh(e){var t=$h();if(t)return t.sanitize(El.SCRIPT,e)||"";if(Nh(e,"Script"))return e.toString();throw new Error("unsafe value used in a script context")}var Jh=function(e,t){return void 0===t?"background-image"===e||"background"===e||"border-image"===e||"filter"===e||"list-style"===e||"list-style-image"===e:Yh(t)};function $h(){var e=Kt();return e&&e[Me]}var ed={"\u0275defineBase":ue,"\u0275defineComponent":ae,"\u0275defineDirective":pe,defineInjectable:b,defineInjector:w,"\u0275defineNgModule":he,"\u0275definePipe":fe,"\u0275directiveInject":_s,"\u0275getFactoryOf":Nn,"\u0275getInheritedFactory":Bn,inject:Mt,"\u0275injectAttribute":Ns,"\u0275templateRefExtractor":Lh,"\u0275NgOnChangesFeature":sa,"\u0275ProvidersFeature":Xa,"\u0275InheritDefinitionFeature":ia,"\u0275elementAttribute":To,"\u0275bind":Cs,"\u0275container":is,"\u0275nextContext":uo,"\u0275containerRefreshStart":os,"\u0275containerRefreshEnd":ss,"\u0275loadQueryList":Rs,"\u0275namespaceHTML":vo,"\u0275namespaceMathML":yo,"\u0275namespaceSVG":mo,"\u0275enableBindings":Xt,"\u0275disableBindings":Zt,"\u0275allocHostVars":xs,"\u0275elementStart":xo,"\u0275elementEnd":Po,"\u0275element":bo,"\u0275elementContainerStart":wo,"\u0275elementContainerEnd":Co,"\u0275pureFunction0":Kc,"\u0275pureFunction1":Jc,"\u0275pureFunction2":$c,"\u0275pureFunction3":eh,"\u0275pureFunction4":th,"\u0275pureFunction5":nh,"\u0275pureFunction6":ih,"\u0275pureFunction7":rh,"\u0275pureFunction8":oh,"\u0275pureFunctionV":sh,"\u0275getCurrentView":Hs,"\u0275restoreView":Jt,"\u0275interpolation1":Ss,"\u0275interpolation2":Os,"\u0275interpolation3":Es,"\u0275interpolation4":Is,"\u0275interpolation5":Ds,"\u0275interpolation6":ks,"\u0275interpolation7":Ps,"\u0275interpolation8":Ts,"\u0275interpolationV":As,"\u0275elementClassProp":Uo,"\u0275listener":ko,"\u0275load":Ls,"\u0275projection":ds,"\u0275elementProperty":Mo,"\u0275componentHostSyntheticProperty":jo,"\u0275pipeBind1":lh,"\u0275pipeBind2":ch,"\u0275pipeBind3":hh,"\u0275pipeBind4":dh,"\u0275pipeBindV":uh,"\u0275projectionDef":cs,"\u0275pipe":ah,"\u0275query":jh,"\u0275queryRefresh":Rh,"\u0275registerContentQuery":Bs,"\u0275reference":js,"\u0275elementStyling":Fo,"\u0275elementHostAttrs":zo,"\u0275elementStylingMap":Wo,"\u0275elementStyleProp":Vo,"\u0275elementStylingApply":Ho,"\u0275template":ns,"\u0275text":Go,"\u0275textBinding":qo,"\u0275embeddedViewStart":as,"\u0275embeddedViewEnd":ls,"\u0275i18n":_c,"\u0275i18nAttributes":Nc,"\u0275i18nExp":zc,"\u0275i18nStart":Pc,"\u0275i18nEnd":jc,"\u0275i18nApply":Hc,"\u0275i18nPostprocess":Mc,"\u0275sanitizeHtml":Qh,"\u0275sanitizeStyle":Yh,"\u0275defaultStyleSanitizer":Jh,"\u0275sanitizeResourceUrl":Zh,"\u0275sanitizeScript":Kh,"\u0275sanitizeUrl":Xh},td=function(){return function(){}}(),nd=new Map;function id(e,t){var n=nd.get(e);rd(e,n&&n.moduleType),nd.set(e,t)}function rd(e,t){if(t)throw new Error("Duplicate module registered for "+e+" - "+X(t)+" vs "+X(t.name))}function od(e){var t=nd.get(e);if(!t)throw ld(e);return t}function sd(e){var t=nd.get(e);if(!t)throw ld(e);return new Xc(t)}var ad=od;function ld(e){return new Error("No module with ID "+e+" loaded")}var cd=Function;function hd(e){return"function"==typeof e}var dd=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/,ud=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,pd=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,fd=function(){function e(e){this._reflect=e||U.Reflect}return e.prototype.isReflectionEnabled=function(){return!0},e.prototype.factory=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new(e.bind.apply(e,Object(i.g)([void 0],t)))}},e.prototype._zipTypesAndAnnotations=function(e,t){var n;n=void 0===e?new Array(t.length):new Array(e.length);for(var i=0;i<n.length;i++)n[i]=void 0===e?[]:e[i]!=Object?[e[i]]:[],t&&null!=t[i]&&(n[i]=n[i].concat(t[i]));return n},e.prototype._ownParameters=function(e,t){var n=e.toString();if(dd.exec(n)||ud.exec(n)&&!pd.exec(n))return null;if(e.parameters&&e.parameters!==t.parameters)return e.parameters;var i=e.ctorParameters;if(i&&i!==t.ctorParameters){var r="function"==typeof i?i():i,o=r.map(function(e){return e&&e.type}),s=r.map(function(e){return e&&gd(e.decorators)});return this._zipTypesAndAnnotations(o,s)}var a=e.hasOwnProperty(O)&&e[O],l=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",e);return l||a?this._zipTypesAndAnnotations(l,a):new Array(e.length).fill(void 0)},e.prototype.parameters=function(e){if(!hd(e))return[];var t=md(e),n=this._ownParameters(e,t);return n||t===Object||(n=this.parameters(t)),n||[]},e.prototype._ownAnnotations=function(e,t){if(e.annotations&&e.annotations!==t.annotations){var n=e.annotations;return"function"==typeof n&&n.annotations&&(n=n.annotations),n}return e.decorators&&e.decorators!==t.decorators?gd(e.decorators):e.hasOwnProperty(S)?e[S]:null},e.prototype.annotations=function(e){if(!hd(e))return[];var t=md(e),n=this._ownAnnotations(e,t)||[];return(t!==Object?this.annotations(t):[]).concat(n)},e.prototype._ownPropMetadata=function(e,t){if(e.propMetadata&&e.propMetadata!==t.propMetadata){var n=e.propMetadata;return"function"==typeof n&&n.propMetadata&&(n=n.propMetadata),n}if(e.propDecorators&&e.propDecorators!==t.propDecorators){var i=e.propDecorators,r={};return Object.keys(i).forEach(function(e){r[e]=gd(i[e])}),r}return e.hasOwnProperty(E)?e[E]:null},e.prototype.propMetadata=function(e){if(!hd(e))return{};var t=md(e),n={};if(t!==Object){var r=this.propMetadata(t);Object.keys(r).forEach(function(e){n[e]=r[e]})}var o=this._ownPropMetadata(e,t);return o&&Object.keys(o).forEach(function(e){var t=[];n.hasOwnProperty(e)&&t.push.apply(t,Object(i.g)(n[e])),t.push.apply(t,Object(i.g)(o[e])),n[e]=t}),n},e.prototype.hasLifecycleHook=function(e,t){return e instanceof cd&&t in e.prototype},e.prototype.guards=function(e){return{}},e.prototype.getter=function(e){return new Function("o","return o."+e+";")},e.prototype.setter=function(e){return new Function("o","v","return o."+e+" = v;")},e.prototype.method=function(e){return new Function("o","args","if (!o."+e+") throw new Error('\""+e+"\" is undefined');\n        return o."+e+".apply(o, args);")},e.prototype.importUri=function(e){return"object"==typeof e&&e.filePath?e.filePath:"./"+X(e)},e.prototype.resourceUri=function(e){return"./"+X(e)},e.prototype.resolveIdentifier=function(e,t,n,i){return i},e.prototype.resolveEnum=function(e,t){return e[t]},e}();function gd(e){return e?e.map(function(e){var t=e.type.annotationCls,n=e.args?e.args:[];return new(t.bind.apply(t,Object(i.g)([void 0],n)))}):[]}function md(e){var t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}var yd=null;function vd(){return yd=yd||new fd}function bd(e){return wd(vd().parameters(e))}function wd(e){var t=bt();return e.map(function(e){return function(e,t){var n={token:null,host:!1,optional:!1,resolved:e.R3ResolvedDependencyType.Token,self:!1,skipSelf:!1};function i(t){n.resolved=e.R3ResolvedDependencyType.Token,n.token=t}if(Array.isArray(t)){if(0===t.length)throw new Error("Dependency array must have arguments.");for(var r=0;r<t.length;r++){var o=t[r];if(void 0!==o)if(o instanceof At||"Optional"===o.__proto__.ngMetadataName)n.optional=!0;else if(o instanceof Ot||"SkipSelf"===o.__proto__.ngMetadataName)n.skipSelf=!0;else if(o instanceof St||"Self"===o.__proto__.ngMetadataName)n.self=!0;else if(o instanceof Et||"Host"===o.__proto__.ngMetadataName)n.host=!0;else if(o instanceof xt)n.token=o.token;else if(o instanceof M){if(void 0===o.attributeName)throw new Error("Attribute name must be defined.");n.token=o.attributeName,n.resolved=e.R3ResolvedDependencyType.Attribute}else i(o)}}else i(t);return n}(t,e)})}var Cd=[],xd=[],Ad=!1;function Sd(e){return Array.isArray(e)?e.every(Sd):!!J(e)}function Od(e,t){void 0===t&&(t={}),Ed(e,t),function(e,t){xd.push({moduleType:e,ngModule:t})}(e,t)}function Ed(e,t){var n,i,r=Td(t.declarations||Cd),o=null;Object.defineProperty(e,m,{configurable:!0,get:function(){return null===o&&(o=bt().compileNgModule(ed,"ng://"+e.name+"/ngModuleDef.js",{type:e,bootstrap:Td(t.bootstrap||Cd,J),declarations:r.map(J),imports:Td(t.imports||Cd,J).map(Md),exports:Td(t.exports||Cd,J).map(Md),emitInline:!0})),o}}),t.id&&(i=e,rd(n=t.id,nd.get(n)),nd.set(n,i));var s=null;Object.defineProperty(e,f,{get:function(){if(null===s){var n={name:e.name,type:e,deps:bd(e),providers:t.providers||Cd,imports:[(t.imports||Cd).map(J),(t.exports||Cd).map(J)]};s=bt().compileInjector(ed,"ng://"+e.name+"/ngInjectorDef.js",n)}return s},configurable:!1})}function Id(){new Map,new Map,xd.length=0}function Dd(e,t){var n=Td(t.declarations||Cd),i=Pd(e);n.forEach(function(t){t.hasOwnProperty(d)?kd(ge(t),i):t.hasOwnProperty(u)||t.hasOwnProperty(g)||(t.ngSelectorScope=e)})}function kd(e,t){e.directiveDefs=function(){return Array.from(t.compilation.directives).map(function(e){return me(e)||ge(e)}).filter(function(e){return!!e})},e.pipeDefs=function(){return Array.from(t.compilation.pipes).map(function(e){return ye(e)})}}function Pd(e){if(!jd(e))throw new Error(e.name+" does not have an ngModuleDef");var t=ve(e);if(null!==t.transitiveCompileScopes)return t.transitiveCompileScopes;var n={compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set}};return t.declarations.forEach(function(e){ye(e)?n.compilation.pipes.add(e):n.compilation.directives.add(e)}),t.imports.forEach(function(e){var t=e;if(!jd(t))throw new Error("Importing "+t.name+" which does not have an ngModuleDef");var i=Pd(t);i.exported.directives.forEach(function(e){return n.compilation.directives.add(e)}),i.exported.pipes.forEach(function(e){return n.compilation.pipes.add(e)})}),t.exports.forEach(function(e){var t=e;if(jd(t)){var i=Pd(t);i.exported.directives.forEach(function(e){n.compilation.directives.add(e),n.exported.directives.add(e)}),i.exported.pipes.forEach(function(e){n.compilation.pipes.add(e),n.exported.pipes.add(e)})}else ye(t)?n.exported.pipes.add(t):n.exported.directives.add(t)}),t.transitiveCompileScopes=n,n}function Td(e,t){var n=[];return e.forEach(function(e){Array.isArray(e)?n.push.apply(n,Object(i.g)(Td(e,t))):n.push(t?t(e):e)}),n}function Md(e){return function(e){return void 0!==e.ngModule}(e)?e.ngModule:e}function jd(e){return!!ve(e)}function Rd(e,t){var n=null;!function(e){te(e)&&ee.add(e)}(t),Object.defineProperty(e,d,{get:function(){var r=bt();if(null===n){if(te(t)){var o=["Component '"+Ze(e)+"' is not resolved:"];throw t.templateUrl&&o.push(" - templateUrl: "+Ze(t.templateUrl)),t.styleUrls&&t.styleUrls.length&&o.push(" - styleUrls: "+JSON.stringify(t.styleUrls)),o.push("Did you run and wait for 'resolveComponentResources()'?"),new Error(o.join("\n"))}var s=Object(i.a)({},Nd(e,t),{template:t.template||"",preserveWhitespaces:t.preserveWhitespaces||!1,styles:t.styles||oe,animations:t.animations,viewQueries:Bd(e,vd().propMetadata(e),zd),directives:[],changeDetection:t.changeDetection,pipes:new Map,encapsulation:t.encapsulation||ie.Emulated,interpolation:t.interpolation,viewProviders:t.viewProviders||null});if(n=r.compileComponent(ed,"ng://"+Ze(e)+"/template.html",s),function(){if(!Ad){Ad=!0;try{for(var e=xd.length-1;e>=0;e--){var t=xd[e],n=t.moduleType,i=t.ngModule;i.declarations&&i.declarations.every(Sd)&&(xd.splice(e,1),Dd(n,i))}}finally{Ad=!1}}}(),void 0!==e.ngSelectorScope){var a=Pd(e.ngSelectorScope);kd(n,a)}}return n},configurable:!1})}function Ld(e,t){var n=null;Object.defineProperty(e,u,{get:function(){if(null===n){var i=Nd(e,t);n=bt().compileDirective(ed,"ng://"+(e&&e.name)+"/ngDirectiveDef.js",i)}return n},configurable:!1})}function _d(e){return Object.getPrototypeOf(e.prototype)===Object.prototype}function Nd(e,t){var n=vd().propMetadata(e);return{name:e.name,type:e,typeArgumentCount:0,selector:t.selector,deps:bd(e),host:t.host||re,propMetadata:n,inputs:t.inputs||oe,outputs:t.outputs||oe,queries:Bd(e,n,Fd),lifecycle:{usesOnChanges:void 0!==e.prototype.ngOnChanges},typeSourceSpan:null,usesInheritance:!_d(e),exportAs:t.exportAs||null,providers:t.providers||null}}function Bd(e,t,n){var i=[],r=function(r){t.hasOwnProperty(r)&&t[r].forEach(function(t){if(n(t)){if(!t.selector)throw new Error("Can't construct a query for the property \""+r+'" of "'+Ze(e)+"\" since the query selector wasn't defined.");i.push(function(e,t){return{propertyName:r,predicate:(n=t.selector,"string"==typeof n?n.split(",").map(function(e){return e.trim()}):J(n)),descendants:t.descendants,first:t.first,read:t.read?t.read:null};var n}(0,t))}})};for(var o in t)r(o);return i}function Fd(e){var t=e.ngMetadataName;return"ContentChild"===t||"ContentChildren"===t}function zd(e){var t=e.ngMetadataName;return"ViewChild"===t||"ViewChildren"===t}function Hd(e,t){var n=null;Object.defineProperty(e,g,{get:function(){return null===n&&(n=bt().compilePipe(ed,"ng://"+Ze(e)+"/ngPipeDef.js",{type:e,name:e.name,deps:bd(e),pipeName:t.name,pure:void 0===t.pure||t.pure})),n},configurable:!1})}var Vd=I("Directive",function(e){return void 0===e&&(e={}),e},void 0,void 0,function(e,t){return eu(e,t)}),Ud=I("Component",function(e){return void 0===e&&(e={}),Object(i.a)({changeDetection:B.Default},e)},Vd,void 0,function(e,t){return $d(e,t)}),Wd=I("Pipe",function(e){return Object(i.a)({pure:!0},e)},void 0,void 0,function(e,t){return tu(e,t)}),Gd=function(e){return function(t,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var o=t.constructor;o.hasOwnProperty(y)||function(e){var t=e.constructor,n=t.ngBaseDef,i=t.ngBaseDef={inputs:{},outputs:{},declaredInputs:{}};n&&(h(i.inputs,n.inputs),h(i.outputs,n.outputs),h(i.declaredInputs,n.declaredInputs))}(t),e(o.ngBaseDef)[n]=i[0]}},qd=P("Input",function(e){return{bindingPropertyName:e}},void 0,Gd(function(e){return e.inputs||{}})),Qd=P("Output",function(e){return{bindingPropertyName:e}},void 0,Gd(function(e){return e.outputs||{}})),Yd=P("HostBinding",function(e){return{hostPropertyName:e}}),Xd=P("HostListener",function(e,t){return{eventName:e,args:t}}),Zd=Rd,Kd=Ld,Jd=Hd,$d=la,eu=la,tu=la,nu=c({provide:String,useValue:c}),iu=[];function ru(e,t){if(!t){var n=(c=new fd).parameters(e);return function(){return new(e.bind.apply(e,Object(i.g)([void 0],Rt(n))))}}if(nu in t){var r=t;return function(){return r.useValue}}if(t.useExisting){var o=t;return function(){return Mt(o.useExisting)}}if(t.useFactory){var s=t;return function(){return s.useFactory.apply(s,Object(i.g)(Rt(s.deps||iu)))}}if(t.useClass){var a=t,l=t.deps;if(!l){var c=new fd;l=c.parameters(e)}return function(){var e;return new((e=a.useClass).bind.apply(e,Object(i.g)([void 0],Rt(l))))}}var h=t.deps;return h||(c=new fd,h=c.parameters(e)),function(){return new(e.bind.apply(e,Object(i.g)([void 0],Rt(h))))}}var ou={name:"custom-elements"},su={name:"no-errors-schema"},au=I("NgModule",function(e){return e},void 0,void 0,function(e,t){return cu(e,t)}),lu=Od,cu=function(e,t){var n=t&&t.imports||[];t&&t.exports&&(n=Object(i.g)(n,[t.exports])),e.ngInjectorDef=w({factory:ru(e,{useClass:e}),providers:t&&t.providers,imports:n})},hu=c({provide:String,useValue:c});function du(e){return void 0!==e.useClass}function uu(e){return hu in e}function pu(e){return void 0!==e.useFactory}function fu(e){return void 0!==e.useExisting}var gu=I("Injectable",void 0,void 0,void 0,function(e,t){return yu(e,t)}),mu=function(e,t){var n=null;e.hasOwnProperty(p)||Object.defineProperty(e,p,{get:function(){if(null===n){var i=t||{providedIn:null},r=du(i)||pu(i)||uu(i)||fu(i),o={name:e.name,type:e,typeArgumentCount:0,providedIn:i.providedIn,ctorDeps:bd(e),userDeps:void 0};if((du(i)||pu(i))&&void 0!==i.deps&&(o.userDeps=wd(i.deps)),r)if(du(i))o.useClass=i.useClass;else if(uu(i))o.useValue=i.useValue;else if(pu(i))o.useFactory=i.useFactory;else{if(!fu(i))throw new Error("Unreachable state.");o.useExisting=i.useExisting}else o.useClass=e;n=bt().compileInjectable(ed,"ng://"+e.name+"/ngInjectableDef.js",o)}return n}})},yu=function(e,t){t&&void 0!==t.providedIn&&!C(e)&&(e.ngInjectableDef=b({providedIn:t.providedIn,factory:ru(e,t)}))},vu="ngDebugContext",bu="ngOriginalError",wu="ngErrorLogger";function Cu(e){return e[vu]}function xu(e){return e[bu]}function Au(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e.error.apply(e,Object(i.g)(t))}var Su=function(){function e(){this._console=console}return e.prototype.handleError=function(e){var t=this._findOriginalError(e),n=this._findContext(e),i=function(e){return e[wu]||Au}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t),n&&i(this._console,"ERROR CONTEXT",n)},e.prototype._findContext=function(e){return e?Cu(e)?Cu(e):this._findContext(xu(e)):null},e.prototype._findOriginalError=function(e){for(var t=xu(e);t&&xu(t);)t=xu(t);return t},e}();function Ou(e){return e.length>1?" ("+function(e){for(var t=[],n=0;n<e.length;++n){if(t.indexOf(e[n])>-1)return t.push(e[n]),t;t.push(e[n])}return t}(e.slice().reverse()).map(function(e){return X(e.token)}).join(" -> ")+")":""}function Eu(e,t,n,i){var r=[t],o=n(r),s=i?function(e,t){var n=o+" caused by: "+(t instanceof Error?t.message:t),i=Error(n);return i[bu]=t,i}(0,i):Error(o);return s.addKey=Iu,s.keys=r,s.injectors=[e],s.constructResolvingMessage=n,s[bu]=i,s}function Iu(e,t){this.injectors.push(e),this.keys.push(t),this.message=this.constructResolvingMessage(this.keys)}function Du(e,t){for(var n=[],i=0,r=t.length;i<r;i++){var o=t[i];n.push(o&&0!=o.length?o.map(X).join(" "):"?")}return Error("Cannot resolve all parameters for '"+X(e)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+X(e)+"' is decorated with Injectable.")}var ku=function(){function e(e,t){if(this.token=e,this.id=t,!e)throw new Error("Token must be defined!");this.displayName=X(this.token)}return e.get=function(e){return Pu.get(J(e))},Object.defineProperty(e,"numberOfKeys",{get:function(){return Pu.numberOfKeys},enumerable:!0,configurable:!0}),e}(),Pu=new(function(){function e(){this._allKeys=new Map}return e.prototype.get=function(e){if(e instanceof ku)return e;if(this._allKeys.has(e))return this._allKeys.get(e);var t=new ku(e,ku.numberOfKeys);return this._allKeys.set(e,t),t},Object.defineProperty(e.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),e}()),Tu=new(function(){function e(e){this.reflectionCapabilities=e}return e.prototype.updateCapabilities=function(e){this.reflectionCapabilities=e},e.prototype.factory=function(e){return this.reflectionCapabilities.factory(e)},e.prototype.parameters=function(e){return this.reflectionCapabilities.parameters(e)},e.prototype.annotations=function(e){return this.reflectionCapabilities.annotations(e)},e.prototype.propMetadata=function(e){return this.reflectionCapabilities.propMetadata(e)},e.prototype.hasLifecycleHook=function(e,t){return this.reflectionCapabilities.hasLifecycleHook(e,t)},e.prototype.getter=function(e){return this.reflectionCapabilities.getter(e)},e.prototype.setter=function(e){return this.reflectionCapabilities.setter(e)},e.prototype.method=function(e){return this.reflectionCapabilities.method(e)},e.prototype.importUri=function(e){return this.reflectionCapabilities.importUri(e)},e.prototype.resourceUri=function(e){return this.reflectionCapabilities.resourceUri(e)},e.prototype.resolveIdentifier=function(e,t,n,i){return this.reflectionCapabilities.resolveIdentifier(e,t,n,i)},e.prototype.resolveEnum=function(e,t){return this.reflectionCapabilities.resolveEnum(e,t)},e}())(new fd),Mu=function(){function e(e,t,n){this.key=e,this.optional=t,this.visibility=n}return e.fromKey=function(t){return new e(t,!1,null)},e}(),ju=[],Ru=function(){return function(e,t,n){this.key=e,this.resolvedFactories=t,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]}}(),Lu=function(){return function(e,t){this.factory=e,this.dependencies=t}}();function _u(e){var t,n;if(e.useClass){var i=J(e.useClass);t=Tu.factory(i),n=Fu(i)}else e.useExisting?(t=function(e){return e},n=[Mu.fromKey(ku.get(e.useExisting))]):e.useFactory?(t=e.useFactory,n=function(e,t){if(t){var n=t.map(function(e){return[e]});return t.map(function(t){return zu(e,t,n)})}return Fu(e)}(e.useFactory,e.deps)):(t=function(){return e.useValue},n=ju);return new Lu(t,n)}function Nu(e){return new Ru(ku.get(e.provide),[_u(e)],e.multi||!1)}function Bu(e){var t=function(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=t.get(i.key.id);if(r){if(i.multiProvider!==r.multiProvider)throw Error("Cannot mix multi providers and regular providers, got: "+r+" "+i);if(i.multiProvider)for(var o=0;o<i.resolvedFactories.length;o++)r.resolvedFactories.push(i.resolvedFactories[o]);else t.set(i.key.id,i)}else{var s;s=i.multiProvider?new Ru(i.key,i.resolvedFactories.slice(),i.multiProvider):i,t.set(i.key.id,s)}}return t}(function e(t,n){return t.forEach(function(t){if(t instanceof cd)n.push({provide:t,useClass:t});else if(t&&"object"==typeof t&&void 0!==t.provide)n.push(t);else{if(!(t instanceof Array))throw Error("Invalid provider - only instances of Provider and Type are allowed, got: "+t);e(t,n)}}),n}(e,[]).map(Nu),new Map);return Array.from(t.values())}function Fu(e){var t=Tu.parameters(e);if(!t)return[];if(t.some(function(e){return null==e}))throw Du(e,t);return t.map(function(n){return zu(e,n,t)})}function zu(e,t,n){var i=null,r=!1;if(!Array.isArray(t))return Hu(t instanceof xt?t.token:t,r,null);for(var o=null,s=0;s<t.length;++s){var a=t[s];a instanceof cd?i=a:a instanceof xt?i=a.token:a instanceof At?r=!0:a instanceof St||a instanceof Ot?o=a:a instanceof A&&(i=a)}if(null!=(i=J(i)))return Hu(i,r,o);throw Du(e,n)}function Hu(e,t,n){return new Mu(ku.get(e),t,n)}var Vu=new Object,Uu=function(){function e(){}return e.resolve=function(e){return Bu(e)},e.resolveAndCreate=function(t,n){var i=e.resolve(t);return e.fromResolvedProviders(i,n)},e.fromResolvedProviders=function(e,t){return new Wu(e,t)},e}(),Wu=function(){function e(e,t){this._constructionCounter=0,this._providers=e,this.parent=t||null;var n=e.length;this.keyIds=new Array(n),this.objs=new Array(n);for(var i=0;i<n;i++)this.keyIds[i]=e[i].key.id,this.objs[i]=Vu}return e.prototype.get=function(e,t){return void 0===t&&(t=da),this._getByKey(ku.get(e),null,t)},e.prototype.resolveAndCreateChild=function(e){var t=Uu.resolve(e);return this.createChildFromResolved(t)},e.prototype.createChildFromResolved=function(t){var n=new e(t);return n.parent=this,n},e.prototype.resolveAndInstantiate=function(e){return this.instantiateResolved(Uu.resolve([e])[0])},e.prototype.instantiateResolved=function(e){return this._instantiateProvider(e)},e.prototype.getProviderAtIndex=function(e){if(e<0||e>=this._providers.length)throw function(e){return Error("Index "+e+" is out-of-bounds.")}(e);return this._providers[e]},e.prototype._new=function(e){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw Eu(this,e.key,function(e){return"Cannot instantiate cyclic dependency!"+Ou(e)});return this._instantiateProvider(e)},e.prototype._getMaxNumberOfObjects=function(){return this.objs.length},e.prototype._instantiateProvider=function(e){if(e.multiProvider){for(var t=new Array(e.resolvedFactories.length),n=0;n<e.resolvedFactories.length;++n)t[n]=this._instantiate(e,e.resolvedFactories[n]);return t}return this._instantiate(e,e.resolvedFactories[0])},e.prototype._instantiate=function(e,t){var n,r,o,s=this,a=t.factory;try{n=t.dependencies.map(function(e){return s._getByReflectiveDependency(e)})}catch(l){throw l.addKey&&l.addKey(this,e.key),l}try{r=a.apply(void 0,Object(i.g)(n))}catch(l){throw Eu(this,e.key,function(e){var t=X(e[0].token);return o.message+": Error during instantiation of "+t+"!"+Ou(e)+"."},o=l)}return r},e.prototype._getByReflectiveDependency=function(e){return this._getByKey(e.key,e.visibility,e.optional?null:da)},e.prototype._getByKey=function(t,n,i){return t===e.INJECTOR_KEY?this:n instanceof St?this._getByKeySelf(t,i):this._getByKeyDefault(t,i,n)},e.prototype._getObjByKeyId=function(e){for(var t=0;t<this.keyIds.length;t++)if(this.keyIds[t]===e)return this.objs[t]===Vu&&(this.objs[t]=this._new(this._providers[t])),this.objs[t];return Vu},e.prototype._throwOrNull=function(e,t){if(t!==da)return t;throw function(e,t){return Eu(e,t,function(e){return"No provider for "+X(e[0].token)+"!"+Ou(e)})}(this,e)},e.prototype._getByKeySelf=function(e,t){var n=this._getObjByKeyId(e.id);return n!==Vu?n:this._throwOrNull(e,t)},e.prototype._getByKeyDefault=function(t,n,i){var r;for(r=i instanceof Ot?this.parent:this;r instanceof e;){var o=r,s=o._getObjByKeyId(t.id);if(s!==Vu)return s;r=o.parent}return null!==r?r.get(t.token,n):this._throwOrNull(t,n)},Object.defineProperty(e.prototype,"displayName",{get:function(){return"ReflectiveInjector(providers: ["+function(e,t){for(var n=new Array(e._providers.length),i=0;i<e._providers.length;++i)n[i]=' "'+e.getProviderAtIndex(i).key.displayName+'" ';return n}(this).join(", ")+"])"},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.displayName},e.INJECTOR_KEY=ku.get(fa),e}();function Gu(e){return!!e&&"function"==typeof e.then}function qu(e){return!!e&&"function"==typeof e.subscribe}var Qu=new A("Application Initializer"),Yu=function(){function e(e){var t=this;this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return e.prototype.runInitializers=function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var i=0;i<this.appInits.length;i++){var r=this.appInits[i]();Gu(r)&&t.push(r)}Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}},e}(),Xu=new A("AppId");function Zu(){return""+Ju()+Ju()+Ju()}var Ku={provide:Xu,useFactory:Zu,deps:[]};function Ju(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var $u=new A("Platform Initializer"),ep=new A("Platform ID"),tp=new A("appBootstrapListener"),np=new A("Application Packages Root URL"),ip=function(){function e(){}return e.prototype.log=function(e){console.log(e)},e.prototype.warn=function(e){console.warn(e)},e}(),rp=function(){return function(e,t){this.ngModuleFactory=e,this.componentFactories=t}}();function op(){throw new Error("Runtime compiler is not loaded")}var sp,ap,lp=function(e){return new Xc(e)},cp=op,hp=function(e){return Promise.resolve(lp(e))},dp=op,up=function(e){return new rp(lp(e),[])},pp=op,fp=function(e){return Promise.resolve(up(e))},gp=op,mp=function(){function e(){this.compileModuleSync=cp,this.compileModuleAsync=dp,this.compileModuleAndAllComponentsSync=pp,this.compileModuleAndAllComponentsAsync=gp}return e.prototype.clearCache=function(){},e.prototype.clearCacheFor=function(e){},e.prototype.getModuleId=function(e){},e}(),yp=new A("compilerOptions"),vp=function(){return function(){}}();function bp(){var e=U.wtf;return!(!e||!(sp=e.trace)||(ap=sp.events,0))}function wp(e,t){return void 0===t&&(t=null),ap.createScope(e,t)}function Cp(e,t){return sp.leaveScope(e,t),t}function xp(e,t){return sp.beginTimeRange(e,t)}function Ap(e){sp.endTimeRange(e)}var Sp=bp();function Op(e,t){return null}var Ep=Sp?wp:function(e,t){return Op},Ip=Sp?Cp:function(e,t){return t},Dp=Sp?xp:function(e,t){return null},kp=Sp?Ap:function(e){return null},Pp=function(){function e(e){var t,n=e.enableLongStackTrace,i=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gh(!1),this.onMicrotaskEmpty=new gh(!1),this.onStable=new gh(!1),this.onError=new gh(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(t=this)._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,n,i,r,o,s){try{return Rp(t),e.invokeTask(i,r,o,s)}finally{Lp(t)}},onInvoke:function(e,n,i,r,o,s,a){try{return Rp(t),e.invoke(i,r,o,s,a)}finally{Lp(t)}},onHasTask:function(e,n,i,r){e.hasTask(i,r),n===i&&("microTask"==r.change?(t.hasPendingMicrotasks=r.microTask,jp(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:function(e,n,i,r){return e.handleError(i,r),t.runOutsideAngular(function(){return t.onError.emit(r)}),!1}})}return e.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},e.assertInAngularZone=function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},e.assertNotInAngularZone=function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},e.prototype.run=function(e,t,n){return this._inner.run(e,t,n)},e.prototype.runTask=function(e,t,n,i){var r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+i,e,Mp,Tp,Tp);try{return r.runTask(o,t,n)}finally{r.cancelTask(o)}},e.prototype.runGuarded=function(e,t,n){return this._inner.runGuarded(e,t,n)},e.prototype.runOutsideAngular=function(e){return this._outer.run(e)},e}();function Tp(){}var Mp={};function jp(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function Rp(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Lp(e){e._nesting--,jp(e)}var _p=function(){function e(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gh,this.onMicrotaskEmpty=new gh,this.onStable=new gh,this.onError=new gh}return e.prototype.run=function(e){return e()},e.prototype.runGuarded=function(e){return e()},e.prototype.runOutsideAngular=function(e){return e()},e.prototype.runTask=function(e){return e()},e}(),Np=function(){function e(e){var t=this;this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(function(){t.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return e.prototype._watchAngularEvents=function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){Pp.assertNotInAngularZone(),Q(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})},e.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},e.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},e.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},e.prototype._runCallbacksIfReady=function(){var e=this;if(this.isStable())Q(function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1});else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}},e.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}}):[]},e.prototype.addCallback=function(e,t,n){var i=this,r=-1;t&&t>0&&(r=setTimeout(function(){i._callbacks=i._callbacks.filter(function(e){return e.timeoutId!==r}),e(i._didWork,i.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})},e.prototype.whenStable=function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()},e.prototype.getPendingRequestCount=function(){return this._pendingCount},e.prototype.findProviders=function(e,t,n){return[]},e}(),Bp=function(){function e(){this._applications=new Map,Hp.addToWindow(this)}return e.prototype.registerApplication=function(e,t){this._applications.set(e,t)},e.prototype.unregisterApplication=function(e){this._applications.delete(e)},e.prototype.unregisterAllApplications=function(){this._applications.clear()},e.prototype.getTestability=function(e){return this._applications.get(e)||null},e.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},e.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},e.prototype.findTestabilityInTree=function(e,t){return void 0===t&&(t=!0),Hp.findTestabilityInTree(this,e,t)},Object(i.b)([Object(i.d)("design:paramtypes",[])],e)}();function Fp(e){Hp=e}var zp,Hp=new(function(){function e(){}return e.prototype.addToWindow=function(e){},e.prototype.findTestabilityInTree=function(e,t,n){return null},e}());function Vp(e,t,n){return Promise.resolve(new Xc(n))}var Up=new A("AllowMultipleToken"),Wp=function(){return function(e,t){this.name=e,this.token=t}}();function Gp(e){if(zp&&!zp.destroyed&&!zp.injector.get(Up,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");zp=e.get(Zp);var t=e.get($u,null);return t&&t.forEach(function(e){return e()}),zp}function qp(e,t,n){void 0===n&&(n=[]);var i="Platform: "+t,r=new A(i);return function(t){void 0===t&&(t=[]);var o=Xp();if(!o||o.injector.get(Up,!1))if(e)e(n.concat(t).concat({provide:r,useValue:!0}));else{var s=n.concat(t).concat({provide:r,useValue:!0});Gp(fa.create({providers:s,name:i}))}return Qp(r)}}function Qp(e){var t=Xp();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}function Yp(){zp&&!zp.destroyed&&zp.destroy()}function Xp(){return zp&&!zp.destroyed?zp:null}var Zp=function(){function e(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return e.prototype.bootstrapModuleFactory=function(e,t){var n,i=this,r="noop"===(n=t?t.ngZone:void 0)?new _p:("zone.js"===n?void 0:n)||new Pp({enableLongStackTrace:Fl()}),o=[{provide:Pp,useValue:r}];return r.run(function(){var t=fa.create({providers:o,parent:i.injector,name:e.moduleType.name}),n=e.create(t),s=n.injector.get(Su,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return $p(i._modules,n)}),r.runOutsideAngular(function(){return r.onError.subscribe({next:function(e){s.handleError(e)}})}),function(e,t,r){try{var o=((s=n.injector.get(Yu)).runInitializers(),s.donePromise.then(function(){return i._moduleDoBootstrap(n),n}));return Gu(o)?o.catch(function(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}):o}catch(a){throw t.runOutsideAngular(function(){return e.handleError(a)}),a}var s}(s,r)})},e.prototype.bootstrapModule=function(e,t){var n=this;void 0===t&&(t=[]);var i=Kp({},t);return function(e,t,n){return e.get(vp).createCompiler([t]).compileModuleAsync(n)}(this.injector,i,e).then(function(e){return n.bootstrapModuleFactory(e,i)})},e.prototype._moduleDoBootstrap=function(e){var t=e.injector.get(Jp);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module "+X(e.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');e.instance.ngDoBootstrap(t)}this._modules.push(e)},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},Object.defineProperty(e.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),e}();function Kp(e,t){return Array.isArray(t)?t.reduce(Kp,e):Object(i.a)({},e,t)}var Jp=function(){function e(e,t,n,i,r,o){var c=this;this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=r,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Fl(),this._zone.onMicrotaskEmpty.subscribe({next:function(){c._zone.run(function(){c.tick()})}});var h=new s.a(function(e){c._stable=c._zone.isStable&&!c._zone.hasPendingMacrotasks&&!c._zone.hasPendingMicrotasks,c._zone.runOutsideAngular(function(){e.next(c._stable),e.complete()})}),d=new s.a(function(e){var t;c._zone.runOutsideAngular(function(){t=c._zone.onStable.subscribe(function(){Pp.assertNotInAngularZone(),Q(function(){c._stable||c._zone.hasPendingMacrotasks||c._zone.hasPendingMicrotasks||(c._stable=!0,e.next(!0))})})});var n=c._zone.onUnstable.subscribe(function(){Pp.assertInAngularZone(),c._stable&&(c._stable=!1,c._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=Object(a.a)(h,d.pipe(Object(l.a)()))}var t;return t=e,e.prototype.bootstrap=function(e,t){var n,i=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof Ka?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var r=n instanceof sl?null:this._injector.get(al),o=n.create(fa.NULL,[],t||n.selector,r);o.onDestroy(function(){i._unloadComponent(o)});var s=o.injector.get(Np,null);return s&&o.injector.get(Bp).registerApplication(o.location.nativeElement,s),this._loadComponent(o),Fl()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},e.prototype.tick=function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=t._tickScope();try{this._runningTick=!0,this._views.forEach(function(e){return e.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(e){return e.checkNoChanges()})}catch(i){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(i)})}finally{this._runningTick=!1,Ip(n)}},e.prototype.attachView=function(e){var t=e;this._views.push(t),t.attachToAppRef(this)},e.prototype.detachView=function(e){var t=e;$p(this._views,t),t.detachFromAppRef()},e.prototype._loadComponent=function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(tp,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})},e.prototype._unloadComponent=function(e){this.detachView(e.hostView),$p(this.components,e)},e.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(e){return e.destroy()})},Object.defineProperty(e.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),e._tickScope=Ep("ApplicationRef#tick()"),e}();function $p(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var ef=function(){function e(){this.dirty=!0,this._results=[],this.changes=new gh,this.length=0}return e.prototype.map=function(e){return this._results.map(e)},e.prototype.filter=function(e){return this._results.filter(e)},e.prototype.find=function(e){return this._results.find(e)},e.prototype.reduce=function(e,t){return this._results.reduce(e,t)},e.prototype.forEach=function(e){this._results.forEach(e)},e.prototype.some=function(e){return this._results.some(e)},e.prototype.toArray=function(){return this._results.slice()},e.prototype[q()]=function(){return this._results[q()]()},e.prototype.toString=function(){return this._results.toString()},e.prototype.reset=function(e){this._results=function e(t){return t.reduce(function(t,n){var i=Array.isArray(n)?e(n):n;return t.concat(i)},[])}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},e.prototype.notifyOnChanges=function(){this.changes.emit(this)},e.prototype.setDirty=function(){this.dirty=!0},e.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},e}(),tf=function(){return function(){}}(),nf={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},rf=function(){function e(e,t){this._compiler=e,this._config=t||nf}return e.prototype.load=function(e){return this._compiler instanceof mp?this.loadFactory(e):this.loadAndCompile(e)},e.prototype.loadAndCompile=function(e){var t=this,r=Object(i.f)(e.split("#"),2),o=r[0],s=r[1];return void 0===s&&(s="default"),n("crnd")(o).then(function(e){return e[s]}).then(function(e){return of(e,o,s)}).then(function(e){return t._compiler.compileModuleAsync(e)})},e.prototype.loadFactory=function(e){var t=Object(i.f)(e.split("#"),2),r=t[0],o=t[1],s="NgFactory";return void 0===o&&(o="default",s=""),n("crnd")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(function(e){return e[o+s]}).then(function(e){return of(e,r,o)})},e}();function of(e,t,n){if(!e)throw new Error("Cannot find '"+n+"' in '"+t+"'");return e}var sf=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return lf(e,fl)},e}(),af=function(e,t){return function(e,t,n,r){var o;tl||(tl=function(e){function n(t,n,i){var r=e.call(this)||this;return r._lContainer=t,r._hostTNode=n,r._hostView=i,r._viewRefs=[],r}return Object(i.c)(n,e),Object.defineProperty(n.prototype,"element",{get:function(){return dl(t,this._hostTNode,this._hostView)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"injector",{get:function(){return new _n(this._hostTNode,this._hostView)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"parentInjector",{get:function(){var e=En(this._hostTNode,this._hostView),t=gt(e,this._hostView),n=function(e,t,n){if(n.parent&&-1!==n.parent.injectorIndex){for(var i=n.parent.injectorIndex,r=n.parent;null!=r.parent&&i==r.injectorIndex;)r=r.parent;return r}for(var o=ft(e),s=t,a=t[Oe];o>1;)a=(s=s[_e])[Oe],o--;return a}(e,this._hostView,this._hostTNode);return ut(e)&&null!=n?new _n(n,t):new _n(null,this._hostView)},enumerable:!0,configurable:!0}),n.prototype.clear=function(){for(;this._lContainer[Fe].length;)this.remove(0)},n.prototype.get=function(e){return this._viewRefs[e]||null},Object.defineProperty(n.prototype,"length",{get:function(){return this._lContainer[Fe].length},enumerable:!0,configurable:!0}),n.prototype.createEmbeddedView=function(e,t,n){var i=this._adjustIndex(n),r=e.createEmbeddedView(t||{},this._lContainer,this._hostTNode,this._hostView,i);return r.attachToViewContainerRef(this),this._viewRefs.splice(i,0,r),r},n.prototype.createComponent=function(e,t,n,i,r){var o=n||this.parentInjector;!r&&null==e.ngModule&&o&&(r=o.get(al,null));var s=e.create(o,i,void 0,r);return this.insert(s.hostView,t),s},n.prototype.insert=function(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n=e._lView,i=this._adjustIndex(t);return Ri(n,this._lContainer,this._hostView,i,this._hostTNode.index),ji(n,!0,Qi(i,this._lContainer[Fe],this._lContainer[ze])),e.attachToViewContainerRef(this),this._viewRefs.splice(i,0,e),e},n.prototype.move=function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n=this.indexOf(e);return this.detach(n),this.insert(e,this._adjustIndex(t)),e},n.prototype.indexOf=function(e){return this._viewRefs.indexOf(e)},n.prototype.remove=function(e){var t=this._adjustIndex(e,-1);_i(this._lContainer,this._hostTNode,t),this._viewRefs.splice(t,1)},n.prototype.detach=function(e){var t=this._adjustIndex(e,-1),n=Li(this._lContainer,t,!!this._hostTNode.detached);return null!=this._viewRefs.splice(t,1)[0]?new cl(n,n[De],n[Re]):null},n.prototype._adjustIndex=function(e,t){return void 0===t&&(t=0),null==e?this._lContainer[Fe].length+t:e},n}(e));var s=r[n.index];if(st(s))(o=s)[Be]=-1;else{var a=r[Te].createComment("");if(at(r)){var l=r[Te],c=et(n,r);Ui(l,Wi(l,c),a,function(e,t){return Ai(e)?e.nextSibling(t):t.nextSibling}(l,c))}else Gi(a,n,r);r[n.index]=o=ts(s,n,r,a,!0),us(r,n.index,o)}return new tl(o,n,r)}(e,t,$t(),Kt())},lf=la,cf=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return df()},e}(),hf=function(){return pl($t(),Kt(),null)},df=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},uf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t}(cf),pf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t}(uf),ff=function(){return function(e,t){this.name=e,this.callback=t}}(),gf=function(){function e(e,t,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=e,t&&t instanceof mf&&t.addChild(this)}return Object.defineProperty(e.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),e}(),mf=function(e){function t(t,n,i){var r=e.call(this,t,n,i)||this;return r.properties={},r.attributes={},r.classes={},r.styles={},r.childNodes=[],r.nativeElement=t,r}return Object(i.c)(t,e),t.prototype.addChild=function(e){e&&(this.childNodes.push(e),e.parent=this)},t.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))},t.prototype.insertChildrenAfter=function(e,t){var n,r=this,o=this.childNodes.indexOf(e);-1!==o&&((n=this.childNodes).splice.apply(n,Object(i.g)([o+1,0],t)),t.forEach(function(t){t.parent&&t.parent.removeChild(t),e.parent=r}))},t.prototype.insertBefore=function(e,t){var n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))},t.prototype.query=function(e){return this.queryAll(e)[0]||null},t.prototype.queryAll=function(e){var t=[];return vf(this,e,t),t},t.prototype.queryAllNodes=function(e){var t=[];return bf(this,e,t),t},Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes.filter(function(e){return e instanceof t})},enumerable:!0,configurable:!0}),t.prototype.triggerEventHandler=function(e,t){this.listeners.forEach(function(n){n.name==e&&n.callback(t)})},t}(gf);function yf(e){return e.map(function(e){return e.nativeElement})}function vf(e,t,n){e.childNodes.forEach(function(e){e instanceof mf&&(t(e)&&n.push(e),vf(e,t,n))})}function bf(e,t,n){e instanceof mf&&e.childNodes.forEach(function(e){t(e)&&n.push(e),e instanceof mf&&bf(e,t,n)})}var wf=function(){function e(e){this.nativeNode=e}return Object.defineProperty(e.prototype,"parent",{get:function(){var e=this.nativeNode.parentNode;return e?new Cf(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return Jn(this.nativeNode)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentInstance",{get:function(){var e=this.nativeNode;return e&&Qn(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return Yn(this.nativeNode)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listeners",{get:function(){return ri(this.nativeNode).filter(ii)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){return void 0===(e=ei(this.nativeNode)).localRefs&&(e.localRefs=function(t,n){var i=t[be].data[e.nodeIndex];if(i&&i.localNames){for(var r={},o=0;o<i.localNames.length;o+=2){var s=i.localNames[o+1];r[i.localNames[o]]=-1===s?et(i,t):t[s]}return r}return null}(e.lView)),e.localRefs||{};var e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){return function(e){var t=ei(e,!1);if(!t)return[];for(var n,i=t.lView[be],r=i.data[t.nodeIndex],o=[],s=r.directiveEnd,a=65535&r.providerIndexes;a<s;a++){var l=i.data[a];void 0!==(n=l).type&&void 0!==n.template&&void 0!==n.declaredInputs&&(l=l.type),o.push(l)}return o}(this.nativeNode)},enumerable:!0,configurable:!0}),e}(),Cf=function(e){function t(t){return e.call(this,t)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"nativeElement",{get:function(){return this.nativeNode.nodeType==Node.ELEMENT_NODE?this.nativeNode:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.nativeElement.nodeName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return ei(this.nativeNode),{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e={},t=this.nativeElement;if(t)for(var n=t.attributes,i=0;i<n.length;i++){var r=n[i];e[r.name]=r.value}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classes",{get:function(){var e={},t=this.nativeElement;if(t){var n=ni(t),i=n.lView[n.nodeIndex];if(lr(n.nodeIndex,n.lView)){for(var r=9;r<i.length;r+=4)if(Ar(i,r)){var o=zr(i,r),s=Fr(i,r);"boolean"==typeof s&&(e[o]=s)}}else{var a=t.classList;for(r=0;r<a.length;r++)e[a[r]]=!0}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){var e={},t=this.nativeElement;if(t){var n=ni(t),i=n.lView[n.nodeIndex];if(lr(n.nodeIndex,n.lView)){for(var r=9;r<i.length;r+=4)if(!Ar(i,r)){var o=zr(i,r),s=Fr(i,r);null!==s&&(e[o]=s)}}else{var a=t.style;for(r=0;r<a.length;r++){var l=a.item(r);e[l]=a.getPropertyValue(l)}}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){for(var e=this.nativeNode.childNodes,t=[],n=0;n<e.length;n++)t.push(Sf(e[n]));return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){var e=this.nativeElement;if(!e)return[];for(var t=e.children,n=[],i=0;i<t.length;i++)n.push(Sf(t[i]));return n},enumerable:!0,configurable:!0}),t.prototype.query=function(e){return this.queryAll(e)[0]||null},t.prototype.queryAll=function(e){var t=[];return xf(this,e,t,!0),t},t.prototype.queryAllNodes=function(e){var t=[];return xf(this,e,t,!1),t},t.prototype.triggerEventHandler=function(e,t){this.listeners.forEach(function(n){n.name===e&&n.callback(t)})},t}(wf);function xf(e,t,n,i){e instanceof Cf&&e.childNodes.forEach(function(e){t(e)&&n.push(e),e instanceof Cf&&(i&&!e.nativeElement||xf(e,t,n,i))})}var Af=new Map;function Sf(e){return e instanceof Node?e.nodeType==Node.ELEMENT_NODE?new Cf(e):new wf(e):null}var Of=function(e){return Af.get(e)||null};function Ef(e){Af.set(e.nativeNode,e)}var If=gf,Df=mf,kf=function(){function e(){}return e.prototype.supports=function(e){return di(e)},e.prototype.create=function(e){return new Tf(e)},e}(),Pf=function(e,t){return t},Tf=function(){function e(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Pf}return e.prototype.forEachItem=function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)},e.prototype.forEachOperation=function(e){for(var t=this._itHead,n=this._removalsHead,i=0,r=null;t||n;){var o=!n||t&&t.currentIndex<Lf(n,i,r)?t:n,s=Lf(o,i,r),a=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{r||(r=[]);var l=s-i,c=a-i;if(l!=c){for(var h=0;h<l;h++){var d=h<r.length?r[h]:r[h]=0,u=d+h;c<=u&&u<l&&(r[h]=d+1)}r[o.previousIndex]=c-l}}s!==a&&e(o,s,a)}},e.prototype.forEachPreviousItem=function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)},e.prototype.forEachAddedItem=function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)},e.prototype.forEachMovedItem=function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)},e.prototype.forEachRemovedItem=function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)},e.prototype.forEachIdentityChange=function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)},e.prototype.diff=function(e){if(null==e&&(e=[]),!di(e))throw new Error("Error trying to diff '"+X(e)+"'. Only arrays and iterables are allowed");return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var t=this;this._reset();var n,i,r,o=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(var a=0;a<this.length;a++)r=this._trackByFn(a,i=e[a]),null!==o&&Y(o.trackById,r)?(s&&(o=this._verifyReinsertion(o,i,r,a)),Y(o.item,i)||this._addIdentityChange(o,i)):(o=this._mismatch(o,i,r,a),s=!0),o=o._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var i=e[q()](),r=void 0;!(r=i.next()).done;)t(r.value)}(e,function(e){r=t._trackByFn(n,e),null!==o&&Y(o.trackById,r)?(s&&(o=t._verifyReinsertion(o,e,r,n)),Y(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,r,n),s=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=e,this.isDirty},Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),e.prototype._reset=function(){if(this.isDirty){var e=void 0,t=void 0;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},e.prototype._mismatch=function(e,t,n,i){var r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Y(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,i)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Y(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,i)):e=this._addAfter(new Mf(t,n),r,i),e},e.prototype._verifyReinsertion=function(e,t,n,i){var r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?e=this._reinsertAfter(r,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e},e.prototype._truncate=function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},e.prototype._reinsertAfter=function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var i=e._prevRemoved,r=e._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(e,t,n),this._addToMoves(e,n),e},e.prototype._moveAfter=function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e},e.prototype._addAfter=function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e},e.prototype._insertAfter=function(e,t,n){var i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Rf),this._linkedRecords.put(e),e.currentIndex=n,e},e.prototype._remove=function(e){return this._addToRemovals(this._unlink(e))},e.prototype._unlink=function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e},e.prototype._addToMoves=function(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)},e.prototype._addToRemovals=function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Rf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e},e.prototype._addIdentityChange=function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e},e}(),Mf=function(){return function(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}(),jf=function(){function e(){this._head=null,this._tail=null}return e.prototype.add=function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)},e.prototype.get=function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Y(n.trackById,e))return n;return null},e.prototype.remove=function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head},e}(),Rf=function(){function e(){this.map=new Map}return e.prototype.put=function(e){var t=e.trackById,n=this.map.get(t);n||(n=new jf,this.map.set(t,n)),n.add(e)},e.prototype.get=function(e,t){var n=this.map.get(e);return n?n.get(e,t):null},e.prototype.remove=function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.map.clear()},e}();function Lf(e,t,n){var i=e.previousIndex;if(null===i)return i;var r=0;return n&&i<n.length&&(r=n[i]),i+t+r}var _f=function(){function e(){}return e.prototype.supports=function(e){return e instanceof Map||ui(e)},e.prototype.create=function(){return new Nf},e}(),Nf=function(){function e(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),e.prototype.forEachItem=function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)},e.prototype.forEachPreviousItem=function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)},e.prototype.forEachChangedItem=function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)},e.prototype.forEachAddedItem=function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)},e.prototype.forEachRemovedItem=function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)},e.prototype.diff=function(e){if(e){if(!(e instanceof Map||ui(e)))throw new Error("Error trying to diff '"+X(e)+"'. Only maps and objects are allowed")}else e=new Map;return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,i){if(n&&n.key===i)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var r=t._getOrCreateRecordForKey(i,e);n=t._insertBeforeOrAppend(n,r)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},e.prototype._insertBeforeOrAppend=function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null},e.prototype._getOrCreateRecordForKey=function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}var o=new Bf(e);return this._records.set(e,o),o.currentValue=t,this._addToAdditions(o),o},e.prototype._reset=function(){if(this.isDirty){var e=void 0;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},e.prototype._maybeAddToChanges=function(e,t){Y(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))},e.prototype._addToAdditions=function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)},e.prototype._addToChanges=function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)},e.prototype._forEach=function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})},e}(),Bf=function(){return function(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}(),Ff=function(){function e(e){this.factories=e}return e.create=function(t,n){if(null!=n){var i=n.factories.slice();t=t.concat(i)}return new e(t)},e.extend=function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new Ot,new At]]}},e.prototype.find=function(e){var t,n=this.factories.find(function(t){return t.supports(e)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((t=e).name||typeof t)+"'")},e.ngInjectableDef=b({providedIn:"root",factory:function(){return new e([new kf])}}),e}(),zf=function(){function e(e){this.factories=e}return e.create=function(t,n){if(n){var i=n.factories.slice();t=t.concat(i)}return new e(t)},e.extend=function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new Ot,new At]]}},e.prototype.find=function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '"+e+"'")},e.ngInjectableDef=b({providedIn:"root",factory:function(){return new e([new _f])}}),e}(),Hf=[new _f],Vf=new Ff([new kf]),Uf=new zf(Hf),Wf=qp(null,"core",[{provide:ep,useValue:"unknown"},{provide:Zp,deps:[fa]},{provide:Bp,deps:[]},{provide:ip,deps:[]}]),Gf=new A("LocaleId"),qf=new A("Translations"),Qf=new A("TranslationsFormat"),Yf=function(e){return e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Ignore=2]="Ignore",e}({});function Xf(){return Vf}function Zf(){return Uf}function Kf(e){return e||"en-US"}var Jf=[{provide:Jp,useClass:Jp,deps:[Pp,ip,fa,Su,rl,Yu]},{provide:Yu,useClass:Yu,deps:[[new At,Qu]]},{provide:mp,useClass:mp,deps:[]},Ku,{provide:Ff,useFactory:Xf,deps:[]},{provide:zf,useFactory:Zf,deps:[]},{provide:Gf,useFactory:Kf,deps:[[new xt(Gf),new At,new Ot]]}],$f=function(){return function(e){}}(),eg=!0,tg=!1;function ng(e,t,n){var i=e.state,r=1792&i;return r===t?(e.state=-1793&i|n,e.initIndex=-1,!0):r===n}function ig(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function rg(e,t){return e.nodes[t]}function og(e,t){return e.nodes[t]}function sg(e,t){return e.nodes[t]}function ag(e,t){return e.nodes[t]}function lg(e,t){return e.nodes[t]}var cg=function(){return function(){}}(),hg={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function dg(e,t,n,i){var r="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+t+"'. Current value: '"+n+"'.";return i&&(r+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){var n=new Error(e);return ug(n,t),n}(r,e)}function ug(e,t){e[vu]=t,e[wu]=t.logError.bind(t)}function pg(e){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+e)}var fg=function(){},gg=new Map;function mg(e){var t=gg.get(e);return t||(t=X(e)+"_"+gg.size,gg.set(e,t)),t}function yg(e,t,n,i){if(ci.isWrapped(i)){i=ci.unwrap(i);var r=e.def.nodes[t].bindingIndex+n,o=ci.unwrap(e.oldValues[r]);e.oldValues[r]=new ci(o)}return i}var vg="$$undefined",bg="$$empty";function wg(e){return{id:vg,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}var Cg=0;function xg(e,t,n,i){return!(!(2&e.state)&&Y(e.oldValues[t.bindingIndex+n],i))}function Ag(e,t,n,i){return!!xg(e,t,n,i)&&(e.oldValues[t.bindingIndex+n]=i,!0)}function Sg(e,t,n,i){var r=e.oldValues[t.bindingIndex+n];if(1&e.state||!li(r,i)){var o=t.bindings[n].name;throw dg(hg.createDebugContext(e,t.nodeIndex),o+": "+r,o+": "+i,0!=(1&e.state))}}function Og(e){for(var t=e;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function Eg(e,t){for(var n=e;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function Ig(e,t,n,i){try{return Og(33554432&e.def.nodes[t].flags?og(e,t).componentView:e),hg.handleEvent(e,t,n,i)}catch(r){e.root.errorHandler.handleError(r)}}function Dg(e){return e.parent?og(e.parent,e.parentNodeDef.nodeIndex):null}function kg(e){return e.parent?e.parentNodeDef.parent:null}function Pg(e,t){switch(201347067&t.flags){case 1:return og(e,t.nodeIndex).renderElement;case 2:return rg(e,t.nodeIndex).renderText}}function Tg(e,t){return e?e+":"+t:t}function Mg(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function jg(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function Rg(e){return 1<<e%32}function Lg(e){var t={},n=0,r={};return e&&e.forEach(function(e){var o=Object(i.f)(e,2),s=o[0],a=o[1];"number"==typeof s?(t[s]=a,n|=Rg(s)):r[s]=a}),{matchedQueries:t,references:r,matchedQueryIds:n}}function _g(e,t){return e.map(function(e){var n,r,o;return Array.isArray(e)?(o=(n=Object(i.f)(e,2))[0],r=n[1]):(o=0,r=e),r&&("function"==typeof r||"object"==typeof r)&&t&&Object.defineProperty(r,ca,{value:t,configurable:!0}),{flags:o,token:r,tokenKey:mg(r)}})}function Ng(e,t,n){var i=n.renderParent;return i?0==(1&i.flags)||0==(33554432&i.flags)||i.element.componentRendererType&&i.element.componentRendererType.encapsulation===ie.Native?og(e,n.renderParent.nodeIndex).renderElement:void 0:t}var Bg=new WeakMap;function Fg(e){var t=Bg.get(e);return t||((t=e(function(){return fg})).factory=e,Bg.set(e,t)),t}function zg(e,t,n,i,r){3===t&&(n=e.renderer.parentNode(Pg(e,e.def.lastRenderRootNode))),Hg(e,t,0,e.def.nodes.length-1,n,i,r)}function Hg(e,t,n,i,r,o,s){for(var a=n;a<=i;a++){var l=e.def.nodes[a];11&l.flags&&Ug(e,l,t,r,o,s),a+=l.childCount}}function Vg(e,t,n,i,r,o){for(var s=e;s&&!Mg(s);)s=s.parent;for(var a=s.parent,l=kg(s),c=l.nodeIndex+l.childCount,h=l.nodeIndex+1;h<=c;h++){var d=a.def.nodes[h];d.ngContentIndex===t&&Ug(a,d,n,i,r,o),h+=d.childCount}if(!a.parent){var u=e.root.projectableNodes[t];if(u)for(h=0;h<u.length;h++)Wg(e,u[h],n,i,r,o)}}function Ug(e,t,n,i,r,o){if(8&t.flags)Vg(e,t.ngContent.index,n,i,r,o);else{var s=Pg(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&Wg(e,s,n,i,r,o),32&t.bindingFlags&&Wg(og(e,t.nodeIndex).componentView,s,n,i,r,o)):Wg(e,s,n,i,r,o),16777216&t.flags)for(var a=og(e,t.nodeIndex).viewContainer._embeddedViews,l=0;l<a.length;l++)zg(a[l],n,i,r,o);1&t.flags&&!t.element.name&&Hg(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,i,r,o)}}function Wg(e,t,n,i,r,o){var s=e.renderer;switch(n){case 1:s.appendChild(i,t);break;case 2:s.insertBefore(i,t,r);break;case 3:s.removeChild(i,t);break;case 0:o.push(t)}}var Gg=/^:([^:]+):(.+)$/;function qg(e){if(":"===e[0]){var t=e.match(Gg);return[t[1],t[2]]}return["",e]}function Qg(e){for(var t=0,n=0;n<e.length;n++)t|=e[n].flags;return t}function Yg(e,t){for(var n="",i=0;i<2*e;i+=2)n=n+t[i]+Zg(t[i+1]);return n+t[2*e]}function Xg(e,t,n,i,r,o,s,a,l,c,h,d,u,p,f,g,m,y,v,b){switch(e){case 1:return t+Zg(n)+i;case 2:return t+Zg(n)+i+Zg(r)+o;case 3:return t+Zg(n)+i+Zg(r)+o+Zg(s)+a;case 4:return t+Zg(n)+i+Zg(r)+o+Zg(s)+a+Zg(l)+c;case 5:return t+Zg(n)+i+Zg(r)+o+Zg(s)+a+Zg(l)+c+Zg(h)+d;case 6:return t+Zg(n)+i+Zg(r)+o+Zg(s)+a+Zg(l)+c+Zg(h)+d+Zg(u)+p;case 7:return t+Zg(n)+i+Zg(r)+o+Zg(s)+a+Zg(l)+c+Zg(h)+d+Zg(u)+p+Zg(f)+g;case 8:return t+Zg(n)+i+Zg(r)+o+Zg(s)+a+Zg(l)+c+Zg(h)+d+Zg(u)+p+Zg(f)+g+Zg(m)+y;case 9:return t+Zg(n)+i+Zg(r)+o+Zg(s)+a+Zg(l)+c+Zg(h)+d+Zg(u)+p+Zg(f)+g+Zg(m)+y+Zg(v)+b;default:throw new Error("Does not support more than 9 expressions")}}function Zg(e){return null!=e?e.toString():""}var Kg=[],Jg={};function $g(e,t,n,i,r,o){e|=1;var s=Lg(t);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s.matchedQueries,matchedQueryIds:s.matchedQueryIds,references:s.references,ngContentIndex:n,childCount:i,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?Fg(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:r||fg},provider:null,text:null,query:null,ngContent:null}}function em(e,t,n,r,o,s,a,l,c,h,d,u){var p;void 0===a&&(a=[]),h||(h=fg);var f=Lg(n),g=f.matchedQueries,m=f.references,y=f.matchedQueryIds,v=null,b=null;s&&(v=(p=Object(i.f)(qg(s),2))[0],b=p[1]),l=l||[];for(var w=new Array(l.length),C=0;C<l.length;C++){var x=Object(i.f)(l[C],3),A=x[0],S=x[1],O=x[2],E=Object(i.f)(qg(S),2),I=E[0],D=E[1],k=void 0,P=void 0;switch(15&A){case 4:P=O;break;case 1:case 8:k=O}w[C]={flags:A,ns:I,name:D,nonMinifiedName:D,securityContext:k,suffix:P}}c=c||[];var T=new Array(c.length);for(C=0;C<c.length;C++){var M=Object(i.f)(c[C],2);T[C]={type:0,target:M[0],eventName:M[1],propName:null}}var j=(a=a||[]).map(function(e){var t=Object(i.f)(e,2),n=t[0],r=t[1],o=Object(i.f)(qg(n),2);return[o[0],o[1],r]});return u=function(e){if(e&&e.id===vg){var t=null!=e.encapsulation&&e.encapsulation!==ie.None||e.styles.length||Object.keys(e.data).length;e.id=t?"c"+Cg++:bg}return e&&e.id===bg&&(e=null),e||null}(u),d&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:g,matchedQueryIds:y,references:m,ngContentIndex:r,childCount:o,bindings:w,bindingFlags:Qg(w),outputs:T,element:{ns:v,name:b,attrs:j,template:null,componentProvider:null,componentView:d||null,componentRendererType:u,publicProviders:null,allProviders:null,handleEvent:h||fg},provider:null,text:null,query:null,ngContent:null}}function tm(e,t,n){var r,o=n.element,s=e.root.selectorOrNode,a=e.renderer;if(e.parent||!s){r=o.name?a.createElement(o.name,o.ns):a.createComment("");var l=Ng(e,t,n);l&&a.appendChild(l,r)}else r=a.selectRootElement(s,!!o.componentRendererType&&o.componentRendererType.encapsulation===ie.ShadowDom);if(o.attrs)for(var c=0;c<o.attrs.length;c++){var h=Object(i.f)(o.attrs[c],3);a.setAttribute(r,h[1],h[2],h[0])}return r}function nm(e,t,n,i){for(var r=0;r<n.outputs.length;r++){var o=n.outputs[r],s=im(e,n.nodeIndex,Tg(o.target,o.eventName)),a=o.target,l=e;"component"===o.target&&(a=null,l=t);var c=l.renderer.listen(a||i,o.eventName,s);e.disposables[n.outputIndex+r]=c}}function im(e,t,n){return function(i){return Ig(e,t,n,i)}}function rm(e,t,n,i){if(!Ag(e,t,n,i))return!1;var r=t.bindings[n],o=og(e,t.nodeIndex),s=o.renderElement,a=r.name;switch(15&r.flags){case 1:!function(e,t,n,i,r,o){var s=t.securityContext,a=s?e.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;var l=e.renderer;null!=o?l.setAttribute(n,r,a,i):l.removeAttribute(n,r,i)}(e,r,s,r.ns,a,i);break;case 2:!function(e,t,n,i){var r=e.renderer;i?r.addClass(t,n):r.removeClass(t,n)}(e,s,a,i);break;case 4:!function(e,t,n,i,r){var o=e.root.sanitizer.sanitize(El.STYLE,r);if(null!=o){o=o.toString();var s=t.suffix;null!=s&&(o+=s)}else o=null;var a=e.renderer;null!=o?a.setStyle(n,i,o):a.removeStyle(n,i)}(e,r,s,a,i);break;case 8:!function(e,t,n,i,r){var o=t.securityContext,s=o?e.root.sanitizer.sanitize(o,r):r;e.renderer.setProperty(n,i,s)}(33554432&t.flags&&32&r.flags?o.componentView:e,r,s,a,i)}return!0}var om=new Object,sm=mg(fa),am=mg(ua),lm=mg(al);function cm(e,t,n,i){return n=J(n),{index:-1,deps:_g(i,X(t)),flags:e,token:t,value:n}}function hm(e){for(var t={},n=[],i=!1,r=0;r<e.length;r++){var o=e[r];o.token===ka&&!0===o.value&&(i=!0),1073741824&o.flags&&n.push(o.token),o.index=r,t[mg(o.token)]=o}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:i}}function dm(e,t,n){void 0===n&&(n=fa.THROW_IF_NOT_FOUND);var i,r,o=kt(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(n=null),1&t.flags)return e._parent.get(t.token,n);var s=t.tokenKey;switch(s){case sm:case am:case lm:return e}var a,l=e._def.providersByKey[s];if(l){var c=e._providers[l.index];return void 0===c&&(c=e._providers[l.index]=um(e,l)),c===om?void 0:c}if((a=C(t.token))&&(i=e,null!=(r=a).providedIn&&(function(e,t){return e._def.modules.indexOf(r.providedIn)>-1}(i)||"root"===r.providedIn&&i._def.isRoot))){var h=e._providers.length;return e._def.providersByKey[t.tokenKey]={flags:5120,value:a.factory,deps:[],index:h,token:t.token},e._providers[h]=om,e._providers[h]=um(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?n:e._parent.get(t.token,n)}finally{kt(o)}}function um(e,t){var n;switch(201347067&t.flags){case 512:n=function(e,t,n){var r=n.length;switch(r){case 0:return new t;case 1:return new t(dm(e,n[0]));case 2:return new t(dm(e,n[0]),dm(e,n[1]));case 3:return new t(dm(e,n[0]),dm(e,n[1]),dm(e,n[2]));default:for(var o=new Array(r),s=0;s<r;s++)o[s]=dm(e,n[s]);return new(t.bind.apply(t,Object(i.g)([void 0],o)))}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){var r=n.length;switch(r){case 0:return t();case 1:return t(dm(e,n[0]));case 2:return t(dm(e,n[0]),dm(e,n[1]));case 3:return t(dm(e,n[0]),dm(e,n[1]),dm(e,n[2]));default:for(var o=Array(r),s=0;s<r;s++)o[s]=dm(e,n[s]);return t.apply(void 0,Object(i.g)(o))}}(e,t.value,t.deps);break;case 2048:n=dm(e,t.deps[0]);break;case 256:n=t.value}return n===om||null==n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?om:n}function pm(e,t){var n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;var i=n[t];return i.viewContainerParent=null,ym(n,t),hg.dirtyParentQueries(i),gm(i),i}function fm(e,t,n){var i=t?Pg(t,t.def.lastRenderRootNode):e.renderElement,r=n.renderer.parentNode(i),o=n.renderer.nextSibling(i);zg(n,2,r,o,void 0)}function gm(e){zg(e,3,null,null,void 0)}function mm(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ym(e,t){t>=e.length-1?e.pop():e.splice(t,1)}var vm=new Object;function bm(e,t,n,i,r,o){return new Cm(e,t,n,i,r,o)}function wm(e){return e.viewDefFactory}var Cm=function(e){function t(t,n,i,r,o,s){var a=e.call(this)||this;return a.selector=t,a.componentType=n,a._inputs=r,a._outputs=o,a.ngContentSelectors=s,a.viewDefFactory=i,a}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"inputs",{get:function(){var e=[],t=this._inputs;for(var n in t)e.push({propName:n,templateName:t[n]});return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){var e=[];for(var t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e},enumerable:!0,configurable:!0}),t.prototype.create=function(e,t,n,i){if(!i)throw new Error("ngModule should be provided");var r=Fg(this.viewDefFactory),o=r.nodes[0].element.componentProvider.nodeIndex,s=hg.createRootView(e,t||[],n,r,i,vm),a=sg(s,o).instance;return n&&s.renderer.setAttribute(og(s,0).renderElement,"ng-version",kl.full),new xm(s,new Em(s),a)},t}(Ka),xm=function(e){function t(t,n,i){var r=e.call(this)||this;return r._view=t,r._viewRef=n,r._component=i,r._elDef=r._view.def.nodes[0],r.hostView=n,r.changeDetectorRef=n,r.instance=i,r}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"location",{get:function(){return new fl(og(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new Pm(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._viewRef.destroy()},t.prototype.onDestroy=function(e){this._viewRef.onDestroy(e)},t}(Za);function Am(e,t,n){return new Sm(e,t,n)}var Sm=function(){function e(e,t,n){this._view=e,this._elDef=t,this._data=n,this._embeddedViews=[]}return Object.defineProperty(e.prototype,"element",{get:function(){return new fl(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Pm(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentInjector",{get:function(){for(var e=this._view,t=this._elDef.parent;!t&&e;)t=kg(e),e=e.parent;return e?new Pm(e,t):new Pm(this._view,null)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){for(var e=this._embeddedViews.length-1;e>=0;e--){var t=pm(this._data,e);hg.destroyView(t)}},e.prototype.get=function(e){var t=this._embeddedViews[e];if(t){var n=new Em(t);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(e.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),e.prototype.createEmbeddedView=function(e,t,n){var i=e.createEmbeddedView(t||{});return this.insert(i,n),i},e.prototype.createComponent=function(e,t,n,i,r){var o=n||this.parentInjector;r||e instanceof sl||(r=o.get(al));var s=e.create(o,i,void 0,r);return this.insert(s.hostView,t),s},e.prototype.insert=function(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,i,r,o,s=e;return o=(n=this._data).viewContainer._embeddedViews,null==(i=t)&&(i=o.length),(r=s._view).viewContainerParent=this._view,mm(o,i,r),function(e,t){var n=Dg(t);if(n&&n!==e&&!(16&t.state)){t.state|=16;var i=n.template._projectedViews;i||(i=n.template._projectedViews=[]),i.push(t),function(e,n){if(!(4&n.flags)){t.parent.def.nodeFlags|=4,n.flags|=4;for(var i=n.parent;i;)i.childFlags|=4,i=i.parent}}(0,t.parentNodeDef)}}(n,r),hg.dirtyParentQueries(r),fm(n,i>0?o[i-1]:null,r),s.attachToViewContainerRef(this),e},e.prototype.move=function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,i,r,o,s,a=this._embeddedViews.indexOf(e._view);return r=t,s=(o=(n=this._data).viewContainer._embeddedViews)[i=a],ym(o,i),null==r&&(r=o.length),mm(o,r,s),hg.dirtyParentQueries(s),gm(s),fm(n,r>0?o[r-1]:null,s),e},e.prototype.indexOf=function(e){return this._embeddedViews.indexOf(e._view)},e.prototype.remove=function(e){var t=pm(this._data,e);t&&hg.destroyView(t)},e.prototype.detach=function(e){var t=pm(this._data,e);return t?new Em(t):null},e}();function Om(e){return new Em(e)}var Em=function(){function e(e){this._view=e,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(e.prototype,"rootNodes",{get:function(){return zg(this._view,0,void 0,void 0,e=[]),e;var e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),e.prototype.markForCheck=function(){Og(this._view)},e.prototype.detach=function(){this._view.state&=-5},e.prototype.detectChanges=function(){var e=this._view.root.rendererFactory;e.begin&&e.begin();try{hg.checkAndUpdateView(this._view)}finally{e.end&&e.end()}},e.prototype.checkNoChanges=function(){hg.checkNoChangesView(this._view)},e.prototype.reattach=function(){this._view.state|=4},e.prototype.onDestroy=function(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)},e.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),hg.destroyView(this._view)},e.prototype.detachFromAppRef=function(){this._appRef=null,gm(this._view),hg.dirtyParentQueries(this._view)},e.prototype.attachToAppRef=function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e},e.prototype.attachToViewContainerRef=function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e},e}();function Im(e,t){return new Dm(e,t)}var Dm=function(e){function t(t,n){var i=e.call(this)||this;return i._parentView=t,i._def=n,i}return Object(i.c)(t,e),t.prototype.createEmbeddedView=function(e){return new Em(hg.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))},Object.defineProperty(t.prototype,"elementRef",{get:function(){return new fl(og(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),t}(mh);function km(e,t){return new Pm(e,t)}var Pm=function(){function e(e,t){this.view=e,this.elDef=t}return e.prototype.get=function(e,t){return void 0===t&&(t=fa.THROW_IF_NOT_FOUND),hg.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:mg(e)},t)},e}();function Tm(e,t){var n=e.def.nodes[t];if(1&n.flags){var i=og(e,n.nodeIndex);return n.element.template?i.template:i.renderElement}if(2&n.flags)return rg(e,n.nodeIndex).renderText;if(20240&n.flags)return sg(e,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+t)}function Mm(e){return new jm(e.renderer)}var jm=function(){function e(e){this.delegate=e}return e.prototype.selectRootElement=function(e){return this.delegate.selectRootElement(e)},e.prototype.createElement=function(e,t){var n=Object(i.f)(qg(t),2),r=this.delegate.createElement(n[1],n[0]);return e&&this.delegate.appendChild(e,r),r},e.prototype.createViewRoot=function(e){return e},e.prototype.createTemplateAnchor=function(e){var t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t},e.prototype.createText=function(e,t){var n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n},e.prototype.projectNodes=function(e,t){for(var n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])},e.prototype.attachViewAfter=function(e,t){for(var n=this.delegate.parentNode(e),i=this.delegate.nextSibling(e),r=0;r<t.length;r++)this.delegate.insertBefore(n,t[r],i)},e.prototype.detachView=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=this.delegate.parentNode(n);this.delegate.removeChild(i,n)}},e.prototype.destroyView=function(e,t){for(var n=0;n<t.length;n++)this.delegate.destroyNode(t[n])},e.prototype.listen=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.listenGlobal=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.setElementProperty=function(e,t,n){this.delegate.setProperty(e,t,n)},e.prototype.setElementAttribute=function(e,t,n){var r=Object(i.f)(qg(t),2),o=r[0],s=r[1];null!=n?this.delegate.setAttribute(e,s,n,o):this.delegate.removeAttribute(e,s,o)},e.prototype.setBindingDebugInfo=function(e,t,n){},e.prototype.setElementClass=function(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)},e.prototype.setElementStyle=function(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)},e.prototype.invokeElementMethod=function(e,t,n){e[t].apply(e,n)},e.prototype.setText=function(e,t){this.delegate.setValue(e,t)},e.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},e}();function Rm(e,t,n,i){return new Lm(e,t,n,i)}var Lm=function(){function e(e,t,n,i){this._moduleType=e,this._parent=t,this._bootstrapComponents=n,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){for(var t=e._def,n=e._providers=new Array(t.providers.length),i=0;i<t.providers.length;i++){var r=t.providers[i];4096&r.flags||void 0===n[i]&&(n[i]=um(e,r))}}(this)}return e.prototype.get=function(e,t,n){void 0===t&&(t=fa.THROW_IF_NOT_FOUND),void 0===n&&(n=It.Default);var i=0;return n&It.SkipSelf?i|=1:n&It.Self&&(i|=4),dm(this,{token:e,tokenKey:mg(e),flags:i},t)},Object.defineProperty(e.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentFactoryResolver",{get:function(){return this.get(rl)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+X(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(e,t){for(var n=e._def,i=new Set,r=0;r<n.providers.length;r++)if(131072&n.providers[r].flags){var o=e._providers[r];if(o&&o!==om){var s=o.ngOnDestroy;"function"!=typeof s||i.has(o)||(s.apply(o),i.add(o))}}}(this),this._destroyListeners.forEach(function(e){return e()})},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},e}(),_m=mg(bl),Nm=mg(Al),Bm=mg(fl),Fm=mg(sf),zm=mg(mh),Hm=mg(cf),Vm=mg(fa),Um=mg(ua);function Wm(e,t,n,r,o,s,a,l){var c=[];if(a)for(var h in a){var d=Object(i.f)(a[h],2);c[d[0]]={flags:8,name:h,nonMinifiedName:d[1],ns:null,securityContext:null,suffix:null}}var u=[];if(l)for(var p in l)u.push({type:1,propName:p,target:null,eventName:l[p]});return Qm(e,t|=16384,n,r,o,o,s,c,u)}function Gm(e,t,n){return Qm(-1,e|=16,null,0,t,t,n)}function qm(e,t,n,i,r){return Qm(-1,e,t,0,n,i,r)}function Qm(e,t,n,i,r,o,s,a,l){var c=Lg(n),h=c.matchedQueries,d=c.references,u=c.matchedQueryIds;l||(l=[]),a||(a=[]),o=J(o);var p=_g(s,X(r));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:h,matchedQueryIds:u,references:d,ngContentIndex:-1,childCount:i,bindings:a,bindingFlags:Qg(a),outputs:l,element:null,provider:{token:r,value:o,deps:p},text:null,query:null,ngContent:null}}function Ym(e,t){return Jm(e,t)}function Xm(e,t){for(var n=e;n.parent&&!Mg(n);)n=n.parent;return $m(n.parent,kg(n),!0,t.provider.value,t.provider.deps)}function Zm(e,t){var n=$m(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(var i=0;i<t.outputs.length;i++){var r=t.outputs[i],o=n[r.propName];if(!qu(o))throw new Error("@Output "+r.propName+" not initialized in '"+n.constructor.name+"'.");var s=o.subscribe(Km(e,t.parent.nodeIndex,r.eventName));e.disposables[t.outputIndex+i]=s.unsubscribe.bind(s)}return n}function Km(e,t,n){return function(i){return Ig(e,t,n,i)}}function Jm(e,t){var n=(8192&t.flags)>0,r=t.provider;switch(201347067&t.flags){case 512:return $m(e,t.parent,n,r.value,r.deps);case 1024:return function(e,t,n,r,o){var s=o.length;switch(s){case 0:return r();case 1:return r(ty(e,t,n,o[0]));case 2:return r(ty(e,t,n,o[0]),ty(e,t,n,o[1]));case 3:return r(ty(e,t,n,o[0]),ty(e,t,n,o[1]),ty(e,t,n,o[2]));default:for(var a=Array(s),l=0;l<s;l++)a[l]=ty(e,t,n,o[l]);return r.apply(void 0,Object(i.g)(a))}}(e,t.parent,n,r.value,r.deps);case 2048:return ty(e,t.parent,n,r.deps[0]);case 256:return r.value}}function $m(e,t,n,r,o){var s=o.length;switch(s){case 0:return new r;case 1:return new r(ty(e,t,n,o[0]));case 2:return new r(ty(e,t,n,o[0]),ty(e,t,n,o[1]));case 3:return new r(ty(e,t,n,o[0]),ty(e,t,n,o[1]),ty(e,t,n,o[2]));default:for(var a=new Array(s),l=0;l<s;l++)a[l]=ty(e,t,n,o[l]);return new(r.bind.apply(r,Object(i.g)([void 0],a)))}}var ey={};function ty(e,t,n,i,r){if(void 0===r&&(r=fa.THROW_IF_NOT_FOUND),8&i.flags)return i.token;var o=e;2&i.flags&&(r=null);var s=i.tokenKey;s===Hm&&(n=!(!t||!t.element.componentView)),t&&1&i.flags&&(n=!1,t=t.parent);for(var a=e;a;){if(t)switch(s){case _m:return Mm(ny(a,t,n));case Nm:return ny(a,t,n).renderer;case Bm:return new fl(og(a,t.nodeIndex).renderElement);case Fm:return og(a,t.nodeIndex).viewContainer;case zm:if(t.element.template)return og(a,t.nodeIndex).template;break;case Hm:return Om(ny(a,t,n));case Vm:case Um:return km(a,t);default:var l=(n?t.element.allProviders:t.element.publicProviders)[s];if(l){var c=sg(a,l.nodeIndex);return c||(c={instance:Jm(a,l)},a.nodes[l.nodeIndex]=c),c.instance}}n=Mg(a),t=kg(a),a=a.parent,4&i.flags&&(a=null)}var h=o.root.injector.get(i.token,ey);return h!==ey||r===ey?h:o.root.ngModule.injector.get(i.token,r)}function ny(e,t,n){var i;if(n)i=og(e,t.nodeIndex).componentView;else for(i=e;i.parent&&!Mg(i);)i=i.parent;return i}function iy(e,t,n,i,r,o){if(32768&n.flags){var s=og(e,n.parent.nodeIndex).componentView;2&s.def.flags&&(s.state|=8)}if(t.instance[n.bindings[i].name]=r,524288&n.flags){o=o||{};var a=ci.unwrap(e.oldValues[n.bindingIndex+i]);o[n.bindings[i].nonMinifiedName]=new hi(a,r,0!=(2&e.state))}return e.oldValues[n.bindingIndex+i]=r,o}function ry(e,t){if(e.def.nodeFlags&t)for(var n=e.def.nodes,i=0,r=0;r<n.length;r++){var o=n[r],s=o.parent;for(!s&&o.flags&t&&sy(e,r,o.flags&t,i++),0==(o.childFlags&t)&&(r+=o.childCount);s&&1&s.flags&&r===s.nodeIndex+s.childCount;)s.directChildFlags&t&&(i=oy(e,s,t,i)),s=s.parent}}function oy(e,t,n,i){for(var r=t.nodeIndex+1;r<=t.nodeIndex+t.childCount;r++){var o=e.def.nodes[r];o.flags&n&&sy(e,r,o.flags&n,i++),r+=o.childCount}return i}function sy(e,t,n,i){var r=sg(e,t);if(r){var o=r.instance;o&&(hg.setCurrentNode(e,t),1048576&n&&ig(e,512,i)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&ig(e,768,i)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function ay(e,t,n){var i=[];for(var r in n)i.push({propName:r,bindingType:n[r]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:t,filterId:Rg(t),bindings:i},ngContent:null}}function ly(e){for(var t=e.def.nodeMatchedQueries;e.parent&&jg(e);){var n=e.parentNodeDef;e=e.parent;for(var i=n.nodeIndex+n.childCount,r=0;r<=i;r++)67108864&(o=e.def.nodes[r]).flags&&536870912&o.flags&&(o.query.filterId&t)===o.query.filterId&&lg(e,r).setDirty(),!(1&o.flags&&r+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(r+=o.childCount)}if(134217728&e.def.nodeFlags)for(r=0;r<e.def.nodes.length;r++){var o;134217728&(o=e.def.nodes[r]).flags&&536870912&o.flags&&lg(e,r).setDirty(),r+=o.childCount}}function cy(e,t){var n=lg(e,t.nodeIndex);if(n.dirty){var i,r=void 0;if(67108864&t.flags){var o=t.parent.parent;r=hy(e,o.nodeIndex,o.nodeIndex+o.childCount,t.query,[]),i=sg(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(r=hy(e,0,e.def.nodes.length-1,t.query,[]),i=e.component);n.reset(r);for(var s=t.query.bindings,a=!1,l=0;l<s.length;l++){var c=s[l],h=void 0;switch(c.bindingType){case 0:h=n.first;break;case 1:h=n,a=!0}i[c.propName]=h}a&&n.notifyOnChanges()}}function hy(e,t,n,i,r){for(var o=t;o<=n;o++){var s=e.def.nodes[o],a=s.matchedQueries[i.id];if(null!=a&&r.push(dy(e,s,a)),1&s.flags&&s.element.template&&(s.element.template.nodeMatchedQueries&i.filterId)===i.filterId){var l=og(e,o);if((s.childMatchedQueries&i.filterId)===i.filterId&&(hy(e,o+1,o+s.childCount,i,r),o+=s.childCount),16777216&s.flags)for(var c=l.viewContainer._embeddedViews,h=0;h<c.length;h++){var d=c[h],u=Dg(d);u&&u===l&&hy(d,0,d.def.nodes.length-1,i,r)}var p=l.template._projectedViews;if(p)for(h=0;h<p.length;h++){var f=p[h];hy(f,0,f.def.nodes.length-1,i,r)}}(s.childMatchedQueries&i.filterId)!==i.filterId&&(o+=s.childCount)}return r}function dy(e,t,n){if(null!=n)switch(n){case 1:return og(e,t.nodeIndex).renderElement;case 0:return new fl(og(e,t.nodeIndex).renderElement);case 2:return og(e,t.nodeIndex).template;case 3:return og(e,t.nodeIndex).viewContainer;case 4:return sg(e,t.nodeIndex).instance}}function uy(e,t){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:t}}}function py(e,t,n){var i=Ng(e,t,n);i&&Vg(e,n.ngContent.index,1,i,null,void 0)}function fy(e,t){return yy(128,e,new Array(t+1))}function gy(e,t){return yy(32,e,new Array(t))}function my(e,t){for(var n=Object.keys(t),i=n.length,r=new Array(i),o=0;o<i;o++){var s=n[o];r[t[s]]=s}return yy(64,e,r)}function yy(e,t,n){for(var i=new Array(n.length),r=0;r<n.length;r++){var o=n[r];i[r]={flags:8,name:o,ns:null,nonMinifiedName:o,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:i,bindingFlags:Qg(i),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function vy(e,t,n){for(var i=new Array(n.length-1),r=1;r<n.length;r++)i[r-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[r]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:i,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function by(e,t,n){var i,r=e.renderer;i=r.createText(n.text.prefix);var o=Ng(e,t,n);return o&&r.appendChild(o,i),{renderText:i}}function wy(e,t){return(null!=e?e.toString():"")+t.suffix}function Cy(e,t,n,i){for(var r=0,o=0,s=0,a=0,l=0,c=null,h=null,d=!1,u=!1,p=null,f=0;f<t.length;f++){var g=t[f];if(g.nodeIndex=f,g.parent=c,g.bindingIndex=r,g.outputIndex=o,g.renderParent=h,s|=g.flags,l|=g.matchedQueryIds,g.element){var m=g.element;m.publicProviders=c?c.element.publicProviders:Object.create(null),m.allProviders=m.publicProviders,d=!1,u=!1,g.element.template&&(l|=g.element.template.nodeMatchedQueries)}if(Ay(c,g,t.length),r+=g.bindings.length,o+=g.outputs.length,!h&&3&g.flags&&(p=g),20224&g.flags){d||(d=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);var y=0!=(32768&g.flags);0==(8192&g.flags)||y?c.element.publicProviders[mg(g.provider.token)]=g:(u||(u=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[mg(g.provider.token)]=g),y&&(c.element.componentProvider=g)}if(c?(c.childFlags|=g.flags,c.directChildFlags|=g.flags,c.childMatchedQueries|=g.matchedQueryIds,g.element&&g.element.template&&(c.childMatchedQueries|=g.element.template.nodeMatchedQueries)):a|=g.flags,g.childCount>0)c=g,xy(g)||(h=g);else for(;c&&f===c.nodeIndex+c.childCount;){var v=c.parent;v&&(v.childFlags|=c.childFlags,v.childMatchedQueries|=c.childMatchedQueries),h=(c=v)&&xy(c)?c.renderParent:c}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:l,flags:e,nodes:t,updateDirectives:n||fg,updateRenderer:i||fg,handleEvent:function(e,n,i,r){return t[n].element.handleEvent(e,i,r)},bindingCount:r,outputCount:o,lastRenderRootNode:p}}function xy(e){return 0!=(1&e.flags)&&null===e.element.name}function Ay(e,t,n){var i=t.element&&t.element.template;if(i){if(!i.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(i.lastRenderRootNode&&16777216&i.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+t.nodeIndex+"!")}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+t.nodeIndex+"!");if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+t.nodeIndex+"!");if(134217728&t.flags&&e)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+t.nodeIndex+"!")}if(t.childCount){var r=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=r&&t.nodeIndex+t.childCount>r)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+t.nodeIndex+"!")}}function Sy(e,t,n,i){var r=Iy(e.root,e.renderer,e,t,n);return Dy(r,e.component,i),ky(r),r}function Oy(e,t,n){var i=Iy(e,e.renderer,null,null,t);return Dy(i,n,n),ky(i),i}function Ey(e,t,n,i){var r,o=t.element.componentRendererType;return r=o?e.root.rendererFactory.createRenderer(i,o):e.root.renderer,Iy(e.root,r,e,t.element.componentProvider,n)}function Iy(e,t,n,i,r){var o=new Array(r.nodes.length),s=r.outputCount?new Array(r.outputCount):null;return{def:r,parent:n,viewContainerParent:null,parentNodeDef:i,context:null,component:null,nodes:o,state:13,root:e,renderer:t,oldValues:new Array(r.bindingCount),disposables:s,initIndex:-1}}function Dy(e,t,n){e.component=t,e.context=n}function ky(e){var t;Mg(e)&&(t=og(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);for(var n=e.def,i=e.nodes,r=0;r<n.nodes.length;r++){var o=n.nodes[r];hg.setCurrentNode(e,r);var s=void 0;switch(201347067&o.flags){case 1:var a=tm(e,t,o),l=void 0;if(33554432&o.flags){var c=Fg(o.element.componentView);l=hg.createComponentView(e,o,c,a)}nm(e,l,o,a),s={renderElement:a,componentView:l,viewContainer:null,template:o.element.template?Im(e,o):void 0},16777216&o.flags&&(s.viewContainer=Am(e,o,s));break;case 2:s=by(e,t,o);break;case 512:case 1024:case 2048:case 256:(s=i[r])||4096&o.flags||(s={instance:Ym(e,o)});break;case 16:s={instance:Xm(e,o)};break;case 16384:(s=i[r])||(s={instance:Zm(e,o)}),32768&o.flags&&Dy(og(e,o.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new ef;break;case 8:py(e,t,o),s=void 0}i[r]=s}By(e,Ny.CreateViewNodes),Vy(e,201326592,268435456,0)}function Py(e){jy(e),hg.updateDirectives(e,1),Fy(e,Ny.CheckNoChanges),hg.updateRenderer(e,1),By(e,Ny.CheckNoChanges),e.state&=-97}function Ty(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,ng(e,0,256),jy(e),hg.updateDirectives(e,0),Fy(e,Ny.CheckAndUpdate),Vy(e,67108864,536870912,0);var t=ng(e,256,512);ry(e,2097152|(t?1048576:0)),hg.updateRenderer(e,0),By(e,Ny.CheckAndUpdate),Vy(e,134217728,536870912,0),ry(e,8388608|((t=ng(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,ng(e,768,1024)}function My(e,t,n,r,o,s,a,l,c,h,d,u,p){return 0===n?function(e,t,n,i,r,o,s,a,l,c,h,d){switch(201347067&t.flags){case 1:return function(e,t,n,i,r,o,s,a,l,c,h,d){var u=t.bindings.length,p=!1;return u>0&&rm(e,t,0,n)&&(p=!0),u>1&&rm(e,t,1,i)&&(p=!0),u>2&&rm(e,t,2,r)&&(p=!0),u>3&&rm(e,t,3,o)&&(p=!0),u>4&&rm(e,t,4,s)&&(p=!0),u>5&&rm(e,t,5,a)&&(p=!0),u>6&&rm(e,t,6,l)&&(p=!0),u>7&&rm(e,t,7,c)&&(p=!0),u>8&&rm(e,t,8,h)&&(p=!0),u>9&&rm(e,t,9,d)&&(p=!0),p}(e,t,n,i,r,o,s,a,l,c,h,d);case 2:return function(e,t,n,i,r,o,s,a,l,c,h,d){var u=!1,p=t.bindings,f=p.length;if(f>0&&Ag(e,t,0,n)&&(u=!0),f>1&&Ag(e,t,1,i)&&(u=!0),f>2&&Ag(e,t,2,r)&&(u=!0),f>3&&Ag(e,t,3,o)&&(u=!0),f>4&&Ag(e,t,4,s)&&(u=!0),f>5&&Ag(e,t,5,a)&&(u=!0),f>6&&Ag(e,t,6,l)&&(u=!0),f>7&&Ag(e,t,7,c)&&(u=!0),f>8&&Ag(e,t,8,h)&&(u=!0),f>9&&Ag(e,t,9,d)&&(u=!0),u){var g=t.text.prefix;f>0&&(g+=wy(n,p[0])),f>1&&(g+=wy(i,p[1])),f>2&&(g+=wy(r,p[2])),f>3&&(g+=wy(o,p[3])),f>4&&(g+=wy(s,p[4])),f>5&&(g+=wy(a,p[5])),f>6&&(g+=wy(l,p[6])),f>7&&(g+=wy(c,p[7])),f>8&&(g+=wy(h,p[8])),f>9&&(g+=wy(d,p[9]));var m=rg(e,t.nodeIndex).renderText;e.renderer.setValue(m,g)}return u}(e,t,n,i,r,o,s,a,l,c,h,d);case 16384:return function(e,t,n,i,r,o,s,a,l,c,h,d){var u=sg(e,t.nodeIndex),p=u.instance,f=!1,g=void 0,m=t.bindings.length;return m>0&&xg(e,t,0,n)&&(f=!0,g=iy(e,u,t,0,n,g)),m>1&&xg(e,t,1,i)&&(f=!0,g=iy(e,u,t,1,i,g)),m>2&&xg(e,t,2,r)&&(f=!0,g=iy(e,u,t,2,r,g)),m>3&&xg(e,t,3,o)&&(f=!0,g=iy(e,u,t,3,o,g)),m>4&&xg(e,t,4,s)&&(f=!0,g=iy(e,u,t,4,s,g)),m>5&&xg(e,t,5,a)&&(f=!0,g=iy(e,u,t,5,a,g)),m>6&&xg(e,t,6,l)&&(f=!0,g=iy(e,u,t,6,l,g)),m>7&&xg(e,t,7,c)&&(f=!0,g=iy(e,u,t,7,c,g)),m>8&&xg(e,t,8,h)&&(f=!0,g=iy(e,u,t,8,h,g)),m>9&&xg(e,t,9,d)&&(f=!0,g=iy(e,u,t,9,d,g)),g&&p.ngOnChanges(g),65536&t.flags&&ig(e,256,t.nodeIndex)&&p.ngOnInit(),262144&t.flags&&p.ngDoCheck(),f}(e,t,n,i,r,o,s,a,l,c,h,d);case 32:case 64:case 128:return function(e,t,n,i,r,o,s,a,l,c,h,d){var u=t.bindings,p=!1,f=u.length;if(f>0&&Ag(e,t,0,n)&&(p=!0),f>1&&Ag(e,t,1,i)&&(p=!0),f>2&&Ag(e,t,2,r)&&(p=!0),f>3&&Ag(e,t,3,o)&&(p=!0),f>4&&Ag(e,t,4,s)&&(p=!0),f>5&&Ag(e,t,5,a)&&(p=!0),f>6&&Ag(e,t,6,l)&&(p=!0),f>7&&Ag(e,t,7,c)&&(p=!0),f>8&&Ag(e,t,8,h)&&(p=!0),f>9&&Ag(e,t,9,d)&&(p=!0),p){var g=ag(e,t.nodeIndex),m=void 0;switch(201347067&t.flags){case 32:m=new Array(u.length),f>0&&(m[0]=n),f>1&&(m[1]=i),f>2&&(m[2]=r),f>3&&(m[3]=o),f>4&&(m[4]=s),f>5&&(m[5]=a),f>6&&(m[6]=l),f>7&&(m[7]=c),f>8&&(m[8]=h),f>9&&(m[9]=d);break;case 64:m={},f>0&&(m[u[0].name]=n),f>1&&(m[u[1].name]=i),f>2&&(m[u[2].name]=r),f>3&&(m[u[3].name]=o),f>4&&(m[u[4].name]=s),f>5&&(m[u[5].name]=a),f>6&&(m[u[6].name]=l),f>7&&(m[u[7].name]=c),f>8&&(m[u[8].name]=h),f>9&&(m[u[9].name]=d);break;case 128:var y=n;switch(f){case 1:m=y.transform(n);break;case 2:m=y.transform(i);break;case 3:m=y.transform(i,r);break;case 4:m=y.transform(i,r,o);break;case 5:m=y.transform(i,r,o,s);break;case 6:m=y.transform(i,r,o,s,a);break;case 7:m=y.transform(i,r,o,s,a,l);break;case 8:m=y.transform(i,r,o,s,a,l,c);break;case 9:m=y.transform(i,r,o,s,a,l,c,h);break;case 10:m=y.transform(i,r,o,s,a,l,c,h,d)}}g.value=m}return p}(e,t,n,i,r,o,s,a,l,c,h,d);default:throw"unreachable"}}(e,t,r,o,s,a,l,c,h,d,u,p):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){for(var i=!1,r=0;r<n.length;r++)rm(e,t,r,n[r])&&(i=!0);return i}(e,t,n);case 2:return function(e,t,n){for(var i=t.bindings,r=!1,o=0;o<n.length;o++)Ag(e,t,o,n[o])&&(r=!0);if(r){var s="";for(o=0;o<n.length;o++)s+=wy(n[o],i[o]);s=t.text.prefix+s;var a=rg(e,t.nodeIndex).renderText;e.renderer.setValue(a,s)}return r}(e,t,n);case 16384:return function(e,t,n){for(var i=sg(e,t.nodeIndex),r=i.instance,o=!1,s=void 0,a=0;a<n.length;a++)xg(e,t,a,n[a])&&(o=!0,s=iy(e,i,t,a,n[a],s));return s&&r.ngOnChanges(s),65536&t.flags&&ig(e,256,t.nodeIndex)&&r.ngOnInit(),262144&t.flags&&r.ngDoCheck(),o}(e,t,n);case 32:case 64:case 128:return function(e,t,n){for(var r=t.bindings,o=!1,s=0;s<n.length;s++)Ag(e,t,s,n[s])&&(o=!0);if(o){var a=ag(e,t.nodeIndex),l=void 0;switch(201347067&t.flags){case 32:l=n;break;case 64:for(l={},s=0;s<n.length;s++)l[r[s].name]=n[s];break;case 128:var c=n[0],h=n.slice(1);l=c.transform.apply(c,Object(i.g)(h))}a.value=l}return o}(e,t,n);default:throw"unreachable"}}(e,t,r)}function jy(e){var t=e.def;if(4&t.nodeFlags)for(var n=0;n<t.nodes.length;n++){var i=t.nodes[n];if(4&i.flags){var r=og(e,n).template._projectedViews;if(r)for(var o=0;o<r.length;o++){var s=r[o];s.state|=32,Eg(s,e)}}else 0==(4&i.childFlags)&&(n+=i.childCount)}}function Ry(e,t,n,i,r,o,s,a,l,c,h,d,u){return 0===n?function(e,t,n,i,r,o,s,a,l,c,h,d){var u=t.bindings.length;u>0&&Sg(e,t,0,n),u>1&&Sg(e,t,1,i),u>2&&Sg(e,t,2,r),u>3&&Sg(e,t,3,o),u>4&&Sg(e,t,4,s),u>5&&Sg(e,t,5,a),u>6&&Sg(e,t,6,l),u>7&&Sg(e,t,7,c),u>8&&Sg(e,t,8,h),u>9&&Sg(e,t,9,d)}(e,t,i,r,o,s,a,l,c,h,d,u):function(e,t,n){for(var i=0;i<n.length;i++)Sg(e,t,i,n[i])}(e,t,i),!1}function Ly(e,t){if(lg(e,t.nodeIndex).dirty)throw dg(hg.createDebugContext(e,t.nodeIndex),"Query "+t.query.id+" not dirty","Query "+t.query.id+" dirty",0!=(1&e.state))}function _y(e){if(!(128&e.state)){if(Fy(e,Ny.Destroy),By(e,Ny.Destroy),ry(e,131072),e.disposables)for(var t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(16&e.state){var t=Dg(e);if(t){var n=t.template._projectedViews;n&&(ym(n,n.indexOf(e)),hg.dirtyParentQueries(e))}}}(e),e.renderer.destroyNode&&function(e){for(var t=e.def.nodes.length,n=0;n<t;n++){var i=e.def.nodes[n];1&i.flags?e.renderer.destroyNode(og(e,n).renderElement):2&i.flags?e.renderer.destroyNode(rg(e,n).renderText):(67108864&i.flags||134217728&i.flags)&&lg(e,n).destroy()}}(e),Mg(e)&&e.renderer.destroy(),e.state|=128}}var Ny=function(e){return e[e.CreateViewNodes=0]="CreateViewNodes",e[e.CheckNoChanges=1]="CheckNoChanges",e[e.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate=3]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",e[e.Destroy=5]="Destroy",e}({});function By(e,t){var n=e.def;if(33554432&n.nodeFlags)for(var i=0;i<n.nodes.length;i++){var r=n.nodes[i];33554432&r.flags?zy(og(e,i).componentView,t):0==(33554432&r.childFlags)&&(i+=r.childCount)}}function Fy(e,t){var n=e.def;if(16777216&n.nodeFlags)for(var i=0;i<n.nodes.length;i++){var r=n.nodes[i];if(16777216&r.flags)for(var o=og(e,i).viewContainer._embeddedViews,s=0;s<o.length;s++)zy(o[s],t);else 0==(16777216&r.childFlags)&&(i+=r.childCount)}}function zy(e,t){var n=e.state;switch(t){case Ny.CheckNoChanges:0==(128&n)&&(12==(12&n)?Py(e):64&n&&Hy(e,Ny.CheckNoChangesProjectedViews));break;case Ny.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Py(e):64&n&&Hy(e,t));break;case Ny.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Ty(e):64&n&&Hy(e,Ny.CheckAndUpdateProjectedViews));break;case Ny.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Ty(e):64&n&&Hy(e,t));break;case Ny.Destroy:_y(e);break;case Ny.CreateViewNodes:ky(e)}}function Hy(e,t){Fy(e,t),By(e,t)}function Vy(e,t,n,i){if(e.def.nodeFlags&t&&e.def.nodeFlags&n)for(var r=e.def.nodes.length,o=0;o<r;o++){var s=e.def.nodes[o];if(s.flags&t&&s.flags&n)switch(hg.setCurrentNode(e,s.nodeIndex),i){case 0:cy(e,s);break;case 1:Ly(e,s)}s.childFlags&t&&s.childFlags&n||(o+=s.childCount)}}var Uy=!1;function Wy(){if(!Uy){Uy=!0;var e=Fl()?{setCurrentNode:pv,createRootView:qy,createEmbeddedView:Yy,createComponentView:Xy,createNgModuleRef:Zy,overrideProvider:ev,overrideComponentView:tv,clearOverrides:nv,checkAndUpdateView:sv,checkNoChangesView:av,destroyView:lv,createDebugContext:function(e,t){return new Cv(e,t)},handleEvent:fv,updateDirectives:gv,updateRenderer:mv}:{setCurrentNode:function(){},createRootView:Gy,createEmbeddedView:Sy,createComponentView:Ey,createNgModuleRef:Rm,overrideProvider:fg,overrideComponentView:fg,clearOverrides:fg,checkAndUpdateView:Ty,checkNoChangesView:Py,destroyView:_y,createDebugContext:function(e,t){return new Cv(e,t)},handleEvent:function(e,t,n,i){return e.def.handleEvent(e,t,n,i)},updateDirectives:function(e,t){return e.def.updateDirectives(0===t?rv:ov,e)},updateRenderer:function(e,t){return e.def.updateRenderer(0===t?rv:ov,e)}};hg.setCurrentNode=e.setCurrentNode,hg.createRootView=e.createRootView,hg.createEmbeddedView=e.createEmbeddedView,hg.createComponentView=e.createComponentView,hg.createNgModuleRef=e.createNgModuleRef,hg.overrideProvider=e.overrideProvider,hg.overrideComponentView=e.overrideComponentView,hg.clearOverrides=e.clearOverrides,hg.checkAndUpdateView=e.checkAndUpdateView,hg.checkNoChangesView=e.checkNoChangesView,hg.destroyView=e.destroyView,hg.resolveDep=ty,hg.createDebugContext=e.createDebugContext,hg.handleEvent=e.handleEvent,hg.updateDirectives=e.updateDirectives,hg.updateRenderer=e.updateRenderer,hg.dirtyParentQueries=ly}}function Gy(e,t,n,i,r,o){var s=r.injector.get(Cl);return Oy(Qy(e,r,s,t,n),i,o)}function qy(e,t,n,i,r,o){var s=r.injector.get(Cl),a=Qy(e,r,new Ov(s),t,n),l=iv(i);return Av(uv.create,Oy,null,[a,l,o])}function Qy(e,t,n,i,r){var o=t.injector.get(Il),s=t.injector.get(Su),a=n.createRenderer(null,null);return{ngModule:t,injector:e,projectableNodes:i,selectorOrNode:r,sanitizer:o,rendererFactory:n,renderer:a,errorHandler:s}}function Yy(e,t,n,i){var r=iv(n);return Av(uv.create,Sy,null,[e,t,r,i])}function Xy(e,t,n,i){return n=$y.get(t.element.componentProvider.provider.token)||iv(n),Av(uv.create,Ey,null,[e,t,n,i])}function Zy(e,t,n,i){return Rm(e,t,n,function(e){var t=function(e){var t=!1,n=!1;return 0===Ky.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach(function(e){var i=Ky.get(e.token);3840&e.flags&&i&&(t=!0,n=n||i.deprecatedBehavior)}),e.modules.forEach(function(e){Jy.forEach(function(i,r){C(r).providedIn===e&&(t=!0,n=n||i.deprecatedBehavior)})}),{hasOverrides:t,hasDeprecatedOverrides:n})}(e),n=t.hasDeprecatedOverrides;return t.hasOverrides?(function(e){for(var t=0;t<e.providers.length;t++){var i=e.providers[t];n&&(i.flags|=4096);var r=Ky.get(i.token);r&&(i.flags=-3841&i.flags|r.flags,i.deps=_g(r.deps),i.value=r.value)}if(Jy.size>0){var o=new Set(e.modules);Jy.forEach(function(t,i){if(o.has(C(i).providedIn)){var r={token:i,flags:t.flags|(n?4096:0),deps:_g(t.deps),value:t.value,index:e.providers.length};e.providers.push(r),e.providersByKey[mg(i)]=r}})}}(e=e.factory(function(){return fg})),e):e}(i))}var Ky=new Map,Jy=new Map,$y=new Map;function ev(e){var t;Ky.set(e.token,e),"function"==typeof e.token&&(t=C(e.token))&&"function"==typeof t.providedIn&&Jy.set(e.token,e)}function tv(e,t){var n=Fg(wm(t)),i=Fg(n.nodes[0].element.componentView);$y.set(e,i)}function nv(){Ky.clear(),Jy.clear(),$y.clear()}function iv(e){if(0===Ky.size)return e;var t=function(e){for(var t=[],n=null,i=0;i<e.nodes.length;i++){var r=e.nodes[i];1&r.flags&&(n=r),n&&3840&r.flags&&Ky.has(r.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory(function(){return fg});for(var n=0;n<t.length;n++)i(e,t[n]);return e;function i(e,t){for(var n=t+1;n<e.nodes.length;n++){var i=e.nodes[n];if(1&i.flags)return;if(3840&i.flags){var r=i.provider,o=Ky.get(r.token);o&&(i.flags=-3841&i.flags|o.flags,r.deps=_g(o.deps),r.value=o.value)}}}}function rv(e,t,n,i,r,o,s,a,l,c,h,d,u){var p=e.def.nodes[t];return My(e,p,n,i,r,o,s,a,l,c,h,d,u),224&p.flags?ag(e,t).value:void 0}function ov(e,t,n,i,r,o,s,a,l,c,h,d,u){var p=e.def.nodes[t];return Ry(e,p,n,i,r,o,s,a,l,c,h,d,u),224&p.flags?ag(e,t).value:void 0}function sv(e){return Av(uv.detectChanges,Ty,null,[e])}function av(e){return Av(uv.checkNoChanges,Py,null,[e])}function lv(e){return Av(uv.destroy,_y,null,[e])}var cv,hv,dv,uv=function(e){return e[e.create=0]="create",e[e.detectChanges=1]="detectChanges",e[e.checkNoChanges=2]="checkNoChanges",e[e.destroy=3]="destroy",e[e.handleEvent=4]="handleEvent",e}({});function pv(e,t){hv=e,dv=t}function fv(e,t,n,i){return pv(e,t),Av(uv.handleEvent,e.def.handleEvent,null,[e,t,n,i])}function gv(e,t){if(128&e.state)throw pg(uv[cv]);return pv(e,bv(e,0)),e.def.updateDirectives(function(e,n,i){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var s=e.def.nodes[n];return 0===t?yv(e,s,i,r):vv(e,s,i,r),16384&s.flags&&pv(e,bv(e,n)),224&s.flags?ag(e,s.nodeIndex).value:void 0},e)}function mv(e,t){if(128&e.state)throw pg(uv[cv]);return pv(e,wv(e,0)),e.def.updateRenderer(function(e,n,i){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var s=e.def.nodes[n];return 0===t?yv(e,s,i,r):vv(e,s,i,r),3&s.flags&&pv(e,wv(e,n)),224&s.flags?ag(e,s.nodeIndex).value:void 0},e)}function yv(e,t,n,r){if(My.apply(void 0,Object(i.g)([e,t,n],r))){var o=1===n?r[0]:r;if(16384&t.flags){for(var s={},a=0;a<t.bindings.length;a++){var l=t.bindings[a],c=o[a];8&l.flags&&(s[(p=l.nonMinifiedName,"ng-reflect-"+p.replace(/[$@]/g,"_").replace(si,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"-"+e[1].toLowerCase()}))]=ai(c))}var h=t.parent,d=og(e,h.nodeIndex).renderElement;if(h.element.name)for(var u in s)null!=(c=s[u])?e.renderer.setAttribute(d,u,c):e.renderer.removeAttribute(d,u);else e.renderer.setValue(d,"bindings="+JSON.stringify(s,null,2))}}var p}function vv(e,t,n,r){Ry.apply(void 0,Object(i.g)([e,t,n],r))}function bv(e,t){for(var n=t;n<e.def.nodes.length;n++){var i=e.def.nodes[n];if(16384&i.flags&&i.bindings&&i.bindings.length)return n}return null}function wv(e,t){for(var n=t;n<e.def.nodes.length;n++){var i=e.def.nodes[n];if(3&i.flags&&i.bindings&&i.bindings.length)return n}return null}var Cv=function(){function e(e,t){this.view=e,this.nodeIndex=t,null==t&&(this.nodeIndex=t=0),this.nodeDef=e.def.nodes[t];for(var n=this.nodeDef,i=e;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&i;)n=kg(i),i=i.parent;this.elDef=n,this.elView=i}return Object.defineProperty(e.prototype,"elOrCompView",{get:function(){return og(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return km(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){var e=[];if(this.elDef)for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){var e={};if(this.elDef){xv(this.elView,this.elDef,e);for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&xv(this.elView,n,e),t+=n.childCount}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentRenderElement",{get:function(){var e=function(e){for(;e&&!Mg(e);)e=e.parent;return e.parent?og(e.parent,kg(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?Pg(this.view,this.nodeDef):Pg(this.elView,this.elDef)},enumerable:!0,configurable:!0}),e.prototype.logError=function(e){for(var t,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];2&this.nodeDef.flags?(t=this.view.def,n=this.nodeDef.nodeIndex):(t=this.elView.def,n=this.elDef.nodeIndex);var s=function(e,t){for(var n=-1,i=0;i<=t;i++)3&e.nodes[i].flags&&n++;return n}(t,n),a=-1;t.factory(function(){var t;return++a===s?(t=e.error).bind.apply(t,Object(i.g)([e],r)):fg}),a<s&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error.apply(e,Object(i.g)(r)))},e}();function xv(e,t,n){for(var i in t.references)n[i]=dy(e,t,t.references[i])}function Av(e,t,n,i){var r=cv,o=hv,s=dv;try{cv=e;var a=t.apply(n,i);return hv=o,dv=s,cv=r,a}catch(l){if(Cu(l)||!hv)throw l;throw function(e,t){return e instanceof Error||(e=new Error(e.toString())),ug(e,t),e}(l,Sv())}}function Sv(){return hv?new Cv(hv,dv):null}var Ov=function(){function e(e){this.delegate=e}return e.prototype.createRenderer=function(e,t){return new Ev(this.delegate.createRenderer(e,t))},e.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},e.prototype.end=function(){this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},e}(),Ev=function(){function e(e){this.delegate=e,this.debugContextFactory=Sv,this.data=this.delegate.data}return e.prototype.createDebugContext=function(e){return this.debugContextFactory(e)},e.prototype.destroyNode=function(e){!function(e){Af.delete(e.nativeNode)}(Of(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)},e.prototype.destroy=function(){this.delegate.destroy()},e.prototype.createElement=function(e,t){var n=this.delegate.createElement(e,t),i=this.createDebugContext(n);if(i){var r=new mf(n,null,i);r.name=e,Ef(r)}return n},e.prototype.createComment=function(e){var t=this.delegate.createComment(e),n=this.createDebugContext(t);return n&&Ef(new gf(t,null,n)),t},e.prototype.createText=function(e){var t=this.delegate.createText(e),n=this.createDebugContext(t);return n&&Ef(new gf(t,null,n)),t},e.prototype.appendChild=function(e,t){var n=Of(e),i=Of(t);n&&i&&n instanceof mf&&n.addChild(i),this.delegate.appendChild(e,t)},e.prototype.insertBefore=function(e,t,n){var i=Of(e),r=Of(t),o=Of(n);i&&r&&i instanceof mf&&i.insertBefore(o,r),this.delegate.insertBefore(e,t,n)},e.prototype.removeChild=function(e,t){var n=Of(e),i=Of(t);n&&i&&n instanceof mf&&n.removeChild(i),this.delegate.removeChild(e,t)},e.prototype.selectRootElement=function(e,t){var n=this.delegate.selectRootElement(e,t),i=Sv();return i&&Ef(new mf(n,null,i)),n},e.prototype.setAttribute=function(e,t,n,i){var r=Of(e);r&&r instanceof mf&&(r.attributes[i?i+":"+t:t]=n),this.delegate.setAttribute(e,t,n,i)},e.prototype.removeAttribute=function(e,t,n){var i=Of(e);i&&i instanceof mf&&(i.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)},e.prototype.addClass=function(e,t){var n=Of(e);n&&n instanceof mf&&(n.classes[t]=!0),this.delegate.addClass(e,t)},e.prototype.removeClass=function(e,t){var n=Of(e);n&&n instanceof mf&&(n.classes[t]=!1),this.delegate.removeClass(e,t)},e.prototype.setStyle=function(e,t,n,i){var r=Of(e);r&&r instanceof mf&&(r.styles[t]=n),this.delegate.setStyle(e,t,n,i)},e.prototype.removeStyle=function(e,t,n){var i=Of(e);i&&i instanceof mf&&(i.styles[t]=null),this.delegate.removeStyle(e,t,n)},e.prototype.setProperty=function(e,t,n){var i=Of(e);i&&i instanceof mf&&(i.properties[t]=n),this.delegate.setProperty(e,t,n)},e.prototype.listen=function(e,t,n){if("string"!=typeof e){var i=Of(e);i&&i.listeners.push(new ff(t,n))}return this.delegate.listen(e,t,n)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setValue=function(e,t){return this.delegate.setValue(e,t)},e}();function Iv(e){return Wy(),hg.overrideProvider(e)}function Dv(e,t){return Wy(),hg.overrideComponentView(e,t)}function kv(){return Wy(),hg.clearOverrides()}function Pv(e,t,n){return new Tv(e,t,n)}var Tv=function(e){function t(t,n,i){var r=e.call(this)||this;return r.moduleType=t,r._bootstrapComponents=n,r._ngModuleDefFactory=i,r}return Object(i.c)(t,e),t.prototype.create=function(e){Wy();var t=function(e){var t=Array.from(e.providers),n=Array.from(e.modules),i={};for(var r in e.providersByKey)i[r]=e.providersByKey[r];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:i}}(Fg(this._ngModuleDefFactory));return hg.createNgModuleRef(this.moduleType,e||fa.NULL,this._bootstrapComponents,t)},t}(ll)},Cl5A:function(e,t,n){var i=n("CUme"),r=n("Yvos");e.exports=h;var o,s=/\n/g,a=/\\n/g;function l(){}function c(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}}function h(e){if(i.call(this,e),this.query=this.query||{},!o){var t=c();o=t.___eio=t.___eio||[]}this.index=o.length;var n=this;o.push(function(e){n.onData(e)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){n.script&&(n.script.onerror=l)},!1)}r(h,i),h.prototype.supportsBinary=!1,h.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},h.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},h.prototype.doWrite=function(e,t){var n=this;if(!this.form){var i,r=document.createElement("form"),o=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=l,r.method="POST",r.setAttribute("accept-charset","utf-8"),o.name="d",r.appendChild(o),document.body.appendChild(r),this.form=r,this.area=o}function c(){h(),t()}function h(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{i=document.createElement('<iframe src="javascript:0" name="'+n.iframeId+'">')}catch(e){(i=document.createElement("iframe")).name=n.iframeId,i.src="javascript:0"}i.id=n.iframeId,n.form.appendChild(i),n.iframe=i}this.form.action=this.uri(),h(),e=e.replace(a,"\\\n"),this.area.value=e.replace(s,"\\n");try{this.form.submit()}catch(d){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&c()}:this.iframe.onload=c}},DKTb:function(e,t,n){"use strict";function i(e){setTimeout(function(){throw e})}n.d(t,"a",function(){return i})},DYXb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("CcnG");t.SimpleModalWrapperComponent=function(){function e(e){this.resolver=e,this.modalClasses="modal fade-anim"}return e.prototype.addComponent=function(e){var t=this.resolver.resolveComponentFactory(e),n=i.ReflectiveInjector.fromResolvedProviders([],this.viewContainer.injector),r=t.create(n);return this.viewContainer.insert(r.hostView),this.content=r.instance,this.content.wrapper=this.wrapper,this.content},e.prototype.onClickOutsideModalContent=function(e,t){this.clickOutsideCallback=t;var n=this.wrapper.nativeElement;n.querySelector(":first-child").addEventListener("click",this.stopEventPropagation),n.addEventListener("click",this.clickOutsideCallback,!1)},e.prototype.ngOnDestroy=function(){if(this.clickOutsideCallback){var e=this.wrapper.nativeElement;e.querySelector(":first-child").removeEventListener("click",this.stopEventPropagation),e.removeEventListener("click",this.clickOutsideCallback,!1),this.clickOutsideCallback=null}},e.prototype.stopEventPropagation=function(e){e.stopPropagation()},e.decorators=[{type:i.Component,args:[{selector:"simple-modal-wrapper",template:'\n    <div #wrapper [ngClass]="modalClasses" [ngStyle]="{display:\'block\'}" role="dialog">\n        <ng-template #viewContainer></ng-template>\n    </div>\n'}]}],e.propDecorators={viewContainer:[{type:i.ViewChild,args:["viewContainer",{read:i.ViewContainerRef}]}],wrapper:[{type:i.ViewChild,args:["wrapper"]}]},e}()},DtyJ:function(e,t,n){"use strict";n.r(t);var i=n("6blF"),r=n("KhEm"),o=n("mrSG"),s=n("FFOo"),a=n("pugT"),l=n("K9Ia"),c=function(e){function t(t,n,i){var r=e.call(this)||this;return r.key=t,r.groupSubject=n,r.refCountSubscription=i,r}return o.c(t,e),t.prototype._subscribe=function(e){var t=new a.a,n=this.refCountSubscription,i=this.groupSubject;return n&&!n.closed&&t.add(new h(n)),t.add(i.subscribe(e)),t},t}(i.a),h=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return o.c(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(a.a),d=n("xTla"),u=n("26FU"),p=n("h9Dq"),f=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return o.c(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,i):t.flush(this)},t}(p.a),g=n("CS9Q"),m=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.c(t,e),t}(g.a))(f),y=n("60iU"),v=function(e){function t(t,n,i){void 0===i&&(i=0);var r=e.call(this,t)||this;return r.scheduler=n,r.delay=i,r}return o.c(t,e),t.dispatch=function(e){e.notification.observe(e.destination),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new b(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(y.a.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(y.a.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(y.a.createComplete()),this.unsubscribe()},t}(s.a),b=function(){return function(e,t){this.notification=e,this.destination=t}}(),w=n("8g8A"),C=n("uMaO"),x=function(e){function t(t,n,i){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this)||this;return r.scheduler=i,r._events=[],r._infiniteTimeWindow=!1,r._bufferSize=t<1?1:t,r._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(r._infiniteTimeWindow=!0,r.next=r.nextInfiniteTimeWindow):r.next=r.nextTimeWindow,r}return o.c(t,e),t.prototype.nextInfiniteTimeWindow=function(t){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new A(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,o=i.length;if(this.closed)throw new w.a;if(this.isStopped||this.hasError?t=a.a.EMPTY:(this.observers.push(e),t=new C.a(this,e)),r&&e.add(e=new v(e,r)),n)for(var s=0;s<o&&!e.closed;s++)e.next(i[s]);else for(s=0;s<o&&!e.closed;s++)e.next(i[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||m).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,i=this._events,r=i.length,o=0;o<r&&!(e-i[o].time<n);)o++;return r>t&&(o=Math.max(o,r-t)),o>0&&i.splice(0,o),i},t}(l.a),A=function(){return function(e,t){this.time=e,this.value=t}}(),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return o.c(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),a.a.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),a.a.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(l.a),O=1,E={},I=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return o.c(t,e),t.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),null!==i&&i>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t.scheduled||(t.scheduled=(r=t.flush.bind(t,null),o=O++,E[o]=r,Promise.resolve().then(function(){return function(e){var t=E[e];t&&t()}(o)}),o)));var r,o},t.prototype.recycleAsyncId=function(t,n,i){if(void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,i);0===t.actions.length&&(delete E[n],t.scheduled=void 0)},t}(p.a),D=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.c(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,i=-1,r=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++i<r&&(e=n.shift()));if(this.active=!1,t){for(;++i<r&&(e=n.shift());)e.unsubscribe();throw t}},t}(g.a))(I),k=n("T1DM"),P=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return o.c(t,e),t.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),null!==i&&i>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(function(){return t.flush(null)})))},t.prototype.recycleAsyncId=function(t,n,i){if(void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,i);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(p.a),T=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.c(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,i=-1,r=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++i<r&&(e=n.shift()));if(this.active=!1,t){for(;++i<r&&(e=n.shift());)e.unsubscribe();throw t}},t}(g.a))(P),M=function(e){function t(t,n){void 0===t&&(t=j),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this,t,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return o.c(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,i=this.maxFrames;(t=n.shift())&&(this.frame=t.delay)<=i&&!(e=t.execute(t.state,t.delay)););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(g.a),j=function(e){function t(t,n,i){void 0===i&&(i=t.index+=1);var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.index=i,r.active=!0,r.index=t.index=i,r}return o.c(t,e),t.prototype.schedule=function(n,i){if(void 0===i&&(i=0),!this.id)return e.prototype.schedule.call(this,n,i);this.active=!1;var r=new t(this.scheduler,this.work);return this.add(r),r.schedule(n,i)},t.prototype.requestAsyncId=function(e,n,i){void 0===i&&(i=0),this.delay=e.frame+i;var r=e.actions;return r.push(this),r.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(p.a),R=n("siIJ"),L=n("y3By"),_=n("+umK"),N=n("mChF");function B(e){return!!e&&(e instanceof i.a||"function"==typeof e.lift&&"function"==typeof e.subscribe)}var F=n("b7mW"),z=n("3fWJ"),H=n("awvh");function V(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}V.prototype=Object.create(Error.prototype);var U=V,W=n("67Y/"),G=n("1fDf"),q=n("isby"),Q=n("nkY7");function Y(e,t,n){if(t){if(!Object(Q.a)(t))return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return Y(e,n).apply(void 0,i).pipe(Object(W.a)(function(e){return Object(q.a)(e)?t.apply(void 0,e):t(e)}))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o,s=this,a={context:s,subject:o,callbackFunc:e,scheduler:n};return new i.a(function(i){if(n)return n.schedule(X,0,{args:t,subscriber:i,params:a});if(!o){o=new S;try{e.apply(s,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.next(e.length<=1?e[0]:e),o.complete()}]))}catch(r){Object(G.a)(o)?o.error(r):console.warn(r)}}return o.subscribe(i)})}}function X(e){var t=this,n=e.args,i=e.subscriber,r=e.params,o=r.callbackFunc,s=r.context,a=r.scheduler,l=r.subject;if(!l){l=r.subject=new S;try{o.apply(s,n.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.add(a.schedule(Z,0,{value:e.length<=1?e[0]:e,subject:l}))}]))}catch(c){l.error(c)}}this.add(l.subscribe(i))}function Z(e){var t=e.subject;t.next(e.value),t.complete()}function K(e,t,n){if(t){if(!Object(Q.a)(t))return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return K(e,n).apply(void 0,i).pipe(Object(W.a)(function(e){return Object(q.a)(e)?t.apply(void 0,e):t(e)}))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new i.a(function(i){var r=o.context,s=o.subject;if(n)return n.schedule(J,0,{params:o,subscriber:i,context:r});if(!s){s=o.subject=new S;try{e.apply(r,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?s.error(n):(s.next(e.length<=1?e[0]:e),s.complete())}]))}catch(a){Object(G.a)(s)?s.error(a):console.warn(a)}}return s.subscribe(i)})}}function J(e){var t=this,n=e.params,i=e.subscriber,r=e.context,o=n.callbackFunc,s=n.args,a=n.scheduler,l=n.subject;if(!l){l=n.subject=new S;try{o.apply(r,s.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e.shift();t.add(i?a.schedule(ee,0,{err:i,subject:l}):a.schedule($,0,{value:e.length<=1?e[0]:e,subject:l}))}]))}catch(c){this.add(a.schedule(ee,0,{err:c,subject:l}))}}this.add(l.subscribe(i))}function $(e){var t=e.subject;t.next(e.value),t.complete()}function ee(e){e.subject.error(e.err)}var te=n("dzgT"),ne=n("dEwP"),ie=n("lYZG"),re=n("G5J1"),oe=n("VNr4"),se=n("0/uQ"),ae=n("bne5"),le=n("2Bdj");function ce(e,t,n){return n?ce(e,t).pipe(Object(W.a)(function(e){return Object(q.a)(e)?n.apply(void 0,e):n(e)})):new i.a(function(n){var i,r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{i=e(r)}catch(o){return void n.error(o)}if(Object(le.a)(t))return function(){return t(r,i)}})}function he(e,t,n,r,o){var s,a;return 1==arguments.length?(a=e.initialState,t=e.condition,n=e.iterate,s=e.resultSelector||N.a,o=e.scheduler):void 0===r||Object(Q.a)(r)?(a=e,s=N.a,o=r):(a=e,s=r),new i.a(function(e){var i=a;if(o)return o.schedule(de,0,{subscriber:e,iterate:n,condition:t,resultSelector:s,state:i});for(;;){if(t){var r=void 0;try{r=t(i)}catch(c){return void e.error(c)}if(!r){e.complete();break}}var l=void 0;try{l=s(i)}catch(c){return void e.error(c)}if(e.next(l),e.closed)break;try{i=n(i)}catch(c){return void e.error(c)}}})}function de(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(o){return void t.error(o)}else e.needIterate=!0;if(n){var i=void 0;try{i=n(e.state)}catch(o){return void t.error(o)}if(!i)return void t.complete();if(t.closed)return}var r;try{r=e.resultSelector(e.state)}catch(o){return void t.error(o)}if(!t.closed&&(t.next(r),!t.closed))return this.schedule(e)}}function ue(e,t,n){return void 0===t&&(t=re.a),void 0===n&&(n=re.a),Object(ie.a)(function(){return e()?t:n})}var pe=n("xXU7"),fe=n("p0ib"),ge=new i.a(_.a);function me(){return ge}var ye=n("F/XL");function ve(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return re.a;var n=e[0],r=e.slice(1);return 1===e.length&&Object(q.a)(n)?ve.apply(void 0,n):new i.a(function(e){var t=function(){return e.add(ve.apply(void 0,r).subscribe(e))};return Object(se.a)(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})})}function be(e,t){return new i.a(t?function(n){var i=Object.keys(e),r=new a.a;return r.add(t.schedule(we,0,{keys:i,index:0,subscriber:n,subscription:r,obj:e})),r}:function(t){for(var n=Object.keys(e),i=0;i<n.length&&!t.closed;i++){var r=n[i];e.hasOwnProperty(r)&&t.next([r,e[r]])}t.complete()})}function we(e){var t=e.keys,n=e.index,i=e.subscriber,r=e.subscription,o=e.obj;if(!i.closed)if(n<t.length){var s=t[n];i.next([s,o[s]]),r.add(this.schedule({keys:t,index:n+1,subscriber:i,subscription:r,obj:o}))}else i.complete()}var Ce=n("W0Ae");function xe(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),new i.a(function(i){var r=0,o=e;if(n)return n.schedule(Ae,0,{index:r,count:t,start:e,subscriber:i});for(;;){if(r++>=t){i.complete();break}if(i.next(o++),i.closed)break}})}function Ae(e){var t=e.start,n=e.index,i=e.subscriber;n>=e.count?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}var Se=n("XlPw"),Oe=n("gI3B");function Ee(e,t){return new i.a(function(n){var i,r;try{i=e()}catch(s){return void n.error(s)}try{r=t(i)}catch(s){return void n.error(s)}var o=(r?Object(se.a)(r):re.a).subscribe(n);return function(){o.unsubscribe(),i&&i.unsubscribe()}})}var Ie=n("IUTb"),De=n("MGBS"),ke=n("zotm"),Pe=n("En8+");function Te(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),Object(Ie.a)(e,void 0).lift(new Me(n))}var Me=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new je(e,this.resultSelector))},e}(),je=function(e){function t(t,n,i){void 0===i&&(i=Object.create(null));var r=e.call(this,t)||this;return r.iterators=[],r.active=0,r.resultSelector="function"==typeof n?n:null,r.values=i,r}return o.c(t,e),t.prototype._next=function(e){var t=this.iterators;Object(q.a)(e)?t.push(new Le(e)):t.push("function"==typeof e[Pe.a]?new Re(e[Pe.a]()):new _e(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var i=e[n];i.stillUnsubscribed?this.destination.add(i.subscribe(i,n)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,i=0;i<t;i++)if("function"==typeof(s=e[i]).hasValue&&!s.hasValue())return;var r=!1,o=[];for(i=0;i<t;i++){var s,a=(s=e[i]).next();if(s.hasCompleted()&&(r=!0),a.done)return void n.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),r&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(s.a),Re=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),Le=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[Pe.a]=function(){return this},e.prototype.next=function(e){var t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),_e=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.parent=n,r.observable=i,r.stillUnsubscribed=!0,r.buffer=[],r.isComplete=!1,r}return o.c(t,e),t.prototype[Pe.a]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,n,i,r){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return Object(ke.a)(this,this.observable,this,t)},t}(De.a),Ne=n("iLxQ");n.d(t,"Observable",function(){return i.a}),n.d(t,"ConnectableObservable",function(){return r.a}),n.d(t,"GroupedObservable",function(){return c}),n.d(t,"observable",function(){return d.a}),n.d(t,"Subject",function(){return l.a}),n.d(t,"BehaviorSubject",function(){return u.a}),n.d(t,"ReplaySubject",function(){return x}),n.d(t,"AsyncSubject",function(){return S}),n.d(t,"asapScheduler",function(){return D}),n.d(t,"asyncScheduler",function(){return k.a}),n.d(t,"queueScheduler",function(){return m}),n.d(t,"animationFrameScheduler",function(){return T}),n.d(t,"VirtualTimeScheduler",function(){return M}),n.d(t,"VirtualAction",function(){return j}),n.d(t,"Scheduler",function(){return R.a}),n.d(t,"Subscription",function(){return a.a}),n.d(t,"Subscriber",function(){return s.a}),n.d(t,"Notification",function(){return y.a}),n.d(t,"pipe",function(){return L.a}),n.d(t,"noop",function(){return _.a}),n.d(t,"identity",function(){return N.a}),n.d(t,"isObservable",function(){return B}),n.d(t,"ArgumentOutOfRangeError",function(){return F.a}),n.d(t,"EmptyError",function(){return z.a}),n.d(t,"ObjectUnsubscribedError",function(){return w.a}),n.d(t,"UnsubscriptionError",function(){return H.a}),n.d(t,"TimeoutError",function(){return U}),n.d(t,"bindCallback",function(){return Y}),n.d(t,"bindNodeCallback",function(){return K}),n.d(t,"combineLatest",function(){return te.a}),n.d(t,"concat",function(){return ne.a}),n.d(t,"defer",function(){return ie.a}),n.d(t,"empty",function(){return re.b}),n.d(t,"forkJoin",function(){return oe.a}),n.d(t,"from",function(){return se.a}),n.d(t,"fromEvent",function(){return ae.a}),n.d(t,"fromEventPattern",function(){return ce}),n.d(t,"generate",function(){return he}),n.d(t,"iif",function(){return ue}),n.d(t,"interval",function(){return pe.a}),n.d(t,"merge",function(){return fe.a}),n.d(t,"never",function(){return me}),n.d(t,"of",function(){return ye.a}),n.d(t,"onErrorResumeNext",function(){return ve}),n.d(t,"pairs",function(){return be}),n.d(t,"race",function(){return Ce.a}),n.d(t,"range",function(){return xe}),n.d(t,"throwError",function(){return Se.a}),n.d(t,"timer",function(){return Oe.a}),n.d(t,"using",function(){return Ee}),n.d(t,"zip",function(){return Te}),n.d(t,"EMPTY",function(){return re.a}),n.d(t,"NEVER",function(){return ge}),n.d(t,"config",function(){return Ne.a})},"En8+":function(e,t,n){"use strict";function i(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,"a",function(){return r});var r=i()},"F/XL":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("nkY7"),r=n("IUTb"),o=n("G5J1"),s=n("PU8L");function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];switch(Object(i.a)(n)?e.pop():n=void 0,e.length){case 0:return Object(o.b)(n);case 1:return n?Object(r.a)(e,n):Object(s.a)(e[0]);default:return Object(r.a)(e,n)}}},FFOo:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("mrSG"),r=n("2Bdj"),o=n("6ahw"),s=n("pugT"),a=n("L/V9"),l=n("iLxQ"),c=n("DKTb"),h=function(e){function t(n,i,r){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,s._parentSubscription=null,arguments.length){case 0:s.destination=o.a;break;case 1:if(!n){s.destination=o.a;break}if("object"==typeof n){n instanceof t?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new d(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new d(s,n,i,r)}return s}return i.c(t,e),t.prototype[a.a]=function(){return this},t.create=function(e,n,i){var r=new t(e,n,i);return r.syncErrorThrowable=!1,r},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this._parentSubscription=null,this},t}(s.a),d=function(e){function t(t,n,i,s){var a,l=e.call(this)||this;l._parentSubscriber=t;var c=l;return Object(r.a)(n)?a=n:n&&(a=n.next,i=n.error,s=n.complete,n!==o.a&&(c=Object.create(n),Object(r.a)(c.unsubscribe)&&l.add(c.unsubscribe.bind(c)),c.unsubscribe=l.unsubscribe.bind(l))),l._context=c,l._next=a,l._error=i,l._complete=s,l}return i.c(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;l.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=l.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(c.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(c.a)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};l.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),l.a.useDeprecatedSynchronousErrorHandling)throw n;Object(c.a)(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!l.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return l.a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(Object(c.a)(i),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(h)},FGiv:function(e,t){var n=1e3,i=6e4,r=36e5,o=24*r;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var a,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*i;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===l&&!1===isNaN(e))return t.long?s(a=e,o,"day")||s(a,r,"hour")||s(a,i,"minute")||s(a,n,"second")||a+" ms":function(e){return e>=o?Math.round(e/o)+"d":e>=r?Math.round(e/r)+"h":e>=i?Math.round(e/i)+"m":e>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},Fxb1:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("6blF"),r=n("+tJ4"),o=n("S5XQ"),s=n("u67D"),a=n("JcRv"),l=n("2ePl"),c=n("/WYv"),h=n("McSo"),d=n("En8+"),u=n("xTla"),p=function(e){if(e instanceof i.a)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"==typeof e[u.a])return Object(a.a)(e);if(Object(l.a)(e))return Object(r.a)(e);if(Object(c.a)(e))return Object(o.a)(e);if(e&&"function"==typeof e[d.a])return Object(s.a)(e);var t=Object(h.a)(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},G5J1:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var i=n("6blF"),r=new i.a(function(e){return e.complete()});function o(e){return e?function(e){return new i.a(function(t){return e.schedule(function(){return t.complete()})})}(e):r}},Gbct:function(e,t,n){var i=n("Wm4p"),r=n("1Mk5");function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=o,r(o.prototype),o.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},HjK1:function(e,t,n){function i(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=n("lhf0")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,i)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=i,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(i())},IUTb:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("6blF"),r=n("pugT"),o=n("+tJ4");function s(e,t){return new i.a(t?function(n){var i=new r.a,o=0;return i.add(t.schedule(function(){o!==e.length?(n.next(e[o++]),n.closed||i.add(this.schedule())):n.complete()})),i}:Object(o.a)(e))}},Ip0R:function(e,t,n){"use strict";n.r(t),n.d(t,"\u0275angular_packages_common_common_e",function(){return Ke}),n.d(t,"\u0275angular_packages_common_common_d",function(){return G}),n.d(t,"\u0275angular_packages_common_common_a",function(){return ke}),n.d(t,"\u0275angular_packages_common_common_b",function(){return je}),n.d(t,"\u0275angular_packages_common_common_g",function(){return Ct}),n.d(t,"\u0275angular_packages_common_common_f",function(){return Ut}),n.d(t,"\u0275registerLocaleData",function(){return m}),n.d(t,"registerLocaleData",function(){return m}),n.d(t,"formatDate",function(){return te}),n.d(t,"formatCurrency",function(){return Se}),n.d(t,"formatNumber",function(){return Ee}),n.d(t,"formatPercent",function(){return Oe}),n.d(t,"NgLocaleLocalization",function(){return Me}),n.d(t,"NgLocalization",function(){return Pe}),n.d(t,"Plural",function(){return b}),n.d(t,"NumberFormatStyle",function(){return v}),n.d(t,"FormStyle",function(){return w}),n.d(t,"TranslationWidth",function(){return C}),n.d(t,"FormatWidth",function(){return x}),n.d(t,"NumberSymbol",function(){return A}),n.d(t,"WeekDay",function(){return S}),n.d(t,"getNumberOfCurrencyDigits",function(){return Y}),n.d(t,"getCurrencySymbol",function(){return q}),n.d(t,"getLocaleDayPeriods",function(){return E}),n.d(t,"getLocaleDayNames",function(){return I}),n.d(t,"getLocaleMonthNames",function(){return D}),n.d(t,"getLocaleId",function(){return O}),n.d(t,"getLocaleEraNames",function(){return k}),n.d(t,"getLocaleWeekEndRange",function(){return T}),n.d(t,"getLocaleFirstDayOfWeek",function(){return P}),n.d(t,"getLocaleDateFormat",function(){return M}),n.d(t,"getLocaleDateTimeFormat",function(){return R}),n.d(t,"getLocaleExtraDayPeriodRules",function(){return H}),n.d(t,"getLocaleExtraDayPeriods",function(){return V}),n.d(t,"getLocalePluralCase",function(){return F}),n.d(t,"getLocaleTimeFormat",function(){return j}),n.d(t,"getLocaleNumberSymbol",function(){return L}),n.d(t,"getLocaleNumberFormat",function(){return _}),n.d(t,"getLocaleCurrencyName",function(){return B}),n.d(t,"getLocaleCurrencySymbol",function(){return N}),n.d(t,"\u0275parseCookieValue",function(){return Re}),n.d(t,"CommonModule",function(){return Wt}),n.d(t,"DeprecatedI18NPipesModule",function(){return Gt}),n.d(t,"NgClass",function(){return Le}),n.d(t,"NgForOf",function(){return Be}),n.d(t,"NgForOfContext",function(){return Ne}),n.d(t,"NgIf",function(){return ze}),n.d(t,"NgIfContext",function(){return He}),n.d(t,"NgPlural",function(){return Qe}),n.d(t,"NgPluralCase",function(){return Ye}),n.d(t,"NgStyle",function(){return Xe}),n.d(t,"NgSwitch",function(){return We}),n.d(t,"NgSwitchCase",function(){return Ge}),n.d(t,"NgSwitchDefault",function(){return qe}),n.d(t,"NgTemplateOutlet",function(){return Ze}),n.d(t,"NgComponentOutlet",function(){return _e}),n.d(t,"DOCUMENT",function(){return qt}),n.d(t,"AsyncPipe",function(){return Ot}),n.d(t,"DatePipe",function(){return Pt}),n.d(t,"I18nPluralPipe",function(){return Mt}),n.d(t,"I18nSelectPipe",function(){return jt}),n.d(t,"JsonPipe",function(){return Rt}),n.d(t,"LowerCasePipe",function(){return Et}),n.d(t,"CurrencyPipe",function(){return Ft}),n.d(t,"DecimalPipe",function(){return Nt}),n.d(t,"PercentPipe",function(){return Bt}),n.d(t,"SlicePipe",function(){return Vt}),n.d(t,"UpperCasePipe",function(){return kt}),n.d(t,"TitleCasePipe",function(){return Dt}),n.d(t,"KeyValuePipe",function(){return Lt}),n.d(t,"DeprecatedDatePipe",function(){return gt}),n.d(t,"DeprecatedCurrencyPipe",function(){return wt}),n.d(t,"DeprecatedDecimalPipe",function(){return vt}),n.d(t,"DeprecatedPercentPipe",function(){return bt}),n.d(t,"\u0275PLATFORM_BROWSER_ID",function(){return Qt}),n.d(t,"\u0275PLATFORM_SERVER_ID",function(){return Yt}),n.d(t,"\u0275PLATFORM_WORKER_APP_ID",function(){return Xt}),n.d(t,"\u0275PLATFORM_WORKER_UI_ID",function(){return Zt}),n.d(t,"isPlatformBrowser",function(){return Kt}),n.d(t,"isPlatformServer",function(){return Jt}),n.d(t,"isPlatformWorkerApp",function(){return $t}),n.d(t,"isPlatformWorkerUi",function(){return en}),n.d(t,"VERSION",function(){return tn}),n.d(t,"ViewportScroller",function(){return nn}),n.d(t,"\u0275NullViewportScroller",function(){return on}),n.d(t,"PlatformLocation",function(){return o}),n.d(t,"LOCATION_INITIALIZED",function(){return s}),n.d(t,"LocationStrategy",function(){return a}),n.d(t,"APP_BASE_HREF",function(){return l}),n.d(t,"HashLocationStrategy",function(){return d}),n.d(t,"PathLocationStrategy",function(){return u}),n.d(t,"Location",function(){return c});var i=n("CcnG"),r=n("mrSG"),o=function(){return function(){}}(),s=new i.InjectionToken("Location Initialized"),a=function(){return function(){}}(),l=new i.InjectionToken("appBaseHref"),c=function(){function e(e){var n=this;this._subject=new i.EventEmitter,this._platformStrategy=e;var r=this._platformStrategy.getBaseHref();this._baseHref=t.stripTrailingSlash(h(r)),this._platformStrategy.onPopState(function(e){n._subject.emit({url:n.path(!0),pop:!0,state:e.state,type:e.type})})}var t;return t=e,e.prototype.path=function(e){return void 0===e&&(e=!1),this.normalize(this._platformStrategy.path(e))},e.prototype.isCurrentPathEqualTo=function(e,n){return void 0===n&&(n=""),this.path()==this.normalize(e+t.normalizeQueryParams(n))},e.prototype.normalize=function(e){return t.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,h(e)))},e.prototype.prepareExternalUrl=function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)},e.prototype.go=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=null),this._platformStrategy.pushState(n,"",e,t)},e.prototype.replaceState=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=null),this._platformStrategy.replaceState(n,"",e,t)},e.prototype.forward=function(){this._platformStrategy.forward()},e.prototype.back=function(){this._platformStrategy.back()},e.prototype.subscribe=function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})},e.normalizeQueryParams=function(e){return e&&"?"!==e[0]?"?"+e:e},e.joinWithSlash=function(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t},e.stripTrailingSlash=function(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)},e}();function h(e){return e.replace(/\/index.html$/,"")}var d=function(e){function t(t,n){var i=e.call(this)||this;return i._platformLocation=t,i._baseHref="",null!=n&&(i._baseHref=n),i}return Object(r.c)(t,e),t.prototype.onPopState=function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)},t.prototype.getBaseHref=function(){return this._baseHref},t.prototype.path=function(e){void 0===e&&(e=!1);var t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t},t.prototype.prepareExternalUrl=function(e){var t=c.joinWithSlash(this._baseHref,e);return t.length>0?"#"+t:t},t.prototype.pushState=function(e,t,n,i){var r=this.prepareExternalUrl(n+c.normalizeQueryParams(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(e,t,r)},t.prototype.replaceState=function(e,t,n,i){var r=this.prepareExternalUrl(n+c.normalizeQueryParams(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,r)},t.prototype.forward=function(){this._platformLocation.forward()},t.prototype.back=function(){this._platformLocation.back()},t}(a),u=function(e){function t(t,n){var i=e.call(this)||this;if(i._platformLocation=t,null==n&&(n=i._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=n,i}return Object(r.c)(t,e),t.prototype.onPopState=function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)},t.prototype.getBaseHref=function(){return this._baseHref},t.prototype.prepareExternalUrl=function(e){return c.joinWithSlash(this._baseHref,e)},t.prototype.path=function(e){void 0===e&&(e=!1);var t=this._platformLocation.pathname+c.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?""+t+n:t},t.prototype.pushState=function(e,t,n,i){var r=this.prepareExternalUrl(n+c.normalizeQueryParams(i));this._platformLocation.pushState(e,t,r)},t.prototype.replaceState=function(e,t,n,i){var r=this.prepareExternalUrl(n+c.normalizeQueryParams(i));this._platformLocation.replaceState(e,t,r)},t.prototype.forward=function(){this._platformLocation.forward()},t.prototype.back=function(){this._platformLocation.back()},t}(a),p=void 0,f=["en",[["a","p"],["AM","PM"],p],[["AM","PM"],p,p],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],p,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],p,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",p,"{1} 'at' {0}",p],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],g={};function m(e,t,n){"string"!=typeof t&&(n=t,t=e[0]),t=t.toLowerCase().replace(/_/g,"-"),g[t]=e,n&&(g[t][19]=n)}var y={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,0],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",0],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",0],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",0],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",0],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",0],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",0],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,0],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UZS:[void 0,void 0,0],VEF:[void 0,"Bs"],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},v=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}({}),b=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),w=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}({}),C=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}({}),x=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}({}),A=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e[1/0]=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}({}),S=function(e){return e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e}({});function O(e){return G(e)[0]}function E(e,t,n){var i=G(e),r=U([i[1],i[2]],t);return U(r,n)}function I(e,t,n){var i=G(e),r=U([i[3],i[4]],t);return U(r,n)}function D(e,t,n){var i=G(e),r=U([i[5],i[6]],t);return U(r,n)}function k(e,t){return U(G(e)[7],t)}function P(e){return G(e)[8]}function T(e){return G(e)[9]}function M(e,t){return U(G(e)[10],t)}function j(e,t){return U(G(e)[11],t)}function R(e,t){return U(G(e)[12],t)}function L(e,t){var n=G(e),i=n[13][t];if(void 0===i){if(t===A.CurrencyDecimal)return n[13][A.Decimal];if(t===A.CurrencyGroup)return n[13][A.Group]}return i}function _(e,t){return G(e)[14][t]}function N(e){return G(e)[15]||null}function B(e){return G(e)[16]||null}function F(e){return G(e)[18]}function z(e){if(!e[19])throw new Error('Missing extra locale data for the locale "'+e[0]+'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.')}function H(e){var t=G(e);return z(t),(t[19][2]||[]).map(function(e){return"string"==typeof e?W(e):[W(e[0]),W(e[1])]})}function V(e,t,n){var i=G(e);z(i);var r=U([i[19][0],i[19][1]],t)||[];return U(r,n)||[]}function U(e,t){for(var n=t;n>-1;n--)if(void 0!==e[n])return e[n];throw new Error("Locale data API: locale data undefined")}function W(e){var t=Object(r.f)(e.split(":"),2);return{hours:+t[0],minutes:+t[1]}}function G(e){var t=e.toLowerCase().replace(/_/g,"-"),n=g[t];if(n)return n;var i=t.split("-")[0];if(n=g[i])return n;if("en"===i)return f;throw new Error('Missing locale data for the locale "'+e+'".')}function q(e,t,n){void 0===n&&(n="en");var i=function(e){return G(e)[17]}(n)[e]||y[e]||[],r=i[1];return"narrow"===t&&"string"==typeof r?r:i[0]||e}var Q=2;function Y(e){var t,n=y[e];return n&&(t=n[2]),"number"==typeof t?t:Q}var X=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Z={},K=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,J=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}({}),$=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}({}),ee=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}({});function te(e,t,n,i){var o=function(e){if(pe(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){e=e.trim();var t,n=parseFloat(e);if(!isNaN(e-n))return new Date(n);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var i=Object(r.f)(e.split("-").map(function(e){return+e}),3);return new Date(i[0],i[1]-1,i[2])}if(t=e.match(X))return ue(t)}var o=new Date(e);if(!pe(o))throw new Error('Unable to convert "'+e+'" into a date');return o}(e);t=function e(t,n){var i=O(t);if(Z[i]=Z[i]||{},Z[i][n])return Z[i][n];var r="";switch(n){case"shortDate":r=M(t,x.Short);break;case"mediumDate":r=M(t,x.Medium);break;case"longDate":r=M(t,x.Long);break;case"fullDate":r=M(t,x.Full);break;case"shortTime":r=j(t,x.Short);break;case"mediumTime":r=j(t,x.Medium);break;case"longTime":r=j(t,x.Long);break;case"fullTime":r=j(t,x.Full);break;case"short":var o=e(t,"shortTime"),s=e(t,"shortDate");r=ne(R(t,x.Short),[o,s]);break;case"medium":var a=e(t,"mediumTime"),l=e(t,"mediumDate");r=ne(R(t,x.Medium),[a,l]);break;case"long":var c=e(t,"longTime"),h=e(t,"longDate");r=ne(R(t,x.Long),[c,h]);break;case"full":var d=e(t,"fullTime"),u=e(t,"fullDate");r=ne(R(t,x.Full),[d,u])}return r&&(Z[i][n]=r),r}(n,t)||t;for(var s,a=[];t;){if(!(s=K.exec(t))){a.push(t);break}var l=(a=a.concat(s.slice(1))).pop();if(!l)break;t=l}var c=o.getTimezoneOffset();i&&(c=de(i,c),o=function(e,t,n){var i=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,-1*(de(t,i)-i))}(o,i));var h="";return a.forEach(function(e){var t=function(e){if(he[e])return he[e];var t;switch(e){case"G":case"GG":case"GGG":t=oe(ee.Eras,C.Abbreviated);break;case"GGGG":t=oe(ee.Eras,C.Wide);break;case"GGGGG":t=oe(ee.Eras,C.Narrow);break;case"y":t=re($.FullYear,1,0,!1,!0);break;case"yy":t=re($.FullYear,2,0,!0,!0);break;case"yyy":t=re($.FullYear,3,0,!1,!0);break;case"yyyy":t=re($.FullYear,4,0,!1,!0);break;case"M":case"L":t=re($.Month,1,1);break;case"MM":case"LL":t=re($.Month,2,1);break;case"MMM":t=oe(ee.Months,C.Abbreviated);break;case"MMMM":t=oe(ee.Months,C.Wide);break;case"MMMMM":t=oe(ee.Months,C.Narrow);break;case"LLL":t=oe(ee.Months,C.Abbreviated,w.Standalone);break;case"LLLL":t=oe(ee.Months,C.Wide,w.Standalone);break;case"LLLLL":t=oe(ee.Months,C.Narrow,w.Standalone);break;case"w":t=ce(1);break;case"ww":t=ce(2);break;case"W":t=ce(1,!0);break;case"d":t=re($.Date,1);break;case"dd":t=re($.Date,2);break;case"E":case"EE":case"EEE":t=oe(ee.Days,C.Abbreviated);break;case"EEEE":t=oe(ee.Days,C.Wide);break;case"EEEEE":t=oe(ee.Days,C.Narrow);break;case"EEEEEE":t=oe(ee.Days,C.Short);break;case"a":case"aa":case"aaa":t=oe(ee.DayPeriods,C.Abbreviated);break;case"aaaa":t=oe(ee.DayPeriods,C.Wide);break;case"aaaaa":t=oe(ee.DayPeriods,C.Narrow);break;case"b":case"bb":case"bbb":t=oe(ee.DayPeriods,C.Abbreviated,w.Standalone,!0);break;case"bbbb":t=oe(ee.DayPeriods,C.Wide,w.Standalone,!0);break;case"bbbbb":t=oe(ee.DayPeriods,C.Narrow,w.Standalone,!0);break;case"B":case"BB":case"BBB":t=oe(ee.DayPeriods,C.Abbreviated,w.Format,!0);break;case"BBBB":t=oe(ee.DayPeriods,C.Wide,w.Format,!0);break;case"BBBBB":t=oe(ee.DayPeriods,C.Narrow,w.Format,!0);break;case"h":t=re($.Hours,1,-12);break;case"hh":t=re($.Hours,2,-12);break;case"H":t=re($.Hours,1);break;case"HH":t=re($.Hours,2);break;case"m":t=re($.Minutes,1);break;case"mm":t=re($.Minutes,2);break;case"s":t=re($.Seconds,1);break;case"ss":t=re($.Seconds,2);break;case"S":t=re($.FractionalSeconds,1);break;case"SS":t=re($.FractionalSeconds,2);break;case"SSS":t=re($.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=se(J.Short);break;case"ZZZZZ":t=se(J.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=se(J.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=se(J.Long);break;default:return null}return he[e]=t,t}(e);h+=t?t(o,n,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}function ne(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e}function ie(e,t,n,i,r){void 0===n&&(n="-");var o="";(e<0||r&&e<=0)&&(r?e=1-e:(e=-e,o=n));for(var s=String(e);s.length<t;)s="0"+s;return i&&(s=s.substr(s.length-t)),o+s}function re(e,t,n,i,r){return void 0===n&&(n=0),void 0===i&&(i=!1),void 0===r&&(r=!1),function(o,s){var a,l=function(e,t){switch(e){case $.FullYear:return t.getFullYear();case $.Month:return t.getMonth();case $.Date:return t.getDate();case $.Hours:return t.getHours();case $.Minutes:return t.getMinutes();case $.Seconds:return t.getSeconds();case $.FractionalSeconds:return t.getMilliseconds();case $.Day:return t.getDay();default:throw new Error('Unknown DateType value "'+e+'".')}}(e,o);if((n>0||l>-n)&&(l+=n),e===$.Hours)0===l&&-12===n&&(l=12);else if(e===$.FractionalSeconds)return a=t,ie(l,3).substr(0,a);var c=L(s,A.MinusSign);return ie(l,t,c,i,r)}}function oe(e,t,n,i){return void 0===n&&(n=w.Format),void 0===i&&(i=!1),function(r,o){return function(e,t,n,i,r,o){switch(n){case ee.Months:return D(t,r,i)[e.getMonth()];case ee.Days:return I(t,r,i)[e.getDay()];case ee.DayPeriods:var s=e.getHours(),a=e.getMinutes();if(o){var l,c=H(t),h=V(t,r,i);if(c.forEach(function(e,t){if(Array.isArray(e)){var n=e[0],i=e[1],r=i.hours;s>=n.hours&&a>=n.minutes&&(s<r||s===r&&a<i.minutes)&&(l=h[t])}else e.hours===s&&e.minutes===a&&(l=h[t])}),l)return l}return E(t,r,i)[s<12?0:1];case ee.Eras:return k(t,i)[e.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(r,o,e,t,n,i)}}function se(e){return function(t,n,i){var r=-1*i,o=L(n,A.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(e){case J.Short:return(r>=0?"+":"")+ie(s,2,o)+ie(Math.abs(r%60),2,o);case J.ShortGMT:return"GMT"+(r>=0?"+":"")+ie(s,1,o);case J.Long:return"GMT"+(r>=0?"+":"")+ie(s,2,o)+":"+ie(Math.abs(r%60),2,o);case J.Extended:return 0===i?"Z":(r>=0?"+":"")+ie(s,2,o)+":"+ie(Math.abs(r%60),2,o);default:throw new Error('Unknown zone width "'+e+'"')}}}var ae=0,le=4;function ce(e,t){return void 0===t&&(t=!1),function(n,i){var r,o,s,a;if(t){var l=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,c=n.getDate();r=1+Math.floor((c+l)/7)}else{var h=(s=n.getFullYear(),a=new Date(s,ae,1).getDay(),new Date(s,0,1+(a<=le?le:le+7)-a)),d=(o=n,new Date(o.getFullYear(),o.getMonth(),o.getDate()+(le-o.getDay()))).getTime()-h.getTime();r=1+Math.round(d/6048e5)}return ie(r,e,L(i,A.MinusSign))}}var he={};function de(e,t){e=e.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function ue(e){var t=new Date(0),n=0,i=0,r=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),i=Number(e[9]+e[11])),r.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));var s=Number(e[4]||0)-n,a=Number(e[5]||0)-i,l=Number(e[6]||0),c=Math.round(1e3*parseFloat("0."+(e[7]||0)));return o.call(t,s,a,l,c),t}function pe(e){return e instanceof Date&&!isNaN(e.valueOf())}var fe=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ge=22,me=".",ye="0",ve=";",be=",",we="#",Ce="\xa4",xe="%";function Ae(e,t,n,i,r,o,s){void 0===s&&(s=!1);var a="",l=!1;if(isFinite(e)){var c=function(t){var n,i,r,o,s,a=Math.abs(e)+"",l=0;for((i=a.indexOf(me))>-1&&(a=a.replace(me,"")),(r=a.search(/e/i))>0?(i<0&&(i=r),i+=+a.slice(r+1),a=a.substring(0,r)):i<0&&(i=a.length),r=0;a.charAt(r)===ye;r++);if(r===(s=a.length))n=[0],i=1;else{for(s--;a.charAt(s)===ye;)s--;for(i-=r,n=[],o=0;r<=s;r++,o++)n[o]=Number(a.charAt(r))}return i>ge&&(n=n.splice(0,ge-1),l=i-1,i=1),{digits:n,exponent:l,integerLen:i}}();s&&(c=function(e){if(0===e.digits[0])return e;var t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(c));var h=t.minInt,d=t.minFrac,u=t.maxFrac;if(o){var p=o.match(fe);if(null===p)throw new Error(o+" is not a valid digit info");var f=p[1],g=p[3],m=p[5];null!=f&&(h=De(f)),null!=g&&(d=De(g)),null!=m?u=De(m):null!=g&&d>u&&(u=d)}!function(e,t,n){if(t>n)throw new Error("The minimum number of digits after fraction ("+t+") is higher than the maximum ("+n+").");var i=e.digits,r=i.length-e.integerLen,o=Math.min(Math.max(t,r),n),s=o+e.integerLen,a=i[s];if(s>0){i.splice(Math.max(e.integerLen,s));for(var l=s;l<i.length;l++)i[l]=0}else{r=Math.max(0,r),e.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(var c=1;c<s;c++)i[c]=0}if(a>=5)if(s-1<0){for(var h=0;h>s;h--)i.unshift(0),e.integerLen++;i.unshift(1),e.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);var d=0!==o,u=t+e.integerLen,p=i.reduceRight(function(e,t,n,i){return i[n]=(t+=e)<10?t:t-10,d&&(0===i[n]&&n>=u?i.pop():d=!1),t>=10?1:0},0);p&&(i.unshift(p),e.integerLen++)}(c,d,u);var y=c.digits,v=c.integerLen,b=c.exponent,w=[];for(l=y.every(function(e){return!e});v<h;v++)y.unshift(0);for(;v<0;v++)y.unshift(0);v>0?w=y.splice(v,y.length):(w=y,y=[0]);var C=[];for(y.length>=t.lgSize&&C.unshift(y.splice(-t.lgSize,y.length).join(""));y.length>t.gSize;)C.unshift(y.splice(-t.gSize,y.length).join(""));y.length&&C.unshift(y.join("")),a=C.join(L(n,i)),w.length&&(a+=L(n,r)+w.join("")),b&&(a+=L(n,A.Exponential)+"+"+b)}else a=L(n,A.Infinity);return e<0&&!l?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf}function Se(e,t,n,i,r){var o=Ie(_(t,v.Currency),L(t,A.MinusSign));return o.minFrac=Y(i),o.maxFrac=o.minFrac,Ae(e,o,t,A.CurrencyGroup,A.CurrencyDecimal,r).replace(Ce,n).replace(Ce,"")}function Oe(e,t,n){return Ae(e,Ie(_(t,v.Percent),L(t,A.MinusSign)),t,A.Group,A.Decimal,n,!0).replace(new RegExp(xe,"g"),L(t,A.PercentSign))}function Ee(e,t,n){return Ae(e,Ie(_(t,v.Decimal),L(t,A.MinusSign)),t,A.Group,A.Decimal,n)}function Ie(e,t){void 0===t&&(t="-");var n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=e.split(ve),r=i[0],o=i[1],s=-1!==r.indexOf(me)?r.split(me):[r.substring(0,r.lastIndexOf(ye)+1),r.substring(r.lastIndexOf(ye)+1)],a=s[0],l=s[1]||"";n.posPre=a.substr(0,a.indexOf(we));for(var c=0;c<l.length;c++){var h=l.charAt(c);h===ye?n.minFrac=n.maxFrac=c+1:h===we?n.maxFrac=c+1:n.posSuf+=h}var d=a.split(be);if(n.gSize=d[1]?d[1].length:0,n.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,o){var u=r.length-n.posPre.length-n.posSuf.length,p=o.indexOf(we);n.negPre=o.substr(0,p).replace(/'/g,""),n.negSuf=o.substr(p+u).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}function De(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}var ke=new i.InjectionToken("UseV4Plurals"),Pe=function(){return function(){}}();function Te(e,t,n,i){var r="="+e;if(t.indexOf(r)>-1)return r;if(r=n.getPluralCategory(e,i),t.indexOf(r)>-1)return r;if(t.indexOf("other")>-1)return"other";throw new Error('No plural message found for value "'+e+'"')}var Me=function(e){function t(t,n){var i=e.call(this)||this;return i.locale=t,i.deprecatedPluralFn=n,i}return Object(r.c)(t,e),t.prototype.getPluralCategory=function(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):F(t||this.locale)(e)){case b.Zero:return"zero";case b.One:return"one";case b.Two:return"two";case b.Few:return"few";case b.Many:return"many";default:return"other"}},t}(Pe);function je(e,t){"string"==typeof t&&(t=parseInt(t,10));var n=t,i=n.toString().replace(/^[^.]*\.?/,""),r=Math.floor(Math.abs(n)),o=i.length,s=parseInt(i,10),a=parseInt(n.toString().replace(/^[^.]*\.?|0+$/g,""),10)||0;switch(e.split("-")[0].toLowerCase()){case"af":case"asa":case"az":case"bem":case"bez":case"bg":case"brx":case"ce":case"cgg":case"chr":case"ckb":case"ee":case"el":case"eo":case"es":case"eu":case"fo":case"fur":case"gsw":case"ha":case"haw":case"hu":case"jgo":case"jmc":case"ka":case"kk":case"kkj":case"kl":case"ks":case"ksb":case"ky":case"lb":case"lg":case"mas":case"mgo":case"ml":case"mn":case"nb":case"nd":case"ne":case"nn":case"nnh":case"nyn":case"om":case"or":case"os":case"ps":case"rm":case"rof":case"rwk":case"saq":case"seh":case"sn":case"so":case"sq":case"ta":case"te":case"teo":case"tk":case"tr":case"ug":case"uz":case"vo":case"vun":case"wae":case"xog":return 1===n?b.One:b.Other;case"ak":case"ln":case"mg":case"pa":case"ti":return n===Math.floor(n)&&n>=0&&n<=1?b.One:b.Other;case"am":case"as":case"bn":case"fa":case"gu":case"hi":case"kn":case"mr":case"zu":return 0===r||1===n?b.One:b.Other;case"ar":return 0===n?b.Zero:1===n?b.One:2===n?b.Two:n%100===Math.floor(n%100)&&n%100>=3&&n%100<=10?b.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=99?b.Many:b.Other;case"ast":case"ca":case"de":case"en":case"et":case"fi":case"fy":case"gl":case"it":case"nl":case"sv":case"sw":case"ur":case"yi":return 1===r&&0===o?b.One:b.Other;case"be":return n%10==1&&n%100!=11?b.One:n%10===Math.floor(n%10)&&n%10>=2&&n%10<=4&&!(n%100>=12&&n%100<=14)?b.Few:n%10==0||n%10===Math.floor(n%10)&&n%10>=5&&n%10<=9||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=14?b.Many:b.Other;case"br":return n%10==1&&n%100!=11&&n%100!=71&&n%100!=91?b.One:n%10==2&&n%100!=12&&n%100!=72&&n%100!=92?b.Two:n%10===Math.floor(n%10)&&(n%10>=3&&n%10<=4||n%10==9)&&!(n%100>=10&&n%100<=19||n%100>=70&&n%100<=79||n%100>=90&&n%100<=99)?b.Few:0!==n&&n%1e6==0?b.Many:b.Other;case"bs":case"hr":case"sr":return 0===o&&r%10==1&&r%100!=11||s%10==1&&s%100!=11?b.One:0===o&&r%10===Math.floor(r%10)&&r%10>=2&&r%10<=4&&!(r%100>=12&&r%100<=14)||s%10===Math.floor(s%10)&&s%10>=2&&s%10<=4&&!(s%100>=12&&s%100<=14)?b.Few:b.Other;case"cs":case"sk":return 1===r&&0===o?b.One:r===Math.floor(r)&&r>=2&&r<=4&&0===o?b.Few:0!==o?b.Many:b.Other;case"cy":return 0===n?b.Zero:1===n?b.One:2===n?b.Two:3===n?b.Few:6===n?b.Many:b.Other;case"da":return 1===n||0!==a&&(0===r||1===r)?b.One:b.Other;case"dsb":case"hsb":return 0===o&&r%100==1||s%100==1?b.One:0===o&&r%100==2||s%100==2?b.Two:0===o&&r%100===Math.floor(r%100)&&r%100>=3&&r%100<=4||s%100===Math.floor(s%100)&&s%100>=3&&s%100<=4?b.Few:b.Other;case"ff":case"fr":case"hy":case"kab":return 0===r||1===r?b.One:b.Other;case"fil":return 0===o&&(1===r||2===r||3===r)||0===o&&r%10!=4&&r%10!=6&&r%10!=9||0!==o&&s%10!=4&&s%10!=6&&s%10!=9?b.One:b.Other;case"ga":return 1===n?b.One:2===n?b.Two:n===Math.floor(n)&&n>=3&&n<=6?b.Few:n===Math.floor(n)&&n>=7&&n<=10?b.Many:b.Other;case"gd":return 1===n||11===n?b.One:2===n||12===n?b.Two:n===Math.floor(n)&&(n>=3&&n<=10||n>=13&&n<=19)?b.Few:b.Other;case"gv":return 0===o&&r%10==1?b.One:0===o&&r%10==2?b.Two:0!==o||r%100!=0&&r%100!=20&&r%100!=40&&r%100!=60&&r%100!=80?0!==o?b.Many:b.Other:b.Few;case"he":return 1===r&&0===o?b.One:2===r&&0===o?b.Two:0!==o||n>=0&&n<=10||n%10!=0?b.Other:b.Many;case"is":return 0===a&&r%10==1&&r%100!=11||0!==a?b.One:b.Other;case"ksh":return 0===n?b.Zero:1===n?b.One:b.Other;case"kw":case"naq":case"se":case"smn":return 1===n?b.One:2===n?b.Two:b.Other;case"lag":return 0===n?b.Zero:0!==r&&1!==r||0===n?b.Other:b.One;case"lt":return n%10!=1||n%100>=11&&n%100<=19?n%10===Math.floor(n%10)&&n%10>=2&&n%10<=9&&!(n%100>=11&&n%100<=19)?b.Few:0!==s?b.Many:b.Other:b.One;case"lv":case"prg":return n%10==0||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19||2===o&&s%100===Math.floor(s%100)&&s%100>=11&&s%100<=19?b.Zero:n%10==1&&n%100!=11||2===o&&s%10==1&&s%100!=11||2!==o&&s%10==1?b.One:b.Other;case"mk":return 0===o&&r%10==1||s%10==1?b.One:b.Other;case"mt":return 1===n?b.One:0===n||n%100===Math.floor(n%100)&&n%100>=2&&n%100<=10?b.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19?b.Many:b.Other;case"pl":return 1===r&&0===o?b.One:0===o&&r%10===Math.floor(r%10)&&r%10>=2&&r%10<=4&&!(r%100>=12&&r%100<=14)?b.Few:0===o&&1!==r&&r%10===Math.floor(r%10)&&r%10>=0&&r%10<=1||0===o&&r%10===Math.floor(r%10)&&r%10>=5&&r%10<=9||0===o&&r%100===Math.floor(r%100)&&r%100>=12&&r%100<=14?b.Many:b.Other;case"pt":return n===Math.floor(n)&&n>=0&&n<=2&&2!==n?b.One:b.Other;case"ro":return 1===r&&0===o?b.One:0!==o||0===n||1!==n&&n%100===Math.floor(n%100)&&n%100>=1&&n%100<=19?b.Few:b.Other;case"ru":case"uk":return 0===o&&r%10==1&&r%100!=11?b.One:0===o&&r%10===Math.floor(r%10)&&r%10>=2&&r%10<=4&&!(r%100>=12&&r%100<=14)?b.Few:0===o&&r%10==0||0===o&&r%10===Math.floor(r%10)&&r%10>=5&&r%10<=9||0===o&&r%100===Math.floor(r%100)&&r%100>=11&&r%100<=14?b.Many:b.Other;case"shi":return 0===r||1===n?b.One:n===Math.floor(n)&&n>=2&&n<=10?b.Few:b.Other;case"si":return 0===n||1===n||0===r&&1===s?b.One:b.Other;case"sl":return 0===o&&r%100==1?b.One:0===o&&r%100==2?b.Two:0===o&&r%100===Math.floor(r%100)&&r%100>=3&&r%100<=4||0!==o?b.Few:b.Other;case"tzm":return n===Math.floor(n)&&n>=0&&n<=1||n===Math.floor(n)&&n>=11&&n<=99?b.One:b.Other;default:return b.Other}}function Re(e,t){var n,i;t=encodeURIComponent(t);try{for(var o=Object(r.h)(e.split(";")),s=o.next();!s.done;s=o.next()){var a=s.value,l=a.indexOf("="),c=Object(r.f)(-1==l?[a,""]:[a.slice(0,l),a.slice(l+1)],2),h=c[1];if(c[0].trim()===t)return decodeURIComponent(h)}}catch(d){n={error:d}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return null}var Le=function(){function e(e,t,n,i){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=i,this._initialClasses=[]}return Object.defineProperty(e.prototype,"klass",{set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClass",{set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Object(i["\u0275isListLikeIterable"])(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}},e.prototype._applyKeyValueChanges=function(e){var t=this;e.forEachAddedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachRemovedItem(function(e){e.previousValue&&t._toggleClass(e.key,!1)})},e.prototype._applyIterableChanges=function(e){var t=this;e.forEachAddedItem(function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(i["\u0275stringify"])(e.item));t._toggleClass(e.item,!0)}),e.forEachRemovedItem(function(e){return t._toggleClass(e.item,!1)})},e.prototype._applyClasses=function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return t._toggleClass(e,!0)}):Object.keys(e).forEach(function(n){return t._toggleClass(n,!!e[n])}))},e.prototype._removeClasses=function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return t._toggleClass(e,!1)}):Object.keys(e).forEach(function(e){return t._toggleClass(e,!1)}))},e.prototype._toggleClass=function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach(function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)})},e}(),_e=function(){function e(e){this._viewContainerRef=e,this._componentRef=null,this._moduleRef=null}return e.prototype.ngOnChanges=function(e){if(this._viewContainerRef.clear(),this._componentRef=null,this.ngComponentOutlet){var t=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;if(e.ngComponentOutletNgModuleFactory)if(this._moduleRef&&this._moduleRef.destroy(),this.ngComponentOutletNgModuleFactory){var n=t.get(i.NgModuleRef);this._moduleRef=this.ngComponentOutletNgModuleFactory.create(n.injector)}else this._moduleRef=null;var r=(this._moduleRef?this._moduleRef.componentFactoryResolver:t.get(i.ComponentFactoryResolver)).resolveComponentFactory(this.ngComponentOutlet);this._componentRef=this._viewContainerRef.createComponent(r,this._viewContainerRef.length,t,this.ngComponentOutletContent)}},e.prototype.ngOnDestroy=function(){this._moduleRef&&this._moduleRef.destroy()},e}(),Ne=function(){function e(e,t,n,i){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=i}return Object.defineProperty(e.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),e}(),Be=function(){function e(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(e.prototype,"ngForOf",{set:function(e){this._ngForOf=e,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(e){Object(i.isDevMode)()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(e)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTemplate",{set:function(e){e&&(this._template=e)},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(i){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((t=e).name||typeof t)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}},e.prototype._applyChanges=function(e){var t=this,n=[];e.forEachOperation(function(e,i,r){if(null==e.previousIndex){var o=t._viewContainer.createEmbeddedView(t._template,new Ne(null,t._ngForOf,-1,-1),r),s=new Fe(e,o);n.push(s)}else null==r?t._viewContainer.remove(i):(o=t._viewContainer.get(i),t._viewContainer.move(o,r),s=new Fe(e,o),n.push(s))});for(var i=0;i<n.length;i++)this._perViewChange(n[i].view,n[i].record);i=0;for(var r=this._viewContainer.length;i<r;i++){var o=this._viewContainer.get(i);o.context.index=i,o.context.count=r,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange(function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item})},e.prototype._perViewChange=function(e,t){e.context.$implicit=t.item},e.ngTemplateContextGuard=function(e,t){return!0},e}(),Fe=function(){return function(e,t){this.record=e,this.view=t}}(),ze=function(){function e(e,t){this._viewContainer=e,this._context=new He,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}return Object.defineProperty(e.prototype,"ngIf",{set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfThen",{set:function(e){Ve("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfElse",{set:function(e){Ve("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),e.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},e.ngTemplateGuard_ngIf=function(e,t){return!0},e}(),He=function(){return function(){this.$implicit=null,this.ngIf=null}}();function Ve(e,t){if(t&&!t.createEmbeddedView)throw new Error(e+" must be a TemplateRef, but received '"+Object(i["\u0275stringify"])(t)+"'.")}var Ue=function(){function e(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}return e.prototype.create=function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)},e.prototype.destroy=function(){this._created=!1,this._viewContainerRef.clear()},e.prototype.enforceState=function(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()},e}(),We=function(){function e(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return Object.defineProperty(e.prototype,"ngSwitch",{set:function(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)},enumerable:!0,configurable:!0}),e.prototype._addCase=function(){return this._caseCount++},e.prototype._addDefault=function(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)},e.prototype._matchCase=function(e){var t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t},e.prototype._updateDefaultCases=function(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(var t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}},e}(),Ge=function(){function e(e,t,n){this.ngSwitch=n,n._addCase(),this._view=new Ue(e,t)}return e.prototype.ngDoCheck=function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))},e}(),qe=function(){return function(e,t,n){n._addDefault(new Ue(e,t))}}(),Qe=function(){function e(e){this._localization=e,this._caseViews={}}return Object.defineProperty(e.prototype,"ngPlural",{set:function(e){this._switchValue=e,this._updateView()},enumerable:!0,configurable:!0}),e.prototype.addCase=function(e,t){this._caseViews[e]=t},e.prototype._updateView=function(){this._clearViews();var e=Object.keys(this._caseViews),t=Te(this._switchValue,e,this._localization);this._activateView(this._caseViews[t])},e.prototype._clearViews=function(){this._activeView&&this._activeView.destroy()},e.prototype._activateView=function(e){e&&(this._activeView=e,this._activeView.create())},e}(),Ye=function(){return function(e,t,n,i){this.value=e;var r=!isNaN(Number(e));i.addCase(r?"="+e:e,new Ue(n,t))}}(),Xe=function(){function e(e,t,n){this._differs=e,this._ngEl=t,this._renderer=n}return Object.defineProperty(e.prototype,"ngStyle",{set:function(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._differ){var e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}},e.prototype._applyChanges=function(e){var t=this;e.forEachRemovedItem(function(e){return t._setStyle(e.key,null)}),e.forEachAddedItem(function(e){return t._setStyle(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return t._setStyle(e.key,e.currentValue)})},e.prototype._setStyle=function(e,t){var n=Object(r.f)(e.split("."),2),i=n[0],o=n[1];null!=(t=null!=t&&o?""+t+o:t)?this._renderer.setStyle(this._ngEl.nativeElement,i,t):this._renderer.removeStyle(this._ngEl.nativeElement,i)},e}(),Ze=function(){function e(e){this._viewContainerRef=e}return e.prototype.ngOnChanges=function(e){this._shouldRecreateView(e)?(this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this.ngTemplateOutlet&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext))):this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)},e.prototype._shouldRecreateView=function(e){var t=e.ngTemplateOutletContext;return!!e.ngTemplateOutlet||t&&this._hasContextShapeChanged(t)},e.prototype._hasContextShapeChanged=function(e){var t,n,i=Object.keys(e.previousValue||{}),o=Object.keys(e.currentValue||{});if(i.length===o.length){try{for(var s=Object(r.h)(o),a=s.next();!a.done;a=s.next())if(-1===i.indexOf(a.value))return!0}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return!1}return!0},e.prototype._updateExistingContext=function(e){var t,n;try{for(var i=Object(r.h)(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s=o.value;this._viewRef.context[s]=this.ngTemplateOutletContext[s]}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e}(),Ke=[Le,_e,Be,ze,Ze,Xe,We,Ge,qe,Qe,Ye];function Je(e,t){return Error("InvalidPipeArgument: '"+t+"' for pipe '"+Object(i["\u0275stringify"])(e)+"'")}var $e=function(){function e(){}return e.format=function(e,t,n,i){void 0===i&&(i={});var r=i.currency,o=i.currencyAsSymbol,s=void 0!==o&&o,a={minimumIntegerDigits:i.minimumIntegerDigits,minimumFractionDigits:i.minimumFractionDigits,maximumFractionDigits:i.maximumFractionDigits,style:v[n].toLowerCase()};return n==v.Currency&&(a.currency="string"==typeof r?r:void 0,a.currencyDisplay=s?"symbol":"code"),new Intl.NumberFormat(t,a).format(e)},e}(),et=/((?:[^yMLdHhmsazZEwGjJ']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|J+|j+|m+|s+|a|z|Z|G+|w+))(.*)/,tt={yMMMdjms:ut(dt([ct("year",1),ht("month",3),ct("day",1),ct("hour",1),ct("minute",1),ct("second",1)])),yMdjm:ut(dt([ct("year",1),ct("month",1),ct("day",1),ct("hour",1),ct("minute",1)])),yMMMMEEEEd:ut(dt([ct("year",1),ht("month",4),ht("weekday",4),ct("day",1)])),yMMMMd:ut(dt([ct("year",1),ht("month",4),ct("day",1)])),yMMMd:ut(dt([ct("year",1),ht("month",3),ct("day",1)])),yMd:ut(dt([ct("year",1),ct("month",1),ct("day",1)])),jms:ut(dt([ct("hour",1),ct("second",1),ct("minute",1)])),jm:ut(dt([ct("hour",1),ct("minute",1)]))},nt={yyyy:ut(ct("year",4)),yy:ut(ct("year",2)),y:ut(ct("year",1)),MMMM:ut(ht("month",4)),MMM:ut(ht("month",3)),MM:ut(ct("month",2)),M:ut(ct("month",1)),LLLL:ut(ht("month",4)),L:ut(ht("month",1)),dd:ut(ct("day",2)),d:ut(ct("day",1)),HH:it(ot(ut(lt(ct("hour",2),!1)))),H:ot(ut(lt(ct("hour",1),!1))),hh:it(ot(ut(lt(ct("hour",2),!0)))),h:ot(ut(lt(ct("hour",1),!0))),jj:ut(ct("hour",2)),j:ut(ct("hour",1)),mm:it(ut(ct("minute",2))),m:ut(ct("minute",1)),ss:it(ut(ct("second",2))),s:ut(ct("second",1)),sss:ut(ct("second",3)),EEEE:ut(ht("weekday",4)),EEE:ut(ht("weekday",3)),EE:ut(ht("weekday",2)),E:ut(ht("weekday",1)),a:rt(ut(lt(ct("hour",1),!0))),Z:at("short"),z:at("long"),ww:ut({}),w:ut({}),G:ut(ht("era",1)),GG:ut(ht("era",2)),GGG:ut(ht("era",3)),GGGG:ut(ht("era",4))};function it(e){return function(t,n){var i=e(t,n);return 1==i.length?"0"+i:i}}function rt(e){return function(t,n){return e(t,n).split(" ")[1]}}function ot(e){return function(t,n){return e(t,n).split(" ")[0]}}function st(e,t,n){return new Intl.DateTimeFormat(t,n).format(e).replace(/[\u200e\u200f]/g,"")}function at(e){var t={hour:"2-digit",hour12:!1,timeZoneName:e};return function(e,n){var i=st(e,n,t);return i?i.substring(3):""}}function lt(e,t){return e.hour12=t,e}function ct(e,t){var n={};return n[e]=2===t?"2-digit":"numeric",n}function ht(e,t){var n={};return n[e]=t<4?t>1?"short":"narrow":"long",n}function dt(e){return e.reduce(function(e,t){return Object(r.a)({},e,t)},{})}function ut(e){return function(t,n){return st(t,n,e)}}var pt=new Map,ft=function(){function e(){}return e.format=function(e,t,n){return function(e,t,n){var i=tt[e];if(i)return i(t,n);var r=e,o=pt.get(r);if(!o){o=[];var s=void 0;et.exec(e);for(var a=e;a;)(s=et.exec(a))?a=(o=o.concat(s.slice(1))).pop():(o.push(a),a=null);pt.set(r,o)}return o.reduce(function(e,i){var r=nt[i];return e+(r?r(t,n):function(e){return"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}(i))},"")}(n,e,t)},e}(),gt=function(){function e(e){this._locale=e}var t;return t=e,e.prototype.transform=function(e,n){if(void 0===n&&(n="mediumDate"),null==e||""===e||e!=e)return null;var i;if("string"==typeof e&&(e=e.trim()),mt(e))i=e;else if(isNaN(e-parseFloat(e)))if("string"==typeof e&&/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var o=Object(r.f)(e.split("-").map(function(e){return parseInt(e,10)}),3);i=new Date(o[0],o[1]-1,o[2])}else i=new Date(e);else i=new Date(parseFloat(e));if(!mt(i)){var s=void 0;if("string"!=typeof e||!(s=e.match(X)))throw Je(t,e);i=ue(s)}return ft.format(i,this._locale,t._ALIASES[n]||n)},e._ALIASES={medium:"yMMMdjms",short:"yMdjm",fullDate:"yMMMMEEEEd",longDate:"yMMMMd",mediumDate:"yMMMd",shortDate:"yMd",mediumTime:"jms",shortTime:"jm"},e}();function mt(e){return e instanceof Date&&!isNaN(e.valueOf())}function yt(e,t,n,i,r,o,s){if(void 0===o&&(o=null),void 0===s&&(s=!1),null==n)return null;if("number"!=typeof(n="string"!=typeof n||isNaN(+n-parseFloat(n))?n:+n))throw Je(e,n);var a,l,c;if(i!==v.Currency&&(a=1,l=0,c=3),r){var h=r.match(fe);if(null===h)throw new Error(r+" is not a valid digit info for number pipes");null!=h[1]&&(a=De(h[1])),null!=h[3]&&(l=De(h[3])),null!=h[5]&&(c=De(h[5]))}return $e.format(n,t,i,{minimumIntegerDigits:a,minimumFractionDigits:l,maximumFractionDigits:c,currency:o,currencyAsSymbol:s})}var vt=function(){function e(e){this._locale=e}var t;return t=e,e.prototype.transform=function(e,n){return yt(t,this._locale,e,v.Decimal,n)},e}(),bt=function(){function e(e){this._locale=e}var t;return t=e,e.prototype.transform=function(e,n){return yt(t,this._locale,e,v.Percent,n)},e}(),wt=function(){function e(e){this._locale=e}var t;return t=e,e.prototype.transform=function(e,n,i,r){return void 0===n&&(n="USD"),void 0===i&&(i=!1),yt(t,this._locale,e,v.Currency,r,n,i)},e}(),Ct=[vt,bt,wt,gt],xt=function(){function e(){}return e.prototype.createSubscription=function(e,t){return e.subscribe({next:t,error:function(e){throw e}})},e.prototype.dispose=function(e){e.unsubscribe()},e.prototype.onDestroy=function(e){e.unsubscribe()},e}(),At=new(function(){function e(){}return e.prototype.createSubscription=function(e,t){return e.then(t,function(e){throw e})},e.prototype.dispose=function(e){},e.prototype.onDestroy=function(e){},e}()),St=new xt,Ot=function(){function e(e){this._ref=e,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}var t;return t=e,e.prototype.ngOnDestroy=function(){this._subscription&&this._dispose()},e.prototype.transform=function(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,i.WrappedValue.wrap(this._latestValue)):(e&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue)},e.prototype._subscribe=function(e){var t=this;this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,function(n){return t._updateLatestValue(e,n)})},e.prototype._selectStrategy=function(e){if(Object(i["\u0275isPromise"])(e))return At;if(Object(i["\u0275isObservable"])(e))return St;throw Je(t,e)},e.prototype._dispose=function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null},e.prototype._updateLatestValue=function(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())},e}(),Et=function(){function e(){}var t;return t=e,e.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw Je(t,e);return e.toLowerCase()},e}(),It=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g,Dt=function(){function e(){}var t;return t=e,e.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw Je(t,e);return e.replace(It,function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()})},e}(),kt=function(){function e(){}var t;return t=e,e.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw Je(t,e);return e.toUpperCase()},e}(),Pt=function(){function e(e){this.locale=e}var t;return t=e,e.prototype.transform=function(e,n,i,r){if(void 0===n&&(n="mediumDate"),null==e||""===e||e!=e)return null;try{return te(e,n,r||this.locale,i)}catch(o){throw Je(t,o.message)}},e}(),Tt=/#/g,Mt=function(){function e(e){this._localization=e}var t;return t=e,e.prototype.transform=function(e,n,i){if(null==e)return"";if("object"!=typeof n||null===n)throw Je(t,n);return n[Te(e,Object.keys(n),this._localization,i)].replace(Tt,e.toString())},e}(),jt=function(){function e(){}var t;return t=e,e.prototype.transform=function(e,n){if(null==e)return"";if("object"!=typeof n||"string"!=typeof e)throw Je(t,n);return n.hasOwnProperty(e)?n[e]:n.hasOwnProperty("other")?n.other:""},e}(),Rt=function(){function e(){}return e.prototype.transform=function(e){return JSON.stringify(e,null,2)},e}(),Lt=function(){function e(e){this.differs=e,this.keyValues=[]}return e.prototype.transform=function(e,t){var n=this;if(void 0===t&&(t=_t),!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());var i=this.differ.diff(e);return i&&(this.keyValues=[],i.forEachItem(function(e){n.keyValues.push({key:e.key,value:e.currentValue})}),this.keyValues.sort(t)),this.keyValues},e}();function _t(e,t){var n=e.key,i=t.key;if(n===i)return 0;if(void 0===n)return 1;if(void 0===i)return-1;if(null===n)return 1;if(null===i)return-1;if("string"==typeof n&&"string"==typeof i)return n<i?-1:1;if("number"==typeof n&&"number"==typeof i)return n-i;if("boolean"==typeof n&&"boolean"==typeof i)return n<i?-1:1;var r=String(n),o=String(i);return r==o?0:r<o?-1:1}var Nt=function(){function e(e){this._locale=e}var t;return t=e,e.prototype.transform=function(e,n,i){if(zt(e))return null;i=i||this._locale;try{return Ee(Ht(e),i,n)}catch(r){throw Je(t,r.message)}},e}(),Bt=function(){function e(e){this._locale=e}var t;return t=e,e.prototype.transform=function(e,n,i){if(zt(e))return null;i=i||this._locale;try{return Oe(Ht(e),i,n)}catch(r){throw Je(t,r.message)}},e}(),Ft=function(){function e(e){this._locale=e}var t;return t=e,e.prototype.transform=function(e,n,i,r,o){if(void 0===i&&(i="symbol"),zt(e))return null;o=o||this._locale,"boolean"==typeof i&&(console&&console.warn&&console.warn('Warning: the currency pipe has been changed in Angular v5. The symbolDisplay option (third parameter) is now a string instead of a boolean. The accepted values are "code", "symbol" or "symbol-narrow".'),i=i?"symbol":"code");var s=n||"USD";"code"!==i&&(s="symbol"===i||"symbol-narrow"===i?q(s,"symbol"===i?"wide":"narrow",o):i);try{return Se(Ht(e),o,s,n,r)}catch(a){throw Je(t,a.message)}},e}();function zt(e){return null==e||""===e||e!=e}function Ht(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(e+" is not a number");return e}var Vt=function(){function e(){}var t;return t=e,e.prototype.transform=function(e,n,i){if(null==e)return e;if(!this.supports(e))throw Je(t,e);return e.slice(n,i)},e.prototype.supports=function(e){return"string"==typeof e||Array.isArray(e)},e}(),Ut=[Ot,kt,Et,Rt,Vt,Nt,Bt,Dt,Ft,Pt,Mt,jt,Lt],Wt=function(){return function(){}}(),Gt=function(){return function(){}}(),qt=new i.InjectionToken("DocumentToken"),Qt="browser",Yt="server",Xt="browserWorkerApp",Zt="browserWorkerUi";function Kt(e){return e===Qt}function Jt(e){return e===Yt}function $t(e){return e===Xt}function en(e){return e===Zt}var tn=new i.Version("7.2.15"),nn=function(){function e(){}return e.ngInjectableDef=Object(i.defineInjectable)({providedIn:"root",factory:function(){return new rn(Object(i.inject)(qt),window,Object(i.inject)(i.ErrorHandler))}}),e}(),rn=function(){function e(e,t,n){this.document=e,this.window=t,this.errorHandler=n,this.offset=function(){return[0,0]}}return e.prototype.setOffset=function(e){this.offset=Array.isArray(e)?function(){return e}:e},e.prototype.getScrollPosition=function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]},e.prototype.scrollToPosition=function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])},e.prototype.scrollToAnchor=function(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var t=this.document.querySelector("#"+e);if(t)return void this.scrollToElement(t);var n=this.document.querySelector("[name='"+e+"']");if(n)return void this.scrollToElement(n)}catch(i){this.errorHandler.handleError(i)}}},e.prototype.setHistoryScrollRestoration=function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}},e.prototype.scrollToElement=function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])},e.prototype.supportScrollRestoration=function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}},e}(),on=function(){function e(){}return e.prototype.setOffset=function(e){},e.prototype.getScrollPosition=function(){return[0,0]},e.prototype.scrollToPosition=function(e){},e.prototype.scrollToAnchor=function(e){},e.prototype.setHistoryScrollRestoration=function(e){},e}()},JcRv:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("xTla"),r=function(e){return function(t){var n=e[i.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}},K9Ia:function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"a",function(){return d});var i=n("mrSG"),r=n("6blF"),o=n("FFOo"),s=n("pugT"),a=n("8g8A"),l=n("uMaO"),c=n("L/V9"),h=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return i.c(t,e),t}(o.a),d=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i.c(t,e),t.prototype[c.a]=function(){return new h(this)},t.prototype.lift=function(e){var t=new u(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a.a;if(!this.isStopped)for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].next(e)},t.prototype.error=function(e){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),i=0;i<t;i++)n[i].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a.a;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new a.a;return this.hasError?(e.error(this.thrownError),s.a.EMPTY):this.isStopped?(e.complete(),s.a.EMPTY):(this.observers.push(e),new l.a(this,e))},t.prototype.asObservable=function(){var e=new r.a;return e.source=this,e},t.create=function(e,t){return new u(e,t)},t}(r.a),u=function(e){function t(t,n){var i=e.call(this)||this;return i.destination=t,i.source=n,i}return i.c(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):s.a.EMPTY},t}(d)},KFGy:function(e,t,n){var i=n("Vo14"),r=n("2xqC"),o=n("kSER"),s=n("2Dig"),a=n("QN7Q"),l=n("x7D4")("socket.io-client:socket"),c=n("TypT"),h=n("WLGk");e.exports=p;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},u=r.prototype.emit;function p(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}r(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",a(this,"onopen")),s(e,"packet",a(this,"onpacket")),s(e,"close",a(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},p.prototype.send=function(){var e=o(arguments);return e.unshift("message"),this.emit.apply(this,e),this},p.prototype.emit=function(e){if(d.hasOwnProperty(e))return u.apply(this,arguments),this;var t=o(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:h(t))?i.BINARY_EVENT:i.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},p.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},p.prototype.onopen=function(){if(l("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?c.encode(this.query):this.query;l("sending connect packet with query %s",e),this.packet({type:i.CONNECT,query:e})}else this.packet({type:i.CONNECT})},p.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},p.prototype.onpacket=function(e){if(e.nsp===this.nsp||e.type===i.ERROR&&"/"===e.nsp)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},p.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?u.apply(this,t):this.receiveBuffer.push(t)},p.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=o(arguments);l("sending ack %j",r),t.packet({type:h(r)?i.BINARY_ACK:i.ACK,id:e,data:r})}}},p.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(l("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):l("bad ack %s",e.id)},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},p.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)u.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(e){return this.flags.compress=e,this},p.prototype.binary=function(e){return this.flags.binary=e,this}},KhEm:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return h});var i=n("mrSG"),r=n("K9Ia"),o=n("6blF"),s=(n("FFOo"),n("pugT")),a=n("yGWI"),l=function(e){function t(t,n){var i=e.call(this)||this;return i.source=t,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return i.c(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new s.a).add(this.source.subscribe(new d(this.getSubject(),this))),e.closed?(this._connection=null,e=s.a.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return Object(a.a)()(this)},t}(o.a),c=l.prototype,h={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}},d=function(e){function t(t,n){var i=e.call(this,t)||this;return i.connectable=n,i}return i.c(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(r.b)},"L/V9":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},MGBS:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("mrSG"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.c(t,e),t.prototype.notifyNext=function(e,t,n,i,r){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n("FFOo").a)},McSo:function(e,t,n){"use strict";function i(e){return null!=e&&"object"==typeof e}n.d(t,"a",function(){return i})},Nq7k:function(e,t,n){function i(e){var n;function i(){if(i.enabled){var e=i,r=+new Date;e.diff=r-(n||r),e.prev=n,e.curr=r,n=r;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,i){if("%%"===n)return n;a++;var r=t.formatters[i];return"function"==typeof r&&(n=r.call(e,o[a]),o.splice(a,1),a--),n}),t.formatArgs.call(e,o),(i.log||t.log||console.log.bind(console)).apply(e,o)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),i.destroy=r,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function r(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n("FGiv"),t.instances=[],t.names=[],t.skips=[],t.formatters={}},PU8L:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("6blF");function r(e){var t=new i.a(function(t){t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}},Q80o:function(e,t,n){function i(e){var n;function i(){if(i.enabled){var e=i,r=+new Date;e.diff=r-(n||r),e.prev=n,e.curr=r,n=r;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,i){if("%%"===n)return n;a++;var r=t.formatters[i];return"function"==typeof r&&(n=r.call(e,o[a]),o.splice(a,1),a--),n}),t.formatArgs.call(e,o),(i.log||t.log||console.log.bind(console)).apply(e,o)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),i.destroy=r,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function r(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n("FGiv"),t.instances=[],t.names=[],t.skips=[],t.formatters={}},QN7Q:function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}},S1nX:function(e,t,n){"use strict";var i=n("KhEm"),r=n("yGWI"),o=n("K9Ia");function s(){return new o.a}function a(){return function(e){return Object(r.a)()((t=s,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,i.b);return r.source=e,r.subjectFactory=n,r})(e));var t}}n.d(t,"a",function(){return a})},S5XQ:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("DKTb"),r=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,i.a),t}}},T1DM:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("h9Dq"),r=new(n("CS9Q").a)(i.a)},Txjg:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("Zn8D");function r(){return Object(i.a)(1)}},TypT:function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,r=n.length;i<r;i++){var o=n[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},Uxeu:function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,r=e.indexOf("["),o=e.indexOf("]");-1!=r&&-1!=o&&(e=e.substring(0,r)+e.substring(r,o).replace(/:/g,";")+e.substring(o,e.length));for(var s=n.exec(e||""),a={},l=14;l--;)a[i[l]]=s[l]||"";return-1!=r&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},VNr4:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("mrSG"),r=n("6blF"),o=n("isby"),s=n("G5J1"),a=n("zotm"),l=n("MGBS"),c=n("67Y/");function h(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(o.a)(t[0])&&(t=t[0]),0===t.length?s.a:e?h(t).pipe(Object(c.a)(function(t){return e.apply(void 0,t)})):new r.a(function(e){return new d(e,t)})}var d=function(e){function t(t,n){var i=e.call(this,t)||this;i.sources=n,i.completed=0,i.haveValues=0;var r=n.length;i.values=new Array(r);for(var o=0;o<r;o++){var s=n[o],l=Object(a.a)(i,s,null,o);l&&i.add(l)}return i}return i.c(t,e),t.prototype.notifyNext=function(e,t,n,i,r){this.values[n]=t,r._hasValue||(r._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,n=this.haveValues,i=this.values,r=i.length;e._hasValue?(this.completed++,this.completed===r&&(n===r&&t.next(i),t.complete())):t.complete()},t}(l.a)},Vo14:function(e,t,n){var i=n("5M3R")("socket.io-parser"),r=n("aKum"),o=n("cD5x"),s=n("ojuT"),a=n("+SKG");function l(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=l,t.Decoder=d;var c=t.ERROR+'"encode error"';function h(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var r=function(e){try{return JSON.stringify(e)}catch(t){return!1}}(e.data);if(!1===r)return c;n+=r}return i("encoded %j as %s",e,n),n}function d(){this.reconstructor=null}function u(e){this.reconPack=e,this.buffers=[]}function p(e){return{type:t.ERROR,data:"parser error: "+e}}l.prototype.encode=function(e,n){i("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type?function(e,t){o.removeBlobs(e,function(e){var n=o.deconstructPacket(e),i=h(n.packet),r=n.buffers;r.unshift(i),t(r)})}(e,n):n([h(e)])},r(d.prototype),d.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n=0,r={type:Number(e.charAt(0))};if(null==t.types[r.type])return p("unknown packet type "+r.type);if(t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type){for(var o="";"-"!==e.charAt(++n)&&(o+=e.charAt(n),n!=e.length););if(o!=Number(o)||"-"!==e.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===e.charAt(n+1))for(r.nsp="";++n&&","!==(l=e.charAt(n))&&(r.nsp+=l,n!==e.length););else r.nsp="/";var a=e.charAt(n+1);if(""!==a&&Number(a)==a){for(r.id="";++n;){var l;if(null==(l=e.charAt(n))||Number(l)!=l){--n;break}if(r.id+=e.charAt(n),n===e.length)break}r.id=Number(r.id)}if(e.charAt(++n)){var c=function(e){try{return JSON.parse(e)}catch(t){return!1}}(e.substr(n));if(!1===c||r.type!==t.ERROR&&!s(c))return p("invalid payload");r.data=c}return i("decoded %s as %j",e,r),r}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new u(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},W0Ae:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("mrSG"),r=n("isby"),o=n("IUTb"),s=n("MGBS"),a=n("zotm");function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Object(r.a)(e[0]))return e[0];e=e[0]}return Object(o.a)(e,void 0).lift(new c)}var c=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new h(e))},e}(),h=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i.c(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var i=e[n],r=Object(a.a)(this,i,i,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},t.prototype.notifyNext=function(e,t,n,i,r){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(s.a)},WLGk:function(e,t,n){var i=n("6C75"),r=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);e.exports=function e(t){if(!t||"object"!=typeof t)return!1;if(i(t)){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(t)||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||o&&t instanceof Blob||s&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&e(t[a]))return!0;return!1}},Wm4p:function(e,t,n){var i,r=n("dkv/"),o=n("WLGk"),s=n("ypnn"),a=n("zMFY"),l=n("oIG/");"undefined"!=typeof ArrayBuffer&&(i=n("g5Dd"));var c="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),h="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),d=c||h;t.protocol=3;var u=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=r(u),f={type:"error",data:"parser error"},g=n("14A5");function m(e,t,n){for(var i=new Array(e.length),r=a(e.length,n),o=function(e,n,r){t(n,function(t,n){i[e]=n,r(t,i)})},s=0;s<e.length;s++)o(s,e[s],r)}t.encodePacket=function(e,n,i,r){"function"==typeof n&&(r=n,n=!1),"function"==typeof i&&(r=i,i=null);var o=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer)return function(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var r=e.data,o=new Uint8Array(r),s=new Uint8Array(1+r.byteLength);s[0]=u[e.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return i(s.buffer)}(e,n,r);if(void 0!==g&&o instanceof g)return function(e,n,i){if(!n)return t.encodeBase64Packet(e,i);if(d)return function(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var r=new FileReader;return r.onload=function(){t.encodePacket({type:e.type,data:r.result},n,!0,i)},r.readAsArrayBuffer(e.data)}(e,n,i);var r=new Uint8Array(1);return r[0]=u[e.type],i(new g([r.buffer,e.data]))}(e,n,r);if(o&&o.base64)return function(e,n){return n("b"+t.packets[e.type]+e.data.data)}(e,r);var s=u[e.type];return void 0!==e.data&&(s+=i?l.encode(String(e.data),{strict:!1}):String(e.data)),r(""+s)},t.encodeBase64Packet=function(e,n){var i,r="b"+t.packets[e.type];if(void 0!==g&&e.data instanceof g){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(r+e)},o.readAsDataURL(e.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(c){for(var s=new Uint8Array(e.data),a=new Array(s.length),l=0;l<s.length;l++)a[l]=s[l];i=String.fromCharCode.apply(null,a)}return r+=btoa(i),n(r)},t.decodePacket=function(e,n,i){if(void 0===e)return f;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(i&&!1===(e=function(e){try{e=l.decode(e,{strict:!1})}catch(t){return!1}return e}(e)))return f;var r=e.charAt(0);return Number(r)==r&&p[r]?e.length>1?{type:p[r],data:e.substring(1)}:{type:p[r]}:f}r=new Uint8Array(e)[0];var o=s(e,1);return g&&"blob"===n&&(o=new g([o])),{type:p[r],data:o}},t.decodeBase64Packet=function(e,t){var n=p[e.charAt(0)];if(!i)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=i.decode(e.substr(1));return"blob"===t&&g&&(r=new g([r])),{type:n,data:r}},t.encodePayload=function(e,n,i){"function"==typeof n&&(i=n,n=null);var r=o(e);return n&&r?g&&!d?t.encodePayloadAsBlob(e,i):t.encodePayloadAsArrayBuffer(e,i):e.length?void m(e,function(e,i){t.encodePacket(e,!!r&&n,!1,function(e){i(null,function(e){return e.length+":"+e}(e))})},function(e,t){return i(t.join(""))}):i("0:")},t.decodePayload=function(e,n,i){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,i);var r;if("function"==typeof n&&(i=n,n=null),""===e)return i(f,0,1);for(var o,s,a="",l=0,c=e.length;l<c;l++){var h=e.charAt(l);if(":"===h){if(""===a||a!=(o=Number(a)))return i(f,0,1);if(a!=(s=e.substr(l+1,o)).length)return i(f,0,1);if(s.length){if(r=t.decodePacket(s,n,!1),f.type===r.type&&f.data===r.data)return i(f,0,1);if(!1===i(r,l+o,c))return}l+=o,a=""}else a+=h}return""!==a?i(f,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));m(e,function(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})},function(e,t){var i=t.reduce(function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2},0),r=new Uint8Array(i),o=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);n=i.buffer}r[o++]=t?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)r[o++]=parseInt(a[s]);for(r[o++]=255,i=new Uint8Array(n),s=0;s<i.length;s++)r[o++]=i[s]}),n(r.buffer)})},t.encodePayloadAsBlob=function(e,n){m(e,function(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);e=i.buffer,t[0]=0}var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(o.length+1);for(r=0;r<o.length;r++)s[r]=parseInt(o[r]);if(s[o.length]=255,g){var a=new g([t.buffer,s.buffer,e]);n(null,a)}})},function(e,t){return n(new g(t))})},t.decodePayloadAsBinary=function(e,n,i){"function"==typeof n&&(i=n,n=null);for(var r=e,o=[];r.byteLength>0;){for(var a=new Uint8Array(r),l=0===a[0],c="",h=1;255!==a[h];h++){if(c.length>310)return i(f,0,1);c+=a[h]}r=s(r,2+c.length),c=parseInt(c);var d=s(r,0,c);if(l)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(g){var u=new Uint8Array(d);for(d="",h=0;h<u.length;h++)d+=String.fromCharCode(u[h])}o.push(d),r=s(r,c)}var p=o.length;o.forEach(function(e,r){i(t.decodePacket(e,n,!0),r,p)})}},XlPw:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("6blF");function r(e,t){return new i.a(t?function(n){return t.schedule(o,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function o(e){e.subscriber.error(e.error)}},Yvos:function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},Zn8D:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("psW0"),r=n("mChF");function o(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Object(i.a)(r.a,e)}},aKum:function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var i=0,r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},akSB:function(e,t,n){var i=n("AdPF"),r=n("0z79"),o=n("Cl5A"),s=n("CIKq");t.polling=function(e){var t=!1,n=!1,s=!1!==e.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,l=location.port;l||(l=a?443:80),t=e.hostname!==location.hostname||l!==e.port,n=e.secure!==a}if(e.xdomain=t,e.xscheme=n,"open"in new i(e)&&!e.forceJSONP)return new r(e);if(!s)throw new Error("JSONP disabled");return new o(e)},t.websocket=s},awvh:function(e,t,n){"use strict";function i(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}n.d(t,"a",function(){return r}),i.prototype=Object.create(Error.prototype);var r=i},b7mW:function(e,t,n){"use strict";function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}n.d(t,"a",function(){return r}),i.prototype=Object.create(Error.prototype);var r=i},bne5:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("6blF"),r=n("isby"),o=n("2Bdj"),s=n("67Y/");function a(e,t,n,l){return Object(o.a)(n)&&(l=n,n=void 0),l?a(e,t,n).pipe(Object(s.a)(function(e){return Object(r.a)(e)?l.apply(void 0,e):l(e)})):new i.a(function(i){!function e(t,n,i,r,o){var s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var a=t;t.addEventListener(n,i,o),s=function(){return a.removeEventListener(n,i,o)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var l=t;t.on(n,i),s=function(){return l.off(n,i)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var c=t;t.addListener(n,i),s=function(){return c.removeListener(n,i)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var h=0,d=t.length;h<d;h++)e(t[h],n,i,r,o)}r.add(s)}(e,t,function(e){i.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},i,n)})}},cD5x:function(e,t,n){var i=n("ojuT"),r=n("+SKG"),o=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);t.deconstructPacket=function(e){var t=[],n=e;return n.data=function e(t,n){if(!t)return t;if(r(t)){var o={_placeholder:!0,num:n.length};return n.push(t),o}if(i(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a],n);return s}if("object"==typeof t&&!(t instanceof Date)){for(var l in s={},t)s[l]=e(t[l],n);return s}return t}(e.data,t),n.attachments=t.length,{packet:n,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(i(t))for(var r=0;r<t.length;r++)t[r]=e(t[r],n);else if("object"==typeof t)for(var o in t)t[o]=e(t[o],n);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,o=e;!function e(l,c,h){if(!l)return l;if(s&&l instanceof Blob||a&&l instanceof File){n++;var d=new FileReader;d.onload=function(){h?h[c]=this.result:o=this.result,--n||t(o)},d.readAsArrayBuffer(l)}else if(i(l))for(var u=0;u<l.length;u++)e(l[u],u,l);else if("object"==typeof l&&!r(l))for(var p in l)e(l[p],p,l)}(o),n||t(o)}},crnd:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},dEwP:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("nkY7"),r=n("F/XL"),o=n("0/uQ"),s=n("Txjg");function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length||2===e.length&&Object(i.a)(e[1])?Object(o.a)(e[0]):Object(s.a)()(r.a.apply(void 0,e))}},"dkv/":function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},dzgT:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("mrSG"),r=n("nkY7"),o=n("isby"),s=n("MGBS"),a=n("zotm"),l=n("IUTb"),c={};function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null,i=null;return Object(r.a)(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(o.a)(e[0])&&(e=e[0]),Object(l.a)(e,i).lift(new d(n))}var d=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.resultSelector))},e}(),u=function(e){function t(t,n){var i=e.call(this,t)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return i.c(t,e),t.prototype._next=function(e){this.values.push(c),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var i=e[n];this.add(Object(a.a)(this,i,i,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,i,r){var o=this.values,s=this.toRespond?o[n]===c?--this.toRespond:this.toRespond:0;o[n]=t,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(s.a)},eOtv:function(e,t,n){var i=n("lKxJ"),r=n("KFGy"),o=n("2xqC"),s=n("Vo14"),a=n("2Dig"),l=n("QN7Q"),c=n("x7D4")("socket.io-client:manager"),h=n("7jRU"),d=n("C2QD"),u=Object.prototype.hasOwnProperty;function p(e,t){if(!(this instanceof p))return new p(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||s;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=p,p.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)u.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},p.prototype.updateSocketIds=function(){for(var e in this.nsps)u.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},p.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},o(p.prototype),p.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},p.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},p.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(e,t){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=a(n,"open",function(){r.onopen(),e&&e()}),s=a(n,"error",function(t){if(c("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var l=this._timeout;c("connect attempt will timeout after %d",l);var h=setTimeout(function(){c("connect attempt timed out after %d",l),o.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",l)},l);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(o),this.subs.push(s),this},p.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",l(this,"ondata"))),this.subs.push(a(e,"ping",l(this,"onping"))),this.subs.push(a(e,"pong",l(this,"onpong"))),this.subs.push(a(e,"error",l(this,"onerror"))),this.subs.push(a(e,"close",l(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",l(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(e){this.decoder.add(e)},p.prototype.ondecoded=function(e){this.emit("packet",e)},p.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},p.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new r(this,e,t),this.nsps[e]=n;var i=this;n.on("connecting",o),n.on("connect",function(){n.id=i.generateId(e)}),this.autoConnect&&o()}function o(){~h(i.connecting,n)||i.connecting.push(n)}return n},p.prototype.destroy=function(e){var t=h(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},p.prototype.packet=function(e){c("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var i=0;i<n.length;i++)t.engine.write(n[i],e.options);t.encoding=!1,t.processPacketQueue()}))},p.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},p.prototype.cleanup=function(){c("cleanup");for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},p.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},g5Dd:function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),i=0;i<e.length;i++)n[e.charCodeAt(i)]=i;t.encode=function(t){var n,i=new Uint8Array(t),r=i.length,o="";for(n=0;n<r;n+=3)o+=e[i[n]>>2],o+=e[(3&i[n])<<4|i[n+1]>>4],o+=e[(15&i[n+1])<<2|i[n+2]>>6],o+=e[63&i[n+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(e){var t,i,r,o,s,a=.75*e.length,l=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var h=new ArrayBuffer(a),d=new Uint8Array(h);for(t=0;t<l;t+=4)i=n[e.charCodeAt(t)],r=n[e.charCodeAt(t+1)],o=n[e.charCodeAt(t+2)],s=n[e.charCodeAt(t+3)],d[c++]=i<<2|r>>4,d[c++]=(15&r)<<4|o>>2,d[c++]=(3&o)<<6|63&s;return h}}()},gFX4:function(e,t,n){var i=n("zJ60"),r=n("Vo14"),o=n("eOtv"),s=n("x7D4")("socket.io-client");e.exports=t=l;var a=t.managers={};function l(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r=i(e),l=r.source,c=r.id;return t.forceNew||t["force new connection"]||!1===t.multiplex||a[c]&&r.path in a[c].nsps?(s("ignoring socket cache for %s",l),n=o(l,t)):(a[c]||(s("new io instance for %s",l),a[c]=o(l,t)),n=a[c]),r.query&&!t.query&&(t.query=r.query),n.socket(r.path,t)}t.protocol=r.protocol,t.connect=l,t.Manager=n("eOtv"),t.Socket=n("KFGy")},gI3B:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("6blF"),r=n("T1DM"),o=n("/21U"),s=n("nkY7");function a(e,t,n){void 0===e&&(e=0);var a=-1;return Object(o.a)(t)?a=Number(t)<1?1:Number(t):Object(s.a)(t)&&(n=t),Object(s.a)(n)||(n=r.a),new i.a(function(t){var i=Object(o.a)(e)?e:+e-n.now();return n.schedule(l,i,{index:0,period:a,subscriber:t})})}function l(e){var t=e.index,n=e.period,i=e.subscriber;if(i.next(t),!i.closed){if(-1===n)return i.complete();e.index=t+1,this.schedule(e,n)}}},h9Dq:function(e,t,n){"use strict";var i=n("mrSG"),r=function(e){function t(t,n){return e.call(this)||this}return i.c(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n("pugT").a);n.d(t,"a",function(){return o});var o=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return i.c(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,i=void 0;try{this.work(e)}catch(r){n=!0,i=!!r&&r||new Error(r)}if(n)return this.unsubscribe(),i},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(r)},iLxQ:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=!1,r={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){i=e},get useDeprecatedSynchronousErrorHandling(){return i}}},isby:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=Array.isArray||function(e){return e&&"number"==typeof e.length}},jMqj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("CcnG"),r=n("DtyJ");t.SimpleModalComponent=function(){function e(){}return e.prototype.mapDataObject=function(e){e=e||{};for(var t=Object.keys(e),n=0,i=t.length;n<i;n++){var r=t[n];this[r]=e[r]}},e.prototype.setupObserver=function(){var e=this;return r.Observable.create(function(t){return e.observer=t,e.completeOnDestroy(e),function(){e.close()}})},e.prototype.onClosing=function(e){this.closerCallback=e},e.prototype.close=function(){return this.closerCallback(this)},e.prototype.onKeydownHandler=function(e){this.options&&this.options.closeOnEscape&&this.close()},e.prototype.completeOnDestroy=function(e){var t=this,n=e.ngOnDestroy;e.ngOnDestroy=function(){n&&n.apply(e),t.observer&&(t.observer.next(t.result),t.observer.complete())}},e.prototype.ngOnDestroy=function(){},e.propDecorators={onKeydownHandler:[{type:i.HostListener,args:["document:keydown.escape",["$event"]]}]},e}()},kSER:function(e,t){e.exports=function(e,t){for(var n=[],i=(t=t||0)||0;i<e.length;i++)n[i-t]=e[i];return n}},lKxJ:function(e,t,n){e.exports=n("2pII"),e.exports.parser=n("Wm4p")},lUfZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("+wA8");t.SimpleModalModule=i.SimpleModalModule;var r=n("jMqj");t.SimpleModalComponent=r.SimpleModalComponent;var o=n("91uq");t.SimpleModalOptions=o.SimpleModalOptions,t.DefaultSimpleModalOptionConfig=o.DefaultSimpleModalOptionConfig;var s=n("xN82");t.SimpleModalService=s.SimpleModalService,t.SimpleModalServiceConfig=s.SimpleModalServiceConfig},lYZG:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("6blF"),r=n("0/uQ"),o=n("G5J1");function s(e){return new i.a(function(t){var n;try{n=e()}catch(i){return void t.error(i)}return(n?Object(r.a)(n):Object(o.b)()).subscribe(t)})}},lhf0:function(e,t,n){function i(e){var n;function i(){if(i.enabled){var e=i,r=+new Date;e.diff=r-(n||r),e.prev=n,e.curr=r,n=r;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,i){if("%%"===n)return n;a++;var r=t.formatters[i];return"function"==typeof r&&(n=r.call(e,o[a]),o.splice(a,1),a--),n}),t.formatArgs.call(e,o),(i.log||t.log||console.log.bind(console)).apply(e,o)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),i.destroy=r,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function r(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n("FGiv"),t.instances=[],t.names=[],t.skips=[],t.formatters={}},mChF:function(e,t,n){"use strict";function i(e){return e}n.d(t,"a",function(){return i})},mrSG:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"e",function(){return a}),n.d(t,"d",function(){return l}),n.d(t,"h",function(){return c}),n.d(t,"f",function(){return h}),n.d(t,"g",function(){return d});var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function s(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function a(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}},nkY7:function(e,t,n){"use strict";function i(e){return e&&"function"==typeof e.schedule}n.d(t,"a",function(){return i})},"oIG/":function(e,t){var n,i,r,o=String.fromCharCode;function s(e){for(var t,n,i=[],r=0,o=e.length;r<o;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<o?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function a(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function l(e,t){return o(e>>t&63|128)}function c(e,t){if(0==(4294967168&e))return o(e);var n="";return 0==(4294965248&e)?n=o(e>>6&31|192):0==(4294901760&e)?(a(e,t)||(e=65533),n=o(e>>12&15|224),n+=l(e,6)):0==(4292870144&e)&&(n=o(e>>18&7|240),n+=l(e,12),n+=l(e,6)),n+o(63&e|128)}function h(){if(r>=i)throw Error("Invalid byte index");var e=255&n[r];if(r++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(e){var t,o;if(r>i)throw Error("Invalid byte index");if(r==i)return!1;if(t=255&n[r],r++,0==(128&t))return t;if(192==(224&t)){if((o=(31&t)<<6|h())>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&t)){if((o=(15&t)<<12|h()<<6|h())>=2048)return a(o,e)?o:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(o=(7&t)<<18|h()<<12|h()<<6|h())>=65536&&o<=1114111)return o;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,i=s(e),r=i.length,o=-1,a="";++o<r;)a+=c(i[o],n);return a},decode:function(e,t){var a=!1!==(t=t||{}).strict;n=s(e),i=n.length,r=0;for(var l,c=[];!1!==(l=d(a));)c.push(l);return function(e){for(var t,n=e.length,i=-1,r="";++i<n;)(t=e[i])>65535&&(r+=o((t-=65536)>>>10&1023|55296),t=56320|1023&t),r+=o(t);return r}(c)}}},ojuT:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},p0ib:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("6blF"),r=n("nkY7"),o=n("Zn8D"),s=n("IUTb");function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,a=null,l=e[e.length-1];return Object(r.a)(l)?(a=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof l&&(n=e.pop()),null===a&&1===e.length&&e[0]instanceof i.a?e[0]:Object(o.a)(n)(Object(s.a)(e,a))}},psW0:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("mrSG"),r=n("zotm"),o=n("MGBS"),s=n("rPjj"),a=n("67Y/"),l=n("0/uQ");function c(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(i){return i.pipe(c(function(n,i){return Object(l.a)(e(n,i)).pipe(Object(a.a)(function(e,r){return t(n,e,i,r)}))},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new h(e,n))})}var h=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.project,this.concurrent))},e}(),d=function(e){function t(t,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY);var r=e.call(this,t)||this;return r.project=n,r.concurrent=i,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return i.c(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var i=new s.a(this,void 0,void 0);this.destination.add(i),Object(r.a)(this,e,t,n,i)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,i,r){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.a)},pugT:function(e,t,n){"use strict";var i,r=n("isby"),o=n("McSo"),s=n("2Bdj"),a={e:{}};function l(){try{return i.apply(this,arguments)}catch(e){return a.e=e,a}}function c(e){return i=e,l}var h=n("awvh");n.d(t,"a",function(){return d});var d=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this._parent,i=this._parents,l=this._unsubscribe,d=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,f=i?i.length:0;n;)n.remove(this),n=++p<f&&i[p]||null;if(Object(s.a)(l)&&c(l).call(this)===a&&(t=!0,e=e||(a.e instanceof h.a?u(a.e.errors):[a.e])),Object(r.a)(d))for(p=-1,f=d.length;++p<f;){var g=d[p];if(Object(o.a)(g)&&c(g.unsubscribe).call(g)===a){t=!0,e=e||[];var m=a.e;m instanceof h.a?e=e.concat(u(m.errors)):e.push(m)}}if(t)throw new h.a(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var i=n;(n=new e)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},e.EMPTY=((t=new e).closed=!0,t),e}();function u(e){return e.reduce(function(e,t){return e.concat(t instanceof h.a?t.errors:t)},[])}},rPjj:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("mrSG"),r=function(e){function t(t,n,i){var r=e.call(this)||this;return r.parent=t,r.outerValue=n,r.outerIndex=i,r.index=0,r}return i.c(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n("FFOo").a)},siIJ:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}()},u67D:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("En8+"),r=function(e){return function(t){for(var n=e[i.a]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t}}},uMaO:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("mrSG"),r=function(e){function t(t,n){var i=e.call(this)||this;return i.subject=t,i.subscriber=n,i.closed=!1,i}return i.c(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n("pugT").a)},x7D4:function(e,t,n){function i(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=n("Q80o")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,i)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=i,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(i())},xN82:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("CcnG"),r=n("CYgj");t.SimpleModalServiceConfig=function(){return function(){this.container=null}}(),t.SimpleModalService=function(){function e(e,t,n,i){this.resolver=e,this.applicationRef=t,this.injector=n,i&&(this.container=i.container)}return e.prototype.addModal=function(e,t,n){return this.modalHolderComponent||(this.modalHolderComponent=this.createSimpleModalHolder()),this.modalHolderComponent.addModal(e,t,n)},e.prototype.removeModal=function(e){return this.modalHolderComponent?this.modalHolderComponent.removeModal(e):Promise.resolve({})},e.prototype.removeAll=function(){return this.modalHolderComponent?this.modalHolderComponent.removeAllModals():Promise.resolve({})},Object.defineProperty(e.prototype,"container",{get:function(){return"string"==typeof this._container&&(this._container=document.getElementById(this._container)),this._container||(this.container=this.applicationRef.components[0].hostView.rootNodes[0]),this._container},set:function(e){this._container=e},enumerable:!0,configurable:!0}),e.prototype.createSimpleModalHolder=function(){var e=this,t=this.resolver.resolveComponentFactory(r.SimpleModalHolderComponent).create(this.injector),n=t.hostView.rootNodes[0];return this.applicationRef.attachView(t.hostView),t.onDestroy(function(){e.applicationRef.detachView(t.hostView)}),this.container.appendChild(n),t.instance},e.decorators=[{type:i.Injectable}],e}()},xTla:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i="function"==typeof Symbol&&Symbol.observable||"@@observable"},xXU7:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("6blF"),r=n("T1DM"),o=n("/21U");function s(e,t){return void 0===e&&(e=0),void 0===t&&(t=r.a),(!Object(o.a)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=r.a),new i.a(function(n){return n.add(t.schedule(a,e,{subscriber:n,counter:0,period:e})),n})}function a(e){var t=e.subscriber,n=e.counter,i=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:i},i)}},y3By:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var i=n("+umK");function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}function o(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:i.a}},yGWI:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),r=n("FFOo");function o(){return function(e){return e.lift(new s(e))}}var s=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var i=new a(e,n),r=t.subscribe(i);return i.closed||(i.connection=n.connect()),r},e}(),a=function(e){function t(t,n){var i=e.call(this,t)||this;return i.connectable=n,i}return i.c(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,i=e._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null},t}(r.a)},yeub:function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){e.exports=!1}},ypnn:function(e,t){e.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(t<0&&(t+=i),n<0&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var r=new Uint8Array(e),o=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)o[a]=r[s];return o.buffer}},zJ60:function(e,t,n){var i=n("Uxeu"),r=n("x7D4")("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(r("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),r("parse %s",e),n=i(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n}},zMFY:function(e,t){function n(){}e.exports=function(e,t,i){var r=!1;return i=i||n,o.count=e,0===e?t():o;function o(e,n){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(r=!0,t(e),t=i):0!==o.count||r||t(null,n)}}},zUnb:function(e,t,n){"use strict";n.r(t);var i=n("CcnG"),r=function(){return function(){}}(),o=n("K9Ia"),s=n("mrSG"),a="ej2_instances",l=0;function c(e,t){var n=t;return n.unshift(void 0),new(Function.prototype.bind.apply(e,n))}function h(e,t){for(var n=t,i=e.replace(/\[/g,".").replace(/\]/g,"").split("."),r=0;r<i.length&&!y(n);r++)n=n[i[r]];return n}function d(e,t,n){var i,r,o=e.replace(/\[/g,".").replace(/\]/g,"").split("."),s=n||{},a=s,l=o.length;for(i=0;i<l;i++)r=o[i],i+1===l?a[r]=void 0===t?{}:t:m(a[r])&&(a[r]={}),a=a[r];return s}function u(e){return!m(e)&&e.constructor==={}.constructor}function p(e,t){return e[t]}function f(e,t){if(!m(t))for(var n=e,i=t,r=0,o=Object.keys(t);r<o.length;r++){var s=o[r];m(n.deepMerge)||-1===n.deepMerge.indexOf(s)||!u(i[s])&&!Array.isArray(i[s])?n[s]=i[s]:g(n[s],n[s],i[s],!0)}}function g(e,t,n,i){var r=e||{},o=arguments.length;i&&(o-=1);for(var s=function(e){if(!a[e])return"continue";var t=a[e];Object.keys(t).forEach(function(e){var n=r[e],o=t[e];r[e]=i&&(u(o)||Array.isArray(o))?u(o)?g({},n||{},o,i):g([],n||[],o,i):o})},a=arguments,l=1;l<o;l++)s(l);return r}function m(e){return null==e}function y(e){return void 0===e}function v(e){return e+"_"+l++}function b(e,t){var n;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout(function(){return n=null,e.apply(i,r)},t)}}function w(e,t){return e===t||!(e===document||!e)&&w(e.parentNode,t)}function C(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}}function x(e){var t=e+"";return"auto"===t||-1!==t.indexOf("%")||-1!==t.indexOf("px")?t:t+"px"}function A(e,t){var n="string"==typeof e?document.querySelector(e):e;if(n[a])for(var i=0,r=n[a];i<r.length;i++){var o=r[i];if(o instanceof t)return o}return null}var S=/^(.*?):[ \t]*([^\r\n]*)$/gm,O="GET",E=function(){function e(e,t,n,i){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof e?(this.url=e,this.type=t?t.toUpperCase():O,this.mode=!!m(n)||n):"object"==typeof e&&(this.options=e,f(this,this.options)),this.type=this.type?this.type.toUpperCase():O,this.contentType=void 0!==this.contentType?this.contentType:i}return e.prototype.send=function(e){var t=this;this.data=m(e)?this.data:e;var n={cancel:!1};return new Promise(function(e,i){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,i)},m(t.onLoad)||(t.httpRequest.onload=t.onLoad),m(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),m(t.onAbort)||(t.httpRequest.onabort=t.onAbort),m(t.onError)||(t.httpRequest.onerror=t.onError),m(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),m(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&t.beforeSend(n),n.cancel||t.httpRequest.send(m(t.data)?null:t.data)})},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var n=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===n)n=void 0;else try{n=JSON.parse(n)}catch(i){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(n)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,n;t={};for(var i=S.exec(this.httpRequest.getAllResponseHeaders());i;)t[i[1].toLowerCase()]=i[2],i=S.exec(this.httpRequest.getAllResponseHeaders());return m(n=t[e.toLowerCase()])?null:n},e}(),I=function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,n,i,r,o){var s,a=e.addOrGetEventData(t);s=o?b(i,o):i,r&&(s=s.bind(r));for(var l=n.split(" "),c=0;c<l.length;c++)a.push({name:l[c],listener:i,debounce:s}),t.addEventListener(l[c],s);return s},e.remove=function(t,n,i){for(var r=e.addOrGetEventData(t),o=n.split(" "),s=function(e){var n,s=-1;r&&0!==r.length&&r.some(function(t,r){return t.name===o[e]&&t.listener===i&&(s=r,n=t.debounce,!0)}),-1!==s&&r.splice(s,1),n&&t.removeEventListener(o[e],n)},a=0;a<o.length;a++)s(a)},e.clearEvents=function(t){var n,i;i=g([],i,n=e.addOrGetEventData(t));for(var r=0;r<i.length;r++)t.removeEventListener(i[r].name,i[r].debounce),n.shift()},e.trigger=function(t,n,i){for(var r=0,o=e.addOrGetEventData(t);r<o.length;r++){var s=o[r];s.name===n&&s.debounce.call(this,i)}},e}(),D=/^svg|^path|^g/;function k(e,t){var n=D.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return void 0===t?n:(n.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(n.className=t.className),void 0!==t.id&&(n.id=t.id),void 0!==t.styles&&n.setAttribute("style",t.styles),void 0!==t.attrs&&F(n,t.attrs),n)}function P(e,t){for(var n=M(t),i=0,r=e;i<r.length;i++)for(var o=r[i],s=0,a=n;s<a.length;s++){var l=a[s];o.classList.contains(l)||o.classList.add(l)}return e}function T(e,t){for(var n=M(t),i=0,r=e;i<r.length;i++){var o=r[i];if(""!==o.className)for(var s=0,a=n;s<a.length;s++)o.classList.remove(a[s])}return e}function M(e){var t=[];return"string"==typeof e?t.push(e):t=e,t}function j(e){return""===e.style.visibility&&e.offsetWidth>0}function R(e,t,n){for(var i=document.createDocumentFragment(),r=0,o=e;r<o.length;r++)i.appendChild(o[r]);return t.insertBefore(i,t.firstElementChild),n&&_(t),e}function L(e,t,n){for(var i=document.createDocumentFragment(),r=0,o=e;r<o.length;r++)i.appendChild(o[r]);return t.appendChild(i),n&&_(t),e}function _(e){e.querySelectorAll("script").forEach(function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),N(t)})}function N(e){return e.parentNode.removeChild(e)}function B(e){var t=e.parentNode;I.clearEvents(e),t.removeChild(e)}function F(e,t){for(var n=e,i=0,r=Object.keys(t);i<r.length;i++){var o=r[i];n.setAttribute(o,t[o])}return n}function z(e,t){return void 0===t&&(t=document),t.querySelector(e)}function H(e,t){return void 0===t&&(t=document),t.querySelectorAll(e)}function V(e,t){var n=e;if("function"==typeof n.closest)return n.closest(t);for(;n&&1===n.nodeType;){if(G(n,t))return n;n=n.parentNode}return null}function U(e,t){void 0!==t&&Object.keys(t).forEach(function(n){e.style[n]=t[n]})}function W(e,t,n){P([e],t),T([e],n)}function G(e,t){var n=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return n?n.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var q=function(){function e(e){this.ranArray=[],this.boundedEvents={},m(e)||(this.context=e)}return e.prototype.on=function(e,t,n,i){if(!m(t)){var r=n||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:r}]:m(i)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:r}):-1===this.ranArray.indexOf(i)&&(this.ranArray.push(i),this.boundedEvents[e].push({handler:t,context:r,id:i}))}},e.prototype.off=function(e,t,n){if(!this.notExist(e)){var i=h(e,this.boundedEvents);if(t){for(var r=0;r<i.length;r++)if(n){if(i[r].id===n){i.splice(r,1);var o=this.ranArray.indexOf(n);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===i[r].handler){i.splice(r,1);break}}else delete this.boundedEvents[e]}},e.prototype.notify=function(e,t){if(!this.notExist(e)){t&&(t.name=e);for(var n=0,i=h(e,this.boundedEvents).slice(0);n<i.length;n++){var r=i[n];r.handler.call(r.context,t)}}},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)},e.prototype.isHandlerPresent=function(e,t){for(var n=0,i=e;n<i.length;n++)if(i[n].handler===t)return!0;return!1},e}(),Q=new RegExp("]"),Y=function(){function e(e,t){this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.refreshing=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new q(this),y(t)||(this.element="string"==typeof t?document.querySelector(t):t,m(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),y(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var n=this.isProtectedOnChange;this.isProtectedOnChange=!!t,f(this,e),!0!==t&&(f(this.changedProperties,e),this.dataBind()),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=n},e.callChildDataBind=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];if(t[r]instanceof Array)for(var o=0,s=t[r];o<s.length;o++){var a=s[o];void 0!==a.dataBind&&a.dataBind()}else t[r].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,n=this.changedProperties,i=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(n,i),this.isProtectedOnChange=t}},e.prototype.saveChanges=function(e,t,n){this.isProtectedOnChange||(this.oldProperties[e]=n,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=function(e){var t,n=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(n);var i="ej2"+function(e){for(var t="",n=0;n<5;n++)t+=(n?",":"")+e[n];return t}(n),r=function(n){n.source===window&&"string"==typeof n.data&&n.data.length<=32&&n.data===i&&(e(),t())};return window.addEventListener("message",r,!1),window.postMessage(i,"*"),t=function(){window.removeEventListener("message",r),e=r=i=void 0}}(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t){if(!0!==this.isDestroyed){var n=this.isProtectedOnChange;if(this.isProtectedOnChange=!1,this.modelObserver.notify(e,t),Q.test(e)){var i=h(e,this);i&&i.call(this,t)}this.isProtectedOnChange=n}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();P([this.element],["e-lib",e]),m(this.element.ej2_instances)?d("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter(function(t){return t!==e}),T([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&T([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}(),X=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,Z=/msie|trident/i,K=/Trident\/7\./,J=/(ipad|iphone|ipod touch)/i,$=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,ee=/android/i,te=/trident|windows phone|edge/i,ne=/(version)[ \/]([\w.]+)/i,ie={OPERA:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ \/]([\w.]+)/i,CHROME:/(chrome|crios)[ \/]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ \/]([\w.]+)/i,SAFARI:/(safari)[ \/]([\w.]+)/i,WEBKIT:/(webkit)[ \/]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});var re=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},n=[],i=0,r=Object.keys(ie);i<r.length;i++)if(n=e.userAgent.match(ie[r[i]])){if(t.name="opr"===n[1].toLowerCase()?"opera":n[1].toLowerCase(),t.name="crios"===n[1].toLowerCase()?"chrome":t.name,t.version=n[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(K)){t.name="msie";break}var o=e.userAgent.match(ne);"safari"===t.name&&o&&(t.version=o[2]);break}return t},e.getEvent=function(t){var n={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?n[t].isPointer:e.isTouch?n[t].isTouch+(e.isDevice?"":" "+n[t].isDevice):n[t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.getValue=function(t,n){var i=window.browserDetails;return void 0===i[t]?i[t]=n.test(e.userAgent):i[t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return y(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",Z)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return y(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return y(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return y(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",X)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",J)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",$)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",ee)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return y(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(y(window.cordova)&&y(window.PhoneGap)&&y(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",te)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return y(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return y(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return y(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return y(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!=typeof navigator?navigator.userAgent:"",e}();function oe(e,t,n,i){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof i||(e.properties[t]=c(i,[e,t,n])),e.properties[t]}function se(e,t,n,i,r,o){for(var s=[],a=n.length,l=0;l<a;l++){var h=i;if(o&&(h=i(n[l],e)),r){var d=c(h,[e,t,{},!0]);d.setProperties(n[l],!0),s.push(d)}else s.push(c(h,[e,t,n[l],!0]))}return s}function ae(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=e),this.properties[t]}}function le(e,t){return function(n){if(this.properties[t]!==n){var i=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,n,i),this.properties[t]=n}}}function ce(e,t,n){return function(){return oe(this,t,e,n)}}function he(e,t,n){return function(i){oe(this,t,e,n).setProperties(i)}}function de(e,t,n){return function(){var i=n({});return this.properties.hasOwnProperty(t)?this.properties[t]:oe(this,t,e,i)}}function ue(e,t,n){return function(i){var r=n(i,this);oe(this,t,e,r).setProperties(i)}}function pe(e,t,n){return function(){if(!this.properties.hasOwnProperty(t)){var i=se(this,t,e,n,!1);this.properties[t]=i}return this.properties[t]}}function fe(e,t,n){return function(i){var r=se(this,t,e,n,!1),o=se(this,t,i,n,!0);this.saveChanges(t,o,r),this.properties[t]=o}}function ge(e,t,n){return function(i){var r=this.properties.hasOwnProperty(t)?this.properties[t]:e,o=se(this,t,i,n,!0,!0);this.saveChanges(t,o,r),this.properties[t]=o}}function me(e,t,n){return function(){var i=n({});if(!this.properties.hasOwnProperty(t)){var r=se(this,t,e,i,!1);this.properties[t]=r}return this.properties[t]}}function ye(e){return function(t,n){var i={set:le(e,n),get:ae(e,n),enumerable:!0,configurable:!0};Object.defineProperty(t,n,i),Se(t,n,"prop",e)}}function ve(e,t){return function(n,i){var r={set:he(e,i,t),get:ce(e,i,t),enumerable:!0,configurable:!0};Object.defineProperty(n,i,r),Se(n,i,"complexProp",e,t)}}function be(e){return function(t,n){var i={set:ue({},n,e),get:de({},n,e),enumerable:!0,configurable:!0};Object.defineProperty(t,n,i),Se(t,n,"complexProp",{},e)}}function we(e,t){return function(n,i){var r={set:fe(e,i,t),get:pe(e,i,t),enumerable:!0,configurable:!0};Object.defineProperty(n,i,r),Se(n,i,"colProp",e,t)}}function Ce(e){return function(t,n){var i={set:ge([],n,e),get:me([],n,e),enumerable:!0,configurable:!0};Object.defineProperty(t,n,i),Se(t,n,"colProp",{},e)}}function xe(){return function(e,t){var n={set:function(e){var n=this.properties[t];if(n!==e){var i=function e(t,n){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:n};var i=h("propName",t);return i&&(n=i+"-"+n),e(h("parentObj",t),n)}(this,t);!1===y(n)&&i.context.removeEventListener(i.prefix,n),i.context.addEventListener(i.prefix,e),this.properties[t]=e}},get:ae(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,n),Se(e,t,"event")}}function Ae(e){}function Se(e,t,n,i,r){y(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[n+"s"].push({propertyName:t,defaultValue:i,type:r}),e.propList[n+"Names"].push(t)}var Oe=function(e){function t(t){var n=e.call(this,t,void 0)||this;return n.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},n}var n;return Object(s.c)(t,e),n=t,t.prototype.animate=function(e,t){var i=this.getModel(t=t||{});if("string"==typeof e)for(var r=0,o=Array.prototype.slice.call(H(e,document));r<o.length;r++)i.element=o[r],n.delayAnimation(i);else i.element=e,n.delayAnimation(i)},t.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var n=e.getAttribute("e-animation-id");if(n){var i=parseInt(n,10);cancelAnimationFrame(i),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},t.delayAnimation=function(e){e.delay?setTimeout(function(){n.applyAnimation(e)},e.delay):n.applyAnimation(e)},t.applyAnimation=function(e){var t=this;e.timeStamp=0;var n=0,i=0,r=0,o=e.duration;e.element.setAttribute("e-animate","true");var s=function(a){try{a?(e.timeStamp=a+e.timeStamp-(r=0===r?a:r),r=a,!n&&e.begin&&e.begin.call(t,e),n+=1,e.timeStamp<o&&e.timeStamp+e.timeStamp/n<o&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(t,e),requestAnimationFrame(s)):(cancelAnimationFrame(i),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(t,e))):(performance.now(),i=requestAnimationFrame(s),e.element.setAttribute("e-animation-id",i.toString()))}catch(l){cancelAnimationFrame(i),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(t,l)}};s()},t.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){},Object(s.b)([ye("FadeIn")],t.prototype,"name",void 0),Object(s.b)([ye(400)],t.prototype,"duration",void 0),Object(s.b)([ye("ease")],t.prototype,"timingFunction",void 0),Object(s.b)([ye(0)],t.prototype,"delay",void 0),Object(s.b)([xe()],t.prototype,"progress",void 0),Object(s.b)([xe()],t.prototype,"begin",void 0),Object(s.b)([xe()],t.prototype,"end",void 0),Object(s.b)([xe()],t.prototype,"fail",void 0),n=Object(s.b)([Ae],t)}(Y);function Ee(e,t,n){var i=function(e){return{selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350}}(t);return!1===i.rippleFlag||void 0===i.rippleFlag&&!je?Function:(e.setAttribute("data-ripple","true"),I.add(e,"mousedown",Ie,{parent:e,rippleOptions:i}),I.add(e,"mouseup",De,{parent:e,rippleOptions:i,done:n}),I.add(e,"mouseleave",ke,{parent:e,rippleOptions:i}),re.isPointer&&I.add(e,"transitionend",ke,{parent:e,rippleOptions:i}),function(){e.removeAttribute("data-ripple"),I.remove(e,"mousedown",Ie),I.remove(e,"mouseup",De),I.remove(e,"mouseleave",ke),I.remove(e,"transitionend",ke)})}function Ie(e){var t=e.target,n=this.rippleOptions.selector,i=n?V(t,n):t;if(!(!i||this.rippleOptions&&V(t,this.rippleOptions.ignore))){var r=i.getBoundingClientRect(),o=e.pageX-document.body.scrollLeft,s=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(o-r.left),Math.abs(o-r.right)),l=Math.max(Math.abs(s-r.top),Math.abs(s-r.bottom)),c=Math.sqrt(a*a+l*l),h=2*c+"px",d=o-r.left-c,u=s-r.top-c;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(d=0,u=0,h="100%"),i.classList.add("e-ripple");var p=k("div",{className:"e-ripple-element",styles:"width: "+h+";height: "+h+";left: "+d+"px;top: "+u+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});i.appendChild(p),window.getComputedStyle(p).getPropertyValue("opacity"),p.style.transform="scale(1)",i!==this.parent&&I.add(i,"mouseleave",ke,{parent:this.parent,rippleOptions:this.rippleOptions})}}function De(e){Pe(e,this)}function ke(e){Pe(e,this)}function Pe(e,t){var n=t.rippleOptions.duration,i=e.target,r=t.rippleOptions.selector,o=r?V(i,r):i;if(o&&(!o||-1!==o.className.indexOf("e-ripple"))){var s=H(".e-ripple-element",o),a=s[s.length-1];a&&(a.style.opacity="0.5"),t.parent!==o&&I.remove(o,"mouseleave",ke),setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a),o.getElementsByClassName("e-ripple-element").length||o.classList.remove("e-ripple"),t.done&&t.done(e)},n)}}var Te,Me,je=!1,Re=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var n=e.length;if(0!==n){this.loadedModules.length&&this.clearUnusedModule(e);for(var i=0;i<n;i++)for(var r=e[i],o=0,s=t;o<s.length;o++){var a=s[o],l=r.member;if(a.prototype.getModuleName()===r.member&&!this.isModuleLoaded(l)){var h=c(a,r.args),u=this.getMemberName(l);d(u,r.isProperty?a:h,this.parent);var p=r;p.member=u,this.loadedModules.push(p)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var n=t[e];n.isProperty||h(n.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t=this,n=e.map(function(e){return t.getMemberName(e.member)}),i=0,r=this.loadedModules.filter(function(e){return-1===n.indexOf(e.member)});i<r.length;i++){var o=r[i];o.isProperty||h(o.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(o),1),delete this.parent[o.member]}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,n=this.loadedModules;t<n.length;t++)if(n[t].member===this.getMemberName(e))return!0;return!1},e}(),Le=function(){function e(e,t,n,i){this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=h("callChildDataBind",Y),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.setProperties(n,!0),this.isParentArray=i}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(f(this,e),this.updateChange(!1,this.propName),this.clearChanges()):f(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(d(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),d(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,n){this.controlParent.isProtectedOnChange||(this.oldProperties[e]=n,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e}(),_e={latn:{_digits:"0123456789",_type:"numeric"}},Ne={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},Be=[0,1,2,3,4,5,6,7,8,9],Fe=function(){function e(){}return e.getMainObject=function(e,t){return h("main."+t,e)},e.getNumberingSystem=function(e){return h("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var n={},i=0,r=t||Object.keys(e);i<r.length;i++){var o=r[i];n.hasOwnProperty(e[o])||(n[e[o]]=o)}return n},e.getSymbolRegex=function(e){var t=e.map(function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},n=0,i=Object.keys(Ne);n<i.length;n++){var r=i[n];t[e[r]]=Ne[r]}return t},e.constructRegex=function(e){for(var t=e.length,n="",i=0;i<t;i++)n+=i!==t-1?e[i]+"|":e[i];return n},e.convertValueParts=function(e,t,n){return e.replace(t,function(e){return n[e]})},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=h("numbers",e),t.nSystem=h("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,n){var i={},r=this.getDefaultNumberingSystem(e);if(!y(r.nSystem)){var o=h(r.nSystem+"._digits",t);y(o)||(i.numericPair=this.reverseObject(o,Be),i.numberParseRegex=new RegExp(this.constructRegex(o),"g"),i.numericRegex="["+o[0]+"-"+o[9]+"]",n&&(i.numericRegex=o[0]+"-"+o[9],i.symbolNumberSystem=h("symbols-numberSystem-"+r.nSystem,r.obj),i.symbolMatch=this.getSymbolMatch(i.symbolNumberSystem),i.numberSystem=r.nSystem))}return i},e.getNumberMapper=function(e,t,n){var i={mapper:{}},r=this.getDefaultNumberingSystem(e);if(!y(r.nSystem)){i.numberSystem=r.nSystem,i.numberSymbols=h("symbols-numberSystem-"+r.nSystem,r.obj),i.timeSeparator=h("timeSeparator",i.numberSymbols);var o=h(r.nSystem+"._digits",t);if(!y(o))for(var s=0,a=Be;s<a.length;s++){var l=a[s];i.mapper[l]=o[l]}}return i},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=_e,e}(),ze={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},He=["infinity","nan","group","decimal","exponential"],Ve=function(){function e(){}return e.numberFormatter=function(e,t,n){var i,r=this,o=g({},t),s={},a={},l=Te.getDependables(n,e,"",!0);a.numberMapper=Fe.getNumberMapper(l.parserObject,Fe.getNumberingSystem(n),!0),a.currencySymbol=Te.getCurrencySymbol(l.numericObject,o.currency||st),a.percentSymbol=a.numberMapper.numberSymbols.percentSign,a.minusSymbol=a.numberMapper.numberSymbols.minusSign;var c=a.numberMapper.numberSymbols;if(t.format&&!Te.formatRegex.test(t.format))s=Te.customFormat(t.format,a,l.numericObject);else{g(o,Te.getProperNumericSkeleton(t.format||"N")),o.isCurrency="currency"===o.type,o.isPercent="percent"===o.type,i=Te.getSymbolPattern(o.type,a.numberMapper.numberSystem,l.numericObject,o.isAccount),o.groupOne=this.checkValueRange(o.maximumSignificantDigits,o.minimumSignificantDigits,!0),this.checkValueRange(o.maximumFractionDigits,o.minimumFractionDigits,!1,!0),y(o.fractionDigits)||(o.minimumFractionDigits=o.maximumFractionDigits=o.fractionDigits),y(o.useGrouping)&&(o.useGrouping=!0),o.isCurrency&&(i=i.replace(/\u00A4/g,Te.defaultCurrency));var h=i.split(";");if(s.nData=Te.getFormatData(h[1]||"-"+h[0],!0,a.currencySymbol),s.pData=Te.getFormatData(h[0],!1,a.currencySymbol),o.useGrouping&&(o.groupSeparator=c[He[2]],o.groupData=this.getGroupingDetails(h[0])),y(o.minimumFractionDigits)&&(o.minimumFractionDigits=s.nData.minimumFraction),y(o.maximumFractionDigits)){var d=s.nData.maximumFraction;o.maximumFractionDigits=y(d)&&o.isPercent?0:d}var u=o.minimumFractionDigits,p=o.maximumFractionDigits;y(u)||y(p)||u>p&&(o.maximumFractionDigits=u)}return g(s.nData,o),g(s.pData,o),function(e){return isNaN(e)?c[He[1]]:isFinite(e)?r.intNumberFormatter(e,s,a):c[He[0]]}},e.getGroupingDetails=function(e){var t={},n=e.match(Te.negativeDataRegex);if(n&&n[4]){var i=n[4],r=i.lastIndexOf(",");if(-1!==r){var o=i.split(".")[0];t.primary=o.length-r-1;var s=i.lastIndexOf(",",r-1);-1!==s&&(t.secondary=r-1-s)}}return t},e.checkValueRange=function(e,t,n,i){var r=i?"f":"s",o=0,s=ze["l"+r],a=ze["m"+r];if(y(e)||(this.checkRange(e,s,i),o++),y(t)||(this.checkRange(t,a,i),o++),2===o){if(!(e<t))return!0;C(a+"specified must be less than the"+s)}else n&&1===o&&C("Both"+a+"and"+a+"must be present");return!1},e.checkRange=function(e,t,n){var i=n?[0,20]:[1,21];(e<i[0]||e>i[1])&&C(t+"value must be within the range"+i[0]+"to"+i[1])},e.intNumberFormatter=function(e,t,n){var i;if(!y(t.nData.type)){e<0?(e*=-1,i=t.nData):i=0===e&&t.zeroData||t.pData;var r="";return i.isPercent&&(e*=100),i.groupOne?r=this.processSignificantDigits(e,i.minimumSignificantDigits,i.maximumSignificantDigits):(r=this.processFraction(e,i.minimumFractionDigits,i.maximumFractionDigits),i.minimumIntegerDigits&&(r=this.processMinimumIntegers(r,i.minimumIntegerDigits))),"scientific"===i.type&&(r=(r=e.toExponential(i.maximumFractionDigits)).replace("e",n.numberMapper.numberSymbols[He[4]])),r=r.replace(".",n.numberMapper.numberSymbols[He[3]]),i.useGrouping&&(r=this.groupNumbers(r,i.groupData.primary,i.groupSeparator||",",n.numberMapper.numberSymbols[He[3]]||".",i.groupData.secondary)),r=Fe.convertValueParts(r,Te.latnParseRegex,n.numberMapper.mapper),"N/A"===i.nlead?i.nlead:i.nlead+r+i.nend}},e.processSignificantDigits=function(e,t,n){var i=e+"";return i.length<t?e.toPrecision(t):+(i=e.toPrecision(n))+""},e.groupNumbers=function(e,t,n,i,r){for(var o=!m(r)&&0!==r,s=e.split(i),a=s[0],l=a.length,c="";l>t;)c=a.slice(l-t,l)+(c.length?n+c:""),l-=t,o&&(t=r,o=!1);return s[0]=a.slice(0,l)+(c.length?n:"")+c,s.join(i)},e.processFraction=function(e,t,n){var i=(e+"").split(".")[1],r=i?i.length:0;if(t&&r<t){var o="";if(0!==r){o+=e;for(var s=0;s<t-r;s++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!m(n)&&(r>n||0===n)?e.toFixed(n):e+""},e.processMinimumIntegers=function(e,t){var n=e.split("."),i=n[0],r=i.length;if(r<t){for(var o=0;o<t-r;o++)i="0"+i;n[0]=i}return n.join(".")},e}();!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;e.defaultCurrency="$";var n=["infinity","nan","group","decimal"],i=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,r={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};e.islamicRegex=/^islamic/;var o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;var s={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function a(t,n,i,r){var o,s=i||"date";if(-1!==e.basicPatterns.indexOf(t)){if(o=h(s+"Formats."+t,n),"dateTime"===s){var a=h("dateFormats."+t,n),l=h("timeFormats."+t,n);o=o.replace("{1}",a).replace("{0}",l)}}else o=h("dateTimeFormats.availableFormats."+t,n);return y(o)&&"yMd"===t&&(o="M/d/y"),o}function l(t,n,i,r){var o={},s=i||"gregorian";return o.parserObject=Fe.getMainObject(t,n)||e.defaultObject,r?o.numericObject=h("numbers",o.parserObject):o.dateObject=h("dates.calendars."+s,o.parserObject),o}function c(e,t,n,i){return h(e+"Formats-numberSystem-"+t+(i?".accounting":".standard"),n)||(i?h(e+"Formats-numberSystem-"+t+".standard",n):"")}function d(t){var n=t.match(e.formatRegex),i={},r=n[1].toUpperCase();return i.isAccount="A"===r,i.type=e.patternMatcher[r],t.length>1&&(i.fractionDigits=parseInt(n[2],10)),i}function u(n,i,r,o){var s=o?{}:{nlead:"",nend:""},a=n.match(e.customRegex);if(a){o||(s.nlead=p(a[1],r),s.nend=p(a[10],r),s.groupPattern=a[4]);var l=a[7];if(l&&i){var c=l.match(t);s.minimumFraction=m(c)?0:c.length,s.maximumFraction=l.length-1}}return s}function p(t,n){return t?t.replace(e.defaultCurrency,n):""}function f(e,t){return h("currencies."+t+".symbol",e)||"$"}function v(t,i,r){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},s=t.match(e.customRegex);(m(s)||""===s[5]&&"N/A"!==t)&&(o.type=void 0),o.nlead=s[1],o.nend=s[10];var a=s[6];o.useGrouping=-1!==a.indexOf(","),a=a.replace(/,/g,"");var l=s[7];if(-1!==a.indexOf("0")&&(o.minimumIntegerDigits=a.length-a.indexOf("0")),m(l)||(o.minimumFractionDigits=l.lastIndexOf("0"),o.maximumFractionDigits=l.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),m(i)?g(o,b([o.nlead,o.nend],"%","%")):(g(o,b([o.nlead,o.nend],"$",i.currencySymbol)),o.isCurrency||g(o,b([o.nlead,o.nend],"%",i.percentSymbol))),!m(r)){var h=c(o.type,i.numberMapper.numberSystem,r,!1);o.useGrouping&&(o.groupSeparator=i.numberMapper.numberSymbols[n[2]],o.groupData=Ve.getGroupingDetails(h.split(";")[0])),o.nlead=o.nlead.replace(/\'/g,""),o.nend=o.nend.replace(/\'/g,"")}return o}function b(e,t,n){for(var i={nlead:e[0],nend:e[1]},r=0;r<2;r++){var o=e[r],a=o.indexOf(t);if(-1!==a&&(a<o.indexOf("'")||a>o.lastIndexOf("'"))){i[s[r]]=o.substr(0,a)+n+o.substr(a+1),i[s[t]]=!0,i.type=i.isCurrency?"currency":"percent";break}}return i}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=a,e.getDependables=l,e.getSymbolPattern=c,e.getProperNumericSkeleton=d,e.getFormatData=u,e.getCurrencySymbol=f,e.customFormat=function(e,t,n){for(var i={},r=e.split(";"),o=["pData","nData","zeroData"],s=0;s<r.length;s++)i[o[s]]=v(r[s],t,n);return m(i.nData)&&(i.nData=g({},i.pData),i.nData.nlead=m(t)?"-"+i.nData.nlead:t.minusSymbol+i.nData.nlead),i},e.isCurrencyPercent=b,e.getDateSeparator=function(e){var t=(h("dateFormats.short",e)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,n,o){var s=l(n,e,t.calendar),c=t.format||a(t.skeleton,s.dateObject,t.type);if(o){if(-1!==(c=c.replace(i,function(e){return r[e]})).indexOf("z")){var d=c.match(/z/g).length,u=void 0,p={timeZone:{}};p.numMapper=Fe.getNumberMapper(s.parserObject,Fe.getNumberingSystem(n)),p.timeZone=h("dates.timeZoneNames",s.parserObject);var f=(new Date).getTimezoneOffset(),g=d<4?"+H;-H":p.timeZone.hourFormat;g=g.replace(/:/g,p.numMapper.timeSeparator),0===f?u=p.timeZone.gmtZeroFormat:(u=Ye.getTimeZoneValue(f,g),u=p.timeZone.gmtFormat.replace(/\{0\}/,u)),c=c.replace(/[z]+/,'"'+u+'"')}c=c.replace(/ $/,"")}return c},e.getActualNumberFormat=function(t,n,i){var r,o,s=l(i,t,"",!0),a={custom:!0},h={},p=(n.format||"").match(e.currencyFormatRegex);if(p){var m={};m.numberMapper=Fe.getNumberMapper(s.parserObject,Fe.getNumberingSystem(i),!0);var y=f(s.numericObject,n.currency||st),v=c("currency",m.numberMapper.numberSystem,s.numericObject,/a/i.test(n.format)),b=(v=v.replace(/\u00A4/g,y)).split(";");h.hasNegativePattern=b.length>1,h.nData=u(b[1]||"-"+b[0],!0,y),h.pData=u(b[0],!1,y),p[2]||n.minimumFractionDigits||n.maximumFractionDigits||(r=u(v.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(n.format)||!n.format){if(g(a,d(n.format||"N")),a.custom=!1,o="###0",(a.fractionDigits||n.minimumFractionDigits||n.maximumFractionDigits||r)&&(a.fractionDigits&&(n.minimumFractionDigits=n.maximumFractionDigits=a.fractionDigits),o=function(e,t,n){e+=".";for(var i=0;i<t;i++)e+="0";if(t<n)for(var r=n-t,o=0;o<r;o++)e+="#";return e}(o,r||a.fractionDigits||n.minimumFractionDigits||0,n.maximumFractionDigits||0)),n.minimumIntegerDigits&&(o=function(e,t){for(var n=o.split("."),i="",r=0;r<t;r++)i+="0";return n[1]?i+"."+n[1]:i}(0,n.minimumIntegerDigits)),n.useGrouping&&(o=function(e){var t=e.split("."),n=t[0],i=3-n.length%3;e="";for(var r=(n=(i&&1===i?"#":2===i?"##":"")+n).length-1;r>0;r-=3)e=","+n[r-2]+n[r-1]+n[r]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}(o)),"currency"===a.type){var w=o;o=h.pData.nlead+w+h.pData.nend,h.hasNegativePattern&&(o+=";"+h.nData.nlead+w+h.nData.nend)}"percent"===a.type&&(o+=" %")}else o=n.format.replace(/\'/g,'"');return o},e.getWeekData=function(e,t){var n="sun",i=h("supplemental.weekData.firstDay",t),r=e;return/en-/.test(r)&&(r=r.slice(3)),r=r.slice(0,2).toUpperCase()+r.substr(2),i&&(n=i[r]||"sun"),o[n]}}(Te||(Te={})),function(e){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){var n=e.getDate(),i=e.getMonth(),r=e.getFullYear(),o=i+1,s=r;o<3&&(s-=1,o+=12);var a=Math.floor(s/100),l=a-Math.floor(a/4)-2,c=Math.floor(365.25*(s+4716))+Math.floor(30.6001*(o+1))+n-l-1524,h=c+(l=(a=Math.floor((c-1867216.25)/36524.25))-Math.floor(a/4)+1)+1524,d=Math.floor((h-122.1)/365.25),u=Math.floor(365.25*d),p=Math.floor((h-u)/30.6001);n=h-u-Math.floor(30.6001*p),(i=Math.floor((h-u)/20.6001))>13&&(d+=1,i-=12),i-=1,r=d-4716;var f=c-24e5,g=c-1948084,m=Math.floor(g/10631);g-=10631*m;var y=Math.floor((g-.1335)/(10631/30)),v=30*m+y;g-=Math.floor(y*(10631/30)+.1335);var b=Math.floor((g+28.5001)/29.5);13===b&&(b=12);for(var w=g-Math.floor(29.5001*b-29),C=0;C<t.length&&!(t[C]>f);C++);var x=C+16260,A=Math.floor((x-1)/12),S=A+1,O=x-12*A,E=f-t[C-1]+1;return(E+"").length>2&&(E=w,O=b,S=v),{year:S,month:O,date:E}},e.toGregorian=function(e,n,i){var r=Math.floor(i+t[12*(e-1)+1+(n-1)-16260-1]-1+24e5+.5),o=Math.floor((r-1867216.25)/36524.25),s=1524+(o=r+1+o-Math.floor(o/4)),a=Math.floor((s-122.1)/365.25),l=Math.floor(365.25*a),c=Math.floor((s-l)/30.6001),h=s-l-Math.floor(30.6001*c),d=c-(c>13.5?13:1),u=a-(d>2.5?4716:4715);return u<=0&&d--,new Date(u+"/"+d+"/"+h)}}(Me||(Me={}));var Ue,We=/\/MMMMM|MMMM|MMM|a|LLL|EEEEE|EEEE|E|K|ccc|G+|z+/gi,Ge=["sun","mon","tue","wed","thu","fri","sat"],qe={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate"},Qe={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era"},Ye=function(){function e(){}return e.dateFormat=function(e,t,n){var i=this,r=Te.getDependables(n,e,t.calendar),o={isIslamic:Te.islamicRegex.test(t.calendar)},s=t.format||Te.getResultantPattern(t.skeleton,r.dateObject,t.type);if(o.dateSeperator=Te.getDateSeparator(r.dateObject),y(s))C("Format options or type given must be invalid");else{o.pattern=s,o.numMapper=Fe.getNumberMapper(r.parserObject,Fe.getNumberingSystem(n));for(var a=0,l=s.match(We)||[];a<l.length;a++){var c=l[a],d=c.length,u=c[0];switch("K"===u&&(u="h"),u){case"E":case"c":o.weekday=r.dateObject[Te.days]["stand-alone"][Te.monthIndex[d]];break;case"M":case"L":o.month=r.dateObject[Te.month]["stand-alone"][Te.monthIndex[d]];break;case"a":o.designator=h("dayPeriods.format.wide",r.dateObject);break;case"G":o.era=h("eras."+(d<=3?"eraAbbr":4===d?"eraNames":"eraNarrow"),r.dateObject);break;case"z":o.timeZone=h("dates.timeZoneNames",r.parserObject)}}}return function(e){return isNaN(e.getDate())?null:i.intDateFormatter(e,o)}},e.intDateFormatter=function(e,t){for(var n="",i=t.pattern.match(Te.dateParseRegex),r=this.getCurrentDateValue(e,t.isIslamic),o=0,s=i;o<s.length;o++){var a=s[o],l=a.length,c=a[0];"K"===c&&(c="h");var h=void 0,d=void 0,u=void 0,p="";switch(c){case"M":case"L":h=r.month,l>2?n+=t.month[h]:d=!0;break;case"E":case"c":n+=t.weekday[Ge[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":d=!0,h="d"===c?r.date:e[qe[c]](),"h"===c&&(h=h%12||12);break;case"y":u=!0,p+=r.year,2===l&&(p=p.substr(p.length-2));break;case"a":var f=e.getHours()<12?"am":"pm";n+=t.designator[f];break;case"G":var g=e.getFullYear()<0?0:1,y=t.era[g];m(y)&&(y=t.era[g?0:1]),n+=y||"";break;case"'":n+="''"===a?"'":a.replace(/\'/g,"");break;case"z":var v=e.getTimezoneOffset(),b=l<4?"+H;-H":t.timeZone.hourFormat;b=b.replace(/:/g,t.numMapper.timeSeparator),0===v?n+=t.timeZone.gmtZeroFormat:(u=!0,p=this.getTimeZoneValue(v,b)),p=t.timeZone.gmtFormat.replace(/\{0\}/,p);break;case":":n+=t.numMapper.numberSymbols.timeSeparator;break;case"/":n+=t.dateSeperator;break;default:n+=a}d&&(u=!0,p=this.checkTwodigitNumber(h,l)),u&&(n+=Fe.convertValueParts(p,Te.latnParseRegex,t.numMapper.mapper))}return n},e.getCurrentDateValue=function(e,t){return t?Me.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},e.checkTwodigitNumber=function(e,t){var n=e+"";return 2===t&&2!==n.length?"0"+n:n},e.getTimeZoneValue=function(e,t){var n=this,i=t.split(";")[e>0?1:0],r=Math.abs(e);return i.replace(/HH?|mm/g,function(e){var t=e.length,i=-1!==e.indexOf("H");return n.checkTwodigitNumber(Math.floor(i?r/60:r%60),t)})},e}(),Xe=/^[0-9]*$/,Ze={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth"},Ke=function(){function e(){}return e.dateParser=function(e,t,n){var i,r=this,o=Te.getDependables(n,e,t.calendar),s=Fe.getCurrentNumericOptions(o.parserObject,Fe.getNumberingSystem(n)),a={},l=t.format||Te.getResultantPattern(t.skeleton,o.dateObject,t.type),c="";if(y(l))C("Format options or type given must be invalid");else{a={isIslamic:Te.islamicRegex.test(t.calendar),pattern:l,evalposition:{}};for(var d=l.match(Te.dateParseRegex)||[],u=d.length,p=0,f=0,g=!1,v=s.numericRegex,b=Fe.getNumberMapper(o.parserObject,Fe.getNumberingSystem(n)),w=0;w<u;w++){var x=d[w],A=x.length,S="K"===x[0]?"h":x[0],O=void 0,E=void 0,I=Qe[S],D=2===A?"":"?";switch(g&&(p=f,g=!1),S){case"E":case"c":var k=Fe.reverseObject(o.dateObject[Te.days]["stand-alone"][Te.monthIndex[A]]);c+="("+Object.keys(k).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":E=!0,("M"===S||"L"===S)&&A>2?(a[I]=Fe.reverseObject(o.dateObject.months["stand-alone"][Te.monthIndex[A]]),c+="("+Object.keys(a[I]).join("|")+")"):(O=!0,c+="("+v+v+D+")"),"h"===S&&(a.hour12=!0);break;case"y":E=O=!0,c+=2===A?"("+v+v+")":"("+v+"{"+A+",})";break;case"a":E=!0,a[I]=Fe.reverseObject(h("dayPeriods.format.wide",o.dateObject)),c+="("+Object.keys(a[I]).join("|")+")";break;case"G":E=!0,a[I]=Fe.reverseObject(h("eras."+(A<=3?"eraAbbr":4===A?"eraNames":"eraNarrow"),o.dateObject)),c+="("+Object.keys(a[I]).join("|")+"?)";break;case"z":E=0!==(new Date).getTimezoneOffset(),a[I]=h("dates.timeZoneNames",o.parserObject);var P=a[I],T=(i=A<4)?"+H;-H":P.hourFormat;T=T.replace(/:/g,b.timeSeparator),c+="("+this.parseTimeZoneRegx(T,P,v)+")?",g=!0,f=i?6:12;break;case"'":c+="("+x.replace(/\'/g,"")+")?";break;default:c+="([\\D])"}E&&(a.evalposition[I]={isNumber:O,pos:w+1+p,hourOnly:i}),w!==u-1||m(c)||(a.parserRegex=new RegExp("^"+c+"$"))}}return function(e){var t=r.internalDateParse(e,a,s);if(m(t)||!Object.keys(t).length)return null;if(a.isIslamic){var n={},i=t.year,o=t.day,l=t.month,c=i?i+"":"",h=2===c.length;i&&l&&o&&!h||(n=Me.getHijriDate(new Date)),h&&(i=parseInt((n.year+"").slice(0,2)+c,10));var d=Me.toGregorian(i||n.year,l||n.month,o||n.date);t.year=d.getFullYear(),t.month=d.getMonth()+1,t.day=d.getDate()}return r.getDateObject(t)}},e.getDateObject=function(e,t){var n=t||new Date;n.setMilliseconds(0);var i=e.year,r=e.designator,o=e.timeZone;y(i)||((i+"").length<=2&&(i+=100*Math.floor(n.getFullYear()/100)),n.setFullYear(i));for(var s=0,a=["hour","minute","second","month","day"];s<a.length;s++){var l=a[s],c=e[l];if(!y(c))if("month"===l){if((c-=1)<0||c>11)return new Date("invalid");var h=n.getDate();n.setDate(1),n[Ze[l]](c);var d=new Date(n.getFullYear(),c+1,0).getDate();n.setDate(h<d?h:d)}else{if("day"===l){var u=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();if(c<1||c>u)return null}n[Ze[l]](c)}}if(!y(r)){var p=n.getHours();"pm"===r?n.setHours(p+(12===p?0:12)):12===p&&n.setHours(0)}if(!y(o)){var f=o-n.getTimezoneOffset();0!==f&&n.setMinutes(n.getMinutes()+f)}return n},e.internalDateParse=function(e,t,n){var i=e.match(t.parserRegex),r={hour:0,minute:0,second:0};if(m(i))return null;for(var o=0,s=Object.keys(t.evalposition);o<s.length;o++){var a=s[o],l=t.evalposition[a],c=i[l.pos];if(l.isNumber)r[a]=this.internalNumberParser(c,n);else if("timeZone"!==a||y(c))r[a]=t[a][c];else{var h=l.pos,d=void 0,u=i[h+1],p=!y(u);l.hourOnly?d=60*this.getZoneValue(p,u,i[h+4],n):(d=60*this.getZoneValue(p,u,i[h+7],n),d+=this.getZoneValue(p,i[h+4],i[h+10],n)),m(d)||(r[a]=d)}}return t.hour12&&(r.hour12=!0),r},e.internalNumberParser=function(e,t){return e=Fe.convertValueParts(e,t.numberParseRegex,t.numericPair),Xe.test(e)?+e:null},e.parseTimeZoneRegx=function(e,t,n){var i,r=t.gmtFormat,o="("+n+")("+n+")";return i=e.replace("+","\\+"),(i=-1!==e.indexOf("HH")?i.replace(/HH|mm/g,"("+o+")"):i.replace(/H|m/g,"("+o+"?)")).split(";").map(function(e){return r.replace("{0}",e)}).join("|")+"|"+t.gmtZeroFormat},e.getZoneValue=function(e,t,n,i){var r=e?t:n;if(!r)return 0;var o=this.internalNumberParser(r,i);return e?-o:o},e}(),Je=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,$e=/,/g,et=["minusSign","infinity"],tt=function(){function e(){}return e.numberParser=function(e,t,n){var i,r=this,o=Te.getDependables(n,e,"",!0),s={custom:!0};Te.formatRegex.test(t.format)||!t.format?(g(s,Te.getProperNumericSkeleton(t.format||"N")),s.custom=!1):g(s,Te.customFormat(t.format,null,null)),i=Fe.getCurrentNumericOptions(o.parserObject,Fe.getNumberingSystem(n),!0),s.symbolRegex=Fe.getSymbolRegex(Object.keys(i.symbolMatch)),s.infinity=i.symbolNumberSystem[et[1]];var a=Te.getSymbolPattern(s.type,i.numberSystem,o.numericObject,s.isAccount);if(a){var l=(a=a.replace(/\u00A4/g,Te.defaultCurrency)).split(";");s.nData=Te.getFormatData(l[1]||"-"+l[0],!0,""),s.pData=Te.getFormatData(l[0],!0,"")}return function(e){return r.getParsedNumber(e,s,i)}},e.getParsedNumber=function(e,t,n){var i,r,o,s,a,l;if(-1!==e.indexOf(t.infinity))return 1/0;e=Fe.convertValueParts(e,t.symbolRegex,n.symbolMatch),0===(e=Fe.convertValueParts(e,n.numberParseRegex,n.numericPair)).indexOf(".")&&(e="0"+e);var c=e.match(Je);if(m(c))return NaN;s=c[1],o=c[2];var h=c[5];return a=c[6],r=(i=t.custom?s===t.nData.nlead&&a===t.nData.nend:-1!==s.indexOf(t.nData.nlead)&&-1!==a.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,o=o.replace($e,""),h&&(o+=h),l=+o,("percent"===t.type||r)&&(l/=100),(t.custom||t.fractionDigits)&&(l=parseFloat(l.toFixed(t.custom?i?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),i&&(l*=-1),l},e}(),nt=new q,it=!1,rt={},ot="en-US",st="USD",at=function(){function e(e){e&&(this.culture=e)}return e.prototype.getDateFormat=function(e){return Ye.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},rt)},e.prototype.getNumberFormat=function(e){return e&&!e.currency&&(e.currency=st),Ve.numberFormatter(this.getCulture(),e||{},rt)},e.prototype.getDateParser=function(e){return Ke.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},rt)},e.prototype.getNumberParser=function(e){return tt.numberParser(this.getCulture(),e||{format:"N"},rt)},e.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},e.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},e.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},e.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},e.prototype.getDatePattern=function(e,t){return Te.getActualDateTimeFormat(this.getCulture(),e,rt,t)},e.prototype.getNumberPattern=function(e){return Te.getActualNumberFormat(this.getCulture(),e,rt)},e.prototype.getFirstDayOfWeek=function(){return Te.getWeekData(this.getCulture(),rt)},e.prototype.getCulture=function(){return this.culture||ot},e}(),lt=0,ct=0,ht=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.randomId=function(){if("undefined"!=typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}(),i.needsID=!1,i.createElement=k,m(i.enableRtl)&&i.setProperties({enableRtl:it},!0),m(i.locale)&&i.setProperties({locale:ot},!0),i.moduleLoader=new Re(i),i.localObserver=new q(i),nt.on("notifyExternalChange",i.detectFunction,i,i.randomId),y(n)||i.appendTo(),i}return Object(s.c)(t,e),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(T([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),e.prototype.destroy.call(this),this.moduleLoader.clean(),nt.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new q(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.appendTo=function(t){if(m(t)||"string"!=typeof t?m(t)||(this.element=t):this.element=document.querySelector(t),!m(this.element)){var n="e-"+this.getModuleName().toLowerCase();P([this.element],["e-control",n]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var i=h("ej2_instances",this.element);i&&-1!==i.indexOf(this)||e.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.trigger("created")}},t.prototype.dataBind=function(){this.injectModules(),e.prototype.dataBind.call(this)},t.prototype.on=function(e,t,n){if("string"==typeof e)this.localObserver.on(e,t,n);else for(var i=0,r=e;i<r.length;i++){var o=r[i];this.localObserver.on(o.event,o.handler,o.context)}},t.prototype.off=function(e,t){if("string"==typeof e)this.localObserver.off(e,t);else for(var n=0,i=e;n<i.length;n++){var r=i[n];this.localObserver.off(r.event,r.handler)}},t.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var n=0;n<e.length;n++)-1===this.prototype.injectedModules.indexOf(e[n])&&this.prototype.injectedModules.push(e[n])},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},t.prototype.mergePersistData=function(){var e=window.localStorage.getItem(this.getModuleName()+this.element.id);m(e)||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())},t.prototype.clearTemplate=function(e,t){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(lt=0),Ue=this.pageID(location.href),ct=history.length,e+"_"+Ue+"_"+lt++},t.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return Math.abs(t)},t.prototype.isHistoryChanged=function(){return Ue!==this.pageID(location.href)||ct!==history.length},t.prototype.addOnPersist=function(e){for(var t=this,n={},i=0,r=e;i<r.length;i++){var o,s=r[i];y(o=h(s,this))||d(s,this.getActualProperties(o),n)}return JSON.stringify(n,function(e,n){return t.getActualProperties(n)})},t.prototype.getActualProperties=function(e){return e instanceof Le?h("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,t){for(var n={},i=function(i){if(-1===t.indexOf(i)){var o=e[i];if("object"!=typeof o||o instanceof Array)n[i]=o;else{var s=t.filter(function(e){return new RegExp(i+".").test(e)}).map(function(e){return e.replace(i+".","")});n[i]=r.iterateJsonProperties(r.getActualProperties(o),s)}}},r=this,o=0,s=Object.keys(e);o<s.length;o++)i(s[o]);return n},Object(s.b)([ye(!1)],t.prototype,"enablePersistence",void 0),Object(s.b)([ye()],t.prototype,"enableRtl",void 0),Object(s.b)([ye()],t.prototype,"locale",void 0),Object(s.b)([Ae],t)}(Y);"undefined"!=typeof window&&window.addEventListener("popstate",function(){lt=0});var dt={left:0,top:0,bottom:0,right:0},ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(0)],t.prototype,"left",void 0),Object(s.b)([ye(0)],t.prototype,"top",void 0),t}(Le),pt=function(e){function t(t,i){var r=e.call(this,i,t)||this;return r.dragLimit=n.getDefaultPosition(),r.borderWidth=n.getDefaultPosition(),r.padding=n.getDefaultPosition(),r.diffX=0,r.prevLeft=0,r.prevTop=0,r.dragProcessStarted=!1,r.tapHoldTimer=0,r.externalInitialize=!1,r.diffY=0,r.droppables={},r.bind(),r}var n;return Object(s.c)(t,e),n=t,t.prototype.bind=function(){this.toggleEvents(),re.isIE&&P([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return g({},dt)},t.prototype.toggleEvents=function(e){var t;y(this.handle)||(t=z(this.handle,this.element));var n=this.enableTapHold&&re.isDevice&&re.isTouch?this.mobileInitialize:this.initialize;e?I.remove(t||this.element,re.touchStartEvent,n):I.add(t||this.element,re.touchStartEvent,n,this)},t.prototype.mobileInitialize=function(e){var t=this,n=e.currentTarget;this.tapHoldTimer=setTimeout(function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,n)},this.tapHoldThreshold),I.add(document,re.touchMoveEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),I.remove(document,re.touchMoveEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return m(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]?e:this.getScrollableParent(e.parentNode,t)},t.prototype.initialize=function(e,t){if(this.target=e.currentTarget||t,this.dragProcessStarted=!1,!this.abort||m(V(e.target,this.abort))){this.preventDefault&&!y(e.changedTouches)&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var n=this.getCoordinates(e);if(this.initialPosition={x:n.pageX,y:n.pageY},!this.clone){var i=this.element.getBoundingClientRect(),r=this.getScrollableParent(this.element.parentNode,"vertical"),o=this.getScrollableParent(this.element.parentNode,"horizontal"),s=r?r.scrollTop:0;this.relativeXPosition=n.pageX-(i.left+(o?o.scrollLeft:0)),this.relativeYPosition=n.pageY-(i.top+s)}this.externalInitialize?this.intDragStart(e):(I.add(document,re.touchMoveEvent,this.intDragStart,this),I.add(document,re.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,I.trigger(document.documentElement,re.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!y(e.changedTouches);if(!t||1===e.changedTouches.length){t&&e.preventDefault();var n,i=this.getCoordinates(e),r=getComputedStyle(this.element);this.margin={left:parseInt(r.marginLeft,10),top:parseInt(r.marginTop,10),right:parseInt(r.marginRight,10),bottom:parseInt(r.marginBottom,10)};var o=this.element;if(this.clone&&this.dragTarget){var s=V(e.target,this.dragTarget);m(s)||(o=s)}this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e);var a=this.initialPosition.x-i.pageX,l=this.initialPosition.y-i.pageY;if(Math.sqrt(a*a+l*l)>=this.distance||this.externalInitialize){var c=this.getHelperElement(e);if(!c||m(c))return;var h=this.helperElement=c;if(this.parentClientRect=this.calculateParentPosition(h.offsetParent),this.dragStart){var d=this.getProperTargetElement(e);this.trigger("dragStart",{event:e,element:o,target:d})}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),n={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top);var u=this.getProcessedPositionValue({top:n.top-this.diffY+"px",left:n.left-this.diffX+"px"});U(h,this.getDragPosition({position:"absolute",left:u.left,top:u.top})),I.remove(document,re.touchMoveEvent,this.intDragStart),I.remove(document,re.touchEndEvent,this.intDestroy),j(h)?(I.add(document,re.touchMoveEvent,this.intDrag,this),I.add(document,re.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,h)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))}}},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)this.top+=(e=e.offsetParent).offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(m(e))return{left:0,top:0};var t=e.getBoundingClientRect(),n=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(n.marginLeft,10),top:t.top+window.pageYOffset-parseInt(n.marginTop,10)}},t.prototype.intDrag=function(e){if(y(e.changedTouches)||1===e.changedTouches.length){var t,n;this.position=this.getMousePosition(e);var i=this.getDocumentWidthHeight("Height");i<this.position.top&&(this.position.top=i);var r=this.getDocumentWidthHeight("Width");if(r<this.position.left&&(this.position.left=r),this.drag){var o=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:o})}var s=this.checkTargetElement(e);s.target&&s.instance?(s.instance.dragData[this.scope]=this.droppables[this.scope],s.instance.intOver(e,s.target),this.hoverObject=s):this.hoverObject&&(this.hoverObject.instance.intOut(e,s.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null);var a=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var l=this.parentClientRect.left,c=this.parentClientRect.top,h=this.getCoordinates(e),d=h.pageX,u=h.pageY,p=this.position.left-this.diffX,f=this.position.top-this.diffY;if(this.dragArea){var g=getComputedStyle(a);if(this.pageX!==d||this.skipDistanceCheck){var v=a.offsetWidth+(parseFloat(g.marginLeft)+parseFloat(g.marginRight));t=this.dragLimit.left+window.pageXOffset>p?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<p+v?this.dragLimit.right-v:p}if(this.pageY!==u||this.skipDistanceCheck){var b=a.offsetHeight+(parseFloat(g.marginTop)+parseFloat(g.marginBottom));n=this.dragLimit.top+window.pageYOffset>f?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<f+b?this.dragLimit.bottom-b:f}}else t=p,n=f;var w=c+this.borderWidth.top,C=l+this.borderWidth.left;this.dragProcessStarted&&(m(n)&&(n=this.prevTop),m(t)&&(t=this.prevLeft));var x=this.getProcessedPositionValue({top:n-w+"px",left:t-C+"px"});U(a,this.getDragPosition(x)),!this.elementInViewport(a)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=n,this.position.left=t,this.position.top=n,this.pageX=d,this.pageY=u}},t.prototype.getDragPosition=function(e){var t=g({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,n=document.documentElement;return Math.max(t["scroll"+e],n["scroll"+e],t["offset"+e],n["offset"+e],n["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,y(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var n=this.checkTargetElement(e);n.target&&n.instance&&(n.instance.dragStopCalled=!0,n.instance.dragData[this.scope]=this.droppables[this.scope],n.instance.intDrop(e,n.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),I.remove(document,re.touchMoveEvent,this.intDragStart),I.remove(document,re.touchEndEvent,this.intDragStop),I.remove(document,re.touchEndEvent,this.intDestroy),I.remove(document,re.touchMoveEvent,this.intDrag)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.setDragArea=function(){var e,t,n,i=0,r=0;if(n="string"==typeof this.dragArea?z(this.dragArea):this.dragArea){var o=n.getBoundingClientRect();e=o.width?o.width:o.right-o.left,t=o.height?o.height:o.bottom-o.top;for(var s=["Top","Left","Bottom","Right"],a=getComputedStyle(n),l=0;l<s.length;l++){var c=s[l],h=a["border"+c+"Width"],d=a["padding"+c],u=c.toLowerCase();this.borderWidth[u]=isNaN(parseFloat(h))?0:parseFloat(h),this.padding[u]=isNaN(parseFloat(d))?0:parseFloat(d)}i=o.top,this.dragLimit.left=(r=o.left)+this.borderWidth.left+this.padding.left,this.dragLimit.top=i+this.borderWidth.top+this.padding.top,this.dragLimit.right=r+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=i+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,n=this.getCoordinates(e),i=this.helperElement.style.display||"";return w(e.target,this.helperElement)||-1!==e.type.indexOf("touch")?(this.helperElement.style.display="none",t=document.elementFromPoint(n.clientX,n.clientY),this.helperElement.style.display=i):t=e.target,t},t.prototype.getMousePosition=function(e){var t=this.getCoordinates(e),n=this.clone?t.pageX:t.pageX+window.pageXOffset-this.relativeXPosition,i=this.clone?t.pageY:t.pageY+window.pageYOffset-this.relativeYPosition;return{left:n-(this.margin.left+this.cursorAt.left),top:i-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=k("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,n){this.droppables[this.scope]=e?null:{draggable:t,helper:n,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),n=this.getDropInstance(t);if(!n&&t&&!m(t.parentNode)){var i=V(t.parentNode,".e-droppable")||t.parentElement;i&&(n=this.getDropInstance(i))}return{target:t,instance:n}},t.prototype.getDropInstance=function(e){var t,n=e&&e.ej2_instances;if(n)for(var i=0,r=n;i<r.length;i++){var o=r[i];if("droppable"===o.getModuleName()){t=o;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},Object(s.b)([ve({},ut)],t.prototype,"cursorAt",void 0),Object(s.b)([ye(!0)],t.prototype,"clone",void 0),Object(s.b)([ye()],t.prototype,"dragArea",void 0),Object(s.b)([xe()],t.prototype,"drag",void 0),Object(s.b)([xe()],t.prototype,"dragStart",void 0),Object(s.b)([xe()],t.prototype,"dragStop",void 0),Object(s.b)([ye(1)],t.prototype,"distance",void 0),Object(s.b)([ye()],t.prototype,"handle",void 0),Object(s.b)([ye()],t.prototype,"abort",void 0),Object(s.b)([ye()],t.prototype,"helper",void 0),Object(s.b)([ye("default")],t.prototype,"scope",void 0),Object(s.b)([ye("")],t.prototype,"dragTarget",void 0),Object(s.b)([ye()],t.prototype,"axis",void 0),Object(s.b)([ye()],t.prototype,"queryPositionInfo",void 0),Object(s.b)([ye(!1)],t.prototype,"enableTailMode",void 0),Object(s.b)([ye(!1)],t.prototype,"skipDistanceCheck",void 0),Object(s.b)([ye(!0)],t.prototype,"preventDefault",void 0),Object(s.b)([ye(!1)],t.prototype,"enableAutoScroll",void 0),Object(s.b)([ye(!1)],t.prototype,"enableTapHold",void 0),Object(s.b)([ye(750)],t.prototype,"tapHoldThreshold",void 0),n=Object(s.b)([Ae],t)}(Y),ft=function(e){function t(t,n){var i=e.call(this,n,t)||this;return i.mouseOver=!1,i.dragData={},i.dragStopCalled=!1,i.bind(),i}return Object(s.c)(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){I.add(this.element,re.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){this.mouseOver||(this.trigger("over",{event:e,target:t,dragData:this.dragData[this.scope]}),this.mouseOver=!0)},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var n,i=!0,r=this.dragData[this.scope],o=!!r&&r.helper&&j(r.helper);o&&(n=this.isDropArea(e,r.helper,t),this.accept&&(i=G(r.helper,this.accept))),o&&this.drop&&n.canDrop&&i&&this.trigger("drop",{event:e,target:n.target,droppedElement:r.helper,dragData:r}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,n){var i={canDrop:!0,target:n||e.target},r="touchend"===e.type;if(r||i.target===t){t.style.display="none";var o=r?e.changedTouches[0]:e,s=document.elementFromPoint(o.clientX,o.clientY);i.canDrop=!1,i.canDrop=w(s,this.element),i.canDrop&&(i.target=s),t.style.display=""}return i},t.prototype.destroy=function(){I.remove(this.element,re.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},Object(s.b)([ye()],t.prototype,"accept",void 0),Object(s.b)([ye("default")],t.prototype,"scope",void 0),Object(s.b)([xe()],t.prototype,"drop",void 0),Object(s.b)([xe()],t.prototype,"over",void 0),Object(s.b)([xe()],t.prototype,"out",void 0),Object(s.b)([Ae],t)}(Y),gt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},mt=function(e){function t(t,i){var r=e.call(this,i,t)||this;return r.keyPressHandler=function(e){for(var t=e.altKey,i=e.ctrlKey,o=e.shiftKey,s=e.which,a=0,l=Object.keys(r.keyConfigs);a<l.length;a++)for(var c=l[a],h=0,d=r.keyConfigs[c].split(",");h<d.length;h++){var u=n.getKeyConfigData(d[h].trim());t===u.altKey&&i===u.ctrlKey&&o===u.shiftKey&&s===u.keyCode&&(e.action=c,r.keyAction&&r.keyAction(e))}},r.bind(),r}var n;return Object(s.c)(t,e),n=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split("+"),i={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return i.keyCode=t[t.length-1].length>1&&Number(t[t.length-1])?Number(t[t.length-1]):n.getKeyCode(t[t.length-1]),n.configCache[e]=i,i},t.getKeyCode=function(e){return gt[e]||e.toUpperCase().charCodeAt(0)},t.configCache={},Object(s.b)([ye({})],t.prototype,"keyConfigs",void 0),Object(s.b)([ye("keyup")],t.prototype,"eventName",void 0),Object(s.b)([xe()],t.prototype,"keyAction",void 0),n=Object(s.b)([Ae],t)}(Y),yt=function(){function e(e,t,n){this.controlName=e,this.localeStrings=t,this.setLocale(n||ot)}return e.prototype.setLocale=function(t){var n=this.intGetControlConstant(e.locale,t);this.currentLocale=n||this.localeStrings},e.load=function(e){this.locale=g(this.locale,e,{},!0)},e.prototype.getConstant=function(e){return this.currentLocale[e]||this.localeStrings[e]||""},e.prototype.intGetControlConstant=function(e,t){return e[t]?e[t][this.controlName]:null},e.locale={},e}(),vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(50)],t.prototype,"swipeThresholdDistance",void 0),t}(Le),bt=/(Up|Down)/,wt=function(e){function t(t,n){var i=e.call(this,n,t)||this;return i.touchAction=!0,i.tapCount=0,i.startEvent=function(e){if(!0===i.touchAction){var t=e.changedTouches?e.changedTouches[0]:e;void 0!==e.changedTouches&&(i.touchAction=!1),i.isTouchMoved=!1,i.movedDirection="",i.startPoint=i.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},i.startEventData=t,i.hScrollLocked=i.vScrollLocked=!1,i.tStampStart=Date.now(),i.timeOutTapHold=setTimeout(function(){i.tapHoldEvent(e)},i.tapHoldThreshold),I.add(i.element,re.touchMoveEvent,i.moveEvent,i),I.add(i.element,re.touchEndEvent,i.endEvent,i),I.add(i.element,re.touchCancelEvent,i.cancelEvent,i)}},i.moveEvent=function(e){var t=e.changedTouches?e.changedTouches[0]:e;i.movedPoint=t,i.isTouchMoved=!(t.clientX===i.startPoint.clientX&&t.clientY===i.startPoint.clientY);var n={};i.isTouchMoved&&(clearTimeout(i.timeOutTapHold),i.calcScrollPoints(e),n=g(n,{},{startEvents:i.startEventData,originalEvent:e,startX:i.startPoint.clientX,startY:i.startPoint.clientY,distanceX:i.distanceX,distanceY:i.distanceY,scrollDirection:i.scrollDirection,velocity:i.getVelocity(t)}),i.trigger("scroll",n),i.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},i.cancelEvent=function(e){clearTimeout(i.timeOutTapHold),clearTimeout(i.timeOutTap),i.tapCount=0,i.swipeFn(e),I.remove(i.element,re.touchCancelEvent,i.cancelEvent)},i.endEvent=function(e){i.swipeFn(e),i.isTouchMoved||"function"==typeof i.tap&&(i.trigger("tap",{originalEvent:e,tapCount:++i.tapCount}),i.timeOutTap=setTimeout(function(){i.tapCount=0},i.tapThreshold)),i.modeclear()},i.swipeFn=function(e){clearTimeout(i.timeOutTapHold),clearTimeout(i.timeOutTap);var t=e;e.changedTouches&&(t=e.changedTouches[0]);var n=t.clientX-i.startPoint.clientX,r=t.clientY-i.startPoint.clientY;n=Math.floor(n<0?-1*n:n),r=Math.floor(r<0?-1*r:n),i.isTouchMoved=n>1||r>1,i.endPoint=t,i.calcPoints(e);var o={originalEvent:e,startEvents:i.startEventData,startX:i.startPoint.clientX,startY:i.startPoint.clientY,distanceX:i.distanceX,distanceY:i.distanceY,swipeDirection:i.movedDirection,velocity:i.getVelocity(t)};if(i.isTouchMoved){var s=void 0,a=i.swipeSettings.swipeThresholdDistance;s=g(s,i.defaultArgs,o);var l=!1,c=i.element,h=i.isScrollable(c),d=bt.test(i.movedDirection);(a<i.distanceX&&!d||a<i.distanceY&&d)&&(l=!h||i.checkSwipe(c,d)),l&&i.trigger("swipe",s)}i.modeclear()},i.modeclear=function(){i.modeClear=setTimeout(function(){i.touchAction=!0},"function"!=typeof i.tap?0:20),i.lastTapTime=(new Date).getTime(),I.remove(i.element,re.touchMoveEvent,i.moveEvent),I.remove(i.element,re.touchEndEvent,i.endEvent),I.remove(i.element,re.touchCancelEvent,i.cancelEvent)},i.bind(),i}return Object(s.c)(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),re.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){I.add(this.element,re.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){I.remove(this.element,re.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e);return!!/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)},t.prototype.tapHoldEvent=function(e){this.tapCount=0,this.touchAction=!0,I.remove(this.element,re.touchMoveEvent,this.moveEvent),I.remove(this.element,re.touchEndEvent,this.endEvent),this.trigger("tapHold",{originalEvent:e}),I.remove(this.element,re.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=e.changedTouches?e.changedTouches[0]:e;this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.movedDirection=this.distanceX>this.distanceY?t.clientX>this.startPoint.clientX?"Right":"Left":t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=e.changedTouches?e.changedTouches[0]:e;this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,n=e.clientY,i=Date.now(),r=t-this.startPoint.clientX,o=n-this.startPoint.clientX,s=i-this.tStampStart;return Math.sqrt(r*r+o*o)/s},t.prototype.checkSwipe=function(e,t){var n=["scroll","offset"],i=t?["Height","Top"]:["Width","Left"];return e[n[0]+i[0]]<=e[n[1]+i[0]]||0===e[n[0]+i[1]]||e[n[1]+i[0]]+e[n[0]+i[1]]>=e[n[0]+i[0]]},Object(s.b)([xe()],t.prototype,"tap",void 0),Object(s.b)([xe()],t.prototype,"tapHold",void 0),Object(s.b)([xe()],t.prototype,"swipe",void 0),Object(s.b)([xe()],t.prototype,"scroll",void 0),Object(s.b)([ye(350)],t.prototype,"tapThreshold",void 0),Object(s.b)([ye(750)],t.prototype,"tapHoldThreshold",void 0),Object(s.b)([ve({},vt)],t.prototype,"swipeSettings",void 0),Object(s.b)([Ae],t)}(Y),Ct=new RegExp("\\n|\\r|\\s\\s+","g"),xt=new RegExp(/'|"/g),At=new RegExp("if ?\\("),St=new RegExp("else if ?\\("),Ot=new RegExp("else"),Et=new RegExp("for ?\\("),It=new RegExp("(/if|/for)"),Dt=new RegExp("\\((.*)\\)",""),kt=new RegExp("^[0-9]+$","g"),Pt=new RegExp("[\\w\"'.\\s+]+","g"),Tt=new RegExp('"(.*?)"',"g"),Mt=new RegExp("\\${([^}]*)}","g");function jt(e,t,n,i){return t&&!kt.test(e)&&-1===i.indexOf(e.split(".")[0])?n+"."+e:e}var Rt=/^[\n\r.]+\<tr|^\<tr/,Lt=/^[\n\r.]+\<svg|^\<path|^\<g/;function _t(e,t){var n=Nt.compile(e,t);return function(e,t,i){var r=n(e,t,i);return"string"==typeof r?Lt.test(r)?k("svg",{innerHTML:r}).childNodes:k(Rt.test(r)?"table":"div",{innerHTML:r}).childNodes:r}}var Nt={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t){return void 0===t&&(t={}),function(e,t){var n=function(t,n,i){var r=0,o=[];return e.replace(Ct,"").replace(Tt,"'$1'").replace(Mt,function(e,t,n,s){var a=t.match(Dt);if(a){var l=a[1];if(St.test(t))t='";} '+t.replace(a[1],l.replace(Pt,function(e){return jt(e=e.trim(),!xt.test(e)&&-1===o.indexOf(e),"data",o)}))+'{ \n str = str + "';else if(At.test(t))t='"; '+t.replace(a[1],l.replace(Pt,function(e){return jt(e=e.trim(),!xt.test(e)&&-1===o.indexOf(e),"data",o)}))+'{ \n str = str + "';else if(Et.test(t)){var c=a[1].split(" of ");t='"; '+t.replace(a[1],function(e){return o.push(c[0]),o.push(c[0]+"Index"),"var i"+(r+=1)+"=0; i"+r+" < "+jt(c[1],!0,"data",o)+".length; i"+r+"++"})+"{ \n "+c[0]+"= "+jt(c[1],!0,"data",o)+"[i"+r+"]; \n var "+c[0]+"Index=i"+r+'; \n str = str + "'}else{var h=t.split("("),d=i&&i.hasOwnProperty(h[0])?"this.":"global";d=/\./.test(h[0])?"":d;var u=a[1].split(",");0===a[1].length||/data/.test(u[0])||/window./.test(u[0])||(a[1]="global"===d?"data."+a[1]:a[1]),t='" + '+("global"===d?"":d)+t.replace(l,jt(a[1].replace(/,( |)data.|,/gi,",data.").replace(/,( |)data.window/gi,",window"),"global"!==d,"data",o))+'+"'}}else t=Ot.test(t)?'"; '+t.replace(Ot,'} else { \n str = str + "'):t.match(It)?t.replace(It,'"; \n } \n str = str + "'):'"+'+jt(t.replace(/\,/gi,"+data."),-1===o.indexOf(t),"data",o)+'+"';return t})}(0,0,t);return new Function("data",'var str="'+n+'"; return str;').bind(t)}(e,t)},e}())).compile};function Bt(e){return function(t){!function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(n){e.prototype[n]=t.prototype[n]})})}(t,e)}}function Ft(e,t,n){var r={};if(e&&e.length){for(var o=0,s=e;o<s.length;o++){var a=s[o];!0===n?(t.propCollection[a]=new i.EventEmitter(!1),t[a]=t.propCollection[a]):r[a]=new i.EventEmitter(!1)}!0!==n&&t.setProperties(r,!0)}}function zt(e,t,n){var i=Object.keys(e.registeredTemplate);if(i.length)for(var r=t&&t.filter(function(e){return!/\./g.test(e)}),o=0,s=r&&r||i;o<s.length;o++){var a=s[o];if(n)for(var l=0;l<n.length;l++)for(var c=0;c<e.registeredTemplate.template.length;c++)e.registeredTemplate.template[c].rootNodes[0]===n[l]&&(u=e.registeredTemplate[a])[c].destroy();else for(var h=0,d=e.registeredTemplate[a];h<d.length;h++){var u;if(!(u=d[h]).destroyed){var p=u._view.renderer.parentNode(u.rootNodes[0]);for(c=0;c<u.rootNodes.length;c++)p.appendChild(u.rootNodes[c]);u.destroy()}}delete e.registeredTemplate[a]}for(var f=function(e){e.instance&&e.instance.clearTemplate(t&&t.filter(function(t){return!!new RegExp(e.name).test(t)}))},g=0,m=e.tagObjects;g<m.length;g++)f(m[g])}function Ht(e,t,n){for(var i=e.replace(/\[/g,".").replace(/\]/g,"").split("."),r=n||{},o=0;o<i.length;o++){var s=i[o];o+1===i.length?r[s]=void 0===t?{}:t:void 0===r[s]&&(r[s]={}),r=r[s]}return r}var Vt=function(){function e(){this.hasChanges=!1,this.propCollection={},this.tags=[],this.tagObjects=[]}return e.prototype.ngOnInit=function(){this.registeredTemplate={};for(var e=0,t=this.tags;e<t.length;e++){var n=t[e],i=h("child"+n.substring(0,1).toUpperCase()+n.substring(1),this);i&&this.tagObjects.push({instance:i,name:n})}for(var r=Object.keys(this),o=0,s=r=r.filter(function(e){return/Ref$/i.test(e)});o<s.length;o++){var a=s[o].replace("Ref","");d(a.replace("_","."),h(a,this),this.propCollection)}},e.prototype.registerEvents=function(e){Ft(e,this,!0)},e.prototype.ngOnChanges=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];this.propCollection[i]=e[i].currentValue}this.isUpdated=!1,this.hasChanges=!0},e.prototype.clearTemplate=function(e){zt(this,e)},e.prototype.getProperties=function(){for(var e=0,t=this.tagObjects;e<t.length;e++){var n=t[e];this.propCollection[n.name]=n.instance.getProperties()}return this.propCollection},e.prototype.isChanged=function(){for(var e=this.hasChanges,t=0,n=this.tagObjects;t<n.length;t++)e=e||n[t].instance.hasChanges;return e},e.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();var e=Object.keys(this);e=e.filter(function(e){return/Ref$/i.test(e)})},e.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},e}(),Ut=function(){function e(e){this.list=[],this.hasChanges=!1,this.propertyName=e}return e.prototype.ngOnInit=function(){this.isInitChanges=!0},e.prototype.ngAfterContentInit=function(){var e=this,t=0;this.list=this.children.map(function(n){return n.index=t++,n.property=e.propertyName,n}),this.hasChanges=!0},e.prototype.getProperties=function(){for(var e=[],t=0,n=this.list;t<n.length;t++)e.push(n[t].getProperties());return e},e.prototype.isChanged=function(){var e=this,t=!1,n=0;this.hasNewChildren=this.list.length!==this.children.length||null,this.hasNewChildren&&(this.list=this.children.map(function(t){return t.index=n++,t.property=e.propertyName,t}));for(var i=0,r=this.list;i<r.length;i++)t=t||r[i].hasChanges;return!!this.list.length&&t},e.prototype.clearTemplate=function(e){for(var t=this,n=0,i=this.list;n<i.length;n++)i[n].clearTemplate(e&&e.map(function(e){return new RegExp(t.propertyName).test(e)?e.replace(t.propertyName+".",""):e}))},e.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var e=0;e<this.list.length;e++)this.list[e].isUpdated=!0},e.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},e}(),Wt=function(){function e(){this.isProtectedOnChange=!0}return e.prototype.saveChanges=function(e,t,n){if(!this.isProtectedOnChange){this.oldProperties[e]=n,this.changedProperties[e]=t,this.finalUpdate();var i=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(i)}}},e.prototype.ngOnInit=function(){var e=this;this.registeredTemplate={},this.ngBoundedEvents={},this.isAngular=!0,this.tags=this.tags||[],this.complexTemplate=this.complexTemplate||[],this.tagObjects=[],this.ngAttr=this.getAngularAttr(this.element),this.createElement=function(t,n){var i=e.srenderer?e.srenderer.createElement(t):k(t);return void 0===n?i:(i.innerHTML=n.innerHTML?n.innerHTML:"",void 0!==n.className&&(i.className=n.className),void 0!==n.id&&(i.id=n.id),void 0!==n.styles&&i.setAttribute("style",n.styles),void 0!==e.ngAttr&&i.setAttribute(e.ngAttr,""),void 0!==n.attrs&&F(i,n.attrs),i)};for(var t=0,n=this.tags;t<n.length;t++){var i=n[t],r={instance:h("child"+i.substring(0,1).toUpperCase()+i.substring(1),this),name:i};this.tagObjects.push(r)}for(var o=Object.keys(this),s=0,a=o=o.filter(function(e){return/Ref$/i.test(e)&&/\_/i.test(e)});s<a.length;s++){var l=a[s].replace("Ref",""),c={};d(l.replace("_","."),h(l,this),c),this.setProperties(c,!0)}},e.prototype.getAngularAttr=function(e){for(var t,n=e.attributes,i=n.length,r=0;r<i;r++)/_ngcontent/g.test(n[r].name)&&(t=n[r].name);return t},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){"undefined"!=typeof window&&e.appendTo(e.element)})},e.prototype.ngOnDestroy=function(){"undefined"!=typeof window&&this.element.classList.contains("e-control")&&(this.destroy(),this.clearTemplate(null))},e.prototype.clearTemplate=function(e,t){zt(this,e,t)},e.prototype.ngAfterContentChecked=function(){for(var e=0,t=this.tagObjects;e<t.length;e++){var n=t[e];if(!y(n.instance)&&(n.instance.isInitChanges||n.instance.hasChanges||n.instance.hasNewChildren))if(n.instance.isInitChanges){var i={};i[n.name]=n.instance.getProperties(),this.setProperties(i,n.instance.isInitChanges)}else for(var r=0,o=n.instance.list;r<o.length;r++){var s=o[r];if(s.hasChanges){var a=n.instance.list.indexOf(s),l=h(n.name,this)[a];void 0!==l&&void 0!==l.setProperties&&l.setProperties(s.getProperties()),s.isUpdated=!0}}}},e.prototype.registerEvents=function(e){Ft(e,this)},e.prototype.twoWaySetter=function(e,t){var n=h(t,this.properties);n!==e&&(this.saveChanges(t,e,n),d(t,m(e)?null:e,this.properties),h(t+"Change",this).emit(e))},e.prototype.addTwoWay=function(e){for(var t=this,n=function(e){h(e,r),Object.defineProperty(r,e,{get:function(){return h(e,t.properties)},set:function(n){return t.twoWaySetter(n,e)}}),d(e+"Change",new i.EventEmitter,r)},r=this,o=0,s=e;o<s.length;o++)n(s[o])},e.prototype.addEventListener=function(e,t){var n=h(e,this);y(n)||(this.ngBoundedEvents[e]||(this.ngBoundedEvents[e]=new Map),this.ngBoundedEvents[e].set(t,n.subscribe(t)))},e.prototype.removeEventListener=function(e,t){y(h(e,this))||this.ngBoundedEvents[e].get(t).unsubscribe()},e.prototype.trigger=function(e,t){var n=h(e,this),i=this.isProtectedOnChange;this.isProtectedOnChange=!1,t&&(t.name=e),y(n)||n.next(t);var r=h("local"+e.charAt(0).toUpperCase()+e.slice(1),this);y(r)||r.call(this,t),this.isProtectedOnChange=i},e}(),Gt=Nt.compile;function qt(e){return function(t,n){var i={set:Qt(n),get:Yt(n,e),enumerable:!0,configurable:!0};Object.defineProperty(t,n,i)}}function Qt(e){return function(t){void 0!==t&&(d(e+"Ref",t,this),"string"!=typeof t?(t.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,t.elementRef.nativeElement.propName=e):this.saveChanges&&(this.saveChanges(e,t,void 0),this.dataBind()))}}function Yt(e,t){return function(){return h(e+"Ref",this)||t}}Nt.compile=function(e,t){if("string"==typeof e)return Gt(e,t);var n=e.elementRef.nativeElement._viewContainerRef,i=e.elementRef.nativeElement.propName;return function(t,r,o){var s=n||r.viewContainerRef,a=s.createEmbeddedView(e,{$implicit:t});a.markForCheck();var l=r?r.registeredTemplate:h("currentInstance.registeredTemplate",s);return void 0===l[o=o||i]&&(l[o]=[]),l[o].push(a),a.rootNodes}};var Xt=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.isEmpty=function(){return 0===this.height&&0===this.width},e.prototype.clone=function(){return new e(this.width,this.height)},e}(),Zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.equals=function(e,t){return e===t||!(!e||!t)&&(!e||!t||e.x===t.x&&e.y===t.y)},t.isEmptyPoint=function(e){return!e.x||!e.y},t.transform=function(e,t,n){var i={x:0,y:0};return i.x=Math.round(100*(e.x+n*Math.cos(t*Math.PI/180)))/100,i.y=Math.round(100*(e.y+n*Math.sin(t*Math.PI/180)))/100,i},t.findLength=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.findAngle=function(e,t){var n=Math.atan2(t.y-e.y,t.x-e.x);return n=180*n/Math.PI,(n%=360)<0&&(n+=360),n},t.distancePoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.getLengthFromListOfPoints=function(e){for(var t=0,n=0;n<e.length-1;n++)t+=this.distancePoints(e[n],e[n+1]);return t},t.adjustPoint=function(e,t,n,i){var r,o=n?{x:e.x,y:e.y}:{x:t.x,y:t.y};return e.x===t.x?e.y<t.y&&n||e.y>t.y&&!n?o.y+=i:o.y-=i:e.y===t.y?e.x<t.x&&n||e.x>t.x&&!n?o.x+=i:o.x-=i:n?(r=this.findAngle(e,t),o=this.transform(e,r,i)):(r=this.findAngle(t,e),o=this.transform(t,r,i)),o},t.direction=function(e,t){return Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"Right":"Left":e.y<t.y?"Bottom":"Top"},t.prototype.getClassName=function(){return"Point"},Object(s.b)([ye(0)],t.prototype,"x",void 0),Object(s.b)([ye(0)],t.prototype,"y",void 0),t}(Le);function Kt(e){var t,n=[],i=function(e){var t=/([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi,n=[],i=[],r={};t.lastIndex=0;var o=!1;for(r=t.exec(e);r;)"e"===r[1]?o=!0:r[1]?("zm"===r[1].toLowerCase()?(n.length&&i.push(n),i.push(["Z"]),n=[r[1].substring(1,2)]):(n.length&&i.push(n),n=[r[1]]),o=!1):(n.length||(n=[]),o||n.push(Number(r[2])),o=!1),r=t.exec(e);return n.length&&i.push(n),i}(e);if(i.length>0)for(var r=0;r<i.length;r++){var o=i[r],s="";switch((s=o[0]).toLowerCase()){case"m":for(t=1;t<o.length;t++)n.push({command:s,x:o[t],y:o[t+1]}),t+=1,"m"===s?s="l":"M"===s&&(s="L");break;case"l":case"t":for(t=1;t<o.length;t++)n.push({command:s,x:o[t],y:o[t+1]}),t+=1;break;case"h":for(t=1;t<o.length;t++)n.push({command:s,x:o[t]});break;case"v":for(t=1;t<o.length;t++)n.push({command:s,y:o[t]});break;case"z":n.push({command:s});break;case"c":for(t=1;t<o.length;t++)n.push({command:s,x1:o[t],y1:o[t+1],x2:o[t+2],y2:o[t+3],x:o[t+4],y:o[t+5]}),t+=5;break;case"s":for(t=1;t<o.length;t++)n.push({command:s,x2:o[t],y2:o[t+1],x:o[t+2],y:o[t+3]}),t+=3;break;case"q":for(t=1;t<o.length;t++)n.push({command:s,x1:o[t],y1:o[t+1],x:o[t+2],y:o[t+3]}),t+=3;break;case"a":for(t=1;t<o.length;t++)n.push({command:s,r1:o[t],r2:o[t+1],angle:o[t+2],largeArc:o[t+3],sweep:o[t+4],x:o[t+5],y:o[t+6]}),t+=6}}return n}function Jt(e){var t,n,i="";for(i="M"+e[0].x+" "+e[0].y,n=1;n<e.length;n++)i+="L"+(t=e[n]).x+" "+t.y;return i+"Z"}function $t(e){var t,n,i,r,o,s,a,l,c,h,d=[];for(a=0,l=0,h=0,c=e.length;h<c;++h){var u=e[h];"y1"in u&&(r=u.y1),"y2"in u&&(s=u.y2),"x1"in u&&(i=u.x1),"x2"in u&&(o=u.x2),"x"in u&&(a=u.x),"y"in u&&(l=u.y);var p=d[d.length-1];switch(u.command){case"M":d.push({command:"M",x:a,y:l});break;case"L":d.push({command:"L",x0:t,y0:n,x:a,y:l});break;case"H":d.push({command:"L",x0:t,y0:n,x:a,y:n});break;case"V":d.push({command:"L",x0:t,y0:n,x:t,y:l});break;case"C":d.push({command:"C",x0:t,y0:n,x1:i,y1:r,x2:o,y2:s,x:a,y:l});break;case"S":if(p){var f=void 0;d.push({command:"C",x0:t,y0:n,x1:(g={x:2*t-(f="C"===p.command||"S"===p.command?{x:p.x2,y:p.y2}:{x:t,y:n}).x,y:2*n-f.y}).x,y1:g.y,x2:o,y2:s,x:a,y:l})}break;case"Q":d.push({command:"Q",x0:t,y0:n,x1:i,y1:r,x:a,y:l});break;case"T":var g;p&&(f=void 0,d.push({command:"Q",x0:t,y0:n,x1:(g={x:2*t-(f="Q"===p.command?{x:p.x1,y:p.y1}:{x:t,y:n}).x,y:2*n-f.y}).x,y1:g.y,x:a,y:l}));break;case"A":var m=u;m.command="A",d.push(m);break;case"Z":case"z":d.push({command:"Z"}),a=t,l=n}t=a,n=l}return d}function en(e,t,n,i,r,o,s,a){var l,c,h,d,u,p,f,g,m;for(u=0,p=0,g=0,f=e.length;g<f;++g){var y=e[g],v=y.command;"x"in y&&(u=y.x),"y"in y&&(p=y.y),"y1"in y&&(c=y.y1),"y2"in y&&(d=y.y2),"x1"in y&&(l=y.x1),"x2"in y&&(h=y.x2),i?(void 0!==u&&(u=nn(u,t,r,s)),void 0!==p&&(p=nn(p,n,o,a)),void 0!==l&&(l=nn(l,t,r,s)),void 0!==c&&(c=nn(c,n,o,a)),void 0!==h&&(h=nn(h,t,r,s)),void 0!==d&&(d=nn(d,n,o,a))):(void 0!==u&&(u=Number((u+t).toFixed(2))),void 0!==p&&(p=Number((p+n).toFixed(2))),void 0!==l&&(l=Number((l+t).toFixed(2))),void 0!==c&&(c=Number((c+n).toFixed(2))),void 0!==h&&(h=Number((h+t).toFixed(2))),void 0!==d&&(d=Number((d+n).toFixed(2)))),(m=tn(y,v,{x:u,y:p,x1:l,y1:c,x2:h,y2:d,r1:y.r1,r2:y.r2},i,t,n))&&(e[g]=m)}return on(e)}function tn(e,t,n,i,r,o){switch(t){case"M":case"L":e.x=n.x,e.y=n.y;break;case"H":e.x=n.x;break;case"V":e.y=n.y;break;case"C":e.x=n.x,e.y=n.y,e.x1=n.x1,e.y1=n.y1,e.x2=n.x2,e.y2=n.y2;break;case"S":e.x=n.x,e.y=n.y,e.x2=n.x2,e.y2=n.y2;break;case"Q":e.x=n.x,e.y=n.y,e.x1=n.x1,e.y1=n.y1;break;case"T":e.x=n.x,e.y=n.y;break;case"A":var s=n.r1,a=n.r2;i&&(n.r1=s*=r,n.r2=a*=o),e.x=n.x,e.y=n.y,e.r1=n.r1,e.r2=n.r2;break;case"z":case"Z":e={command:"Z"}}return e}function nn(e,t,n,i){return e!==n?e=i!==n?e*t-(Number(n)*t-Number(n))+(i-Number(n)):Number(e)*t-(Number(n)*t-Number(n)):i!==n&&(e=i),Number(e.toFixed(2))}function rn(e){var t,n,i,r,o,s,a,l,c,h;for(a=0,l=0,h=0,c=e.length;h<c;++h){var d=e[h],u=d.command;if(/[MLHVCSQTA]/.test(u))"x"in d&&(d.x=a=d.x),"y"in d&&(d.y=l=d.y);else{"x1"in d&&(d.x1=i=a+d.x1),"x2"in d&&(d.x2=o=a+d.x2),"y1"in d&&(d.y1=r=l+d.y1),"y2"in d&&(d.y2=s=l+d.y2),"x"in d&&(d.x=a+=d.x),"y"in d&&(d.y=l+=d.y);var p=void 0;switch(u){case"m":case"M":p={command:"M",x:a,y:l};break;case"l":case"L":p={command:"L",x:a,y:l};break;case"h":case"H":p={command:"H",x:a};break;case"v":case"V":p={command:"V",y:l};break;case"c":case"C":p={command:"C",x:a,y:l,x1:i,y1:r,x2:o,y2:s};break;case"s":case"S":p={command:"S",x:a,y:l,x2:o,y2:s};break;case"q":case"Q":p={command:"Q",x:a,y:l,x1:i,y1:r};break;case"t":case"T":p={command:"T",x:a,y:l};break;case"a":case"A":(p={command:"A",x:a,y:l}).r1=d.r1,p.r2=d.r2,p.angle=d.angle,p.largeArc=d.largeArc,p.sweep=d.sweep;break;case"z":case"Z":p={command:"Z"},a=t,l=n,p=e[h]}p&&(e[h]=p)}"M"!==u&&"m"!==u||(t=a,n=l)}return e}function on(e){var t,n="";for(t=0;t<e.length;t++)n+=0===t?sn(e[t]):" "+sn(e[t]);return n}function sn(e){var t="";switch(e.command){case"Z":case"z":t=e.command;break;case"M":case"m":case"L":case"l":t=e.command+" "+e.x+" "+e.y;break;case"C":case"c":t=e.command+" "+e.x1+" "+e.y1+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;break;case"Q":case"q":t=e.command+" "+e.x1+" "+e.y1+" "+e.x+" "+e.y;break;case"A":case"a":t=e.command+" "+e.r1+" "+e.r2+" "+e.angle+" "+(e.largeArc?"1":"0")+" "+(e.sweep?"1":"0")+" "+e.x+" "+e.y;break;case"H":case"h":t=e.command+" "+e.x;break;case"V":case"v":t=e.command+" "+e.y;break;case"S":case"s":t=e.command+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;break;case"T":case"t":t=e.command+" "+e.x+" "+e.y}return t}var an=function(){function e(e,t,n,i){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,n=i=0):(void 0===n&&(n=0),void 0===i&&(i=0)),this.x=e,this.y=t,this.width=n,this.height=i}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return{x:this.left,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return{x:this.right,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return{x:this.left,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return{x:this.right,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleLeft",{get:function(){return{x:this.left,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleRight",{get:function(){return{x:this.right,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topCenter",{get:function(){return{x:this.x+this.width/2,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomCenter",{get:function(){return{x:this.x+this.width/2,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),e.prototype.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},e.prototype.uniteRect=function(e){var t=Math.max(Number.NaN===this.right||this.x===Number.MAX_VALUE?e.right:this.right,e.right),n=Math.max(Number.NaN===this.bottom||this.y===Number.MAX_VALUE?e.bottom:this.bottom,e.bottom);return this.x=Math.min(this.left,e.left),this.y=Math.min(this.top,e.top),this.width=t-this.x,this.height=n-this.y,this},e.prototype.unitePoint=function(e){if(this.x===Number.MAX_VALUE)return this.x=e.x,void(this.y=e.y);var t=Math.min(this.left,e.x),n=Math.min(this.top,e.y),i=Math.max(this.right,e.x),r=Math.max(this.bottom,e.y);this.x=t,this.y=n,this.width=i-this.x,this.height=r-this.y},e.prototype.Inflate=function(e){return this.x-=e,this.y-=e,this.width+=2*e,this.height+=2*e,this},e.prototype.intersects=function(e){return!(this.right<e.left||this.left>e.right||this.top>e.bottom||this.bottom<e.top)},e.prototype.containsRect=function(e){return this.left<=e.left&&this.right>=e.right&&this.top<=e.top&&this.bottom>=e.bottom},e.prototype.containsPoint=function(e,t){return void 0===t&&(t=0),this.left-t<=e.x&&this.right+t>=e.x&&this.top-t<=e.y&&this.bottom+t>=e.y},e.toBounds=function(t){for(var n=new e,i=0,r=t;i<r.length;i++)n.unitePoint(r[i]);return n},e.empty=new e(Number.MAX_VALUE,Number.MIN_VALUE,0,0),e}(),ln=function(e){return e[e.Identity=0]="Identity",e[e.Translation=1]="Translation",e[e.Scaling=2]="Scaling",e[e.Unknown=4]="Unknown",e}({}),cn=function(){return function(e,t,n,i,r,o,s){this.m11=e,this.m12=t,this.m21=n,this.m22=i,this.offsetX=r,this.offsetY=o,this.type=s}}();function hn(){return new cn(1,0,0,1,0,0,ln.Identity)}function dn(e,t){var n=function(e,t,n){switch(e.type){case ln.Identity:break;case ln.Translation:t+=e.offsetX,n+=e.offsetY;break;case ln.Scaling:t*=e.m11,n*=e.m22;break;case ln.Translation|ln.Scaling:t*=e.m11,t+=e.offsetX,n*=e.m22,n+=e.offsetY;break;default:var i=t*e.m12+e.offsetY;t*=e.m11,t+=n*e.m21+e.offsetX,n*=e.m22,n+=i}return{x:t,y:n}}(e,t.x,t.y);return{x:Math.round(100*n.x)/100,y:Math.round(100*n.y)/100}}function un(e,t,n,i){gn(e,function(e,t,n){var i=hn(),r=Math.sin(e),o=Math.cos(e),s=t*(1-o)+n*r,a=n*(1-o)-t*r;return i.type=ln.Unknown,mn(i,o,r,-r,o,s,a),i}(.017453292519943295*(t%=360),n||0,i||0))}function pn(e,t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=0),gn(e,function(e,t,n,i){var r=hn();return r.type=n||i?ln.Scaling|ln.Translation:ln.Scaling,mn(r,e,0,0,t,n-e*n,i-t*i),r}(t,n,i,r))}function fn(e,t,n){return e.type&ln.Identity?(e.type=ln.Translation,void mn(e,1,0,0,1,t,n)):e.type&ln.Unknown?(e.offsetX+=t,void(e.offsetY+=n)):(e.offsetX+=t,e.offsetY+=n,void(e.type|=ln.Translation))}function gn(e,t){var n=e.type,i=t.type;if(i!==ln.Identity){if(n===ln.Identity)return yn(e,t),void(e.type=t.type);if(i===ln.Translation)return e.offsetX+=t.offsetX,e.offsetY+=t.offsetY,void(n!==ln.Unknown&&(e.type|=ln.Translation));if(n!==ln.Translation){var r=n<<4|i;switch(r){case 34:return e.m11*=t.m11,void(e.m22*=t.m22);case 35:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX=t.offsetX,e.offsetY=t.offsetY,void(e.type=ln.Translation|ln.Scaling);case 36:break;default:switch(r){case 50:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX*=t.m11,void(e.offsetY*=t.m22);case 51:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX=t.m11*e.offsetX+t.offsetX,void(e.offsetY=t.m22*e.offsetY+t.offsetY);case 52:break;default:switch(r){case 66:case 67:case 68:break;default:return}}}var o=hn();return mn(o,e.m11*t.m11+e.m12*t.m21,e.m11*t.m12+e.m12*t.m22,e.m21*t.m11+e.m22*t.m21,e.m21*t.m12+e.m22*t.m22,e.offsetX*t.m11+e.offsetY*t.m21+t.offsetX,e.offsetX*t.m12+e.offsetY*t.m22+t.offsetY),o.m21||o.m12?o.type=ln.Unknown:((o.m11&&1!==o.m11||o.m22&&1!==o.m22)&&(o.type=ln.Scaling),(o.offsetX||o.offsetY)&&(o.type|=ln.Translation),(o.type&(ln.Translation|ln.Scaling))===ln.Identity&&(o.type=ln.Identity),o.type=ln.Scaling|ln.Translation),yn(e,o),void(e.type=o.type)}var s=e.offsetX,a=e.offsetY;e.offsetX=s*t.m11+a*t.m21+t.offsetX,e.offsetY=s*t.m12+a*t.m22+t.offsetY,e.type=i!==ln.Unknown?ln.Translation|ln.Scaling:ln.Unknown}}function mn(e,t,n,i,r,o,s){e.m11=t,e.m12=n,e.m21=i,e.m22=r,e.offsetX=o,e.offsetY=s}function yn(e,t){e.m11=t.m11,e.m12=t.m12,e.m21=t.m21,e.m22=t.m22,e.offsetX=t.offsetX,e.offsetY=t.offsetY,e.type=t.type}var vn=function(e){return e[e.Visible=1]="Visible",e[e.Hidden=2]="Hidden",e[e.Hover=4]="Hover",e[e.Connect=8]="Connect",e}({}),bn=function(e){return e[e.None=0]="None",e[e.ShowHorizontalLines=1]="ShowHorizontalLines",e[e.ShowVerticalLines=2]="ShowVerticalLines",e[e.ShowLines=3]="ShowLines",e[e.SnapToHorizontalLines=4]="SnapToHorizontalLines",e[e.SnapToVerticalLines=8]="SnapToVerticalLines",e[e.SnapToLines=12]="SnapToLines",e[e.SnapToObject=16]="SnapToObject",e[e.All=31]="All",e}({}),wn=function(e){return e[e.None=1]="None",e[e.ConnectorSourceThumb=2]="ConnectorSourceThumb",e[e.ConnectorTargetThumb=4]="ConnectorTargetThumb",e[e.ResizeSouthEast=8]="ResizeSouthEast",e[e.ResizeSouthWest=16]="ResizeSouthWest",e[e.ResizeNorthEast=32]="ResizeNorthEast",e[e.ResizeNorthWest=64]="ResizeNorthWest",e[e.ResizeEast=128]="ResizeEast",e[e.ResizeWest=256]="ResizeWest",e[e.ResizeSouth=512]="ResizeSouth",e[e.ResizeNorth=1024]="ResizeNorth",e[e.Rotate=2048]="Rotate",e[e.UserHandle=4096]="UserHandle",e[e.ToolTip=8192]="ToolTip",e[e.ResizeAll=2046]="ResizeAll",e[e.All=16382]="All",e}({}),Cn=function(e){return e[e.None=1]="None",e[e.Select=2]="Select",e[e.Delete=4]="Delete",e[e.Drag=8]="Drag",e[e.DragSourceEnd=16]="DragSourceEnd",e[e.DragTargetEnd=32]="DragTargetEnd",e[e.DragSegmentThumb=64]="DragSegmentThumb",e[e.AllowDrop=128]="AllowDrop",e[e.Bridging=256]="Bridging",e[e.BridgeObstacle=512]="BridgeObstacle",e[e.InheritBridging=1024]="InheritBridging",e[e.PointerEvents=2048]="PointerEvents",e[e.Tooltip=4096]="Tooltip",e[e.InheritTooltip=8192]="InheritTooltip",e[e.Interaction=4218]="Interaction",e[e.ReadOnly=16384]="ReadOnly",e[e.Default=11838]="Default",e}({}),xn=function(e){return e[e.ReadOnly=2]="ReadOnly",e[e.InheritReadOnly=4]="InheritReadOnly",e[e.Select=8]="Select",e[e.Drag=16]="Drag",e[e.Resize=32]="Resize",e[e.Rotate=64]="Rotate",e[e.Interaction=120]="Interaction",e[e.None=0]="None",e}({}),An=function(e){return e[e.None=0]="None",e[e.Select=2]="Select",e[e.Drag=4]="Drag",e[e.Rotate=8]="Rotate",e[e.Shadow=16]="Shadow",e[e.PointerEvents=32]="PointerEvents",e[e.Delete=64]="Delete",e[e.InConnect=128]="InConnect",e[e.OutConnect=256]="OutConnect",e[e.Individual=512]="Individual",e[e.Expandable=1024]="Expandable",e[e.AllowDrop=2048]="AllowDrop",e[e.Inherit=78]="Inherit",e[e.ResizeNorthEast=4096]="ResizeNorthEast",e[e.ResizeEast=8192]="ResizeEast",e[e.ResizeSouthEast=16384]="ResizeSouthEast",e[e.ResizeSouth=32768]="ResizeSouth",e[e.ResizeSouthWest=65536]="ResizeSouthWest",e[e.ResizeWest=131072]="ResizeWest",e[e.ResizeNorthWest=262144]="ResizeNorthWest",e[e.ResizeNorth=524288]="ResizeNorth",e[e.Resize=1044480]="Resize",e[e.AspectRatio=1048576]="AspectRatio",e[e.HideThumbs=16777216]="HideThumbs",e[e.Tooltip=2097152]="Tooltip",e[e.InheritTooltip=4194304]="InheritTooltip",e[e.ReadOnly=8388608]="ReadOnly",e[e.Default=5240814]="Default",e}({}),Sn=function(e){return e[e.None=0]="None",e[e.ElementIsPort=2]="ElementIsPort",e[e.ElementIsGroup=4]="ElementIsGroup",e}({}),On=function(e){return e[e.Rotate=2]="Rotate",e[e.ConnectorSource=4]="ConnectorSource",e[e.ConnectorTarget=8]="ConnectorTarget",e[e.ResizeNorthEast=16]="ResizeNorthEast",e[e.ResizeEast=32]="ResizeEast",e[e.ResizeSouthEast=64]="ResizeSouthEast",e[e.ResizeSouth=128]="ResizeSouth",e[e.ResizeSouthWest=256]="ResizeSouthWest",e[e.ResizeWest=512]="ResizeWest",e[e.ResizeNorthWest=1024]="ResizeNorthWest",e[e.ResizeNorth=2048]="ResizeNorth",e[e.Default=4094]="Default",e}({}),En=function(e){return e[e.None=1]="None",e[e.Bridging=2]="Bridging",e[e.UndoRedo=4]="UndoRedo",e[e.Tooltip=8]="Tooltip",e[e.UserInteraction=16]="UserInteraction",e[e.ApiUpdate=32]="ApiUpdate",e[e.PageEditable=48]="PageEditable",e[e.Zoom=64]="Zoom",e[e.PanX=128]="PanX",e[e.PanY=256]="PanY",e[e.Pan=384]="Pan",e[e.ZoomTextEdit=512]="ZoomTextEdit",e[e.Virtualization=1024]="Virtualization",e[e.Default=500]="Default",e}({}),In=function(e){return e[e.None=0]="None",e[e.SingleSelect=1]="SingleSelect",e[e.MultipleSelect=2]="MultipleSelect",e[e.ZoomPan=4]="ZoomPan",e[e.DrawOnce=8]="DrawOnce",e[e.ContinuousDraw=16]="ContinuousDraw",e[e.Default=3]="Default",e}({}),Dn=function(e){return e[e.Self=1]="Self",e[e.Parent=2]="Parent",e}({}),kn=function(e){return e[e.None=0]="None",e[e.Control=1]="Control",e[e.Meta=1]="Meta",e[e.Alt=2]="Alt",e[e.Shift=4]="Shift",e}({}),Pn=function(e){return e[e.None=null]="None",e[e.Number0=0]="Number0",e[e.Number1=1]="Number1",e[e.Number2=2]="Number2",e[e.Number3=3]="Number3",e[e.Number4=4]="Number4",e[e.Number5=5]="Number5",e[e.Number6=6]="Number6",e[e.Number7=7]="Number7",e[e.Number8=8]="Number8",e[e.Number9=9]="Number9",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Delete=46]="Delete",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.BackSpace=8]="BackSpace",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.Star=56]="Star",e[e.Plus=187]="Plus",e[e.Minus=189]="Minus",e}({}),Tn=function(e){return e[e.Render=2]="Render",e[e.PublicMethod=4]="PublicMethod",e[e.ToolAction=8]="ToolAction",e[e.UndoRedo=16]="UndoRedo",e[e.TextEdit=32]="TextEdit",e[e.Group=64]="Group",e[e.Clear=128]="Clear",e[e.PreventClearSelection=256]="PreventClearSelection",e[e.Interactions=512]="Interactions",e[e.PreventHistory=1024]="PreventHistory",e[e.PreventIconsUpdate=2048]="PreventIconsUpdate",e}({}),Mn=function(e){return e[e.None=2]="None",e[e.DrawSelectorBorder=4]="DrawSelectorBorder",e[e.PreventRenderSelector=8]="PreventRenderSelector",e}({}),jn=function(e){return e[e.None=0]="None",e[e.PreventDrag=2]="PreventDrag",e[e.PreventScale=4]="PreventScale",e[e.PreventDataInit=8]="PreventDataInit",e[e.hScrollbarMoved=16]="hScrollbarMoved",e[e.vScrollbarMoved=32]="vScrollbarMoved",e}({}),Rn=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e}({}),Ln=function(e){return e[e.collectionChange=0]="collectionChange",e[e.rotateChange=1]="rotateChange",e[e.positionChange=2]="positionChange",e[e.propertyChange=3]="propertyChange",e[e.selectionChange=4]="selectionChange",e[e.sizeChange=5]="sizeChange",e[e.drop=6]="drop",e[e.sourcePointChange=7]="sourcePointChange",e[e.targetPointChange=8]="targetPointChange",e[e.connectionChange=9]="connectionChange",e[e.animationComplete=10]="animationComplete",e[e.click=11]="click",e[e.doubleClick=12]="doubleClick",e[e.scrollChange=13]="scrollChange",e[e.dragEnter=14]="dragEnter",e[e.dragLeave=15]="dragLeave",e[e.dragOver=16]="dragOver",e[e.textEdit=17]="textEdit",e[e.paletteSelectionChange=18]="paletteSelectionChange",e[e.historyChange=19]="historyChange",e[e.mouseEnter=20]="mouseEnter",e[e.mouseLeave=21]="mouseLeave",e[e.mouseOver=22]="mouseOver",e[e.expandStateChange=23]="expandStateChange",e}({}),_n=function(e){return e[e.None=1]="None",e[e.Drag=2]="Drag",e[e.Draw=4]="Draw",e[e.InConnect=8]="InConnect",e[e.OutConnect=16]="OutConnect",e[e.Default=24]="Default",e}({}),Nn=function(){function e(){this.pivot={x:.5,y:.5},this.isDirt=!0,this.isExport=!1,this.exportScaleValue={x:0,y:0},this.exportScaleOffset={x:0,y:0},this.canApplyStyle=!0,this.visible=!0,this.offsetX=0,this.offsetY=0,this.cornerRadius=0,this.minHeight=void 0,this.minWidth=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.width=void 0,this.height=void 0,this.rotateAngle=0,this.margin={left:0,right:0,top:0,bottom:0},this.horizontalAlignment="Auto",this.verticalAlignment="Auto",this.flip="None",this.relativeMode="Point",this.transform=Dn.Self|Dn.Parent,this.style={fill:"white",strokeColor:"black",opacity:1,strokeWidth:1},this.desiredSize=new Xt,this.actualSize=new Xt,this.parentTransform=0,this.preventContainer=!1,this.isSvgRender=!1,this.bounds=new an(0,0,0,0),this.shadow=null,this.description="",this.staticSize=!1,this.isRectElement=!1,this.isCalculateDesiredSize=!0,this.flipOffset={x:0,y:0},this.elementActions=Sn.None,this.position=void 0,this.unitMode=void 0,this.float=!1,this.floatingBounds=void 0}return e.prototype.setOffsetWithRespectToBounds=function(e,t,n){this.unitMode=n,this.position={x:e,y:t}},e.prototype.getAbsolutePosition=function(e){if(void 0!==this.position)return"Absolute"===this.unitMode?this.position:{x:this.position.x*e.width,y:this.position.y*e.height}},Object.defineProperty(e.prototype,"outerBounds",{get:function(){return this.floatingBounds||this.bounds},set:function(e){this.floatingBounds=e},enumerable:!0,configurable:!0}),e.prototype.measure=function(e){return this.desiredSize=new Xt(void 0!==this.width?this.width:(e.width||0)-this.margin.left-this.margin.right,void 0!==this.height?this.height:(e.height||0)-this.margin.top-this.margin.bottom),this.isCalculateDesiredSize&&(this.desiredSize=this.validateDesiredSize(this.desiredSize,e)),this.desiredSize},e.prototype.arrange=function(e){return this.actualSize=e,this.updateBounds(),this.actualSize},e.prototype.updateBounds=function(){this.bounds=Vl(this)},e.prototype.validateDesiredSize=function(e,t){return!this.isRectElement||this.width||this.minWidth||this.maxWidth||(e.width=50),!this.isRectElement||this.height||this.minHeight||this.maxHeight||(e.height=50),(void 0===e||void 0!==this.width&&void 0!==this.height)&&((e=e||new Xt).width=void 0===this.width?(t.width||0)-this.margin.left-this.margin.right:this.width,e.height=void 0===this.height?(t.height||0)-this.margin.top-this.margin.bottom:this.height),void 0!==this.minWidth&&(e.width=Math.max(e.width,this.minWidth)),void 0!==this.minHeight&&(e.height=Math.max(e.height,this.minHeight)),void 0!==this.maxWidth&&(e.width=Math.min(e.width,this.maxWidth)),void 0!==this.maxHeight&&(e.height=Math.min(e.height,this.maxHeight)),e},e}(),Bn=function(e){switch(e.type){case"Linear":return Wn;case"Radial":return Gn;default:return Wn}},Fn=function(){return function(e,t,n,i){this.left=e,this.right=t,this.top=n,this.bottom=i}}(),zn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(0)],t.prototype,"left",void 0),Object(s.b)([ye(0)],t.prototype,"right",void 0),Object(s.b)([ye(0)],t.prototype,"top",void 0),Object(s.b)([ye(0)],t.prototype,"bottom",void 0),t}(Le),Hn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(45)],t.prototype,"angle",void 0),Object(s.b)([ye(5)],t.prototype,"distance",void 0),Object(s.b)([ye(.7)],t.prototype,"opacity",void 0),Object(s.b)([ye("lightgrey")],t.prototype,"color",void 0),t}(Le),Vn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"Stop"},Object(s.b)([ye("")],t.prototype,"color",void 0),Object(s.b)([ye(0)],t.prototype,"offset",void 0),Object(s.b)([ye(1)],t.prototype,"opacity",void 0),t}(Le),Un=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([we([],Vn)],t.prototype,"stops",void 0),Object(s.b)([ye("None")],t.prototype,"type",void 0),Object(s.b)([ye("")],t.prototype,"id",void 0),t}(Le),Wn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(0)],t.prototype,"x1",void 0),Object(s.b)([ye(0)],t.prototype,"x2",void 0),Object(s.b)([ye(0)],t.prototype,"y1",void 0),Object(s.b)([ye(0)],t.prototype,"y2",void 0),t}(Un),Gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(0)],t.prototype,"cx",void 0),Object(s.b)([ye(0)],t.prototype,"cy",void 0),Object(s.b)([ye(0)],t.prototype,"fx",void 0),Object(s.b)([ye(0)],t.prototype,"fy",void 0),Object(s.b)([ye(50)],t.prototype,"r",void 0),t}(Un),qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("white")],t.prototype,"fill",void 0),Object(s.b)([ye("black")],t.prototype,"strokeColor",void 0),Object(s.b)([ye("")],t.prototype,"strokeDashArray",void 0),Object(s.b)([ye(1)],t.prototype,"strokeWidth",void 0),Object(s.b)([ye(1)],t.prototype,"opacity",void 0),Object(s.b)([be(Bn)],t.prototype,"gradient",void 0),t}(Le),Qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("transparent")],t.prototype,"fill",void 0),t}(qn),Yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("black")],t.prototype,"color",void 0),Object(s.b)([ye("Arial")],t.prototype,"fontFamily",void 0),Object(s.b)([ye(12)],t.prototype,"fontSize",void 0),Object(s.b)([ye(!1)],t.prototype,"italic",void 0),Object(s.b)([ye(!1)],t.prototype,"bold",void 0),Object(s.b)([ye("CollapseSpace")],t.prototype,"whiteSpace",void 0),Object(s.b)([ye("WrapWithOverflow")],t.prototype,"textWrapping",void 0),Object(s.b)([ye("Center")],t.prototype,"textAlign",void 0),Object(s.b)([ye("None")],t.prototype,"textDecoration",void 0),Object(s.b)([ye("Wrap")],t.prototype,"textOverflow",void 0),Object(s.b)([ye("transparent")],t.prototype,"fill",void 0),t}(qn),Xn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.padding=new Fn(0,0,0,0),t.desiredBounds=void 0,t.measureChildren=!0,t.prevRotateAngle=0,t}return Object(s.c)(t,e),t.prototype.hasChildren=function(){return void 0!==this.children&&this.children.length>0},t.prototype.measure=function(e){this.desiredBounds=void 0;var n,i,r=void 0;if(this.hasChildren()){for(var o=0;o<this.children.length;o++)"Stretch"!==(n=this.children[o]).horizontalAlignment||e.width||(e.width=n.bounds.width),"Stretch"!==n.verticalAlignment||e.height||(e.height=n.bounds.height),(this.measureChildren||"Stretch"===n.horizontalAlignment||"Stretch"===n.verticalAlignment||n instanceof t&&void 0!==n.measureChildren)&&n.measure(e),i=this.GetChildrenBounds(n),"Stretch"!==n.horizontalAlignment&&"Stretch"!==n.verticalAlignment?void 0===this.desiredBounds?this.desiredBounds=i:this.desiredBounds.uniteRect(i):!this.actualSize||this.actualSize.width||this.actualSize.height||n.preventContainer||"Stretch"!==n.horizontalAlignment||"Stretch"!==n.verticalAlignment||(void 0===this.desiredBounds?this.desiredBounds=n.bounds:this.desiredBounds.uniteRect(n.bounds));if(void 0!==this.desiredBounds&&0!==this.rotateAngle){var s=ec(this.rotateAngle,void 0,void 0,{x:this.desiredBounds.x+this.desiredBounds.width*this.pivot.x,y:this.desiredBounds.y+this.desiredBounds.height*this.pivot.y});this.desiredBounds.x=s.x-this.desiredBounds.width*this.pivot.x,this.desiredBounds.y=s.y-this.desiredBounds.height*this.pivot.y}this.desiredBounds&&(r=new Xt(this.desiredBounds.width,this.desiredBounds.height))}return r=this.validateDesiredSize(r,e),this.stretchChildren(r),this.desiredSize=r,r},t.prototype.arrange=function(e){var n,i=this.desiredBounds;if(i&&(this.offsetX=i.x+i.width*this.pivot.x,this.offsetY=i.y+i.height*this.pivot.y,this.hasChildren()))for(var r=0;r<this.children.length;r++){var o=!1;"Stretch"===(n=this.children[r]).horizontalAlignment&&(n.offsetX=this.offsetX,n.parentTransform=this.parentTransform+this.rotateAngle,this.flip&&this.elementActions&Sn.ElementIsGroup&&(n.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-n.parentTransform:n.parentTransform),o=!0),"Stretch"===n.verticalAlignment&&(n.offsetY=this.offsetY,n.parentTransform=this.parentTransform+this.rotateAngle,o=!0),(o||this.measureChildren||n instanceof t&&void 0!==n.measureChildren)&&n.arrange(n.desiredSize)}return this.actualSize=e,this.updateBounds(),this.prevRotateAngle=this.rotateAngle,e},t.prototype.stretchChildren=function(e){if(this.hasChildren())for(var n=0,i=this.children;n<i.length;n++){var r=i[n];"Stretch"!==r.horizontalAlignment&&void 0!==r.desiredSize.width||(r.desiredSize.width=e.width-r.margin.left-r.margin.right),"Stretch"!==r.verticalAlignment&&void 0!==r.desiredSize.height||(r.desiredSize.height=e.height-r.margin.top-r.margin.bottom),r instanceof t&&r.stretchChildren(r.desiredSize)}},t.prototype.applyPadding=function(e){e.width+=this.padding.left+this.padding.right,e.height+=this.padding.top+this.padding.bottom},t.prototype.findChildOffsetFromCenter=function(e,t){var n=function(t,n){return{x:t.x+e.desiredSize.width*e.pivot.x,y:t.y+e.desiredSize.height*e.pivot.y}}({x:t.x-e.desiredSize.width/2,y:t.y-e.desiredSize.height/2});n=ec(e.rotateAngle,t.x,t.y,n),n=ec(this.rotateAngle+this.parentTransform,this.offsetX,this.offsetY,n),e.offsetX=n.x,e.offsetY=n.y},t.prototype.GetChildrenBounds=function(e){var t;t=e.desiredSize.clone();var n=e.offsetX-t.width*e.pivot.x,i=e.offsetY-t.height*e.pivot.y,r=n+t.width,o=i+t.height,s={x:n,y:i},a={x:r,y:i},l={x:n,y:o},c={x:r,y:o};return s=ec(e.rotateAngle,e.offsetX,e.offsetY,s),a=ec(e.rotateAngle,e.offsetX,e.offsetY,a),l=ec(e.rotateAngle,e.offsetX,e.offsetY,l),c=ec(e.rotateAngle,e.offsetX,e.offsetY,c),0!==this.rotateAngle&&(s=ec(-this.rotateAngle,void 0,void 0,s),a=ec(-this.rotateAngle,void 0,void 0,a),l=ec(-this.rotateAngle,void 0,void 0,l),c=ec(-this.rotateAngle,void 0,void 0,c)),an.toBounds([s,a,l,c])},t}(Nn),Zn=function(e){function t(){var t=e.call(this)||this;return t.pathData="",t.transformPath=!0,t.absolutePath="",t.canMeasurePath=!1,t.absoluteBounds=new an,t}return Object(s.c)(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.pathData},set:function(e){this.pathData!==e&&(this.pathData=e,this.isDirt=!0)},enumerable:!0,configurable:!0}),t.prototype.getPoints=function(){var e=this;return this.pointTimer||(this.pointTimer=setTimeout(function(){e.points=null,e.pointTimer=null},200)),this.points=this.points||function(e){var t,n,i=[];window.measureElement.style.visibility="visible";var r=fl(window.measureElement.children[2])[0];r.setAttributeNS(null,"d",e.data);var o=yl(e,e.absoluteBounds);r.setAttributeNS(null,"d",o);var s=r.getTotalLength();for(n=0;n<=s;n+=10)t=r.getPointAtLength(n),i.push({x:t.x,y:t.y});return window.measureElement.style.visibility="hidden",i}(this),function(e,t){for(var n=[],i=0,r=t;i<r.length;i++){var o=r[i],s={x:e.offsetX-e.actualSize.width*e.pivot.x+o.x,y:e.offsetY-e.actualSize.height*e.pivot.y+o.y},a=void 0,l=e.rotateAngle+e.parentTransform;l&&un(a=hn(),l,e.offsetX,e.offsetY),a&&(s=dn(a,s)),n.push(s)}return n}(this,this.points)},t.prototype.measure=function(e){return this.staticSize&&void 0!==this.width&&void 0!==this.height?this.absoluteBounds=new an(this.offsetX-this.width*this.pivot.x,this.offsetY-this.height*this.pivot.y,this.width,this.height):(!this.isDirt||!this.transformPath&&void 0!==this.width&&void 0!==this.height||this.absoluteBounds&&0!==this.absoluteBounds.height)&&!this.canMeasurePath||(this.absoluteBounds=gl(this.data?this.data:"")),this.desiredSize=void 0===this.width?new Xt(this.absoluteBounds.width,this.height||this.absoluteBounds.height):void 0===this.height?new Xt(this.width||this.absoluteBounds.width,this.absoluteBounds.height):new Xt(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.canMeasurePath=!1,this.desiredSize},t.prototype.arrange=function(e){return(this.isDirt||this.actualSize.width!==e.width||this.actualSize.height!==e.height)&&(this.isDirt=!0,this.absolutePath=this.updatePath(this.data,this.absoluteBounds,e),this.staticSize||(this.points=null)),this.actualSize=this.desiredSize,this.updateBounds(),this.isDirt=!1,this.actualSize},t.prototype.updatePath=function(e,t,n){var i,r=!1,o=-t.x,s=-t.y,a=[];return n.width===t.width&&n.height===t.height||(o=n.width/Number(t.width?t.width:1),s=n.height/Number(t.height?t.height:1),r=!0),a=rn(a=Kt(e)),i=(r||this.isDirt)&&this.transformPath?en(a,o,s,r,t.x,t.y,0,0):on(a),r=!1,i},t}(Nn),Kn=function(e){function t(t,n){var i=e.call(this)||this;return i.data="",i.nodeId="",i.diagramId="",i.scale="Stretch",i.diagramId=n,i.nodeId=t,i}return Object(s.c)(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this.data},set:function(e){this.data=e,this.template=_l(this,!1),this.isDirt=!0},enumerable:!0,configurable:!0}),t.prototype.measure=function(e){if(this.isDirt){var t=function(e){window.measureElement.style.visibility="visible";var t=window.measureElement.children[2];t.appendChild(e);var n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),r=n;return r.x=n.left-i.left,r.y=n.top-i.top,t.removeChild(e),window.measureElement.style.visibility="hidden",r}(this.template);this.contentSize=new Xt,this.contentSize.width=t.width,this.contentSize.height=t.height,this.templatePosition={x:t.x,y:t.y},this.isDirt=!1}if(void 0===this.width||void 0===this.height){var n=function(e){window.measureElement.style.visibility="visible";var t=window.measureElement.children[2];t.appendChild(e);var n=t.getBoundingClientRect();return t.removeChild(e),window.measureElement.style.visibility="hidden",n}(this.template);this.desiredSize=new Xt(n.width,n.height)}else this.desiredSize=new Xt(this.width,this.height);return this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=new Xt(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},t}(Nn),Jn=function(e){function t(){var t=e.call(this)||this;return t.textContent="",t.canMeasure=!0,t.isLaneOrientation=!1,t.canConsiderBounds=!0,t.hyperlink={color:"blue"},t.doWrap=!0,t.textNodes=[],t.style={color:"black",fill:"transparent",strokeColor:"black",strokeWidth:1,fontFamily:"Arial",fontSize:12,whiteSpace:"CollapseSpace",textWrapping:"WrapWithOverflow",textAlign:"Center",italic:!1,bold:!1,textDecoration:"None",strokeDashArray:"",opacity:5,gradient:null,textOverflow:"Wrap"},t.style.fill="transparent",t.style.strokeColor="transparent",t}return Object(s.c)(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this.textContent},set:function(e){this.textContent!==e&&(this.textContent=e,this.isDirt=!0,this.doWrap=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.textNodes},set:function(e){this.textNodes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapBounds",{get:function(){return this.textWrapBounds},set:function(e){this.textWrapBounds=e},enumerable:!0,configurable:!0}),t.prototype.refreshTextElement=function(){this.isDirt=!0},t.prototype.measure=function(e){var t,n,i,r,o,s;return t=this.isDirt&&this.canMeasure?(this,n=this.isLaneOrientation?e.height:this.width||e.width,o=new Xt(0,0),s=function(e,t){var n={fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray,opacity:e.style.opacity,shadow:e.shadow,gradient:e.style.gradient,visible:e.visible,id:e.id,description:e.description,width:t||e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5};return n.fontSize=e.style.fontSize,n.fontFamily=e.style.fontFamily,n.textOverflow=e.style.textOverflow,n.textDecoration=e.style.textDecoration,n.doWrap=e.doWrap,n.whiteSpace=Jl(e.style.whiteSpace,e.style.textWrapping),n.content=e.content,n.textWrapping=e.style.textWrapping,n.breakWord=Yl(e.style.textWrapping),n.textAlign=Ql(e.style.textAlign),n.color=e.style.color,n.italic=e.style.italic,n.bold=e.style.bold,n.dashArray="",n.strokeWidth=0,n.fill="",n}(this,n),this.childNodes=i=function(e,t,n){var i,r,o=[],s=0,a=e.content;if("nowrap"!==e.whiteSpace&&"pre"!==e.whiteSpace)if("breakall"===e.breakWord)for(i="",i+=a[0],s=0;s<a.length;s++)if((r=Xl(i,e))>=e.width&&i.length>0)o[o.length]={text:i,x:0,dy:0,width:r},i="";else{(i+=a[s+1]||"").indexOf("\n")>-1&&(i=i.replace("\n",""));var l=Xl(i,e);Math.ceil(l)+2>=e.width&&i.length>0&&(o[o.length]={text:i,x:0,dy:0,width:l},i=""),s===a.length-1&&i.length>0&&(o[o.length]={text:i,x:0,dy:0,width:l},i="")}else o=function(e,t,n){var i,r,o,s,a=[],l="",c=0,h=0,d="nowrap"!==e.whiteSpace,u=e.content.split("\n");for(c=0;c<u.length;c++)for(i="NoWrap"!==e.textWrapping?u[c].split(" "):u,h=0;h<i.length;h++){var p=Xl(r=(l+=((0!==h||1===i.length)&&d&&l.length>0?" ":"")+i[h])+(i[h+1]||""),e);Math.floor(p)>(n||e.width)-2&&l.length>0?(a[a.length]={text:l,x:0,dy:0,width:r===l?p:l===s?o:Xl(l,e)},l=""):h===i.length-1&&(a[a.length]={text:l,x:0,dy:0,width:p},l=""),s=r,o=p}return a}(e,0,n);else o[o.length]={text:a,x:0,dy:0,width:Xl(a,e)};return o}(s,0,this.isLaneOrientation?n:void 0),this.wrapBounds=r=function(e,t){var n,i,r={x:0,width:0},o=0;for(o=0;o<t.length;o++)i=n=t[o].width,n="left"===e.textAlign?0:"center"===e.textAlign?n>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:-n/2:"right"===e.textAlign?-n:t.length>1?0:-n/2,t[o].dy=1.2*e.fontSize,t[o].x=n,r?(r.x=Math.min(r.x,n),r.width=Math.max(r.width,i)):r={x:n,width:i};return r}(s,i),o.width=r.width,this.wrapBounds.width>=n&&"Wrap"!==s.textOverflow&&(o.width=n),o.height=i.length*this.style.fontSize*1.2,o):this.desiredSize,this.desiredSize=void 0===this.width||void 0===this.height?new Xt(t.width,t.height):new Xt(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return(e.width!==this.actualSize.width||e.height!==this.actualSize.height||this.isDirt)&&(this.doWrap=!0),this.actualSize=e,this.updateBounds(),this.isDirt=!1,this.actualSize},t}(Nn),$n=function(e){function t(){var t=e.call(this)||this;return t.imageSource="",t.imageScale="None",t.imageAlign="None",t.stretch="Stretch",t}return Object(s.c)(t,e),Object.defineProperty(t.prototype,"source",{get:function(){return this.imageSource},set:function(e){this.imageSource=e,this.isDirt=!0},enumerable:!0,configurable:!0}),t.prototype.measure=function(e){return this.isDirt&&("Stretch"!==this.stretch||void 0===this.width&&void 0===this.height)&&(this.contentSize=function(e,t){window.measureElement.style.visibility="visible";var n=window.measureElement.children[1];n.setAttribute("src",e);var i=n.getBoundingClientRect();return t=new Xt(i.width,i.height),window.measureElement.style.visibility="hidden",t}(this.source,this.contentSize),this.isDirt=!1),void 0!==this.width&&void 0!==this.height?(this.desiredSize=new Xt(this.width,this.height),this.contentSize=this.desiredSize):this.desiredSize=this.contentSize,this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=new Xt(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},t}(Nn),ei=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("blue")],t.prototype,"color",void 0),Object(s.b)([ye("")],t.prototype,"content",void 0),Object(s.b)([ye("")],t.prototype,"link",void 0),Object(s.b)([ye("None")],t.prototype,"textDecoration",void 0),t}(Le),ti=function(e){function t(t,n,i,r){var o=e.call(this,t,n,i,r)||this;return i.id||(o.id=t.parentObj&&t.parentObj.propName&&"phases"===t.parentObj.propName?t.parentObj.id:zl()),o}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"content",void 0),Object(s.b)([ye(void 0)],t.prototype,"template",void 0),Object(s.b)([ye(!0)],t.prototype,"visibility",void 0),Object(s.b)([ye(xn.InheritReadOnly)],t.prototype,"constraints",void 0),Object(s.b)([ve(void 0,ei)],t.prototype,"hyperlink",void 0),Object(s.b)([ye("")],t.prototype,"id",void 0),Object(s.b)([ye()],t.prototype,"width",void 0),Object(s.b)([ye()],t.prototype,"height",void 0),Object(s.b)([ye(0)],t.prototype,"rotateAngle",void 0),Object(s.b)([ve({strokeWidth:0,strokeColor:"transparent",fill:"transparent"},Yn)],t.prototype,"style",void 0),Object(s.b)([ye("Center")],t.prototype,"horizontalAlignment",void 0),Object(s.b)([ye("Center")],t.prototype,"verticalAlignment",void 0),Object(s.b)([ve({},zn)],t.prototype,"margin",void 0),Object(s.b)([ve({top:void 0,bottom:void 0,left:void 0,right:void 0},zn)],t.prototype,"dragLimit",void 0),Object(s.b)([ye("Shape")],t.prototype,"type",void 0),Object(s.b)([ye()],t.prototype,"addInfo",void 0),t}(Le),ni=function(e){function t(t,n,i,r){return e.call(this,t,n,i,r)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"ShapeAnnotation"},Object(s.b)([ve({x:.5,y:.5},Zt)],t.prototype,"offset",void 0),t}(ti),ii=function(e){function t(t,n,i,r){return e.call(this,t,n,i,r)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"PathAnnotation"},Object(s.b)([ye(.5)],t.prototype,"offset",void 0),Object(s.b)([ve({x:0,y:0},Zt)],t.prototype,"displacement",void 0),Object(s.b)([ye("Center")],t.prototype,"alignment",void 0),Object(s.b)([ye(!1)],t.prototype,"segmentAngle",void 0),t}(ti),ri=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.measureChildren=void 0,t}return Object(s.c)(t,e),t.prototype.measure=function(t){var n=void 0,i=void 0;if(this.hasChildren()){for(var r=0,o=this.children;r<o.length;r++){var s=o[r];if(s instanceof Jn){if(!s.canMeasure)break;t.width=t.width||this.maxWidth||this.minWidth,s.measure(t)}else s instanceof Jn||s.measure(t);var a=s.desiredSize.clone();0!==s.rotateAngle&&(a=$l(a,s.rotateAngle));var l=new an(s.margin.left,s.margin.top,a.width+s.margin.right,a.height+s.margin.bottom);s.float&&void 0!==s.getAbsolutePosition(a)||s instanceof Jn&&!(s instanceof Jn&&s.canConsiderBounds)||(void 0===i?i=l:i.uniteRect(l))}var c,h;i&&(c=Math.max(i.left,0),h=Math.max(i.top,0),n=new Xt(i.width+c,i.height+h))}return n=e.prototype.validateDesiredSize.call(this,n,t),e.prototype.stretchChildren.call(this,n),n.width+=this.padding.left+this.padding.right,n.height+=this.padding.top+this.padding.bottom,this.desiredSize=n,n},t.prototype.arrange=function(t,n){if(this.outerBounds=new an,this.hasChildren()){var i,r;i=this.offsetY-t.height*this.pivot.y+this.padding.top,r=this.offsetX-t.width*this.pivot.x+this.padding.left;for(var o=0,s=this.children;o<s.length;o++){var a=s[o];if(0!=(a.transform&Dn.Parent)){a.parentTransform=this.parentTransform+this.rotateAngle,("None"!==this.flip||this.elementActions&Sn.ElementIsGroup)&&(a.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-a.parentTransform:a.parentTransform);var l,c=a.desiredSize.clone(),h=r,d=i;if("Point"===a.relativeMode){var u=a.getAbsolutePosition(t);void 0!==u&&(h+=u.x,d+=u.y)}l="Object"===a.relativeMode?this.alignChildBasedOnParent(a,c,t,h,d):this.alignChildBasedOnaPoint(a,h,d),e.prototype.findChildOffsetFromCenter.call(this,a,{x:l.x+c.width/2,y:l.y+c.height/2})}!n||"Stretch"!==a.horizontalAlignment&&"Stretch"!==a.verticalAlignment?a instanceof Jn&&a.canMeasure?(a.arrange(a.desiredSize),this.outerBounds.uniteRect(a.outerBounds)):a instanceof Jn||(a.arrange(a.desiredSize),this.outerBounds.uniteRect(a.outerBounds)):a.arrange(t)}}return this.actualSize=t,this.updateBounds(),this.outerBounds.uniteRect(this.bounds),t},t.prototype.alignChildBasedOnParent=function(e,t,n,i,r){switch(e.horizontalAlignment){case"Auto":case"Left":i+=e.margin.left;break;case"Right":i+=n.width-t.width-e.margin.right;break;case"Stretch":case"Center":i+=n.width/2-t.width/2}switch(e.verticalAlignment){case"Auto":case"Top":r+=e.margin.top;break;case"Bottom":r+=n.height-t.height-e.margin.bottom;break;case"Stretch":case"Center":r+=n.height/2-t.height/2}return{x:i,y:r}},t.prototype.alignChildBasedOnaPoint=function(e,t,n){switch(t+=e.margin.left-e.margin.right,n+=e.margin.top-e.margin.bottom,e.horizontalAlignment){case"Auto":case"Left":t=t;break;case"Stretch":case"Center":t-=e.desiredSize.width*e.pivot.x;break;case"Right":t-=e.desiredSize.width}switch(e.verticalAlignment){case"Auto":case"Top":n=n;break;case"Stretch":case"Center":n-=e.desiredSize.height*e.pivot.y;break;case"Bottom":n-=e.desiredSize.height}return{x:t,y:n}},t}(Xn);function oi(e){return si[e.toString()]}var si={Rectangle:"M0,0 L50,0 L50,50 L0,50 z",Ellipse:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Hexagon:"M30,0 L60,0 L90,30 L60,60 L30,60 L0,30 L30,0 z",Parallelogram:"M30,0 L60,0 L45,30 L15,30 z",Triangle:"M45,0 L90,45 L0,45 L45,0 z",Plus:"M696.6084,158.2656 L674.8074,158.2656 L674.8074,136.4656 L658.4084,136.4656 L658.4084,158.2656 L636.6084,158.2656L636.6084,174.6646 L658.4084,174.6646 L658.4084,196.4656 L674.8074,196.4656 L674.8074,174.6646 L696.6084,174.6646L696.6084,158.2656 z",Star:"M540.3643,137.9336 L546.7973,159.7016 L570.3633,159.7296 L550.7723,171.9366 L558.9053,194.9966 L540.3643,179.4996L521.8223,194.9966 L529.9553,171.9366 L510.3633,159.7296 L533.9313,159.7016 L540.3643,137.9336 z",Pentagon:"M30,0 L60,30 L50,70 L10,70 L0,30 L30,0 z",Heptagon:"M223.7783,195.7134 L207.1303,174.8364 L213.0713,148.8034 L237.1303,137.2174 L261.1883,148.8034 L267.1303,174.8364L250.4813,195.7134 L223.7783,195.7134 z",Octagon:"M98.7319,196.4653 L81.1579,178.8923 L81.1579,154.0393 L98.7319,136.4653 L123.5849,136.4653L141.1579,154.0393 L141.1579,178.8923 L123.5849,196.4653 L98.7319,196.4653 z",Trapezoid:"M127.2842,291.4492 L95.0322,291.4492 L81.1582,256.3152 L141.1582,256.3152 L127.2842,291.4492 z",Decagon:"M657.3379,302.4141 L642.3369,291.5161 L636.6089,273.8821 L642.3369,256.2481 L657.3379,245.3511 L675.8789,245.3511L690.8789,256.2481 L696.6089,273.8821L690.8789,291.5161 L675.8789,302.4141 L657.3379,302.4141 z",RightTriangle:"M836.293,292.9238 L776.293,292.9238 L776.293,254.8408 L836.293,292.9238 z",Cylinder:"M 542.802,362.009C 542.802,368.452 525.341,373.676 503.802,373.676C 482.263,373.676 464.802,368.452 464.802,362.009L 464.802,466.484C 464.802,472.928 482.263,478.151 503.802,478.151C 525.341,478.151 542.802,472.928 542.802,466.484L 542.802,362.016C 542.802,368.459 525.341,373.534 503.802,373.534C 482.263,373.534 464.802,368.31 464.802,361.867L 464.802,362.016C 464.802,355.572 482.263,350.349 503.802,350.349C 525.341,350.349 542.802,355.572 542.802,362.016",Diamond:"M397.784,287.875 L369.5,316.159 L341.216,287.875 L369.5,259.591 L397.784,287.875 z"},ai=function(e){function t(t,n,i,r){return e.call(this,t,n,i,r)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"PointPort"},Object(s.b)([ve({x:.5,y:.5},Zt)],t.prototype,"offset",void 0),t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"id",void 0),Object(s.b)([ye("Center")],t.prototype,"horizontalAlignment",void 0),Object(s.b)([ye("Center")],t.prototype,"verticalAlignment",void 0),Object(s.b)([ve({},zn)],t.prototype,"margin",void 0),Object(s.b)([ye(12)],t.prototype,"width",void 0),Object(s.b)([ye(12)],t.prototype,"height",void 0),Object(s.b)([ve({},qn)],t.prototype,"style",void 0),Object(s.b)([ye("Square")],t.prototype,"shape",void 0),Object(s.b)([ye(vn.Connect)],t.prototype,"visibility",void 0),Object(s.b)([ye("")],t.prototype,"pathData",void 0),Object(s.b)([ye(_n.Default)],t.prototype,"constraints",void 0),Object(s.b)([ye()],t.prototype,"addInfo",void 0),t}(Le));function li(e){return ci[e.toString()]}var ci={X:"M14,14 L106,106 M106,14 L14,106",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Square:"M0,0 L10,0 L10,10 L0,10 z"},hi={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z"};function di(e){return vi[e.toString()]}var ui,pi,fi,gi,mi,yi,vi={Process:"M419.511,76.687L359.511,76.687L359.511,43.086L419.511,43.086z",Decision:"M 253.005,115.687L 200.567,146.071L 148.097,115.687L 200.534,85.304L 253.005,115.687 Z",Document:"M 60 31.9 c 0 0 -11 -7.7 -30 0 s -30 0 -30 0 V 0 h 60 V 31.9 Z",PreDefinedProcess:"M 0,0 L 50,0 L 50,50 L 0,50 Z  M 8.334,0 L 8.334,50 M 41.667,0 L 41.667,50",Terminator:"M 269.711,29.33C 269.71,44.061 257.77,56 243.04,56L 158.058,56C 143.33,56 131.39,44.061 131.39,29.33L 131.39,29.33C 131.391,14.6057 143.33,2.669 158.058,2.669L 243.044,2.669C 257.772,2.669 269.711,14.6057 269.711,29.333 Z",PaperTap:"M0.0009,17.2042 L0.0009,47.165 C0.001,47.165 14.403,53.5455 25.00,47.165 C35.599,40.7852 44.403,43.5087 50.00,47.165L50.001,17.2042 M50.001,32.7987 L50.001,2.8405 C50.001,2.8405 35.599,-3.5427 25.001,2.8405C14.403,9.2237 5.599,6.494 0.0009,2.8405 L0.0009,32.7987",DirectData:"M 132.62 0 L 17.38 0 C 7.78 0 0 13.43 0 30 C 0 46.57 7.78 60 17.38 60 L 132.62 60 M 132.62 0C 123.02 0 115.24 13.43 115.24 30 C 115.24 46.57 123.02 60 132.62 60 C 142.22 60 150 46.57 150 30 C 150 13.43 142.22 0 132.62 0 z ",SequentialData:"M0.0029,24.999 C0.0029,11.1922 10.433,0.0021 23.295,0.0021 C36.159,0.00216 46.585,11.1922 46.585,24.999C46.585,38.8057 36.159,49.9979 23.295,49.9979 C10.433,49.9979 0.0029,38.8057 0.0029,24.999 z M23.294,49.999 L50.002,49.999",Sort:"M50.001,24.9971 L25.001,49.9971 L0.00097,24.9971 L25.001,-0.00286865 L50.001,24.9971 z M0.000976562,24.9971 L50.001,24.9971",MultiDocument:"M43.6826,40 C44.8746,40.6183 45.8586,41.3502 46.8366,42.1122 L46.8366,4.74487 L3.09857,4.74487 L3.09857,10.9544 M46.837,35.143 C48.027,35.765 49.025,36.604 50.003,37.369 L50.003,0.002 L6.264,0.002 L6.264,4.744 M43.682,47.113 L43.682,10.765 L0.0025,10.7652 L0.0025,47.1132 C0.0025,47.1132 12.5846,53.6101 21.8426,47.1132 C31.1006,40.6163 38.792,43.393 43.6826,47.1132 z",Collate:"M50.001,0.0028 L25.001,25.0029 L0.00097,0.0028 L50.001,0.002 z M0.0009,50.002 L25.001,25.002L50.001,50.002 L0.0009,50.0029 z",SummingJunction:"M7.3252,42.6768 L42.6772,7.3247 M42.6768,42.6768 L7.3248,7.3247 M0.0009,25.001 C0.0009,11.193 11.197,0.0009 25.001,0.0009 C38.809,0.0009 50.001,11.193 50.001,25.001 C50.001,38.809 38.809,50.001 25.001,50.001 C11.197,50.00 0.0009,38.809 0.0009,25.00 z",Or:"M 0 50 L 100 50 M 50 100 L 50 0.0 M 0 50 C 0 22.384 22.392 0 50 0 C 77.616 0 100 22.384 100 50 C 100 77.616 77.616 100 50 100 C 22.392 100 0 77.616 0 50 Z",InternalStorage:"M 0 3.81946A 2.5,3.81946 0 0,1 2.5,0L 47.5 0A 2.5,3.81946 0 0,1 50,3.81946L 50 45.836A 2.5,3.819446 0 0,1 47.5,49.652778L 2.5 49.652778A 2.5,3.819446 0 0,1 0,45.8336L 0 3.819446ZM 0 11.45834L 50 11.4583334M 12.5 0L 12.5 49.652778",Extract:"M0,35 L30,0 L60,35 Z",ManualOperation:"M46.4,28.8 L14.8,28.8 L0,0 L60,0 Z",Merge:"M60,0 L30,35 L0,0 Z",OffPageReference:"M60,33.3 L30.1,39 L0,33.3 L0,0 L60,0 Z",SequentialAccessStorage:"M 60 30 C 60 13.4 46.6 0 30 0 S 0 13.4 0 30 s 13.4 30 30 30 h 28.6 v -6.5 h -9.9C 55.5 48 60 39.5 60 30 Z",Annotation:"M49.9984,50.0029 L-0.00271199,50.0029 L-0.00271199,0.00286865 L49.9984,0.00286865",Annotation2:"M49.9977,50.0029 L25.416,50.0029 L25.416,0.00286865 L49.9977,0.00286865 M25.4166,25.0029 L-0.00227869,25.0029",Data:"M 10 0 L 40 0 L 30 40 L 0 40 Z",Card:"M275,60 L400,60 L400,110 L260,110 L260,75 Z",Delay:"M0,0 L12.029,0 C14.212999,0 16,1.7869979 16,3.9709952 C16,6.1549926 14.212999,7.9409904 12.029,7.9409904 L0,7.9409904 z",Preparation:"M 1048.17 572 C 1051.06 568.86 1055.17 567.05 1059.5 567 L 1094.51 567 C 1098.84 567.05 1102.95 568.86 1105.84 572 L 1126.43 595 C 1127.01 596.28 1127.01 597.72 1126.43 599 L 1105.84 622 C 1102.95 625.14 1098.84 626.95 1094.51 627 L 1059.5 627 C 1055.17 626.95 1051.06 625.14 1048.17 622 L 1027.58 599 C 1027 597.72 1027 596.28 1027.58 595 L 1048.17 572 Z",Display:"M47.8809,19.2914 L32.7968,-0.00594145 L11.3902,-0.00594145 C7.93166,-0.00594145 0.00124586,11.187 0.00124586,24.9968C0.00124586,38.8032 7.93166,49.9962 11.3902,49.9962 L32.7968,49.99 L47.615,31.038 C47.615,31.0388 52.798,24.9968 47.880,19.2914 z",ManualInput:"M 912 732 L 1006.85 707 C 1008.2 707 1009.5 707.53 1010.46 708.46 C 1011.41 709.4 1011.95 710.67 1011.95 712 L 1011.95 762C 1012 764.41 1010.28 766.52 1007.87 767 L 917.1 767 C 915.75 767 914.45 766.47 913.49 765.54 C 912.54 764.6 912 763.33 912 762 L 912 732 Z",LoopLimit:"M 8 9 L 27 9 L 33 15 L 33 26 C 33 27 33 27 32 27 L 4 27 C 3 27 2 27 2 26 L 2 15 L 8 9 Z",StoredData:"M 5.55 0L 50 0A 1.5,30 0 0,1 50,0A 5.555,25 0 0,0 50,50A 1.5,30 0 0,1 50,50L 5.555 50A 5.55,25 0 0,1 5.555,0Z"},bi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("None")],t.prototype,"shape",void 0),Object(s.b)([ye("white")],t.prototype,"fill",void 0),Object(s.b)([ye("Auto")],t.prototype,"horizontalAlignment",void 0),Object(s.b)([ye("Auto")],t.prototype,"verticalAlignment",void 0),Object(s.b)([ye(10)],t.prototype,"width",void 0),Object(s.b)([ye(10)],t.prototype,"height",void 0),Object(s.b)([ve({x:.5,y:1},Zt)],t.prototype,"offset",void 0),Object(s.b)([ye("#1a1a1a")],t.prototype,"borderColor",void 0),Object(s.b)([ye(1)],t.prototype,"borderWidth",void 0),Object(s.b)([ve({},zn)],t.prototype,"margin",void 0),Object(s.b)([ye("")],t.prototype,"pathData",void 0),Object(s.b)([ye("")],t.prototype,"content",void 0),Object(s.b)([ye(0)],t.prototype,"cornerRadius",void 0),Object(s.b)([ve({left:2,right:2,top:2,bottom:2},zn)],t.prototype,"padding",void 0),t}(Le),wi=!1;function Ci(e,t){var n=!1,i={left:0,top:0},r=e;if(!e||!t)return i;for(m(t.offsetParent)&&"fixed"===t.style.position&&(n=!0);(t.offsetParent||n)&&e&&t.offsetParent!==e;)i.left+=e.offsetLeft,i.top+=e.offsetTop,e=e.offsetParent;for(e=r;(t.offsetParent||n)&&e&&t.offsetParent!==e;)i.left-=e.scrollLeft,i.top-=e.scrollTop,e=e.parentElement;return i}function xi(e,t,n,i,r){return pi=r,wi=!!i,e?(t||(t="left"),n||(n="top"),gi=e.ownerDocument,fi=e,function(e,t,n){switch(ui=fi.getBoundingClientRect(),t+e){case"topcenter":Ai(Mi(),n),Si(ki(),n);break;case"topright":Ai(Ti(),n),Si(ki(),n);break;case"centercenter":Ai(Mi(),n),Si(Di(),n);break;case"centerright":Ai(Ti(),n),Si(Di(),n);break;case"centerleft":Ai(Pi(),n),Si(Di(),n);break;case"bottomcenter":Ai(Mi(),n),Si(Ii(),n);break;case"bottomright":Ai(Ti(),n),Si(Ii(),n);break;case"bottomleft":Ai(Pi(),n),Si(Ii(),n);break;default:case"topleft":Ai(Pi(),n),Si(ki(),n)}return n}(t.toLowerCase(),n.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function Ai(e,t){t.left=e}function Si(e,t){t.top=e}function Oi(){return gi.documentElement.scrollTop||gi.body.scrollTop}function Ei(){return gi.documentElement.scrollLeft||gi.body.scrollLeft}function Ii(){return wi?ui.bottom:ui.bottom+Oi()}function Di(){return ki()+ui.height/2}function ki(){return wi?ui.top:ui.top+Oi()}function Pi(){return ui.left+Ei()}function Ti(){return ui.right+Ei()-(pi?pi.width:0)}function Mi(){return Pi()+ui.width/2}function ji(e,t,n,i){if(void 0===t&&(t=null),void 0===n&&(n={X:!1,Y:!1}),!n.Y&&!n.X)return{left:0,top:0};var r=e.getBoundingClientRect();if(yi=t,mi=e.ownerDocument,i||(i=xi(e,"left","top")),n.X){var o=yi?Bi():Xi(),s=Ui(),a=Wi(),l=s-i.left,c=i.left+r.width-a;r.width>o?i.left=l>0&&c<=0?a-r.width:c>0&&l<=0?s:l>c?a-r.width:s:l>0?i.left+=l:c>0&&(i.left-=c)}if(n.Y){var h=yi?Fi():Yi(),d=Vi(),u=Gi(),p=d-i.top,f=i.top+r.height-u;r.height>h?i.top=p>0&&f<=0?u-r.height:f>0&&p<=0?d:p>f?u-r.height:d:p>0?i.top+=p:f>0&&(i.top-=f)}return i}function Ri(e,t,n,i){void 0===t&&(t=null);var r=xi(e,"left","top");n&&(r.left=n),i&&(r.top=i);var o=[];yi=t,mi=e.ownerDocument;var s=e.getBoundingClientRect(),a=r.left,l=r.left+s.width,c=Ni(r.top,r.top+s.height),h=_i(a,l);return c.topSide&&o.push("top"),h.rightSide&&o.push("right"),h.leftSide&&o.push("left"),c.bottomSide&&o.push("bottom"),o}function Li(e,t,n){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+n.width},e.BL={top:e.TL.top+n.height,left:e.TL.left},e.BR={top:e.TL.top+n.height,left:e.TL.left+n.width}}function _i(e,t){var n=!1,i=!1;return e-Qi()<Ui()&&(n=!0),t>Wi()&&(i=!0),{leftSide:n,rightSide:i}}function Ni(e,t){var n=!1,i=!1;return e-qi()<Vi()&&(n=!0),t>Gi()&&(i=!0),{topSide:n,bottomSide:i}}function Bi(){return yi.getBoundingClientRect().width}function Fi(){return yi.getBoundingClientRect().height}function zi(){return yi.getBoundingClientRect().left}function Hi(){return yi.getBoundingClientRect().top}function Vi(){return yi?Hi():0}function Ui(){return yi?zi():0}function Wi(){return yi?Qi()+zi()+Bi():Qi()+Xi()}function Gi(){return yi?qi()+Hi()+Fi():qi()+Yi()}function qi(){return mi.documentElement.scrollTop||mi.body.scrollTop}function Qi(){return mi.documentElement.scrollLeft||mi.body.scrollLeft}function Yi(){return window.innerHeight}function Xi(){var e=window.innerWidth;return e-(e-(m(document.documentElement)?0:document.documentElement.offsetWidth))}var Zi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("left")],t.prototype,"X",void 0),Object(s.b)([ye("top")],t.prototype,"Y",void 0),t}(Le),Ki=function(e){function t(t,n){return e.call(this,n,t)||this}return Object(s.c)(t,e),t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"width":U(this.element,{width:x(e.width)});break;case"height":U(this.element,{height:x(e.height)});break;case"zIndex":U(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var r=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+r).toString()+"px";break;case"offsetY":var o=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+o).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}},t.prototype.getModuleName=function(){return"popup"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.remove("e-popup","e-rtl"),this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add("e-popup");var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=x(this.width)),"auto"!==this.height&&(e.height=x(this.height)),U(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent(),this.wireEvents()},t.prototype.wireEvents=function(){re.isDevice&&I.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++)I.add(t[e],"scroll",this.scrollRefresh,this)},t.prototype.unwireEvents=function(){re.isDevice&&I.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++)I.remove(t[e],"scroll",this.scrollRefresh)},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||m(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,t){for(var n=this.getScrollableParent(e),i=0;i<n.length;i++)if(!this.isElementVisible(e,n[i]))return!1;return!0},t.prototype.isElementVisible=function(e,t){var n=this.checkGetBoundingClientRect(e);if(!n.height||!n.width)return!1;if(m(this.checkGetBoundingClientRect(t))){var i=window,r={top:i.scrollY,left:i.scrollX,right:i.scrollX+i.outerWidth,bottom:i.scrollY+i.outerHeight},o=xi(e),s={top:o.top,left:o.left,right:o.left+n.width,bottom:o.top+n.height},a={top:r.bottom-s.top,left:r.right-s.left,bottom:s.bottom-r.top,right:s.right-r.left};return a.top>0&&a.left>0&&a.right>0&&a.bottom>0}var l=t.getBoundingClientRect();return!(n.bottom<l.top||n.bottom>l.bottom||n.right>l.right||n.left<l.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.setContent=function(){m(this.content)||(this.element.innerHTML="","string"==typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))},t.prototype.orientationOnChange=function(){var e=this;setTimeout(function(){e.refreshPosition()},200)},t.prototype.refreshPosition=function(e,t){m(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()},t.prototype.reposition=function(){var e,t,n=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var i=this.element.style.display,r=void 0;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(r=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(n,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=i,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=r)}else n?(i=this.element.style.display,this.element.style.display="block",e=this.getAnchorPosition(n,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=i):e={left:0,top:0};m(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(t){return null}},t.prototype.getAnchorPosition=function(e,t,n,i,r){var o=this.checkGetBoundingClientRect(t),s=this.checkGetBoundingClientRect(e);if(m(o)||m(s))return null;var a=e,l={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?l=xi(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==a.tagName&&(t=t.parentElement),l=Ci(a,t)),n.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth/2-o.width/2:l.left+="container"===this.targetType?s.width/2-o.width/2:s.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth-o.width:l.left+="container"===this.targetType?s.width-o.width:s.width}switch(n.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight/2-o.height/2:l.top+="container"===this.targetType?s.height/2-o.height/2:s.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight-o.height:l.top+="container"===this.targetType?s.height-o.height:s.height}return l.left+=i,l.top+=r,l},t.prototype.callFlip=function(e){var t=this.getRelateToElement();!function(e,t,n,i,r,o,s,a,l){if(void 0===s&&(s=null),void 0===a&&(a={X:!0,Y:!0}),t&&e&&r&&o&&(a.X||a.Y)){var c={TL:null,TR:null,BL:null,BR:null},h={TL:null,TR:null,BL:null,BR:null},d=e.getBoundingClientRect(),u={posX:r,posY:o,offsetX:n,offsetY:i,position:{left:0,top:0}};yi=s,mi=t.ownerDocument,function(e,t,n,i,r){n.position=xi(e,n.posX,n.posY,i,r),t.TL=xi(e,"left","top",i,r),t.TR=xi(e,"right","top",i,r),t.BR=xi(e,"left","bottom",i,r),t.BL=xi(e,"right","bottom",i,r)}(t,c,u,l,d),Li(h,u,d),a.X&&function e(t,n,i,r,o,s){var a=_i(n.TL.left,n.TR.left);i.TL.left-Qi()<=Ui()&&(a.leftSide=!1),i.TR.left>=Wi()&&(a.rightSide=!1),(a.leftSide&&!a.rightSide||!a.leftSide&&a.rightSide)&&(r.posX="right"===r.posX?"left":"right",r.offsetX=r.offsetX+o.width,r.offsetX=-1*r.offsetX,r.position=xi(t,r.posX,r.posY,!1),Li(n,r,o),s&&e(t,n,i,r,o,!1))}(t,h,c,u,d,!0),a.Y&&c.TL.top>-1&&function e(t,n,i,r,o,s){var a=Ni(n.TL.top,n.BL.top);i.TL.top-qi()<=Vi()&&(a.topSide=!1),i.BL.top>=Gi()&&(a.bottomSide=!1),(a.topSide&&!a.bottomSide||!a.topSide&&a.bottomSide)&&(r.posY="top"===r.posY?"bottom":"top",r.offsetY=r.offsetY+o.height,r.offsetY=-1*r.offsetY,r.position=xi(t,r.posX,r.posY,!1,o),Li(n,r,o),s&&e(t,n,i,r,o,!1))}(t,h,c,u,d,!0),function(e,t,n){var i=0,r=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){var o=xi(e.offsetParent,"left","top",!1,n);i=o.left,r=o.top}e.style.top=t.position.top+t.offsetY-r+"px",e.style.left=t.position.left+t.offsetX-i+"px"}(e,u,d)}}(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==Ri(this.element,this.viewPortElement).length)if(m(this.viewPortElement)){var t=ji(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var n=this.checkGetBoundingClientRect(this.element),i=this.checkGetBoundingClientRect(this.viewPortElement);if(m(n)||m(i))return null;e&&!0===e.Y&&(i.top>n.top?this.element.style.top="0px":i.bottom<n.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(n.bottom-i.bottom)+"px")),e&&!0===e.X&&(i.right<n.right?this.element.style.left=parseInt(this.element.style.left,10)-(n.right-i.right)+"px":i.left>n.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(i.left-n.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,t){var n=this;if(1e3===this.zIndex||!m(t)){var i=m(t)?this.element:t;this.zIndex=$i(i),U(this.element,{zIndex:this.zIndex})}e=m(e)||"object"!=typeof e?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(T([this.element],"e-popup-close"),P([this.element],"e-popup-open"),this.checkCollision(),T([this.element],"e-popup-open"),P([this.element],"e-popup-close")),m(e)?(T([this.element],"e-popup-close"),P([this.element],"e-popup-open"),this.trigger("open")):(e.begin=function(){n.isDestroyed||(T([n.element],"e-popup-close"),P([n.element],"e-popup-open"))},e.end=function(){n.isDestroyed||n.trigger("open")},new Oe(e).animate(this.element))},t.prototype.hide=function(e){var t=this;e=m(e)||"object"!=typeof e?this.hideAnimation:e,m(e)?(T([this.element],"e-popup-open"),P([this.element],"e-popup-close"),this.trigger("close")):(e.end=function(){t.isDestroyed||(T([t.element],"e-popup-open"),P([t.element],"e-popup-close"),t.trigger("close"))},new Oe(e).animate(this.element))},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),Ji(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var t=e.parentElement;t&&"HTML"!==t.tagName;){var n=getComputedStyle(t);"fixed"===n.position&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,m(this.element.offsetParent)&&"fixed"===n.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},Object(s.b)([ye("auto")],t.prototype,"height",void 0),Object(s.b)([ye("auto")],t.prototype,"width",void 0),Object(s.b)([ye(null)],t.prototype,"content",void 0),Object(s.b)([ye("container")],t.prototype,"targetType",void 0),Object(s.b)([ye(null)],t.prototype,"viewPortElement",void 0),Object(s.b)([ye({X:"none",Y:"none"})],t.prototype,"collision",void 0),Object(s.b)([ye("")],t.prototype,"relateTo",void 0),Object(s.b)([ve({},Zi)],t.prototype,"position",void 0),Object(s.b)([ye(0)],t.prototype,"offsetX",void 0),Object(s.b)([ye(0)],t.prototype,"offsetY",void 0),Object(s.b)([ye(1e3)],t.prototype,"zIndex",void 0),Object(s.b)([ye(!1)],t.prototype,"enableRtl",void 0),Object(s.b)([ye("reposition")],t.prototype,"actionOnScroll",void 0),Object(s.b)([ye(null)],t.prototype,"showAnimation",void 0),Object(s.b)([ye(null)],t.prototype,"hideAnimation",void 0),Object(s.b)([xe()],t.prototype,"open",void 0),Object(s.b)([xe()],t.prototype,"close",void 0),Object(s.b)([xe()],t.prototype,"targetExitViewport",void 0),Object(s.b)([Ae],t)}(ht);function Ji(e,t){for(var n=getComputedStyle(e),i=[],r=/(auto|scroll)/,o=e.parentElement;o&&"HTML"!==o.tagName;){var s=getComputedStyle(o);"absolute"===n.position&&"static"===s.position||!r.test(s.overflow+s.overflowY+s.overflowX)||i.push(o),o=o.parentElement}return t||i.push(document),i}function $i(e){for(var t=e.parentElement,n=[];t&&"BODY"!==t.tagName;){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==i&&"static"!==r&&n.push(i),t=t.parentElement}for(var o=[],s=0;s<document.body.children.length;s++)e.isEqualNode(document.body.children[s])||(i=document.defaultView.getComputedStyle(document.body.children[s],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(document.body.children[s],null).getPropertyValue("position"),"auto"!==i&&"static"!==r&&o.push(i));o.push("999");var a=[];if(!m(e.parentElement)&&"BODY"!==e.parentElement.tagName){var l=[].slice.call(e.parentElement.children);for(s=0;s<l.length;s++)i=document.defaultView.getComputedStyle(l[s],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(l[s],null).getPropertyValue("position"),"auto"!==i&&"static"!==r&&a.push(i)}var c=n.concat(o,a),h=Math.max.apply(Math,c)+1;return h>2147483647?2147483647:h}var er="e-tooltip",tr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),Object(s.b)([ye({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t}(Le),nr=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(s.c)(t,e),t.prototype.initialize=function(){this.formatPosition(),P([this.element],er)},t.prototype.formatPosition=function(){var e,t;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])},t.prototype.renderArrow=function(){this.setTipClass(this.position);var e=this.createElement("div",{className:"e-arrow-tip "+this.tipClass});e.appendChild(this.createElement("div",{className:"e-arrow-tip-outer "+this.tipClass})),e.appendChild(this.createElement("div",{className:"e-arrow-tip-inner "+this.tipClass})),this.tooltipEle.appendChild(e)},t.prototype.setTipClass=function(e){this.tipClass=0===e.indexOf("Right")?"e-tip-left":0===e.indexOf("Bottom")?"e-tip-top":0===e.indexOf("Left")?"e-tip-right":"e-tip-bottom"},t.prototype.renderPopup=function(e){var t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new Ki(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="none";var t=xi(e,this.tooltipPositionX,this.tooltipPositionY);this.tooltipEle.style.display="";var n=this.calculateTooltipOffset(this.position);return this.collisionFlipFit(e,t.left+n.left,t.top+n.top)},t.prototype.reposition=function(e){var t=this.getTooltipPosition(e);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()},t.prototype.openPopupHandler=function(){this.trigger("afterOpen",this.tooltipEventArgs)},t.prototype.closePopupHandler=function(){this.clear(),this.trigger("afterClose",this.tooltipEventArgs)},t.prototype.calculateTooltipOffset=function(e){var t={top:0,left:0},n=this.tooltipEle.offsetWidth,i=this.tooltipEle.offsetHeight,r=this.tooltipEle.querySelector(".e-arrow-tip"),o=r?r.offsetWidth:0,s=r?r.offsetHeight:0,a=this.showTipPointer?0:8,l=s/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),c=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(a+=2),e){case"RightTop":t.left+=o+a,t.top-=i-l;break;case"RightCenter":t.left+=o+a,t.top-=i/2;break;case"RightBottom":t.left+=o+a,t.top-=l;break;case"BottomRight":t.top+=s+a,t.left-=c;break;case"BottomCenter":t.top+=s+a,t.left-=n/2;break;case"BottomLeft":t.top+=s+a,t.left-=n-c;break;case"LeftBottom":t.left-=o+n+a,t.top-=l;break;case"LeftCenter":t.left-=o+n+a,t.top-=i/2;break;case"LeftTop":t.left-=o+n+a,t.top-=i-l;break;case"TopLeft":t.top-=i+s+a,t.left-=n-c;break;case"TopRight":t.top-=i+s+a,t.left-=c;break;default:t.top-=i+s+a,t.left-=n/2}return t.left+=this.offsetX,t.top+=this.offsetY,t},t.prototype.updateTipPosition=function(e){var t=this.tooltipEle.querySelectorAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner");T(t,["e-tip-bottom","e-tip-top","e-tip-left","e-tip-right"]),this.setTipClass(e),P(t,this.tipClass)},t.prototype.adjustArrow=function(e,t,n,i){if(!1!==this.showTipPointer){var r,o;this.updateTipPosition(t);var s,a=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,c=this.tooltipEle.querySelector(".e-arrow-tip"),h=this.tooltipEle.querySelector(".e-arrow-tip-inner"),d=c.offsetWidth,u=c.offsetHeight;"e-tip-bottom"===this.tipClass||"e-tip-top"===this.tipClass?("e-tip-bottom"===this.tipClass?(o="99.9%",h.style.top="-"+(u-2)+"px"):(o=-(u-1)+"px",h.style.top="-"+(u-6)+"px"),r=(s="Center"!==n||a>e.offsetWidth||this.mouseTrail)&&"Left"===n||!s&&"End"===this.tipPointerPosition?a-d-2+"px":s&&"Right"===n||!s&&"Start"===this.tipPointerPosition?"2px":a/2-d/2+"px"):("e-tip-right"===this.tipClass?(r="99.9%",h.style.left="-"+(d-2)+"px"):(r=-(d-1)+"px",h.style.left=d-2-d+"px"),o=(s="Center"!==i||l>e.offsetHeight||this.mouseTrail)&&"Top"===i||!s&&"End"===this.tipPointerPosition?l-u-2+"px":s&&"Bottom"===i||!s&&"Start"===this.tipPointerPosition?"2px":l/2-u/2+"px"),c.style.top=o,c.style.left=r}},t.prototype.renderContent=function(e){var t=this.tooltipEle.querySelector(".e-tip-content");e&&!m(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),m(this.content)?e&&!m(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content")):(t.innerHTML="",this.content instanceof HTMLElement?t.appendChild(this.content):"string"==typeof this.content?t.innerHTML=this.content:L(_t(this.content)(),t))},t.prototype.renderCloseIcon=function(){if(this.isSticky){var e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),I.add(e,re.touchStartEvent,this.onStickyClose,this)}},t.prototype.addDescribedBy=function(e,t){var n=(e.getAttribute("aria-describedby")||"").split(/\s+/);n.indexOf(t)<0&&n.push(t),F(e,{"aria-describedby":n.join(" ").trim(),"data-tooltip-id":t})},t.prototype.removeDescribedBy=function(e){var t=e.getAttribute("data-tooltip-id"),n=(e.getAttribute("aria-describedby")||"").split(/\s+/),i=n.indexOf(t);-1!==i&&n.splice(i,1),e.removeAttribute("data-tooltip-id");var r=n.join(" ").trim();r?e.setAttribute("aria-describedby",r):e.removeAttribute("aria-describedby")},t.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(e){var t=this;this.isSticky||(this.autoCloseTimer=setTimeout(function(){t.close()},1500))},t.prototype.targetClick=function(e){var t;m(t=this.target?V(e.target,this.target):this.element)||(null===t.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,t))},t.prototype.targetHover=function(e){var t;if(!m(t=this.target?V(e.target,this.target):this.element)&&null===t.getAttribute("data-tooltip-id")){for(var n=0,i=[].slice.call(document.querySelectorAll("[data-tooltip-id= "+this.ctrlId+"_content]"));n<i.length;n++)this.restoreElement(i[n]);this.showTooltip(t,this.animation.open,e),this.wireMouseEvents(e,t)}},t.prototype.showTooltip=function(e,t,n){var i=this;if(clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.tooltipEventArgs=n?{type:n.type,cancel:!1,target:e,event:n,element:this.tooltipEle}:{type:null,cancel:!1,target:e,event:null,element:this.tooltipEle},this.trigger("beforeRender",this.tooltipEventArgs),this.tooltipEventArgs.cancel)return this.isHidden=!0,void this.clear();if(this.isHidden=!1,m(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?v(this.element.getAttribute("id")):v("tooltip"),this.tooltipEle=this.createElement("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+x(this.width)+";height:"+x(this.height)+";position:absolute;"}),this.cssClass&&P([this.tooltipEle],this.cssClass.split(" ")),re.isDevice&&P([this.tooltipEle],"e-bigger"),"auto"!==this.width&&(this.tooltipEle.style.maxWidth=x(this.width)),this.tooltipEle.appendChild(this.createElement("div",{className:"e-tip-content"})),document.body.appendChild(this.tooltipEle),this.addDescribedBy(e,this.ctrlId+"_content"),this.renderContent(e),P([this.tooltipEle],"e-popup-open"),this.showTipPointer&&this.renderArrow(),this.renderCloseIcon(),this.renderPopup(e)):(this.adjustArrow(e,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(e,this.ctrlId+"_content"),this.renderContent(e),Oe.stop(this.tooltipEle),this.reposition(e)),T([this.tooltipEle],"e-popup-open"),P([this.tooltipEle],"e-popup-close"),this.tooltipEventArgs=n?{type:n.type,cancel:!1,target:e,event:n,element:this.tooltipEle}:{type:null,cancel:!1,target:e,event:null,element:this.tooltipEle},this.trigger("beforeOpen",this.tooltipEventArgs),this.tooltipEventArgs.cancel)return this.isHidden=!0,void this.clear();var r={name:t.effect,duration:t.duration,delay:t.delay,timingFunction:"easeOut"};"None"===t.effect&&(r=void 0),this.openDelay>0?this.showTimer=setTimeout(function(){i.popupObj&&i.popupObj.show(r,e)},this.openDelay):this.popupObj.show(r,e)},t.prototype.checkCollision=function(e,t,n){var i={left:t,top:n,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},r=Ri(this.tooltipEle,this.target?this.element:null,t,n);return r.length>0&&(i.horizontal=r.indexOf("left")>=0?"Right":r.indexOf("right")>=0?"Left":this.tooltipPositionX,i.vertical=r.indexOf("top")>=0?"Bottom":r.indexOf("bottom")>=0?"Top":this.tooltipPositionY),i},t.prototype.collisionFlipFit=function(e,t,n){var i=this.checkCollision(e,t,n),r=i.position;if(this.tooltipPositionY!==i.vertical&&(r=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?i.vertical+this.tooltipPositionX:this.tooltipPositionX+i.vertical),this.tooltipPositionX!==i.horizontal&&(0===r.indexOf("Left")&&(i.vertical="LeftTop"===r||"LeftCenter"===r?"Top":"Bottom",r=i.vertical+"Left"),0===r.indexOf("Right")&&(i.vertical="RightTop"===r||"RightCenter"===r?"Top":"Bottom",r=i.vertical+"Right"),i.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:r},this.trigger("beforeCollision",this.tooltipEventArgs),i.position!==r){var o=xi(e,i.horizontal,i.vertical);this.adjustArrow(e,r,i.horizontal,i.vertical);var s=this.calculateTooltipOffset(r);s.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,s.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,i.position=r,i.left=o.left+s.left,i.top=o.top+s.top}else this.adjustArrow(e,r,i.horizontal,i.vertical);var a={left:i.left,top:i.top},l=ji(this.tooltipEle,this.target?this.element:null,{X:!0,Y:!1},a).left;if(this.showTipPointer&&(0===r.indexOf("Bottom")||0===r.indexOf("Top"))){var c=this.tooltipEle.querySelector(".e-arrow-tip"),h=parseInt(c.style.left,10)-(l-i.left);h<0?h=0:h+c.offsetWidth>this.tooltipEle.clientWidth&&(h=this.tooltipEle.clientWidth-c.offsetWidth),c.style.left=h.toString()+"px"}return a.left=l,a},t.prototype.hideTooltip=function(e,t,n){var i,r=this;if(t?this.tooltipEventArgs={type:t.type,cancel:!1,target:i=this.target?n||t.target:this.element,event:t,element:this.tooltipEle}:(i=document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]"),this.tooltipEventArgs={type:null,cancel:!1,target:i,event:null,element:this.tooltipEle}),!m(i))if(this.trigger("beforeClose",this.tooltipEventArgs),this.tooltipEventArgs.cancel)this.isHidden=!1;else{this.restoreElement(i),this.isHidden=!0;var o={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(o=void 0),this.closeDelay>0?this.hideTimer=setTimeout(function(){r.popupObj&&r.popupObj.hide(o)},this.closeDelay):this.popupObj.hide(o)}},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),m(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)},t.prototype.clear=function(){this.tooltipEle&&(T([this.tooltipEle],"e-popup-close"),P([this.tooltipEle],"e-popup-open")),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&B(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},t.prototype.onMouseOut=function(e){this.hideTooltip(this.animation.close,e)},t.prototype.onStickyClose=function(e){this.close()},t.prototype.onMouseMove=function(e){var t=0,n=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,n=e.touches[0].pageY):(t=e.pageX,n=e.pageY),Oe.stop(this.tooltipEle),T([this.tooltipEle],"e-popup-close"),P([this.tooltipEle],"e-popup-open"),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var i=this.calculateTooltipOffset(this.position),r=this.checkCollision(e.target,t+i.left+this.offsetX,n+i.top+this.offsetY);if(this.tooltipPositionX!==r.horizontal||this.tooltipPositionY!==r.vertical){var o=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?r.vertical+r.horizontal:r.horizontal+r.vertical;r.position=o,this.adjustArrow(e.target,r.position,r.horizontal,r.vertical);var s=this.calculateTooltipOffset(r.position);r.left=t+s.left-this.offsetX,r.top=n+s.top-this.offsetY}this.tooltipEle.style.left=r.left+"px",this.tooltipEle.style.top=r.top+"px"},t.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.close()},t.prototype.touchEnd=function(e){this.tooltipEle&&null===V(e.target,"."+er)&&this.close()},t.prototype.scrollHandler=function(e){this.tooltipEle&&this.close()},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn)},t.prototype.preRender=function(){this.tipClass="e-tip-bottom",this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(e){for(var t=0,n=this.getTriggerList(e);t<n.length;t++){var i=n[t];if("Custom"===i)return;"Focus"===i&&this.wireFocusEvents(),"Click"===i&&I.add(this.element,re.touchStartEvent,this.targetClick,this),"Hover"===i&&(re.isDevice?(this.touchModule=new wt(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),I.add(this.element,re.touchEndEvent,this.touchEndHandler,this)):I.add(this.element,"mouseover",this.targetHover,this))}I.add(document,"touchend",this.touchEnd,this),I.add(document,"scroll",this.scrollHandler,this),I.add(document,"keydown",this.keyDown,this)},t.prototype.getTriggerList=function(e){return"Auto"===e&&(e=re.isDevice?"Hover":"Hover Focus"),e.split(" ")},t.prototype.wireFocusEvents=function(){if(m(this.target))I.add(this.element,"focus",this.targetHover,this);else for(var e=0,t=[].slice.call(this.element.querySelectorAll(this.target));e<t.length;e++)I.add(t[e],"focus",this.targetHover,this)},t.prototype.wireMouseEvents=function(e,t){this.tooltipEle&&(this.isSticky||("focus"===e.type&&I.add(t,"blur",this.onMouseOut,this),"mouseover"===e.type&&I.add(t,"mouseleave",this.onMouseOut,this)),this.mouseTrail&&I.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))},t.prototype.unwireEvents=function(e){for(var t=0,n=this.getTriggerList(e);t<n.length;t++){var i=n[t];if("Custom"===i)return;"Focus"===i&&this.unwireFocusEvents(),"Click"===i&&I.remove(this.element,re.touchStartEvent,this.targetClick),"Hover"===i&&(re.isDevice?(this.touchModule&&this.touchModule.destroy(),I.remove(this.element,re.touchEndEvent,this.touchEndHandler)):I.remove(this.element,"mouseover",this.targetHover))}I.remove(document,"touchend",this.touchEnd),I.remove(document,"scroll",this.scrollHandler),I.remove(document,"keydown",this.keyDown)},t.prototype.unwireFocusEvents=function(){if(m(this.target))I.remove(this.element,"focus",this.targetHover);else for(var e=0,t=[].slice.call(this.element.querySelectorAll(this.target));e<t.length;e++)I.remove(t[e],"focus",this.targetHover)},t.prototype.unwireMouseEvents=function(e){if(!this.isSticky)for(var t=0,n=this.getTriggerList(this.opensOn);t<n.length;t++){var i=n[t];"Focus"===i&&I.remove(e,"blur",this.onMouseOut),"Hover"!==i||re.isDevice||I.remove(e,"mouseleave",this.onMouseOut)}this.mouseTrail&&I.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},t.prototype.findTarget=function(){return document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]")},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,t){for(var n=this.findTarget(),i=0,r=Object.keys(e);i<r.length;i++)switch(r[i]){case"width":this.tooltipEle&&n&&(this.tooltipEle.style.width=x(e.width),this.reposition(n));break;case"height":this.tooltipEle&&n&&(this.tooltipEle.style.height=x(e.height),this.reposition(n));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&n){var o=this.tooltipEle.querySelector(".e-arrow-tip-inner");o.style.top=o.style.left=null,this.reposition(n)}break;case"tipPointerPosition":this.tooltipEle&&n&&this.reposition(n);break;case"offsetX":if(this.tooltipEle){var s=e.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+s).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var a=e.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+a).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&T([this.tooltipEle],t.cssClass.split(" ")),e.cssClass&&P([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?P([this.tooltipEle],"e-rtl"):T([this.tooltipEle],"e-rtl"))}},t.prototype.open=function(e,t){void 0===t&&(t=this.animation.open),"none"!==e.style.display&&this.showTooltip(e,t)},t.prototype.close=function(e){void 0===e&&(e=this.animation.close),this.hideTooltip(e)},t.prototype.refresh=function(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)},t.prototype.destroy=function(){e.prototype.destroy.call(this),T([this.element],er),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&B(this.tooltipEle),this.tooltipEle=null,this.popupObj=null},Object(s.b)([ye("auto")],t.prototype,"width",void 0),Object(s.b)([ye("auto")],t.prototype,"height",void 0),Object(s.b)([ye()],t.prototype,"content",void 0),Object(s.b)([ye()],t.prototype,"target",void 0),Object(s.b)([ye("TopCenter")],t.prototype,"position",void 0),Object(s.b)([ye(0)],t.prototype,"offsetX",void 0),Object(s.b)([ye(0)],t.prototype,"offsetY",void 0),Object(s.b)([ye(!0)],t.prototype,"showTipPointer",void 0),Object(s.b)([ye("Auto")],t.prototype,"tipPointerPosition",void 0),Object(s.b)([ye("Auto")],t.prototype,"opensOn",void 0),Object(s.b)([ye(!1)],t.prototype,"mouseTrail",void 0),Object(s.b)([ye(!1)],t.prototype,"isSticky",void 0),Object(s.b)([ve({},tr)],t.prototype,"animation",void 0),Object(s.b)([ye(0)],t.prototype,"openDelay",void 0),Object(s.b)([ye(0)],t.prototype,"closeDelay",void 0),Object(s.b)([ye()],t.prototype,"cssClass",void 0),Object(s.b)([ye(!1)],t.prototype,"enableRtl",void 0),Object(s.b)([xe()],t.prototype,"beforeRender",void 0),Object(s.b)([xe()],t.prototype,"beforeOpen",void 0),Object(s.b)([xe()],t.prototype,"afterOpen",void 0),Object(s.b)([xe()],t.prototype,"beforeClose",void 0),Object(s.b)([xe()],t.prototype,"afterClose",void 0),Object(s.b)([xe()],t.prototype,"beforeCollision",void 0),Object(s.b)([xe()],t.prototype,"created",void 0),Object(s.b)([xe()],t.prototype,"destroyed",void 0),Object(s.b)([Ae],t)}(ht),ir=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"content",void 0),Object(s.b)([ye("TopLeft")],t.prototype,"position",void 0),Object(s.b)([ye("Mouse")],t.prototype,"relativeMode",void 0),Object(s.b)([ye(!0)],t.prototype,"showTipPointer",void 0),Object(s.b)([ye("auto")],t.prototype,"width",void 0),Object(s.b)([ye("auto")],t.prototype,"height",void 0),Object(s.b)([ye()],t.prototype,"animation",void 0),t}(Le);function rr(e){var t=new nr;t=ar(e.tooltip,t);var n=new nr(t);return n.beforeCollision=sr,n.beforeOpen=or,n.cssClass="e-diagram-tooltip",n.opensOn="custom",n.appendTo("#"+e.element.id),n.close(),n}function or(e){""!==this.content&&void 0!==this.content||(e.element.style.display="none")}function sr(e){e.collidedPosition&&e.collidedPosition!==this.position&&(e.element.style.display="none")}function ar(e,t){return e.content?(t.content=e.content,t.position=e.position,t.showTipPointer=e.showTipPointer,t.width=e.width,t.height=e.height,t.animation=e.animation?e.animation:{close:{effect:"None"}}):t.close(),t}var lr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"id",void 0),Object(s.b)([ye(-1)],t.prototype,"zIndex",void 0),Object(s.b)([ve({},zn)],t.prototype,"margin",void 0),Object(s.b)([ye(!0)],t.prototype,"visible",void 0),Object(s.b)([we([],ai)],t.prototype,"ports",void 0),Object(s.b)([ye(!0)],t.prototype,"isExpanded",void 0),Object(s.b)([ve({},ir)],t.prototype,"tooltip",void 0),Object(s.b)([ve({},bi)],t.prototype,"expandIcon",void 0),Object(s.b)([ve({},bi)],t.prototype,"collapseIcon",void 0),Object(s.b)([ye(!1)],t.prototype,"excludeFromLayout",void 0),Object(s.b)([ye()],t.prototype,"addInfo",void 0),Object(s.b)([ye("None")],t.prototype,"flip",void 0),t}(Le);function cr(e,t){var n;return n=function(e,t,n,i){var r,o,s=e.sourceWrapper,a=e.targetWrapper,l=e.sourcePortWrapper,c=e.targetPortWrapper,h=[],d={corners:void 0,point:t,direction:void 0,margin:{left:5,right:5,bottom:5,top:5}},u={corners:void 0,point:n,direction:void 0,margin:{left:5,right:5,bottom:5,top:5}};if(void 0!==s&&void 0!==a&&(r=Hl(s),o=Hl(a),d.corners=s.corners,u.corners=a.corners),void 0!==l&&(d.direction=Vr({x:l.offsetX,y:l.offsetY},r,s.bounds)),void 0!==c&&(u.direction=Vr({x:c.offsetX,y:c.offsetY},o,a.bounds)),void 0!==s&&void 0!==a)return void 0!==d.direction&&void 0!==u.direction||(i?function(e,t,n){"LeftToRight"===n?(e.direction=e.direction?e.direction:"Right",t.direction=t.direction?t.direction:"Left"):"RightToLeft"===n?(e.direction=e.direction?e.direction:"Left",t.direction=t.direction?t.direction:"Right"):"TopToBottom"===n?(e.direction=e.direction?e.direction:"Bottom",t.direction=t.direction?t.direction:"Top"):"BottomToTop"===n&&(e.direction=e.direction?e.direction:"Top",t.direction=t.direction?t.direction:"Bottom")}(d,u,i):d.corners.top>u.corners.bottom&&Math.abs(d.corners.top-u.corners.bottom)>d.margin.top+d.margin.bottom?(d.direction=d.direction?d.direction:"Top",u.direction=u.direction?u.direction:"Bottom"):d.corners.bottom<u.corners.top&&Math.abs(d.corners.bottom-u.corners.top)>d.margin.bottom+d.margin.top?(d.direction=d.direction?d.direction:"Bottom",u.direction=u.direction?u.direction:"Top"):d.corners.right<u.corners.left&&Math.abs(d.corners.right-u.corners.left)>d.margin.right+d.margin.left||d.corners.right+13<u.corners.left||u.corners.right>=d.corners.left-13&&d.corners.left>u.corners.left?(d.direction=d.direction?d.direction:"Right",u.direction=u.direction?u.direction:"Left"):d.corners.left>u.corners.right&&Math.abs(d.corners.left-u.corners.right)>d.margin.left+d.margin.right||u.corners.right+13<d.corners.left||d.corners.right>=u.corners.left-13&&d.corners.left<u.corners.left?(d.direction=d.direction?d.direction:"Left",u.direction=u.direction?u.direction:"Right"):s.id!==a.id&&!r.equals(r,o)&&o.containsPoint(r.topCenter,d.margin.top)?(d.direction=d.direction?d.direction:"Bottom",u.direction=u.direction?u.direction:"Top"):(d.direction=d.direction?d.direction:"Top",u.direction=u.direction?u.direction:"Bottom")),function(e,t,n,i,r){var o,s=e.sourceWrapper,a=e.targetWrapper,l=e.sourcePortWrapper,c=e.targetPortWrapper,h=[],d=s.corners,u=a.corners,p={corners:d,point:i,direction:t,margin:{left:5,right:5,bottom:5,top:5}},f={corners:u,point:r,direction:n,margin:{left:5,right:5,bottom:5,top:5}},g=br(s,d,e.sourceWrapper.bounds),m=br(a,u,e.targetWrapper.bounds),y=!1;if(e.sourceWrapper&&e.targetWrapper&&(y=function(t,n,i){for(var r=vr(e.sourceWrapper,i.sourcePadding),o=vr(n,i.targetPadding),s=0;s<r.length-1;s++)for(var a=r[s],l=0;l<o.length-1;l++)if(Ta(a,o[l]).enabled)return!0;return!1}(0,e.targetWrapper,e)),void 0!==l){switch(p.point={x:l.offsetX,y:l.offsetY},p.direction){case"Bottom":case"Top":p.point.y=p.point.y;break;case"Left":case"Right":p.point.x=p.point.x}e.sourcePadding&&!y&&(c&&(f.point={x:c.offsetX,y:c.offsetY}),p.point=yr(e,p,f,!1))}else"Orthogonal"===e.type?(e.segments&&e.segments.length>0&&e.segments[0].direction&&(p.direction=e.segments[0].direction),p.point=kr(g,p.direction),o=kr(g,Wr(p.direction)),p.point=Tr(e,0,p.point,o,!1)):p.point=s.corners.center;if(void 0!==c){switch(f.point={x:c.offsetX,y:c.offsetY},f.direction){case"Bottom":case"Top":f.point.y=f.point.y;break;case"Left":case"Right":f.point.x=f.point.x}e.targetPadding&&!y&&(f.point=yr(e,p,f,!0))}else"Orthogonal"===e.type?(f.point=kr(m,f.direction),o=kr(m,Wr(f.direction)),f.point=Tr(e,0,f.point,o,!0)):f.point=a.corners.center;if("Orthogonal"!==e.type){var v=void 0,b=void 0;if(xr(e),void 0===e.sourcePortWrapper){p.point=p.corners.center,e.segments&&e.segments.length>0&&(v=Zt.isEmptyPoint((b=e.segments[0]).point)?void 0:b);var w=void 0!==v?v.point:f.point;if("Bezier"===e.type&&e.segments.length>0&&e.segments[0].vector1.angle&&e.segments[0].vector1.distance){var C=Math.max(p.corners.width,p.corners.height);w=Zt.transform(p.point,e.segments[0].vector1.angle,C/2)}p.point=y?e.sourceWrapper.bounds.center:Tr(e,0,p.point,w,!1)}if(void 0===e.targetPortWrapper){f.point=f.corners.center,e.segments&&e.segments.length>1&&(v=Zt.isEmptyPoint((b=e.segments[e.segments.length-2]).point)?void 0:b);var x=v?v.point:p.point;"Bezier"===e.type&&e.segments.length>0&&e.segments[e.segments.length-1].vector2.angle&&e.segments[e.segments.length-1].vector2.distance&&(C=Math.max(p.corners.width,p.corners.height),x=Zt.transform(f.point,e.segments[0].vector2.angle,C/2)),f.point=y?e.targetWrapper.bounds.center:Tr(e,0,x,f.point,!0)}h=wr(e,p,f)}else"Orthogonal"===e.type&&e.segments&&e.segments.length>0&&null!==e.segments[0].direction?h=function(e,t,n,i,r,o,s){var a,l,c,h;xr(e);for(var d=0;d<e.segments.length;d++){if(l=e.segments[d],i&&t.direction===Wr(l.direction)&&(l.direction=t.direction),d>0&&e.segments[d-1].direction===l.direction)d=Ar(e,d,t);else if(l.direction)t.point=hr(t,e.segments[d]);else{var u=e.segments[d-1];t.point=u.points[u.points.length-1]}if(d===e.segments.length-1)if(Or(e,t),mr(a=void 0===r?Sr(e,t,n):fr(e,t,n),e),l.points=[],a.length>=2)for(c=0;c<a.length;c++)l.points.push(a[c]);else h=d;if(void 0!==h&&(h===e.segments.length-1&&(e.segments[h-1].direction=null,e.segments[h-1].length=null),e.segments.splice(h,1)),i&&0===d){var p=gr(e,i,o);p&&(t.point=p)}}return Er(e,[])}(e,p,f,l,c,s):(e.segments[0]||(v=new no(e,"segments",{type:"Orthogonal"},!0),e.segments.push(v)),e.segments[0].points=h=function(e,t,n,i){var r,o,s,a,l,c,h,d;return(o=function(e,n){var i=!1;switch(t.direction){case"Left":switch(n){case"Right":case"Bottom":i=!0}break;case"Top":switch(n){case"Left":case"Right":case"Bottom":i=!0}break;case"Bottom":switch(n){case"Right":i=!0}}return i}(0,n.direction))&&Hr(t,n),"Right"===t.direction&&"Left"===n.direction?r=function(e,t,n,i){var r,o=Math.round(Math.abs(t.point.y-n.point.y)),s=(Math.round(Math.abs(t.point.x-n.point.x)),{x:Math.max(t.point.x,t.corners.right),y:t.point.y}),a={x:Math.min(n.point.x,n.corners.left),y:n.point.y},l=10;i&&(r=a,a=s,s=r);return t.corners.bottom+l<n.corners.top-l||t.corners.top-l>n.corners.bottom+l||(l=0),t.margin={left:l,right:l,top:l,bottom:l},n.margin={left:l,right:l,top:l,bottom:l},0===o&&(t.corners.right<n.corners.left||i&&t.corners.right<n.corners.left)?Rn.One:t.point.x+t.margin.right<n.point.x-n.margin.left?Rn.Three:e.sourceWrapper!==e.targetWrapper&&(Hl(e.sourceWrapper).containsPoint(a)||Hl(e.targetWrapper).containsPoint(s))?Rn.Three:Rn.Five}(e,t,n,o):"Right"===t.direction&&"Right"===n.direction?(l=e.sourcePortWrapper,c=e.targetPortWrapper,h=(s=t).point.x-(a=n).point.x,d=s.point.y-a.point.y,a.margin={left:10,right:10,top:10,bottom:10},s.margin={left:10,right:10,top:10,bottom:10},r=s.corners.right>=a.corners.right?void 0!==l&&(l.offsetY<a.corners.top||l.offsetY>a.corners.bottom)||void 0===l&&s.corners.middleRight.y<a.corners.top?Rn.Three:void 0!==l&&l.offsetY>a.corners.bottom+a.margin.bottom&&s.corners.top>a.corners.bottom||void 0===l&&s.corners.middleRight.y>a.corners.bottom?Rn.Three:void 0!==l&&l.offsetY<a.corners.top&&s.corners.bottom>a.corners.top||void 0===l&&s.corners.middleRight.y>a.corners.bottom?Rn.Three:s.corners.right<a.corners.left||a.corners.right<s.corners.left?Rn.Five:0===h||0===d?Rn.One:Rn.Three:void 0!==c&&s.corners.bottom<c.offsetY||void 0===c&&s.corners.bottom<a.corners.middleRight.y?Rn.Three:void 0!==c&&s.corners.top>c.offsetY||void 0===c&&s.corners.top>a.corners.middleRight.y?Rn.Three:void 0!==c&&(void 0!==l&&l.offsetX<a.corners.left&&l.offsetX!==c.offsetX&&l.offsetY!==c.offsetY&&Math.abs(s.corners.right-a.corners.left)<=20||void 0===l&&s.corners.right<a.corners.left&&s.corners.center.x!==a.corners.center.x&&s.corners.center.y!==a.corners.center.y)?Rn.Three:s.corners.right<a.corners.left?Rn.Five:0===h||0===d?Rn.One:Rn.Three):"Right"===t.direction&&"Top"===n.direction?r=function(e,t,n,i){var r,o=e.targetPortWrapper,s=e.sourcePortWrapper,a={x:Math.max(t.point.x,t.corners.right),y:t.point.y},l={x:n.point.x,y:Math.min(n.point.y,n.corners.top)};(n.margin={left:5,right:5,top:5,bottom:5},t.margin={top:5,bottom:5,left:5,right:5},i)&&(r=s,s=o,o=r);return void 0!==s&&s.offsetY<n.corners.top-n.margin.top||void 0===s&&t.corners.bottom<n.corners.top-n.margin.top?t.corners.bottom<n.corners.top?void 0!==o&&t.corners.right+t.margin.right<o.offsetX||void 0===o&&t.corners.right+t.margin.right<n.corners.topCenter.x?Rn.Two:Rn.Four:void 0!==o&&t.corners.left>o.offsetX||void 0===o&&t.corners.left>n.corners.topCenter.x?Rn.Four:Rn.Two:void 0!==s&&Math.abs(t.corners.right-n.corners.left)<=25&&Math.abs(s.offsetY-n.corners.top)<=25?Rn.Two:void 0!==o&&Math.abs(o.offsetX-t.corners.topCenter.x)>=25&&t.corners.middleRight.y<o.offsetY?Rn.Two:t.corners.right<n.corners.left?Rn.Four:e.sourceWrapper!==e.targetWrapper&&(Hl(e.sourceWrapper).containsPoint(l)||Hl(e.targetWrapper).containsPoint(a))?Rn.Two:Rn.Four}(e,t,n,o):"Right"===t.direction&&"Bottom"===n.direction?r=function(e,t,n,i){t.margin={left:10,right:10,top:10,bottom:10},n.margin={left:10,right:10,top:10,bottom:10};var r,o=e.sourcePortWrapper,s=e.targetPortWrapper;(Math.max(t.point.x,t.corners.right),Math.max(n.point.y,n.corners.bottom),i)&&(r=o,o=s,s=r);return void 0!==o&&o.offsetY>n.corners.bottom+n.margin.bottom||void 0===o&&t.corners.middleRight.y>n.corners.bottom+n.margin.bottom?t.corners.top>n.corners.bottom?void 0!==s&&t.corners.right+t.margin.right<s.offsetX||void 0===s&&t.corners.right+t.margin.right<n.corners.bottomCenter.x?Rn.Two:Rn.Four:void 0!==s&&t.corners.left>s.offsetX||void 0===s&&t.corners.left>n.corners.bottomCenter.x?Rn.Four:Rn.Two:void 0!==o&&Math.abs(t.corners.right-n.corners.left)<=25&&Math.abs(o.offsetY-n.corners.bottom)<=25?Rn.Two:Rn.Four}(e,t,n,o):"Bottom"===t.direction&&"Top"===n.direction?r=function(e,t){var n=e.point.x-t.point.x,i=(Math.max(e.point.y,e.corners.bottom),Math.min(t.point.y,t.corners.top),10);return e.corners.right+i<t.corners.left-i||e.corners.left-i>t.corners.right+i||(i=0),e.margin={left:i,right:i,top:i,bottom:i},t.margin={left:i,right:i,top:i,bottom:i},0===n&&e.corners.bottom<t.corners.top?Rn.One:e.corners.bottom+e.margin.bottom<t.corners.top-t.margin.top?Rn.Three:Rn.Five}(t,n):"Bottom"===t.direction&&"Bottom"===n.direction?(t.margin={left:10,right:10,top:10,bottom:10},n.margin={left:10,right:10,top:10,bottom:10},r=function(t,n,i){var r=e.sourcePortWrapper,o=e.targetPortWrapper,s=Math.round(Math.abs(n.point.x-i.point.x)),a=Math.round(Math.abs(i.point.y-i.point.y));return n.corners.bottom<i.corners.bottom?void 0!==r&&r.offsetX<i.corners.left-i.margin.left||void 0===r&&n.corners.bottomCenter.x<i.corners.left-i.margin.left?Rn.Three:void 0!==r&&r.offsetX>i.corners.right+i.margin.right||void 0===r&&n.corners.bottomCenter.x>i.corners.right+i.margin.right?Rn.Three:n.corners.bottom<i.corners.top?Rn.Five:0===s||0===a?Rn.One:Rn.Three:void 0!==o&&n.corners.left>o.offsetX||void 0===o&&n.corners.left>i.corners.left?Rn.Three:void 0!==o&&n.corners.right<o.offsetX||void 0===o&&n.corners.right<i.corners.right?Rn.Three:n.corners.top>i.corners.bottom?Rn.Five:0===s||0===a?Rn.One:Rn.Three}(0,t,n)):"Bottom"===t.direction&&"Left"===n.direction?r=function(t,n,i,r){var o,s=e.sourcePortWrapper,a=e.targetPortWrapper;(Math.max(n.point.y,n.corners.bottom),Math.min(i.point.x,i.corners.left),r)&&(o=s,s=a,a=o);return void 0!==s&&s.offsetX<i.corners.left-i.margin.left||void 0===s&&n.corners.bottomCenter.x<i.corners.bottomLeft.x-i.margin.left?n.corners.right<i.corners.left?void 0!==a&&n.corners.bottom+n.margin.bottom<a.offsetY||void 0===a&&n.corners.bottom+n.margin.bottom<i.corners.middleLeft.y?Rn.Two:Rn.Four:void 0!==a&&n.corners.top>a.offsetY||void 0===a&&n.corners.top>i.corners.middleLeft.y?Rn.Four:Rn.Two:void 0!==a&&Math.abs(n.corners.right-i.corners.left)<=25&&Math.abs(a.offsetY-n.corners.bottom)<=25?Rn.Two:Rn.Four}(0,t,n,o):"Left"===t.direction&&"Left"===n.direction?r=function(t,n,i){var r=e.sourcePortWrapper,o=e.targetPortWrapper;n.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10};var s=Math.round(Math.abs(n.point.x-i.point.x)),a=Math.round(Math.abs(n.point.y-i.point.y));return n.corners.left<i.corners.left?void 0!==o&&n.corners.bottom+n.margin.bottom<o.offsetY||void 0===o&&n.corners.bottom+n.margin.bottom<i.corners.middleLeft.y?Rn.Three:void 0!==o&&n.corners.top-n.margin.top>o.offsetY||void 0===o&&n.corners.top-n.margin.top>i.corners.middleLeft.y?Rn.Three:n.corners.right<i.corners.left||i.corners.right<n.corners.left?Rn.Five:0===s||0===a?Rn.One:Rn.Three:void 0!==r&&r.offsetY<i.corners.top-i.margin.top||void 0===r&&n.corners.middleLeft.y<i.corners.top?Rn.Three:void 0!==r&&r.offsetY>i.corners.bottom+i.margin.bottom||void 0===r&&n.corners.middleLeft.y>i.corners.bottom+i.margin.bottom?Rn.Three:n.corners.left>i.corners.right?Rn.Five:0===s||0===a?Rn.One:Rn.Three}(0,t,n):"Left"===t.direction&&"Top"===n.direction?r=function(e,t,n,i){var r,o=e.sourcePortWrapper,s=e.targetPortWrapper,a={x:Math.min(t.point.x,t.corners.left),y:t.point.y},l={x:n.point.x,y:Math.min(n.point.y,n.corners.top)};i&&(r=o,o=s,s=r);return void 0!==o&&o.offsetY<n.corners.top-n.margin.top||void 0===o&&(t.corners.bottom<n.corners.top-n.margin.top||t.corners.middleLeft.y<n.corners.top-n.margin.top)?t.corners.bottom<n.corners.top?void 0!==s&&t.corners.left-t.margin.left>s.offsetX||void 0===s&&t.corners.left-t.margin.left>n.corners.topCenter.x?Rn.Two:Rn.Four:void 0!==s&&t.corners.right<s.offsetX||void 0===s&&t.corners.right<n.corners.topCenter.x?Rn.Four:Rn.Two:void 0!==o&&Math.abs(t.corners.left-n.corners.right)<=25&&Math.abs(o.offsetY-n.corners.top)<=25?Rn.Two:e.sourceWrapper!==e.targetWrapper&&(Hl(e.sourceWrapper).containsPoint(l)||Hl(e.targetWrapper).containsPoint(a))?Rn.Two:Rn.Four}(e,t,n,o):"Top"===t.direction&&"Top"===n.direction&&(r=function(t,n,i){var r=e.sourcePortWrapper,o=e.targetPortWrapper,s=Math.round(Math.abs(n.point.x-i.point.x)),a=Math.round(Math.abs(n.point.y-i.point.y));return n.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10},n.corners.top<i.corners.top?void 0!==o&&n.corners.left>o.offsetX||void 0===o&&n.corners.left>i.corners.left?Rn.Three:void 0!==o&&n.corners.right<o.offsetX||void 0===o&&n.corners.right<i.corners.right?Rn.Three:n.corners.bottom<i.corners.top?Rn.Five:0===s||0===a?Rn.One:Rn.Three:void 0!==r&&r.offsetX>i.corners.right||void 0===r&&n.corners.left>i.corners.right?Rn.Three:void 0!==r&&r.offsetX<i.corners.left||void 0===r&&n.corners.bottomRight.x<i.corners.left?Rn.Three:n.corners.top>i.corners.bottom?Rn.Five:0===s||0===a?Rn.One:Rn.Three}(0,t,n)),o&&Hr(t,n),function(e,t,n,i,r){var o,s=e.sourceWrapper.corners,a=e.targetWrapper.corners,l=20;if(!(n.direction===i.direction&&t!==Rn.Five||n.direction!==Wr(i.direction)&&t!==Rn.Three))switch(n.direction){case"Left":s.middleLeft.x>a.middleRight.x&&(l=Math.min(l,(s.middleLeft.x-a.middleRight.x)/2));break;case"Right":s.middleRight.x<a.middleLeft.x&&(l=Math.min(l,(a.middleLeft.x-s.middleRight.x)/2));break;case"Top":s.topCenter.y>a.bottomCenter.y&&(l=Math.min(l,(s.topCenter.y-a.bottomCenter.y)/2));break;case"Bottom":s.bottomCenter.y<a.topCenter.y&&(l=Math.min(l,(a.topCenter.y-s.bottomCenter.y)/2))}return l=_r(s,n,l),t===Rn.One&&(o=[n.point,i.point]),t===Rn.Two&&(o=Nr(n,i)),t===Rn.Three&&(o=Br(e,n,i,l)),t===Rn.Four&&(o=Fr(n,i,void 0,o,l)),t===Rn.Five&&(o=function(e,t,n){void 0===n&&(n=20);var i,r,o=n,s=e.corners.left-e.margin.left,a=e.corners.right+e.margin.right,l=e.corners.bottom+e.margin.bottom,c=e.corners.top-e.margin.top,h=t.corners.left-t.margin.left,d=t.corners.right+t.margin.right,u=t.corners.bottom+t.margin.bottom,p=t.corners.top-t.margin.top;switch(e.direction){case"Left":(c>p&&c<u||l<u&&l>p)&&s>h&&s<=d&&n>=20&&(o=e.point.x-t.corners.left+o),r=Pr(e.point,o,180);break;case"Top":(s>h&&s<d||a<d&&a>h)&&c>p&&c<=u&&n>=20&&(o=e.point.y-t.corners.top+o),r=Pr(e.point,o,270);break;case"Right":(c>p&&c<u||l<u&&l>p)&&a<d&&a>=h&&n>=20&&(o=t.corners.right-e.point.x+o),r=Pr(e.point,o,0);break;case"Bottom":(s>h&&s<d||a<d&&a>h)&&l<u&&l>=p&&n>=20&&(o=t.corners.bottom-e.point.y+o),r=Pr(e.point,o,90)}if(i=[e.point,r],"Top"===e.direction||"Bottom"===e.direction){var f=e.direction;e.direction=r.x>t.point.x?"Left":"Right",e.point=r,i=Fr(e,t,f,i)}else f=e.direction,e.direction=r.y>t.point.y?"Top":"Bottom",e.point=r,i=Fr(e,t,f,i);return i}(n,i,l)),o}(e,r,t,n)}(e,p,f));return h}(e,d.direction,u.direction,d.point,u.point);if(xr(e),(e.sourceWrapper||e.targetWrapper)&&function(e,t,n){var i=e.sourcePortWrapper,r=e.targetPortWrapper,o=e.sourceWrapper,s=t.point,a={left:0,right:0,top:0,bottom:0},l={x:0,y:0},c="Top";if(o?(s=n.point,a=t.margin):(o=e.targetWrapper,a=n.margin),"Orthogonal"===e.type)if(e.segments&&e.segments.length>0&&e.sourceWrapper&&e.segments[0].direction)t.direction=e.segments[0].direction,l=Tr(e,0,l=kr(o.corners,t.direction),kr(o.corners,Wr(t.direction)),!1);else{var h={corners:null,direction:null,point:null,margin:null};Ir(o,{corners:null,direction:null,point:s,margin:a},h,e),l=h.point,c=h.direction}else{var d=void 0;e.segments&&e.segments.length>1&&(d=o===e.sourceWrapper?e.segments[0].point:e.segments[e.segments.length-2].point),l=Tr(e,0,o.bounds.center,e.segments&&e.segments.length>1?d:s,o===e.targetWrapper)}o===e.sourceWrapper?(t.direction=t.direction||c,t.point=l,e.sourcePortWrapper&&(t.point={x:i.offsetX,y:i.offsetY},e.sourcePadding&&(t.point=yr(e,t,n,!1)))):(n.direction=n.direction||c,n.point=l,e.targetPortWrapper&&(n.point={x:r.offsetX,y:r.offsetY},e.targetPadding&&(n.point=yr(e,t,n,!0))))}(e,d,u),"Straight"===e.type||"Bezier"===e.type)h=wr(e,d,u);else if("Orthogonal"===e.type&&e.segments&&e.segments.length>0&&null!==e.segments[0].length&&null!==e.segments[0].direction)h=function(e,t,n,i,r,o,s){var a,l,c,h,d=[];if(xr(e),e.segments.length>0){for(var u=0;u<e.segments.length;u++){var p=e.segments[u];if(0===u&&void 0!==e.sourcePortWrapper&&(c=Vr({x:o.offsetX,y:o.offsetY},Hl(i),i.bounds),p.direction===Wr(c)&&(p.direction=c)),u>0&&e.segments[u-1].direction===p.direction)u=Ar(e,u,t);else{var f=e.segments[u-1];t.point=p.direction?hr(t,p):f.points[f.points.length-1]}if(u===e.segments.length-1)if(s||r?e.targetWrapper&&void 0===e.targetPortWrapper?(Or(e,t),l=ur(e,t,n)):l=fr(e,t,n):l=dr(e,t,n),mr(l,e),p.points=[],l.length>=2)for(a=0;a<l.length;a++)p.points.push(l[a]);else h=u;if(o&&0===u){var g=gr(e,o,i);g&&(t.point=g)}}void 0!==h&&(h===e.segments.length-1&&(e.segments[h-1].direction=null,e.segments[h-1].length=null),e.segments.splice(h,1)),d=Er(e,d)}return d}(e,d,u,s,a,l,c);else{var p=void 0;d.direction?p=_r(s.bounds,d,20):d.direction=u.direction?void 0!==e.targetPortWrapper?u.direction:Wr(u.direction):Zt.direction(d.point,u.point),e.segments[0].points=h=Br(e,d,u,p)}return h}(e,"Straight"!==e.type&&e.sourceWrapper?e.sourceWrapper.corners.center:function(e){var t;if(e.sourcePortWrapper){var n=e.sourcePortWrapper,i=e.sourceWrapper,r={x:n.offsetX,y:n.offsetY};Vr(r,Hl(i),i.bounds),t=r}else t=e.sourceID&&e.sourceWrapper&&e.targetWrapper?Tr(e,0,e.sourceWrapper.corners.center,e.targetWrapper.corners.center,!1):e.sourcePoint;return t}(e),e.targetPoint,t),Mr(e,n[0],!1),Mr(e,n[n.length-1],!0),n}function hr(e,t){var n;return e.direction=t.direction,t.points=[],t.points.push(e.point),n=Pr(e.point,"Left"===t.direction||"Top"===t.direction?-t.length:t.length,"Left"===t.direction||"Right"===t.direction?0:90),t.points.push(n),n}function dr(e,t,n){var i,r,o,s;return t.corners=e.sourceWrapper?e.sourceWrapper.corners:void 0,e.sourcePortWrapper&&(o=Vr({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},Hl(e.sourceWrapper),e.sourceWrapper.bounds),!t.corners||"Bottom"!==t.direction&&"Top"!==t.direction?!t.corners||"Left"!==t.direction&&"Right"!==t.direction||n.point.y>t.corners.top&&n.point.y<t.corners.bottom&&(r=t.point.x>n.point.x?"Left":"Right"):n.point.x>t.corners.left&&n.point.x<t.corners.right&&(r=t.point.y>n.point.y?"Top":"Bottom")),e.sourcePortWrapper&&o===Wr(r)?(("Left"===o||"Right"===o)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.center.y&&n.point.y>=t.corners.top&&n.point.y<=t.corners.center.y?(t.direction="Top",s=t.point.y-t.corners.top+20):("Left"===o||"Right"===o)&&t.point.y>t.corners.center.y&&t.point.y<=t.corners.bottom&&n.point.y>t.corners.center.y&&n.point.y<=t.corners.bottom?(t.direction="Bottom",s=t.corners.bottom-t.point.y+20):("Top"===o||"Bottom"===o)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.center.x&&n.point.x>=t.corners.left&&n.point.x<=t.corners.center.x?(t.direction="Left",s=t.point.x-t.corners.left+20):("Top"===o||"Bottom"===o)&&t.point.x<=t.corners.right&&t.point.x>t.corners.center.x&&n.point.x<=t.corners.right&&n.point.x<t.corners.center.x&&(t.direction="Right",s=t.corners.right-t.point.x+20),t.direction&&s&&(i=Br(e,t,n,s,!0))):(t.direction=r||Cr(t.direction,t.point,n.point),i=Nr(t,n)),i}function ur(e,t,n){var i;n.corners=e.targetWrapper.corners,Ir(e.targetWrapper,t,n,e);var r=Cr(n.direction,t.point,n.point);return t.direction!==n.direction||"Left"!==t.direction&&"Right"!==t.direction?(t.direction=r,i=Nr(t,n)):(t.direction=r,i=Br(e,t,n,e.targetWrapper.width/2+20),t.point=i[1],Ir(e.targetWrapper,t,n,e),i=Br(e,t,n)),i}function pr(e,t,n){var i,r,o;n.corners=e.targetWrapper.corners,"Left"!==t.direction&&"Right"!==t.direction?n.corners.center.y!==t.point.y||n.corners.left<=t.point.x&&t.point.x<=n.corners.right?n.corners.center.y===t.point.y&&"Bottom"===e.segments[e.segments.length-2].direction||n.corners.center.y>t.point.y&&t.point.y>=n.corners.top?(r="Top",o=t.point.y-n.corners.top+20):n.corners.center.y===t.point.y&&"Top"===e.segments[e.segments.length-2].direction||n.corners.center.y<t.point.y&&t.point.y<=n.corners.bottom?(r="Bottom",o=n.corners.bottom-t.point.y+20):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&t.corners.top<=t.point.y&&t.point.y<=t.corners.bottom&&(r=t.direction,o=t.point.y>n.point.y?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20):(r="Top",o=n.corners.height/2+20):n.corners.center.x!==t.point.x||n.corners.top<t.point.y&&t.point.y<=n.corners.bottom?n.corners.center.x===t.point.x&&"Right"===e.segments[e.segments.length-2].direction||n.corners.center.x>t.point.x&&t.point.x>=n.corners.left?(r="Left",o=t.point.x-n.corners.left+20):n.corners.center.x===t.point.x&&"Left"===e.segments[e.segments.length-2].direction||n.corners.center.x<=t.point.x&&t.point.x<=n.corners.right?(r="Right",o=n.corners.right-t.point.x+20):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&t.corners.left<=t.point.x&&t.point.x<=t.corners.right&&(r=t.direction,o=t.point.x>n.point.x?t.point.x-t.corners.left+20:t.corners.right-t.point.x+20):(r="Left",o=n.corners.width/2+20),i=t.point,t.point=Pr(t.point,"Left"===r||"Top"===r?-o:o,"Left"===r||"Right"===r?0:90),t.direction=Zt.direction(t.point,n.point),void 0===e.sourcePortWrapper||void 0===e.targetPortWrapper||t.corners.center.x!==n.corners.center.x&&t.corners.center.y!==n.corners.center.y||(t.direction=n.direction);var s=Br(e,t,n);return s.splice(0,0,i),s}function fr(e,t,n){var i,r;n.corners=e.targetWrapper.corners,void 0!==e.sourcePortWrapper&&(r=Vr({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},Hl(e.sourceWrapper),e.sourceWrapper.bounds));var o=function(e,t,n,i){var r=!1;switch(n.direction){case"Left":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Right"===i&&t.point.x>n.point.x&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||("Bottom"===i&&t.point.y>n.point.y||"Top"===i&&t.point.y<n.point.y)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right?(t.direction="Right"===i?t.point.y>n.point.y?"Top":"Bottom":t.point.x<n.point.x?"Right":"Left",r=!0):t.point.x>n.point.x&&(t.point.y>n.point.y||t.point.y<n.point.y)&&!(n.corners.top>t.point.y&&n.corners.bottom<t.point.y)?t.direction="Left":t.point.x<n.point.x&&t.point.y>n.point.y||t.point.x>n.point.x&&t.point.y<=n.point.y&&n.corners.top<t.point.y&&n.corners.center.y>=t.point.y?t.direction="Top":t.point.x<n.point.x&&t.point.y<n.point.y||t.point.x>n.point.x&&t.point.y>n.point.y&&n.corners.bottom<t.point.y&&n.corners.center.y>t.point.y?t.direction="Bottom":t.point.y===n.point.y&&t.point.x<n.point.x&&(t.direction="Right");break;case"Right":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&("Bottom"===i&&t.point.y>n.point.y||"Top"===i&&t.point.y<n.point.y)&&t.point.x>n.point.x&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right?(t.direction=t.point.x>n.point.x?"Left":"Right",r=!0):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Left"===i&&t.point.x<n.point.x&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction=t.point.y>n.point.y?"Top":"Bottom",r=!0):t.point.x<n.point.x&&n.corners.top<=t.point.y&&n.corners.bottom>=t.point.y&&t.point.y===n.point.y?t.direction="Top":t.point.y>n.point.y&&t.point.x>n.point.x?t.direction="Top":t.point.y<n.point.y&&t.point.x>n.point.x?t.direction="Bottom":t.point.x<n.point.x&&(t.point.y>n.point.y||t.point.y<n.point.y)?t.direction="Right":t.point.y===n.point.y&&t.point.x>n.point.x&&(t.direction="Left");break;case"Top":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Bottom"===i&&t.point.y>n.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right||("Right"===i&&t.point.x>n.point.x||"Left"===i&&n.point.y>t.point.y&&n.point.x>t.point.x)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction="Bottom"===i?t.point.x>n.point.x?"Left":"Right":t.point.y<n.point.y?"Bottom":"Top",r=!0):t.point.x===n.point.x&&t.point.y<n.point.y?t.direction="Bottom":t.point.y>n.point.y&&t.point.x>n.corners.left&&t.point.x<n.corners.right?t.direction="Left":t.point.y>=n.point.y?t.direction="Top":t.point.y<n.point.y&&t.point.x>n.point.x?t.direction="Left":t.point.y<n.point.y&&t.point.x<n.point.x&&(t.direction="Right");break;case"Bottom":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&(("Right"===i||"Left"===i&&n.point.x>t.point.x)&&t.point.y>n.point.y&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||"Top"===i&&t.point.y<n.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right)?(t.direction="Right"===i||"Left"===i?t.point.y>n.point.y?"Top":"Bottom":t.point.x>n.point.x?"Left":"Right",r=!0):t.point.y<n.point.y&&t.point.x>n.corners.left&&n.corners.right>t.point.x?t.point.y<n.point.y&&t.point.x>n.corners.left&&n.corners.center.x>=t.point.x?t.direction="Left":t.point.y<n.point.y&&t.point.x<n.corners.right&&n.corners.center.x<t.point.x&&(t.direction="Right"):t.point.y>n.point.y&&t.point.x>n.point.x?t.direction="Left":t.point.y>n.point.y&&t.point.x<n.point.x?t.direction="Right":t.point.y<=n.point.y&&(t.point.x>n.point.x||n.point.x>t.point.x)&&(t.direction="Bottom")}return r}(e,t,n,r);return void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&n.direction===Wr(r)&&(("Left"===n.direction&&t.point.x>n.point.x||"Right"===n.direction&&t.point.x<n.point.x)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||"Bottom"===n.direction&&t.point.y<n.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right)?i=pr(e,t,n):t.direction===n.direction?i=Br(e,t,n):("Left"===n.direction&&t.point.x>n.point.x||"Right"===n.direction&&t.point.x<n.point.x)&&("Top"===t.direction||"Bottom"===t.direction)&&t.point.y<=n.point.y&&n.corners.top<=t.point.y&&n.corners.bottom>=t.point.y||"Top"===n.direction&&t.point.y>n.point.y||"Bottom"===n.direction&&t.point.y<n.point.y&&n.corners.left<=t.point.x&&n.corners.right>=t.point.x?i=pr(e,t,n):void 0!==e.sourceWrapper&&void 0!==e.targetWrapper&&void 0!==e.targetPortWrapper&&("Left"===t.direction||"Right"===t.direction)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom&&("Top"===n.direction||"Bottom"===n.direction)&&n.corners.center.x===t.corners.center.x?(t.direction="Top"===n.direction?"Bottom":"Top",i=Br(e,t,n,"Top"===n.direction?t.corners.bottom-t.point.y+20:t.point.y-t.corners.top+20)):void 0!==e.sourceWrapper&&void 0!==e.targetWrapper&&void 0!==e.targetPortWrapper&&("Top"===t.direction||"Bottom"===t.direction)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right&&("Left"===n.direction||"Right"===n.direction)&&n.corners.center.y===t.corners.center.y?(t.direction="Left"===n.direction?"Right":"Left",i=Br(e,t,n,"Left"===n.direction?t.corners.right-t.point.x+20:t.point.x-t.corners.left+20)):i=o?Br(e,t,n,"Left"===t.direction||"Right"===t.direction?"Left"===t.direction?t.point.x-t.corners.left+20:t.corners.right-t.point.x+20:"Top"===t.direction?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20):Nr(t,n),i}function gr(e,t,n){var i,r={x:t.offsetX,y:t.offsetY},o=Hl(n),s=Vr(r,o,n.bounds),a=e.segments[0];return a.direction!==s&&(function(e,t,n,i,r,o){var s,a,l=[];l.push(i),i.y===r.y&&("Left"===t&&r.x<i.x||"Right"===t&&r.x>i.x)||i.x===r.x&&("Top"===t&&r.y<i.y||"Bottom"===t&&r.y>i.y)||("Top"===t||"Bottom"===t?"Top"===t&&r.y<i.y&&r.y>i.y-13||"Bottom"===t&&r.y>i.y&&r.y<i.y+13?(l.push({x:i.x,y:a="Top"===t?n.top-13:n.bottom+13}),l.push({x:i.x+(r.x-i.x)/2,y:a}),l.push({x:i.x+(r.x-i.x)/2,y:r.y})):Math.abs(i.x-r.x)>13&&("Top"===t&&r.y<i.y||"Bottom"===t&&r.y>i.y)?l.push({x:i.x,y:r.y}):(s=r.x<i.x?n.left-13:n.right+13,l.push({x:i.x,y:a="Top"===t?n.top-13:n.bottom+13}),l.push({x:r.x,y:a})):"Left"===t&&r.x<i.x&&r.x>i.x-13||"right"===t&&r.x>i.x&&r.x<i.x+13?(l.push({x:s="Left"===t?n.left-13:n.right+13,y:i.y}),l.push({x:s,y:i.y+(r.y-i.y)/2}),l.push({x:r.x,y:i.y+(r.y-i.y)/2})):Math.abs(i.y-r.y)>13&&("Left"===t&&r.x<i.x||"Right"===t&&r.x>i.x)?l.push({x:r.x,y:i.y}):(l.push({x:s="Left"===t?n.left-13:n.right+13,y:i.y}),l.push({x:s,y:r.y})),e.points=l)}(a,s,o,a.points[0],a.points[a.points.length-1]),i=a.points[a.points.length-1],a.direction=Zt.direction(a.points[a.points.length-2],a.points[a.points.length-1])),i}function mr(e,t,n){var i,r=t.segments[t.segments.length-2],o=r.points[r.points.length-1];("Top"!==r.direction&&"Bottom"!==r.direction||o.x!==e[1].x)&&("Left"!==r.direction&&"Right"!==r.direction||o.y!==e[1].y)||(r.points[r.points.length-1]=e[1],i=Zt.direction(r.points[0],r.points[r.points.length-1]),void 0!==t.sourceWrapper&&void 0===t.sourcePortWrapper&&i===Wr(r.direction)&&("Left"===r.direction||"Right"===r.direction?r.points[0].x="Right"===r.direction?r.points[0].x-t.sourceWrapper.corners.width:r.points[0].x+t.sourceWrapper.corners.width:r.points[0].y="Bottom"===r.direction?r.points[0].y-t.sourceWrapper.corners.height:r.points[0].y+t.sourceWrapper.corners.height),r.direction=i,r.length=Zt.distancePoints(r.points[0],r.points[r.points.length-1]),e.splice(0,1))}function yr(e,t,n,i){var r=i?e.targetPadding:e.sourcePadding,o=i?e.targetPortWrapper:e.sourcePortWrapper,s=new an(o.bounds.x-r,o.bounds.y-r,o.actualSize.width+2*r,o.actualSize.height+2*r),a=[s.topLeft,s.topRight,s.bottomRight,s.bottomLeft];a[a.length]=a[0];var l=i?n.point:t.point;return jr({x1:t.point.x,y1:t.point.y,x2:n.point.x,y2:n.point.y},a,0,l)||l}function vr(e,t){var n,i,r=[],o=ja(0,e.corners,t);o.push(o[0]);for(var s=0;s<o.length-1;s++)r.push({x1:(n=o[s]).x,y1:n.y,x2:(i=o[s+1]).x,y2:i.y});return r}function br(e,t,n){var i,r=e.rotateAngle+e.parentTransform;if(r){if(r<45)return t;if(r<=135)i={width:t.width,height:t.height,topLeft:t.bottomLeft,topCenter:t.middleLeft,topRight:t.topLeft,middleLeft:t.bottomCenter,center:n.center,middleRight:t.topCenter,bottomLeft:t.bottomRight,bottomCenter:t.middleRight,bottomRight:t.topRight,left:n.left,right:n.right,top:n.top,bottom:n.bottom};else if(r<=225)i={width:t.width,height:t.height,topLeft:t.bottomLeft,topCenter:t.bottomCenter,topRight:t.bottomRight,middleLeft:t.middleRight,center:n.center,middleRight:t.middleLeft,bottomLeft:t.topLeft,bottomCenter:t.topCenter,bottomRight:t.topRight,left:n.left,right:n.right,top:n.top,bottom:n.bottom};else{if(!(r<=315))return t;i={width:t.width,height:t.height,topLeft:t.topRight,topCenter:t.middleRight,topRight:t.bottomRight,middleLeft:t.topCenter,center:n.center,middleRight:t.bottomCenter,bottomLeft:t.topLeft,bottomCenter:t.middleLeft,bottomRight:t.bottomLeft,left:n.left,right:n.right,top:n.top,bottom:n.bottom}}return i}return t}function wr(e,t,n){var i=[];if(e.segments&&e.segments.length>0){var r=void 0,o=[],s=t.point;for(r=0;r<e.segments.length;r++){var a=e.segments[r];if((o=[]).push(s),r!==e.segments.length-1?(o.push(a.point),s=a.point):o.push(n.point),e.segments[r].points=o,e.segments.length>1&&Zt.equals(a.points[0],a.points[1])&&e.segments.splice(r,1),a)for(var l=0;l<a.points.length;l++)(l>0||0===r)&&i.push(a.points[l])}}return i}function Cr(e,t,n){return"Top"===e||"Bottom"===e?n.x>t.x?"Right":"Left":n.y>t.y?"Bottom":"Top"}function xr(e){if("Straight"===e.type||"Bezier"===e.type){if(0===e.segments.length||e.segments.length>0&&!Zt.isEmptyPoint(e.segments[e.segments.length-1].point)){var t=void 0;t="Bezier"===e.type?new to(e,"segments",{type:"Bezier"},!0):new eo(e,"segments",{type:"Straight"},!0),e.segments.push(t)}}else(0===e.segments.length||e.segments[e.segments.length-1].direction)&&(t=new no(e,"segments",{type:"Orthogonal"},!0),e.segments.push(t))}function Ar(e,t,n){var i=e.segments[t],r=Pr(n.point,"Left"===i.direction||"Top"===i.direction?-i.length:i.length,"Left"===i.direction||"Right"===i.direction?0:90);return e.segments[t-1].length+=i.length,e.segments[t-1].points[1]=n.point=r,e.segments.splice(t,1),--t}function Sr(e,t,n){var i,r;e.sourcePortWrapper&&(r=Vr({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},Hl(e.sourceWrapper),e.sourceWrapper.bounds)),Ir(e.targetWrapper,t,n,e);var o=Cr(n.direction,t.point,n.point);if(void 0===e.sourcePortWrapper||t.direction!==n.direction||("Top"!==t.direction&&"Bottom"!==t.direction||t.corners.center.x!==n.corners.center.x)&&("Left"!==t.direction&&"Right"!==t.direction||t.corners.center.y!==n.corners.center.y))if(n.point.x>=t.corners.left&&n.point.x<=t.corners.right&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom)t.direction=n.point.y>t.point.y?"Bottom":"Top",i=Br(e,t,n,"Top"===t.direction?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20);else if(e.sourcePortWrapper&&r===Wr(o)){var s;("Left"===r||"Right"===r)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction=n.point.y>t.point.y?"Bottom":"Top",s=t.corners.height/2+20):("Top"===r||"Bottom"===r)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right&&(t.direction=n.point.x>t.point.x?"Right":"Left",s=t.corners.width/2+20),t.direction&&s?i=Br(e,t,n,s,!0):(t.direction=o,i=Nr(t,n))}else!e.sourcePortWrapper||r!==n.direction||"Top"!==r&&"Bottom"!==r||t.corners.center.x!==n.corners.center.x?(t.direction=o,i=Nr(t,n)):(t.direction=n.point.y>t.point.y?"Bottom":"Top",i=Br(e,t,n,"Bottom"===t.direction?t.corners.bottom-t.point.y+20:t.point.y-t.corners.top+20));else t.direction=o,i=Br(e,t,n,"Top"===o||"Bottom"===o?e.sourceWrapper.height/2+20:e.sourceWrapper.width/2+20),t.point=i[1],"Left"===o||"Right"===o?(n.direction=o,n.point="Left"===o?n.corners.middleLeft:n.corners.middleRight):Ir(e.targetWrapper,t,n,e),i=Br(e,t,n);return i}function Or(e,t){if(void 0!==e.targetWrapper&&void 0===e.targetPortWrapper&&Hl(e.targetWrapper).containsPoint(t.point)){var n=e.targetWrapper,i=e.segments[e.segments.length-2],r=i.points[i.points.length-1],o=Wr(i.direction);"Bottom"===o?r.y<n.corners.bottom&&(i.points[i.points.length-1].y=n.corners.bottom+20,i.length=Zt.distancePoints(i.points[0],i.points[i.points.length-1])):"Top"===o?r.y>n.corners.top&&(i.points[i.points.length-1].y=n.corners.top-20,i.length=Zt.distancePoints(i.points[0],i.points[i.points.length-1])):"Left"===o?r.x>n.corners.left&&(i.points[i.points.length-1].x=n.corners.left-20,i.length=Zt.distancePoints(i.points[0],i.points[i.points.length-1])):"Right"===o&&r.x<n.corners.right&&(i.points[i.points.length-1].x=n.corners.right+20,i.length=Zt.distancePoints(i.points[0],i.points[i.points.length-1])),t.point=i.points[i.points.length-1]}}function Er(e,t){for(var n=0;n<e.segments.length;n++)for(var i=e.segments[n],r=0;r<i.points.length;r++)(r>0||0===n)&&t.push(i.points[r]);return t}function Ir(e,t,n,i){var r,o={x:0,y:0},s=br(e,e.corners,e.bounds),a=t.margin,l=t.point;if(s.bottomCenter.y+a.bottom<l.y)r="Bottom",o=s.bottomCenter;else if(s.topCenter.y-a.top>l.y)r="Top",o=s.topCenter;else if(s.middleLeft.x-a.left>l.x)r="Left",o=s.middleLeft;else if(s.middleRight.x+a.right<l.x)r="Right",o=s.middleRight;else{var c=Math.abs(l.y-s.topCenter.y),h=Math.abs(l.x-s.middleRight.x),d=Math.abs(l.y-s.bottomCenter.y),u=Math.abs(l.x-s.middleLeft.x),p=Number.MAX_VALUE;r="Top",o=s.topCenter,(p=c)>h&&(p=h,r="Right",o=s.middleRight),p>d&&(p=d,r="Bottom",o=s.bottomCenter),p>u&&(r="Left",o=s.middleLeft)}n.point=o,n.direction=r;var f=kr(s,Wr(n.direction));n.point=Tr(i,0,n.point,f,e===i.targetWrapper)}function Dr(e,t){var n={x:t.x,y:e.y},i=(Zt.findLength(e,n),Zt.findLength(n,t)),r=Zt.findLength(t,e),o=Math.asin(i/r);return o=180*o/Math.PI,e.x<t.x?e.y>t.y&&(o=360-o):o=e.y<t.y?180-o:180+o,o}function kr(e,t){var n;switch(t){case"Left":n=e.middleLeft;break;case"Top":n=e.topCenter;break;case"Right":n=e.middleRight;break;case"Bottom":n=e.bottomCenter}return n}function Pr(e,t,n){return Zt.transform(e,n,t)}function Tr(e,t,n,i,r){var o,s,a,l=Zt.findAngle(i={x:i.x,y:i.y},n={x:n.x,y:n.y}),c=r?e.targetWrapper:e.sourceWrapper,h=r?e.targetPadding:e.sourcePadding,d=r||"Orthogonal"===e.type?n:i;Zt.transform(n,l,Math.max(c.actualSize.height/2,c.actualSize.width/2)),o=c;var u=ec(-c.parentTransform,c.offsetX,c.offsetY,n),p=ec(-c.parentTransform,c.offsetX,c.offsetY,i);if("Orthogonal"===e.type)u.x===p.x&&(u.y<p.y?u.y-=5:u.y+=5),u.y===p.y&&(u.x<p.x?u.x-=5:u.x+=5),n=ec(c.parentTransform,c.offsetX,c.offsetY,u);else if(r?Zt.findAngle(n,i):Zt.findAngle(i,n),r){var f=Zt.findAngle(n,i);i=Zt.transform({x:i.x,y:i.y},f,Math.max(c.actualSize.width,c.actualSize.height))}else{var g=Zt.findAngle(i,n);n=Zt.transform({x:n.x,y:n.y},g,Math.max(c.actualSize.width,c.actualSize.height))}return c instanceof Zn&&c.data?(a=o.getPoints(),o.data.split("m").length-1+(o.data.split("M").length-1)==1&&(a[a.length]=a[0])):((e.sourcePadding||e.targetPadding)&&(s=new an(c.bounds.x-h,c.bounds.y-h,c.actualSize.width+2*h,c.actualSize.height+2*h)),(a=s?[s.topLeft,s.topRight,s.bottomRight,s.bottomLeft]:ja(0,c.corners))[a.length]=a[0]),jr({x1:n.x,y1:n.y,x2:i.x,y2:i.y},a,0,d)||n}function Mr(e,t,n){return t.x=Math.round(100*t.x)/100,t.y=Math.round(100*t.y)/100,n?e.targetPoint=t:e.sourcePoint=t,t}function jr(e,t,n,i){var r,o=t.length,s={x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y},a=Rr(e,s);if(a&&(r=Zt.distancePoints(a,i)),isNaN(r)||r>0)for(var l=1;l<o-1;l++){var c=Rr(e,s={x1:t[l].x,y1:t[l].y,x2:t[l+1].x,y2:t[l+1].y});if(c){var h=Zt.distancePoints(c,i);if((isNaN(r)||r>h)&&(r=h,a=c),r>=0&&r<=1)break}}return a}function Rr(e,t){var n,i,r,o,s,a,l,c,h,d,u,p,f=e.x1,g=e.y1,m=e.x2,y=e.y2,v=t.x1,b=t.y1,w=t.x2,C=t.y2;return d=(n=y-g)*w+(r=f-m)*C+(s=m*g-f*y),0!==(h=n*v+r*b+s)&&0!==d&&Lr(h,d)?null:(c=(i=C-b)*m+(o=v-w)*y+(a=w*b-v*C),0!==(l=i*f+o*g+a)&&0!==c&&Lr(l,c)?null:0==(u=n*o-i*r)?null:{x:(p=r*a-o*s)<0?(p-0)/u:(p+0)/u,y:(p=i*s-n*a)<0?(p-0)/u:(p+0)/u})}function Lr(e,t){return e*t>=0}function _r(e,t,n){switch(t.direction){case"Left":t.point.x>e.left&&(n=t.point.x-e.left>n?t.point.x-e.left+n:n);break;case"Right":t.point.x<e.right&&(n=e.right-t.point.x>n?e.right-t.point.x+n:n);break;case"Top":t.point.y>e.top&&(n=t.point.y-e.top>n?t.point.y-e.top+n:n);break;case"Bottom":t.point.y<e.bottom&&(n=e.bottom-t.point.y>n?e.bottom-t.point.y+n:n)}return n}function Nr(e,t){var n;switch(e.direction){case"Left":case"Right":var i={x:t.point.x,y:e.point.y};n=Zt.equals(e.point,i)||Zt.equals(t.point,i)?[e.point,t.point]:[e.point,i,t.point];break;case"Top":case"Bottom":var r={x:e.point.x,y:t.point.y};n=Zt.equals(e.point,r)||Zt.equals(t.point,r)?[e.point,t.point]:[e.point,r,t.point]}return n}function Br(e,t,n,i,r){i||(i=20);var o,s,a,l=e.sourcePortWrapper,c=n.point.x-t.point.x,h=n.point.y-t.point.y;if(!r&&(Math.abs(c)<.001||Math.abs(h)<.001)&&void 0===n.direction)return[t.point,n.point];if(void 0===e.targetWrapper&&Math.abs(c)<=31&&Math.abs(h)<=31){if("Left"===t.direction||"Right"===t.direction?Math.abs(h)<12&&(t.direction=t.point.y>n.point.y?"Top":"Bottom"):Math.abs(c)<12&&(t.direction=t.point.x>n.point.x?"Left":"Right"),Math.abs(c)>12||Math.abs(h)>12)return Nr(t,n);i+=5}return"Left"===t.direction||"Right"===t.direction?("Right"===t.direction?(void 0!==n.direction&&"Right"===n.direction&&(i=Math.max(t.point.x,n.point.x)-t.point.x+i),t.point.x>n.point.x&&void 0===l&&(i=-i)):(void 0!==n.direction&&"Left"===n.direction&&(i=t.point.x-Math.min(t.point.x,n.point.x)+i),(t.point.x>n.point.x||void 0!==l||"Left"===t.direction)&&(i=-i)),a=n.point.y-t.point.y,o=Pr(t.point,i,0),0!=(a=n.point.y-o.y)&&(s=Pr(o,n.point.y-o.y,90))):"Top"!==t.direction&&"Bottom"!==t.direction||("Bottom"===t.direction?void 0!==n.direction&&"Bottom"===n.direction&&(i=Math.max(t.point.y,n.point.y)-t.point.y+i):(void 0!==n.direction&&"Top"===n.direction&&(i=t.point.y-Math.min(t.point.y,n.point.y)+i),(t.point.y>n.point.y||void 0!==l||"Top"===t.direction)&&(i=-i)),a=n.point.x-t.point.x,o=Pr(t.point,i,90),0!=(a=n.point.x-o.x)&&(s=Pr(o,n.point.x-o.x,0))),0===a?[t.point,n.point]:[t.point,o,s,n.point]}function Fr(e,t,n,i,r){var o;switch(void 0===r&&(r=20),void 0===n?(e.margin={left:2,right:2,top:2,bottom:2},t.margin={left:0,right:5,top:0,bottom:5}):"Bottom"===e.direction?t.corners.top>e.corners.bottom&&t.corners.top-e.corners.bottom<20&&(r=(t.corners.top-e.corners.bottom)/2):"Top"===e.direction?t.corners.bottom<e.corners.top&&e.corners.top-t.corners.bottom<20&&(r=(e.corners.top-t.corners.bottom)/2):"Right"===e.direction?t.corners.left>e.corners.right&&t.corners.left-e.corners.right<20&&(r=(t.corners.left-e.corners.right)/2):"Left"===e.direction&&t.corners.right<e.corners.left&&e.corners.left-t.corners.right<20&&(r=(e.corners.left-t.corners.right)/2),e.direction){case"Left":r=function(e,t,n,i){return e.corners.left-e.margin.left>t.corners.left-t.margin.left&&e.corners.left-e.margin.left<=t.corners.right+t.margin.right?("Bottom"===t.direction&&e.point.y<t.point.y?i+=e.corners.left-t.corners.left:"Top"===t.direction&&e.point.y>t.point.y&&(i+=e.corners.left-t.corners.left),i+=e.point.x-e.corners.left):i+=void 0!==n&&"Top"!==n&&"Bottom"===t.direction&&e.point.y<t.point.y?Math.abs(e.point.x-t.corners.right):void 0!==n&&"Bottom"!==n&&"Top"===t.direction&&t.point.y<e.point.y?Math.abs(e.point.x-t.corners.right):e.point.x-e.corners.left,i}(e,t,n,r),o=Pr(e.point,r,180);break;case"Right":r=function(e,t,n,i){return e.corners.right+e.margin.right<t.corners.right+t.margin.right&&e.corners.right+e.margin.right>=t.corners.left-t.margin.left?("Bottom"===t.direction&&e.point.y<t.point.y?n+=t.corners.right-e.corners.right:"Top"===t.direction&&e.point.y>t.point.y&&(n+=t.corners.right-e.corners.right),n+=e.corners.right-e.point.x):n+=void 0!==i&&"Top"!==i&&"Bottom"===t.direction&&e.point.y<t.point.y?Math.abs(e.point.x-t.corners.right):void 0!==i&&"Bottom"!==i&&"Top"===t.direction&&t.point.y<e.point.y?Math.abs(e.point.x-t.corners.right):e.corners.right-e.point.x,n}(e,t,r,n),o=Pr(e.point,r,0);break;case"Top":r=function(e,t,n,i){return e.corners.top-e.margin.top>t.corners.top+t.margin.top&&e.corners.top-e.margin.top<=t.corners.bottom+t.margin.bottom?("Right"===t.direction&&e.point.x<t.point.x?i+=e.corners.top-t.corners.top:"Left"===t.direction&&e.point.x>t.point.x&&(i+=e.corners.top-t.corners.top),i+=e.point.y-e.corners.top):i+=void 0!==n&&"Left"!==n&&"Right"===t.direction&&e.point.x<t.point.x?Math.abs(e.point.y-t.corners.bottom):void 0!==n&&"Right"!==n&&"Left"===t.direction&&t.point.x<e.point.x?Math.abs(e.point.y-t.corners.bottom):e.point.y-e.corners.top,i}(e,t,n,r),o=Pr(e.point,r,270);break;case"Bottom":r=function(e,t,n,i){return e.corners.bottom+e.margin.bottom<t.corners.bottom+t.margin.bottom&&e.corners.bottom+e.margin.bottom>=t.corners.top-t.margin.top?("Right"===t.direction&&e.point.x<t.point.x?n+=t.corners.bottom-e.corners.bottom:"Left"===t.direction&&e.point.x>t.point.x&&(n+=t.corners.bottom-e.corners.bottom),n+=e.corners.bottom-e.point.y):n+=void 0!==i&&"Left"!==i&&"Right"===t.direction&&e.point.x<t.point.x?Math.abs(e.point.y-t.corners.bottom):void 0!==i&&"Right"!==i&&"Left"===t.direction&&t.point.x<e.point.x?Math.abs(e.point.y-t.corners.bottom):e.corners.bottom-e.point.y,n}(e,t,r,n),o=Pr(e.point,r,90)}return void 0!==i?i.push(o):i=[e.point,o],"Top"===e.direction||"Bottom"===e.direction?zr(o,"horizontal",e,t,i):"Right"!==e.direction&&"Left"!==e.direction||zr(o,"vertical",e,t,i),i}function zr(e,t,n,i,r){var o,s,a;"horizontal"===t?(n.margin={left:0,right:10,top:0,bottom:10},i.margin={left:0,right:10,top:0,bottom:10}):"vertical"===t&&(n.margin={left:10,right:0,top:10,bottom:0},i.margin={left:10,right:0,top:10,bottom:0});var l=20;if("horizontal"===t){switch(i.direction){case"Left":if(n.corners.right+n.margin.right<i.corners.left-i.margin.left&&(i.corners.left-n.corners.right>l||n.corners.top-n.margin.top<=i.point.y&&n.corners.bottom+n.margin.bottom>=i.point.y)){var c=Math.min(Math.abs(i.corners.left-n.corners.right)/2,20);l=n.corners.right-e.x+c}else l="Top"===n.direction&&e.y>i.point.y||"Bottom"===n.direction&&e.y<i.point.y?Math.min(i.corners.left,e.x)-e.x-20:e.x>=n.corners.left-n.margin.left&&e.x<=n.corners.right+n.margin.right?Math.min(i.corners.left,n.corners.left)-e.x-20:i.corners.left-e.x-20;break;case"Right":n.corners.left-n.margin.left>i.corners.right+i.margin.right&&(n.corners.left-i.corners.right>l||n.corners.top-n.margin.top<=i.point.y&&n.corners.bottom+n.margin.bottom>=i.point.y)?(c=Math.min(Math.abs(n.corners.left-i.corners.right)/2,20),l=n.corners.left-e.x-c):l="Top"===n.direction&&e.y>i.point.y||"Bottom"===n.direction&&e.y<i.point.y?Math.max(i.corners.right,e.x)-e.x+20:e.x>=n.corners.left-n.margin.left&&e.x<=n.corners.right+n.margin.right?Math.max(i.corners.right,n.corners.right)-e.x+20:i.corners.right-e.x+20}o=Pr(e,l,0),s=Pr(o,i.point.y-e.y,90),a=i.point}else if("vertical"===t){switch(i.direction){case"Top":n.corners.bottom+n.margin.bottom<i.corners.top-i.margin.top&&(i.corners.top-n.corners.bottom>l||n.corners.left-n.margin.left<=i.point.x&&n.corners.right+n.margin.right>=i.point.x)?(c=Math.min(Math.abs(i.corners.top-n.corners.bottom)/2,20),l=n.corners.bottom-e.y+c):l="Left"===n.direction&&e.x>i.point.x||"Right"===n.direction&&e.x<i.point.x?Math.min(i.corners.top,e.y)-e.y-20:e.y>=n.corners.top-n.margin.top&&e.y<=n.corners.bottom+n.margin.bottom?Math.min(i.corners.top,n.corners.top)-e.y-20:i.corners.top-e.y-20;break;case"Bottom":n.corners.top-n.margin.top>i.corners.bottom+i.margin.bottom&&(n.corners.top-i.corners.bottom>l||n.corners.left-n.margin.left<=i.point.x&&n.corners.right+n.margin.right>=i.point.x)?(c=Math.min(Math.abs(n.corners.top-i.corners.bottom)/2,20),l=n.corners.top-e.y-c):l="Left"===n.direction&&e.x>i.point.x||"Right"===n.direction&&e.x<i.point.x?Math.max(i.corners.bottom,e.y)-e.y+20:e.y>=n.corners.top-n.margin.top&&e.y<=n.corners.bottom+n.margin.bottom?Math.max(i.corners.bottom,n.corners.bottom)-e.y+20:i.corners.bottom-e.y+20}o=Pr(e,l,90),s=Pr(o,i.point.x-e.x,0),a=i.point}r.push(o),r.push(s),r.push(a)}function Hr(e,t){var n=e.direction;e.direction=t.direction,t.direction=n;var i=e.point;e.point=t.point,t.point=i;var r=e.corners;e.corners=t.corners,t.corners=r}function Vr(e,t,n,i){var r=void 0===t?n:t,o=r.topLeft,s=r.topRight,a=r.bottomRight,l=r.bottomLeft,c=r.center,h=Dr(c,e),d=Dr(c,a),u=Dr(c,l),p=Dr(c,o),f=Dr(c,s);return h>p&&h<f?"Top":h>=d&&h<u?"Bottom":h>=u&&h<=p?"Left":"Right"}function Ur(e){var t;return t=e.wrapper.children[0].bounds,"None"!==e.sourceDecorator.shape&&t.uniteRect(e.wrapper.children[1].bounds),"None"!==e.targetDecorator.shape&&t.uniteRect(e.wrapper.children[2].bounds),t}function Wr(e){switch(e){case"Top":return"Bottom";case"Bottom":return"Top";case"Left":return"Right";case"Right":return"Left"}return"auto"}var Gr=function(e){function t(t,n,i){var r=e.call(this)||this;return r.data="",r.nodeId="",r.annotationId="",r.diagramId="",r.diagramId=n,r.nodeId=t,r.annotationId=i,r}return Object(s.c)(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this.data},set:function(e){this.data=e,this.template=_l(this,!0),this.isDirt=!0},enumerable:!0,configurable:!0}),t}(Nn),qr=function(e){switch(e.type){case"Bpmn":return Jr;case"UmlActivity":return Kr;case"UmlClassifier":return ho;default:return Zr}},Qr=function(e){switch(e.type){case"Straight":return eo;case"Bezier":return to;case"Orthogonal":return no;default:return eo}},Yr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(10)],t.prototype,"width",void 0),Object(s.b)([ye(10)],t.prototype,"height",void 0),Object(s.b)([ye("Arrow")],t.prototype,"shape",void 0),Object(s.b)([ve({fill:"black",strokeColor:"black",strokeWidth:1},qn)],t.prototype,"style",void 0),Object(s.b)([ve({x:0,y:.5},Zt)],t.prototype,"pivot",void 0),Object(s.b)([ye("")],t.prototype,"pathData",void 0),t}(Le),Xr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(0)],t.prototype,"angle",void 0),Object(s.b)([ye(0)],t.prototype,"distance",void 0),t}(Le),Zr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("None")],t.prototype,"type",void 0),t}(Le),Kr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("Object")],t.prototype,"flow",void 0),Object(s.b)([ye(30)],t.prototype,"exceptionFlowHeight",void 0),t}(Zr),Jr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("Sequence")],t.prototype,"flow",void 0),Object(s.b)([ye("Normal")],t.prototype,"sequence",void 0),Object(s.b)([ye("Default")],t.prototype,"message",void 0),Object(s.b)([ye("Default")],t.prototype,"association",void 0),t}(Zr),$r=function(e){function t(t,n,i,r){var o=e.call(this,t,n,i,r)||this;return o.points=[],o}return Object(s.c)(t,e),Object(s.b)([ye("Straight")],t.prototype,"type",void 0),t}(Le),eo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"StraightSegment"},Object(s.b)([ve({x:0,y:0},Zt)],t.prototype,"point",void 0),t}($r),to=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"BezierSegment"},Object(s.b)([ve({x:0,y:0},Zt)],t.prototype,"point1",void 0),Object(s.b)([ve({x:0,y:0},Zt)],t.prototype,"point2",void 0),Object(s.b)([ve({angle:0,distance:0},Xr)],t.prototype,"vector1",void 0),Object(s.b)([ve({angle:0,distance:0},Xr)],t.prototype,"vector2",void 0),t}(eo),no=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"OrthogonalSegment"},Object(s.b)([ye(null)],t.prototype,"length",void 0),Object(s.b)([ye(null)],t.prototype,"direction",void 0),t}($r);function io(e,t,n){var i=n?45:180/(2+2/(e.height/e.width)),r=i,o=180-i,s=o+2*i,a=360-i,l=Dr(t,e.center);return l>r&&l<o?"top":l>o&&l<s?"right":l>s&&l<a?"bottom":"left"}function ro(e){return!e.distance&&!e.angle}function oo(e,t,n){var i=60,r={x:0,y:0};switch(n||(n=Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"right":"left":e.y<t.y?"bottom":"top"),n){case"bottom":case"top":i=Math.min(.45*Math.abs(e.y-t.y),i),r={x:e.x,y:e.y+("bottom"===n?i:-i)};break;case"right":case"left":i=Math.min(.45*Math.abs(e.x-t.x),i),r={x:e.x+("right"===n?i:-i),y:e.y}}return r}function so(e,t,n,i,r){var o=0,s=0,a=0,l=0,c=Number((r.distance(t,e)+r.distance(n,t)+r.distance(i,n))/3);if(0!==c)for(var h=0;h<=c;h++){var d=h/c,u=(1-d)*(1-d)*(1-d)*e.x+3*d*(1-d)*(1-d)*t.x+3*d*d*(1-d)*n.x+d*d*d*i.x,p=(1-d)*(1-d)*(1-d)*e.y+3*d*(1-d)*(1-d)*t.y+3*d*d*(1-d)*n.y+d*d*d*i.y;0===h?(o=a=u,s=l=p):(o=Math.min(u,o),s=Math.min(p,s),a=Math.max(u,a),l=Math.max(p,l))}return{x:o,y:s,width:a-o,height:l-s,left:o,top:s,right:o+(a-o),bottom:s+(l-s),center:{x:(o+(a-o))/2,y:(s+(l-s))/2}}}function ao(e,t,n,i,r,o,s){var a={x:0,y:0},l=o/s;return a.x=(1-l)*(1-l)*(1-l)*t.x+3*l*(1-l)*(1-l)*n.x+3*l*l*(1-l)*i.x+l*l*l*r.x,a.y=(1-l)*(1-l)*(1-l)*t.y+3*l*(1-l)*(1-l)*n.y+3*l*l*(1-l)*i.y+l*l*l*r.y,a}var lo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(!0)],t.prototype,"optional",void 0),Object(s.b)([ye(void 0)],t.prototype,"lowerBounds",void 0),Object(s.b)([ye(void 0)],t.prototype,"upperBounds",void 0),t}(Le),co=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"type",void 0),Object(s.b)([ve({},lo)],t.prototype,"target",void 0),Object(s.b)([ve({},lo)],t.prototype,"source",void 0),t}(Le),ho=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("UmlClassifier")],t.prototype,"type",void 0),Object(s.b)([ye("Aggregation")],t.prototype,"relationship",void 0),Object(s.b)([ye("Directional")],t.prototype,"associationType",void 0),Object(s.b)([ve({},co)],t.prototype,"multiplicity",void 0),t}(Zr),uo=function(e){function t(t,n,i,r){var o=e.call(this,t,n,i,r)||this;return o.parentId="",o.bridges=[],o.status="None",o.shape&&"UmlActivity"===o.shape.type&&Ia(i,o),o}return Object(s.c)(t,e),t.prototype.init=function(e){var t;this.id||(this.id=zl());var n=new ri,i=new Zn;i.id=this.id+"_path";var r,o=new Zn,s=new Zn;i=this.getSegmentElement(this,i);var a=[];switch(a=this.getConnectorPoints(this.type),a=this.clipDecorators(this,a),r=an.toBounds(a),n.width=r.width,n.height=r.height,n.offsetX=r.x+n.pivot.x*r.width,n.offsetY=r.y+n.pivot.y*r.height,this.shape.type){case"Bpmn":switch(this.shape.flow){case"Sequence":t=this.getBpmnSequenceFlow();break;case"Association":(t=new Zn).visible=!1,this.getBpmnAssociationFlow();break;case"Message":t=this.getBpmnMessageFlow(),i=this.getSegmentElement(this,i),this.updateShapePosition(this,t)}break;case"UmlActivity":switch(this.shape.flow){case"Object":this.getUMLObjectFlow();break;case"Exception":this.getUMLExceptionFlow(i)}break;case"UmlClassifier":this.getConnectorRelation()}var l=this.intermediatePoints;if("Bezier"===this.type){var c=this.segments[0],h=this.segments[this.segments.length-1];l=[Zt.isEmptyPoint(h.point2)?h.bezierPoint2:h.point2,Zt.isEmptyPoint(c.point1)?c.bezierPoint1:c.point1]}var d=e.getDescription;if(o=this.getDecoratorElement(a[0],l[1],this.sourceDecorator,!0,d),s=this.getDecoratorElement(a[a.length-1],l[l.length-2],this.targetDecorator,!1,d),o.id=this.id+"_srcDec",s.id=this.id+"_tarDec",i.style=this.style,i.style.fill="transparent",void 0!==d){var u=d(this,e);i.description=u||this.id}n.style.strokeColor="transparent",n.style.fill="transparent",n.style.strokeWidth=0,n.children=[i,o,s],n.id=this.id,void 0!==t&&n.children.push(t),n.offsetX=i.offsetX,n.offsetY=i.offsetY,n.width=i.width,n.height=i.height;for(var p=0;p<this.annotations.length;p++)n.children.push(this.getAnnotationElement(this.annotations[p],this.intermediatePoints,r,d,e.element.id));return this.wrapper=n,n},t.prototype.getConnectorRelation=function(){var e=this.shape;"Association"===e.relationship?(this.segments[0].type="Straight",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow",this.style.strokeWidth=2):"Inheritance"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow",this.targetDecorator.style.fill="white",this.style.strokeWidth=2,this.style.strokeDashArray="4 4"):"Composition"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None",this.sourceDecorator.style.fill="black",this.style.strokeWidth=2):"Aggregation"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None",this.sourceDecorator.style.fill="white",this.style.strokeWidth=2):"Dependency"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="OpenArrow",this.sourceDecorator.style.fill="white",this.style.strokeWidth=2,this.style.strokeDashArray="4 4"):"Realization"===e.relationship&&(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow",this.sourceDecorator.style.fill="white",this.style.strokeWidth=2),"BiDirectional"===e.associationType&&(this.sourceDecorator.shape="None",this.targetDecorator.shape="None");var t,n,i,r,o="",s="";e.multiplicity.source&&(e.multiplicity.source.lowerBounds=e.multiplicity.source.lowerBounds,e.multiplicity.source.upperBounds=e.multiplicity.source.upperBounds),e.multiplicity.target&&(e.multiplicity.target.lowerBounds=e.multiplicity.target.lowerBounds,e.multiplicity.target.upperBounds=e.multiplicity.target.upperBounds),r=(n=e.multiplicity.source).upperBounds?n.lowerBounds+"..."+n.upperBounds:n.lowerBounds,t=(i=e.multiplicity.target).upperBounds?i.lowerBounds+"..."+i.upperBounds:i.lowerBounds,"ManyToOne"===e.multiplicity.type&&(e.multiplicity.target.optional=!1,o=r||"*",s="1"),"OneToMany"===e.multiplicity.type&&(e.multiplicity.source.optional=!1,s=t||"*",o="1"),"ManyToOne"===e.multiplicity.type&&(o=r||"*",s=t||"*"),"OneToOne"===e.multiplicity.type&&(e.multiplicity.target.optional=!1,e.multiplicity.source.optional=!1,o="1",s="1"),this.annotations=[{id:this.id+"sourcelabel",content:o,offset:0,alignment:"Before",margin:{right:5,bottom:5}},{id:this.id+"targetlabel",content:s,offset:1,alignment:"Before",margin:{right:5,bottom:5}}]},t.prototype.getBpmnSequenceFlow=function(){var e=new Zn,t=new Zn;return"Normal"===this.shape.sequence&&"Bezier"!==this.type&&(this.targetDecorator.shape="Arrow",this.targetDecorator.style.fill="black"),"Default"===this.shape.sequence&&(e=this.getSegmentElement(this,e),t=dl(this.intermediatePoints,this),this.targetDecorator.shape="Arrow",this.targetDecorator.style.fill="black"),"Conditional"===this.shape.sequence&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Diamond",t.id=this.id+this.shape.type,this.sourceDecorator.style.fill="white",this.targetDecorator.style.fill="black",this.sourceDecorator.width=20,this.sourceDecorator.height=10),t},t.prototype.getUMLObjectFlow=function(){if(this.annotations)for(var e=0;e<this.annotations.length;e++)this.annotations[e].content="["+this.annotations[e].content+"]"},t.prototype.getUMLExceptionFlow=function(e){this.type="Straight";var t={x:(this.targetPoint.x+this.sourcePoint.x)/2,y:(this.targetPoint.y+this.sourcePoint.y)/2},n=t.x-this.sourcePoint.x,i=t.y-this.sourcePoint.y,r=this.shape.exceptionFlowHeight/2/Math.sqrt(n*n+i*i),o={x:t.x-n*r,y:t.y-i*r},s={x:t.x+n*r,y:t.y+i*r},a=hn();un(a,315,t.x,t.y),this.segments=[];var l=new eo(this,"segments",{type:"Straight",point:dn(a,s)},!0);this.segments.push(l),l=new eo(this,"segments",{type:"Straight",point:dn(a,o)},!0),this.segments.push(l),e=this.getSegmentElement(this,e)},t.prototype.getBpmnAssociationFlow=function(){"Default"===this.shape.association&&(this.targetDecorator.shape="Arrow",this.targetDecorator.style.fill="black"),"Directional"===this.shape.association&&(this.style.strokeDashArray="2 2",this.targetDecorator.style.fill="black",this.targetDecorator.shape="Arrow"),"BiDirectional"===this.shape.association&&(this.style.strokeDashArray="2 2",this.targetDecorator.shape="Arrow",this.targetDecorator.style.fill="black",this.sourceDecorator.shape="Arrow",this.sourceDecorator.style.fill="white",this.sourceDecorator.width=5,this.sourceDecorator.height=10)},t.prototype.getBpmnMessageFlow=function(){var e=new Zn;return this.style.strokeDashArray="4 4",this.targetDecorator.shape="Arrow",this.targetDecorator.width=5,this.targetDecorator.height=10,this.sourceDecorator.shape="Circle","InitiatingMessage"!==this.shape.message&&"NonInitiatingMessage"!==this.shape.message||(e.id=this.id+"_"+this.shape.message,e.width=25,e.height=15,e.data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",e.horizontalAlignment="Center",e.verticalAlignment="Center",e.transform=Dn.Self,e.style.fill="NonInitiatingMessage"===this.shape.message?"lightgrey":"white"),e},t.prototype.distance=function(e,t){return pl(e,t)},t.prototype.findPath=function(e,t){return ul(e,t)},t.prototype.getAnnotationElement=function(e,t,n,i,r){var o,s;e.id=e.id||zl(),r&&e.template?(o=new Gr(this.id,r,e.id)).content=e.template:((o=new Jn).content=e.content,o.style.textOverflow="Wrap"),o.constraints=e.constraints,o.visible=e.visibility,o.rotateAngle=e.rotateAngle,o.horizontalAlignment=e.horizontalAlignment,o.verticalAlignment=e.verticalAlignment,o.width=e.width,o.height=e.height,void 0===n.width||e.template||(o.width=(e.width||n.width)-e.margin.left-e.margin.right),o.margin=e.margin,o.id=this.id+"_"+e.id,0===n.width&&(n.width=this.style.strokeWidth),0===n.height&&(n.height=this.style.strokeWidth),o.style=e.style;var a=tc(i);return a&&(s=a(e,this)),o.description=s||o.id,this.updateAnnotation(e,t,n,o),o},t.prototype.updateAnnotation=function(e,t,n,i,r){var o,s,a,l,c,h,d,u,p={x:0,y:0};i instanceof Gr||r||i.refreshTextElement(),i.width=e.width||n.width,s=(o=_a(t,e)).point,e.segmentAngle&&(i.rotateAngle=e.rotateAngle+o.angle,i.rotateAngle=(i.rotateAngle+360)%360),0===n.width&&(n.width=this.style.strokeWidth),0===n.height&&(n.height=this.style.strokeWidth),p.x=n.width*(h={x:(s.x-n.x)/n.width,y:(s.y-n.y)/n.height}).x,p.y=n.height*h.y,a=function(e,t,n){var i,r,o,s;switch(t%=360,e.alignment){case"Before":t>=45&&t<=135?(r="right",i=.5===e.offset?"center":"top"):t>=225&&t<=315?(r="left",i=.5===e.offset?"center":"bottom"):t>45&&t<225?(i="top",r=.5===e.offset?"center":"right"):(i="bottom",r=.5===e.offset?"center":"left");break;case"After":t>=45&&t<=135?(r="left",i=.5===e.offset?"center":"top"):t>=225&&t<=315?(r="right",i=.5===e.offset?"center":"bottom"):t>45&&t<225?(i="bottom",r=.5===e.offset?"center":"right"):(i="top",r=.5===e.offset?"center":"left");break;case"Center":r="center",i="center"}if(0===e.offset||1===e.offset)switch(o=n[0],s=n[1],Math.abs(s.x-o.x)>Math.abs(s.y-o.y)?o.x<s.x?"right":"left":o.y<s.y?"bottom":"top"){case"left":r=0===e.offset?"right":"left";break;case"right":r=0===e.offset?"left":"right";break;case"bottom":i=0===e.offset?"top":"bottom";break;case"top":i=0===e.offset?"bottom":"top"}return{hAlign:r,vAlign:i}}(e,o.angle,t),c=a.vAlign,"left"===(l=a.hAlign)?(d="Left",p.x+=e.displacement.x):"right"===l?(d="Right",p.x-=e.displacement.x):"center"===l&&(d="Center"),"top"===c?(u="Top",p.y+=e.displacement.y):"bottom"===c?(u="Bottom",p.y-=e.displacement.y):"center"===c&&(u="Center"),i.horizontalAlignment=d,i.verticalAlignment=u,i.setOffsetWithRespectToBounds(p.x,p.y,"Absolute"),i.relativeMode="Point"},t.prototype.getConnectorPoints=function(e,t,n){Math.abs(this.sourcePoint.x-this.targetPoint.x),Math.abs(this.sourcePoint.y-this.targetPoint.y);var i=cr(this,n).slice(0);return i&&i.length>0&&(this.sourcePoint=i[0],this.targetPoint=i[i.length-1]),i},t.prototype.clipDecorator=function(e,t,n){var i,r,o={x:0,y:0},s=t.length,a=Zt.distancePoints(i=n?t[0]:t[s-1],r=n?t[1]:t[s-2]);a=0===a?1:a;var l=e.style.strokeWidth-1;o.x=Math.round(i.x+l*(r.x-i.x)/a),o.y=Math.round(i.y+l*(r.y-i.y)/a);var c=1,h=n?e.sourceWrapper:e.targetWrapper;return h&&(c=h.style.strokeWidth),(n&&"None"!==e.sourceDecorator.shape||!n&&"None"!==e.targetDecorator.shape)&&(o=Zt.adjustPoint(o,r,!0,c/2)),o},t.prototype.clipDecorators=function(e,t){return"None"!==e.sourceDecorator.shape&&(t[0]=this.clipDecorator(e,t,!0)),"None"!==e.targetDecorator.shape&&(t[t.length-1]=this.clipDecorator(e,t,!1)),t},t.prototype.updateSegmentElement=function(e,t,n){var i,r=new an;if(i=this.getSegmentPath(e,t),"Bezier"===e.type){if(this.segments.length>0)for(var o=0;o<this.segments.length;o++){var s=this.segments[o],a=e.segments[o],l=Zt.isEmptyPoint(s.point1)?a.bezierPoint1:a.point1,c=Zt.isEmptyPoint(s.point2)?a.bezierPoint2:a.point2;r.uniteRect(so(s.points[0],l,c,s.points[1],e))}}else r=an.toBounds(t);return n.width=r.width,n.height=r.height,n.offsetX=r.x+n.width/2,n.offsetY=r.y+n.height/2,n.data=i,e.wrapper&&(e.wrapper.offsetX=n.offsetX,e.wrapper.offsetY=n.offsetY,e.wrapper.width=r.width,e.wrapper.height=r.height),n},t.prototype.getSegmentElement=function(e,t,n){var i;return ll(e),i=this.getConnectorPoints(e.type,void 0,n),this.intermediatePoints=i,t.staticSize=!0,this.updateSegmentElement(e,i,t)},t.prototype.getDecoratorElement=function(e,t,n,i,r){var o=new Zn;if(o.transform=Dn.Self,this.updateDecoratorElement(o,e,t,n),void 0!==r){var s=r(n,this);o.description=s||"source"}return o},t.prototype.bridgePath=function(e,t,n){var i=t;if(e.bridges.length>0)if("Straight"===e.type&&e.segments.length<2)for(var r=0;r<e.bridges.length;r++)(o=e.bridges[r]).rendered||(i+=" L"+o.startPoint.x+" "+o.startPoint.y,i+=o.path,o.rendered=!0);else if("Orthogonal"===e.type||"Straight"===e.type&&e.segments.length>1)for(r=0;r<e.bridges.length;r++){var o;(o=e.bridges[r]).segmentPointIndex===n&&(o.rendered||o.segmentPointIndex===n&&(i+=" L"+o.startPoint.x+" "+o.startPoint.y,i+=o.path,o.rendered=!0))}return i},t.prototype.updateDecoratorElement=function(e,t,n,i){var r,o;e.offsetX=t.x,e.offsetY=t.y,o=Zt.findAngle(t,n),r=function(e,t){return"Custom"===e?t.pathData:hi[e]}(i.shape,i);var s=new Xt(i.width,i.height);e.pivot.x=i.pivot.x,e.pivot.y=i.pivot.y,e.style=i.style,e.rotateAngle=o,e.data=r,e.canMeasurePath=!0,e.width=s.width,e.height=s.height},t.prototype.getSegmentPath=function(e,t){for(var n,i,r,o="",s=[],a=0;a<t.length;)s.push({x:t[a].x,y:t[a].y}),a++;for(var l=0;l<e.bridges.length;l++)e.bridges[l].rendered=!1;if(s=this.clipDecorators(e,s),this.cornerRadius>0&&"Bezier"!==this.type)for(var c=0;c<s.length-1;c++){n=s[c],0===c&&(o="M"+n.x+" "+n.y);var h=Zt.distancePoints(s[c],s[c+1]);h>0&&(i=c<s.length-2?Zt.adjustPoint(s[c],s[c+1],!1,h<2*this.cornerRadius?h/2:this.cornerRadius):s[c+1],c>0&&(h<2*this.cornerRadius?(r=Zt.adjustPoint(s[c],s[c+1],!0,h/2),c<s.length-2&&(i=null)):r=Zt.adjustPoint(s[c],s[c+1],!0,this.cornerRadius)),r&&(o+="Q"+n.x+" "+n.y+" "+r.x+" "+r.y),i&&(e.bridges.length>0&&(o=this.bridgePath(e,o,c),"Orthogonal"===e.type&&(o=this.bridgePath(e,o,c+1))),o+=" L"+i.x+" "+i.y))}else if("Bezier"===this.type){for(var d=void 0,u=this.segments,p=0;p<u.length;p++)s.length>2&&(u[p].bezierPoint1={x:0,y:0},u[p].bezierPoint2={x:0,y:0}),!Zt.isEmptyPoint(u[p].point1)||u[p].vector1.angle||u[p].vector1.distance?u[p].bezierPoint1=u[p].vector1.angle||u[p].vector1.distance?Zt.transform(s[p],u[p].vector1.angle,u[p].vector1.distance):{x:u[p].point1.x||u[p].bezierPoint1.x,y:u[p].point1.y||u[p].bezierPoint1.y}:((e.sourceID||this.sourcePortID)&&this.sourceWrapper&&(d=io(this.sourceWrapper.bounds,s[p],!0)),u[p].bezierPoint1=oo(s[p],s[p+1],d)),!Zt.isEmptyPoint(u[p].point2)||u[p].vector2.angle||u[p].vector2.distance?u[p].bezierPoint2=u[p].vector2.angle||u[p].vector2.distance?Zt.transform(s[p+1],u[p].vector2.angle,u[p].vector2.distance):{x:u[p].point2.x||u[p].bezierPoint2.x,y:u[p].point2.y||u[p].bezierPoint2.y}:((e.targetID||this.targetPortID)&&this.targetWrapper&&(d=io(this.targetWrapper.bounds,s[p+1],!0)),u[p].bezierPoint2=oo(s[p+1],s[p],d));s.splice(1,0,{x:u[0].bezierPoint1.x,y:u[0].bezierPoint1.y}),s.splice(s.length-1,0,{x:u[u.length-1].bezierPoint2.x,y:u[u.length-1].bezierPoint2.y}),s=this.clipDecorators(e,s);for(var f=0;f<u.length;f++)0===f&&(o="M"+s[0].x+" "+s[0].y),o+="C"+u[f].bezierPoint1.x+" "+u[f].bezierPoint1.y+" "+u[f].bezierPoint2.x+" "+u[f].bezierPoint2.y+" "+(f===u.length-1?s[s.length-1].x+" "+s[s.length-1].y:u[f].points[u[f].points.length-1].x+" "+u[f].points[u[f].points.length-1].y)}else for(var g=0;g<s.length;g++)n=s[g],0===g&&(o="M"+n.x+" "+n.y),g>0&&(o=this.bridgePath(e,o,g),o+=" L"+n.x+" "+n.y);return o},t.prototype.updateShapeElement=function(e){var t;switch(e.shape.type){case"Bpmn":e.wrapper.children[3]instanceof Zn&&(t=e.wrapper.children[3]),"Message"===e.shape.flow&&this.updateShapePosition(e,t);break;case"UmlActivity":"Exception"===e.shape.flow&&this.getUMLExceptionFlow(e.wrapper.children[0])}},t.prototype.updateShapePosition=function(e,t){for(var n,i,r=0,o=this.intermediatePoints,s=0;s<o.length-1;s++){var a=.5*(r+=this.distance(o[s],o[s+1]));r>=a&&(n=Dr(o[s],o[s+1]),i=Zt.transform(o[s],n,a))}t.offsetX=i.x,t.offsetY=i.y},t.prototype.scale=function(e,t,n,i,r){var o=0,s=0;if(this.wrapper&&this.wrapper.outerBounds){var a=Ur(this),l=(this.wrapper.bounds.width||this.style.strokeWidth||1)-2,c=(this.wrapper.bounds.height||this.style.strokeWidth||1)-2;o=a.width-l,s=a.height-c,e=(n-Math.max(o,s))/l,t=(i-Math.max(o,s))/c,o=s=Math.min(o,s)}e=t=Math.min(e,t);var h=hn();un(h,-(r=r||this.wrapper).rotateAngle,r.offsetX,r.offsetY),pn(h,e,t,r.offsetX,r.offsetY),un(h,r.rotateAngle,r.offsetX,r.offsetY);var d=function(e,t){for(var n=[],i=0,r=t;i<r.length;i++)n.push(dn(e,r[i]));return n}(h,this.intermediatePoints);return this.sourcePoint=d[0],this.targetPoint=d[d.length-1],Ya(this,d=this.intermediatePoints=cr(this)),{x:o,y:s}},t.prototype.getClassName=function(){return"Connector"},Object(s.b)([be(qr)],t.prototype,"shape",void 0),Object(s.b)([ye(Cn.Default)],t.prototype,"constraints",void 0),Object(s.b)([ye(10)],t.prototype,"bridgeSpace",void 0),Object(s.b)([we([],ii)],t.prototype,"annotations",void 0),Object(s.b)([ve({},Zt)],t.prototype,"sourcePoint",void 0),Object(s.b)([ve({},Zt)],t.prototype,"targetPoint",void 0),Object(s.b)([Ce(Qr)],t.prototype,"segments",void 0),Object(s.b)([ye("")],t.prototype,"sourceID",void 0),Object(s.b)([ye("")],t.prototype,"targetID",void 0),Object(s.b)([ye(10)],t.prototype,"hitPadding",void 0),Object(s.b)([ye("Straight")],t.prototype,"type",void 0),Object(s.b)([ye(0)],t.prototype,"cornerRadius",void 0),Object(s.b)([ve({shape:"None"},Yr)],t.prototype,"sourceDecorator",void 0),Object(s.b)([ve({shape:"Arrow"},Yr)],t.prototype,"targetDecorator",void 0),Object(s.b)([ve({},ir)],t.prototype,"tooltip",void 0),Object(s.b)([ye("")],t.prototype,"sourcePortID",void 0),Object(s.b)([ye("")],t.prototype,"targetPortID",void 0),Object(s.b)([ye(0)],t.prototype,"sourcePadding",void 0),Object(s.b)([ye(0)],t.prototype,"targetPadding",void 0),Object(s.b)([ve({strokeWidth:1,strokeColor:"black"},Qn)],t.prototype,"style",void 0),Object(s.b)([ye(null)],t.prototype,"wrapper",void 0),t}(lr),po=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"UserHandle"},Object(s.b)([ye("")],t.prototype,"name",void 0),Object(s.b)([ye("")],t.prototype,"pathData",void 0),Object(s.b)([ye("#000000")],t.prototype,"backgroundColor",void 0),Object(s.b)([ye("top")],t.prototype,"side",void 0),Object(s.b)([ye("")],t.prototype,"borderColor",void 0),Object(s.b)([ye(.5)],t.prototype,"borderWidth",void 0),Object(s.b)([ye(25)],t.prototype,"size",void 0),Object(s.b)([ye("white")],t.prototype,"pathColor",void 0),Object(s.b)([ye(10)],t.prototype,"displacement",void 0),Object(s.b)([ye(!0)],t.prototype,"visible",void 0),Object(s.b)([ye(0)],t.prototype,"offset",void 0),Object(s.b)([ve({},zn)],t.prototype,"margin",void 0),Object(s.b)([ye("Center")],t.prototype,"horizontalAlignment",void 0),Object(s.b)([ye("Center")],t.prototype,"verticalAlignment",void 0),t}(Le),fo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.init=function(e){var t=new Xn;if(t.measureChildren=!1,new Xt,t.children=[],this.annotation){var n=e.getWrapper(this.nodes.length>0?e.nameTable[this.nodes[0].id].wrapper:e.nameTable[this.connectors[0].id].wrapper,this.annotation.id);t.children.push(n)}else if(this.nodes||this.connectors){for(var i=0;i<this.nodes.length;i++)t.children.push(n=e.nameTable[this.nodes[i].id].wrapper);for(var r=0;r<this.connectors.length;r++)t.children.push(n=e.nameTable[this.connectors[r].id].wrapper)}return this.wrapper=t,t},Object(s.b)([ye(null)],t.prototype,"wrapper",void 0),Object(s.b)([we([],sa)],t.prototype,"nodes",void 0),Object(s.b)([we([],uo)],t.prototype,"connectors",void 0),Object(s.b)([ye()],t.prototype,"width",void 0),Object(s.b)([ye()],t.prototype,"height",void 0),Object(s.b)([ye(0)],t.prototype,"rotateAngle",void 0),Object(s.b)([ye(0)],t.prototype,"offsetX",void 0),Object(s.b)([ye(0)],t.prototype,"offsetY",void 0),Object(s.b)([ve({x:.5,y:.5},Zt)],t.prototype,"pivot",void 0),Object(s.b)([ye("CompleteIntersect")],t.prototype,"rubberBandSelectionMode",void 0),Object(s.b)([we([],po)],t.prototype,"userHandles",void 0),Object(s.b)([ye(wn.All)],t.prototype,"constraints",void 0),t}(Le);function go(e){return e?e instanceof ni||e instanceof ii?e.constraints&xn.Select:e instanceof uo?e.constraints&Cn.Select:e.constraints&An.Select:1}function mo(e){return e?e instanceof ni||e instanceof ii?e.constraints&xn.Drag:e instanceof uo?e.constraints&Cn.Drag:e instanceof fo?1:e.constraints&An.Drag:1}function yo(e){return e.constraints&Cn.DragSourceEnd}function vo(e){return e.constraints&Cn.DragTargetEnd}function bo(e){return e.constraints&Cn.DragSegmentThumb}function wo(e){return e instanceof ni||e instanceof ii?e.constraints&xn.Rotate:e.constraints&An.Rotate}function Co(e){return e.constraints&An.Shadow}function xo(e){return e instanceof sa&&e.constraints&An.InConnect?e.constraints&An.InConnect:0}function Ao(e){return e&&e.constraints&&!(e.constraints&_n.None)&&e.constraints&_n.InConnect?e.constraints&_n.InConnect:0}function So(e){return e instanceof sa&&e.constraints&An.OutConnect?e.constraints&An.OutConnect:0}function Oo(e){return e&&e.constraints&&!(e.constraints&_n.None)&&e.constraints&_n.OutConnect?e.constraints&_n.OutConnect:0}function Eo(e,t){var n=0;return e instanceof ni||e instanceof ii?n=e.constraints&xn.Resize:e&&("SouthEast"===t?n=e.constraints&An.ResizeSouthEast:"East"===t?n=e.constraints&An.ResizeEast:"NorthEast"===t?n=e.constraints&An.ResizeNorthEast:"South"===t?n=e.constraints&An.ResizeSouth:"North"===t?n=e.constraints&An.ResizeNorth:"SouthWest"===t?n=e.constraints&An.ResizeSouthWest:"West"===t?n=e.constraints&An.ResizeWest:"NorthWest"===t&&(n=e.constraints&An.ResizeNorthWest)),n}function Io(e){return e instanceof uo?e.constraints&Cn.AllowDrop:e.constraints&An.AllowDrop}function Do(e){return e.constraints&En.Virtualization}function ko(e){return e.tool&In.SingleSelect}function Po(e){return e.tool&In.ZoomPan}function To(e){return e.tool&In.ContinuousDraw}function Mo(e){return e.tool&In.DrawOnce}function jo(e){return e.tool&In.SingleSelect||e.tool&In.MultipleSelect}function Ro(e){return e.constraints&En.UserInteraction}function Lo(e){return e.constraints&En.ZoomTextEdit}function _o(e){return function(e){return e.constraints&En.ApiUpdate}(e)||e.diagramActions&Tn.ToolAction}function No(e,t){return e.constraints&_n.Draw}function Bo(e,t){return e.constraints&_n.Drag}function Fo(e){return!(e&Mn.DrawSelectorBorder)}function zo(e){return!!(e&Mn.PreventRenderSelector)}var Ho=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.orientation="Vertical",t.measureChildren=void 0,t}return Object(s.c)(t,e),t.prototype.measure=function(e){return this.desiredSize=this.measureStackPanel(e,"Horizontal"===this.orientation?this.updateHorizontalStack:this.updateVerticalStack),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=this.arrangeStackPanel(e,"Horizontal"===this.orientation?this.arrangeHorizontalStack:this.arrangeVerticalStack),this.updateBounds(),this.actualSize},t.prototype.measureStackPanel=function(t,n){var i=void 0;if(void 0!==this.children&&this.children.length>0)for(var r=0,o=this.children;r<o.length;r++){var s=o[r];s.parentTransform=this.rotateAngle+this.parentTransform,s.measure(this.measureChildren?s.desiredSize:t);var a=s.desiredSize.clone();this.applyChildMargin(s,a),0!==s.rotateAngle&&(a=$l(a,s.rotateAngle)),void 0===i?i=a:s.preventContainer||n(a,i)}return i=e.prototype.validateDesiredSize.call(this,i,t),this.stretchChildren(i),this.applyPadding(i),i},t.prototype.arrangeStackPanel=function(t,n){if(void 0!==this.children&&this.children.length>0){var i=void 0,r=void 0;i=this.offsetX-t.width*this.pivot.x+this.padding.left,r=this.offsetY-t.height*this.pivot.y+this.padding.top;for(var o=0,s=this.children;o<s.length;o++){var a=s[o],l=a.desiredSize.clone(),c=l;"Vertical"===this.orientation?r+=a.margin.top:i+=a.margin.left,0!==a.rotateAngle&&(c=$l(l,a.rotateAngle));var h=n(i,r,a,this,t,c);e.prototype.findChildOffsetFromCenter.call(this,a,h),a.arrange(l,!0),"Vertical"===this.orientation?r+=c.height+a.margin.bottom:i+=c.width+a.margin.right}}return t},t.prototype.updateHorizontalStack=function(e,t){t.height=Math.max(e.height,t.height),t.width+=e.width},t.prototype.updateVerticalStack=function(e,t){t.width=Math.max(e.width,t.width),t.height+=e.height},t.prototype.arrangeHorizontalStack=function(e,t,n,i,r,o){var s=0;return"Top"===n.verticalAlignment?s=t+n.margin.top+o.height/2:"Bottom"===n.verticalAlignment?s=i.offsetY+r.height*(1-i.pivot.y)-i.padding.bottom-n.margin.bottom-o.height/2:(s=i.offsetY-r.height*i.pivot.y+r.height/2,n.margin.top&&(s=t+n.margin.top+o.height/2)),{x:e+o.width/2,y:s}},t.prototype.arrangeVerticalStack=function(e,t,n,i,r,o){var s=0;return"Left"===n.horizontalAlignment?s=e+n.margin.left+o.width/2:"Right"===n.horizontalAlignment?s=i.offsetX+r.width*(1-i.pivot.x)-i.padding.right-n.margin.right-o.width/2:(s=i.offsetX-r.width*i.pivot.x+r.width/2,n.margin.left&&(s=e+n.margin.left+o.width/2)),{x:s,y:t+o.height/2}},t.prototype.stretchChildren=function(e){if(void 0!==this.children&&this.children.length>0)for(var t=0,n=this.children;t<n.length;t++){var i=n[t];"Vertical"===this.orientation?"Stretch"===i.horizontalAlignment&&(i.desiredSize.width=e.width-(i.margin.left+i.margin.right)):"Stretch"===i.verticalAlignment&&(i.desiredSize.height=e.height-(i.margin.top+i.margin.bottom))}},t.prototype.applyChildMargin=function(e,t){t.height+=e.margin.top+e.margin.bottom,t.width+=e.margin.left+e.margin.right},t}(Xn),Vo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.childTable=[],t.cellStyle={},t.desiredRowHeight=[],t.desiredCellWidth=[],t}return Object(s.c)(t,e),t.prototype.rowDefinitions=function(){return this.rowDefns},t.prototype.columnDefinitions=function(){return this.colDefns},t.prototype.addObject=function(e,t,n,i,r){if(this.rows.length>=t){var o=this.rows[t];if(o.cells.length>n){r=r||1,i=i||1;var s=o.cells[n];s.columnSpan=Math.max(r,s.columnSpan),s.rowSpan=Math.max(i,s.rowSpan);var a=new Qo;(a=e).rowId=t,a.columnId=n,a.columnSpan=r,this.childTable[a.id]=a,this.addObjectToCell(a,s)}}},t.prototype.addObjectToCell=function(e,t){t.children||(t.children=[]),e.style.strokeColor="black",e.style.strokeWidth=1,e.style.fill="white",t.children.push(e)},t.prototype.updateProperties=function(e,t,n,i){this.offsetX=e,this.offsetY=t,this.width=n,this.height=i},t.prototype.setDefinitions=function(e,t){this.rowDefns=e,this.colDefns=t,this.children=[],this.rows=this.rows||[];for(var n=0;n<e.length;n++){var i=e[n],r=new Go;r.cells=[];var o=new Wo;o.width=this.width;var s=this.colDefns;(void 0===s||s.length<1)&&(s=[o]),this.addCellInRow(s,i,r),this.rows.push(r)}},t.prototype.addCellInRow=function(e,t,n){for(var i=0;i<e.length;i++){var r=e[i],o=new qo;o.children=[],this.cellStyle.fill="none",this.cellStyle.strokeColor="none",o.id=zl(),o.style=this.cellStyle,o.desiredCellWidth=o.minWidth=r.width,o.desiredCellHeight=o.minHeight=t.height,n.cells.push(o),this.children.push(o)}},t.prototype.calculateSize=function(){for(var e=this.rows||[],t=0,n=0,i=0;i<e.length;i++){var r=this.rows[i];n=0;for(var o=0;o<r.cells.length;o++)if(n+=r.cells[o].desiredCellWidth,o===r.cells.length-1&&(this.width&&this.width!==n&&(r.cells[o].desiredCellWidth+=this.width-n,r.cells[o].minWidth=r.cells[o].desiredCellWidth,r.cells[o].children&&r.cells[o].children.length&&(r.cells[o].children[0].width=r.cells[o].desiredCellWidth),this.colDefns[o].width=r.cells[o].desiredCellWidth),t+=r.cells[o].desiredCellHeight,i===e.length-1&&this.height&&this.height!==t)){var s=this.height-t;if(s>0){for(var a=0;a<r.cells.length;a++)r.cells[a].desiredCellHeight+=s,r.cells[a].minHeight=r.cells[a].desiredCellHeight=r.cells[a].desiredCellHeight,r.cells[a].children&&r.cells[a].children.length&&(r.cells[a].children[0].height=r.cells[a].desiredCellHeight);this.rowDefns[i].height+=s}}}},t.prototype.updateRowHeight=function(e,t,n,i){var r=this.rows[e];this.rowDefns[e].height=t,void 0!==this.height&&(this.height+=t-r.cells[0].desiredCellHeight);for(var o=0;o<r.cells.length;o++)r.cells[o].desiredCellHeight=r.cells[o].minHeight=t,r.cells[o].children&&r.cells[o].children.length&&(r.cells[o].children[0].height=t,this.setTextRefresh(r.cells[o].children[0]));if(this.desiredRowHeight[e]=t,this.measure(new Xt(this.width,this.height)),this.arrange(this.desiredSize),n){var s=void 0!==i?this.calculateCellHeightBasedOnChildren(e,i):this.calculateCellHeight(e);s>t&&this.updateRowHeight(e,s,!1)}},t.prototype.setTextRefresh=function(e){if(e.children&&e.children.length)for(var t=e.children,n=0;n<t.length;n++)t[n]instanceof Jn&&t[n].refreshTextElement(),t[n]instanceof ri&&this.setTextRefresh(t[n])},t.prototype.updateColumnWidth=function(e,t,n,i){this.colDefns[e].width=t,void 0!==this.width&&(this.width+=t-this.rows[this.rows.length-1].cells[e].desiredCellWidth);for(var r=0;r<this.rows.length;r++)this.setTextRefresh(this.rows[r].cells[0]),this.rows[r].cells[e].desiredCellWidth=this.rows[r].cells[e].minWidth=t,this.rows[r].cells[e].children&&this.rows[r].cells[e].children.length&&(this.rows[r].cells[e].children[0].width=t);if(this.desiredCellWidth[e]=t,this.measure(new Xt(this.width,this.height)),this.arrange(this.desiredSize),n){var o=void 0!==i?this.calculateCellWidthBasedOnChildren(e,i):this.calculateCellWidth(e);o>t&&this.updateColumnWidth(e,o,!1)}},t.prototype.calculateCellWidth=function(e){for(var t,n,i,r=0;r<this.rows.length;r++)1===(i=this.rows[r].cells[e]).columnSpan&&(n=i.outerBounds.width>i.bounds.width&&(0===i.children.length||void 0===i.children[0].maxWidth)?i.outerBounds.width:i.bounds.width,t=t?t<n?n:t:n);return t},t.prototype.calculateCellHeight=function(e){for(var t,n,i,r=this.rows[e],o=0;o<r.cells.length;o++)n=(i=r.cells[o]).outerBounds.height>i.bounds.height?i.outerBounds.height:i.bounds.height,t=t?t<n?n:t:n;return t},t.prototype.calculateCellSizeBasedOnChildren=function(e,t,n,i){var r,o;if((o=e&&e.children.length>0?e.children[0]:void 0)&&1===e.columnSpan){r="Width"===t?o.bounds.right:o.bounds.bottom,i||(i="Width"===t?o.bounds.width:o.bounds.height);for(var s=0;s<o.children.length;s++){var a=o.children[s];if(a instanceof ri&&-1===a.id.indexOf("header")){var l=("Width"===t?a.bounds.right:a.bounds.bottom)+n;if(l>r){var c=l-r+("Width"===t?o.bounds.width:o.bounds.height);i&&(i=i<c?c:i)}}}}return i},t.prototype.calculateCellWidthBasedOnChildren=function(e,t){for(var n,i=0;i<this.rows.length;i++)n=this.calculateCellSizeBasedOnChildren(this.rows[i].cells[e],"Width",t,n);return n},t.prototype.calculateCellHeightBasedOnChildren=function(e,t){for(var n,i=this.rows[e],r=0;r<i.cells.length;r++)n=this.calculateCellSizeBasedOnChildren(i.cells[r],"Height",t,n);return n},t.prototype.addRow=function(e,t,n){this.rowDefns.length>0?this.rowDefns.splice(e,0,t):this.rowDefns.push(t);var i=new Go;i.cells=[],(new Wo).width=this.width,this.addCellInRow(this.colDefns,t,i),e>this.rows.length-1?this.rows.push(i):this.rows.splice(e,0,i),n&&(this.measure(new Xt(this.width,this.height)),this.arrange(this.desiredSize))},t.prototype.addColumn=function(e,t,n){var i,r,o,s,a=this.rows;this.colDefns.length>0?this.colDefns.splice(e,0,t):this.colDefns.push(t),void 0!==this.width&&(this.width+=t.width);for(var l=0;l<a.length;l++)i=a[l],r=this.rowDefns[l],o=t,(s=new qo).style=this.cellStyle,s.desiredCellWidth=s.minWidth=o.width,s.desiredCellHeight=s.minHeight=r.height,s.children=[],e>i.cells.length-1?i.cells.push(s):i.cells.splice(e,0,s),this.children.push(s);n&&(this.measure(new Xt(this.width,this.height)),this.arrange(this.desiredSize))},t.prototype.removeRow=function(e){var t,n,i=this.rows[e];this.height-=this.rowDefns[e].height;for(var r=0;r<i.cells.length;r++)this.children.splice(this.children.indexOf(t=i.cells[r]),1),(n=document.getElementById(t.id+"_groupElement"))&&n.parentElement&&n.parentElement.removeChild(n);this.rows.splice(e,1),this.rowDefns.splice(e,1),this.measure(new Xt(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.removeColumn=function(e){var t,n,i=this.rows;this.width-=this.colDefns[e].width;for(var r=0;r<i.length;r++)this.children.splice(this.children.indexOf(t=i[r].cells[e]),1),(n=document.getElementById(t.id+"_groupElement"))&&n.parentElement&&n.parentElement.removeChild(n),i[r].cells.splice(e,1);this.colDefns.splice(e,1),this.measure(new Xt(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.updateRowIndex=function(e,t){var n=this.rows[e];this.rows.splice(e,1),this.rows.splice(t,0,n);var i=this.rowDefns[e];this.rowDefns.splice(e,1),this.rowDefns.splice(t,0,i),this.measure(new Xt(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.updateColumnIndex=function(e,t,n){for(var i,r,o,s=e;s<this.rows.length;s++)r=this.rows[s].cells[t],(i=this.rows[s]).cells.splice(t,1),i.cells.splice(n,0,r);var a=this.colDefns[t];this.colDefns.splice(t,1),this.colDefns.splice(n,0,a),o=this.desiredCellWidth[t],this.desiredCellWidth.splice(t,1),this.desiredCellWidth.splice(n,0,o),this.measure(new Xt(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.measure=function(t){var n=void 0;if(void 0!==this.rows&&this.rows.length>0){var i=0,r=0;n=new Xt(0,0),this.calculateSize();for(var o=0,s=this.rows;o<s.length;o++){r=0;for(var a=0,l=(p=s[o]).cells;a<l.length;a++){var c=(y=l[a]).measure(new Xt(y.desiredCellWidth,y.desiredCellHeight));1===y.rowSpan&&(this.desiredRowHeight[i]=0===r||void 0===this.desiredRowHeight[i]?c.height:Math.max(c.height,this.desiredRowHeight[i])),1===y.columnSpan&&(this.desiredCellWidth[r]=0===i||void 0===this.desiredCellWidth[r]?c.width:Math.max(c.width,this.desiredCellWidth[r]),i===this.rows.length-1&&(n.width+=this.desiredCellWidth[r])),r++}n.height+=this.desiredRowHeight[i],i++}i=r=0;for(var h=0,d=0,u=this.rows;d<u.length;d++){var p;r=0;for(var f=0,g=0,m=(p=u[d]).cells;g<m.length;g++){var y;if(1!==(y=m[g]).columnSpan){y.desiredSize.width=0;for(var v=0;v<y.columnSpan;v++)v+r<p.cells.length&&(y.desiredSize.width+=this.desiredCellWidth[v+r],y.minWidth=y.desiredSize.width,y.measure(y.desiredSize));r++}else y.desiredSize.width=this.desiredCellWidth[f],y.measure(y.desiredSize);if(1!==y.rowSpan)for(y.desiredSize.height=0,v=0;v<y.rowSpan;v++)v+h<this.rows.length&&(y.desiredSize.height+=this.desiredRowHeight[v+h],y.minHeight=y.desiredSize.height,y.measure(y.desiredSize));else y.desiredSize.height=this.desiredRowHeight[h],y.measure(y.desiredSize);i++,f++}h++}}return void 0===n&&(n=e.prototype.validateDesiredSize.call(this,n,t)),e.prototype.stretchChildren.call(this,n),this.desiredSize=n,n},t.prototype.arrange=function(e,t){var n=0,i=0;if(void 0!==this.rows&&this.rows.length>0){for(var r=this.offsetX-e.width*this.pivot.x,o=this.offsetY-e.height*this.pivot.y,s=r,a=0,l=this.rows;a<l.length;a++){s=r,n=0;for(var c=0,h=(f=l[a]).cells;c<h.length;c++){var d=h[c],u=Math.max(this.desiredCellWidth[n],d.desiredSize.width),p=Math.max(this.desiredRowHeight[i],d.desiredSize.height);d.offsetX=s+u*d.pivot.x,d.offsetY=o+p*d.pivot.y,s+=this.desiredCellWidth[n],d.arrange(new Xt(u,p)),n++}o+=this.desiredRowHeight[i],i++}if(t){d=void 0;var f=void 0,g=void 0,m=void 0;for(i=0;i<this.rows.length;i++)for(f=this.rows[i],n=0;n<f.cells.length;n++)if((d=f.cells[n]).columnSpan>1&&this.children.splice(this.children.indexOf(d)+1,d.columnSpan-1),d.rowSpan>1)for(g=i,m=0;g+d.rowSpan-1<this.rows.length&&m<d.rowSpan-1;g++,m++)this.children.splice(this.children.indexOf(this.rows[g+1].cells[n]),1)}}return this.actualSize=e,this.updateBounds(),e},t}(Xn),Uo=function(){return function(){this.height=void 0}}(),Wo=function(){return function(){this.width=void 0}}(),Go=function(){return function(){this.cells=null}}(),qo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.columnSpan=1,t.rowSpan=1,t}return Object(s.c)(t,e),t}(ri),Qo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rowId=0,t.columnId=0,t.rowSpan=1,t.columnSpan=1,t}return Object(s.c)(t,e),t}(Nn);function Yo(e,t){var n=new sa(t,"nodes",{id:zl()+"_path",height:1,constraints:An.Default&~An.Select,verticalAlignment:"Stretch",horizontalAlignment:"Stretch"},!0);t.initObject(n),t.nodes.push(n),e.children.push(n.id)}function Xo(e,t){var n={},i=t.style;return n.fill="transparent"!==i.fill?i.fill:e.style.fill,n.color=i.color,n.fontSize=12!==i.fontSize?i.fontSize:e.style.fontSize,n.strokeColor="black"!==i.strokeColor?i.strokeColor:e.style.strokeColor,n.strokeWidth=1!==i.strokeWidth?i.strokeWidth:e.style.strokeWidth,n}function Zo(e,t){var n,i;if(e.selectedObject.helperObject)i=e.selectedObject.helperObject;else if(e.selectedItems.nodes.length>0||e.selectedItems.connectors.length>0){e.selectedObject.actualObject=n=t instanceof fo&&t.nodes.length+t.connectors.length===1?t.nodes.length>0?t.nodes[0]:t.connectors[0]:t;var r=e.selectedItems.wrapper.children[0];Ko(e,n)&&(i=function(e,t){for(var n,i={},r=0,o=Object.keys(t);r<o.length;r++){var s=o[r];i[s]=t[s]}return al(t)===sa&&((n=new sa(e,"nodes",i,!0)).id=t.id,e.initObject(n)),e.updateDiagramObject(n),n}(e,{id:"helper",rotateAngle:r.rotateAngle,offsetX:r.offsetX,offsetY:r.offsetY,minWidth:r.minWidth,minHeight:r.minHeight,maxWidth:r.maxWidth,maxHeight:r.maxHeight,width:r.actualSize.width,height:r.actualSize.height,style:{strokeDashArray:"2 2",fill:"transparent",strokeColor:"#7D7D7D",strokeWidth:2}}),e.selectedObject.helperObject=i)}return i}function Ko(e,t,n){var i=n?e.nameTable[t.parentId]:e.nameTable[t.parentId]||t;return!(!i||!i.container)}function Jo(e,t){var n=e.nameTable[t.parentId];"Canvas"===n.container.type&&(t.margin.left=t.offsetX-n.wrapper.bounds.x-t.width/2,t.margin.top=t.offsetY-n.wrapper.bounds.y-t.height/2),e.nodePropertyChange(t,{},{width:t.width,height:t.height,offsetX:t.offsetX,offsetY:t.offsetY,margin:{left:t.margin.left,right:t.margin.right,top:t.margin.top,bottom:t.margin.bottom},rotateAngle:t.rotateAngle}),n.isLane||(n.wrapper.measure(new Xt),n.wrapper.arrange(n.wrapper.desiredSize))}function $o(e,t){if(""!==t.parentId){var n=e.nameTable[t.parentId];if(n.isLane&&n.parentId)for(var i=e.nameTable[n.parentId],r=n.id.slice(i.id.length),o=r.substring(0,r.length-1),s=i.shape.lanes,a=void 0,l=0;l<s.length;l++)if(o===(a=s[l]).id)for(var c=0;c<a.children.length;c++)a.children[c].id===t.id&&(a.children.splice(c,1),c--);e.deleteChild(t)}}function es(e,t,n,i){if(!e.currentSymbol){e.protectPropertyChange(!0);var r=void 0;n=e.getObject(n.id)||n;var o=-1!==e.nodes.indexOf(n)?n.id:n;if("Canvas"===t.container.type){var s=n.wrapper.offsetY-n.wrapper.actualSize.height/2-(t.wrapper.offsetY-t.wrapper.actualSize.height/2);n.margin.left=n.wrapper.offsetX-n.wrapper.actualSize.width/2-(t.wrapper.offsetX-t.wrapper.actualSize.width/2),n.margin.top=s}var a=e.nameTable[t.id];if(a.children||(a.children=[]),-1===a.children.indexOf(n.id)){$o(e,n),e.getObject(n.id)&&e.removeElements(n);var l=Ul(n);if(e.addChild(a,o),n=e.getObject(n.id),a.isLane&&a.parentId)for(var c=(r=e.nameTable[a.parentId]).shape.lanes,h=a.id.slice(r.id.length),d=h.substring(0,h.length-1),u=0;u<c.length;u++)a.isLane&&d===c[u].id&&c[u].children.push(n);if(e.updateDiagramObject(n),a.parentId?i||ts(a,r,n,e):e.updateDiagramObject(a),!(e.diagramActions&Tn.UndoRedo)){var p={type:"ChildCollectionChanged",category:"Internal",undoObject:l,redoObject:Ul(n)};e.addHistoryEntry(p)}}e.protectPropertyChange(!1)}}function ts(e,t,n,i,r){var o,s=Ul(e),a=!1,l=t.shape.padding,c=e.wrapper.bounds,h=e.wrapper.outerBounds,d=n.wrapper.bounds;if(t&&"SwimLane"===t.shape.type&&(c.right<d.right+l||c.bottom<d.bottom+l)){var u=t.wrapper.children[0],p=u.bounds.x,f=u.bounds.y;if(c.right<d.right+l&&h.x<=c.x&&(o=!1,u.updateColumnWidth(e.columnIndex,c.width+(d.right-c.right),!0,l)),c.bottom<d.bottom+l&&h.y<=c.y&&(o=!0,u.updateRowHeight(e.rowIndex,c.height+(d.bottom-c.bottom),!0,l)),!(i.diagramActions&Tn.UndoRedo)&&(r&&(i.startGroupAction(),a=!0),void 0!==o)){var g={category:"Internal",type:o?"RowHeightChanged":"ColumnWidthChanged",undoObject:s,redoObject:Ul(e)};i.addHistoryEntry(g)}t.width=t.wrapper.width=u.width,t.height=t.wrapper.height=u.height,cs(t),"Horizontal"===t.shape.orientation&&bs(t,i,e.wrapper,e.columnIndex),ws(i,t),i.drag(t,p-u.bounds.x,f-u.bounds.y),ps(t,i),us(t)}return function(e,t,n){var i=e.nameTable[t.parentId];if(i&&i.isLane){var r=e.nameTable[i.parentId],o=r.wrapper.children[0];o.updateColumnWidth(i.columnIndex,o.columnDefinitions()[i.columnIndex].width,!0,n),o.updateRowHeight(i.rowIndex,o.rowDefinitions()[i.rowIndex].height,!0,n);var s=i.wrapper,a=void 0;t.margin.left<n&&(t.margin.left=n),t.margin.top<n&&(t.margin.top=n);for(var l=0;l<s.children.length;l++){var c=s.children[l];if(c instanceof ri){var h=e.nameTable[c.id];if(h.isLane){a=h.wrapper;break}}}a&&("Horizontal"===r.shape.orientation?t.margin.left<n+a.actualSize.width&&(t.margin.left=n+a.actualSize.width):t.margin.top<n+a.actualSize.height&&(t.margin.top=n+a.actualSize.height)),r.wrapper.measure(new Xt(r.width,r.height)),r.wrapper.arrange(r.wrapper.desiredSize),t.offsetX=t.wrapper.offsetX,t.offsetY=t.wrapper.offsetY,e.nodePropertyChange(t,{},{margin:{left:t.margin.left,top:t.margin.top}}),o.measure(new Xt(o.width,o.height)),o.arrange(o.desiredSize),r.width=r.wrapper.width=r.wrapper.children[0].actualSize.width,r.height=r.wrapper.height=r.wrapper.children[0].actualSize.height}}(i,n,l),a}function ns(e,t,n,i,r,o){var s=Cl(i.element.id);i.diagramRenderer.renderStackHighlighter(e,s,i.scroller.transform,t,n,r,o)}function is(e,t,n,i,r,o,s,a){var l=new sa(e,"nodes",i,!0);if(l.parentId=n.id,l.isHeader=!!r,l.isPhase=!!o,l.isLane=!!s,a&&(l[o?"PhaseHeaderParent":"LaneHeaderParent"]=a),l.constraints&=~(An.InConnect|An.OutConnect),l.constraints|=An.HideThumbs,e.initObject(l),e.nodes.push(l),l.wrapper.children.length>0){for(var c=0;c<l.wrapper.children.length;c++){var h=l.wrapper.children[c];h instanceof Nn&&(h.isCalculateDesiredSize=!1),h instanceof Jn&&(h.canConsiderBounds=!1,(!r&&"Vertical"===n.shape.orientation&&o||"Vertical"!==n.shape.orientation&&s)&&(h.isLaneOrientation=!0,h.refreshTextElement()))}l.wrapper.measure(new Xt(void 0,void 0)),l.wrapper.arrange(l.wrapper.desiredSize)}return l.wrapper}function rs(e,t,n,i,r,o){var s,a=0,l=0,c=n.shape;r?(l=o,a=i,s=e.columnDefinitions()[o].width):a=c.header&&c.hasHeader?o+1:o;var h={annotations:[{content:c.phases[o].header.annotation.content,rotateAngle:r?0:270}],maxWidth:s,id:n.id+c.phases[o].id+"_header",offsetX:n.offsetX,offsetY:n.offsetY,style:c.phases[o].style,rowIndex:a,columnIndex:l,container:{type:"Canvas",orientation:r?"Horizontal":"Vertical"}};c.phases[o].header.id=h.id;var d=is(t,0,n,h,!1,!0,!1,c.phases[o].id);e.addObject(d,a,l)}function os(e,t,n,i,r,o){for(var s,a,l,c,h=n.shape,d=h.phases.length||1,u=0,p=o?i:h.header&&h.hasHeader?1:0,f=h.phaseSize&&h.phases.length>0?1:0,g=0;g<d;g++)(a=is(t,0,n,{id:n.id+h.lanes[r].id+g,rowIndex:p,columnIndex:u=o?g:r+f,width:(l=e.rows[p].cells[u]).minWidth,height:l.minHeight,offsetX:n.offsetX,offsetY:n.offsetY,style:h.lanes[r].style,constraints:An.Default|An.ReadOnly|An.AllowDrop,container:{type:"Canvas",orientation:o?"Horizontal":"Vertical"}},!1,!1,!0)).children[0].isCalculateDesiredSize=!1,0===g&&(h.lanes[r].header.id=(s={id:n.id+h.lanes[r].id+"_"+g+"_header",style:h.lanes[r].header.style,annotations:[{content:h.lanes[r].header.annotation.content,rotateAngle:o?270:0}],offsetX:n.offsetX,offsetY:n.offsetY,rowIndex:p,columnIndex:u,container:{type:"Canvas",orientation:o?"Horizontal":"Vertical"}}).id,o?s.width=h.lanes[r].header.width:s.height=h.lanes[r].header.height,c=is(t,0,n,s,!1,!1,!0,h.lanes[r].id),a.children.push(c)),e.addObject(a,p,u),o||p++,u=o?g:r+1}function ss(e,t){var n=new Uo;n.height=t,e.push(n)}function as(e){var t=new Wo;return t.width=e,t}function ls(e,t,n,i){for(var r,o,s,a,l,c,h=[],d=0,u=t.rowDefinitions().length,p=0;p<u;p++)for(l=t.rows[p],s=0;s<l.cells.length;s++)if((a=l.cells[s].children[0])&&a.children&&a.children.length)for(o=1;o<a.children.length;o++)if((r=e.getObject(a.children[o].id))&&(r.inEdges.length>0||r.outEdges.length>0))for(c=r.inEdges.concat(r.outEdges),d=0;d<c.length;d++)-1===h.indexOf(c[d])&&h.push(c[d]);return h}function cs(e){var t=e.wrapper;if(t.measure(new Xt(e.width,e.height)),t.children[0]instanceof Vo){var n=t.children[0],i=!1;n.width&&n.width<n.desiredSize.width&&(i=!0,n.width=n.desiredSize.width),n.height&&n.height<n.desiredSize.height&&(i=!0,n.height=n.desiredSize.height),i&&n.measure(new Xt(n.width,n.height))}t.arrange(t.desiredSize)}function hs(e,t,n){var i,r,o,s,a,l,c,h,d=t.wrapper.children[0];for(i=n;i<d.rows.length;i++)for(l=d.rows[i],r=0;r<l.cells.length;r++)if((c=l.cells[r]).children&&c.children.length>0)for(o=0;o<c.children.length;o++)(s=e.nameTable[(h=c.children[o]).id]).isLane&&h.children.length>1&&(a=e.nameTable[h.children[1].id])&&a.isLane&&(a.rowIndex=i,a.columnIndex=r),s.rowIndex=i,s.columnIndex=r}function ds(e,t,n){e.measure(new Xt(t.width,t.height)),e.arrange(e.desiredSize);var i=n.getObject(t.parentId);n.addChild(i,t.id)}function us(e){if("SwimLane"===e.shape.type&&!e.shape.isLane&&!e.shape.isPhase){var t=void 0,n=void 0,i=void 0,r=void 0,o=e.shape.lanes,s=vs(e),a=e.wrapper.children[0].rowDefinitions();for(n=0;n<o.length;n++,s++)t=o[n],"Horizontal"===e.shape.orientation?t.height!==(r=a[s].height)&&(t.height=r):(i=e.wrapper.children[0].columnDefinitions(),t.width!==(r=i[s].width)&&(t.width=r))}}function ps(e,t){var n,i,r,o,s=e.shape,a=s.phases,l=s.header&&s.hasHeader?1:0,c=e.wrapper.children[0],h=c.bounds.y+(s.header&&s.hasHeader?s.header.height:0);if("SwimLane"===e.shape.type&&(e=t.getObject(e.id)||e,a.length>0))if(c=e.wrapper.children[0],"Horizontal"===s.orientation)for(r=s.header&&s.hasHeader?c.rows[1]:c.rows[0],n=0;n<a.length;n++)a[n].offset!==(i=(o=r.cells[n].children[0]).bounds.right-c.bounds.x)&&(a[n].offset=i),t.nameTable[o.id].maxWidth=o.maxWidth;else for(n=0;n<a.length;n++)a[n].offset!==(i=(o=c.rows[l+n].cells[0].children[0]).bounds.bottom-h)&&(a[n].offset=i),t.nameTable[o.id].maxWidth=o.maxWidth}function fs(e,t){if(e&&e.length>0)for(var n=void 0,i=0;i<e.length;i++)n=t.getObject(e[i]),t.connectorPropertyChange(n,{},{sourceID:n.sourceID,targetID:n.targetID})}function gs(e,t,n,i){var r,o,s,a,l,c,h,d,u=e.getObject(t.parentId),p=u.shape,f=u.wrapper.children[0],g=p.lanes,m=ls(e,f);("Horizontal"===p.orientation&&t.rowIndex!==n.rowIndex||"Vertical"===p.orientation&&t.columnIndex!==n.columnIndex)&&("Horizontal"===p.orientation?(l=n.rowIndex,(h=t.rowIndex-(r=(p.header&&p.hasHeader?1:0)+(p.phases.length&&p.phaseSize?1:0)))<(d=n.rowIndex-r)?i&&n.wrapper.offsetY>i.y&&(l+=d>0?-1:1,d+=d>0?-1:1):i&&n.wrapper.offsetY<i.y&&(l+=1,d+=1),(a=t.rowIndex)!==l&&f.updateRowIndex(a,l)):(l=n.columnIndex,(h=t.columnIndex-(r=p.phases.length&&p.phaseSize?1:0))<(d=n.columnIndex-r)?i&&n.wrapper.offsetX>i.x&&(l+=d>0?-1:1,d+=d>0?-1:1):i&&n.wrapper.offsetX<i.x&&(l+=1,d+=1),(a=t.columnIndex)!==l&&(0===p.phaseSize&&0===l&&p.header&&p.hasHeader&&(f.rows[0].cells[a].children=f.rows[0].cells[0].children,f.rows[0].cells[a].columnSpan=f.rows[0].cells[0].columnSpan,f.rows[0].cells[0].children=[]),f.updateColumnIndex(0,a,l))),a!==l&&(o={target:Ul(n),source:Ul(t)},c=g[h],g.splice(h,1),g.splice(d,0,c),s={target:Ul(o.source),source:Ul(o.target)},e.diagramActions&Tn.UndoRedo||e.commandHandler.addHistoryEntry({type:"LanePositionChanged",redoObject:s,undoObject:o,category:"Internal"}),hs(e,u,0),fs(m,e),u.wrapper.measure(new Xt(u.width,u.height)),u.wrapper.arrange(u.wrapper.desiredSize),e.updateDiagramObject(u)))}function ms(e,t,n,i){var r=e.getObject(n.id),o=r.shape,s=o.header&&o.hasHeader?1:0,a=o.lanes,l=o.phases,c=i.wrapper.actualSize.width,h=i.wrapper.actualSize.height,d=t.wrapper.actualSize.width,u=t.wrapper.actualSize.height;"SwimLane"===r.shape.type&&("Horizontal"===o.orientation?t.isPhase?l[t.columnIndex].offset+=c-d:a[t.rowIndex-(s=o.phaseSize&&o.phases.length>0?s+1:s)].height+=h-u:t.isPhase?l[t.rowIndex-s].offset+=h-u:a[t.columnIndex-(s=o.phaseSize&&o.phases.length>0?1:0)].width+=c-d)}function ys(e,t){var n=e.shape,i=n.header&&n.hasHeader?1:0;return"Horizontal"===n.orientation?t.rowIndex-(i+=n.phases.length>0?1:0):t.columnIndex-(n.phaseSize&&n.phases.length>0?1:0)}function vs(e){var t=0,n=e.shape;return"Horizontal"===n.orientation&&(t=n.header&&n.hasHeader?1:0),n.phases.length>0&&n.phaseSize&&(t+=1),t}function bs(e,t,n,i){var r=e.shape;if(r.phases.length>0){var o=t.nameTable[r.phases[i].header.id];o&&o.maxWidth<n.outerBounds.width&&(o.maxWidth=n.outerBounds.width,o.wrapper.maxWidth=n.outerBounds.width)}}function ws(e,t){if(t.shape.header&&t.shape.hasHeader){var n=e.nameTable[t.wrapper.children[0].rows[0].cells[0].children[0].id];n&&n.isHeader&&n.maxWidth<t.width&&(n.maxWidth=t.width,n.wrapper.maxWidth=t.width)}}function Cs(e,t,n,i){var r=e.nameTable[t.id];if("SwimLane"===r.shape.type){e.protectPropertyChange(!0);var o,s,a,l,c=r.wrapper.children[0],h=c.bounds,d=r.shape,u=!1,p=void 0,f=void 0,g=void 0,m=void 0,y=void 0,v=void 0,b=void 0,w=void 0;if(g=new la(d,"lanes",n,!0),f=d.header&&d.hasHeader?1:0,"Horizontal"===d.orientation&&(u=!0,f=d.phases.length>0?f+1:f),s=ls(e,c),f+=a=void 0!==i?i:d.lanes.length,u){var C=new Uo;C.height=n.height,c.addRow(f,C,!1),r.height=void 0!==r.height?r.height+n.height:r.height,r.wrapper.height=c.height=r.height}else{var x=new Wo;x.width=n.width,c.addColumn(a+1,x,!1),r.width&&(r.width+=n.width,r.wrapper.width=c.width=r.width),e.diagramActions&Tn.UndoRedo||(c.rows[0].cells[0].columnSpan+=1)}if(e.diagramActions&Tn.UndoRedo||(g.id+=zl()),void 0!==i?d.lanes.splice(i,0,g):d.lanes.push(g),os(c,e,r,f,a,u),o="Horizontal"===d.orientation?e.nameTable[c.rows[f].cells[0].children[0].id]:d.header&&d.hasHeader?e.nameTable[c.rows[1].cells[f].children[0].id]:e.nameTable[c.rows[0].cells[f].children[0].id],e.diagramActions&Tn.UndoRedo||(p={type:"LaneCollectionChanged",changeType:"Insert",undoObject:Ul(g),redoObject:Ul(o),category:"Internal"},e.addHistoryEntry(p)),hs(e,r,"Horizontal"===d.orientation?f:d.header&&d.hasHeader?1:0),cs(r),ws(e,r),(l=n.children)&&l.length>0)for(m=0;m<l.length;m++)if(w={x:(b=l[m]).wrapper.offsetX,y:b.wrapper.offsetY},"Horizontal"===d.orientation)for(y=0;y<c.rows[f].cells.length;y++)xs(e,c.rows[f].cells[y],w,b);else for(v=0;v<c.rows.length;v++)xs(e,c.rows[v].cells[f],w,b);fs(s,e),e.drag(r,h.x-c.bounds.x,h.y-c.bounds.y),e.protectPropertyChange(!1)}}function xs(e,t,n,i){if(t.children&&t.children.length>0){var r=t.children[0],o=e.nameTable[r.id];r.bounds.containsPoint(n)&&e.addChild(o,i)}}function As(e,t,n){if("SwimLane"===t.shape.type){var i=void 0,r=void 0,o=void 0,s=void 0,a=void 0,l=void 0,c=t.wrapper.bounds.x,h=t.wrapper.bounds.y,d=t.shape,u=d.padding,p=d.phases,f=void 0,g=t.wrapper.children[0],m="Horizontal"===d.orientation;if(i=d.header&&d.hasHeader?0:-1,d.phases.length>0&&(i+=1),n.offset>(m?d.lanes[0].header.width:d.lanes[0].header.height)){for(l=0;l<p.length;l++)if((o=p[l]).offset>n.offset){if(f=l>0?n.offset-(l>0?p[l-1]:o).offset:n.offset,m){var y=g.columnDefinitions()[l];y.width-=f,(s=e.nameTable[d.phases[l].header.id]).maxWidth=s.wrapper.maxWidth=y.width,g.updateColumnWidth(l,y.width,!1);var v=new Wo;v.width=f,a=l,g.addColumn(l,v,!1);break}var b=g.rowDefinitions()[l+i];b.height-=f,s=e.nameTable[d.phases[l].header.id],g.updateRowHeight(l+i,b.height,!1);var w=new Uo;w.height=f,a=l,g.addRow(l+i,w,!1);break}e.diagramActions&Tn.UndoRedo&&void 0===a&&(D=e.historyManager.currentEntry.next).isLastPhase&&function(e,t,n,i,r,o){var s=t.shape.phases[e-2],a=n.previousPhase.offset;if(m){var l=i.columnDefinitions()[e-1],c=new Wo;e>1?(c.width=l.width-(a-s.offset),l.width=a-s.offset):(c.width=l.width-a,l.width=a),i.updateColumnWidth(e-1,l.width,!1),i.addColumn(e,c,!1)}else{l=i.rowDefinitions()[e];var h=new Uo;e>1?(h.height=n.undoObject.offset-a,l.height=a-s.offset):(h.height=l.height-a,l.height=a),i.updateRowHeight(e,l.height,!1),i.addRow(1+e,h,!1)}}(a=p.length,t,D,g);var C=new ca(t.shape,"phases",n,!0);if(e.diagramActions&Tn.UndoRedo||(C.id+=zl()),d.phases.splice(a,0,C),rs(g,e,t,i,m,a),m){if(r=e.nameTable[g.rows[i].cells[a].children[0].id],0===a&&d.header&&d.hasHeader){g.rows[0].cells[0].children=g.rows[0].cells[1].children,g.rows[0].cells[1].children=[];for(var x=g.rows[0],A=0;A<x.cells.length;A++)x.cells[A].minWidth=void 0,x.cells[A].columnSpan=0===A?g.rows[0].cells.length:1}!function(e,t,n,i,r){var o,s,a=t.shape,l=vs(t);for(a.header&&a.hasHeader&&(n.rows[0].cells[0].columnSpan=n.rows[0].cells.length),o=l;o<n.rows.length;o++)Ss(e,t,(s=n.rows[o]).cells[i-1],s.cells[i],s.cells[i+1],o,i);hs(e,t,1)}(e,t,g,a);var S=g.columnDefinitions();if(g.updateColumnWidth(a,S[a].width,!0,u),r.maxWidth=r.wrapper.maxWidth=S[a].width,S.length>a+1){var O=e.nameTable[g.rows[i].cells[a+1].children[0].id];g.updateColumnWidth(a+1,S[a+1].width,!0,u),O.maxWidth=O.wrapper.maxWidth=S[a+1].width}t.width=t.wrapper.width=t.wrapper.children[0].width=g.width}else{r=e.nameTable[g.rows[i+a].cells[0].children[0].id];var E=g.rowDefinitions(),I=E[i+a].height;!function(e,t,n,i,r){for(var o=n.rows[i],s=n.rows[i+1],a=n.rows[i-1],l=1;l<o.cells.length;l++)Ss(e,t,a.cells[l],o.cells[l],s?s.cells[l]:void 0,i,l);hs(e,t,1)}(e,t,g,i+a),g.updateRowHeight(i+a,I,!0,u),E.length>i+a+1&&g.updateRowHeight(i+a+1,I=E[i+a+1].height,!0,u),t.height=t.wrapper.height=t.wrapper.children[0].height=g.actualSize.height}if(cs(t),t.width=t.wrapper.actualSize.width,ws(e,t),e.drag(t,c-t.wrapper.bounds.x,h-t.wrapper.bounds.y),ps(t,e),!(e.diagramActions&Tn.UndoRedo)){var D={type:"PhaseCollectionChanged",changeType:"Insert",undoObject:Ul(C),redoObject:Ul(r),category:"Internal"};e.addHistoryEntry(D)}e.updateDiagramObject(t)}}}function Ss(e,t,n,i,r,o,s){var a,l,c,h,d,u=t.shape,p="Horizontal"===u.orientation,f=t.wrapper.children[0],g=p?o:s;if(n?(a=p?n.bounds.x+n.bounds.width:n.bounds.x,l=p?n.bounds.y:n.bounds.y+n.bounds.height):(a=f.bounds.x,l=r.bounds.y),c=new an(a,l,i.desiredCellWidth,i.desiredCellHeight),(h=is(e,0,t,{id:t.id+(p?u.lanes[g-2]:u.lanes[g-1]).id+zl()[0],rowIndex:o,columnIndex:s,width:i.minWidth,height:i.minHeight,style:(p?u.lanes[g-2]:u.lanes[g-1]).style,constraints:An.Default|An.AllowDrop,container:{type:"Canvas",orientation:p?"Horizontal":"Vertical"}},!1,!1,!0)).children[0].isCalculateDesiredSize=!1,f.addObject(h,o,s),r&&r.children&&r.children.length)for(d=0;d<r.children.length;d++)p?e.nameTable[r.children[d].id].columnIndex+=1:e.nameTable[r.children[d].id].rowIndex+=1;!function(e,t,n,i,r,o,s){var a,l,c=e.nameTable[r.id],h=t||s,d=e.nameTable[c.parentId].shape.padding;if(h.children&&h.children[0].children.length>1)for(var u=1;u<h.children[0].children.length;u++)l=e.nameTable[(a=h.children[0].children[u]).id],i.containsPoint(o?{x:a.bounds.x,y:a.bounds.center.y}:{x:a.bounds.center.x,y:a.bounds.top})?(n.children[0].children.push(a),h.children[0].children.splice(u,1),u--,e.deleteChild(l),l.isLane||(l.parentId=r.id),c.children||(c.children=[]),t||(o?l.margin.left=l.wrapper.bounds.x-h.children[0].bounds.right:l.margin.top=l.wrapper.bounds.y-h.children[0].bounds.bottom),c.children.push(a.id),l.zIndex=c.zIndex+1,e.removeElements(l)):t&&(o?(l.margin.left-=n.desiredCellWidth,d>l.margin.left&&(l.margin.left=d)):(l.margin.top-=n.desiredCellHeight,d>l.margin.top&&(l.margin.top=d)))}(e,r,i,c,h,p,n)}function Os(e,t,n){if("SwimLane"===t.shape.type&&("ResizeSouth"===n||"ResizeEast"===n)){var i,r=t.shape,o=t.wrapper.children[0],s=void 0;i="ResizeSouth"===n?"Vertical"===r.orientation?o.rows[o.rows.length-1].cells[0]:o.rows[s=o.rows.length-1].cells[o.rows[s].cells.length-1]:o.rows[s=r.header&&r.hasHeader?1:0].cells[o.rows[s].cells.length-1],e.commandHandler.select(e.nameTable[i.children[0].id])}}function Es(e,t,n,i,r,o){var s,a,l,c,h,d,u,p,f=zl(),g=e.shape,m=g.phases,y=e.offsetX-e.wrapper.actualSize.width/2,v=e.offsetY-e.wrapper.actualSize.height/2;if("Vertical"===g.orientation&&(v+=g.header&&g.hasHeader?g.header.height:0),!o)for(r||(e.id+=f,g&&g.header&&g.hasHeader?g.header.id+=f:g.header=void 0),s=0;m&&s<m.length;s++)m[s].id+=f;for(p=r?[n.childTable[i.id]]:g.lanes,s=0;p&&s<p.length;s++)for(l=p[s],o||(l.id+=f),a=0;l.children&&a<l.children.length;a++)d=(c=l.children[a]).wrapper.offsetX-c.width/2,u=c.wrapper.offsetY-c.height/2,c.zIndex=-1,c.inEdges=c.outEdges=[],(o||n&&(1===n.pasteIndex||0===n.pasteIndex))&&("Vertical"===g.orientation?c.margin.top=u-v:c.margin.left=d-y),o||(c.id+=f);if(!o){if(r&&(h={shape:{lanes:p,phases:m,phaseSize:g.phaseSize,type:"SwimLane",orientation:g.orientation,header:{annotation:{content:"Title"},height:50}}},"Horizontal"===g.orientation?(h.width=e.wrapper.actualSize.width,h.height=i.wrapper.actualSize.height+g.header.height+g.phaseSize,h.offsetX=e.wrapper.offsetX+10*n.pasteIndex,h.offsetY=i.wrapper.offsetY+10*n.pasteIndex):(h.width=i.wrapper.actualSize.width,h.height=e.wrapper.actualSize.height,h.offsetX=i.wrapper.offsetX+10*n.pasteIndex,h.offsetY=e.wrapper.offsetY+10*n.pasteIndex),e=h),0!==n.pasteIndex&&(e.offsetX+=10,e.offsetY+=10),e.zIndex=-1,e=t.add(e),!r)for(var b=0,w=Object.keys(n.childTable);b<w.length;b++){var C=n.childTable[w[b]];C.id+=f,C.sourceID+=f,C.targetID+=f,C.zIndex=-1,t.add(C)}"SVG"!==t.mode&&t.refreshDiagramLayer(),t.select([e])}return e}function Is(e,t,n,i){var r,o=t.nodes[0];if(i||Ko(e,o,!0)){var s,a,l=void 0,c=void 0,h=void 0,d=new Nn;n&&(h=e.nameTable[n].parentId,l=o=e.nameTable[n]),s=n?l.wrapper:o.wrapper,(a=e.nameTable[h||o.parentId])&&"Grid"===a.container.type&&((r=new ri).children=[],!i&&o.isHeader||("Horizontal"===a.container.orientation&&o.isPhase||"Vertical"===a.container.orientation&&(o.rowIndex>0&&o.columnIndex>0||o.isLane)?(c=function(e,t,n){for(var i=new an,r="SwimLane"===e.shape.type?e.wrapper.children[0].rows:e.wrapper.rows,o=n?1:0;o<r.length;o++)i.uniteRect(r[o].cells[t].bounds);return i}(a,l?l.columnIndex:o.columnIndex,!(!a.shape.header||!a.shape.hasHeader)),r.offsetX=c.center.x,r.offsetY=c.center.y,d.width=c.width,d.height=c.height):(r.offsetX=a.offsetX,r.offsetY=s.offsetY,d.width=a.wrapper.actualSize.width,d.height=s.actualSize.height)),r.children.push(d),r.measure(new Xt),r.arrange(r.desiredSize))}return r}function Ds(e,t,n,i){for(var r=ys(t,n),o=!1,s=t.shape.lanes[r],a=s.children.length-1;a>=0;a--)i?i.id===s.children[a].id&&s.children.splice(a,1):(e.removeDependentConnector(s.children[a]),e.diagramActions&Tn.UndoRedo||(e.diagramActions=e.diagramActions|Tn.UndoRedo,o=!0),e.remove(s.children[a]),s.children.splice(a,1),o&&(e.diagramActions=e.diagramActions&~Tn.UndoRedo))}function ks(e){return e.children[0]}function Ps(e,t){e.nodes.splice(e.nodes.indexOf(t),1),e.removeFromAQuad(t),e.removeObjectsFromLayer(t),delete e.nameTable[t.id],e.removeElements(t)}function Ts(e,t){var n,i;if(t instanceof ri){if(t.children.length>0)for(n=0;n<t.children.length;n++)t.children[n]instanceof ri&&Ts(e,t.children[n]);i=e.getObject(t.id),Ps(e,i)}}var Ms=function(e){switch(e.type){case"Basic":return Fs;case"Flow":return zs;case"Path":return Rs;case"Image":return Ns;case"Text":return Bs;case"Bpmn":return Zs;case"Native":return Ls;case"HTML":return _s;case"UmlActivity":return Ks;case"UmlClassifier":return oa;case"SwimLane":return ha;default:return Fs}},js=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("Basic")],t.prototype,"type",void 0),t}(Le),Rs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"Path"},Object(s.b)([ye("Path")],t.prototype,"type",void 0),Object(s.b)([ye("")],t.prototype,"data",void 0),t}(js),Ls=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"Native"},Object(s.b)([ye("Native")],t.prototype,"type",void 0),Object(s.b)([ye("")],t.prototype,"content",void 0),Object(s.b)([ye("Stretch")],t.prototype,"scale",void 0),t}(js),_s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"Html"},Object(s.b)([ye("HTML")],t.prototype,"type",void 0),Object(s.b)([ye("")],t.prototype,"content",void 0),t}(js),Ns=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"Image"},Object(s.b)([ye("Image")],t.prototype,"type",void 0),Object(s.b)([ye("")],t.prototype,"source",void 0),Object(s.b)([ye("")],t.prototype,"scale",void 0),Object(s.b)([ye("None")],t.prototype,"align",void 0),t}(js),Bs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"Text"},Object(s.b)([ye("Text")],t.prototype,"type",void 0),Object(s.b)([ye("")],t.prototype,"content",void 0),Object(s.b)([ve({},zn)],t.prototype,"margin",void 0),t}(js),Fs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"BasicShape"},Object(s.b)([ye("Basic")],t.prototype,"type",void 0),Object(s.b)([ye("Rectangle")],t.prototype,"shape",void 0),Object(s.b)([ye(0)],t.prototype,"cornerRadius",void 0),Object(s.b)([we([],Zt)],t.prototype,"points",void 0),t}(js),zs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"FlowShape"},Object(s.b)([ye("Flow")],t.prototype,"type",void 0),Object(s.b)([ye("Terminator")],t.prototype,"shape",void 0),t}(js),Hs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"BpmnGateway"},Object(s.b)([ye("None")],t.prototype,"type",void 0),t}(Le),Vs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"BpmnDataObject"},Object(s.b)([ye("None")],t.prototype,"type",void 0),Object(s.b)([ye(!1)],t.prototype,"collection",void 0),t}(Le),Us=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("None")],t.prototype,"type",void 0),Object(s.b)([ye("None")],t.prototype,"loop",void 0),Object(s.b)([ye(!1)],t.prototype,"call",void 0),Object(s.b)([ye(!1)],t.prototype,"compensation",void 0),t}(Le),Ws=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"BpmnEvent"},Object(s.b)([ye("Start")],t.prototype,"event",void 0),Object(s.b)([ye("None")],t.prototype,"trigger",void 0),t}(Le),Gs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"BpmnSubEvent"},Object(s.b)([ye("None")],t.prototype,"trigger",void 0),Object(s.b)([ye("Start")],t.prototype,"event",void 0),Object(s.b)([ye("")],t.prototype,"id",void 0),Object(s.b)([ve({},Zt)],t.prototype,"offset",void 0),Object(s.b)([we([],ni)],t.prototype,"annotations",void 0),Object(s.b)([we([],ai)],t.prototype,"ports",void 0),Object(s.b)([ye()],t.prototype,"width",void 0),Object(s.b)([ye()],t.prototype,"height",void 0),Object(s.b)([ve({},zn)],t.prototype,"margin",void 0),Object(s.b)([ye("Center")],t.prototype,"horizontalAlignment",void 0),Object(s.b)([ye("Center")],t.prototype,"verticalAlignment",void 0),Object(s.b)([ye(!0)],t.prototype,"visible",void 0),t}(Le),qs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ve({id:"success",event:"End",offset:{x:1,y:.5}},Gs)],t.prototype,"success",void 0),Object(s.b)([ve({id:"failure",event:"Intermediate",trigger:"Error",offset:{x:.25,y:1}},Gs)],t.prototype,"failure",void 0),Object(s.b)([ve({id:"cancel",event:"Intermediate",trigger:"Cancel",offset:{x:.75,y:1}},Gs)],t.prototype,"cancel",void 0),t}(Le),Qs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("None")],t.prototype,"type",void 0),Object(s.b)([ye(!1)],t.prototype,"adhoc",void 0),Object(s.b)([ye("Default")],t.prototype,"boundary",void 0),Object(s.b)([ye(!1)],t.prototype,"compensation",void 0),Object(s.b)([ye("None")],t.prototype,"loop",void 0),Object(s.b)([ye(!0)],t.prototype,"collapsed",void 0),Object(s.b)([we([],Gs)],t.prototype,"events",void 0),Object(s.b)([ve({},qs)],t.prototype,"transaction",void 0),Object(s.b)([ye(void 0)],t.prototype,"processes",void 0),t}(Le),Ys=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"BpmnActivity"},Object(s.b)([ye("Task")],t.prototype,"activity",void 0),Object(s.b)([ve({},Us)],t.prototype,"task",void 0),Object(s.b)([ve({},Qs)],t.prototype,"subProcess",void 0),t}(Le),Xs=function(e){function t(t,n,i,r){return e.call(this,t,n,i,r)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"BpmnAnnotation"},Object(s.b)([ye("")],t.prototype,"text",void 0),Object(s.b)([ye("")],t.prototype,"id",void 0),Object(s.b)([ye(0)],t.prototype,"angle",void 0),Object(s.b)([ye()],t.prototype,"height",void 0),Object(s.b)([ye()],t.prototype,"width",void 0),Object(s.b)([ye(0)],t.prototype,"length",void 0),t}(Le),Zs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"BpmnShape"},Object(s.b)([ye("Bpmn")],t.prototype,"type",void 0),Object(s.b)([ye("Event")],t.prototype,"shape",void 0),Object(s.b)([ve({},Ws)],t.prototype,"event",void 0),Object(s.b)([ve({},Hs)],t.prototype,"gateway",void 0),Object(s.b)([ve({},Vs)],t.prototype,"dataObject",void 0),Object(s.b)([ve({},Ys)],t.prototype,"activity",void 0),Object(s.b)([ve({},Xs)],t.prototype,"annotation",void 0),Object(s.b)([we([],Xs)],t.prototype,"annotations",void 0),t}(js),Ks=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"UmlActivityShape"},Object(s.b)([ye("UmlActivity")],t.prototype,"type",void 0),Object(s.b)([ye("Action")],t.prototype,"shape",void 0),t}(js),Js=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"MethodArguments"},Object(s.b)([ye("")],t.prototype,"name",void 0),Object(s.b)([ye("")],t.prototype,"type",void 0),Object(s.b)([ve({},Yn)],t.prototype,"style",void 0),t}(Le),$s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"UmlClassAttribute"},Object(s.b)([ye("Public")],t.prototype,"scope",void 0),Object(s.b)([ye(!1)],t.prototype,"isSeparator",void 0),t}(Js),ea=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"UmlClassMethod"},Object(s.b)([we([],Js)],t.prototype,"parameters",void 0),t}($s),ta=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"UmlClass"},Object(s.b)([ye("")],t.prototype,"name",void 0),Object(s.b)([we([],$s)],t.prototype,"attributes",void 0),Object(s.b)([we([],ea)],t.prototype,"methods",void 0),Object(s.b)([ve({},Yn)],t.prototype,"style",void 0),t}(Le),na=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"UmlInterface"},Object(s.b)([ye(!1)],t.prototype,"isSeparator",void 0),t}(ta),ia=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"UmlEnumerationMember"},Object(s.b)([ye("")],t.prototype,"name",void 0),Object(s.b)([ye("")],t.prototype,"value",void 0),Object(s.b)([ye(!1)],t.prototype,"isSeparator",void 0),Object(s.b)([ve({},Yn)],t.prototype,"style",void 0),t}(Le),ra=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"UmlEnumeration"},Object(s.b)([ye("")],t.prototype,"name",void 0),Object(s.b)([we([],ia)],t.prototype,"members",void 0),Object(s.b)([ve({},Yn)],t.prototype,"style",void 0),t}(Le),oa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"UmlClassifierShape"},Object(s.b)([ye("UmlClassifier")],t.prototype,"type",void 0),Object(s.b)([ve({},ta)],t.prototype,"class",void 0),Object(s.b)([ve({},na)],t.prototype,"interface",void 0),Object(s.b)([ve({},ra)],t.prototype,"enumeration",void 0),Object(s.b)([ye("Class")],t.prototype,"classifier",void 0),t}(js),sa=function(e){function t(t,n,i,r){var o,s=e.call(this,t,n,i,r)||this;return s.isCanvasUpdate=!1,s.status="None",s.parentId="",s.processId="",s.umlIndex=-1,s.outEdges=[],s.inEdges=[],s.isHeader=!1,s.isLane=!1,s.isPhase=!1,s.children&&s.children.length>0&&((o=i).style&&o.style.fill||(s.style.fill="transparent"),o.style&&o.style.strokeColor||(s.style.strokeColor="transparent")),s.shape&&"UmlActivity"===s.shape.type&&Ia(i,s),s.shape&&"SwimLane"===s.shape.type&&Ea(i,s),s}return Object(s.c)(t,e),Object.defineProperty(t.prototype,"actualSize",{get:function(){return null!==this.wrapper?this.wrapper.actualSize:new Xt(this.width||0,this.height||0)},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t;switch(t="SwimLane"!=this.shape.type?new Nn:new Vo,this.shape.changedProperties={},this.shape.oldProperties={},this.shape.type){case"Path":var n=new Zn;n.data=this.shape.data,t=n;break;case"Image":var i=new $n;i.source=this.shape.source,i.imageAlign=this.shape.align,i.imageScale=this.shape.scale,t=i;break;case"Text":var r=new Jn;r.content=this.shape.content,(t=r).style=this.style;break;case"Basic":if("Rectangle"===this.shape.shape)(t=s=new Nn).cornerRadius=this.shape.cornerRadius;else if("Polygon"===this.shape.shape){var o=new Zn;o.data=Jt(this.shape.points),t=o}else{var s=new Zn,a=oi(this.shape.shape);s.data=a,t=s}break;case"Flow":var l=new Zn,c=di(this.shape.shape);l.data=c,t=l;break;case"UmlActivity":t=function(e,t,n){var i=ba(n.shape.shape);switch(e.data=i,t=e,n.shape.shape){case"StructuredNode":if(n.annotations)for(var r=0;r<n.annotations.length;r++)n.annotations[r].content="<<"+n.annotations[r].content+">>";t=e;break;case"FinalNode":t=Ga(n)}return t}(new Zn,t,this);break;case"Bpmn":if(e.bpmnModule){t=e.bpmnModule.initBPMNContent(t,this,e),this.wrapper.elementActions=this.wrapper.elementActions|Sn.ElementIsGroup;var h=this.shape.activity.subProcess;if(h.processes&&h.processes.length)for(var d=0,u=this.shape.activity.subProcess.processes;d<u.length;d++){var p=u[d];!e.nameTable[p]||e.nameTable[p].processId&&e.nameTable[p].processId!==this.id||(e.nameTable[p].processId=this.id,h.collapsed&&e.updateElementVisibility(e.nameTable[p].wrapper,e.nameTable[p],!h.collapsed),t.children.push(e.nameTable[p].wrapper))}}break;case"Native":var f=new Kn(this.id,e.element.id);f.content=this.shape.content,f.scale=this.shape.scale,t=f;break;case"HTML":var g=new Gr(this.id,e.element.id);g.content=this.shape.content,t=g;break;case"UmlClassifier":t=function(e,t,n){var i,r="NoWrap";"Class"===t.shape.classifier?i=t.shape.class:"Enumeration"===t.shape.classifier?i=t.shape.enumeration:"Interface"===t.shape.classifier&&(i=t.shape.interface),t.container={type:"Stack",orientation:"Vertical"},t.constraints=(An.Default|An.HideThumbs)&~(An.Rotate|An.Resize),t.style={fill:t.style.fill,strokeColor:"black",strokeWidth:1.5},t.children=[],t.maxWidth&&(r="Wrap");var o=new sa(n,"nodes",{id:t.id+"_umlClass_header",annotations:[{id:"name",content:i.name,offset:{x:.5,y:.65},margin:{left:10,right:10},style:{bold:!0,fontSize:14,color:i.style.color,fill:i.style.fill,textWrapping:r}},{content:"<<"+t.shape.classifier+">>",margin:{left:10,right:10},id:"class",style:{fontSize:i.style.fontSize,color:i.style.color,fill:i.style.fill,textWrapping:r},offset:{x:.5,y:.3},constraints:xn.ReadOnly}],constraints:(An.Default|An.HideThumbs)&~(An.Rotate|An.Drag|An.Resize),verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:t.style.fill,strokeColor:"#ffffff00"}},!0);return n.initObject(o),n.nodes.push(o),t.children.push(o.id),function(e,t,n,i){if("Enumeration"===e.shape.classifier){var r=n.members;if(r&&r.length){Yo(e,t);for(var o="",s=0;s<r.length;s++){var a=r[s];if(""!==a.name&&(o+=a.name),s!==r.length){var l=Xo(e,a),c=new sa(t,"nodes",{id:zl()+"_umlMember",annotations:[{id:"name",content:o,offset:{x:0,y:.5},style:{bold:!0,fontSize:l.fontSize,color:l.color,fill:l.fill,textWrapping:i},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:e.style.fill,strokeColor:"#ffffff00",textWrapping:i},constraints:(An.Default|An.HideThumbs)&~(An.Rotate|An.Drag|An.Resize),minHeight:25},!0);t.initObject(c),t.nodes.push(c),e.children.push(c.id),o="",a.isSeparator&&s!==r.length-1&&Yo(e,t)}}}}else{var h=n.attributes;if(h.length){var d="";for(Yo(e,t),s=0;s<h.length;s++){var u,p=h[s];u=p.scope&&"Public"===p.scope?" +":p.scope&&"Private"===p.scope?"-":p.scope&&"Protected"===p.scope?"#":"~",""!==p.name&&u&&(d+=u+" "+p.name+" : "+p.type),s!==h.length&&(l=Xo(e,p),c=new sa(t,"nodes",{id:zl()+"_umlProperty",style:{fill:e.style.fill,strokeColor:"#ffffff00"},annotations:[{id:"name",content:d,offset:{x:0,y:.5},style:{bold:!0,fontSize:l.fontSize,color:l.color,fill:l.fill,textWrapping:i},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(An.Default|An.HideThumbs)&~(An.Rotate|An.Drag|An.Resize),minHeight:25},!0),t.initObject(c),t.nodes.push(c),e.children.push(c.id),d="",p.isSeparator&&s!==h.length-1&&Yo(e,t))}}}}(t,n,i,r),function(e,t,n,i){if(n.methods&&n.methods.length){var r=n.methods;Yo(e,t);for(var o="",s="",a=void 0,l=0;l<r.length;l++){var c=r[l];if(a=c.scope&&"Public"===c.scope?" +":c.scope&&"Private"===c.scope?"-":c.scope&&"Protected"===c.scope?"#":"~",c.parameters)for(var h=0;h<c.parameters.length;h++)o+=c.parameters[h].type?c.parameters[h].name+":"+c.parameters[h].type:c.parameters[h].name,h!==c.parameters.length-1&&(o+=",");if(""!==c.name&&a&&(s+=a+" "+c.name+"("+o+") : "+c.type),l!==r.length){var d=Xo(e,c),u=new sa(t,"nodes",{id:zl()+"_umlMethods",verticalAlignment:"Stretch",horizontalAlignment:"Stretch",annotations:[{id:"name",content:s,offset:{x:0,y:.5},style:{bold:!0,fontSize:d.fontSize,color:d.color,fill:d.fill,textWrapping:i},margin:{left:14,right:5},horizontalAlignment:"Left"}],style:{fill:e.style.fill,strokeColor:"#ffffff00"},minHeight:25,constraints:(An.Default|An.HideThumbs)&~(An.Rotate|An.Drag|An.Resize)},!0);t.initObject(u),t.nodes.push(u),e.children.push(u.id),s="",c.isSeparator&&l!==r.length-1&&Yo(e,t)}}}}(t,n,i,r),t.offsetX=t.offsetX,t.offsetY=t.offsetY,t.style.fill=t.style.fill,t.borderColor=t.borderColor,n.initObject(t),e}(t,this,e);break;case"SwimLane":this.annotations=[],this.ports=[],t.cellStyle.fill="none",t.cellStyle.strokeColor="none",this.container={type:"Grid",orientation:this.shape.orientation},t.id=this.id,this.container.orientation=this.shape.orientation,this.constraints|=An.HideThumbs,function(e,t,n){var i=[],r=[],o=0,s=n.shape,a="Horizontal"===s.orientation;if(s.header&&s.hasHeader&&ss(i,s.header.height),function(e,t,n){var i,r=0,o=n.shape;if(e.length>0)for(var s=0;s<e.length;s++)r+=e[s].height;if(t){if(o.phases.length>0&&o.phaseSize&&(r+=o.phaseSize,ss(e,o.phaseSize)),o.lanes.length>0)for(s=0;s<o.lanes.length;s++)r+=i=o.lanes[s].height,s===o.lanes.length-1&&r<n.height&&(i+=n.height-r),ss(e,i)}else if(o.phases.length>0){var a=0;for(s=0;s<o.phases.length;s++){var l=o.phases[s].offset;a+=0===s?l:l-=a,r+=i=l,s===o.phases.length-1&&r<n.height&&(i+=n.height-r),ss(e,i)}}else ss(e,n.height)}(i,a,n),function(e,t,n){var i,r,o,s,a=0,l=n.shape;if(l.phases.length>0&&"Horizontal"===l.orientation)for(s=0;s<l.phases.length;s++)i=l.phases[s].offset,a+=0===s?i:i-=a,r=as(i),s===l.phases.length-1&&a<n.width&&(r.width+=n.width-a),e.push(r);else if(t)r=as(n.width),e.push(r);else for(l.phaseSize&&l.phases.length>0&&(a+=l.phaseSize,r=as(l.phaseSize),e.push(r)),o=0;o<l.lanes.length;o++)a+=l.lanes[o].width,r=as(l.lanes[o].width),o===l.lanes.length-1&&a<n.width&&(r.width+=n.width-a),e.push(r)}(r,a,n),e.setDefinitions(i,r),s.header&&s.hasHeader&&(function(e,t,n){for(var i=0,r=e.columnDefinitions(),o=n.shape,s=0;s<r.length;s++)i+=r[s].width;var a=is(t,0,n,{annotations:[{content:o.header.annotation.content}],style:o.header.style?o.header.style:void 0,offsetX:n.offsetX,offsetY:n.offsetY,rowIndex:0,columnIndex:0,maxWidth:i,container:{type:"Canvas",orientation:"Horizontal"}},!0);e.addObject(a,0,0,1,e.columnDefinitions().length)}(e,t,n),o++),s.phases.length>0&&s.phaseSize){for(var l=0;l<s.phases.length;l++)""===s.phases[l].id&&(s.phases[l].id=zl()),rs(e,t,n,o,a,l);o++}if(s.lanes.length>0)for(l=0;l<s.lanes.length;l++)""===s.lanes[l].id&&(s.lanes[l].id=zl()),os(e,t,n,o,l,a),o++}(t,e,this)}return t.id=this.id+"_content",t.relativeMode="Object",void 0!==this.width&&(t.width=this.width),t.horizontalAlignment="Stretch",void 0!==this.height&&(t.height=this.height),void 0!==this.minHeight&&(t.minHeight=this.minHeight),void 0!==this.maxHeight&&(t.maxHeight=this.maxHeight),void 0!==this.minWidth&&(t.minWidth=this.minWidth),void 0!==this.maxWidth&&(t.maxWidth=this.maxWidth),"Rectangle"!==this.shape.shape||this.shape.cornerRadius||(t.isRectElement=!0),t.verticalAlignment="Stretch",this.shape instanceof Bs&&(t.margin=this.shape.margin),Co(this)&&0!=(this.constraints&An.Shadow)&&(t.shadow=this.shadow),"Bpmn"===this.shape.type&&"Message"!==this.shape.shape&&"DataSource"!==this.shape.shape||"UmlActivity"===this.shape.type&&"FinalNode"===this.shape.shape||"Text"!==this.shape.type&&(t.style=this.style),(this.wrapper.elementActions&Sn.ElementIsGroup||"Horizontal"!==this.flip)&&"Vertical"!==this.flip||(t.flip=this.flip),t},t.prototype.initContainer=function(){var e;if(this.id||(this.id=zl()),!this.container||this.shape instanceof ha)e=this.children?new Xn:new ri;else switch(this.container.type){case"Canvas":e=new ri;break;case"Stack":e=new Ho;break;case"Grid":(e=new Vo).setDefinitions(this.rows,this.columns)}return e.id=this.id,e.offsetX=this.offsetX,e.offsetY=this.offsetY,e.visible=this.visible,e.horizontalAlignment=this.horizontalAlignment,e.verticalAlignment=this.verticalAlignment,this.container&&(e.width=this.width,e.height=this.height,"Stack"===this.container.type&&(e.orientation=this.container.orientation)),e.style.fill=this.backgroundColor,e.style.strokeColor=this.borderColor,e.style.strokeWidth=this.borderWidth,e.rotateAngle=this.rotateAngle,e.minHeight=this.minHeight,e.minWidth=this.minWidth,e.maxHeight=this.maxHeight,e.maxWidth=this.maxWidth,e.pivot=this.pivot,e.margin=this.margin,e.flip=this.flip,this.wrapper=e,e},t.prototype.initPorts=function(e,t){for(var n,i=0;i<this.ports.length;i++){(n=this.initPortWrapper(this.ports[i])).elementActions=n.elementActions|Sn.ElementIsPort;var r=void 0,o=tc(e);o&&(r=o(n,this)),n.description=r||n.id,t.children.push(n)}},t.prototype.getIconOffet=function(e,t){var n,i;return"BottomToTop"===e.orientation?(n=t.offset.x,i=1-t.offset.y):"LeftToRight"===e.orientation?(n=t.offset.y,i=t.offset.x):"RightToLeft"===e.orientation?(n=1-t.offset.y,i=t.offset.x):(n=t.offset.x,i=t.offset.y),{x:n,y:i}},t.prototype.initIcons=function(e,t,n,i){var r,o=this.isExpanded?this.expandIcon:this.collapseIcon;if("None"!==o.shape){var s=new ri;s.float=!0,s.id=this.id+"_icon_content",s.children=[],s.height=o.height,s.width=o.width,s.style.strokeColor="transparent",s.margin=o.margin,s.horizontalAlignment="Center",s.verticalAlignment="Center",s.visible=this.visible,r=this.getIconOffet(t,o),s.setOffsetWithRespectToBounds(r.x,r.y,"Fraction"),s.relativeMode="Point",this.initIconSymbol(o,s,e,i);var a=void 0,l=tc(e);l&&(a=l(o,this)),s.description=a||s.id,n.children.push(s)}},t.prototype.initAnnotations=function(e,t,n,i){for(var r,o=0;o<this.annotations.length;o++){r=this.initAnnotationWrapper(this.annotations[o],n,i,o);var s=void 0,a=tc(e);a&&(s=a(r,this)),r.description=s||r.id,t.children.push(r)}},t.prototype.initPortWrapper=function(e){e.id=e.id||zl();var t=new Zn;t.height=e.height,t.width=e.width;var n="Custom"===e.shape?e.pathData:li(e.shape);t.id=this.id+"_"+e.id,t.margin=e.margin,t.data=n;var i=e.style;return t.style={fill:i.fill,strokeColor:i.strokeColor,gradient:null,opacity:i.opacity,strokeDashArray:i.strokeDashArray,strokeWidth:i.strokeWidth},t.horizontalAlignment=e.horizontalAlignment,t.verticalAlignment=e.verticalAlignment,t=cl(t,this.flip,e),void 0===this.width&&void 0===this.height||(t.float=!0),t.relativeMode="Point",t.visible=!(!Ja(e,vn.Visible)||Ja(e,vn.Hover)||Ja(e,vn.Connect)),t},t.prototype.initAnnotationWrapper=function(e,t,n,i){e.id=e.id||i+"annotation"||zl();var r,o=e;if(t&&e.template)(r=new Gr(this.id,t,e.id)).content=e.template;else{(r=new Jn).canMeasure=!n;var s=e.style,a=e.hyperlink.link?e.hyperlink:void 0;r.style={fill:s.fill,strokeColor:s.strokeColor,strokeWidth:s.strokeWidth,bold:s.bold,textWrapping:s.textWrapping,color:a?a.color||r.hyperlink.color:s.color,whiteSpace:s.whiteSpace,fontFamily:s.fontFamily,fontSize:s.fontSize,italic:s.italic,gradient:null,opacity:s.opacity,strokeDashArray:s.strokeDashArray,textAlign:s.textAlign,textOverflow:e.style.textOverflow,textDecoration:a?a.textDecoration||r.hyperlink.textDecoration:s.textDecoration},r.hyperlink.link=e.hyperlink.link||void 0,r.hyperlink.content=e.hyperlink.content||void 0,r.hyperlink.textDecoration=e.hyperlink.textDecoration||void 0,r.content=a?a.content||r.hyperlink.link:e.content}return r.constraints=e.constraints,r.height=e.height,r.width=e.width,r.visible=e.visibility,r.rotateAngle=e.rotateAngle,r.id=this.id+"_"+e.id,void 0===this.width||e.template||(void 0===e.width||e.width>this.width&&("Wrap"===e.style.textWrapping||"WrapWithOverflow"===e.style.textWrapping))&&(r.width=this.width),r.margin=e.margin,r.horizontalAlignment=e.horizontalAlignment,r.verticalAlignment=e.verticalAlignment,r.setOffsetWithRespectToBounds(o.offset.x,o.offset.y,"Fraction"),void 0===this.width&&void 0===this.height||(r.float=!0),r.relativeMode="Point",r},t.prototype.initIconContainer=function(e,t){var n=new Nn;return n.id=t.id+"_rect",n.height=e.height,n.width=e.width,n.visible=t.visible,n.margin=e.margin,n.cornerRadius=e.cornerRadius,n.style={fill:e.fill,strokeColor:e.borderColor,strokeWidth:e.borderWidth},n.setOffsetWithRespectToBounds(.5,.5,"Fraction"),n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object",n.description=n.description||"Click here to expand or collapse",n},t.prototype.initIconSymbol=function(e,t,n,i){var r;if(t.children.push(this.initIconContainer(e,t)),"Template"===e.shape)(r=new Kn(this.id,i)).content=e.content,r.height=10,r.width=10;else{(r=new Zn).data=function(e){var t;switch(e.shape){case"Minus":t="M0,50 L100,50";break;case"Plus":t="M0,-50 L0,50 M-50,0 L50,0";break;case"ArrowUp":t="M0,100 L50,0 L100,100 Z";break;case"ArrowDown":t="M0,0 L50,100 L100,0 Z";break;case"Path":t=e.pathData}return t}(e);var o=gl(r.data);r.height=o.height<10?o.height:10-(e.padding.bottom+e.padding.top),r.width=o.width<10?o.width:10-(e.padding.left+e.padding.right)}r.id=t.id+"_shape",r.horizontalAlignment="Center",r.verticalAlignment="Center",r.visible=t.visible,r.visible=t.visible,r.style={fill:"black",strokeColor:e.borderColor,strokeWidth:e.borderWidth},r.setOffsetWithRespectToBounds(.5,.5,"Fraction"),r.relativeMode="Object",r.description=t.description||"Click here to expand or collapse",t.children.push(r)},t.prototype.getClassName=function(){return"Node"},Object(s.b)([we([],ni)],t.prototype,"annotations",void 0),Object(s.b)([ye(0)],t.prototype,"offsetX",void 0),Object(s.b)([ye(0)],t.prototype,"offsetY",void 0),Object(s.b)([ve({x:.5,y:.5},Zt)],t.prototype,"pivot",void 0),Object(s.b)([ye()],t.prototype,"width",void 0),Object(s.b)([ye()],t.prototype,"height",void 0),Object(s.b)([ye()],t.prototype,"minWidth",void 0),Object(s.b)([ye()],t.prototype,"minHeight",void 0),Object(s.b)([ye()],t.prototype,"maxWidth",void 0),Object(s.b)([ye()],t.prototype,"maxHeight",void 0),Object(s.b)([ye(0)],t.prototype,"rotateAngle",void 0),Object(s.b)([ve({fill:"white"},Yn)],t.prototype,"style",void 0),Object(s.b)([ye("transparent")],t.prototype,"backgroundColor",void 0),Object(s.b)([ye("none")],t.prototype,"borderColor",void 0),Object(s.b)([ye(0)],t.prototype,"borderWidth",void 0),Object(s.b)([ye()],t.prototype,"data",void 0),Object(s.b)([be(Ms)],t.prototype,"shape",void 0),Object(s.b)([ye(null)],t.prototype,"wrapper",void 0),Object(s.b)([ye(An.Default)],t.prototype,"constraints",void 0),Object(s.b)([ve({},Hn)],t.prototype,"shadow",void 0),Object(s.b)([ye()],t.prototype,"children",void 0),Object(s.b)([ye(null)],t.prototype,"container",void 0),Object(s.b)([ye("Left")],t.prototype,"horizontalAlignment",void 0),Object(s.b)([ye("Top")],t.prototype,"verticalAlignment",void 0),Object(s.b)([ye()],t.prototype,"rows",void 0),Object(s.b)([ye()],t.prototype,"columns",void 0),Object(s.b)([ye()],t.prototype,"rowIndex",void 0),Object(s.b)([ye()],t.prototype,"columnIndex",void 0),Object(s.b)([ye()],t.prototype,"rowSpan",void 0),Object(s.b)([ye()],t.prototype,"columnSpan",void 0),t}(lr),aa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"id",void 0),Object(s.b)([ve({style:{fill:"#111111"}},ti)],t.prototype,"annotation",void 0),Object(s.b)([ve({fill:"#E7F4FF",strokeColor:"#CCCCCC"},qn)],t.prototype,"style",void 0),Object(s.b)([ye(50)],t.prototype,"height",void 0),Object(s.b)([ye(50)],t.prototype,"width",void 0),t}(Le),la=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"Lane"},Object(s.b)([ye("")],t.prototype,"id",void 0),Object(s.b)([ve({fill:"#F9F9F9",strokeColor:"#CCCCCC"},qn)],t.prototype,"style",void 0),Object(s.b)([we([],sa)],t.prototype,"children",void 0),Object(s.b)([ye(100)],t.prototype,"height",void 0),Object(s.b)([ye(100)],t.prototype,"width",void 0),Object(s.b)([ve({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},aa)],t.prototype,"header",void 0),t}(Le),ca=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"Phase"},Object(s.b)([ye("")],t.prototype,"id",void 0),Object(s.b)([ve({strokeColor:"#CCCCCC"},qn)],t.prototype,"style",void 0),Object(s.b)([ve({annotation:{content:"Phase"}},aa)],t.prototype,"header",void 0),Object(s.b)([ye(100)],t.prototype,"offset",void 0),t}(Le),ha=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.padding=20,t.hasHeader=!0,t}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"SwimLane"},Object(s.b)([ye("SwimLane")],t.prototype,"type",void 0),Object(s.b)([ye(20)],t.prototype,"phaseSize",void 0),Object(s.b)([we([],ca)],t.prototype,"phases",void 0),Object(s.b)([ye("Horizontal")],t.prototype,"orientation",void 0),Object(s.b)([we([],la)],t.prototype,"lanes",void 0),Object(s.b)([ve({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},aa)],t.prototype,"header",void 0),Object(s.b)([ye(!1)],t.prototype,"isLane",void 0),Object(s.b)([ye(!1)],t.prototype,"isPhase",void 0),t}(js),da=function(){function e(){}return e.prototype.getClassName=function(){return"ChildContainer"},Object(s.b)([ye("Canvas")],e.prototype,"type",void 0),Object(s.b)([ye("Vertical")],e.prototype,"orientation",void 0),e}(),ua=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.offset=0,i.scale=1,i}return Object(s.c)(t,e),t.prototype.preRender=function(){this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.updateRulerGeometry()},t.prototype.getModuleName=function(){return"Ruler"},t.prototype.destroy=function(){this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),this.element.classList.remove("e-ruler")},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"length":case"interval":case"segmentWidth":case"tickAlignment":case"markerColor":case"thickness":this.updateRuler()}},t.prototype.updateRulerGeometry=function(){this.element.style.textAlign="left",this.renderRulerSpace(),this.updateRuler()},t.prototype.renderRulerSpace=function(){var e=this.getRulerGeometry(),t=document.getElementById(this.element.id+"_ruler_space");return t||(t=Pl("div",{id:this.element.id+"_ruler_space",style:"height:"+e.height+"px;width:"+e.width+"px;cssFloat:left;"}),this.element.appendChild(t)),t},t.prototype.updateRuler=function(){var e=this.getRulerSize(),t=this.getRulerGeometry(),n=0,i=0,r=new Xt,o=this.getRulerSVG(t);o&&(n=this.length,r.height=e,i=this.offset,n&&n!==1/0)&&this.updateSegments(i,n+this.segmentWidth+Math.abs(i),o,e)},t.prototype.updateSegments=function(e,t,n,i){for(var r=e,o={trans:0};r<t;){var s=this.getNewSegment(r,n);s&&(n.appendChild(s.segment),r=this.updateSegment(e,t,s,r,o,i))}},t.prototype.updateSegment=function(e,t,n,i,r,o){var s=this.updateSegmentWidth(this.scale);return i===e?(this.startValue=Math.floor(e/s)*s/this.scale,this.startValue=this.startValue%1!=0?Number(this.startValue.toFixed(1)):this.startValue,n.label.textContent=this.startValue.toString(),this.defStartValue=i=this.startValue*this.scale,"Horizontal"===this.orientation?this.hRulerOffset=e-i:this.vRulerOffset=e-i):(this.startValue=i/this.scale,this.startValue=this.startValue%1!=0?Number(this.startValue.toFixed(1)):this.startValue,n.label.textContent=this.startValue.toString()),this.updateTickLabel(n,o),n.segment.setAttribute("transform","translate("+("Horizontal"===this.orientation?r.trans+.5+",0.5":"0.5,"+(r.trans+.5))+")"),r.trans+=s,i+s},t.prototype.updateTickLabel=function(e,t){var n=e.segment.lastChild.getBBox(),i="Horizontal"===this.orientation,r="RightOrBottom"===this.tickAlignment,o=i?2:0,s=i?r?t/2+5.5-5.5:t/2+5.5:n.height;Nl(e.segment.lastChild,i?{x:o,y:s}:{x:o,y:s,transform:"rotate(270)translate("+(r?-(n.width+2)+","+(t/2-n.height):-(n.width+2)+","+(t/2-n.height/2))+")"})},t.prototype.getNewSegment=function(e,t){var n=this.createNewTicks(e,t);return{segment:n,label:this.createTickLabel(t,n)}},t.prototype.createNewTicks=function(e,t){var n,i,r=this.updateSegmentWidth(this.scale);i=Tl("g",{class:"e-ruler-segment"});for(var o=0;o<this.interval;o++)n=this.createTick(t,r/this.interval,o+1,e),i.appendChild(n);return i},t.prototype.getLinePoint=function(e,t,n){var i=this.updateSegmentWidth(this.scale),r=this.getRulerSize();return(t*=n-1)%i==0?r:.3*r},t.prototype.createTick=function(e,t,n,i){var r,o,s=this.getLinePoint(e,t,n),a=this.getRulerSize(),l="Horizontal"===this.orientation,c="RightOrBottom"===this.tickAlignment,h=tc(this.arrangeTick);o={ruler:void 0,tickLength:s,tickInterval:this.segmentWidth/this.interval*(n-1)},h&&h(o),s=o.tickLength;var d=t*(n-1);return(r=Tl("line",{x1:l?d:c?a:0,y1:l?c?a:a-(a-s):d,x2:l?d:c?a-s:a-(a-s),y2:l?c?a-s:0:d,"stroke-width":"1",stroke:"black"})).setAttribute("class","e-ruler-tick"),r},t.prototype.createTickLabel=function(e,t){var n;return t&&(n=Tl("text",{class:"e-ruler-tick-label"}),t.appendChild(n)),n},t.prototype.updateSegmentWidth=function(e){if(100!==this.segmentWidth)return this.segmentWidth;var t,n=1;for(t=100,t=100/Math.pow(2,Math.round(Math.log(e)/Math.log(2)));t>100;)n/=10,t/=10;for(;t<25;)n*=10,t*=10;return t>=25&&t%25!=0&&(t=25*Math.round(t/25)),t*e/n},t.prototype.createMarkerLine=function(e,t,n){var i;return t&&((i=e.getElementById(t.id+"_marker"))&&i.parentNode.removeChild(i),i=Tl("line",n)),i},t.prototype.drawRulerMarker=function(e,t,n){var i,r,o,s,a="Horizontal"===this.orientation,l=e.getElementsByTagName("svg");for(o=0;o<l.length;o++){l[o]&&(i=l[o]);break}if(i){r=this.getRulerSize(),s=this.createMarkerLine(i,e,{id:e.id+"_marker",x1:0,y1:0,x2:a?0:r,y2:a?r:0,stroke:this.markerColor,"stroke-width":1.5,class:"e-d-ruler-marker"});var c=(a?t.x:t.y)*this.scale+n+(this.offset-this.defStartValue);s.setAttribute("transform","translate("+(a?c+.5+" 0.5":"0.5 "+(c+.5))+")"),i.appendChild(s)}},t.prototype.getRulerGeometry=function(){return new Xt(this.element?this.element.getBoundingClientRect().width:0,this.element?this.element.getBoundingClientRect().height:0)},t.prototype.getRulerSize=function(){return this.thickness},t.prototype.getRulerSVG=function(e){var t,n,i=this.getRulerSize();if(this.element&&(t=document.getElementById(this.element.id+"_ruler_space"))){if(n=Tl("svg",{id:this.element.id+"_Ruler_svg",width:"Horizontal"===this.orientation?e.width+200:i+"px",height:"Horizontal"===this.orientation?i:e.height+200+"px",style:"position:inherit;"}),t.childNodes.length>0)for(var r=t.childNodes.length-1;r>=0;r--)t.childNodes[r].parentNode.removeChild(t.childNodes[r]);t.appendChild(n)}return n},t.prototype.wireEvents=function(){},t.prototype.unWireEvents=function(){},Object(s.b)([ye(5)],t.prototype,"interval",void 0),Object(s.b)([ye(100)],t.prototype,"segmentWidth",void 0),Object(s.b)([ye("Horizontal")],t.prototype,"orientation",void 0),Object(s.b)([ye("RightOrBottom")],t.prototype,"tickAlignment",void 0),Object(s.b)([ye("red")],t.prototype,"markerColor",void 0),Object(s.b)([ye(25)],t.prototype,"thickness",void 0),Object(s.b)([ye(null)],t.prototype,"arrangeTick",void 0),Object(s.b)([ye(400)],t.prototype,"length",void 0),t}(ht);function pa(e,t){var n=document.getElementById(e.element.id+(t?"_hRuler":"_vRuler")),i=ma(e),r=ya(e);n||(n=Pl("div",{id:e.element.id+(t?"_hRuler":"_vRuler"),style:"height:"+(t?i.height:r.height+100)+"px;overflow:hidden;width:"+(t?r.width+100:i.width)+"px;position:absolute;font-size:11px;"+(t?"margin-left:"+i.width+"px;":"margin-top:"+i.height+"px;")})),e.element.insertBefore(n,e.element.firstChild);var o=t?e.rulerSettings.horizontalRuler:e.rulerSettings.verticalRuler,s=new ua(o);s.orientation=t?"Horizontal":"Vertical",s.length=(t?r.width:r.height)+o.segmentWidth,s.appendTo("#"+e.element.id+(t?"_hRuler":"_vRuler")),t?e.hRuler=s:e.vRuler=s;var a=document.getElementById(e.element.id+(t?"_hRuler":"_vRuler"));t?e.hRuler.element=a:e.vRuler.element=a}function fa(e){var t=-e.scroller.horizontalOffset,n=-e.scroller.verticalOffset;e&&e.rulerSettings.showRulers?(e.hRuler.length=0,e.vRuler.length=0,void 0!==t&&e.hRuler.element&&va(e,e.hRuler,t,!0),void 0!==n&&e.vRuler.element&&va(e,e.vRuler,n,!1)):ga(e)}function ga(e){Ll(e.element.id+"_hRuler"),Ll(e.element.id+"_vRuler"),Ll(e.element.id+"_overlapRuler")}function ma(e){var t=0,n=0;return e.rulerSettings.showRulers&&(t=e.rulerSettings.horizontalRuler.thickness,n=e.rulerSettings.verticalRuler.thickness),new Xt(n,t)}function ya(e){var t=ma(e),n=e.scroller.viewPortHeight,i=e.scroller.viewPortWidth;return i<e.element.clientWidth-t.width&&(i=e.element.clientWidth-t.width),n<e.element.clientHeight-t.height&&(n=e.element.clientHeight-t.height),e.hRuler&&e.hRuler.length&&(i=e.hRuler.length),e.vRuler&&e.vRuler.length&&(n=e.vRuler.length),new Xt(i,n)}function va(e,t,n,i){var r=ma(e),o=ya(e),s=i?e.rulerSettings.horizontalRuler:e.rulerSettings.verticalRuler;!function(e,t,n){var i=document.getElementById(e.element.id+(n?"_hRuler":"_vRuler")),r=n?e.hRuler:e.vRuler;i&&e&&t&&(i.style.width=(n?t.width+r.segmentWidth:r.thickness)+"px",i.style.height=(n?r.thickness:t.height+r.segmentWidth)+"px",(i=document.getElementById(e.element.id+"_overlapRuler"))&&(n?i.style.height=r.thickness+"px":i.style.width=r.thickness+"px"))}(e,o,i),function(e,t,n){var i=document.getElementById(e.element.id+(n?"_hRuler_ruler_space":"_vRuler_ruler_space")),r=n?e.hRuler:e.vRuler;i&&e&&t&&(i.style.width=(n?t.width+2*r.segmentWidth:r.thickness)+"px",i.style.height=(n?r.thickness:t.height+2*r.segmentWidth)+"px")}(e,o,i),t.offset=n,t.scale=e.scroller.currentZoom,t.length=o.width+100,t.arrangeTick=tc(s.arrangeTick),t.dataBind();var a=i?e.hRuler.element:e.vRuler.element;i?a.style.marginLeft=r.width-t.hRulerOffset+"px":a.style.marginTop=r.height-t.vRulerOffset+"px"}function ba(e){return wa[e.toString()]}var wa={Action:"M 90 82.895 C 90 86.819 86.776 90 82.8 90 H 7.2 C 3.224 90 0 86.819 0 82.895 V 7.105 C 0 3.181 3.224 0 7.2 0 h 75.6 C 86.776 0 90 3.181 90 7.105 V 82.895 Z",Decision:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",MergeNode:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",InitialNode:"M10,19.5c-5.238,0-9.5-4.262-9.5-9.5S4.762,0.5,10,0.5s9.5,4.262,9.5,9.5S15.238,19.5,10,19.5z",ForkNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",JoinNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",TimeEvent:"M50.001,0.00286865 L25.001,25.0029 L0.000976562,0.00286865 L50.001,0.00286865 z M0.000976562,50.0029 L25.001,25.0029 L50.001,50.0029 L0.000976562,50.0029 z",AcceptingEvent:"M17.8336 32.164 L29.64 24 L17.32 16 L48.1664 16 L48.5 32 Z",SendSignal:"M48.164 31.8336 L56 23.832 L47.836 16 L16.168 16 L16.1668 31.8336 Z",ReceiveSignal:"M48.1664 31.8336 L39.836 24 L47.836 16 L16.168 16 L16.168 31.836 Z",StructuredNode:"M0,0 L50,0 L50,50 L0,50 z",Note:"M20 12 L4 12 L4 22 L22 22 L22 14 L20 14 L20 12 L22 14 Z"},Ca=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye()],t.prototype,"key",void 0),Object(s.b)([ye()],t.prototype,"keyModifiers",void 0),t}(Le),xa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getClassName=function(){return"Command"},Object(s.b)([ye("")],t.prototype,"name",void 0),Object(s.b)([ye()],t.prototype,"canExecute",void 0),Object(s.b)([ye()],t.prototype,"execute",void 0),Object(s.b)([ve({},Ca)],t.prototype,"gesture",void 0),Object(s.b)([ye("")],t.prototype,"parameter",void 0),t}(Le),Aa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([we([],xa)],t.prototype,"commands",void 0),t}(Le),Sa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye()],t.prototype,"show",void 0),Object(s.b)([ye()],t.prototype,"showCustomMenuOnly",void 0),Object(s.b)([ye()],t.prototype,"items",void 0),t}(Le);function Oa(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return!0;return!1}function Ea(e,t){t instanceof sa&&(e.shape.header||(t.shape.hasHeader=!1))}function Ia(e,t){if(t instanceof sa)switch(e.shape.shape){case"JoinNode":e.width||(t.width=20),e.height||(t.height=90),e.style&&e.style.fill||(t.style.fill="black");break;case"ForkNode":e.width||(t.width=90),e.height||(t.height=20),e.style&&e.style.fill||(t.style.fill="black");break;case"InitialNode":case"FinalNode":e.style&&e.style.fill||(t.style.fill="black")}else switch(e.shape.flow){case"Object":e.style&&e.style.strokeDashArray||(t.style.strokeDashArray="8 4"),e.style&&e.style.strokeWidth||(t.style.strokeWidth=2),e.targetDecorator&&e.targetDecorator.shape||(t.targetDecorator.shape="OpenArrow");break;case"Control":e.style&&e.style.strokeWidth||(t.style.strokeWidth=2),e.targetDecorator&&e.targetDecorator.shape||(t.targetDecorator.shape="OpenArrow"),e.sourceDecorator&&e.sourceDecorator.shape||(t.sourceDecorator.shape="None")}}function Da(e,t,n){var i;i=Zt.findLength(t,e)>Zt.findLength(n,e)?n:t;var r=Zt.findAngle(t,n),o=Zt.findAngle(i,e),s=Zt.findLength(i,e),a=o+2*(r-o);return{x:i.x+s*Math.cos(a*Math.PI/180),y:i.y+s*Math.sin(a*Math.PI/180)}}function ka(e,t,n){if(e&&e.children&&e.children.length>0)for(var i=void 0,r=0;r<e.children.length;r++)return(i=n[e.children[r]]).shape.type===t||ka(i,t,n);return!1}function Pa(e,t){var n;n="Bezier"===e.type?function(e){var t=[];if("Bezier"===e.type)for(var n=0,i=0;i<e.segments.length;i++)for(var r=e.segments[i],o=Zt.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,s=Zt.isEmptyPoint(r.point2)?r.bezierPoint2:r.point2,a=Number((e.distance(o,r.points[0])+e.distance(s,o)+e.distance(r.points[1],s))/1.5),l=0;l<a-1;l+=10)t[n]=ao(0,r.points[0],Zt.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,Zt.isEmptyPoint(r.point2)?r.bezierPoint2:r.point2,r.points[1],l,a),n++;return t}(e):e.intermediatePoints;for(var i=0;i<n.length-1;i++){var r=n[i],o=n[i+1],s=an.toBounds([r,o]);if(s.Inflate(e.hitPadding),s.containsPoint(t)){var a=Da(t,r,o),l=Ta({x1:r.x,x2:o.x,y1:r.y,y2:o.y},{x1:t.x,x2:a.x,y1:t.y,y2:a.y});if(l.enabled){var c=Zt.findLength(t,l.intersectPt);if(Math.abs(c)<e.hitPadding)return!0}else{var h=an.toBounds([t,t]);if(h.Inflate(3),h.containsPoint(r)||h.containsPoint(o))return!0}if(Zt.equals(t,a))return!0}}if(e.annotations.length>0){var d=e.wrapper.children;for(i=3;i<d.length;i++)if(d[i].bounds.containsPoint(t))return!0}return!1}function Ta(e,t){var n={x:0,y:0},i=e,r=(t.y2-t.y1)*(i.x2-i.x1)-(t.x2-t.x1)*(i.y2-i.y1);if(0===r)return{enabled:!1,intersectPt:n};var o=((t.x2-t.x1)*(i.y1-t.y1)-(t.y2-t.y1)*(i.x1-t.x1))/r,s=((i.x2-i.x1)*(i.y1-t.y1)-(i.y2-i.y1)*(i.x1-t.x1))/r;return o>=0&&o<=1&&s>=0&&s<=1?(n.x=i.x1+o*(i.x2-i.x1),n.y=i.y1+o*(i.y2-i.y1),{enabled:!0,intersectPt:n}):{enabled:!1,intersectPt:n}}function Ma(e,t,n,i){return{x1:Number(e)||0,y1:Number(t)||0,x2:Number(n)||0,y2:Number(i)||0}}function ja(e,t,n){var i=[],r={x:t.topRight.x+(n=n||0),y:t.topRight.y},o={x:t.bottomRight.x,y:t.bottomRight.y-n},s={x:t.bottomLeft.x,y:t.bottomLeft.y+n};return i.push({x:t.topLeft.x-n,y:t.topLeft.y}),i.push(r),i.push(o),i.push(s),i}function Ra(e,t,n){var i;i=function(e,t,n,i){var r={},o=document.getElementById(n.element.id),s=e.wrapper.bounds,a=o.getBoundingClientRect();switch(n.tooltipObject.position){case"BottomCenter":r=La(t,s.bottomCenter,n,i,a.width/2,a.height);break;case"BottomLeft":case"LeftBottom":r=La(t,s.bottomLeft,n,i,0,a.height);break;case"BottomRight":case"RightBottom":r=La(t,s.bottomRight,n,i,a.width,a.height);break;case"LeftCenter":r=La(t,s.middleLeft,n,i,0,a.height/2);break;case"LeftTop":case"TopLeft":r=La(t,s.topLeft,n,i,0,0);break;case"RightCenter":r=La(t,s.middleRight,n,i,a.width,a.height/2);break;case"RightTop":case"TopRight":r=La(t,s.topRight,n,i,a.width,0);break;case"TopCenter":r=La(t,s.topCenter,n,i,a.width/2,0)}return r}(n,t,e,"Mouse"===(!(n instanceof sa?n.constraints&An.InheritTooltip:n.constraints&Cn.InheritTooltip)&&(n instanceof sa?n.constraints&An.Tooltip:n.constraints&Cn.Tooltip)?n.tooltip.relativeMode:e.tooltip.relativeMode));var r=ma(e);return{x:i.x+r.width,y:i.y+r.height}}function La(e,t,n,i,r,o){var s={},a=n.scroller.transform.scale,l=n.scroller.verticalOffset;return s.x=(i?e.x:t.x)*a+n.scroller.horizontalOffset-r,s.y=(i?e.y:t.y)*a+l-o,s}function _a(e,t,n){var i,r,o;r=Na(e,t),i=Zt.findAngle(e[r.index],e[r.index+1]);var s=function(e){var t=void 0===e.content?10:0,n=0;switch(e.alignment){case"Center":n=0;break;case"Before":n=-(0+t);break;case"After":n=0+t}return n}(t);return o=Zt.transform(r.point,i+45,s),r.point=o,r.angle=i,r}function Na(e,t,n){for(var i,r,o,s,a,l=0,c=t.offset,h=[],d=0;d<e.length-1;d++)l+=Zt.distancePoints(e[d],e[d+1]),h.push(l);o=c*l;for(var u=0;u<h.length;u++){if(h[u]>=o)return r=Zt.findAngle(e[u],e[u+1]),{point:i=Zt.transform(e[u],r,o-(s||0)),index:a=u};s=h[u]}return{point:i,index:a}}function Ba(e,t){if(e instanceof sa&&e.children)for(var n=0;n<e.children.length;n++)t.nameTable[e.children[n]].children&&Ba(e,t),t.removeFromAQuad(t.nameTable[e.children[n]]),t.removeObjectsFromLayer(t.nameTable[e.children[n]]),delete t.nameTable[e.children[n]]}function Fa(e,t){if(e&&e.children&&e.children.length>0)for(var n=0;n<e.children.length;n++){var i=e.children[n];i instanceof ri&&Fa(i,t)}return-1===t.indexOf(e.id)&&t.push(e.id),t}function za(e,t,n,i){n=function(e,t){var n,i=[],r=new Xc;if(e.getClassName)switch(e.getClassName()){case"Diagram":n=new Xc;break;case"Node":n=new sa(r,"",i);break;case"Path":n=new Rs(r,"",i);break;case"Native":n=new Ls(r,"",i);break;case"Html":n=new _s(r,"",i);break;case"Image":n=new Ns(r,"",i);break;case"Text":n=new Bs(r,"",i);break;case"BasicShape":n=new Fs(r,"",i);break;case"FlowShape":n=new zs(r,"",i);break;case"BpmnShape":n=new Zs(r,"",i);break;case"UmlActivityShape":n=new Ks(r,"",i);break;case"UmlClassifierShape":n=new oa(r,"",i);break;case"SwimLane":n=new ha(r,"",i),e.header&&(n.header=new aa(r,"",i),n.header.style.fill="");break;case"ShapeAnnotation":n=new ni(r,"",i);break;case"PointPort":n=new ai(r,"",i);break;case"BpmnGateway":n=new Hs(r,"",i);break;case"BpmnDataObject":n=new Vs(r,"",i);break;case"BpmnEvent":n=new Ws(r,"",i);break;case"BpmnSubEvent":n=new Gs(r,"",i);break;case"BpmnActivity":n=new Ys(r,"",i);break;case"BpmnAnnotation":n=new Xs(r,"",i);break;case"MethodArguments":n=new Js(r,"",i);break;case"UmlClassAttribute":n=new $s(r,"",i);break;case"UmlClassMethod":n=new ea(r,"",i);break;case"UmlClass":n=new ta(r,"",i);break;case"UmlInterface":n=new na(r,"",i);break;case"UmlEnumerationMember":n=new ia(r,"",i);break;case"UmlEnumeration":n=new ra(r,"",i);break;case"Lane":n=new la(r,"",i);break;case"Phase":n=new ca(r,"",i);break;case"ChildContainer":n=new da;break;case"Connector":n=new uo(r,"",i);break;case"StraightSegment":n=new eo(r,"",i);break;case"BezierSegment":n=new to(r,"",i);break;case"OrthogonalSegment":n=new no(r,"",i);break;case"PathAnnotation":n=new ii(r,"",i);break;case"Stop":n=new Vn(r,"",i);break;case"Point":n=t||new Zt(r,"",i);break;case"UserHandle":n=new po(r,"",i);break;case"Command":n=new xa(r,"",i)}else n=t;return n}(t,n);for(var r=[],o=0,s=r=r.concat(Object.keys(e));o<s.length;o++){var a=s[o];t instanceof sa&&(i="shape"===a),e[a]instanceof Array?Ha(e,n,t,a):e[a]instanceof Object?"wrapper"!==a&&(e[a]=za(e[a],t[a],n[a],i)):(n&&e[a]===n[a]||void 0===e[a])&&(i&&"type"===a||t instanceof ha&&"orientation"===a||delete e[a]),"[]"!==JSON.stringify(e[a])&&"{}"!==JSON.stringify(e[a])&&void 0!==e[a]||delete e[a]}return e}function Ha(e,t,n,i){if(0===e[i].length)delete e[i];else if(e[i].every(function(e){return"number"==typeof e})){var r=void 0,o=!0;for(r=0;r<e[i].length;r++)o=!(!o||e[i][r]!==t[i][r]);o&&delete e[i]}else if(r=void 0,"layers"===i&&(e[i].splice(0,1),0===e[i].length&&delete e[i]),e[i])for(r=e[i].length-1;r>=0;r--)"nodes"!==i&&"connectors"!==i||(e[i][r].wrapper=null),"dataManager"!==i&&(e[i][r]=za(e[i][r],n[i][r],void 0!==t[i]?t[i][r]:void 0),"[]"!==JSON.stringify(e[i][r])&&"{}"!==JSON.stringify(e[i][r])&&void 0!==e[i][r]||e[i].splice(r,1))}function Va(e,t){var n=t.style,i=t;t.canApplyStyle=!0;for(var r=0,o=Object.keys(e);r<o.length;r++)switch(o[r]){case"fill":n.fill=e.fill,n instanceof Qn&&(n.fill="transparent");break;case"textOverflow":n.textOverflow=e.textOverflow;break;case"opacity":n.opacity=e.opacity;break;case"strokeColor":n.strokeColor=e.strokeColor;break;case"strokeDashArray":n.strokeDashArray=e.strokeDashArray;break;case"strokeWidth":n.strokeWidth=e.strokeWidth;break;case"bold":n.bold=e.bold;break;case"color":n.color=e.color;break;case"textWrapping":n.textWrapping=e.textWrapping;break;case"fontFamily":n.fontFamily=e.fontFamily;break;case"fontSize":n.fontSize=e.fontSize;break;case"italic":n.italic=e.italic;break;case"textAlign":n.textAlign=e.textAlign;break;case"whiteSpace":n.whiteSpace=e.whiteSpace;break;case"textDecoration":n.textDecoration=e.textDecoration;break;case"gradient":Ua(e.gradient,n.gradient)}t instanceof Jn&&i.refreshTextElement()}function Ua(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"type":t.type=e.type;break;case"x1":t.x1=e.x1;break;case"x2":t.x2=e.x2;break;case"y1":t.y1=e.y1;break;case"y2":t.y2=e.y2;break;case"cx":t.cx=e.cx;break;case"cy":t.cy=e.cy;break;case"fx":t.fx=e.fx;break;case"fy":t.fy=e.fy;break;case"r":t.r=e.r;break;case"stops":t.stops=e.stops}}function Wa(e,t,n){e.width=t.width,e.height=t.height,e.minHeight=t.minHeight,e.maxHeight=t.maxHeight,e.minWidth=t.minWidth,e.maxWidth=t.maxWidth,e.horizontalAlignment=t.wrapper.children[0].horizontalAlignment,e.verticalAlignment=t.wrapper.children[0].verticalAlignment,e.relativeMode=t.wrapper.children[0].relativeMode,e.visible=t.wrapper.children[0].visible,t.shape instanceof Bs&&(e.margin=t.shape.margin),e.id=t.wrapper.children[0].id,e.style=t.style;for(var i=0,r=n.views;i<r.length;i++){var o=r[i];Ll(t.id+"_groupElement",o),Ll(t.id+"_content_groupElement",o),Ll(t.id+"_content_html_element",o)}t.wrapper.children.splice(0,1),t.wrapper.children.splice(0,0,e)}function Ga(e){var t=new ri;t.style.fill="transparent";var n="M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",i=new Zn;i.data=n,i.id=e.id+"_0_finalNode",i.horizontalAlignment="Center",i.verticalAlignment="Center",i.relativeMode="Object",i.style.strokeColor=e.style.strokeColor,i.style.strokeWidth=e.style.strokeWidth;var r=new Zn;return r.data=n,r.id=e.id+"_1_finalNode",r.horizontalAlignment="Center",r.verticalAlignment="Center",r.relativeMode="Object",r.style.fill=e.style.fill,r.style.strokeColor=e.style.strokeColor,r.style.strokeWidth=e.style.strokeWidth,t.children=[i,r],t.children[0].width=e.width,t.children[0].height=e.height,t.children[1].height=e.height/1.5,t.children[1].width=e.width/1.5,t.style.strokeWidth=0,t.style.strokeColor="transparent",t}function qa(e){Ll(e+"_linear"),Ll(e+"_radial")}function Qa(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function Ya(e,t){var n,i;if(e.intermediatePoints=t,e.updateSegmentElement(e,t,e.wrapper.children[0]),i=e.sourceDecorator,"Bezier"===e.type){var r=e.segments[0],o=e.segments[e.segments.length-1];n=[Zt.isEmptyPoint(o.point2)?o.bezierPoint2:o.point2,Zt.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1]}else n=e.intermediatePoints;t=e.clipDecorators(e,t);var s=e.wrapper.children[0];s.canMeasurePath=!0,e.updateDecoratorElement(s=e.wrapper.children[1],t[0],n[1],i),e.updateDecoratorElement(s=e.wrapper.children[2],t[t.length-1],n[n.length-2],e.targetDecorator),e.updateShapeElement(e)}function Xa(e,t,n){var i,r=e.wrapper,o=r.bounds,s=t.offset,a=t.size/n.scale,l=t.margin,c=r.offsetX-r.actualSize.width*r.pivot.x,h=r.offsetY-r.actualSize.height*r.pivot.y;if(i={x:0,y:0},e.nodes.length>0){switch(t.side){case"Top":i.x+=c+o.width*s,i.y+=h-a;break;case"Bottom":i.x+=c+s*o.width,i.y+=h+r.actualSize.height+a;break;case"Left":i.x+=c-a,i.y+=h+s*o.height;break;case"Right":i.x+=c+r.actualSize.width+a,i.y+=h+s*o.height}i.x+=(l.left-l.right)/n.scale+a/2*("Center"===t.horizontalAlignment?0:"Right"===t.horizontalAlignment?-1:1),i.y+=(l.top-l.bottom)/n.scale+a/2*("Center"===t.verticalAlignment?0:"Top"===t.verticalAlignment?-1:1)}else if(e.connectors.length>0){var d=e.connectors[0],u={offset:s},p=Na(d.intermediatePoints,u),f=p.index;i=p.point;var g,m=_a(d.intermediatePoints,u).angle;un(g=hn(),-m,d.intermediatePoints[f].x,d.intermediatePoints[f].y),(i=dn(g,i)).x+=l.left-l.right+a/2*("Center"===t.horizontalAlignment?0:"Right"===t.horizontalAlignment?-1:1),i.y+=l.top-l.bottom+a/2*("Center"===t.verticalAlignment?0:"Top"===t.verticalAlignment?-1:1),un(g=hn(),m,d.intermediatePoints[f].x,d.intermediatePoints[f].y),i=dn(g,i)}return 0===r.rotateAngle&&0===r.parentTransform||(un(g=hn(),r.rotateAngle+r.parentTransform,r.offsetX,r.offsetY),i=dn(g,i)),i}function Za(e,t,n,i){if(i.annotation){if(Eo(i.annotation))return!0}else if(wn[t]&e&&On[t]&n)return!0;return!1}function Ka(e,t){return!!(wn[t]&e)}function Ja(e,t){return e.visibility&t}function $a(e,t){var n;if("Text"===e.shape.type)n=e.shape;else{var i=t.split("_");t=i[i.length-1];for(var r=0;r<e.annotations.length;r++)t===e.annotations[r].id&&(n=e.annotations[r])}return n}function el(e,t){var n=t.split("_");t=n[n.length-1];for(var i=0;i<e.ports.length;i++)if(t===e.ports[i].id)return e.ports[i]}function tl(e,t){var n={},i=0;if(e.ports){var r=e.ports;for(i=0;i<r.length;i++)t?r[i].constraints&_n.InConnect&&(n=r[i]):r[i].constraints&_n.OutConnect&&(n=r[i])}return n}function nl(e,t,n){for(var i=n?e.annotations:e.ports,r=0;r<i.length;r++)if(i[r].id===t)return r.toString();return null}function il(e,t){var n;for(n=0;n<e.length;n++)if(t===e[n].id)return!0;return!1}function rl(e,t,n,i,r,o){for(var s,a=e.children,l=0;l<a.length;l++)if(s=i[a[l]])if(s.children)rl(s,t,n,i,r,o);else if(s.offsetX-=t,s.offsetY-=n,!r){var c,h=void 0;i[s.id]=s,(h=s.initContainer()).children||(h.children=[]),c=s.init(o),h.children.push(c),h.measure(new Xt(s.width,s.height)),h.arrange(h.desiredSize)}}function ol(e,t,n){if(0===n.length)n.push(e);else if(1===n.length)n[0][t]>e[t]?n.splice(0,0,e):n.push(e);else if(n.length>1){for(var i=0,r=n.length-1,o=Math.floor((i+r)/2);o!==i;)n[o][t]<e[t]?(i=o,o=Math.floor((i+r)/2)):n[o][t]>e[t]&&(r=o,o=Math.floor((i+r)/2));n[r][t]<e[t]?n.push(e):n[i][t]>e[t]?n.splice(i,0,e):n[i][t]<e[t]&&n[r][t]>e[t]&&n.splice(r,0,e)}}function sl(e,t){var n,i=e.annotations;for(n=0;i&&n<i.length;n++)if(t.annotationId&&i[n].id===t.annotationId)return i[n];return e}var al=function(e){return e&&(e=void 0!==e.sourceID||void 0!==e.sourcePoint||void 0!==e.targetID||void 0!==e.targetPoint||void 0!==e.type?uo:sa),e},ll=function(e){if(!e.sourceID&&!e.targetID){var t={x:e.sourcePoint.x,y:e.sourcePoint.y},n={x:e.targetPoint.x,y:e.targetPoint.y};"Horizontal"===e.flip?(e.sourcePoint.x=n.x,e.targetPoint.x=t.x):"Vertical"===e.flip?(e.sourcePoint.y=n.y,e.targetPoint.y=t.y):"Both"===e.flip&&(e.sourcePoint=n,e.targetPoint=t)}},cl=function(e,t,n){var i=n.offset.x,r=n.offset.y;return"Horizontal"===t?(i=1-n.offset.x,r=n.offset.y):"Vertical"===t?(i=n.offset.x,r=1-n.offset.y):"Both"===t&&(i=1-n.offset.x,r=1-n.offset.y),e.setOffsetWithRespectToBounds(i,r,"Fraction"),e},hl=function(e,t,n,i,r){if(e.hasChildren())for(var o=0,s=e.children;o<s.length;o++){var a=s[o],l=t-a.offsetX+t,c=n-a.offsetY+n;"Horizontal"!==r&&"Both"!==r||(a.offsetX=l,a.flipOffset.x=l-a.desiredSize.width/2),"Vertical"!==r&&"Both"!==r||(a.offsetY=c,a.flipOffset.y=c-a.desiredSize.height/2),(a instanceof ri||a instanceof Xn)&&hl(a,t,n,i,r),a.measure(new Xt(a.bounds.width,a.bounds.height)),a.arrange(a.desiredSize);var h=i.nameTable[a.id];h&&i.updateConnectorEdges(h)}},dl=function(e,t){for(var n,i=new Zn,r=0;r<e.length-1;r++)n=ul(e[r],e[r+1]),i.data=n[0],i.id=t.id+"_"+t.shape.sequence,i.offsetX=n[1].x,i.offsetY=n[1].y,i.rotateAngle=45,i.transform=Dn.Self;return i},ul=function(e,t){var n={x:e.x,y:e.y},i=pl(e,t);i=Math.min(30,i/2);var r=Dr(e,t),o=Zt.transform({x:n.x,y:n.y},r,i),s=Zt.transform({x:o.x,y:o.y},r,-12),a=Zt.transform({x:s.x,y:s.y},r,24);return["M"+s.x+" "+s.y+" L"+a.x+" "+a.y,o]},pl=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function fl(e){var t,n=[];if("msie"===re.info.name||"edge"===re.info.name)for(var i=0;i<e.childNodes.length;i++)1===(t=e.childNodes[i]).nodeType&&n.push(t);else n=e.children;return n}function gl(e){if(e){window.measureElement.style.visibility="visible";var t=fl(window.measureElement.children[2])[0];t.setAttribute("d",e);var n=t.getBBox(),i=new an(n.x,n.y,n.width,n.height);return window.measureElement.style.visibility="hidden",i}return new an(0,0,0,0)}function ml(e,t,n,i,r){var o=new Xt,s=Pl("span",{style:"display:inline-block; line-height: normal"});return e.bold&&(s.style.fontWeight="bold"),e.italic&&(s.style.fontStyle="italic"),void 0!==n&&(s.style.width=n.toString()+"px"),void 0!==i&&(s.style.height=i.toString()+"px"),void 0!==r&&(s.style.maxWidth=r.toString()+"px"),s.style.fontFamily=e.fontFamily,s.style.fontSize=e.fontSize+"px",s.style.color=e.color,s.textContent=t,s.style.whiteSpace=Jl(e.whiteSpace,e.textWrapping),s.style.wordBreak=void 0!==r?"break-word":Yl(e.textWrapping),document.body.appendChild(s),o.width=s.offsetWidth,o.height=s.offsetHeight,document.body.removeChild(s),o}function yl(e,t,n,i){var r,o,s=0,a=0,l=!1;return 0===(r=t).x&&0===r.y||(s=0-Number(r.x),a=0-Number(r.y)),(e.actualSize.width!==r.width||e.actualSize.height!==r.height||i)&&(s=(i&&i.width||e.actualSize.width)/Number(r.width?r.width:1),a=(i&&i.height||e.actualSize.height)/Number(r.height?r.height:1),l=!0),o=en(rn(Kt(e.data)),s,a,l,r.x,r.y,0,0),l=!1,o}function vl(e){return bl(e).getElementsByClassName("e-diagram-layer")[0]}function bl(e,t){var n;return t&&(n=document.getElementById(t)),n?n.querySelector("#"+e):document.getElementById(e)}function wl(e,t,n){var i,r,o,s=void 0,a="";"native"===n?(i=Dl(e),a="_content_groupElement"):"html"===n?(i=kl(e).childNodes[0],a="_content_html_element"):(i=vl(r=e).getElementById(r+"_diagramLayer"),a="_groupElement");for(var l=0;i.childNodes&&l<i.childNodes.length;l++)if((o=i.childNodes[l])&&o.id===t+a){s=l;break}return s}function Cl(e){return bl(e).getElementsByClassName("e-adorner-layer")[0]}function xl(e){return Cl(e).getElementById(e+"_SelectorElement")}function Al(e){return Cl(e).getElementById(e+"_diagramAdorner")}function Sl(e){return bl(e).getElementsByClassName("e-native-layer")[0]}function Ol(e){return bl(e).getElementsByClassName("e-grid-layer")[0]}function El(e){return bl(e).getElementsByClassName("e-background-layer")[0].parentNode}function Il(e){return bl(e).getElementsByClassName("e-background-layer")[0]}function Dl(e){return Sl(e).getElementById(e+"_nativeLayer")}function kl(e){return bl(e).getElementsByClassName("e-html-layer")[0]}function Pl(e,t){var n=k(e);return Bl(n,t),n}function Tl(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);return Nl(n,t),n}function Ml(e,t,n){for(var i=e;i&&(n?i.id!==t:!jl(i,t));)i=i.parentNode;return i}function jl(e,t){return(" "+("object"==typeof e.className?e.className.animVal:e.className)+" ").indexOf(" "+t+" ")>-1}function Rl(e,t,n){e=[];for(var i=0,r=n.length;i<r;i++)e.push({pageX:n[i].clientX,pageY:n[i].clientY,pointerId:null});return e}function Ll(e,t){var n=bl(e,t);n&&n.parentNode.removeChild(n)}function _l(e,t){var n;n=t?Pl("div",{style:"height: 100%; width: 100%"}):document.createElementNS("http://www.w3.org/2000/svg","g");var i=function(e){var t=document.getElementById(e.diagramId),n="ej2_instances",i=t[n][0].nodes;void 0===i&&(i=function(e){for(var t=[],n=0;n<e.palettes.length;n++)for(var i=e.palettes[n].symbols,r=0;r<i.length;r++)i[r]instanceof sa&&t.push(i[r]);return t}(t[n][0]));for(var r=0;i&&r<i.length;r++)if(i[r].id===e.nodeId)return sl(i[r],e);var o=t[n][0].connectors;for(r=0;o&&r<o.length;r++)if(o[r].id===e.nodeId)return sl(o[r],e);var s=t[n][0].enterObject;return s&&(s.id===e.nodeId||s.children)?s.children&&ka(s,"HTML",t[n][0].enterTable)?t[n][0].enterTable[e.nodeId]:s:null}(e);if("string"==typeof e.content)for(var r=0,o=_t(e.content)(i);r<o.length;r++)n.appendChild(o[r]);else n.appendChild(e.content);return n.cloneNode(!0)}function Nl(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++)e.setAttribute(n[i],t[n[i]])}function Bl(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++)e.setAttribute(n[i],t[n[i]])}function Fl(){if(window.measureElement)window.measureElement.usageCount+=1;else{var e,t=Pl("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),n=Pl("span",{style:"display:inline-block ; line-height: normal"});t.appendChild(n),e=Pl("img",{}),t.appendChild(e);var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xlink","http://www.w3.org/1999/xlink"),t.appendChild(i);var r=document.createElementNS("http://www.w3.org/2000/svg","path");i.appendChild(r),document.createTextNode("");var o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.appendChild(o),window.measureElement=t,window.measureElement.usageCount=1,document.body.appendChild(t)}}function zl(){for(var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="",i=0;i<5;i++){if("crypto"in window&&"getRandomValues"in crypto){var r=new Uint16Array(1);e=(window.msCrypto||window.crypto).getRandomValues(r)[0]%(t.length-1)}else e=Math.floor(Math.random()*t.length);0===i&&e<10?i--:n+=t.substring(e,e+1)}return n}function Hl(e){new an;var t=e.offsetY-e.actualSize.height*e.pivot.y,n=e.offsetY+e.actualSize.height*(1-e.pivot.y),i=e.offsetX-e.actualSize.width*e.pivot.x,r=e.offsetX+e.actualSize.width*(1-e.pivot.x);return an.toBounds([{x:i,y:t},{x:r,y:t},{x:i,y:n},{x:r,y:n}])}function Vl(e){var t,n=new an,i=(t=Hl(e)).middleLeft,r=t.topCenter,o=t.bottomCenter,s=t.middleRight,a=t.topLeft,l=t.topRight,c=t.bottomLeft,h=t.bottomRight;if(e.corners={topLeft:a,topCenter:r,topRight:l,middleLeft:i,middleRight:s,bottomLeft:c,bottomCenter:o,bottomRight:h},0!==e.rotateAngle||0!==e.parentTransform){var d=hn();un(d,e.rotateAngle+e.parentTransform,e.offsetX,e.offsetY),e.corners.topLeft=a=dn(d,a),e.corners.topCenter=r=dn(d,r),e.corners.topRight=l=dn(d,l),e.corners.middleLeft=i=dn(d,i),e.corners.middleRight=s=dn(d,s),e.corners.bottomLeft=c=dn(d,c),e.corners.bottomCenter=o=dn(d,o),e.corners.bottomRight=h=dn(d,h)}return n=an.toBounds([a,l,c,h]),e.corners.left=n.left,e.corners.right=n.right,e.corners.top=n.top,e.corners.bottom=n.bottom,e.corners.center=n.center,e.corners.width=n.width,e.corners.height=n.height,n}function Ul(e,t,n){var i={},r="properties";if(e){n=e.propName;var o=[],s=[];if((o=o.concat(Object.keys(e[r]||e))).push("version"),n){var a=tc(t);s=a?a(n):[],o=o.concat(s)}for(var l=function(e){switch(n){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":case"annotations":return["nodeId"];case"shape":return["hasHeader"]}return[]}(),c=0,h=o=o.concat(l);c<h.length;c++){var d=h[c];"historyManager"!==d&&("wrapper"!==d?e[d]&&e.hasOwnProperty("observers")||(i[d]=e[d]instanceof Array?Wl(-1===l.indexOf(d)&&e[r]?e[r][d]:e[d],t,d):e[d]instanceof Array==0&&e[d]instanceof HTMLElement?e[d].cloneNode(!0).innerHtml:e[d]instanceof Array==0&&e[d]instanceof Object?Ul(-1===l.indexOf(d)&&e[r]?e[r][d]:e[d]):e[d]):e[d]&&(i[d]={actualSize:{width:e[d].actualSize.width,height:e[d].actualSize.height},offsetX:e[d].offsetX,offsetY:e[d].offsetY}))}}return i}function Wl(e,t,n){var i;if(e){i=[];for(var r=0;r<e.length;r++)e[r]instanceof Array?i.push(e[r]):e[r]instanceof Object?i.push(Ul(e[r],t,n)):i.push(e[r])}return i}function Gl(e,t){if(e){t||(t={properties:{}});for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];if(e[r]instanceof Array){var o=ql(e[r],t.properties[r]);t.properties[r]&&t.properties[r].length||(t[r]=o)}else if(e[r]instanceof Array==0&&e[r]instanceof HTMLElement)t[r]=e[r].cloneNode(!0).innerHtml;else if(e[r]instanceof Array==0&&e[r]instanceof Object){var s=Gl(e[r],t.properties[r]);s.properties&&!Object.keys(s.properties).length&&delete s.properties,t[r]=s}else t[r]=void 0!==t.properties[r]?t[r]:e[r]}}return t}function ql(e,t){var n=[],i=!1;t||(t=[]),t.length||(i=!0);for(var r=0;r<e.length;r++)if(e[r]instanceof Array)ql(e[r],t[r]),i&&n.push(ql);else if(e[r]instanceof Object){var o=Gl(e[r],t[r]);i&&n.push(o)}else n.push(e[r]);return n}function Ql(e){var t="";switch(e){case"Center":t="center";break;case"Left":t="left";break;case"Right":t="right"}return t}function Yl(e){var t="";switch(e){case"Wrap":t="breakall";break;case"NoWrap":t="keepall";break;case"WrapWithOverflow":t="normal";break;case"LineThrough":t="line-through"}return t}function Xl(e,t){window.measureElement.style.visibility="visible";var n=fl(window.measureElement.children[2])[1];n.textContent=e,n.setAttribute("style","font-size:"+t.fontSize+"px; font-family:"+t.fontFamily+";font-weight:"+(t.bold?"bold":"normal"));var i=n.getBBox().width;return window.measureElement.style.visibility="hidden",i}function Zl(e,t){return(e+t)/2}function Kl(e,t){var n,i=0,r=0,o=0,s="";n=e.length;var a=0;do{o>0&&(i=r),r=Math.floor(Zl(i,n)),o=Xl(s+=e.substr(i,r),t)}while(o<=t.width);for(s=s.substr(0,i),a=i;a<n;a++)if((o=Xl(s+=e[a],t))>=t.width){e=e.substr(0,s.length-1);break}return"Ellipsis"===t.textOverflow?(e=e.substr(0,e.length-3),e+="..."):e=e.substr(0,e.length),e}function Jl(e,t){if("NoWrap"===t&&"PreserveAll"===e)return"pre";var n="";switch(e){case"CollapseAll":n="nowrap";break;case"CollapseSpace":n="pre-line";break;case"PreserveAll":n="pre-wrap"}return n}function $l(e,t){var n=hn();un(n,t,0,0);var i=dn(n,{x:0,y:0}),r=dn(n,{x:e.width,y:0}),o=dn(n,{x:0,y:e.height}),s=dn(n,{x:e.width,y:e.height}),a=Math.min(i.x,r.x,o.x,s.x),l=Math.min(i.y,r.y,o.y,s.y),c=Math.max(i.x,r.x,o.x,s.x),h=Math.max(i.y,r.y,o.y,s.y);return new Xt(c-a,h-l)}function ec(e,t,n,i){if(0!==e){var r=hn();return un(r,e,t,n),dn(r,i)}return i}function tc(e){return void 0!==e&&"string"==typeof e&&(e=h(e,window)),e}var nc=function(){function e(){}return e.getContext=function(e){return e.getContext("2d")},e.setCanvasSize=function(e,t,n){e&&(e.setAttribute("width",t.toString()),e.setAttribute("height",n.toString()))},e.prototype.renderGradient=function(e,t,n,i){var r,o,s;if("None"!==e.gradient.type){for(var a=0;a<e.gradient.stops.length;a++)r=void 0!==r?e.gradient.stops[a].offset:Math.max(r,e.gradient.stops[a].offset),o=void 0!==o?e.gradient.stops[a].offset:Math.min(o,e.gradient.stops[a].offset);if("Linear"===e.gradient.type){var l=e.gradient;s=t.createLinearGradient(n+l.x1,i+l.y1,n+l.x2,i+l.y2)}else{var c=e.gradient;s=t.createRadialGradient(n+c.fx,i+c.fy,0,n+c.cx,i+c.cy,c.r)}for(a=0;a<e.gradient.stops.length;a++){var h=e.gradient.stops[a];s.addColorStop(o<0?(r+h.offset)/(2*r):h.offset/r,h.color)}t.fillStyle=s}return t},e.prototype.renderShadow=function(t,n,i){void 0===i&&(i=null);var r=e.getContext(n);r.save(),r.beginPath(),r.strokeStyle=r.fillStyle=t.shadow.color,r.globalAlpha=t.shadow.opacity;var o=Zt.transform({x:0,y:0},t.shadow.angle,t.shadow.distance),s=t.x+o.x,a=t.y+o.y;this.rotateContext(n,t.angle,s+t.width*t.pivotX,a+t.height*t.pivotY),i?(r.translate(s,a),this.renderPath(n,t,i),r.translate(-s,-a)):(r.rect(s,a,t.width,t.height),r.fillRect(s,a,t.width,t.height)),r.fill(),r.stroke(),r.closePath(),r.restore()},e.createCanvas=function(e,t,n){var i=Pl("canvas",{id:e});return this.setCanvasSize(i,t,n),i},e.prototype.setStyle=function(t,n){var i=e.getContext(t);"none"===n.fill&&(n.fill="transparent"),"none"===n.stroke&&(n.stroke="transparent"),i.strokeStyle=n.stroke,i.lineWidth=n.strokeWidth,0===n.strokeWidth&&(i.strokeStyle="transparent"),i.globalAlpha=n.opacity;var r=[];n.dashArray&&(r=this.parseDashArray(n.dashArray)),i.setLineDash(r),n.gradient&&"None"!==n.gradient.type?this.renderGradient(n,i,0,0):i.fillStyle=n.fill},e.prototype.rotateContext=function(t,n,i,r){var o=e.getContext(t);o.translate(i,r),o.rotate(n*Math.PI/180),o.translate(-i,-r)},e.prototype.setFontStyle=function(t,n){var i=e.getContext(t),r="";n.italic&&(r+="italic "),n.bold&&(r+="bold "),r+=n.fontSize+"px ",i.font=r+=n.fontFamily},e.prototype.parseDashArray=function(e){for(var t=[],n=-1!==e.indexOf(" ")?" ":",",i=0,r=e.split(n);i<r.length;i++)t.push(Number(r[i]));return t},e.prototype.drawRectangle=function(t,n){if(!0===n.visible)if(n.cornerRadius)n.data=function(e,t,n){var i,r,o,s="",a=[{x:0+e,y:0},{x:0+n-e,y:0},{x:0+n,y:0+e},{x:0+n,y:0+t-e},{x:0+n-e,y:0+t},{x:0+e,y:0+t},{x:0,y:0+t-e},{x:0,y:0+e}],l=[{x:0+n,y:0},{x:0+n,y:0+t},{x:0,y:0+t},{x:0,y:0}],c=0;for(s="M"+a[0].x+" "+a[0].y,o=0;o<a.length;o+=2)s+="L"+(i=a[o+1]).x+" "+i.y,s+="Q"+l[c].x+" "+l[c].y+" "+(r=a[o+2]||a[0]).x+" "+r.y,c++;return s}(n.cornerRadius,n.height,n.width),this.drawPath(t,n);else{var i=e.getContext(t);n.shadow&&this.renderShadow(n,t),i.save(),i.beginPath(),this.rotateContext(t,n.angle,n.x+n.width*n.pivotX,n.y+n.height*n.pivotY),this.setStyle(t,n),i.rect(n.x,n.y,n.width,n.height),i.fillRect(n.x,n.y,n.width,n.height),i.fill(),i.stroke(),i.closePath(),i.restore()}},e.prototype.drawPath=function(t,n){var i=[];i=$t(i=Kt(n.data)),n.shadow&&this.renderShadow(n,t,i);var r=e.getContext(t);r.save(),r.beginPath();var o=n.y+n.height*n.pivotY,s=n.x+n.width*n.pivotX;"Horizontal"===n.flip||"Vertical"===n.flip?(r.translate(n.x+n.width/2,n.y+n.height/2),r.rotate(-n.angle*Math.PI/180),r.translate(-n.x-n.width/2,-n.y-n.height/2)):this.rotateContext(t,n.angle,s,o),this.setStyle(t,n),r.translate(n.x,n.y),"Horizontal"===n.flip?(r.scale(-1,1),r.translate(-1*n.width,0)):"Vertical"===n.flip?(r.scale(1,-1),r.translate(0,-1*n.height)):"Both"===n.flip&&(r.scale(-1,-1),r.translate(-1*n.width,-1*n.height)),this.renderPath(t,n,i),r.fill(),r.translate(-n.x,-n.y),r.stroke(),r.restore()},e.prototype.renderPath=function(t,n,i){if(!0===n.visible){var r,o=e.getContext(t),s=void 0,a=void 0,l=void 0,c=void 0,h=void 0,d=void 0,u=void 0,p=void 0,f=void 0,g=i;for(u=0,p=0,f=0,r=g.length;f<r;++f){var m=g[f];switch("x1"in m&&(l=m.x1),"x2"in m&&(h=m.x2),"y1"in m&&(c=m.y1),"y2"in m&&(d=m.y2),"x"in m&&(u=m.x),"y"in m&&(p=m.y),m.command){case"M":o.moveTo(u,p),m.x=u,m.y=p;break;case"L":o.lineTo(u,p),m.x=u,m.y=p;break;case"C":o.bezierCurveTo(l,c,h,d,u,p),m.x=u,m.y=p,m.x1=l,m.y1=c,m.x2=h,m.y2=d;break;case"Q":o.quadraticCurveTo(l,c,u,p),m.x=u,m.y=p,m.x1=l,m.y1=c;break;case"A":var y={x:s,y:a},v=m.r1,b=m.r2,w=m.angle*(Math.PI/180),C=m.largeArc,x=m.sweep,A={x:u,y:p},S={x:Math.cos(w)*(y.x-A.x)/2+Math.sin(w)*(y.y-A.y)/2,y:-Math.sin(w)*(y.x-A.x)/2+Math.cos(w)*(y.y-A.y)/2},O=Math.pow(S.x,2)/Math.pow(v,2)+Math.pow(S.y,2)/Math.pow(b,2);O>1&&(v*=Math.sqrt(O),b*=Math.sqrt(O));var E=Math.pow(b,2)*Math.pow(S.x,2),I=(C===x?-1:1)*Math.sqrt((Math.pow(v,2)*Math.pow(b,2)-Math.pow(v,2)*Math.pow(S.y,2)-E)/(Math.pow(v,2)*Math.pow(S.y,2)+Math.pow(b,2)*Math.pow(S.x,2)));isNaN(I)&&(I=0);var D={x:I*v*S.y/b,y:I*-b*S.x/v},k={x:(y.x+A.x)/2+Math.cos(w)*D.x-Math.sin(w)*D.y,y:(y.y+A.y)/2+Math.sin(w)*D.x+Math.cos(w)*D.y},P=this.a([1,0],[(S.x-D.x)/v,(S.y-D.y)/b]),T=[(S.x-D.x)/v,(S.y-D.y)/b],M=[(-S.x-D.x)/v,(-S.y-D.y)/b],j=this.a(T,M);this.r(T,M)<=-1&&(j=Math.PI),this.r(T,M)>=1&&(j=0);var R=P+j/2*(x?1:-1);if(Math.cos(R),Math.sin(R),m.centp=k,m.xAxisRotation=w,m.rx=v,m.ry=b,m.a1=P,m.ad=j,m.sweep=x,null!=o){var L=v>b?v:b,_=v>b?1:v/b,N=v>b?b/v:1;o.save(),o.translate(k.x,k.y),o.rotate(w),o.scale(_,N),o.arc(0,0,L,P,P+j,!x),o.scale(1/_,1/N),o.rotate(-w),o.translate(-k.x,-k.y),o.restore()}break;case"Z":case"z":o.closePath(),u=s,p=a}s=u,a=p}}},e.prototype.drawText=function(t,n,i,r,o,s){if(n.content&&!0===n.visible){var a=e.getContext(t);a.save(),this.setStyle(t,n),s&&(n.fontSize*=s),this.rotateContext(t,n.angle,n.x+n.width*n.pivotX,n.y+n.height*n.pivotY),this.setFontStyle(t,n);var l,c=0;l=n.childNodes;var h=n.wrapBounds;if(a.fillStyle=n.color,h){var d=this.labelAlign(n,h,l);for(c=0;c<l.length;c++){var u=l[c],p=d.x+(s?u.x*s:u.x)-h.x,f=d.y+(s?u.dy*s:u.dy)*c+.8*n.fontSize;if(h.width>n.width&&"Wrap"!==n.textOverflow&&(u.text=Kl(u.text,n)),a.fillText(u.text,p,f),"Underline"===n.textDecoration||"Overline"===n.textDecoration||"LineThrough"===n.textDecoration){var g=p,m=void 0,y=p+a.measureText(u.text).width,v=void 0;switch(n.textDecoration){case"Underline":m=f+2,v=f+2;break;case"Overline":m=d.y+u.dy*c,v=d.y+u.dy*c;break;case"LineThrough":m=(f+d.y+u.dy*c)/2+2,v=(f+d.y+u.dy*c)/2+2}a.beginPath(),a.moveTo(g,m),a.lineTo(y,v),a.strokeStyle=n.color,a.lineWidth=.08*n.fontSize,a.globalAlpha=n.opacity,a.stroke()}}}a.restore()}},e.prototype.loadImage=function(e,t,n,i,r){this.rotateContext(n,t.angle,i,r);var o=new Image;o.src=t.source,this.image(e,o,t.x,t.y,t.width,t.height,t)},e.prototype.drawImage=function(t,n,i,r){var o=this;if(n.visible){var s=e.getContext(t);s.save();var a=n.x+n.width*n.pivotX,l=n.y+n.height*n.pivotY,c=new Image;c.src=n.source,s.canvas.id.split("_"),r?c.onload=function(){o.loadImage(s,n,t,a,l)}:this.loadImage(s,n,t,a,l),s.restore()}},e.prototype.image=function(e,t,n,i,r,o,s){e.beginPath();var a=t.width,l=t.height,c=r,h=o,d=0,u=0;if(s&&"None"!==s.alignment){var p=s.alignment.toLowerCase().substr(1,3),f=s.alignment.toLowerCase().substr(5,3);if("Slice"===s.scale){var g=function(){d=c,u=l*c/a},m=function(){d=a*h/l,u=h};c>h?(g(),h>u&&m()):c===h?a>l?m():g():(m(),c>d&&g());var y=this.getSliceOffset(p,d,c,a),v=this.getSliceOffset(f,u,h,l),b=a-y,w=l-v,C=d-y*(d/a),x=u-v*(u/l),A=Pl("canvas",{width:r.toString(),height:o.toString()});A.getContext("2d").drawImage(t,y,v,b,w,0,0,C,x),e.drawImage(A,n,i,r,o)}else if("Meet"===s.scale){var S=l/a,O=h/c;u=O>S?c*S:h,n+=this.getMeetOffset(p,d=O>S?c:h/S,c),i+=this.getMeetOffset(f,u,h),e.drawImage(t,0,0,a,l,n,i,d,u)}else e.drawImage(t,n,i,r,o)}else if("None"!==s.flip){var E=1,I=1;"Horizontal"!==s.flip&&"Both"!==s.flip||(n=-n,r=-r,E=-1),"Vertical"!==s.flip&&"Both"!==s.flip||(i=-i,o=-o,I=-1),e.scale(E,I),e.drawImage(t,n,i,r,o)}else e.drawImage(t,n,i,r,o);e.closePath()},e.prototype.getSliceOffset=function(e,t,n,i){switch(e){case"min":return 0;case"mid":return(t-n)/2*i/t;case"max":return(t-n)*i/t;default:return 0}},e.prototype.getMeetOffset=function(e,t,n){var i=Math.max(t,n),r=Math.min(t,n);switch(e){case"min":return 0;case"mid":return(i-r)/2;case"max":return i-r;default:return 0}},e.prototype.m=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},e.prototype.r=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(this.m(e)*this.m(t))},e.prototype.a=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(this.r(e,t))},e.prototype.labelAlign=function(e,t,n){var i=new Xt(t.width,n.length*(1.2*e.fontSize)),r={x:0,y:0},o=e.y,s=.5*e.width,a=.5*e.height;return"left"===e.textAlign?s=0:"center"===e.textAlign?s=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:.5*e.width:"right"===e.textAlign&&(s=1*e.width),r.x=e.x+s+(t?t.x:0),r.y=o+a-i.height/2,r},e}(),ic=function(){function e(){}return e.prototype.renderShadow=function(e,t,n,i){void 0===n&&(n=null);var r,o=Zt.transform({x:0,y:0},e.shadow.angle,e.shadow.distance);i&&(r=i.getElementById(t.id+"_shadow")),r||(r=document.createElementNS("http://www.w3.org/2000/svg",n?"path":"rect"),t.appendChild(r));var s={id:t.id+"_shadow",fill:e.shadow.color,stroke:e.shadow.color,opacity:e.shadow.opacity.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")translate("+(e.x+o.x)+","+(e.y+o.y)+")"};if(i){var a=i.getElementById(t.id);a&&a.insertBefore(r,a.firstChild)}Nl(r,s),n?n&&this.renderPath(r,e,n):Nl(r,{width:e.width,height:e.height})},e.prototype.parseDashArray=function(e){return[]},e.prototype.drawRectangle=function(e,t,n,i,r,o,s){var a,l,c;t.shadow&&!i&&this.renderShadow(t,e,void 0,o),a=t.id===e.id?t.id+"_container":t.id,o&&(l=o.getElementById(a)),l&&!r||(l=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(l)),o&&!t.shadow&&(c=o.getElementById(t.id+"_groupElement_shadow"))&&c.parentNode.removeChild(c);var h={id:a,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),visibility:t.visible?"visible":"hidden",transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",rx:t.cornerRadius||0,ry:t.cornerRadius||0,opacity:t.opacity,"aria-label":s||""};t.class&&(h.class=t.class),s||(h["pointer-events"]="none"),Nl(l,h),this.setSvgStyle(l,t,n)},e.prototype.updateSelectionRegion=function(e,t){var n,i;n=e.parentNode.getElementById(t.id),i={id:t.id,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",class:"e-diagram-selected-region"},n||(n=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(n)),this.setSvgStyle(n,t),Nl(n,i)},e.prototype.createGElement=function(e,t){return Tl(e,t)},e.prototype.drawLine=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","line");this.setSvgStyle(n,t);var i=t.x+t.width*t.pivotX,r=t.y+t.height*t.pivotY,o={id:t.id,x1:t.startPoint.x+t.x,y1:t.startPoint.y+t.y,x2:t.endPoint.x+t.x,y2:t.endPoint.y+t.y,stroke:t.stroke,"stroke-width":t.strokeWidth.toString(),opacity:t.opacity.toString(),transform:"rotate("+t.angle+" "+i+" "+r+")",visibility:t.visible?"visible":"hidden"};t.class&&(o.class=t.class),Nl(n,o),e.appendChild(n)},e.prototype.drawCircle=function(e,t,n,i){var r=document.createElementNS("http://www.w3.org/2000/svg","circle");this.setSvgStyle(r,t);var o=t.class||"";n||(o+=" e-disabled");var s={id:t.id,cx:t.centerX,cy:t.centerY,r:t.radius,visibility:t.visible?"visible":"hidden",class:o,"aria-label":i?i["aria-label"]:""};r.style.display=t.visible?"block":"none",Nl(r,s),e.appendChild(r)},e.prototype.drawPath=function(e,t,n,i,r,o){Math.floor(10*Math.random()+1).toString();var s,a,l=[];l=$t(l=Kt(t.data)),t.shadow&&this.renderShadow(t,e,l,r),r&&!t.shadow&&(s=r.getElementById(t.id+"_groupElement_shadow"))&&s.parentNode.removeChild(s),r&&(a=r.getElementById(t.id)),a&&!i||(a=document.createElementNS("http://www.w3.org/2000/svg","path"),e.appendChild(a)),this.renderPath(a,t,l);var c={id:t.id,transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")translate("+t.x+","+t.y+")",visibility:t.visible?"visible":"hidden",opacity:t.opacity,"aria-label":o||""};t.class&&(c.class=t.class),Nl(a,c),this.setSvgStyle(a,t,n)},e.prototype.renderPath=function(e,t,n){var i,r,o,s,a,l,c,h,d=n,u="";for(a=0,l=0,h=0,c=d.length;h<c;++h){var p=d[h];switch("x1"in p&&(i=p.x1),"x2"in p&&(o=p.x2),"y1"in p&&(r=p.y1),"y2"in p&&(s=p.y2),"x"in p&&(a=p.x),"y"in p&&(l=p.y),p.command){case"M":u=u+"M"+a.toString()+","+l.toString()+" ";break;case"L":u=u+"L"+a.toString()+","+l.toString()+" ";break;case"C":u=u+"C"+i.toString()+","+r.toString()+","+o.toString()+","+s.toString()+",",u+=a.toString()+","+l.toString()+" ";break;case"Q":u=u+"Q"+i.toString()+","+r.toString()+","+a.toString()+","+l.toString()+" ";break;case"A":u=u+"A"+p.r1.toString()+","+p.r2.toString()+","+p.angle.toString()+",",u+=p.largeArc.toString()+","+p.sweep+","+a.toString()+","+l.toString()+" ";break;case"Z":case"z":u+="Z "}}e.setAttribute("d",u)},e.prototype.setSvgFontStyle=function(e,t){e.style.fontStyle=t.italic?"italic":"normal",e.style.fontWeight=t.bold?"bold":"normal",e.style.fontSize=t.fontSize.toString()+"px",e.style.fontFamily=t.fontFamily},e.prototype.drawText=function(e,t,n,i,r){if(void 0!==t.content){var o=void 0,s=void 0,a=void 0,l=void 0,c=void 0,h=void 0,d=0,u=0,p=void 0;if(n&&(p=n.getElementById(t.id+"_text")),p){if(t.doWrap)for(;p.firstChild;)p.removeChild(p.firstChild)}else t.doWrap=!0,p=document.createElementNS("http://www.w3.org/2000/svg","text"),"pre-wrap"===t.whiteSpace&&p.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.appendChild(p);var f=t.x+t.width*t.pivotX,g=t.y+t.height*t.pivotY;if(t.doWrap||"Wrap"!==t.textOverflow){var m=document.getElementById(t.id+"_text");for(m&&(m.innerHTML=""),this.setSvgStyle(p,t,r),this.setSvgFontStyle(p,t),o=document.createTextNode(t.content),l=this.svgLabelAlign(t,a=t.wrapBounds,s=t.childNodes),a.width>t.width&&"Wrap"!==t.textOverflow&&(s[0].text=Kl(t.content,t)),u=0;u<s.length;u++)h=document.createElementNS("http://www.w3.org/2000/svg","tspan"),o=document.createTextNode(s[u].text),d=l.y+(c=s[u]).dy*u+.8*t.fontSize,Nl(h,{x:(l.x+c.x-a.x).toString(),y:d.toString()}),p.setAttribute("fill",c.text),h.appendChild(o),p.appendChild(h)}t.textDecoration&&"LineThrough"===t.textDecoration&&(t.textDecoration=Yl(t.textDecoration)),Nl(p,{id:t.id+"_text",fill:t.color,visibility:t.visible?"visible":"hidden","text-decoration":t.textDecoration,transform:"rotate("+t.angle+","+f+","+g+")translate("+t.x+","+t.y+")",opacity:t.opacity,"aria-label":i||""})}},e.prototype.drawImage=function(e,t,n,i){var r;n&&(r=n.getElementById(t.id+"image")),r||(r=document.createElementNS("http://www.w3.org/2000/svg","image"),e.appendChild(r));var o=new Image;o.src=t.source;var s="None"!==t.scale?t.scale:"",a=t.alignment,l=a.charAt(0).toLowerCase()+a.slice(1);s&&(l+=" "+s.charAt(0).toLowerCase()+s.slice(1)),Nl(r,{id:t.id+"image",x:t.x.toString(),y:t.y.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",width:t.width.toString(),visibility:t.visible?"visible":"hidden",height:t.height.toString(),preserveAspectRatio:l,opacity:(t.opacity||1).toString()}),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o.src.toString())},e.prototype.drawHTMLContent=function(e,t,n,i,r){var o;if(t){var s=void 0;for(s=0;s<t.childNodes.length;s++)t.childNodes[s].id===e.id+"_html_element"&&(o=t.childNodes[s])}o||((o=Pl("div",{id:e.id+"_html_element",class:"foreign-object"})).appendChild(e.template.cloneNode(!0)),void 0!==r&&t.childNodes.length>r?t.insertBefore(o,t.childNodes[r]):t.appendChild(o));var a=Hl(e).topLeft;o.setAttribute("style","height:"+e.actualSize.height+"px; width:"+e.actualSize.width+"px;left:"+a.x+"px; top:"+a.y+"px;position:absolute;transform:rotate("+(e.rotateAngle+e.parentTransform)+"deg);pointer-events:"+(i?"all":"none")+";visibility:"+(e.visible?"visible":"hidden")+";opacity:"+e.style.opacity+";")},e.prototype.drawNativeContent=function(e,t,n,i,r){var o,s;r&&(o=r.getElementById(e.id+"_native_element"),s=r.getElementById(e.id+"_clip")),o||((o=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id",e.id+"_native_element"),o.appendChild(e.template.cloneNode(!0)),t.appendChild(o)),s&&o.removeChild(s),o.setAttribute("style","visibility:"+(e.visible?"visible":"hidden")+";opacity:"+e.style.opacity+";"),this.setNativTransform(e,o,n,i),"Slice"===e.scale&&this.drawClipPath(e,o,n,i,r),Nl(o,e.description?{"aria-label":e.description}:{})},e.prototype.setNativTransform=function(e,t,n,i){var r=0!==e.contentSize.width?e.contentSize.width:1,o=0!==e.contentSize.height?e.contentSize.height:1;t.setAttribute("transform","rotate("+e.parentTransform+","+e.offsetX+","+e.offsetY+") translate("+(e.offsetX-e.templatePosition.x*i/r-i*e.pivot.x)+","+(e.offsetY-e.templatePosition.y*n/o-n*e.pivot.y)+") scale("+i/r+","+n/o+")")},e.prototype.drawClipPath=function(e,t,n,i,r){var o=e.contentSize.width,s=e.contentSize.height,a=e.width/(i/o),l=e.height/(n/s),c=e.templatePosition.x+(e.width>=e.height?0:(o-a)/2),h=e.templatePosition.y+(e.height>=e.width?0:(s-l)/2),d=r.getElementById(e.id+"_clip");(d=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id",e.id+"_clip"),t.appendChild(d);var u=r.getElementById(e.id+"_clip_rect");return u=document.createElementNS("http://www.w3.org/2000/svg","rect"),d.appendChild(u),Nl(u,{id:e.id+"_clip_rect",width:a.toString(),height:l.toString(),x:c.toString(),y:h.toString()}),t.setAttribute("clip-path","url(#"+e.id+"_clip)"),t},e.prototype.renderGradient=function(e,t,n){var i,r,o,s,a,l=El(n),c=l.getElementById(n+"gradient_pattern");if(c||(c=Tl("defs",{id:n+"gradient_pattern"}),l.insertBefore(c,l.firstChild)),qa(t.id),"None"!==e.gradient.type){for(var h=0;h<e.gradient.stops.length;h++)i=i?Math.max(i,e.gradient.stops[h].offset):e.gradient.stops[h].offset,r=r?Math.min(r,e.gradient.stops[h].offset):e.gradient.stops[h].offset;for("Linear"===e.gradient.type?((a=e.gradient).id=t.id+"_linear",o=this.createLinearGradient(a),c.appendChild(o)):((s=e.gradient).id=t.id+"_radial",o=this.createRadialGradient(s),c.appendChild(o)),h=0;h<e.gradient.stops.length;h++){var d=e.gradient.stops[h],u=r<0?(i+d.offset)/(2*i):d.offset/i,p=document.createElementNS("http://www.w3.org/2000/svg","stop");Nl(p,{offset:u.toString(),style:"stop-color:"+d.color}),o.appendChild(p)}}return o},e.prototype.createLinearGradient=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");return Nl(t,{id:e.id,x1:e.x1+"%",y1:e.y1+"%",x2:e.x2+"%",y2:e.y2+"%"}),t},e.prototype.createRadialGradient=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","radialGradient");return Nl(t,{id:e.id,cx:e.cx+"%",cy:e.cy+"%",r:e.r+"%",fx:e.fx+"%",fy:e.fy+"%"}),t},e.prototype.setSvgStyle=function(e,t,n){if(t.canApplyStyle||void 0===t.canApplyStyle){"none"===t.fill&&(t.fill="transparent"),"none"===t.stroke&&(t.stroke="transparent");var i,r=[];void 0!==t.dashArray&&(r=(new nc).parseDashArray(t.dashArray)),i=t.gradient&&"None"!==t.gradient.type?"url(#"+this.renderGradient(t,e,n).id+")":t.fill,t.stroke&&e.setAttribute("stroke",t.stroke),null!=t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth.toString()),r&&e.setAttribute("stroke-dasharray",r.toString()),i&&e.setAttribute("fill",i)}},e.prototype.svgLabelAlign=function(e,t,n){var i=new Xt(t.width,n.length*(1.2*e.fontSize)),r={x:0,y:0},o=.5*e.width,s=.5*e.height;return"left"===e.textAlign?o=0:"center"===e.textAlign?o=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:.5*e.width:"right"===e.textAlign&&(o=1*e.width),r.x=0+o+(t?t.x:0),r.y=1.2+s-i.height/2,r},e}(),rc=function(){function e(e,t,n){this.renderer=null,this.isSvgMode=!0,this.transform={x:0,y:0},this.diagramId=e,this.element=bl(this.diagramId),this.svgRenderer=t,this.isSvgMode=n,this.renderer=n?new ic:new nc}return e.prototype.setCursor=function(e,t){e.style.cursor=t},e.prototype.setLayers=function(){this.iconSvgLayer=this.element.getElementsByClassName("e-ports-expand-layer")[0],this.adornerSvgLayer=this.element.getElementsByClassName("e-adorner-layer")[0],this.nativeSvgLayer=this.element.getElementsByClassName("e-native-layer")[0],this.diagramSvgLayer=this.element.getElementsByClassName("e-diagram-layer")[0]},e.prototype.getAdornerLayer=function(){return Al(this.diagramId)},e.prototype.getParentSvg=function(e,t,n){return this.diagramId&&e&&e.id?e.id.split("_icon_content").length>1||e.id.split("_nodeport").length>1?this.iconSvgLayer:t&&"selector"===t?this.adornerSvgLayer:e instanceof Kn?this.nativeSvgLayer:this.diagramSvgLayer:n},e.prototype.getParentElement=function(e,t,n,i){var r=t;if(n&&this.diagramId&&e&&e.id){e.id.split("_icon_content").length>1?(r=n.getElementById(this.diagramId+"_diagramExpander"),t=null):e.id.split("_nodeport").length>1?r=n.getElementById(this.diagramId+"_diagramPorts"):e instanceof Kn?(r=n.getElementById(this.diagramId+"_nativeLayer"),t=null):r=n.getElementById(this.diagramId+"_diagramLayer");var o=this.getGroupElement(e,t||r,i);r=o.g,o.svg&&(n=o.svg)}return{g:r,svg:n}},e.prototype.getGroupElement=function(e,t,n){var i,r,o=this.getParentSvg(e);if(t&&o){if(o&&!(i=o.getElementById(e.id+"_groupElement"))&&o!==this.nativeSvgLayer){var s=this.nativeSvgLayer;i=s.getElementById(e.id+"_groupElement"),r=s}i||(i=this.svgRenderer.createGElement("g",{id:e.id+"_groupElement"}),void 0!==n&&t.childNodes.length>n?t.insertBefore(i,t.childNodes[n]):t.appendChild(i))}return{g:i,svg:r}},e.prototype.renderElement=function(e,t,n,i,r,o,s,a){e instanceof Xn?this.renderContainer(e,t,n,i,r,o,s,a):e instanceof $n?this.renderImageElement(e,t,i,r,s):e instanceof Zn?this.renderPathElement(e,t,i,r,s):e instanceof Jn?this.renderTextElement(e,t,i,r,s):e instanceof Kn?this.renderNativeElement(e,t,i,r,s):e instanceof Gr?this.renderHTMLElement(e,t,n,i,r,s,a):this.renderRect(e,t,i,r)},e.prototype.drawSelectionRectangle=function(e,t,n,i,r,o){var s={width:n*o.scale,height:i*o.scale,x:.5+(e=(e+o.tx)*o.scale),y:.5+(t=(t+o.ty)*o.scale),fill:"transparent",stroke:"gray",angle:0,pivotX:.5,pivotY:.5,strokeWidth:1,dashArray:"6 3",opacity:1,visible:!0,id:r.id+"_selected_region"},a=this.getAdornerLayer();this.svgRenderer.updateSelectionRegion(a,s)},e.prototype.renderHighlighter=function(e,t,n){var i=e.actualSize.width||2,r=e.actualSize.height||2,o=e.offsetX-i*e.pivot.x,s=e.offsetY-r*e.pivot.y;this.svgRenderer.drawRectangle(t,{width:i*n.scale,height:r*n.scale,x:o=(o+n.tx)*n.scale,y:s=(s+n.ty)*n.scale,fill:"transparent",stroke:"#8CC63F",angle:e.rotateAngle,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:4,dashArray:"",opacity:1,cornerRadius:0,visible:!0,id:t.id+"_highlighter",class:"e-diagram-highlighter"},this.diagramId)},e.prototype.renderStackHighlighter=function(e,t,n,i,r,o,s){var a,l=e.actualSize.width||2,c=e.offsetX-l*e.pivot.x,h=e.actualSize.height||2,d=e.offsetY-h*e.pivot.y;c=(c+n.tx)*n.scale;var u=e.bounds,p="";if(d=(d+n.ty)*n.scale,i)if(o){var f,g;a="M 0 0 L "+(2+(m=l*n.scale))+" 0 Z",f=e.actualSize.width/Number(u.width?u.width:1)*n.scale,g=e.actualSize.height/Number(u.height?u.height:1)*n.scale,p=en(rn(Kt("M7,4 L8,4 8,7 11,7 11,8 8,8 8,11 7,11 7,8 4,8 4,7 7,7 z M7.5,0.99999994C3.9160004,1 1,3.9160004 0.99999994,7.5 1,11.084 3.9160004,14 7.5,14 11.084,14 14,11.084 14,7.5 14,3.9160004 11.084,1 7.5,0.99999994 z M7.5,0 C11.636002,0 15,3.3639984 15,7.5 15,11.636002 11.636002,15 7.5,15 3.3640003,15 0,11.636002 0,7.5 0,3.3639984 3.3640003,0 7.5,0 z")),f+m+2,g-8,!1,u.x,u.y,0,0),r.y>=e.offsetY&&(d+=h)}else{var m;s&&r.y>=e.offsetY&&(d+=h),a="M -10 -10 L 0 0 Z M -10 10 L 0 0 Z M 0 0 L "+(m=l*n.scale)+" 0 Z M "+m+" 0 L "+(m+10)+" 10 Z L "+(m+10)+" -10 Z"}else a="M 10 -10 L 0 0 Z M -10 -10 L 0 0 Z M 0 0 L 0 "+(m=h*n.scale)+" Z M 0  "+m+" L -10  "+(m+10)+" Z L 10  "+(m+10)+" Z",r.x>=e.offsetX&&(c+=l);this.svgRenderer.drawPath(t,{data:a+p,width:l*n.scale,height:h*n.scale,x:c,y:d,fill:"transparent",stroke:"#8CC63F",angle:e.rotateAngle,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:1,dashArray:"",opacity:1,visible:!0,id:t.id+"_stack_highlighter",class:"e-diagram-highlighter"},this.diagramId)},e.prototype.drawLine=function(e,t){this.svgRenderer.drawLine(e,t)},e.prototype.drawPath=function(e,t){this.svgRenderer.drawPath(e,t,this.diagramId)},e.prototype.renderResizeHandle=function(e,t,n,i,r,o,s,a,l,c){var h=e.offsetX-e.actualSize.width*e.pivot.x,d=e.offsetY-e.actualSize.height*e.pivot.y,u=e.actualSize.height,p=e.actualSize.width;!c&&n&On.Rotate&&Fo(this.rendererActions)&&!zo(this.rendererActions)&&(this.renderPivotLine(e,t,o,r,s),this.renderRotateThumb(e,t,o,r,s)),this.renderBorder(e,t,o,a,l,c);var f=e.actualSize.width*i,g=e.actualSize.height*i;l||!Fo(this.rendererActions)||zo(this.rendererActions)||(f>=40&&g>=40&&(r&wn.ResizeNorthWest&&this.renderCircularHandle("resizeNorthWest",e,h,d,t,Ka(r,"ResizeNorthWest"),n&On.ResizeNorthWest,o,void 0,s,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-diagram-resize-handle e-northwest"),r&wn.ResizeNorthEast&&this.renderCircularHandle("resizeNorthEast",e,h+p,d,t,Ka(r,"ResizeNorthEast"),n&On.ResizeNorthEast,o,void 0,s,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-diagram-resize-handle e-northeast"),r&wn.ResizeSouthWest&&this.renderCircularHandle("resizeSouthWest",e,h,d+u,t,Ka(r,"ResizeSouthWest"),n&On.ResizeSouthWest,o,void 0,s,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-diagram-resize-handle e-southwest"),r&wn.ResizeSouthEast&&this.renderCircularHandle("resizeSouthEast",e,h+p,d+u,t,Ka(r,"ResizeSouthEast"),n&On.ResizeSouthEast,o,void 0,s,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-diagram-resize-handle e-southeast")),r&wn.ResizeNorth&&this.renderCircularHandle("resizeNorth",e,h+p/2,d,t,Ka(r,"ResizeNorth"),n&On.ResizeNorth,o,void 0,s,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-diagram-resize-handle e-north"),r&wn.ResizeSouth&&this.renderCircularHandle("resizeSouth",e,h+p/2,d+u,t,Ka(r,"ResizeSouth"),n&On.ResizeSouth,o,void 0,s,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-diagram-resize-handle e-south"),r&wn.ResizeWest&&this.renderCircularHandle("resizeWest",e,h,d+u/2,t,Ka(r,"ResizeWest"),n&On.ResizeWest,o,void 0,s,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-diagram-resize-handle e-west"),r&wn.ResizeEast&&this.renderCircularHandle("resizeEast",e,h+p,d+u/2,t,Ka(r,"ResizeEast"),n&On.ResizeEast,o,void 0,s,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-diagram-resize-handle e-east"))},e.prototype.renderEndPointHandle=function(e,t,n,i,r,o,s,a){var l,c,h=e.sourcePoint,d=e.targetPoint,u=e.wrapper;if(this.renderCircularHandle("connectorSourceThumb",u,h.x,h.y,t,Ka(i,"ConnectorSourceThumb"),n&On.ConnectorSource,r,o,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend"),this.renderCircularHandle("connectorTargetThumb",u,d.x,d.y,t,Ka(i,"ConnectorTargetThumb"),n&On.ConnectorTarget,r,s,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend"),a)if(("Straight"===e.type||"Bezier"===e.type)&&e.segments.length>0)for(l=0;l<e.segments.length-1;l++)this.renderCircularHandle("segementThumb_"+(l+1),u,(c=e.segments[l]).point.x,c.point.y,t,!0,n&On.ConnectorSource,r,o,null,null,l);else for(l=0;l<e.segments.length;l++)this.renderOrthogonalThumbs("orthoThumb_"+(l+1),u,e.segments[l],t,Ka(i,"ConnectorSourceThumb"),r);if("Bezier"===e.type)for(l=0;l<e.segments.length;l++){var p=e.segments[l],f=Zt.isEmptyPoint(p.point1)?p.bezierPoint1:p.point1;this.renderCircularHandle("bezierPoint_"+(l+1)+"_1",u,f.x,f.y,t,Ka(i,"ConnectorSourceThumb"),n&On.ConnectorSource,r,void 0,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-bezier-handle e-source"),Ka(i,"ConnectorSourceThumb")&&this.renderBezierLine("bezierLine_"+(l+1)+"_1",u,t,p.points[0],Zt.isEmptyPoint(p.point1)?p.bezierPoint1:p.point1,r),f=Zt.isEmptyPoint(p.point2)?p.bezierPoint2:p.point2,this.renderCircularHandle("bezierPoint_"+(l+1)+"_2",u,f.x,f.y,t,Ka(i,"ConnectorTargetThumb"),n&On.ConnectorTarget,r,void 0,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-bezier-handle e-target"),Ka(i,"ConnectorTargetThumb")&&this.renderBezierLine("bezierLine_"+(l+1)+"_2",u,t,p.points[1],Zt.isEmptyPoint(p.point2)?p.bezierPoint2:p.point2,r)}},e.prototype.renderOrthogonalThumbs=function(e,t,n,i,r,o){var s,a,l=0;for(l=0;l<n.points.length-1;l++)a=Zt.distancePoints(n.points[l],n.points[l+1]),s=n.points[l].y.toFixed(2)===n.points[l+1].y.toFixed(2)?"horizontal":"vertical",this.renderOrthogonalThumb(e+"_"+(l+1),t,(n.points[l].x+n.points[l+1].x)/2,(n.points[l].y+n.points[l+1].y)/2,i,a>=50,s,o)},e.prototype.renderOrthogonalThumb=function(e,t,n,i,r,o,s,a){var l,c,h;"horizontal"===s?(l="M0,7 L15,0 L30,7 L15,14 z",c=-15,h=-7):(l="M7,0 L0,15 L7,30 L14,15 z",c=-7,h=-15),this.svgRenderer.drawPath(r,{x:(n+a.tx)*a.scale+c,y:(i+a.ty)*a.scale+h,angle:0,fill:"#e2e2e2",stroke:"black",strokeWidth:1,dashArray:"",data:l,width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:o,id:e},this.diagramId)},e.prototype.renderPivotLine=function(e,t,n,i,r){var o=e,s=!!(i&wn.Rotate);r&&(s=!1);var a=this.getBaseAttributes(o,n);a.fill="None",a.stroke="black",a.strokeWidth=1,a.dashArray="2,3",a.visible=s;var l=n.scale;a.x*=l,a.y*=l,a.width*=l,a.height*=l,a.id="pivotLine",a.class="e-diagram-pivot-line";var c={x:o.actualSize.width*o.pivot.x*l,y:0};a.startPoint={x:o.actualSize.width*o.pivot.x*l,y:-20},a.endPoint=c,this.svgRenderer.drawLine(t,a)},e.prototype.renderBezierLine=function(e,t,n,i,r,o){var s=this.getBaseAttributes(t,o);s.id=e,s.stroke="black",s.strokeWidth=1,s.dashArray="3,3",s.fill="None",s.class="e-diagram-bezier-line",s.x=0,s.y=0;var a=o.scale,l={x:(r.x+o.tx)*a,y:(r.y+o.ty)*a};s.startPoint={x:(i.x+o.tx)*a,y:(i.y+o.ty)*a},s.endPoint=l,this.svgRenderer.drawLine(n,s)},e.prototype.renderCircularHandle=function(e,t,n,i,r,o,s,a,l,c,h,d,u){var p=t,f=7,g={x:n,y:i};if(0!==p.rotateAngle||0!==p.parentTransform){var m=hn();un(m,p.rotateAngle+p.parentTransform,p.offsetX,p.offsetY),g=dn(m,g)}var y=this.getBaseAttributes(p);y.stroke="black",y.strokeWidth=1,void 0!==d?(f=5,y.id="segmentEnd_"+d,y.fill="#e2e2e2"):(f=7,y.fill=l?"#8CC63F":"white"),y.centerX=(g.x+a.tx)*a.scale,y.centerY=(g.y+a.ty)*a.scale,y.radius=f,y.angle=0,y.id=e,y.visible=o,y.class=u,l&&(y.class+=" e-connected"),c&&(y.visible=!1),this.svgRenderer.drawCircle(r,y,s,h)},e.prototype.renderBorder=function(e,t,n,i,r,o){var s=this.getBaseAttributes(e,n);s.x*=n.scale,s.y*=n.scale,s.width*=n.scale,s.height*=n.scale,s.fill="transparent",s.stroke="#097F7F",s.strokeWidth=.6,s.dashArray="6,3",s.class="e-diagram-border",o&&(s.class+=" e-diagram-lane"),s.id="borderRect",s.id=this.rendererActions&Mn.DrawSelectorBorder?"borderRect_symbol":"borderRect",i||(s.class+=" e-disabled"),r&&(s.class+=" e-thick-border"),s.cornerRadius=0;var a=this.getParentSvg(e,"selector");this.svgRenderer.drawRectangle(t,s,this.diagramId,void 0,!0,a)},e.prototype.renderUserHandler=function(e,t,n){for(var i=e.wrapper,r=0,o=e.userHandles;r<o.length;r++){var s=o[r],a=void new Zn,l=s.pathData;(a=Xa(e,s,n)).x=(a.x+n.tx)*n.scale,a.y=(a.y+n.ty)*n.scale,s.visible&&(s.visible=!!(e.constraints&wn.UserHandle));var c=this.getBaseAttributes(i);c.id=s.name+"_userhandle",c.fill=s.backgroundColor,c.stroke=s.borderColor,c.strokeWidth=s.borderWidth,c.centerX=a.x,c.centerY=a.y,c.radius=.5*s.size,c.class="e-diagram-userhandle-circle",c.angle=0,c.visible=s.visible,c.opacity=1,this.svgRenderer.drawCircle(t,c,1,{"aria-label":s.name+"user handle"});var h=[];h=rn(h=Kt(l));var d=gl(l),u=en(h,(s.size-.45*s.size)/d.width,(s.size-.45*s.size)/d.height,!0,d.x,d.y,0,0);d=gl(u),this.svgRenderer.drawPath(t,{x:a.x-d.width/2,y:a.y-d.height/2,angle:0,id:"",class:"e-diagram-userhandle-path",fill:s.pathColor,stroke:s.backgroundColor,strokeWidth:.5,dashArray:"",data:u,width:s.size-5,height:s.size-5,pivotX:0,pivotY:0,opacity:1,visible:s.visible},this.diagramId,void 0,void 0,{"aria-label":s.name+"user handle"})}},e.prototype.renderRotateThumb=function(e,t,n,i,r){new Zn;var o,s=new Xt;s.width=18,s.height=16;var a=!!(i&wn.Rotate);r&&(a=!1);var l=e.offsetX-e.actualSize.width*e.pivot.x+e.pivot.x*e.actualSize.width,c=e.offsetY-e.actualSize.height*e.pivot.y;if(o={x:(l=(l+n.tx)*n.scale)-.5*s.width,y:(c=(c+n.ty)*n.scale)-30-.5*s.height},0!==e.rotateAngle||0!==e.parentTransform){var h=hn();un(h,e.rotateAngle+e.parentTransform,(n.tx+e.offsetX)*n.scale,(n.ty+e.offsetY)*n.scale),o=dn(h,o)}var d={x:o.x,y:o.y,angle:e.rotateAngle+e.parentTransform,fill:"#231f20",stroke:"black",strokeWidth:.5,dashArray:"",data:"M 16.856144362449648 10.238890446662904 L 18.000144362449646 3.437890446662903L 15.811144362449646 4.254890446662903 C 14.837144362449646 2.5608904466629028 13.329144362449647  1.2598904466629026 11.485144362449645 0.5588904466629026 C 9.375144362449646 - 0.24510955333709716 7.071144362449646  - 0.18010955333709716 5.010144362449646 0.7438904466629028 C 2.942144362449646 1.6678904466629028 1.365144362449646 3.341890446662903 0.558144362449646 5.452890446662903 C - 0.244855637550354 7.567890446662903 - 0.17985563755035394 9.866890446662904 0.7431443624496461 11.930890446662904 C 1.6681443624496461 13.994890446662904 3.343144362449646 15.575890446662903 5.457144362449647 16.380890446662903 C 6.426144362449647 16.7518904466629 7.450144362449647 16.9348904466629 8.470144362449647 16.9348904466629 C 9.815144362449647 16.9348904466629 11.155144362449647 16.6178904466629 12.367144362449647 15.986890446662901 L 11.351144362449647 14.024890446662901 C 9.767144362449647 14.8468904466629 7.906144362449647 14.953890446662902 6.237144362449647 14.3178904466629 C 4.677144362449647 13.7218904466629 3.444144362449647 12.5558904466629 2.758144362449647 11.028890446662901 C 2.078144362449646 9.501890446662903 2.031144362449646 7.802890446662903 2.622144362449646 6.243890446662903 C 3.216144362449646 4.6798904466629025 4.387144362449646 3.442890446662903 5.914144362449646 2.760890446662903 C 7.437144362449646 2.078890446662903 9.137144362449646 2.0298904466629026 10.700144362449645 2.6258904466629027 C 11.946144362449646 3.100890446662903 12.971144362449646 3.9538904466629026 13.686144362449646 5.049890446662903 L 11.540144362449645 5.850890446662903 L 16.856144362449648 10.238890446662904 Z",width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:a,id:e.id,class:"e-diagram-rotate-handle"};d.id="rotateThumb",this.svgRenderer.drawPath(t,d,this.diagramId,!0,void 0,{"aria-label":"Thumb to rotate the selected object"})},e.prototype.renderPathElement=function(e,t,n,i,r){var o=this.getBaseAttributes(e,n);o.data=e.absolutePath,o.data=e.absolutePath;var s=e.description?e.description:e.id;this.isSvgMode||(o.x=e.flipOffset.x?e.flipOffset.x:o.x,o.y=e.flipOffset.y?e.flipOffset.y:o.y),e.isExport&&(o.data=yl(e,e.absoluteBounds,0,o)),this.renderer.drawPath(t,o,this.diagramId,void 0,i,s)},e.prototype.renderSvgGridlines=function(e,t,n,i,r,o){var s=document.createElementNS("http://www.w3.org/2000/svg","pattern"),a=document.createElementNS("http://www.w3.org/2000/svg","defs");a.setAttribute("id",this.diagramId+"_grid_pattern_defn"),(e.constraints&bn.ShowHorizontalLines||e.constraints&bn.ShowVerticalLines)&&s.setAttribute("id",this.diagramId+"_pattern");var l=0,c=0,h=0,d=0,u=1,p=!1;if(i.showRulers&&i.dynamicGrid&&r&&o)h=o.updateSegmentWidth(n.scale),d=r.updateSegmentWidth(n.scale),e.horizontalGridlines.scaledIntervals=[h/r.interval],e.verticalGridlines.scaledIntervals=[d/o.interval],p=!0;else{for(var f=0,g=e.verticalGridlines.lineIntervals;f<g.length;f++)l+=g[f];for(var m=0,y=e.horizontalGridlines.lineIntervals;m<y.length;m++)c+=y[m];u=this.scaleSnapInterval(e,n.scale)}Nl(s,{id:this.diagramId+"_pattern",x:0,y:0,width:l=p?d:l*u,height:c=p?h:c*u,patternUnits:"userSpaceOnUse"}),this.horizontalSvgGridlines(s,l,c,u,e,i,o,p),this.verticalSvgGridlines(s,l,c,u,e,i,r,p),a.appendChild(s),t.appendChild(a)},e.prototype.horizontalSvgGridlines=function(e,t,n,i,r,o,s,a){var l,c=0,h=[];if(r.constraints&bn.ShowHorizontalLines){var d=r.horizontalGridlines.lineIntervals;r.horizontalGridlines.lineDashArray&&(h=this.renderer.parseDashArray(r.horizontalGridlines.lineDashArray)),o.showRulers&&o.dynamicGrid&&s&&(d=this.updateLineIntervals(d,o,s,n));for(var u=0;u<d.length;u+=2){l=document.createElementNS("http://www.w3.org/2000/svg","path");var p=c+d[u]/2;Nl(l,{"stroke-width":d[u],stroke:r.horizontalGridlines.lineColor,d:"M0,"+(p=a?p:p*i)+" L"+t+","+p+" Z",dashArray:h.toString(),class:1.25===d[u]?"e-diagram-thick-grid":"e-diagram-thin-grid"}),e.appendChild(l),c+=d[u+1]+d[u]}}},e.prototype.verticalSvgGridlines=function(e,t,n,i,r,o,s,a){var l,c=0,h=[];if(r.constraints&bn.ShowVerticalLines){var d=r.verticalGridlines.lineIntervals;r.verticalGridlines.lineDashArray&&(h=this.renderer.parseDashArray(r.verticalGridlines.lineDashArray)),o.showRulers&&o.dynamicGrid&&s&&(d=this.updateLineIntervals(d,o,s,t));for(var u=0;u<d.length;u+=2){l=document.createElementNS("http://www.w3.org/2000/svg","path");var p=c+d[u]/2;Nl(l,{"stroke-width":d[u],stroke:r.verticalGridlines.lineColor,d:"M"+(p=a?p:p*i)+",0 L"+p+","+n+" Z",dashArray:h.toString(),class:1.25===d[u]?"e-diagram-thick-grid":"e-diagram-thin-grid"}),e.appendChild(l),c+=d[u+1]+d[u]}}},e.prototype.updateGrid=function(e,t,n,i,r,o){var s,a=t.getElementById(this.diagramId+"_grid_rect"),l=!1;if(a){var c=t.getElementById(this.diagramId+"_pattern");c&&c.parentNode.removeChild(c);var h=0,d=0,u=1;i.showRulers&&i.dynamicGrid&&o&&r?(h=o.updateSegmentWidth(n.scale),d=r.updateSegmentWidth(n.scale),l=!0,e.horizontalGridlines.scaledIntervals=[h/r.interval],e.verticalGridlines.scaledIntervals=[d/o.interval]):u=this.scaleSnapInterval(e,n.scale);var p=0;for(s=0;s<e.horizontalGridlines.lineIntervals.length;s++)p+=e.horizontalGridlines.lineIntervals[s];var f=0;for(s=0;s<e.verticalGridlines.lineIntervals.length;s++)f+=e.verticalGridlines.lineIntervals[s];var g={x:-n.tx*n.scale,y:-n.ty*n.scale};Nl(a,g),g={id:this.diagramId+"_pattern",x:0,y:0,width:f=l?d:f*u,height:p=l?h:p*u,patternUnits:"userSpaceOnUse"},Nl(c=document.createElementNS("http://www.w3.org/2000/svg","pattern"),g),this.horizontalSvgGridlines(c,f,p,u,e,i,o,l),this.verticalSvgGridlines(c,f,p,u,e,i,r,l);var m=t.getElementById(this.diagramId+"_grid_pattern_defn");m&&m.appendChild(c)}},e.prototype.updateLineIntervals=function(e,t,n,i){for(var r=[],o=i/n.interval,s=0;s<2*n.interval;s++)r[s]=s%2==0?0===s?1.25:.25:o-r[s-1];return r},e.prototype.scaleSnapInterval=function(e,t){if(t>=2)for(;t>=2;)t/=2;else if(t<=.5)for(;t<=.5;)t*=2;var n;if(e.horizontalGridlines.scaledIntervals=e.horizontalGridlines.snapIntervals,e.verticalGridlines.scaledIntervals=e.verticalGridlines.snapIntervals,1!==t){var i=e.horizontalGridlines;for(i.scaledIntervals=[],n=0;n<i.snapIntervals.length;n++)i.scaledIntervals[n]=i.snapIntervals[n]*t;for((i=e.verticalGridlines).scaledIntervals=[],n=0;n<i.snapIntervals.length;n++)i.scaledIntervals[n]=i.snapIntervals[n]*t}return t},e.prototype.renderTextElement=function(e,t,n,i,r){var o=this.getBaseAttributes(e,n);o.cornerRadius=0,o.whiteSpace=Jl(e.style.whiteSpace,e.style.textWrapping),o.content=e.content,o.breakWord=Yl(e.style.textWrapping),o.textAlign=Ql(e.style.textAlign),o.color=e.style.color,o.italic=e.style.italic,o.bold=e.style.bold,o.fontSize=e.style.fontSize,o.fontFamily=e.style.fontFamily,o.textOverflow=e.style.textOverflow,o.textDecoration=e.style.textDecoration,o.doWrap=e.doWrap,o.wrapBounds=e.wrapBounds,o.childNodes=e.childNodes,o.dashArray="",o.strokeWidth=0,o.fill=e.style.fill;var s=e.description?e.description:e.content?e.content:e.id;this.renderer.drawRectangle(t,o,this.diagramId,void 0,void 0,i),this.renderer.drawText(t,o,i,s,this.diagramId,e.isExport&&Math.min(e.exportScaleValue.x||e.exportScaleValue.y)),this.isSvgMode&&(e.doWrap=!1)},e.prototype.renderNativeElement=function(e,t,n,i,r){var o,s,a=this.getParentSvg(e,void 0,t)||i,l=this.getParentElement(e,t,a).g||t,c=this.getBaseAttributes(e,n);switch(c.fill="transparent",c.cornerRadius=e.cornerRadius,c.stroke="transparent",this.renderer.drawRectangle(t,c,this.diagramId,void 0,void 0,i),e.scale){case"None":o=e.contentSize.width,s=e.contentSize.height;break;case"Stretch":o=e.actualSize.width,s=e.actualSize.height;break;case"Meet":o=s=e.actualSize.width<=e.actualSize.height?e.actualSize.width:e.actualSize.height;break;case"Slice":o=s=e.actualSize.width>=e.actualSize.height?e.actualSize.width:e.actualSize.height}this.svgRenderer&&this.svgRenderer.drawNativeContent(e,l,s,o,a)},e.prototype.renderHTMLElement=function(e,t,n,i,r,o,s){var a=this.getBaseAttributes(e,i);a.fill="transparent",a.cornerRadius=e.cornerRadius,a.stroke="transparent",this.renderer.drawRectangle(t,a,this.diagramId,void 0,void 0,r),this.svgRenderer&&this.svgRenderer.drawHTMLContent(e,n.children[0],i,function(e){var t=e.parentElement;do{if(jl(t,"e-diagram"))return!0;t=t.parentElement}while(t);return!1}(n),s)},e.prototype.renderImageElement=function(e,t,n,i,r){var o,s,a,l,c=this.getBaseAttributes(e,n);if(c.cornerRadius=0,this.renderer.drawRectangle(t,c,this.diagramId,void 0,void 0,i),"Stretch"===e.stretch)o=e.actualSize.width,s=e.actualSize.height;else{var h=e.contentSize.width,d=e.contentSize.height,u=c.width/h,p=c.height/d,f=void 0;switch(e.stretch){case"Meet":o=h*(f=Math.min(u,p)),s=d*f,c.x+=Math.abs(c.width-o)/2,c.y+=Math.abs(c.height-s)/2;break;case"Slice":u=c.width/h,p=c.height/d,f=Math.max(u,p),a=c.width/(o=h*f)*h,l=c.height/(s=d*f)*d;break;case"None":o=h,s=d}}c.width=o,c.height=s,c.sourceWidth=a,c.sourceHeight=l,c.source=e.source,c.alignment=e.imageAlign,c.scale=e.imageScale,c.description=e.description?e.description:e.id,this.renderer.drawImage(t,c,i,r)},e.prototype.renderContainer=function(e,t,n,i,r,o,s,a){var l={svg:r,g:t};if(this.diagramId&&(r=this.getParentSvg(e)||r,this.isSvgMode)){var c;c=this.getParentElement(e,t,r,a).g||t,r=this.getParentSvg(this.hasNativeParent(e.children))||r;var h=this.getParentElement(this.hasNativeParent(e.children),c,r,a);l.svg=h.svg||r,l.g=h.g||c,o?(r&&(r.getElementById(l.g.id)||t.appendChild(l.g)),t=l.g):t=l.g}if(this.renderRect(e,t,i,r),e.hasChildren()){for(var d,u=void 0,p=0,f=e.children;p<f.length;p++){var g=f[p];r=this.getParentSvg(this.hasNativeParent(e.children)||g)||r,this.isSvgMode&&(u=(d=this.getParentElement(this.hasNativeParent(e.children)||g,t,r)).g||t,d.svg&&(r=d.svg)),this.isSvgMode||(g.flip=e.flip),this.renderElement(g,u||t,n,i,r,!0,s,a),g instanceof Jn&&u&&!(e.elementActions&Sn.ElementIsGroup)&&this.renderFlipElement(g,u,g.flip&&"None"!==g.flip?g.flip:e.flip),g.elementActions&Sn.ElementIsPort&&u&&this.renderFlipElement(e,u,g.flip&&"None"!==g.flip?g.flip:e.flip),!(g instanceof Jn)&&"None"!==e.flip&&e.elementActions&Sn.ElementIsGroup&&this.renderFlipElement(g,u||t,e.flip)}e.elementActions&Sn.ElementIsGroup||this.renderFlipElement(e,t,e.flip)}},e.prototype.renderFlipElement=function(e,t,n){var i={},r=1,o=1,s=0,a=0,l=0,c=0;"None"!==n?("Horizontal"!==n&&"Both"!==n||(s=e.bounds.center.x,l=-e.bounds.center.x,r=-1),"Vertical"!==n&&"Both"!==n||(a=e.bounds.center.y,c=-e.bounds.center.y,o=-1),i={transform:"translate("+s+","+a+") scale("+r+","+o+") translate("+l+","+c+")"}):i={transform:"translate(0,0)"},i&&Nl(t,i)},e.prototype.hasNativeParent=function(e,t){if(e&&e.length>0){var n=e[0];if(n instanceof Kn)return n;n.children&&n.children.length&&this.hasNativeParent(n.children,t++||0)}},e.prototype.renderRect=function(e,t,n,i){var r=this.getBaseAttributes(e,n);r.cornerRadius=e.cornerRadius||0,this.renderer.drawRectangle(t,r,this.diagramId,void 0,void 0,i,e.description?e.description:e.id)},e.prototype.drawRect=function(e,t){t.cornerRadius=0,this.svgRenderer.drawRectangle(e,t,this.diagramId)},e.prototype.getBaseAttributes=function(e,t){var n={width:e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5,fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray||"",opacity:e.style.opacity,shadow:e.shadow,gradient:e.style.gradient,visible:e.visible,id:e.id,description:e.description,canApplyStyle:e.canApplyStyle};return e.isExport&&(n.width*=e.exportScaleValue.x,n.height*=e.exportScaleValue.y,n.x*=e.exportScaleValue.x,n.y*=e.exportScaleValue.y,n.strokeWidth*=e.exportScaleValue.x),e.flip&&(n.flip=e.flip),t&&(n.x+=t.tx,n.y+=t.ty),n},e.renderSvgBackGroundImage=function(e,t,n,i,r,o){if(e.source){var s=El(t.id).getElementById(t.id+"_image");if(!s){var a=bl(t.id).getElementsByClassName("e-background-image-layer")[0];(s=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("id",t.id+"_image"),a.appendChild(s)}var l=new Image;l.src=e.source,s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l.src.toString());var c="None"!==e.scale?e.scale:"",h=e.align,d=h.charAt(0).toLowerCase()+h.slice(1);c&&(d+=" "+c.charAt(0).toLowerCase()+c.slice(1)),Nl(s,{id:t.id+"_image",x:n,y:i,width:r,height:o,preserveAspectRatio:d})}},e.prototype.transformLayers=function(e,t){var n,i=e.tx*e.scale,r=e.ty*e.scale;return(i!==this.transform.x||r!==this.transform.y||0===i||0===r)&&(t&&this.diagramSvgLayer.getElementById(this.diagramId+"_diagramLayer").setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),Ol(n=this.diagramId).getElementById(n+"_gridline").setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+")"),this.iconSvgLayer.getElementById(this.diagramId+"_diagramPorts").setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),this.iconSvgLayer.getElementById(this.diagramId+"_diagramExpander").setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),this.nativeSvgLayer.getElementById(this.diagramId+"_nativeLayer").setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),kl(this.diagramId).children[0].style.transform="translate("+e.tx*e.scale+"px,"+e.ty*e.scale+"px)scale("+e.scale+")",this.transform={x:e.tx*e.scale,y:e.ty*e.scale},!0)},e.prototype.updateNode=function(e,t,n,i,r){this.renderElement(e,t,n,i,this.getParentSvg(e),void 0,void 0,r)},e}(),oc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"source",void 0),Object(s.b)([ye("transparent")],t.prototype,"color",void 0),Object(s.b)([ye("None")],t.prototype,"scale",void 0),Object(s.b)([ye("None")],t.prototype,"align",void 0),t}(Le),sc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(null)],t.prototype,"width",void 0),Object(s.b)([ye(null)],t.prototype,"height",void 0),Object(s.b)([ve({},zn)],t.prototype,"margin",void 0),Object(s.b)([ye("Landscape")],t.prototype,"orientation",void 0),Object(s.b)([ye("Infinity")],t.prototype,"boundaryConstraints",void 0),Object(s.b)([ve({},oc)],t.prototype,"background",void 0),Object(s.b)([ye(!1)],t.prototype,"multiplePage",void 0),Object(s.b)([ye(!1)],t.prototype,"showPageBreaks",void 0),t}(Le),ac=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(0)],t.prototype,"horizontalOffset",void 0),Object(s.b)([ye(0)],t.prototype,"verticalOffset",void 0),Object(s.b)([ye(1)],t.prototype,"currentZoom",void 0),Object(s.b)([ye(0)],t.prototype,"viewPortWidth",void 0),Object(s.b)([ye(0)],t.prototype,"viewPortHeight",void 0),Object(s.b)([ye(.2)],t.prototype,"minZoom",void 0),Object(s.b)([ye(30)],t.prototype,"maxZoom",void 0),Object(s.b)([ye("Diagram")],t.prototype,"scrollLimit",void 0),Object(s.b)([ye()],t.prototype,"scrollableArea",void 0),Object(s.b)([ye(!1)],t.prototype,"canAutoScroll",void 0),Object(s.b)([ve({left:15,right:15,top:15,bottom:15},zn)],t.prototype,"autoScrollBorder",void 0),Object(s.b)([ve({left:0,right:0,top:0,bottom:0},zn)],t.prototype,"padding",void 0),t}(Le),lc=function(){function e(){this.services={}}return e.prototype.register=function(e,t){this.services[e]=t},e.prototype.getService=function(e){return this.services[e]},e}(),cc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("lightgray")],t.prototype,"lineColor",void 0),Object(s.b)([ye("")],t.prototype,"lineDashArray",void 0),Object(s.b)([ye([1.25,18.75,.25,19.75,.25,19.75,.25,19.75,.25,19.75])],t.prototype,"lineIntervals",void 0),Object(s.b)([ye([20])],t.prototype,"snapIntervals",void 0),t}(Le),hc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ve({},cc)],t.prototype,"horizontalGridlines",void 0),Object(s.b)([ve({},cc)],t.prototype,"verticalGridlines",void 0),Object(s.b)([ye(bn.All)],t.prototype,"constraints",void 0),Object(s.b)([ye(5)],t.prototype,"snapAngle",void 0),Object(s.b)([ye(5)],t.prototype,"snapObjectDistance",void 0),t}(Le),dc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(5)],t.prototype,"interval",void 0),Object(s.b)([ye(100)],t.prototype,"segmentWidth",void 0),Object(s.b)([ye("Horizontal")],t.prototype,"orientation",void 0),Object(s.b)([ye("RightOrBottom")],t.prototype,"tickAlignment",void 0),Object(s.b)([ye("red")],t.prototype,"markerColor",void 0),Object(s.b)([ye(25)],t.prototype,"thickness",void 0),Object(s.b)([ye(null)],t.prototype,"arrangeTick",void 0),t}(Le),uc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(!1)],t.prototype,"showRulers",void 0),Object(s.b)([ye(!0)],t.prototype,"dynamicGrid",void 0),Object(s.b)([ve({orientation:"Horizontal"},dc)],t.prototype,"horizontalRuler",void 0),Object(s.b)([ve({orientation:"Vertical"},dc)],t.prototype,"verticalRuler",void 0),t}(Le),pc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"read",void 0),Object(s.b)([ye("")],t.prototype,"create",void 0),Object(s.b)([ye("")],t.prototype,"update",void 0),Object(s.b)([ye("")],t.prototype,"destroy",void 0),Object(s.b)([ye()],t.prototype,"customFields",void 0),t}(Le),fc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"id",void 0),Object(s.b)([ye("")],t.prototype,"sourceID",void 0),Object(s.b)([ye("")],t.prototype,"targetID",void 0),Object(s.b)([ye(null)],t.prototype,"sourcePointX",void 0),Object(s.b)([ye(null)],t.prototype,"sourcePointY",void 0),Object(s.b)([ye(null)],t.prototype,"targetPointX",void 0),Object(s.b)([ye(null)],t.prototype,"targetPointY",void 0),Object(s.b)([ye(null)],t.prototype,"dataManager",void 0),Object(s.b)([ve({},pc)],t.prototype,"crudAction",void 0),t}(Le),gc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"id",void 0),Object(s.b)([ye(null)],t.prototype,"dataManager",void 0),Object(s.b)([ye("")],t.prototype,"root",void 0),Object(s.b)([ye("")],t.prototype,"parentId",void 0),Object(s.b)([ye()],t.prototype,"data",void 0),Object(s.b)([ye()],t.prototype,"doBinding",void 0),Object(s.b)([ve({},pc)],t.prototype,"crudAction",void 0),Object(s.b)([ve({},fc)],t.prototype,"connectionDataSource",void 0),t}(Le),mc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"fixedNode",void 0),Object(s.b)([ye(30)],t.prototype,"horizontalSpacing",void 0),Object(s.b)([ye(30)],t.prototype,"verticalSpacing",void 0),Object(s.b)([ye(30)],t.prototype,"maxIteration",void 0),Object(s.b)([ye(40)],t.prototype,"springFactor",void 0),Object(s.b)([ye(50)],t.prototype,"springLength",void 0),Object(s.b)([ve({left:50,top:50,right:0,bottom:0},zn)],t.prototype,"margin",void 0),Object(s.b)([ye("Auto")],t.prototype,"horizontalAlignment",void 0),Object(s.b)([ye("Auto")],t.prototype,"verticalAlignment",void 0),Object(s.b)([ye("TopToBottom")],t.prototype,"orientation",void 0),Object(s.b)([ye("Auto")],t.prototype,"connectionDirection",void 0),Object(s.b)([ye("Default")],t.prototype,"connectorSegments",void 0),Object(s.b)([ye("None")],t.prototype,"type",void 0),Object(s.b)([ye()],t.prototype,"getLayoutInfo",void 0),Object(s.b)([ye()],t.prototype,"getBranch",void 0),Object(s.b)([ye()],t.prototype,"bounds",void 0),Object(s.b)([ye(!0)],t.prototype,"enableAnimation",void 0),Object(s.b)([ye("")],t.prototype,"root",void 0),t}(Le);function yc(e,t,n){return e.x>=t.x-n&&e.x<=t.x+n&&e.y>=t.y-n&&e.y<=t.y+n}function vc(e){return e.selectedItems.nodes.length>0||e.selectedItems.connectors.length>0}function bc(e){return 1===e.selectedItems.connectors.length&&!e.selectedItems.nodes.length}function wc(e,t,n,i){if(void 0===n&&(n=!0),t instanceof fo)return!0;if(t instanceof sa)for(;t;){if(-1!==e.selectedItems.nodes.indexOf(t)&&void 0===e.selectedItems.annotation)return!0;if(n)break;t=e.nameTable[t.parentId]}else if(t instanceof uo){if(-1!==e.selectedItems.connectors.indexOf(t)&&void 0===e.selectedItems.annotation)return!0}else if((t instanceof ni||t instanceof ii)&&e.selectedItems.annotation&&e.selectedItems.wrapper.children[0].id===i.id)return!0;return!1}var Cc,xc={None:"default",Rotate:"crosshair",Select:"default",Drag:"move",ResizeWest:"w-resize",ResizeEast:"e-resize",ResizeSouth:"s-resize",ResizeNorth:"n-resize",Draw:"crosshair",PortDraw:"crosshair",ResizeNorthEast:"ne-resize",ResizeNorthWest:"nw-resize",ResizeSouthEast:"se-resize",ResizeSouthWest:"sw-resize",ConnectorSourceEnd:"move",ConnectorTargetEnd:"move",BezierSourceThumb:"move",BezierTargetThumb:"move",OrthoThumb:"move",SegmentEnd:"move",Pan:"pointer",Hyperlink:"pointer",PortDrag:"pointer",LabelSelect:"pointer",LabelDrag:"move",LabelRotate:"crosshair",LabelResizeWest:"w-resize",LabelResizeEast:"e-resize",LabelResizeSouth:"s-resize",LabelResizeNorth:"n-resize",LabelResizeNorthEast:"ne-resize",LabelResizeNorthWest:"nw-resize",LabelResizeSouthEast:"se-resize",LabelResizeSouthWest:"sw-resize"},Ac=function(){function e(e,t){void 0===t&&(t=!1),this.commandHandler=null,this.inAction=!1,this.isProtectChange=!1,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.undoElement={nodes:[],connectors:[]},this.checkProperty=!0,this.undoParentElement={nodes:[],connectors:[]},this.commandHandler=e,this.isProtectChange=t}return e.prototype.startAction=function(e){this.currentElement=e,this.inAction=!0},e.prototype.mouseDown=function(e){this.currentElement=e.source,this.startPosition=this.currentPosition=this.prevPosition=e.position,this.isTooltipVisible=!0,this.startAction(e.source),this.checkProperty=!0},e.prototype.checkPropertyValue=function(){this.checkProperty&&this.commandHandler.startTransaction(this.isProtectChange)},e.prototype.mouseMove=function(e){return this.currentPosition=e.position,this.inAction&&(this.commandHandler.startTransaction(this.isProtectChange),this.checkProperty=!1),!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.currentPosition=e.position,this.isTooltipVisible=!1,this.commandHandler.endTransaction(this.isProtectChange),this.endAction()},e.prototype.endAction=function(){this.isTooltipVisible||this.commandHandler.closeTooltip(),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},e.prototype.mouseWheel=function(e){this.currentPosition=e.position},e.prototype.mouseLeave=function(e){this.mouseUp(e)},e.prototype.updateSize=function(e,t,n,i,r,o){e=this.commandHandler.renderContainerHelper(e)||e;var s,a={snapped:!1,offset:0,left:!1,right:!1},l={snapped:!1,offset:0,top:!1,bottom:!1},c=this.currentPosition.x-this.startPosition.x,h=this.currentPosition.y-this.startPosition.y,d=!(e instanceof Jn)&&this.commandHandler.snappingModule&&this.commandHandler.snappingModule.canSnap(),u=d?this.commandHandler.snappingModule.getLayer():null,p=e instanceof Jn?o:e.rotateAngle;un(s=hn(),-p,0,0);var f,g=0,m=0,y=e instanceof Jn?e.actualSize.width:e.width,v=e instanceof Jn?e.actualSize.height:e.height;switch(i){case"ResizeWest":c=(f=dn(s,{x:c,y:h})).x,h=f.y,m=1,c=d?this.commandHandler.snappingModule.snapLeft(a,l,u,c,h,e,n===t,r):c,h=0,g=(r.width-c)/y;break;case"ResizeEast":c=(f=dn(s,{x:c,y:h})).x,h=f.y,c=d?this.commandHandler.snappingModule.snapRight(a,l,u,c,h,e,n===t,r):c,h=0,g=(r.width+c)/y,m=1;break;case"ResizeNorth":g=1,c=(f=dn(s,{x:c,y:h})).x,h=f.y,h=d?this.commandHandler.snappingModule.snapTop(a,l,u,c,h,e,n===t,r):h,m=(r.height-h)/v;break;case"ResizeSouth":g=1,c=(f=dn(s,{x:c,y:h})).x,h=f.y,h=d?this.commandHandler.snappingModule.snapBottom(a,l,u,c,h,e,n===t,r):h,m=(r.height+h)/v;break;case"ResizeNorthEast":c=(f=dn(s,{x:c,y:h})).x,h=f.y,c=d?this.commandHandler.snappingModule.snapRight(a,l,u,c,h,e,n===t,r):c,h=d?this.commandHandler.snappingModule.snapTop(a,l,u,c,h,e,n===t,r):h,g=(r.width+c)/y,m=(r.height-h)/v;break;case"ResizeNorthWest":c=(f=dn(s,{x:c,y:h})).x,h=f.y,h=d?this.commandHandler.snappingModule.snapTop(a,l,u,c,h,e,n===t,r):h,c=d?this.commandHandler.snappingModule.snapLeft(a,l,u,c,h,e,n===t,r):c,g=(r.width-c)/y,m=(r.height-h)/v;break;case"ResizeSouthEast":c=(f=dn(s,{x:c,y:h})).x,h=f.y,h=d?this.commandHandler.snappingModule.snapBottom(a,l,u,c,h,e,n===t,r):h,c=d?this.commandHandler.snappingModule.snapRight(a,l,u,c,h,e,n===t,r):c,m=(r.height+h)/v,g=(r.width+c)/y;break;case"ResizeSouthWest":c=(f=dn(s,{x:c,y:h})).x,h=f.y,h=d?this.commandHandler.snappingModule.snapBottom(a,l,u,c,h,e,n===t,r):h,c=d?this.commandHandler.snappingModule.snapLeft(a,l,u,c,h,e,n===t,r):c,g=(r.width-c)/y,m=(r.height+h)/v}return{width:g,height:m}},e.prototype.getPivot=function(e){switch(e){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},e}(),Sc=function(e){function t(t,n,i){var r=e.call(this,t,!0)||this;return r.action=i,r}return Object(s.c)(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction&&!1===Zt.equals(this.currentPosition,this.prevPosition)){var n=an.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.clearSelectedItems(),this.commandHandler.drawSelectionRectangle(n.x,n.y,n.width,n.height)}return!this.blocked},t.prototype.mouseUp=function(t){if(this.checkPropertyValue(),!1===Zt.equals(this.currentPosition,this.prevPosition)&&this.inAction){var n=an.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.doRubberBandSelection(n)}else{var i=this.commandHandler.getSelectedObject();this.commandHandler.hasSelection()&&t.info&&t.info.ctrlKey?t&&t.source&&(this.commandHandler.isSelected(t.source)?1===t.clickCount&&this.commandHandler.unSelect(t.source):this.commandHandler.selectObjects([t.source],!0)):(this.commandHandler.clearSelection(null===t.source),"LabelSelect"===this.action?this.commandHandler.labelSelect(t.source,t.sourceWrapper):t.source&&this.commandHandler.selectObjects([t.source],!1,i))}this.inAction=!1,e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(Ac),Oc=function(e){function t(t,n){var i=e.call(this,t,!0)||this;return i.endPoint=n,i}return Object(s.c)(t,e),t.prototype.mouseDown=function(t){var n;if(this.inAction=!0,this.undoElement=void 0,this instanceof Pc||(this.undoElement=Ul(t.source)),e.prototype.mouseDown.call(this,t),t.source&&t.source.connectors&&(n=t.source.connectors[0]),"BezierSourceThumb"===this.endPoint||"BezierTargetThumb"===this.endPoint)for(var i=0;i<n.segments.length;i++){var r=n.segments[i],o=Zt.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,s=Zt.isEmptyPoint(r.point2)?r.bezierPoint2:r.point2;(yc(this.currentPosition,o,n.hitPadding)||yc(this.currentPosition,s,n.hitPadding))&&(this.selectedSegment=r)}this.currentPosition=t.position},t.prototype.mouseUp=function(t){if(this.checkPropertyValue(),this.commandHandler.updateSelector(),this.commandHandler.removeSnap(),this.commandHandler.changeAnnotationDrag(t),this instanceof Pc||("ConnectorSourceEnd"!==this.endPoint||!t.source.connectors.length||Zt.equals(t.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)&&t.source.connectors[0].sourceID===this.undoElement.connectors[0].sourceID)&&("ConnectorTargetEnd"!==this.endPoint||Zt.equals(t.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint)&&t.source.connectors[0].targetID===this.undoElement.connectors[0].targetID))this instanceof Pc||"BezierTargetThumb"!==this.endPoint&&"BezierSourceThumb"!==this.endPoint||!this.undoElement||!t.source||(a=void 0,a=Ul(t.source),this.commandHandler.addHistoryEntry(l={type:"SegmentChanged",redoObject:a,undoObject:this.undoElement,category:"Internal"}));else{var n=void 0,i=void 0;t.source&&t.source.connectors&&(n={x:this.prevPosition.x,y:this.prevPosition.y},i=t.source.connectors[0]);var r=void 0,o=void 0;if(t.target){var s=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0);s instanceof ai?r=s.id:o=s.id}if(this.commandHandler.triggerEvent("ConnectorSourceEnd"===this.endPoint?Ln.sourcePointChange:Ln.targetPointChange,{connector:i,state:"Completed",targetNode:o,oldValue:n,newValue:n,cancel:!1,targetPort:r}),this.commandHandler.removeTerminalSegment(i,!0),this.undoElement&&t.source){var a=void 0;a=Ul(t.source);var l={type:"ConnectionChanged",redoObject:Ul(a),undoObject:Ul(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(l)}}e.prototype.mouseUp.call(this,t)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),!(this instanceof Pc)&&("ConnectorSourceEnd"===this.endPoint&&Zt.equals(t.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)||"ConnectorTargetEnd"===this.endPoint&&Zt.equals(t.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint))){var n=void 0,i=void 0;t.source&&t.source.connectors&&(n={x:this.prevPosition.x,y:this.prevPosition.y},i=t.source.connectors[0]);var r=void 0,o=void 0;t.target&&(o=t.target.id,(f=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof ai||f instanceof Gs?r=f.id:o=f.id),this.commandHandler.triggerEvent("ConnectorSourceEnd"===this.endPoint?Ln.sourcePointChange:Ln.targetPointChange,g={connector:i,state:"Start",targetNode:o,oldValue:n,newValue:n,cancel:!1,targetPort:r})}if(this.currentPosition=t.position,this.currentPosition&&this.prevPosition){var s=this.currentPosition.x-this.prevPosition.x,a=this.currentPosition.y-this.prevPosition.y,l=void 0,c=void(n=void 0),h=void 0;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var d=void 0;t.source&&t.source.connectors&&(l={x:this.currentPosition.x,y:this.currentPosition.y},n={x:this.prevPosition.x,y:this.prevPosition.y},d=t.source.connectors[0]);var u=void 0,p=void 0;t.target&&((f=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof ai?u=f.id:p=f.id);var f,g={connector:d,state:"Progress",targetNode:p,oldValue:n,newValue:l,cancel:!1,targetPort:u};if(this instanceof Pc||this.commandHandler.triggerEvent("ConnectorSourceEnd"===this.endPoint?Ln.sourcePointChange:Ln.targetPointChange,g),t.target&&(c=tl(t.target,!0),h=tl(t.target,!1)),(!g.cancel&&this.inAction&&void 0!==this.endPoint&&0!==s||0!==a)&&(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,t.source,this.currentPosition,this.selectedSegment,t.target,u),this.commandHandler.updateSelector(),t.target&&("ConnectorSourceEnd"===this.endPoint&&(So(t.target)||Oo(h))||"ConnectorTargetEnd"===this.endPoint&&(xo(t.target)||Ao(c)))?(this.commandHandler.canDisconnect(this.endPoint,t,u,p)&&this.commandHandler.disConnect(t.source,this.endPoint),(f=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof sa?(xo(f)&&"ConnectorTargetEnd"===this.endPoint||So(f)&&"ConnectorSourceEnd"===this.endPoint)&&this.commandHandler.connect(this.endPoint,t):this.checkConnect(f)&&this.commandHandler.connect(this.endPoint,t)):-1===this.endPoint.indexOf("Bezier")&&(this.commandHandler.disConnect(t.source,this.endPoint),this.commandHandler.updateSelector())),this.commandHandler.canEnableDefaultTooltip()){var m=this.getTooltipContent(t.position);this.commandHandler.showTooltip(t.source,t.position,m,"ConnectTool",this.isTooltipVisible),this.isTooltipVisible=!1}}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.getTooltipContent=function(e){return"X:"+Math.round(e.x)+" Y:"+Math.round(e.y)},t.prototype.checkConnect=function(e){return!(!Ao(e)||"ConnectorTargetEnd"!==this.endPoint)||!(!Oo(e)||"ConnectorSourceEnd"!==this.endPoint)||!(e.constraints&_n.None||Ao(e)||Oo(e))},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},t}(Ac),Ec=function(e){function t(t,n){var i=e.call(this,t,!0)||this;return i.currentTarget=null,i.objectType=n,i}return Object(s.c)(t,e),t.prototype.mouseDown=function(t){if(t.source instanceof sa||t.source instanceof uo){this.commandHandler.selectObjects([t.source],t.info&&t.info.ctrlKey);var n={nodes:[],connectors:[]};t.source instanceof sa?n.nodes.push(Ul(t.source)):n.connectors.push(Ul(t.source)),this.undoElement=Ul(n)}else this.undoElement=Ul(t.source);this.undoParentElement=this.commandHandler.getSubProcess(t.source),"Port"===this.objectType&&(this.portId=t.sourceWrapper.id),e.prototype.mouseDown.call(this,t),this.initialOffset={x:0,y:0}},t.prototype.mouseUp=function(t,n){var i;this.checkPropertyValue();var r,o=!1,s={nodes:[],connectors:[]};if("Port"!==this.objectType){if(t.source instanceof sa||t.source instanceof uo){t.source instanceof sa?s.nodes.push(Ul(t.source)):s.connectors.push(Ul(t.source)),i=Ul(s);var a=t.source.wrapper;i.offsetX=a.offsetX,i.offsetY=a.offsetY}else i=Ul(t.source);if(!(("helper"!==(r=this.commandHandler.renderContainerHelper(t.source)||t.source).id||i.nodes[0].isLane||i.nodes[0].isPhase)&&"helper"===r.id||r.offsetX===this.undoElement.offsetX&&r.offsetY===this.undoElement.offsetY)){var l=void 0,c=void 0;if(t.source&&(c={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY},l={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY}),this.commandHandler.triggerEvent(Ln.positionChange,u={source:t.source,state:"Completed",oldValue:l,newValue:c,target:this.currentTarget,targetPosition:this.currentPosition,allowDrop:!0,cancel:!1}),!n){this.commandHandler.startGroupAction(),o=!0;var h={type:"PositionChanged",redoObject:Ul(i),undoObject:Ul(this.undoElement),category:"Internal"};if(i.nodes[0]&&i.nodes[0].processId){var d={type:"SizeChanged",category:"Internal",undoObject:this.undoParentElement,redoObject:this.commandHandler.getSubProcess(t.source)};this.commandHandler.addHistoryEntry(d)}this.commandHandler.addHistoryEntry(h)}}var u;if(this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,0,0),this.commandHandler.removeSnap(),this.commandHandler.removeHighlighter(),t.source&&this.currentTarget&&Io(this.currentTarget)&&this.commandHandler.isDroppable(t.source,this.currentTarget)&&(this.commandHandler.drop(this.currentElement,this.currentTarget,this.currentPosition),this.commandHandler.triggerEvent(Ln.drop,u={element:t.source,target:this.currentTarget,position:this.currentPosition,cancel:!1}),!u.cancel&&t.source&&this.commandHandler.isParentAsContainer(this.currentTarget))){for(var p=t.source instanceof fo?t.source.nodes:[t.source],f=!1,g=0;g<p.length;g++)p[g].container||(f=!0,this.commandHandler.dropChildToContainer(this.currentTarget,p[g]),this.commandHandler.renderContainerHelper(p[g]));o&&this.commandHandler.isContainer&&f&&this.commandHandler.endGroupAction()}t.source&&this.currentTarget&&this.commandHandler.dropAnnotation(t.source,this.currentTarget),this.commandHandler.updateSelector(),o&&!this.commandHandler.isContainer&&this.commandHandler.endGroupAction()}else s.nodes.push(Ul(t.source)),i=Ul(s),h={type:"PortPositionChanged",objectId:this.portId,redoObject:Ul(i),undoObject:Ul(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(h);e.prototype.mouseUp.call(this,t)},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var n,i,r=!1;if((n=this.commandHandler.renderContainerHelper(t.source)||t.source)instanceof sa||n instanceof uo?n instanceof sa?n.offsetX===this.undoElement.nodes[0].offsetX&&n.offsetY===this.undoElement.nodes[0].offsetY&&(r=!0):Zt.equals(n.sourcePoint,this.undoElement.connectors[0].sourcePoint)&&Zt.equals(n.targetPoint,this.undoElement.connectors[0].targetPoint)&&(r=!0):n.wrapper.offsetX===this.undoElement.wrapper.offsetX&&n.wrapper.offsetY===this.undoElement.wrapper.offsetY&&(r=!0),n&&(i={offsetX:n.wrapper.offsetX,offsetY:n.wrapper.offsetY}),r&&this.commandHandler.triggerEvent(Ln.positionChange,{source:n,state:"Start",oldValue:i,newValue:i,target:t.target,targetPosition:t.position,allowDrop:!0,cancel:!1}),this.currentPosition=t.position,"Port"!==this.objectType){var o,s=this.initialOffset.x+(this.currentPosition.x-this.prevPosition.x),a=this.initialOffset.y+(this.currentPosition.y-this.prevPosition.y);this.commandHandler.dragOverElement(t,this.currentPosition),this.commandHandler.disConnect(t.source),this.commandHandler.removeSnap();var l=void 0,c=this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,s,a);this.initialOffset.x=s-c.x,this.initialOffset.y=a-c.y,n&&(o={offsetX:n.wrapper.offsetX,offsetY:n.wrapper.offsetY},l={offsetX:n.wrapper.offsetX+c.x,offsetY:n.wrapper.offsetY+c.y}),this.currentTarget&&t.target!==this.currentTarget&&this.commandHandler.removeChildFromBPmn(t.source,t.target,this.currentTarget),this.currentTarget=t.target;var h={source:n,state:"Progress",oldValue:o,newValue:l,target:t.target,targetPosition:t.position,allowDrop:!0,cancel:!1};if(this.commandHandler.triggerEvent(Ln.positionChange,h),!h.cancel){this.blocked=!this.commandHandler.dragSelectedObjects(c.x,c.y);var d=!this.commandHandler.mouseOver(this.currentElement,this.currentTarget,this.currentPosition);this.blocked=this.blocked||d}if(this.commandHandler.removeStackHighlighter(),this.commandHandler.renderStackHighlighter(t),this.currentTarget&&t.source!==this.currentTarget&&this.commandHandler.isDroppable(t.source,this.currentTarget)&&"helper"!==t.source.id){var u=t.source instanceof fo?t.source.nodes[0]:t.source;this.commandHandler.isParentAsContainer(u,!0)||"SwimLane"===u.shape.type||u.shape.isPhase||(this.currentTarget.isLane?this.commandHandler.renderStackHighlighter(t,this.currentTarget):this.commandHandler.drawHighlighter(this.currentTarget))}else this.commandHandler.removeHighlighter();if(this.commandHandler.canEnableDefaultTooltip()){var p=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,p,"MoveTool",this.isTooltipVisible),this.isTooltipVisible=!1}}else{var f=hn(),g=t.source;un(f,-g.rotateAngle,g.offsetX,g.offsetY);var m=dn(f,{x:this.prevPosition.x,y:this.prevPosition.y}),y=dn(f,{x:t.position.x,y:t.position.y});this.commandHandler.portDrag(t.source,t.sourceWrapper,y.x-m.x,y.y-m.y)}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.getTooltipContent=function(e){return"X:"+Math.round(e.wrapper.bounds.x)+" Y:"+Math.round(e.wrapper.bounds.y)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},t}(Ac),Ic=function(e){function t(t){return e.call(this,t,!0)||this}return Object(s.c)(t,e),t.prototype.mouseDown=function(t){if(this.undoElement=Ul(t.source),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var n=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),i=0;i<n.length;i++){var r=this.commandHandler.cloneChild(n[i].id);this.childTable[n[i].id]=Ul(r)}e.prototype.mouseDown.call(this,t)},t.prototype.mouseUp=function(t){var n;if(this.checkPropertyValue(),n=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.rotateAngle!==n.wrapper.rotateAngle){var i,r={rotateAngle:n.wrapper.rotateAngle};this.commandHandler.triggerEvent(Ln.rotateChange,{source:t.source,state:"Completed",oldValue:r,newValue:r,cancel:!1}),i=Ul(t.source);var o={type:"RotationChanged",redoObject:Ul(i),undoObject:Ul(this.undoElement),category:"Internal",childTable:this.childTable};this.commandHandler.addHistoryEntry(o),this.commandHandler.updateSelector()}e.prototype.mouseUp.call(this,t)},t.prototype.mouseMove=function(t){var n;if(e.prototype.mouseMove.call(this,t),n=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.rotateAngle===n.wrapper.rotateAngle){var i={rotateAngle:n.wrapper.rotateAngle};this.commandHandler.triggerEvent(Ln.rotateChange,{source:t.source,state:"Start",oldValue:i,newValue:i,cancel:!1})}this.currentPosition=t.position;var r=Zt.findAngle({x:n.wrapper.offsetX,y:n.wrapper.offsetY},this.currentPosition)+90,o=this.commandHandler.snapAngle(r),s={source:t.source,state:"Progress",oldValue:{rotateAngle:n.wrapper.rotateAngle},newValue:{rotateAngle:r=((r=0!==o?o:r)+360)%360},cancel:!1};if(this.commandHandler.triggerEvent(Ln.rotateChange,s),s.cancel||(this.blocked=!this.commandHandler.rotateSelectedItems(r-n.wrapper.rotateAngle)),this.commandHandler.canEnableDefaultTooltip()){var a=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,a,"RotateTool",this.isTooltipVisible),this.isTooltipVisible=!1}return!this.blocked},t.prototype.getTooltipContent=function(e){return Math.round(e.rotateAngle%360).toString()+"\xb0"},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(Ac),Dc=function(e){function t(t,n){var i=e.call(this,t,!0)||this;return i.initialBounds=new an,i.corner=n,i}return Object(s.c)(t,e),t.prototype.mouseDown=function(t){if(this.undoElement=Ul(t.source),this.undoParentElement=this.commandHandler.getSubProcess(t.source),e.prototype.mouseDown.call(this,t),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var n=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),i=0;i<n.length;i++){var r=this.commandHandler.cloneChild(n[i].id);this.childTable[n[i].id]=Ul(r)}this.commandHandler.checkSelection(t.source,this.corner),e.prototype.mouseDown.call(this,t),this.initialBounds.x=t.source.wrapper.offsetX,this.initialBounds.y=t.source.wrapper.offsetY,this.initialBounds.height=t.source.wrapper.actualSize.height,this.initialBounds.width=t.source.wrapper.actualSize.width},t.prototype.mouseUp=function(t,n){var i;if(this.checkPropertyValue(),this.commandHandler.removeSnap(),i=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.offsetX!==i.wrapper.offsetX||this.undoElement.offsetY!==i.wrapper.offsetY){var r=this.updateSize(t.source,this.currentPosition,this.prevPosition,this.corner,this.initialBounds);this.blocked=this.scaleObjects(r.width,r.height,this.corner,this.currentPosition,this.prevPosition,i);var o={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height};this.commandHandler.triggerEvent(Ln.sizeChange,{source:t.source,state:"Completed",oldValue:o,newValue:o,cancel:!1});var s=Ul(t.source),a={type:"SizeChanged",redoObject:Ul(s),undoObject:Ul(this.undoElement),category:"Internal",childTable:this.childTable};if(!n){if(this.commandHandler.startGroupAction(),this.commandHandler.addHistoryEntry(a),s.nodes[0]&&s.nodes[0].processId){var l={type:"SizeChanged",redoObject:this.commandHandler.getSubProcess(t.source),undoObject:this.undoParentElement,category:"Internal"};this.commandHandler.addHistoryEntry(l)}this.commandHandler.endGroupAction()}}return e.prototype.mouseUp.call(this,t),!this.blocked},t.prototype.mouseMove=function(t){var n;e.prototype.mouseMove.call(this,t),n=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.offsetX===n.wrapper.offsetX&&this.undoElement.offsetY===n.wrapper.offsetY&&this.commandHandler.triggerEvent(Ln.sizeChange,{source:t.source,state:"Start",oldValue:{offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},newValue:this.currentElement,cancel:!1}),this.currentPosition=t.position;var i={x:this.currentPosition.x-this.startPosition.x,y:this.currentPosition.y-this.startPosition.y};i=ec(-this.currentElement.wrapper.rotateAngle,void 0,void 0,i),i=this.getChanges(i),this.commandHandler.removeSnap();var r=this.updateSize(t.source,this.startPosition,this.currentPosition,this.corner,this.initialBounds);if(this.blocked=!this.scaleObjects(r.width,r.height,this.corner,this.startPosition,this.currentPosition,n),this.commandHandler.canEnableDefaultTooltip()){var o=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,o,"ResizeTool",this.isTooltipVisible),this.isTooltipVisible=!1}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.getTooltipContent=function(e){return"W:"+Math.round(e.wrapper.bounds.width)+" H:"+Math.round(e.wrapper.bounds.height)},t.prototype.getChanges=function(e){switch(this.corner){case"ResizeEast":return{x:e.x,y:0};case"ResizeSouthEast":return e;case"ResizeSouth":return{x:0,y:e.y};case"ResizeNorth":return{x:0,y:-e.y};case"ResizeNorthEast":return{x:e.x,y:-e.y};case"ResizeNorthWest":return{x:-e.x,y:-e.y};case"ResizeWest":return{x:-e.x,y:0};case"ResizeSouthWest":return{x:-e.x,y:e.y}}return e},t.prototype.scaleObjects=function(e,t,n,i,r,o){o instanceof fo&&1===o.nodes.length&&o.nodes[0].constraints&An.AspectRatio&&("ResizeWest"===n||"ResizeEast"===n||"ResizeNorth"===n||"ResizeSouth"===n?1===t&&1===e||(t=e=Math.max(1===t?0:t,1===e?0:e)):t=e=i!==r?Math.max(t,e):0);var s,a={offsetX:o.offsetX,offsetY:o.offsetY,width:o.width,height:o.height};return this.blocked=this.commandHandler.scaleSelectedItems(e,t,this.getPivot(this.corner)),this.commandHandler.triggerEvent(Ln.sizeChange,s={source:o,state:"Progress",oldValue:a,newValue:{offsetX:o.offsetX,offsetY:o.offsetY,width:o.width,height:o.height},cancel:!1}),s.cancel&&this.commandHandler.scaleSelectedItems(1/e,1/t,this.getPivot(this.corner)),this.blocked},t}(Ac),kc=function(e){function t(t,n){var i=e.call(this,t,!0)||this;return i.sourceObject=n,i}return Object(s.c)(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.inAction=!0},t.prototype.mouseMove=function(t){var n;if(e.prototype.mouseMove.call(this,t),this.drawingObject||(this.drawingObject=this.commandHandler.drawObject({offsetX:this.currentPosition.x,width:3,height:3,offsetY:this.currentPosition.y})),this.inAction&&!1===Zt.equals(this.currentPosition,this.prevPosition)){var i=an.toBounds([this.prevPosition,this.currentPosition]);(n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,i))&&this.commandHandler.updateNodeDimension(this.drawingObject,i)}return n},t.prototype.mouseUp=function(t){this.checkPropertyValue();var n=an.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.checkBoundaryConstraints(void 0,void 0,n),this.drawingObject&&this.drawingObject instanceof sa&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.drawingObject=null),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(Ac),Pc=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.sourceObject=i,r}return Object(s.c)(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.inAction=!0},t.prototype.mouseMove=function(t){return this.inAction&&(this.drawingObject||(this.drawingObject=this.commandHandler.drawObject({sourcePoint:this.currentPosition,targetPoint:this.currentPosition})),t.source=this.drawingObject,t.target&&("ConnectorTargetEnd"!==this.endPoint||xo(t.target))&&this.commandHandler.connect(this.endPoint,t),this.endPoint="ConnectorTargetEnd"),this.inAction||(this.commandHandler.updateSelector(),t.source&&t.sourceWrapper&&this.commandHandler.renderHighlighter(t,!0)),e.prototype.mouseMove.call(this,t),!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.drawingObject&&this.drawingObject instanceof uo&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.drawingObject=null),this.inAction=!1,e.prototype.mouseUp.call(this,t)},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(Oc),Tc=function(e){function t(t){return e.call(this,t,!0)||this}return Object(s.c)(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.commandHandler.clearSelection(),t.source||(this.drawingNode=this.commandHandler.drawObject({shape:{type:"Text"},offsetX:this.currentPosition.x,width:50,height:20,offsetY:this.currentPosition.y}))},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.drawingNode?(this.drawingNode.style.strokeColor="black",this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent"):this.drawingNode=this.commandHandler.drawObject({shape:{type:"Text"},offsetX:this.currentPosition.x,width:30,height:30,style:{strokeDashArray:"2 2",fill:"transparent"},offsetY:this.currentPosition.y}),this.inAction&&!1===Zt.equals(this.currentPosition,this.prevPosition)){var n=an.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.updateNodeDimension(this.drawingNode,n)}return!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.drawingNode?(this.drawingNode.style.strokeColor="none",this.drawingNode.style.fill="none"):this.drawingNode=t.source,this.drawingNode&&(this.drawingNode instanceof sa||this.drawingNode instanceof uo)&&this.commandHandler.addText(this.drawingNode,this.currentPosition),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(Ac),Mc=function(e){function t(t,n){var i=e.call(this,t)||this;return i.zooming=n,i}return Object(s.c)(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.inAction=!0},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction)if(this.zooming||!1!==Zt.equals(this.currentPosition,this.prevPosition)){if(t.moveTouches&&t.moveTouches.length&&t.moveTouches.length>=2){var n=t.startTouches[0],i=t.startTouches[1],r=t.moveTouches[0],o=t.moveTouches[1],s=this.getDistance(r,o)/this.getDistance(n,i);this.commandHandler.zoom(s,0,0,t.position),this.updateTouch(n,r),this.updateTouch(i,o)}}else this.commandHandler.scroll(this.currentPosition.x-this.prevPosition.x,this.currentPosition.y-this.prevPosition.y,this.currentPosition);return!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.getDistance=function(e,t){var n=t.pageX-e.pageX,i=t.pageY-e.pageY;return Math.sqrt(n*n+i*i)},t.prototype.updateTouch=function(e,t){e.pageX=t.pageX,e.pageY=t.pageY},t}(Ac),jc=function(e){function t(t){return e.call(this,t,!0)||this}return Object(s.c)(t,e),t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.commandHandler.initExpand(t),e.prototype.mouseUp.call(this,t)},t}(Ac),Rc=function(e){function t(t){return e.call(this,t,!0)||this}return Object(s.c)(t,e),t.prototype.mouseUp=function(t){this.checkPropertyValue(),window.open(t.sourceWrapper.hyperlink.link,"_blank").focus(),e.prototype.mouseUp.call(this,t)},t}(Ac),Lc=function(e){function t(t){return e.call(this,t,!0)||this}return Object(s.c)(t,e),t.prototype.mouseDown=function(t){if(e.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var n=void 0,i=this.drawingObject.shape;this.drawingObject.shape.points.push(n={x:(n=i.points[i.points.length-1]).x,y:n.y})}else this.startPoint={x:this.startPosition.x,y:this.startPosition.y},this.drawingObject=this.commandHandler.drawObject({offsetX:this.currentPosition.x,offsetY:this.currentPosition.y,width:5,height:5,style:{strokeColor:"black",strokeWidth:1},shape:{type:"Basic",shape:"Polygon",points:[{x:this.startPoint.x,y:this.startPoint.y},{x:this.currentPosition.x,y:this.currentPosition.y}]}})},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction){var n=this.drawingObject.shape;if(this.drawingObject&&this.currentPosition&&(n.points[n.points.length-1].x=this.currentPosition.x,n.points[n.points.length-1].y=this.currentPosition.y,this.drawingObject.wrapper.children[0].data=Jt(this.drawingObject.shape.points),this.inAction&&!1===Zt.equals(this.currentPosition,this.prevPosition))){var i=an.toBounds(this.drawingObject.shape.points);this.commandHandler.updateNodeDimension(this.drawingObject,i)}}return!0},t.prototype.mouseUp=function(t,n){this.checkPropertyValue(),e.prototype.mouseMove.call(this,t),this.inAction&&(this.inAction=!1,this.drawingObject&&this.commandHandler.addObjectToDiagram(this.drawingObject)),this.endAction()},t.prototype.mouseWheel=function(t){e.prototype.mouseWheel.call(this,t),this.mouseMove(t)},t.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null},t}(Ac),_c=function(e){function t(t){return e.call(this,t,!0)||this}return Object(s.c)(t,e),t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction){var n=this.drawingObject;n.targetPoint=this.currentPosition,this.commandHandler.updateConnectorPoints(n)}return!0},t.prototype.mouseDown=function(t){if(e.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var n=this.drawingObject,i=void 0;(i=new eo(n,"segments",{type:"Straight"},!0)).point=this.currentPosition,n.segments[n.segments.length-1]=i}else this.drawingObject=this.commandHandler.drawObject({id:"Connector",type:"Straight",sourcePoint:this.currentPosition,targetPoint:this.currentPosition})},t.prototype.mouseWheel=function(t){e.prototype.mouseWheel.call(this,t),this.mouseMove(t)},t.prototype.mouseUp=function(t){this.checkPropertyValue(),e.prototype.mouseMove.call(this,t),this.inAction&&this.drawingObject&&this.commandHandler.addObjectToDiagram(this.drawingObject),this.endAction()},t.prototype.endAction=function(){this.drawingObject=null,this.inAction=!1},t}(Ac),Nc=function(e){function t(t){return e.call(this,t,!0)||this}return Object(s.c)(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.undoElement=Ul(t.source),this.annotationId=t.sourceWrapper.id,e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var n=this.currentPosition.x-this.prevPosition.x,i=this.currentPosition.y-this.prevPosition.y,r=t.source;if(r instanceof sa){var o=hn();un(o,-r.rotateAngle,0,0);var s=dn(o,{x:n,y:i});n=s.x,i=s.y}return this.inAction&&(this.commandHandler.labelDrag(t.source,t.sourceWrapper,n,i),this.commandHandler.updateSelector()),this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue();var n=t.source;this.inAction=!1;var i={type:"AnnotationPropertyChanged",objectId:this.annotationId,undoObject:Ul(this.undoElement),category:"Internal",redoObject:Ul(n)};this.commandHandler.addHistoryEntry(i),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t}(Ac),Bc=function(e){function t(t,n){var i=e.call(this,t,!0)||this;return i.corner=n,i}return Object(s.c)(t,e),t.prototype.mouseDown=function(t){this.inAction=!0;var n=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];this.annotationId=t.source.wrapper.children[0].id,this.undoElement=Ul(n);var i=t.source.wrapper.children[0];this.initialBounds={x:i.offsetX,y:i.offsetY,width:i.actualSize.width,height:i.actualSize.height},e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){return e.prototype.mouseMove.call(this,t),this.inAction&&this.resizeObject(t),!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue();var n=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];this.inAction=!1;var i={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:Ul(n),undoObject:Ul(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(i),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.resizeObject=function(e){var t,n,i,r=e.source.wrapper.children[0],o={x:r.offsetX,y:r.offsetY},s=r.rotateAngle;s=((s+=(t=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0])instanceof sa?t.rotateAngle:0)+360)%360;var a=hn();un(a,s,o.x,o.y);var l=this.corner.slice(5),c=this.updateSize(r,this.startPosition,this.currentPosition,l,this.initialBounds,s),h=r.offsetX-r.actualSize.width*r.pivot.x,d=r.offsetY-r.actualSize.height*r.pivot.y,u=this.getPivot(l),p=dn(a,u={x:h+r.actualSize.width*u.x,y:d+r.actualSize.height*u.y});c.x=p.x,c.y=p.y,this.commandHandler.labelResize(t,e.source.annotation,n=(n=c.width)<0?1:n,i=(i=c.height)<0?1:i,c,e.source),this.commandHandler.updateSelector()},t}(Ac),Fc=function(e){function t(t){return e.call(this,t,!0)||this}return Object(s.c)(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.annotationId=t.source.wrapper.children[0].id,this.undoElement=Ul(t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0]),e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){return e.prototype.mouseMove.call(this,t),t.source&&this.inAction&&(this.commandHandler.labelRotate(t.source.nodes[0]?t.source.nodes[0]:t.source.connectors[0],t.source.annotation,this.currentPosition,t.source),this.commandHandler.updateSelector()),this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:Ul(t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0]),undoObject:Ul(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t}(Ac),zc=function(e){function t(t,n){var i=e.call(this,t,!0)||this;return i.endPoint=n,i}return Object(s.c)(t,e),t.prototype.mouseDown=function(t){var n;this.inAction=!0,this.undoElement=Ul(t.source),e.prototype.mouseDown.call(this,t),t.source&&t.source.connectors&&(n=t.source.connectors[0]);for(var i=0;i<n.segments.length;i++){var r=n.segments[i];if("OrthoThumb"===this.endPoint)for(var o=0;o<r.points.length-1;o++){var s={x:0,y:0};s.x=(r.points[o].x+r.points[o+1].x)/2,s.y=(r.points[o].y+r.points[o+1].y)/2,yc(this.currentPosition,s,30)&&(this.selectedSegment=r,this.segmentIndex=o)}else yc(this.currentPosition,r.point,10)&&(this.selectedSegment=r)}},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.currentPosition=t.position,this.currentPosition&&this.prevPosition){var n=this.currentPosition.y-this.prevPosition.y,i=this.currentPosition.x-this.prevPosition.x;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var r=void 0;if(t.source&&t.source.connectors&&(r=t.source.connectors[0]),this.inAction&&void 0!==this.endPoint&&0!==i||0!==n){if("OrthoThumb"===this.endPoint)this.blocked=!this.dragOrthogonalSegment(r,this.selectedSegment,this.currentPosition,this.segmentIndex);else{var o=this.currentPosition.x-this.selectedSegment.point.x,s=this.currentPosition.y-this.selectedSegment.point.y,a=r.segments.indexOf(this.selectedSegment);this.blocked=!this.commandHandler.dragControlPoint(r,o,s,!1,a)}this.commandHandler.updateSelector()}}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){var n,i,r;if(t.source&&t.source.connectors&&(i={segments:(n=t.source.connectors[0]).segments}),t&&t.source&&t.info&&t.info.ctrlKey&&t.info.shiftKey&&"Straight"===n.type)this.addOrRemoveSegment(n,this.currentPosition);else if("OrthoThumb"===this.endPoint&&this.selectedSegment){var o=n.segments.indexOf(this.selectedSegment),s=n.segments[o-1],a=n.segments[o+1];if(o===n.segments.length-2&&this.updateLastSegment(n,this.selectedSegment))n.segments.splice(n.segments.length-2,1);else if(s&&Math.abs(s.length)<5)1!==o&&this.removePrevSegment(n,o);else if(a){var l=Zt.distancePoints(a.points[0],a.points[1]);Math.abs(a.length||0===a.length?a.length:l)<=5&&this.removeNextSegment(n,o)}this.commandHandler.updateEndPoint(n,i)}this.undoElement&&(r=Ul(t.source),this.commandHandler.addHistoryEntry({type:"SegmentChanged",redoObject:r,undoObject:this.undoElement,category:"Internal"})),e.prototype.mouseUp.call(this,t)},t.prototype.removePrevSegment=function(e,t){var n=e.segments[t-2],i=e.segments[t+1];if(!((i.length||0===i.length?i.length:Zt.distancePoints(i.points[0],i.points[1]))<=5)){var r=e.segments[t+1];e.segments.splice(t-1,2);var o=this.selectedSegment;"Left"===o.direction||"Right"===o.direction?(n.points[n.points.length-1].x=r.points[0].x,r.points[0].y=n.points[n.points.length-1].y):(n.points[n.points.length-1].y=r.points[0].y,r.points[0].x=n.points[n.points.length-1].x),(o.length||0===o.length)&&this.findSegmentDirection(n),this.findSegmentDirection(r)}},t.prototype.findSegmentDirection=function(e){e.direction&&(e.length||0===e.length)&&(e.length=Zt.distancePoints(e.points[0],e.points[e.points.length-1]),e.direction=Zt.direction(e.points[0],e.points[e.points.length-1]))},t.prototype.removeNextSegment=function(e,t){var n=this.selectedSegment,i=e.segments[t-1],r=e.segments[t+2],o=e.segments[t+1];if(o.length||0===o.length?(e.segments.splice(t,2),"Top"===n.direction||"Bottom"===n.direction?(r.points[0].y=n.points[0].y,i.points[i.points.length-1].x=r.points[0].x):(r.points[0].x=n.points[0].x,i.points[i.points.length-1].y=r.points[0].y)):(e.segments.splice(t+1,1),"Top"===n.direction||"Bottom"===n.direction?i.points[i.points.length-1].x=o.points[o.points.length-1].x:i.points[i.points.length-1].y=o.points[o.points.length-1].y,this.findSegmentDirection(i),n.length=n.direction=null),i&&r&&(i.length=Zt.distancePoints(i.points[0],r.points[0]),i.direction=Zt.direction(i.points[0],r.points[0]),r.length||0===r.length)){r.length=Zt.distancePoints(i.points[i.points.length-1],r.points[r.points.length-1]);var s=i.points,a=r.points;r.direction=Zt.direction(s[s.length-1],a[a.length-1])}},t.prototype.addOrRemoveSegment=function(e,t){for(var n,i,r={segments:e.segments},o=0;o<e.segments.length;o++)yc(t,(s=e.segments[o]).point,e.hitPadding)&&(i=o,n=!0);if(n&&void 0!==i){if(e.segments&&e.segments[i]&&"Straight"===e.segments[i].type){var s=e.segments[i],a=e.segments[i+1];a&&(e.segments.splice(i,1),a.points[0]=s.points[0])}}else{var l=this.findIndex(e,t);if(e.segments&&e.segments[l]&&"Straight"===e.segments[l].type){s=e.segments[l];var c=new eo(e,"segments",{type:"Straight",point:t},!0);c.points[0]=s.points[0],c.points[1]=t,s.points[0]=t,e.segments.splice(l,0,c),n=!0}}n&&this.commandHandler.updateEndPoint(e,r)},t.prototype.findIndex=function(e,t){for(var n=[],i=0;i<e.segments.length;i++){var r=e.segments[i],o=an.toBounds([r.points[0],r.points[1]]);o.Inflate(e.hitPadding),o.containsPoint(t)&&n.push(r)}if(1===n.length)return e.segments.indexOf(n[0]);var s=void 0,a=void 0,l=void 0,c=void 0;for(i=0;i<n.length;i++)c=n[i],s=Math.abs((t.y-c.points[0].y)/(c.points[1].y-t.y)-(t.x-c.points[0].x)/(c.points[1].x-t.x)),0===i&&(a=s,l=0),s<a&&(a=s,l=i);return e.segments.indexOf(n[l])},t.prototype.dragOrthogonalSegment=function(e,t,n,i){var r={x:0,y:0},o={segments:e.segments};r.x=(t.points[i].x+t.points[i+1].x)/2,r.y=(t.points[i].y+t.points[i+1].y)/2;var s=n.y-r.y,a=n.x-r.x,l=e.segments.indexOf(t),c=!1;return t.points[0].y.toFixed(2),t.points[1].y.toFixed(2),-1!==l&&(0===l&&1===e.segments.length&&2===t.points.length?(l=this.addSegments(e,t,a,s,l),c=!0):l!==e.segments.length-1||null!==t.direction&&null!==t.length?0===l&&(l=this.insertFirstSegment(e,t,a,s,l),c=!0):(l=this.addTerminalSegment(e,t,a,s,i),c=!0),c&&(this.selectedSegment=t=e.segments[l],this.segmentIndex=0),this.updateAdjacentSegments(e,l,a,s),this.commandHandler.updateEndPoint(e,o)),!0},t.prototype.addSegments=function(e,t,n,i,r){var o=[],s=Zt.distancePoints(t.points[0],t.points[1]),a=Zt.direction(t.points[0],t.points[1]);return o.push(new no(e,"segments",{type:"Orthogonal",direction:a,length:s/4},!0)),o.push(new no(e,"segments",{type:"Orthogonal",direction:t.points[0].y===t.points[1].y?i>0?"Bottom":"Top":n>0?"Right":"Left",length:t.points[0].x===t.points[1].x?i:n},!0)),o.push(new no(e,"segments",{type:"Orthogonal",direction:a,length:s/2},!0)),e.segments=o.concat(e.segments),r+2},t.prototype.insertFirstSegment=function(e,t,n,i,r){var o,s,a,l,c=[];if(e.sourcePortID&&t.length&&e.segments[0].points.length>2){e.segments.splice(0,1);for(var h=void 0,d=0;d<t.points.length-1;d++){var u=Zt.distancePoints(t.points[d],t.points[d+1]),p=Zt.direction(t.points[d],t.points[d+1]);0===(l=new no(e,"segments",{type:"Orthogonal",direction:p,length:u},!0)).length&&(l.direction=!h||"Top"!==h.direction&&"Bottom"!==h.direction?i>0?"Bottom":"Top":n>0?"Right":"Left"),h=l,c.push(l)}e.segments=c.concat(e.segments),a=1}else{c.push(new no(e,"segments",{type:"Orthogonal",direction:t.direction,length:t.length/3},!0)),"Bottom"===t.direction||"Top"===t.direction?(s=Math.abs(n),o=n>0?"Right":"Left"):(s=Math.abs(i),o=i>0?"Bottom":"Top"),l=new no(e,"segments",{type:"Orthogonal",direction:o,length:s},!0),c.push(l);var f=e.segments[1];f&&f.length&&(f.length=o!==f.direction?f.length+s:f.length-s),a=2,t.length=2*t.length/3,e.segments=c.concat(e.segments)}return a},t.prototype.updateAdjacentSegments=function(e,t,n,i){var r=e.segments[t],o=r.points[r.points.length-1],s=!0;"Orthogonal"===r.type&&(r.points[0]=r.points[0],r.points[r.points.length-1]=o,e.segments[t-1]&&(s=this.updatePreviousSegment(n,i,e,t)),e.segments.length-1>t&&s&&this.updateNextSegment(e,r,e.segments[t+1],n,i))},t.prototype.addTerminalSegment=function(e,t,n,i,r){var o,s,a,l,c={segments:e.segments},h=e.segments.indexOf(t);e.segments.pop();var d=e.segments[e.segments.length-1];o=d&&"Orthogonal"===d.type?d:null;for(var u=0;u<t.points.length-2;u++)a=Zt.distancePoints(t.points[u],t.points[u+1]),l=Zt.direction(t.points[u],t.points[u+1]),s=new no(e,"segments",{type:"Orthogonal",length:a,direction:l},!0),e.segments.push(s),o=s;var p,f=r;2!==t.points.length&&f!==t.points.length-2||(o&&(o.length+=5),void 0===f)||(a=2*Zt.distancePoints(t.points[t.points.length-2],t.points[t.points.length-1])/3,l=Zt.direction(t.points[t.points.length-2],t.points[t.points.length-1]),p=new no(e,"segments",{type:"Orthogonal",length:a,direction:l}),e.segments.push(p));var g=new no(e,"segments",{type:"Orthogonal"},!0);return e.segments.push(g),this.commandHandler.updateEndPoint(e,c),h+r},t.prototype.updatePortSegment=function(e,t,n,i,r){if(1===n&&2===e.points.length&&e.length<0){var o,s=t.sourceWrapper.corners,a=t.segments[n],l=t.segments[n+1],c=void 0,h=[];c=new no(t,"segments",{type:"Orthogonal",length:13,direction:e.direction}),h.push(c),c=new no(t,"segments",{type:"Orthogonal",length:o="Left"===a.direction?a.points[0].x-(s.middleLeft.x-20):"Right"===a.direction?s.middleRight.x+20-a.points[0].x:"Bottom"===a.direction?s.bottomCenter.y+20-a.points[0].y:a.points[0].y-(s.topCenter.y-20),direction:a.direction}),h.push(c),a.length=a.length-o,l&&l.length&&l.direction&&(l.direction===e.direction?l.length-=13:l.direction===Wr(e.direction)&&(l.length+=13)),t.segments=h.concat(t.segments),this.selectedSegment=t.segments[3]}},t.prototype.updatePreviousSegment=function(e,t,n,i){var r=n.segments[i],o=n.segments[i-1];o.points[o.points.length-1]=r.points[0];var s=!n.sourceID||""!==n.sourcePortID,a=!0;return"Orthogonal"===o.type&&("Bottom"===o.direction?o.length+=t:"Top"===o.direction?o.length-=t:"Right"===o.direction?o.length+=e:o.length-=e,""!==n.sourcePortID&&o.length<0?this.updatePortSegment(o,n,i,e,t):n.sourceID&&""===n.sourcePortID&&o.length<0&&1===i&&(a=!1,this.updateFirstSegment(n,r)),s&&this.changeSegmentDirection(o)),a},t.prototype.changeSegmentDirection=function(e){e.length<0&&(e.direction=Wr(e.direction),e.length*=-1)},t.prototype.updateNextSegment=function(e,t,n,i,r){n.points[0]=t.points[t.points.length-1],n&&"Orthogonal"===n.type&&(n.length||0===n.length)&&("Left"===n.direction||"Right"===n.direction?0!==i&&(n.length="Right"===n.direction?n.length-i:n.length+i,(n.length||0===n.length)&&this.changeSegmentDirection(n)):0!==r&&(n.length="Bottom"===n.direction?n.length-r:n.length+r,(n.length||0===n.length)&&this.changeSegmentDirection(n)))},t.prototype.updateFirstSegment=function(e,t){var n,i=e.segments.indexOf(t),r=!1,o=e.segments[i],s=e.segments[i-1],a={segments:e.segments};if(s.length<0&&e.sourceID){var l=e.sourceWrapper.corners,c=[],h=!1;this.changeSegmentDirection(o);var d=e.segments[i+1],u=e.segments[i+2];switch(d&&this.changeSegmentDirection(d),u&&this.changeSegmentDirection(u),s.direction){case"Top":case"Bottom":n=o.length>0&&"Left"===o.direction?l.middleLeft:l.middleRight,o.length>l.width/2?Math.abs(s.length)<l.height/2&&(s.length=Zt.distancePoints(l.center,s.points[s.points.length-1]),o.points[0].x=n.x,o.length=Zt.distancePoints(o.points[0],o.points[o.points.length-1]),o.length-=20,r=!0):(d&&d.direction&&d.length&&(d.points[0].y=n.y,d.points[0].x=d.points[d.points.length-1].x="Right"===o.direction?n.x+20:n.x-20),r=!0,h=!0);break;case"Left":case"Right":n=o.length>0&&"Top"===o.direction?l.topCenter:l.bottomCenter,o.length>l.height/2?Math.abs(s.length)<l.width/2&&(s.length=Zt.distancePoints(l.center,s.points[s.points.length-1]),o.points[0].y=n.y,o.length=Zt.distancePoints(o.points[0],o.points[o.points.length-1]),o.length-=20,r=!0):(d&&d.direction&&d.length&&(d.points[0].x=n.x,d.points[0].y=d.points[d.points.length-1].y="Bottom"===o.direction?n.y+20:n.y-20),r=!0,h=!0)}this.changeSegmentDirection(s),this.changeSegmentDirection(o),r&&(c.push(new no(e,"segments",{type:"Orthogonal",direction:o.direction,length:20},!0)),h&&(d&&d.direction&&d.length&&(d.length=Zt.distancePoints(d.points[0],d.points[d.points.length-1])),u&&u.direction&&u.length&&(u.length=Zt.distancePoints(d.points[d.points.length-1],u.points[u.points.length-1])),e.segments.splice(i-1,2)),e.segments=c.concat(e.segments)),this.selectedSegment=h?e.segments[i-1]:e.segments[i+1],this.commandHandler.updateEndPoint(e,a)}},t.prototype.updateLastSegment=function(e,t){if(e.targetID&&""===e.targetPortID){var n=void 0,i=void 0,r=void 0,o=void 0,s=e.targetWrapper.corners,a=t.points[0],l=t.points[t.points.length-1];return"Right"===t.direction||"Left"===t.direction?(n={x:a.x,y:a.y},i={x:"Left"===t.direction?l.x-s.width/2:l.x+s.width/2,y:l.y},r={x:s.center.x,y:s.center.y-s.height},o={x:s.center.x,y:s.center.y+s.height}):(n={x:a.x,y:a.y},i={x:l.x,y:"Bottom"===t.direction?l.y+s.height/2:l.y-s.height/2},r={x:s.center.x-s.width,y:s.center.y},o={x:s.center.x+s.width,y:s.center.y}),Ta({x1:n.x,y1:n.y,x2:i.x,y2:i.y},{x1:r.x,y1:r.y,x2:o.x,y2:o.y}).enabled}return!1},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"ConnectorEditingTool"},t}(Ac),Hc=function(){function e(e,t){this.currentAction="None",this.focus=!1,this.isBlocked=!1,this.isMouseDown=!1,this.inAction=!1,this.doingAutoScroll=!1,this.diagram=null,this.objectFinder=null,this.tool=null,this.eventArgs=null,this.diagram=e,this.objectFinder=new Vc,this.commandHandler=t}return Object.defineProperty(e.prototype,"action",{get:function(){return this.currentAction},set:function(e){e!==this.currentAction&&("PortDraw"===this.currentAction&&(this.diagram.tool&=~In.DrawOnce,this.tool&&this.tool.mouseUp({position:this.currentPosition}),this.tool=null),"Rotate"===e||"LabelRotate"===e?this.diagram.diagramCanvas.classList.add("e-diagram-rotate"):"Rotate"!==this.currentAction&&"LabelRotate"!==this.currentAction||this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),this.currentAction=e,this.diagram.diagramActions="None"===this.currentAction||"Select"===this.currentAction||this.diagram.diagramActions&Tn.TextEdit?this.diagram.diagramActions&~Tn.ToolAction:this.diagram.diagramActions|Tn.ToolAction,this.diagram.setCursor(this.diagram.getCursor(e,this.inAction)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blocked",{get:function(){return this.isBlocked},set:function(e){this.isBlocked=e,this.diagram.setCursor(this.blocked?"not-allowed":this.diagram.getCursor(this.action,this.inAction))},enumerable:!0,configurable:!0}),e.prototype.getMousePosition=function(e){var t,n,i;-1!==e.type.indexOf("touch")?(n=(t=e).changedTouches[0].clientX,i=t.changedTouches[0].clientY):(n=e.clientX,i=e.clientY);var r=new Xt;r=ma(this.diagram);var o=this.diagram.element.getBoundingClientRect();return n=n+this.diagram.diagramCanvas.scrollLeft-o.left-r.width,i=i+this.diagram.diagramCanvas.scrollTop-o.top-r.height,n/=this.diagram.scroller.transform.scale,i/=this.diagram.scroller.transform.scale,{x:n-=this.diagram.scroller.transform.tx,y:i-=this.diagram.scroller.transform.ty}},e.prototype.windowResize=function(e){var t=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){t.updateViewPortSize(t.diagram.element)},300),!1},e.prototype.updateViewPortSize=function(e){var t=document.getElementById(e.id);if(t){var n=t.getBoundingClientRect();this.diagram.scroller.setViewPortSize(n.width,n.height);var i=new Xt;i=ma(this.diagram);var r=this.diagram.getSizeValue(this.diagram.width,i.width),o=this.diagram.getSizeValue(this.diagram.height,i.height);this.diagram.diagramCanvas.style.width=r,this.diagram.diagramCanvas.style.height=o,this.diagram.scroller.setSize(),this.diagram.transformLayers(),this.diagram.rulerSettings.showRulers&&fa(this.diagram)}},e.prototype.canHideResizers=function(){return(this.tool instanceof Ec||this.tool instanceof Ic)&&this.isMouseDown},e.prototype.updateCursor=function(){if(1===this.diagram.selectedItems.nodes.length||1===this.diagram.selectedItems.connectors.length){var e=[];e=e.concat(this.diagram.selectedItems.nodes,this.diagram.selectedItems.connectors),this.blocked=this.isMouseDown&&1===e.length&&this.tool instanceof Sc&&!mo(e[0])}},e.prototype.isForeignObject=function(e,t){var n=e;if(n)for(;null!==n.parentNode;){if("string"==typeof n.className&&(!t&&-1!==n.className.indexOf("foreign-object")||t&&-1!==n.className.indexOf("e-diagram-text-edit")))return n;n=n.parentNode}return null},e.prototype.isMetaKey=function(e){return navigator.platform.match("Mac")?e.metaKey:e.ctrlKey},e.prototype.renderUmlHighLighter=function(e){this.diagram.commandHandler.removeStackHighlighter();var t=this.diagram.selectedItems.nodes[0];if(t&&t.container&&"Stack"===t.container.type&&"UmlClassifier"===t.shape.type&&!t.wrapper.bounds.containsPoint(this.currentPosition)){var n=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),i=this.diagram.findObjectUnderMouse(n,this.action,this.inAction);i&&i.parentId&&i.parentId===t.id&&ns(i.wrapper,"Vertical"===this.diagram.nameTable[i.parentId].container.orientation,e.position,this.diagram,!0)}},e.prototype.isDeleteKey=function(e,t){return navigator.platform.match("Mac")&&"Backspace"===e&&"delete"===t},e.prototype.isMouseOnScrollBar=function(e){var t=e.offsetX,n=e.offsetY,i=this.diagram.diagramCanvas,r=i.offsetHeight,o=i.offsetWidth;return!!(r<i.scrollHeight&&an.toBounds([{x:o-17,y:0},{x:o,y:0},{x:o-17,y:r},{x:o,y:r}]).containsPoint({x:t,y:n}))||!!(o<i.scrollWidth&&an.toBounds([{x:0,y:r-17},{x:o,y:r-17},{x:0,y:r},{x:o,y:r}]).containsPoint({x:t,y:n}))},e.prototype.updateVirtualization=function(){var e,t=this;e=setInterval(function(n){t.diagram.removeVirtualObjects(e)},50),setTimeout(function(){t.diagram.deleteVirtualObject=!0},50)},e.prototype.mouseDown=function(e){var t;if(this.focus=!0,t=e.touches,this.isMouseOnScrollBar(e))return this.isScrolling=!0,void e.preventDefault();if(!this.checkEditBoxAsTarget(e)&&Ro(this.diagram)||Po(this.diagram)&&!jo(this.diagram))if("Select"!==this.action&&"Drag"!==this.action||this.diagram.updatePortVisibility(this.hoverElement,vn.Hover,!0),!(this.tool instanceof Lc||this.tool instanceof _c)||2!==e.button&&2!==e.buttons)if(!0===this.inAction&&!0===this.isMouseDown&&(this.tool instanceof Lc||this.tool instanceof _c))this.isMouseDown=!0,this.eventArgs={},this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs);else{this.isMouseDown=!0,this.currentPosition=this.prevPosition=this.getMousePosition(e),this.eventArgs={},this.diagram.textEditing&&!this.isMouseOnScrollBar(e)&&(this.diagram.endEdit(),this.diagram.textEditing=!1);var n=void 0,i=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action),r=this.objectFinder.findObjectUnderMouse(this.diagram,i,this.action,this.inAction,this.eventArgs,e),o=null;null!==r&&(o=this.diagram.findElementUnderMouse(r,this.currentPosition))&&(n=this.commandHandler.findTarget(o,r)),this.action=this.diagram.findActionToBeDone(r,o,this.currentPosition,n);var s=this.isMetaKey(e);s&&e.shiftKey&&this.diagram.connectorEditingToolModule?this.action="SegmentEnd":!s&&!e.shiftKey||Po(this.diagram)||(this.action="Select"),this.tool=this.diagram.getTool(this.action),this.tool||(this.action="Select",this.tool=this.diagram.getTool(this.action)),this.getMouseEventArgs(this.currentPosition,this.eventArgs),(s||e.shiftKey)&&(this.eventArgs.info=s&&e.shiftKey?{ctrlKey:s,shiftKey:e.shiftKey}:{ctrlKey:!0}),this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs),this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.inAction=!1,"touchstart"===e.type&&(t&&t.length>=2&&(this.touchStartList=Rl(this.touchStartList,0,t)),t||e.preventDefault())}else this.inAction=!1,this.tool.mouseUp(this.eventArgs);this.isForeignObject(e.target)||this.isForeignObject(e.target,!0)||t||e.preventDefault()},e.prototype.mouseMoveExtend=function(e,t){(this.tool instanceof Lc||this.tool instanceof _c)&&this.tool.mouseMove(this.eventArgs),this.diagram.scrollSettings.canAutoScroll?this.checkAutoScroll(e):this.blocked||this.tool.mouseMove(this.eventArgs),this.eventArgs.target&&(this.hoverElement=this.eventArgs.target);var n=!(this.eventArgs.target instanceof sa&&t instanceof sa);this.tool instanceof Oc&&this.diagram.updatePortVisibility(this.hoverElement instanceof sa?this.hoverElement:this.hoverNode,vn.Connect|vn.Hover,n),this.hoverElement instanceof sa&&this.hoverNode instanceof sa&&this.hoverNode&&this.hoverNode.id!==this.hoverElement.id&&this.diagram.updatePortVisibility(this.hoverNode,vn.Connect|vn.Hover,!0),this.hoverElement=n?null:t,this.hoverNode=n?null:t},e.prototype.checkAction=function(e){if("LabelSelect"===this.action&&this.eventArgs.sourceWrapper&&(this.eventArgs.sourceWrapper instanceof Jn||this.eventArgs.sourceWrapper instanceof Gr)){var t=this.commandHandler.findTarget(this.eventArgs.sourceWrapper,this.eventArgs.source);!wc(this.diagram,t,!1,this.eventArgs.sourceWrapper)&&mo(t)&&(this.action="LabelDrag",this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))}else mo(e)&&go(e)&&this.initialEventArgs&&this.initialEventArgs.source&&"Select"===this.action&&(!wc(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof fo&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),e instanceof uo&&(!(e instanceof uo)||yc(this.currentPosition,e.sourcePoint,e.hitPadding)||yc(this.currentPosition,e.targetPoint,e.hitPadding))||(this.action="Drag"),this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))},e.prototype.mouseMove=function(e,t){var n,i;if(this.focus=!0,this.isScrolling)e.preventDefault();else if(Ro(this.diagram)||Po(this.diagram)&&!jo(this.diagram)){this.currentPosition=this.getMousePosition(e);var r=this.diagram.findObjectsUnderMouse(this.currentPosition),o=this.diagram.findObjectUnderMouse(r,this.action,this.inAction);i=this.currentPosition,(n=this.diagram).rulerSettings.showRulers&&(n.hRuler.drawRulerMarker(n.hRuler.element,i,n.scroller.horizontalOffset),n.vRuler.drawRulerMarker(n.vRuler.element,i,n.scroller.verticalOffset));var s=!1,a=void 0;if("touchmove"===e.type&&(t=e.touches)&&t.length>1&&(this.touchMoveList=Rl(this.touchMoveList,0,t),"PinchZoom"!==this.action&&(s=!0)),!1===Zt.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown||s){this.eventArgs={};var l=null;null!==o&&(l=this.diagram.findElementUnderMouse(o,this.currentPosition),o!==this.hoverElement?(this.hoverElement&&(this.elementLeave(),this.diagram.updatePortVisibility(this.hoverElement,vn.Hover,!0)),o instanceof sa&&(this.hoverNode=o),this.hoverElement=o,this.elementEnter(this.currentPosition,!1)):this.hoverElement||this.hoverElement!==o||this.elementEnter(this.currentPosition,!0),l&&(a=this.commandHandler.findTarget(l,o))),this.action=this.diagram.findActionToBeDone(o,l,this.currentPosition,a),this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.tool=this.getTool(this.action),this.mouseEvents(),this.tool instanceof Pc||this.tool instanceof _c||this.tool instanceof Lc?this.tool.mouseMove(this.eventArgs):t&&this.tool instanceof Mc&&this.tool.mouseDown(this.eventArgs),this.updateCursor(),this.renderUmlHighLighter(this.eventArgs);var c=!1;(!this.hoverElement||this.tool instanceof Mc||!(o instanceof sa)||0!==this.diagram.selectedItems.nodes.length&&wc(this.diagram,this.hoverElement))&&(c=!0),this.diagram.updatePortVisibility(this.hoverElement,vn.Hover,c),null===o&&this.hoverElement&&(this.hoverElement=null,this.elementLeave()),s=!1}else this.eventArgs.position=this.currentPosition,"Drag"===this.action&&!wc(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof fo&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.mouseEvents(),(e.ctrlKey||e.shiftKey)&&(this.eventArgs.info=e.ctrlKey&&e.shiftKey?{ctrlKey:e.ctrlKey,shiftKey:e.shiftKey}:{ctrlKey:!0}),this.checkAction(o),this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source),this.updateCursor(),this.inAction=!0,this.initialEventArgs=null,"Drag"!==this.action&&"Rotate"!==this.action||(this.diagram.diagramActions=this.diagram.diagramActions|Tn.Interactions),this.mouseMoveExtend(e,o);this.prevPosition=this.currentPosition,this.isForeignObject(e.target,!0)||e.preventDefault()}}},e.prototype.checkAutoScroll=function(e){var t=this.startAutoScroll(e);if(!t&&this.doingAutoScroll)this.doingAutoScroll=!1,clearInterval(this.timeOutValue);else if(t){if((this.tool instanceof Ec||this.tool instanceof Dc||this.tool instanceof Sc)&&this.inAction){var n=this;this.diagram.scrollSettings.canAutoScroll&&t&&!this.doingAutoScroll&&(this.doingAutoScroll=!0,this.timeOutValue=setInterval(function(i){n.doAutoScroll(t,e,100)},100))}}else this.blocked=!this.tool.mouseMove(this.eventArgs)},e.prototype.mouseUp=function(e){var t;if("SVG"===this.diagram.mode&&Do(this.diagram)&&this.updateVirtualization(),this.diagram.previousSelectedObject=null,this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,Mn.DrawSelectorBorder),t=e.touches,this.isScrolling)return this.isScrolling=!1,void e.preventDefault();if(!this.checkEditBoxAsTarget(e)&&Ro(this.diagram)||Po(this.diagram)&&!jo(this.diagram)){if(this.tool&&(!(this.tool instanceof Lc||this.tool instanceof _c)||(this.tool instanceof Lc||this.tool instanceof _c)&&2===e.detail)){if(!this.isForeignObject(e.target)&&this.isMouseDown&&document.getElementById(this.diagram.element.id+"content").focus(),!this.inAction&&3!==e.which&&"Drag"===this.action){this.action="Select";var n=this.diagram.findObjectsUnderMouse(this.currentPosition),i=this.diagram.findObjectUnderMouse(n,this.action,this.inAction),r=!0;!e.ctrlKey&&this.isMouseDown&&this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>1&&1===e.which&&!(this.diagram.diagramActions&Tn.PreventClearSelection)&&(r=!1,this.commandHandler.clearSelection()),wc(this.diagram,i)&&r||this.commandHandler.selectObjects([i])}var o=this.updateContainerProperties(),s=void 0;if(this.addUmlNode(),this.inAction=!1,this.isMouseDown=!1,this.currentPosition=this.getMousePosition(e),this.diagram.selectedObject.helperObject&&(s=this.updateContainerBounds()),this.tool&&(this.tool.prevPosition||this.tool instanceof Rc)){this.eventArgs.position=this.currentPosition,this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source);var a=this.isMetaKey(e);if((a||e.shiftKey)&&(this.eventArgs.info=a&&e.shiftKey?{ctrlKey:a,shiftKey:e.shiftKey}:{ctrlKey:!0}),this.diagram.diagramActions&Tn.Interactions&&(this.diagram.diagramActions=this.diagram.diagramActions&~Tn.Interactions),this.eventArgs.clickCount=e.detail,this.diagram.selectedObject.helperObject&&(this.tool instanceof Ec||this.tool instanceof Dc)){if(this.diagram.selectedObject.actualObject&&""!==this.diagram.selectedObject.actualObject.parentId){var l=this.diagram.getObject(this.diagram.selectedObject.actualObject.parentId);l&&l.isLane&&(this.commandHandler.isContainer=!0)}this.tool.mouseUp(this.eventArgs,o.isPreventHistory)}else this.tool.mouseUp(this.eventArgs);o.hasStack&&this.diagram.endGroupAction()}if(s&&this.diagram.endGroupAction(),this.updateContainerBounds(!0),this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0}),this.blocked=!1,this.hoverElement){var c=vn.Connect;wc(this.diagram,this.hoverElement)&&(c|=vn.Hover),this.diagram.updatePortVisibility(this.hoverElement,c,!0),this.hoverElement=null}this.touchStartList=null,this.touchMoveList=null,this.tool instanceof Tc||(this.tool=null)}t||e.preventDefault(),this.diagram.currentDrawingObject=void 0;var h=this.diagram.selectedItems;!this.inAction&&h.wrapper&&h.userHandles.length>0&&this.diagram.renderSelector(!0),this.inAction||this.diagram.currentSymbol||!this.eventArgs||this.diagram.triggerEvent(Ln.click,{element:this.eventArgs.source||this.diagram,position:this.eventArgs.position,count:e.detail,actualObject:this.eventArgs.actualObject}),this.eventArgs={}}this.eventArgs={},this.diagram.commandHandler.removeStackHighlighter()},e.prototype.addSwimLaneObject=function(e){var t,n,i,r,o,s,a=0,l=e.shape,c=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);if(n||(n=this.diagram.findObjectUnderMouse(c,this.action,this.inAction)),this.diagram.clearSelectorLayer(),n&&!(n.isLane||n.isPhase||n.isHeader))for(var h=0;h<c.length;h++){var d=this.diagram.nameTable[c[h].id];(d.isLane||d.isPhase||d.isHeader)&&(n=d)}if(n&&(l.isPhase||l.isLane&&n.isLane)&&(t=this.diagram.nameTable[n.parentId]),t&&(i=t.shape,o=l.isLane?l.orientation===i.orientation:l.orientation!==i.orientation),o&&n){if(i.header&&i.hasHeader&&"Horizontal"===i.orientation&&(a=1),i.phases.length>0&&(a+=1),l.isPhase){s="Horizontal"===i.orientation?this.currentPosition.x-t.wrapper.bounds.x:this.currentPosition.y-(t.wrapper.bounds.y+i.header.height);var u={id:zl(),offset:s,header:{annotation:{content:"Phase"}}};this.diagram.addPhases(t,[u])}else{var p={id:zl(),style:l.lanes[0].style,header:{annotation:{content:l.lanes[0].header.annotation.content,style:l.lanes[0].header.annotation.style},style:l.lanes[0].header.style}};"Horizontal"===l.orientation?p.height=l.lanes[0].height:p.width=l.lanes[0].width,"Horizontal"===i.orientation?(r=n.rowIndex?n.rowIndex:this.diagram.nameTable[n.parentId].rowIndex,n.wrapper.offsetY<this.currentPosition.y&&(r+=1)):(r=n.columnIndex?n.columnIndex:this.diagram.nameTable[n.parentId].columnIndex,this.currentPosition.x<n.wrapper.bounds.center.x&&(r-=1)),i.lanes.length>r-a?(p.header.width=i.lanes[r-a].header.width,p.header.height=i.lanes[r-a].header.height):(p.header.width=i.lanes[r-a-1].header.width,p.header.height=i.lanes[r-a-1].header.height),this.diagram.addLanes(t,[p],r-a)}this.commandHandler.select(t)}else if(l.isLane){var f={id:zl(),width:e.width,height:e.height,shape:{type:"SwimLane",header:{annotation:{content:"Header"},height:50,style:l.lanes[0].header.style},phases:[{id:zl(),header:{annotation:{content:"Phase"}}}],lanes:[{id:zl(),height:e.height,width:e.width,style:l.lanes[0].style,header:{annotation:{content:l.lanes[0].header.annotation.content,style:l.lanes[0].header.annotation.style},style:l.lanes[0].header.style}}],orientation:l.orientation}};"Vertical"===l.orientation&&(f.width+=20),f.offsetX=this.currentPosition.x+f.width/2,f.offsetY=this.currentPosition.y+f.height/2,this.diagram.add(f)}},e.prototype.mouseLeave=function(e){this.tool&&this.inAction&&this.tool.mouseLeave(this.eventArgs),this.diagram.selectedObject.helperObject&&(this.updateContainerProperties(),this.updateContainerBounds()&&this.diagram.endGroupAction()),this.eventArgs&&this.eventArgs.source&&(this.diagram.updatePortVisibility(this.eventArgs.source,vn.Hover,!0),this.hoverElement=null),this.tool instanceof Oc&&this.eventArgs&&this.eventArgs.target&&this.eventArgs.target instanceof sa&&(this.diagram.updatePortVisibility(this.eventArgs.target,vn.Hover|vn.Connect,!0),this.hoverElement=null);var t=this.diagram.selectedItems;t&&t.wrapper&&this.diagram.renderSelector(!0),(this.diagram.diagramActions&Tn.Interactions||this.diagram.diagramActions&Tn.ToolAction)&&(this.diagram.diagramActions=this.diagram.diagramActions&~Tn.ToolAction),this.isMouseDown=!1,this.focus=!1,this.touchStartList=null,this.touchMoveList=null,this.commandHandler.removeSnap(),this.inAction=!1,this.eventArgs={},this.tool=null,function(){var e,t,n=document.getElementsByClassName("e-d-ruler-marker");if(n&&n.length>0)for(t=n.length-1;t>=0;t--)(e=n[t])&&e.parentNode.removeChild(e)}(),"Rotate"===this.action&&this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),e.preventDefault()},e.prototype.mouseWheel=function(e){var t=e.wheelDelta>0||-40*e.detail>0,n=this.getMousePosition(e);if(this.diagram.tooltipObject.close(),this.isMetaKey(e))this.diagram.zoom(t?1.2:1/1.2,n),e.preventDefault();else{var i=this.diagram.scroller.horizontalOffset,r=this.diagram.scroller.verticalOffset,o=t?20:-20;this.tool&&(this.tool instanceof Lc||this.tool instanceof _c)&&(this.eventArgs={},this.getMouseEventArgs(n,this.eventArgs),this.eventArgs.position=n,this.tool.mouseWheel(this.eventArgs)),e.shiftKey?this.diagram.scroller.zoom(1,o,0,n):this.diagram.scroller.zoom(1,0,o,n),i===this.diagram.scroller.horizontalOffset&&r===this.diagram.scroller.verticalOffset||e.preventDefault()}if(this.diagram.textEditing){if(this.diagram.isTriggerEvent=!0,this.diagram.activeLabel.parentId){var s=this.diagram.getObject(this.diagram.activeLabel.parentId);this.diagram.startTextEdit(s,this.diagram.activeLabel.id)}this.diagram.isTriggerEvent=!1}},e.prototype.keyDown=function(e){if(!(this.diagram.diagramActions&Tn.TextEdit)&&!this.checkEditBoxAsTarget(e)||"Escape"===e.key||27===e.keyCode){var t=void 0,n=e.keyCode?e.keyCode:e.which,i=e.key,r=this.isMetaKey(e);if(this.diagram.commandManager&&this.diagram.commands)for(var o=0,s=Object.keys(this.diagram.commands);o<s.length;o++){var a=s[o];if((t=this.diagram.commands[a])&&(t.gesture.keyModifiers||t.gesture.key)&&(n===t.gesture.key||i===Pn[t.gesture.key]||this.isDeleteKey(i,a))&&(!t.gesture.keyModifiers&&!e.altKey&&!e.shiftKey&&!r||t.gesture.keyModifiers&&(r||e.altKey||e.shiftKey)&&this.altKeyPressed(t.gesture.keyModifiers)&&e.altKey||this.shiftKeyPressed(t.gesture.keyModifiers)&&e.shiftKey||this.ctrlKeyPressed(t.gesture.keyModifiers)&&r)){var l=tc(t.canExecute);if(l&&l({keyDownEventArgs:KeyboardEvent,parameter:t.parameter})){if(e.preventDefault(),"Escape"===e.key)if(this.checkEditBoxAsTarget(e))document.getElementById(this.diagram.diagramCanvas.id).focus();else if(this.diagram.currentSymbol){this.diagram.removeFromAQuad(this.diagram.currentSymbol),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[this.diagram.currentSymbol.id]),this.diagram.removeElements(this.diagram.currentSymbol),Ba(this.diagram.currentSymbol,this.diagram),delete this.diagram.nameTable[this.diagram.currentSymbol.id],this.diagram.droppable.sourceElement.draggable.intDestroy();var c=this.diagram.droppable.selectedSymbols;c.parentNode.removeChild(c);var h=this.diagram.diagramActions;this.diagram.diagramActions=this.diagram.addConstraints(h,Tn.PreventClearSelection),this.tool.mouseUp(this.eventArgs),this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,Mn.DrawSelectorBorder),this.diagram.previousSelectedObject&&this.diagram.select(this.diagram.previousSelectedObject),this.action="Select",this.diagram.previousSelectedObject=null,this.diagram.currentSymbol=null,this.diagram.diagramActions=this.diagram.removeConstraints(h,Tn.PreventClearSelection),this.isMouseDown=!1}t.execute&&tc(t.execute)({keyDownEventArgs:KeyboardEvent,parameter:t.parameter});break}}}}},e.prototype.startAutoScroll=function(e){var t=this.getMousePosition(e);t.x*=this.diagram.scroller.currentZoom,t.y*=this.diagram.scroller.currentZoom;var n,i=ma(this.diagram),r=this.diagram.scrollSettings.autoScrollBorder;return this.diagram.scrollSettings.canAutoScroll&&(t.x+this.diagram.scroller.horizontalOffset+r.right+i.width>=this.diagram.scroller.viewPortWidth-18?n="right":t.x+this.diagram.scroller.horizontalOffset<r.left?n="left":t.y+this.diagram.scroller.verticalOffset+r.bottom+i.height>this.diagram.scroller.viewPortHeight-18?n="bottom":t.y+this.diagram.scroller.verticalOffset<r.top&&(n="top")),n},e.prototype.doAutoScroll=function(e,t,n,i){var r=e;if((this.tool instanceof Ec||this.tool instanceof Dc||this.tool instanceof Sc)&&this.inAction){var o=this.getMousePosition(t),s=0,a=0,l={x:o.x,y:o.y};switch(r){case"right":l.x=o.x+10,s=10;break;case"left":l.x=o.x-10,s=-10;break;case"bottom":l.y=o.y+10,a=10;break;case"top":l.y=o.y-10,a=-10}this.eventArgs.position={x:l.x,y:l.y},this.tool.mouseMove(this.eventArgs),this.diagram.scroller.zoom(1,-s,-a,o)}},e.prototype.mouseEvents=function(){for(var e=this.diagram.findObjectsUnderMouse(this.currentPosition),t=0;t<e.length;t++)this.eventArgs.actualObject===e[t]&&e.splice(t,1);var n={targets:e,element:this.eventArgs.source===this.eventArgs.actualObject?void 0:this.eventArgs.source,actualObject:this.eventArgs.actualObject};!this.lastObjectUnderMouse||this.eventArgs.actualObject&&this.lastObjectUnderMouse===this.eventArgs.actualObject||(this.diagram.triggerEvent(Ln.mouseLeave,{targets:void 0,element:this.lastObjectUnderMouse,actualObject:void 0}),this.lastObjectUnderMouse=null),(!this.lastObjectUnderMouse&&this.eventArgs.source||this.lastObjectUnderMouse!==this.eventArgs.actualObject)&&(this.lastObjectUnderMouse=this.eventArgs.actualObject,this.diagram.triggerEvent(Ln.mouseEnter,n)),this.eventArgs.actualObject&&this.diagram.triggerEvent(Ln.mouseOver,n)},e.prototype.elementEnter=function(e,t){if(!t){i=this.diagram,ar((r=this.hoverElement instanceof sa&&this.hoverElement.constraints&An.Tooltip||this.hoverElement instanceof uo&&this.hoverElement.constraints&Cn.Tooltip?this.hoverElement:void 0)?r.tooltip:i.tooltip,i.tooltipObject);var n=Ra(this.diagram,e,this.hoverElement);this.diagram.tooltipObject.close(),this.diagram.tooltipObject.offsetX=n.x,this.diagram.tooltipObject.offsetY=n.y,this.diagram.tooltipObject.dataBind(),function(e,t){var n=0;return e instanceof uo?e.constraints&Cn.Tooltip?n=e.constraints&Cn.Tooltip:e.constraints&Cn.InheritTooltip&&(n=t.constraints&En.Tooltip):e.constraints&An.Tooltip?n=e.constraints&An.Tooltip:e.constraints&An.InheritTooltip&&(n=t.constraints&En.Tooltip),n}(this.hoverElement,this.diagram)&&this.diagram.tooltipObject.open(this.diagram.element)}var i,r},e.prototype.elementLeave=function(){this.diagram.tooltipObject.close()},e.prototype.altKeyPressed=function(e){return!!(e&kn.Alt)},e.prototype.ctrlKeyPressed=function(e){return!!(e&kn.Control)},e.prototype.shiftKeyPressed=function(e){return!!(e&kn.Shift)},e.prototype.scrolled=function(e){this.diagram.updateScrollOffset()},e.prototype.doubleClick=function(e){if(Ro(this.diagram)){var t=void 0,n=this.diagram.findObjectsUnderMouse(this.currentPosition),i=this.diagram.findObjectUnderMouse(n,this.action,this.inAction);if(null!==i&&Ro(this.diagram))if(t=this.diagram.findElementUnderMouse(i,this.currentPosition),this.tool&&(this.tool instanceof Lc||this.tool instanceof _c))this.tool.mouseUp(this.eventArgs),this.isMouseDown=!1,this.eventArgs={},this.tool=null,e.preventDefault();else{var r=this.diagram.commandHandler.getObjectLayer(i.id);if(r&&!r.lock&&r.visible&&!(this.diagram.diagramActions&Tn.TextEdit)){var o="";"TextAnnotation"===i.shape.shape&&(o=i.id.split("_textannotation_")[1]),this.diagram.startTextEdit(i,o||(t instanceof Jn?t.id.split(i.id+"_")[1]:void 0))}}this.diagram.triggerEvent(Ln.doubleClick,{source:i||this.diagram,position:this.currentPosition,count:e.detail})}},e.prototype.itemClick=function(e,t){var n=e;return Ko(this.diagram,n,!0)?n:null},e.prototype.inputChange=function(e){var t,n,i,r,o,s,a,l,c,h=document.getElementById(this.diagram.element.id+"_editBox"),d=document.getElementById(this.diagram.element.id+"_editTextBoxDiv"),u=h.value,p=u.split("\n");(!(r=this.diagram.selectedItems.nodes[0]?this.diagram.selectedItems.nodes[0]:this.diagram.selectedItems.connectors[0])&&this.tool instanceof Tc||"SwimLane"===r.shape.type)&&(r=this.diagram.nameTable[this.diagram.activeLabel.parentId]),r&&("Text"!==r.shape.type&&r.annotations.length>0||"Text"===r.shape.type)&&(a=ml((i=this.diagram.getWrapper(r.wrapper,this.diagram.activeLabel.id)).style,u,void 0,void 0,t=(t=r.wrapper.bounds.width<i.bounds.width?r.wrapper.bounds.width:i.bounds.width)>90?t:90),n=Number(h.style.fontSize.split("px")[0]),p.length>1&&""===p[p.length-1]&&(a.height=a.height+n),l=this.diagram.scroller.transform,c=Lo(this.diagram)?l.scale:1,o=(12>a.height?12:a.height)*c,d.style.left=(i.bounds.center.x+l.tx)*l.scale-(s=(90>(s=a.width)?90:s)*c)/2-2.5+"px",d.style.top=(i.bounds.center.y+l.ty)*l.scale-o/2-3+"px",d.style.width=s+"px",d.style.height=o+"px",h.style.minHeight="12px",h.style.minWidth="90px",h.style.width=s+"px",h.style.height=o+"px")},e.prototype.isAddTextNode=function(e,t){return!(!(this.tool instanceof Tc||t)||(this.tool=null,e&&!To(this.diagram)&&(this.diagram.drawingObject=void 0,this.diagram.currentDrawingObject=void 0),il(this.diagram.nodes,e.id)||il(this.diagram.connectors,e.id)||this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e)>-1))},e.prototype.checkEditBoxAsTarget=function(e){return!(!e.target||e.target.id!==this.diagram.element.id+"_editBox")},e.prototype.getMouseEventArgs=function(e,t,n){var i,r,o;return t.position=e,n?(r=this.diagram.findObjectsUnderMouse(this.currentPosition,n),i=this.diagram.findTargetObjectUnderMouse(r,this.action,this.inAction,t.position,n)):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(i=this.diagram.selectedItems,!this.diagram.currentSymbol&&"Drag"===this.action&&i&&this.diagram.selectedItems.nodes.length>0&&"SwimLane"===this.diagram.selectedItems.nodes[0].shape.type&&(r=this.diagram.findObjectsUnderMouse(this.currentPosition),i=this.diagram.findObjectUnderMouse(r,this.action,this.inAction))):(r=this.diagram.findObjectsUnderMouse(this.currentPosition),i=this.diagram.findObjectUnderMouse(r,this.action,this.inAction)),i&&i.isHeader&&(this.eventArgs.actualObject=i=this.diagram.nameTable[i.parentId]),i&&(o=this.diagram.findElementUnderMouse(i,this.currentPosition)),n?(t.target=i,t.targetWrapper=o):(t.source=i,t.sourceWrapper=o),t.actualObject=this.eventArgs.actualObject,t.startTouches=this.touchStartList,t.moveTouches=this.touchMoveList,t},e.prototype.resetTool=function(){this.action="Select",this.hoverElement=null,this.hoverNode=null,this.tool=this.diagram.getTool(this.action),this.updateCursor()},e.prototype.getTool=function(e){switch(e){case"Select":return new Sc(this.commandHandler,!0);case"Drag":return new Ec(this.commandHandler);case"Rotate":return new Ic(this.commandHandler);case"LayoutAnimation":return new jc(this.commandHandler);case"Hyperlink":return new Rc(this.commandHandler);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new Dc(this.commandHandler,e);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"BezierSourceThumb":case"BezierTargetThumb":return new Oc(this.commandHandler,e);case"SegmentEnd":case"OrthoThumb":return new zc(this.commandHandler,e);case"Draw":var t=function(e){var t;return e&&(e.type?t="Connector":e.shape&&!e.type&&(t="Node")),t}(this.diagram.drawingObject);if("Node"===t&&"Text"===this.diagram.drawingObject.shape.type)return new Tc(this.commandHandler);if("Node"===t&&"Polygon"===this.diagram.drawingObject.shape.shape&&!this.diagram.drawingObject.shape.points)return new Lc(this.commandHandler);if("Node"===t||"Node"===t&&"Polygon"===this.diagram.drawingObject.shape.shape&&this.diagram.drawingObject.shape.points)return new kc(this.commandHandler,this.diagram.drawingObject);if("Connector"===t&&"Polyline"===this.diagram.drawingObject.type)return new _c(this.commandHandler);if("Connector"===t)return new Pc(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);break;case"Pan":return new Mc(this.commandHandler,!1);case"PinchZoom":return new Mc(this.commandHandler,!0);case"PortDrag":return new Ec(this.commandHandler,"Port");case"PortDraw":return new Pc(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);case"LabelSelect":return new Sc(this.commandHandler,!0,"LabelSelect");case"LabelDrag":return new Nc(this.commandHandler);case"LabelResizeSouthEast":case"LabelResizeSouthWest":case"LabelResizeNorthEast":case"LabelResizeNorthWest":case"LabelResizeSouth":case"LabelResizeNorth":case"LabelResizeWest":case"LabelResizeEast":return new Bc(this.commandHandler,e);case"LabelRotate":return new Fc(this.commandHandler)}return null},e.prototype.getCursor=function(e){var t=this.diagram.selectedItems.annotation?this.diagram.selectedItems.wrapper.children[0]:this.diagram.selectedItems;return function(e,t){if(t+=360,t%=360,-1===e.indexOf("Resize"))return xc[e];var n=xc[e];return t>=0&&t<25||t>=160&&t<=205||t>=340&&t<=360?n:t>=25&&t<=70||t>=205&&t<=250?"n-resize"===n||"s-resize"===n?"ne-resize":"nw-resize"===n||"se-resize"===n?"n-resize":"e-resize"===n||"w-resize"===n?"nw-resize":"e-resize":t>=70&&t<=115||t>=250&&t<=295?"n-resize"===n||"s-resize"===n?"e-resize":"nw-resize"===n||"se-resize"===n?"ne-resize":"e-resize"===n||"w-resize"===n?"n-resize":"nw-resize":t>=115&&t<=155||t>=295&&t<=340?"n-resize"===n||"s-resize"===n?"nw-resize":"nw-resize"===n||"se-resize"===n?"e-resize":"e-resize"===n||"w-resize"===n?"ne-resize":xc[e]:"n-resize"}(e,this.diagram.selectedItems.annotation?t.rotateAngle+t.parentTransform:t.rotateAngle)},e.prototype.findElementUnderMouse=function(e,t){return this.objectFinder.findElementUnderSelectedItem(e,t)},e.prototype.findObjectsUnderMouse=function(e,t){return this.objectFinder.findObjectsUnderMouse(e,this.diagram,this.eventArgs,t)},e.prototype.findObjectUnderMouse=function(e,t,n){return this.objectFinder.findObjectUnderMouse(this.diagram,e,t,n,this.eventArgs,this.currentPosition)},e.prototype.findTargetUnderMouse=function(e,t,n,i,r){return this.objectFinder.findObjectUnderMouse(this.diagram,e,t,n,this.eventArgs,i,r)},e.prototype.findActionToBeDone=function(e,t,n,i){return function(e,t,n,i,r,o,s){if(o&&o.length>1&&r&&r.length>1)return"PinchZoom";if(i.currentSymbol)return"Drag";if("PortDraw"===i.eventHandler.action&&(i.tool&=~In.DrawOnce),(Mo(i)||To(i))&&i.drawingObject)return"Draw";if(vc(i)&&(u=i.selectedItems).wrapper&&Ka(u.constraints,"UserHandle"))for(var a=0,l=u.userHandles;a<l.length;a++){var c=l[a];if(c.visible&&yc(n,p=Xa(u,c,i.scroller.transform),c.size/2))return c.name}if(vc(i)){var h=i.selectedItems.annotation?i.selectedItems.wrapper.children[0]:i.selectedItems.wrapper,d=h.bounds,u=i.selectedItems,p=new an(d.x,d.y,d.width,d.height);if(bc(i)&&!i.selectedItems.annotation){var f=i.selectedItems.connectors[0],g=10/i.scrollSettings.currentZoom,m=10/i.scrollSettings.currentZoom;if(Ka(u.constraints,"ResizeAll")){if(Ka(u.constraints,"ConnectorSourceThumb")&&yo(f)&&yc(n,f.sourcePoint,g))return"ConnectorSourceEnd";if(Ka(u.constraints,"ConnectorTargetThumb")&&vo(f)&&yc(n,f.targetPoint,m))return"ConnectorTargetEnd";if(x=function(e,t,n,i){var r=10/i.scrollSettings.currentZoom,o=10/i.scrollSettings.currentZoom;if("Bezier"===e.type)for(var s=0;s<e.segments.length;s++){if(yc(n,Zt.isEmptyPoint((a=e.segments[s]).point1)?a.bezierPoint1:a.point1,o))return"BezierSourceThumb";if(yc(n,Zt.isEmptyPoint(a.point2)?a.bezierPoint2:a.point2,r))return"BezierTargetThumb"}if(i.connectorEditingToolModule&&bo(e))if("Straight"===e.type||"Bezier"===e.type)for(s=0;s<e.segments.length;s++){var a=void 0;if(yc(n,(a=e.segments[s]).point,10))return"SegmentEnd"}else for(s=0;s<e.segments.length;s++){a=void 0;var l={x:0,y:0};a=e.segments[s];for(var c=0;c<a.points.length-1;c++)if(Zt.distancePoints(a.points[c],a.points[c+1])>=50&&(l.x=(a.points[c].x+a.points[c+1].x)/2,l.y=(a.points[c].y+a.points[c+1].y)/2,yc(n,l,30)))return"OrthoThumb"}return null}(f,0,n,i))return x}}else{var y=10/i.scroller.currentZoom,v=hn();un(v,h.rotateAngle+h.parentTransform,h.offsetX,h.offsetY);var b=h.offsetX-h.pivot.x*h.actualSize.width,w=h.offsetY-h.pivot.y*h.actualSize.height,C={x:b+(.5===h.pivot.x?2*h.pivot.x:h.pivot.x)*h.actualSize.width/2,y:w-30/i.scroller.currentZoom};C=dn(v,C);var x,A=!!i.selectedItems.annotation,S=!(!A||!wo(i.selectedItems.annotation));if(Ka(u.constraints,"Rotate")&&yc(n,C,y)&&i.selectedItems.thumbsConstraints&On.Rotate){if(A&&S)return"LabelRotate";if(!A)return"Rotate"}if(p.Inflate(y),p.containsPoint(n)&&(x=function(e,t,n,i,r,o){var s;return 1===e.selectedItems.nodes.length&&0===e.selectedItems.connectors.length&&e.selectedItems.nodes[0].container&&(s=function(e,t,n,i,r){var o=10/e.scroller.currentZoom,s=40/e.scroller.currentZoom,a=e.selectedItems,l=t.actualSize.width,c=t.actualSize.height,h=new an(i,r+20,t.style.strokeWidth,c-40),d=new an(i+l,r+20,t.style.strokeWidth,c-40),u=new an(i+20,r,l-40,t.style.strokeWidth),p=new an(i+20,r+c,l-40,t.style.strokeWidth),f=Ko(e,e.selectedItems.nodes[0],!0)?e.nameTable[e.selectedItems.nodes[0].parentId]:e.selectedItems.nodes[0];if(l>=s&&c>=s){if(Za(a.constraints,"ResizeEast",a.thumbsConstraints,a)&&d.containsPoint(n,o))return"ResizeEast";if(Za(a.constraints,"ResizeSouth",a.thumbsConstraints,a)&&p.containsPoint(n,o))return"ResizeSouth";if("Grid"!==f.container.type){if(Za(a.constraints,"ResizeWest",a.thumbsConstraints,a)&&h.containsPoint(n,o))return"ResizeWest";if(Za(a.constraints,"ResizeNorth",a.thumbsConstraints,a)&&u.containsPoint(n,o))return"ResizeNorth"}}return null}(e,t,n,r,o)),s||e.selectedItems.nodes[0]&&(e.selectedItems.nodes[0].isPhase||e.selectedItems.nodes[0].isLane||"SwimLane"===e.selectedItems.nodes[0].shape.type)||(s=function(e,t,n,i,r,o){var s=40/e.scroller.currentZoom,a=10/e.scroller.currentZoom,l=e.selectedItems,c=!!l.annotation;if(t.actualSize.width>=s&&t.actualSize.height>=s){if(Za(l.constraints,"ResizeSouthEast",l.thumbsConstraints,l)&&yc(n,dn(i,{x:r+t.actualSize.width,y:o+t.actualSize.height}),a))return c?"LabelResizeSouthEast":"ResizeSouthEast";if(Za(l.constraints,"ResizeSouthWest",l.thumbsConstraints,l)&&yc(n,dn(i,{x:r,y:o+t.actualSize.height}),a))return c?"LabelResizeSouthWest":"ResizeSouthWest";if(Za(l.constraints,"ResizeNorthEast",l.thumbsConstraints,l)&&yc(n,dn(i,{x:r+t.actualSize.width,y:o}),a))return c?"LabelResizeNorthEast":"ResizeNorthEast";if(Za(l.constraints,"ResizeNorthWest",l.thumbsConstraints,l)&&yc(n,dn(i,{x:r,y:o}),a))return c?"LabelResizeNorthWest":"ResizeNorthWest"}return Za(l.constraints,"ResizeEast",l.thumbsConstraints,l)&&yc(n,dn(i,{x:r+t.actualSize.width,y:o+t.actualSize.height/2}),a)?c?"LabelResizeEast":"ResizeEast":Za(l.constraints,"ResizeWest",l.thumbsConstraints,l)&&yc(n,dn(i,{x:r,y:o+t.actualSize.height/2}),a)?c?"LabelResizeWest":"ResizeWest":Za(l.constraints,"ResizeSouth",l.thumbsConstraints,l)&&yc(n,dn(i,{x:r+t.actualSize.width/2,y:o+t.actualSize.height}),a)?c?"LabelResizeSouth":"ResizeSouth":Za(l.constraints,"ResizeNorth",l.thumbsConstraints,l)&&yc(n,dn(i,{x:r+t.actualSize.width/2,y:o}),a)?c?"LabelResizeNorth":"ResizeNorth":null}(e,t,n,i,r,o)),s||null}(i,h,n,v,b,w)))return x}}if(Po(i)&&!e)return"Pan";if(s instanceof ai&&!Po(i)&&"None"!==(x=function(e,t,n,i){if(Bo(t)&&(Ja(t,vn.Hover)||Ja(t,vn.Visible))){if(t.constraints&_n.Drag)return"PortDrag"}else if(No(t)&&(Ja(t,vn.Hover)||Ja(t,vn.Visible))&&t.constraints&_n.Draw){e.drawingObject={};var r={type:"Orthogonal",sourcePortID:t.id};return e.drawingObject=r,e.tool|=In.DrawOnce,e.currentDrawingObject=r,"PortDraw"}return"None"}(i,s)))return x;if((s instanceof ni||s instanceof ii)&&!Po(i)&&go(s))return wc(i,s,void 0,t)&&mo(s)?"LabelDrag":"LabelSelect";if(null!==e){if(!(e instanceof sa||e instanceof uo))return"Select";if(t&&t.id){var O=t.id.split(e.id)[1];if(O&&O.match("^_icon"))return"LayoutAnimation"}if(mo(e)&&t instanceof Jn&&t.hyperlink.link)return"Hyperlink";if(!mo(e)||!wc(i,e,!1)||void 0!==i.selectedItems.annotation)return e&&Po(i)&&!jo(i)?"Pan":i.selectedItems.nodes.length&&i.selectedItems.nodes[0].isLane&&i.selectedItems.wrapper&&i.selectedItems.wrapper.bounds.containsPoint(n)?"Drag":"Select";if(e instanceof uo&&!yc(n,e.sourcePoint,e.hitPadding)&&!yc(n,e.targetPoint,e.hitPadding)||!(e instanceof uo))return"Drag"}return"Select"}(e,t,this.currentPosition,this.diagram,this.touchStartList,this.touchMoveList,i)},e.prototype.updateContainerBounds=function(e){var t=!1;if(this.diagram.selectedObject.helperObject){var n=this.tool instanceof Dc,i=this.diagram.selectedObject.actualObject,r=this.diagram.nameTable[i.parentId];e?function(e,t,n,i){var r;if(Ko(e,t,!0)){e.protectPropertyChange(!0);var o=(r=e.nameTable[t.parentId]).wrapper;if(r&&"Canvas"===r.container.type&&!(i||o.bounds.x<=n.x&&o.bounds.right>=n.x&&o.bounds.y<=n.y&&o.bounds.bottom>=n.y)){var s=Ul(t);e.clearSelection(),$o(e,t),t.parentId="";var a={type:"ChildCollectionChanged",category:"Internal",undoObject:s,redoObject:Ul(t)};e.addHistoryEntry(a),e.commandHandler.isContainer&&(e.commandHandler.isContainer=!1,e.endGroupAction())}}}(this.diagram,i,this.currentPosition,n):((!r||r&&"SwimLane"!==r.shape.type)&&this.diagram.updateDiagramObject(i),t=function(e,t,n,i){var r,o=!1;if(Ko(e,t,!0)){e.protectPropertyChange(!0);var s=(r=e.nameTable[t.parentId]).wrapper;if(r&&"Canvas"===r.container.type){if(i||s.bounds.x<=n.x&&s.bounds.right>=n.x&&s.bounds.y<=n.y&&s.bounds.bottom>=n.y){var a=void 0,l=s.bounds.y,c=s.bounds.x,h=e.nameTable[r.parentId]||r;if("SwimLane"===h.shape.type)o=ts(r,h,t,e,!0);else{var d=e.nameTable[r.parentId]||r,u=d.shape;a=d.wrapper,s.actualSize.width<s.outerBounds.width&&!(s.bounds.x>s.outerBounds.x)&&(void 0!==r.rowIndex?(a.updateColumnWidth(r.columnIndex,s.outerBounds.width,!0),"Horizontal"===u.orientation&&u.phaseSize&&bs(d,e,s,r.columnIndex),ws(e,d),e.drag(d,c-s.bounds.x,l-s.bounds.y)):e.scale(r,1+(s.outerBounds.width-s.actualSize.width)/s.actualSize.width,1,s.outerBounds.x<s.bounds.x?{x:1,y:.5}:{x:0,y:.5})),s.actualSize.height<s.outerBounds.height&&!(s.bounds.y>s.outerBounds.y)&&(void 0!==r.rowIndex?(a.updateRowHeight(r.rowIndex,s.outerBounds.height,!0),e.drag(d,c-s.bounds.x,l-s.bounds.y)):e.scale(r,1,1+(s.outerBounds.height-s.actualSize.height)/s.actualSize.height,s.outerBounds.y<s.bounds.y?{x:.5,y:1}:{x:.5,y:0}))}}e.select([t]),fs([],e)}e.protectPropertyChange(!1)}return o}(this.diagram,i,this.currentPosition,n),this.diagram.updateSelector(),(i.isLane||i.isPhase)&&(this.diagram.clearSelection(),this.commandHandler.select(i)))}return t},e.prototype.updateContainerProperties=function(){var e,t,n,i,r=!1,o=!1,s={hasStack:!1,isPreventHistory:!1};if(this.diagram.selectedObject.helperObject){var a=this.diagram.findObjectsUnderMouse(this.currentPosition),l=this.diagram.findObjectUnderMouse(a,this.action,this.inAction);if(e=this.diagram.selectedObject.helperObject,"SwimLane"===(i=this.diagram.selectedObject.actualObject).shape.type&&(n=ls(this.diagram,i.wrapper.children[0])),"SwimLane"!==i.shape.type&&i.parentId&&"SwimLane"===this.diagram.getObject(i.parentId).shape.type&&l instanceof sa&&this.diagram.getObject(l.parentId)&&"SwimLane"!==this.diagram.getObject(l.parentId).shape.type&&(l=this.diagram.getObject(l.parentId)),"Drag"===this.currentAction&&i.container&&"Canvas"===i.container.type&&i.parentId&&"SwimLane"===this.diagram.getObject(i.parentId).shape.type&&l&&l!==i&&l.container&&"Canvas"===l.container.type&&l.isLane&&i.isLane&&l.parentId===i.parentId)gs(this.diagram,i,l,this.currentPosition),s.isPreventHistory=!0;else{var c=this.diagram.nameTable[i.parentId];(!c||c&&"SwimLane"!==c.shape.type)&&(i.offsetX=e.offsetX,i.offsetY=e.offsetY,i&&i.shape&&"UmlClassifier"!==i.shape.type&&(i.width=e.width,i.height=e.height),i.rotateAngle=e.rotateAngle);var h=void 0;if(c&&c.container&&"Stack"===c.container.type&&(this.diagram.startGroupAction(),o=!0),!l&&c&&c.container&&"Stack"===c.container.type&&"Drag"===this.action){var d=c.wrapper.children.indexOf(i.wrapper);if(h={targetIndex:void 0,target:void 0,sourceIndex:d,source:Ul(i)},d>-1){var u=c.children;u.splice(u.indexOf(i.id),1),this.diagram.nameTable[i.id].parentId="",t=!0,c.wrapper.children.splice(d,1)}}(function(e,t,n,i){var r=e,o=n.nameTable[r.parentId],s=n.nameTable[r.parentId];if(t&&s&&s.container&&"Stack"===s.container.type&&t.container&&"Stack"===t.container.type&&s.id!==t.parentId){var a=s.wrapper.children.indexOf(r.wrapper);a>-1&&(n.nameTable[r.id].parentId=t.id,s.wrapper.children.splice(a,1))}if(t&&t.parentId&&r.parentId&&"Drag"===i&&"Stack"===s.container.type){var l=o.wrapper.children.indexOf(t.wrapper),c=o.wrapper.children.indexOf(r.wrapper),h={targetIndex:l,target:t,sourceIndex:c,source:e};o.wrapper.children.splice(c,1),o.wrapper.children.splice(l,0,r.wrapper),n.commandHandler.addHistoryEntry({type:"StackChildPositionChanged",redoObject:{targetIndex:c,target:t,sourceIndex:l,source:e},undoObject:h,category:"Internal"})}})(i,l,this.diagram,this.action),(c=Ko(this.diagram,i)?this.diagram.nameTable[i.parentId]:this.diagram.nameTable[i.parentId]||i)&&c.container&&"Canvas"===c.container.type&&(c.wrapper.maxWidth=c.maxWidth=c.wrapper.actualSize.width,c.wrapper.maxHeight=c.maxHeight=c.wrapper.actualSize.height,r=!0),Ko(this.diagram,i,!0)&&c&&"Canvas"===c.container.type?Jo(this.diagram,i):s=this.updateContainerPropertiesExtend(c,i,n,e,s),i.shape.lanes&&this.updateLaneChildNode(i),r&&(c.maxWidth=c.wrapper.maxWidth=void 0,c.maxHeight=c.wrapper.maxHeight=void 0),t&&(this.diagram.nodePropertyChange(c,{},{offsetX:c.offsetX,offsetY:c.offsetY,width:c.width,height:c.height,rotateAngle:c.rotateAngle}),this.diagram.diagramActions&Tn.UndoRedo||this.diagram.addHistoryEntry({type:"StackChildPositionChanged",redoObject:{sourceIndex:void 0,source:h.source},undoObject:h,category:"Internal"})),i&&i.container&&("Stack"===i.container.type||"Canvas"===i.container.type&&""===i.parentId)&&(i&&i.shape&&"UmlClassifier"===i.shape.type&&(i.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(i,{},{offsetX:i.offsetX,offsetY:i.offsetY,width:i.width,height:i.height,rotateAngle:i.rotateAngle}),i&&i.shape&&"UmlClassifier"===i.shape.type&&(i.wrapper.measureChildren=!1))}fs(n,this.diagram),s.hasStack=o}return s},e.prototype.updateLaneChildNode=function(e){for(var t=0;t<e.shape.lanes.length;t++)if(e.shape.lanes[t].children&&e.shape.lanes[t].children.length>0)for(var n=0;n<e.shape.lanes[t].children.length;n++){var i=this.diagram.nameTable[e.shape.lanes[t].children[n].id];i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY}},e.prototype.updateContainerPropertiesExtend=function(e,t,n,i,r){if("ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction||"SwimLane"===t.shape.type){var o=Ul(t),s=!1;if(e&&e.container&&"Grid"===e.container.type){var a="SwimLane"===e.shape.type,l=a?e.wrapper.children[0]:e.wrapper,c=a?e.shape.padding:void 0,h=e.wrapper.bounds.x,d=e.wrapper.bounds.y;if(void 0!==t.columnIndex&&"Horizontal"===e.container.orientation&&(a&&t.isPhase||!a&&1===t.rowIndex)||"Vertical"===e.container.orientation&&(!a&&t.rowIndex>0&&t.columnIndex>0||a&&t.isLane)){if("Horizontal"===e.container.orientation&&t.isPhase&&t.wrapper.width>t.maxWidth&&(t.maxWidth=t.wrapper.width,t.wrapper.maxWidth=t.wrapper.width),ms(this.diagram,t,e,i),l.updateColumnWidth(t.columnIndex,i.width,!0,c),t.isPhase){var u=this.diagram.nameTable[e.shape.phases[t.columnIndex].header.id];u.maxWidth<i.width&&(u.maxWidth=i.width,u.wrapper.maxWidth=i.width)}"SwimLane"===e.shape.type&&(e.width=e.width?l.width:e.width,ws(this.diagram,e),e.wrapper.width=e.width,n=ls(this.diagram,l))}else void 0!==t.rowIndex&&(s=!0,ms(this.diagram,t,e,i),l.updateRowHeight(t.rowIndex,i.height,!0,c),"SwimLane"===e.shape.type&&(e.height=e.height?l.height:e.height,e.wrapper.height=e.height,n=ls(this.diagram,l)));"SwimLane"===e.shape.type&&(r.isPreventHistory=!0),this.diagram.nodePropertyChange(e,{},{offsetX:e.offsetX,offsetY:e.offsetY,rotateAngle:e.rotateAngle}),this.diagram.drag(e,h-e.wrapper.bounds.x,d-e.wrapper.bounds.y)}else t&&t.shape&&"UmlClassifier"===t.shape.type&&(t.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(t,{},{offsetX:t.offsetX,offsetY:t.offsetY,width:t.width,height:t.height,rotateAngle:t.rotateAngle}),t.wrapper.measureChildren=!1;if(t.wrapper.measure(new Xt(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),"ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction){var p=Ul(t);this.diagram.addHistoryEntry({category:"Internal",type:s?"RowHeightChanged":"ColumnWidthChanged",undoObject:o,redoObject:p})}}return fs(n,this.diagram),r},e.prototype.addUmlNode=function(){var e=this.diagram.selectedItems.nodes[0],t=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x+20,y:this.currentPosition.y}),n=this.diagram.findObjectUnderMouse(t,this.action,this.inAction);if(n||(t=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),n=this.diagram.findObjectUnderMouse(t,this.action,this.inAction)),e&&e.container&&"Stack"===e.container.type&&n&&n.parentId&&n.parentId===e.id){var i=n,r=Cl(this.diagram.element.id);if(r.getElementById(r.id+"_stack_highlighter")){var o=e.wrapper.children.indexOf(n.wrapper)+1,s=new sa(this.diagram,"nodes",{style:{fill:e.style.fill,strokeColor:"#ffffff00"},annotations:n.annotations,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(An.Default|An.HideThumbs)&~(An.Rotate|An.Drag|An.Resize),minHeight:25},!0);s.annotations[0].content=" + Name : Type",i.id.split("_"),s.id=zl()+s.id,s.parentId=e.id,s.zIndex=-1,s.umlIndex=o,this.diagram.startGroupAction(),e.wrapper.children.indexOf(s.wrapper),this.diagram.add(s),this.diagram.updateConnectorEdges(e),this.diagram.select([this.diagram.nameTable[s.id]]),this.diagram.endGroupAction(),this.diagram.startTextEdit()}}},e}(),Vc=function(){function e(){}return e.prototype.findObjectsUnderMouse=function(e,t,n,i,r){var o,s,a,l,c=[];i&&i instanceof fo&&i.nodes.length+i.connectors.length===1&&(i=i.nodes[0]||i.connectors[0]).children&&0===i.children.length&&(n.actualObject=i);for(var h,d,u={},p=0,f=t.spatialSearch.findObjects(new an(e.x-50,e.y-50,100,100));p<f.length;p++){var g=e;s=(S=f[p]).wrapper.outerBounds;var m=!S.rotateAngle&&s.containsPoint(g);if(((S!==i||t.currentDrawingObject instanceof uo)&&S instanceof uo?S!==t.currentDrawingObject:S.wrapper.visible)&&(C=t.commandHandler.getObjectLayer(S.id))&&!C.lock&&C.visible){if(h=u[C.zIndex]=u[C.zIndex]||[],S.rotateAngle){s=Hl(o=S.wrapper);for(var y=0,v=o.children;y<v.length;y++)a=v[y],un(l=hn(),-(a.rotateAngle+a.parentTransform),a.offsetX,a.offsetY),g=dn(l,e),Hl(a).containsPoint(g)&&(m=!0)}(!i||!1===wc(t,S))&&((d=S)instanceof uo?d.constraints&Cn.PointerEvents:d.constraints&An.PointerEvents)&&(S instanceof uo?Pa(S,e):m)&&this.findElementUnderMouse(S,e,S instanceof uo&&S.hitPadding||0)&&"helper"!==S.id&&ol(S,"zIndex",h)}}for(var b=0,w=t.layers;b<w.length;b++)for(var C,x=0,A=c=c.concat(u[(C=w[b]).zIndex]||[]);x<A.length;x++){var S;"Bpmn"!==(S=A[x]).shape.type||!S.processId||t.eventHandler.tool instanceof Ec&&!(t.eventHandler.tool instanceof Ec&&Io(S))||(P=c.indexOf(t.nameTable[S.processId]))>-1&&c.splice(P,1),"UmlClassifier"===S.shape.type&&S.container&&"Stack"===S.container.type&&(P=c.indexOf(t.nameTable[t.nameTable[S.id].wrapper.children[0].id]))>-1&&c.splice(P,1)}for(var O=0;O<c.length;O++){var E=t.nameTable[c[O].parentId];if(E)for(var I=this.findElementUnderMouse(E,e),D=0;D<E.ports.length;D++)if(I.id.match("_"+E.ports[D].id+"$")){var k=E.ports[D];if(Bo(k)||No(k))return c}for(;E;){var P;if(-1===(P=c.indexOf(E)))break;c.splice(P,1),E=t.nameTable[E.parentId]}}if(n&&!n.source)for(O=0;O<c.length;O++){var T=t.nameTable[c[O].parentId];if(T&&"SwimLane"===T.shape.type)for(D=0;D<c.length;D++)c[D]instanceof uo&&c.splice(O,1)}return c},e.prototype.isTarget=function(e,t,n){var i,r=t.selectedItems.connectors[0];if(!(i="ConnectorSourceEnd"===n?t.nameTable[r.targetID]:i=t.nameTable[r.sourceID])||(i.processId||e.processId)&&i.processId===e.processId||(i.processId!==e.processId&&(e=null),e&&e.parentId&&"UmlClassifier"===t.nameTable[e.parentId].shape.type&&(e=t.nameTable[e.parentId])),"ConnectorSourceEnd"===n&&r.targetID){var o=t.nameTable[r.targetID];if(o&&o.shape&&"TextAnnotation"===o.shape.shape){var s=r.id.split("_");("Bpmn"===o.shape.type&&"Bpmn"!==e.shape.type||s[0]===e.id||"TextAnnotation"===e.shape.shape)&&(e=null),e.parentId&&"UmlClassifier"===t.nameTable[e.parentId].shape.type&&(e=t.nameTable[e.parentId])}}return e},e.prototype.findObjectUnderMouse=function(e,t,n,i,r,o,s){var a,l,c=null;if(0!==t.length)if(s&&s instanceof fo&&s.nodes.length+s.connectors.length===1&&(s=s.nodes[0]||s.connectors[0]),"ConnectorSourceEnd"===n&&s||"PortDraw"===n||(Mo(e)||To(e))&&al(e.drawingObject)===uo){for(var h=e.selectedItems.connectors[0],d=t.length-1;d>=0;d--)if(l=tl(t[d],!1),t[d]instanceof sa&&(So(t[d])||Oo(l)))return c=t[d],h&&(c=this.isTarget(c,e,n)),r.actualObject=c,c}else if("ConnectorTargetEnd"===n&&s){for(d=t.length-1;d>=0;d--)if(a=tl(t[d],!0),t[d]instanceof sa&&(xo(t[d])||Ao(a)))return c=this.isTarget(c=t[d],e,n),r.actualObject=c,c}else{if(s&&("Drag"===n||e.eventHandler.tool instanceof Ec)){var u=0;for(d=0;d<t.length;d++){var p=t[d];s!==p&&(p instanceof uo||!o||p.wrapper.bounds.containsPoint(o))&&Io(p)&&(c?(c=u>=p.zIndex?c:p,u=Math.max(u,p.zIndex)):u=(c=p).zIndex)}return c&&"Bpmn"===c.shape.type&&(c=e.selectedItems.nodes.length>0&&"Bpmn"===e.selectedItems.nodes[0].shape.type?c:null),c&&(r.actualObject=c),c}if("Select"===n&&e.eventHandler.tool){for(d=t.length-1;d>=0;d--)if(t[d]instanceof uo&&t[d-1]instanceof sa&&t[d-1].ports){if((y=this.findTargetElement(t[d-1].wrapper,o,void 0))&&(y.id.match("_icon_content_shape$")||y.id.match("_icon_content_rect$")))return t[d-1];for(var f=0;f<t[d-1].ports.length;f++)if(y&&y.id.match("_"+t[d-1].ports[f].id+"$")&&No(t[d-1].ports[f]))return t[d-1]}if(r.actualObject=c=t[t.length-1],!e.eventHandler.itemClick(c,!0)&&c.parentId)for(var g=c,m=wc(e,g);g&&(!wc(e,g)||m);)c=g,g=e.nameTable[g.parentId]}else if("Pan"===n||"LayoutAnimation"===n){for(d=t.length-1;d>=0;d--)if(t[d]instanceof sa){var y=this.findTargetElement(t[d].wrapper,o,void 0);if("LayoutAnimation"===n||"Pan"===n||y&&(y.id.match("_icon_content_shape$")||y.id.match("_icon_content_rect$")))return t[d]}}else c=t[t.length-1],r&&c&&(r.actualObject=c)}return c},e.prototype.findElementUnderSelectedItem=function(e,t){return e instanceof fo?1!==e.nodes.length||e.connectors&&e.connectors.length?e.nodes&&!e.nodes.length||1!==e.connectors.length?null:this.findElementUnderMouse(e.connectors[0],t):this.findElementUnderMouse(e.nodes[0],t):this.findElementUnderMouse(e,t)},e.prototype.findElementUnderMouse=function(e,t,n){return this.findTargetElement(e.wrapper,t,n)},e.prototype.findTargetElement=function(e,t,n){for(var i=e.children.length-1;i>=0;i--){var r=e.children[i];if(r&&r.outerBounds.containsPoint(t)){if(r instanceof Xn){var o=this.findTargetElement(r,t);if(o)return o}if(r.bounds.containsPoint(t))return r}}return e.bounds.containsPoint(t,n)&&"none"!==e.style.fill?e:null},e}(),Uc=function(e){function t(t,n,i,r){var o=e.call(this,t,n,i,r)||this;return o.objectZIndex=-1,o.zIndexTable={},o.objects=[],o}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"id",void 0),Object(s.b)([ye(!0)],t.prototype,"visible",void 0),Object(s.b)([ye(!1)],t.prototype,"lock",void 0),Object(s.b)([ye()],t.prototype,"objects",void 0),Object(s.b)([ye()],t.prototype,"addInfo",void 0),Object(s.b)([ye(-1)],t.prototype,"zIndex",void 0),t}(Le),Wc=function(){function e(e){this.clipboardData={},this.connectorsTable=[],this.processTable={},this.isContainer=!1,this.childTable={},this.parentTable={},this.diagram=e}return Object.defineProperty(e.prototype,"snappingModule",{get:function(){return this.diagram.snappingModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutAnimateModule",{get:function(){return this.diagram.layoutAnimateModule},enumerable:!0,configurable:!0}),e.prototype.startTransaction=function(e){this.state={element:this.diagram.selectedItems,backup:null},e&&this.diagram.protectPropertyChange(!0),Al(this.diagram.element.id).style.pointerEvents="none"},e.prototype.endTransaction=function(e){this.state=null,e&&this.diagram.protectPropertyChange(!1),Al(this.diagram.element.id).style.pointerEvents="all"},e.prototype.showTooltip=function(e,t,n,i,r){var o=this;r&&(this.diagram.tooltipObject.position="BottomCenter",this.diagram.tooltipObject.animation={open:{delay:0,duration:0}},this.diagram.tooltip.relativeMode="ConnectTool"===i?"Mouse":"Object",this.diagram.tooltipObject.openDelay=0,this.diagram.tooltipObject.closeDelay=0),this.diagram.tooltipObject.content=n;var s=Ra(this.diagram,{x:t.x,y:t.y},e);this.diagram.tooltipObject.offsetX=s.x+("ConnectTool"===i?10:0),this.diagram.tooltipObject.offsetY=s.y+10,this.diagram.tooltipObject.dataBind(),r&&setTimeout(function(){o.diagram.tooltipObject.open(o.diagram.element)},1)},e.prototype.closeTooltip=function(){this.diagram.tooltipObject.close()},e.prototype.canEnableDefaultTooltip=function(){return!!(this.diagram.selectedItems.constraints&wn.ToolTip)},e.prototype.updateSelector=function(){this.diagram.updateSelector()},e.prototype.triggerEvent=function(e,t){if(e===Ln.drop||e===Ln.positionChange||e===Ln.connectionChange){if(this.diagram.currentSymbol)return;if(e===Ln.drop&&(t.source=this.diagram),this.diagram.currentDrawingObject)return}this.diagram.triggerEvent(e,t)},e.prototype.dragOverElement=function(e,t){this.diagram.currentSymbol&&this.triggerEvent(Ln.dragOver,{element:e.source,target:e.target,mousePosition:t,diagram:this.diagram})},e.prototype.disConnect=function(e,t){var n,i={},r={};if(e instanceof fo?n=e.connectors[0]:e instanceof uo&&this.diagram.currentDrawingObject&&(n=this.diagram.currentDrawingObject),e&&n&&(bc(this.diagram)||this.diagram.currentDrawingObject))if(!t||"ConnectorSourceEnd"!==t&&"ConnectorTargetEnd"!==t){if("OrthoThumb"!==t&&"SegmentEnd"!==t&&(n.sourceID||n.targetID)){i={sourceID:n.sourceID,sourcePortID:n.sourcePortID,targetID:n.targetID,targetPortID:n.targetPortID},n.sourceID="",n.sourcePortID="",n.targetID="",n.targetPortID="";var o={connector:n,oldValue:i,newValue:r={sourceID:n.sourceID,sourcePortID:n.sourcePortID,targetID:n.targetID,targetPortID:n.targetPortID},cancel:!1,state:"Changing",connectorEnd:t};this.triggerEvent(Ln.connectionChange,o),o.cancel?(n.sourceID=i.sourceID,n.sourcePortID=i.sourcePortID,n.targetID=i.targetID,n.targetPortID=i.targetPortID):(this.diagram.connectorPropertyChange(n,i,r),this.diagram.updateDiagramObject(n),this.triggerEvent(Ln.connectionChange,o={connector:n,oldValue:i,newValue:r,cancel:!1,state:"Changed",connectorEnd:t}))}}else{var s="ConnectorSourceEnd"===t?"sourceID":"targetID",a="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";n[s]&&(i[s]=n[s],n[s]="",r[s]=n[s],(n.sourcePortID||n.targetPortID)&&(i[a]=n[a],n[a]="",r[a]=n[a]),this.connectionEventChange(n,i,r,t))}},e.prototype.connectionEventChange=function(e,t,n,i){var r="ConnectorSourceEnd"===i?"sourceID":"targetID",o="ConnectorSourceEnd"===i?"sourcePortID":"targetPortID",s={connector:e,oldValue:{nodeId:t[r],portId:t[o]},newValue:{nodeId:n[r],portId:n[o]},cancel:!1,state:"Changing",connectorEnd:i};this.triggerEvent(Ln.connectionChange,s),s.cancel?(e[r]=t[r],e[o]=t[o],n=t):(this.diagram.connectorPropertyChange(e,t,n),this.diagram.updateDiagramObject(e),this.triggerEvent(Ln.connectionChange,s={connector:e,oldValue:{nodeId:t[r],portId:t[o]},newValue:{nodeId:n[r],portId:n[o]},cancel:!1,state:"Changed",connectorEnd:i}))},e.prototype.findTarget=function(e,t,n,i){if(t instanceof sa){if(e&&e.id===t.id+"_content")return t;if(n&&"Bpmn"===t.shape.type&&"Activity"===t.shape.shape&&"Transaction"===t.shape.activity.subProcess.type){var r=t.shape.activity.subProcess.transaction;if(r.success.visible&&0===e.id.indexOf(t.id+"_success"))return r.success;if(r.cancel.visible&&0===e.id.indexOf(t.id+"_cancel"))return r.cancel;if(r.failure.visible&&0===e.id.indexOf(t.id+"_failure"))return r.failure}if(e instanceof Zn)for(var o=0;o<t.ports.length;o++){var s=t.ports[o];if(e.id===t.id+"_"+s.id)return s}}if(!i){var a=void 0;for(o=0;o<t.annotations.length;o++)if(e.id===t.id+"_"+(a=t.annotations[o]).id)return a}return t},e.prototype.canDisconnect=function(e,t,n,i){var r;return t.source instanceof fo?r=t.source.connectors[0]:t.source instanceof uo&&this.diagram.currentDrawingObject&&(r=this.diagram.currentDrawingObject),this.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===e,!0),r["ConnectorSourceEnd"===e?"sourceID":"targetID"]!==i||r["ConnectorSourceEnd"===e?"sourcePortID":"targetPortID"]!==n},e.prototype.changeAnnotationDrag=function(e){var t;if(e.source&&e.source.connectors&&e.source.connectors.length&&this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e.source.connectors[0])>-1){e.source instanceof fo&&(t=e.source.connectors[0]);var n=t.id.split("_"),i=n[n.length-3]||n[0];if(e.target&&e.target.id!==i&&"TextAnnotation"!==e.target.shape.shape){this.diagram.startGroupAction();var r=this.getAnnotation(this.diagram.nameTable[n[0]],n[1]),o={id:n[1]+zl(),angle:Zt.findAngle(t.intermediatePoints[0],t.intermediatePoints[1]),text:r.text,length:Zt.distancePoints(t.intermediatePoints[0],t.intermediatePoints[1]),shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:r.nodeId},s=new Xs(e.target.shape,"annotations",o,!0);this.diagram.bpmnModule.checkAndRemoveAnnotations(this.diagram.nameTable[t.targetID],this.diagram),this.diagram.refreshCanvasLayers(),s.id=n[1],this.diagram.addTextAnnotation(s,e.target),this.diagram.endGroupAction()}else t&&(t.sourceID=i,this.diagram.connectorPropertyChange(t,{},{sourceID:i}),this.diagram.updateDiagramObject(t))}},e.prototype.connect=function(e,t){var n,i,r,o={},s={};t.source instanceof fo?r=t.source.connectors[0]:t.source instanceof uo&&this.diagram.currentDrawingObject&&(r=this.diagram.currentDrawingObject);var a=this.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===e,!0),l="ConnectorSourceEnd"===e?"sourceID":"targetID",c="ConnectorSourceEnd"===e?"sourcePortID":"targetPortID";if(a instanceof sa)s[l]=r[l],r[l]=a.id,o[l]=r[l],s[c]=r[c],this.connectionEventChange(r,s,o,e);else{n=r[l],i=r[c],r[c]=a.id,r[l]=t.target.id,o[l]=r[l],o[c]=r[c];var h={connector:r,oldValue:{nodeId:n,portId:i},newValue:{nodeId:o[l],portId:o[c]},cancel:!1,state:"Changing",connectorEnd:e};this.triggerEvent(Ln.connectionChange,h),h.cancel?(r[l]=n,r[c]=i,o[l]=n,o[c]=i):(this.diagram.connectorPropertyChange(r,s,o),this.diagram.updateDiagramObject(r),this.triggerEvent(Ln.connectionChange,h={connector:r,oldValue:{nodeId:n,portId:i},newValue:{nodeId:o[l],portId:o[c]},cancel:!1,state:"Changed",connectorEnd:e}))}this.renderHighlighter(t,void 0,"ConnectorSourceEnd"===e)},e.prototype.cut=function(){this.clipboardData.pasteIndex=0,this.diagram.undoRedoModule&&this.diagram.historyManager.startGroupAction(),this.clipboardData.clipObject=this.copyObjects(),this.diagram.undoRedoModule&&this.diagram.historyManager.endGroupAction(),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()},e.prototype.addLayer=function(e,t){if(e.id=e.id||zl(),e.zIndex=this.diagram.layers.length,(e=new Uc(this.diagram,"layers",e,!0)).objectZIndex=-1,e.zIndexTable={},this.diagram.layers.push(e),this.diagram.layerZIndexTable[e.zIndex]=e.id,this.diagram.activeLayer=e,t)for(var n=0;n<t.length;n++)this.diagram.add(t[n])},e.prototype.getObjectLayer=function(e){for(var t=this.diagram.layers,n=0;n<t.length;n++)if(t[n].objects.indexOf(e)>-1)return t[n];return this.diagram.activeLayer},e.prototype.getLayer=function(e){for(var t=this.diagram.layers,n=0;n<t.length;n++)if(t[n].id===e)return t[n]},e.prototype.removeLayer=function(e){var t=this.getLayer(e);if(t){for(var n=this.diagram.layers.indexOf(t),i=t.objects,r=i.length-1;r>=0;r--)this.diagram.unSelect(this.diagram.nameTable[i[r]]),this.diagram.remove(this.diagram.nameTable[i[r]]),"default_layer"!==t.id&&this.diagram.activeLayer.id===e&&(this.diagram.activeLayer=this.diagram.layers[this.diagram.layers.length-1]);delete this.diagram.layerZIndexTable[t.zIndex],this.diagram.layers.splice(n,1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.moveObjects=function(e,t){var n,i=this.getLayer(t)||this.diagram.activeLayer;this.diagram.setActiveLayer(i.id);for(var r=0,o=e;r<o.length;r++){var s=o[r];this.getObjectLayer(s).objects.indexOf(s)>-1&&(this.diagram.unSelect(n=this.diagram.nameTable[s]),this.diagram.remove(this.diagram.nameTable[s]),this.diagram.add(n))}},e.prototype.cloneLayer=function(e){var t=this.getLayer(e);if(t){var n=[],i={id:e+"_"+zl(),objects:[],visible:!0,lock:!1};this.addLayer(i),i.zIndex=this.diagram.layers.length-1;for(var r=0,o=t.objects;r<o.length;r++)n.push(this.diagram.nameTable[o[r]]);this.paste(n)}},e.prototype.copy=function(){return this.clipboardData.pasteIndex=1,this.clipboardData.clipObject=this.copyObjects(),this.clipboardData.clipObject},e.prototype.copyObjects=function(){var e=[],t=[];if(this.clipboardData.childTable={},this.diagram.selectedItems.connectors.length>0){e=this.diagram.selectedItems.connectors;for(var n=0;n<e.length;n++){var i;i=this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e[n])>-1?Ul(this.diagram.nameTable[e[n].targetID]):Ul(e[n]),t.push(i)}}if(this.diagram.selectedItems.nodes.length>0)for(e=e.concat(this.diagram.selectedItems.nodes),n=0;n<this.diagram.selectedItems.nodes.length;n++){var r=Ul(this.diagram.selectedItems.nodes[n]);this.copyProcesses(r),t.push(Ul(r));var o=hn();if(un(o,-r.rotateAngle,r.offsetX,r.offsetY),r.children){for(var s=this.clipboardData.childTable,a=void 0,l=this.getAllDescendants(r,[],!0),c=0;c<l.length;c++){var h=s[(a=this.diagram.nameTable[l[c].id]).id]=Ul(a),d=dn(o,{x:h.wrapper.offsetX,y:h.wrapper.offsetY});a instanceof sa&&(h.offsetX=d.x,h.offsetY=d.y,h.rotateAngle-=r.rotateAngle)}this.clipboardData.childTable=s}if("SwimLane"===r.shape.type){var u=this.diagram.getObject(this.diagram.selectedItems.nodes[n].id),p=(s=this.clipboardData.childTable,ls(this.diagram,u.wrapper.children[0]));for(c=0;c<p.length;c++){var f=this.diagram.getObject(p[c]);s[f.id]=Ul(f)}}if(r&&r.isLane){s=this.clipboardData.childTable;var g=ys(u=this.diagram.getObject(r.parentId),r);s[r.id]=Ul(u.shape.lanes[g]),s[r.id].width=u.wrapper.actualSize.width}}if(0===this.clipboardData.pasteIndex){this.startGroupAction();for(var m=0,y=e;m<y.length;m++){var v=y[m];this.diagram.nameTable[v.id]&&(this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(v)>-1?this.diagram.remove(this.diagram.nameTable[v.targetID]):this.diagram.remove(v))}this.endGroupAction()}return this.sortByZIndex(t,"zIndex"),t},e.prototype.copyProcesses=function(e){if("Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0){for(var t=0,n=e.shape.activity.subProcess.processes;t<n.length;t++){var i=n[t];this.processTable[i]=Ul(this.diagram.nameTable[i]),this.processTable[i].shape.activity.subProcess.processes&&this.processTable[i].shape.activity.subProcess.processes.length>0&&this.copyProcesses(this.processTable[i])}this.clipboardData.processTable=this.processTable}},e.prototype.group=function(){var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|Tn.Group;var t,n=[],i={};i.id="group"+zl(),(i=new sa(this.diagram,"nodes",i,!0)).children=[],n=(n=this.diagram.selectedItems.nodes).concat(this.diagram.selectedItems.connectors);for(var r=0;r<n.length;r++)n[r].parentId||i.children.push(n[r].id);(t=this.diagram.add(i))&&this.select(t),this.addHistoryEntry({type:"Group",undoObject:i,redoObject:i,category:"Internal"}),this.diagram.diagramActions=this.diagram.diagramActions&~Tn.Group,this.diagram.protectPropertyChange(e)},e.prototype.unGroup=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|Tn.Group;var n=[];e?n.push(e):n=this.diagram.selectedItems.nodes;for(var i=0;i<n.length;i++){var r=n[i],o={type:"UnGroup",undoObject:Ul(r),redoObject:Ul(r),category:"Internal"};if(this.diagram.diagramActions&Tn.UndoRedo||this.addHistoryEntry(o),r.children){r.ports&&r.ports.length>0&&this.diagram.removePorts(r,r.ports),r.annotations&&r.annotations.length>0&&this.diagram.removeLabels(r,r.annotations);for(var s=this.diagram.nameTable[r.parentId],a=r.children.length-1;a>=0;a--)this.diagram.nameTable[r.children[a]].parentId="",this.diagram.deleteChild(this.diagram.nameTable[r.children[a]],r),r.parentId&&r.children[a]&&this.diagram.addChild(s,r.children[a]);r.parentId&&this.diagram.deleteChild(r,s)}this.diagram.removeNode(r),this.clearSelection()}this.diagram.diagramActions=this.diagram.diagramActions&~Tn.Group,this.diagram.protectPropertyChange(t)},e.prototype.paste=function(e){if(e||this.clipboardData.clipObject){this.diagram.protectPropertyChange(!0);var t=e?this.getNewObject(e):this.clipboardData.clipObject;if(t){var n=1!==t.length,i=!1,r={},o={};0!==this.clipboardData.pasteIndex&&this.clearSelection(),this.diagram.undoRedoModule&&(i=!0,this.diagram.historyManager.startGroupAction());for(var s=0,a=t;s<a.length;s++)r[(c=a[s]).id]=c;for(var l=0;l<t.length;l++){var c;if(al(c=t[l])===uo){var h=Ul(c),d=h.sourceID;h.sourceID="",r[d]&&o[d]&&(h.sourceID=o[d]),d=h.targetID,h.targetID="",r[d]&&o[d]&&(h.targetID=o[d]);var u=this.cloneConnector(h,n);o[c.id]=u.id}else{var p=this.cloneNode(c,n);if(p){o[c.id]=p.id;var f=c.inEdges;if(f)for(var g=0,m=f;g<m.length;g++)r[b=m[g]]&&o[b]&&((w=this.diagram.nameTable[o[b]]).targetID=o[c.id],this.diagram.connectorPropertyChange(w,{targetID:"",targetPortID:""},{targetID:w.targetID,targetPortID:w.targetPortID}));if(f=c.outEdges)for(var y=0,v=f;y<v.length;y++){var b,w;r[b=v[y]]&&o[b]&&((w=this.diagram.nameTable[o[b]]).sourceID=o[c.id],this.diagram.connectorPropertyChange(w,{sourceID:"",sourcePortID:""},{sourceID:w.sourceID,sourcePortID:w.sourcePortID}))}}}}!0===i&&(this.diagram.historyManager.endGroupAction(),i=!1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.clipboardData.pasteIndex++,this.diagram.protectPropertyChange(!1)}}},e.prototype.getNewObject=function(e){var t,n=[];this.clipboardData.pasteIndex=1;for(var i=0;i<e.length;i++)t=Ul(e[i]),n.push(t);return n},e.prototype.cloneConnector=function(e,t){var n,i=Ul(e);return this.translateObject(i),i.zIndex=-1,n=this.diagram.add(i),this.selectObjects([n],t),n},e.prototype.cloneNode=function(e,t,n,i){var r,o,s={},a=Ul(e),l=this.diagram.nameTable[e.parentId];if(e.shape&&"Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length&&(o=a.shape.activity.subProcess.processes,a.zIndex=-1,a.shape.activity.subProcess.processes=void 0),e.shape&&"SwimLane"===e.shape.type)Es(e,this.diagram,this.clipboardData);else if(l&&"SwimLane"===l.shape.type)Es(Ul(l),this.diagram,this.clipboardData,e,!0);else if(!e.children||!e.children.length||n&&n.length)if(e.shape&&"TextAnnotation"===e.shape.shape&&-1!==e.id.indexOf("_textannotation_")&&this.diagram.nameTable[e.id])for(var c=e.id.split("_textannotation_"),h=void 0,d=this.diagram.nameTable[e.id],u=0;u<d.inEdges.length;u++){var p=this.diagram.nameTable[d.inEdges[u]];if(p){var f=this.getAnnotation(h=this.diagram.nameTable[p.sourceID],c[1]),g={id:c[1]+zl(),angle:f.angle,text:f.text,length:f.length,shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:f.nodeId};this.diagram.addTextAnnotation(g,h)}}else this.translateObject(a,i),a.zIndex=-1,n&&(a.children=n),r=this.diagram.add(a);else r=this.cloneGroup(e,t);for(var m=0,y=Object.keys(s);m<y.length;m++)this.diagram.add(s[y[m]]);return o&&o.length&&(r.shape.activity.subProcess.processes=o,this.cloneSubProcesses(r)),r&&this.selectObjects([r],t),r},e.prototype.getAnnotation=function(e,t){var n=e.shape.annotations;if(n&&n.length)for(var i=0;i<=n.length;i++)if(n[i].id===t)return n[i]},e.prototype.cloneSubProcesses=function(e){var t=[],n={};if("Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length)for(var i=e.shape.activity.subProcess.processes,r=0;r<i.length;r++){for(var o=this.diagram.nameTable[i[r]]||this.clipboardData.processTable[i[r]],s=0,a=o.outEdges;s<a.length;s++)t.indexOf(h=a[s])<0&&t.push(h);for(var l=0,c=o.inEdges;l<c.length;l++){var h;t.indexOf(h=c[l])<0&&t.push(h)}var d=Ul(this.clipboardData.processTable[i[r]]);d.processId=e.id;var u=this.cloneNode(d,!1);n[i[r]]=u.id,i[r]=u.id,this.diagram.addProcess(u,e.id);for(var p=0,f=t;p<f.length;p++){var g=f[p],m=Ul(this.diagram.nameTable[g]||this.diagram.connectorTable[g]);n[m.sourceID]&&n[m.targetID]&&(m.zIndex=-1,m.id+=zl(),m.sourceID=n[m.sourceID],m.targetID=n[m.targetID],t.splice(t.indexOf(g),1),this.diagram.add(m))}}},e.prototype.cloneGroup=function(e,t){var n,i=[],r=[],o=[],s=[];r=r.concat(e.children);var a=zl();if(this.clipboardData.childTable||e.children.length>0)for(var l=0;l<r.length;l++){var c=void 0;(c=this.clipboardData.childTable?this.clipboardData.childTable[r[l]]:this.diagram.nameTable[r[l]]).parentId="",c&&(al(c)===uo?o.push(c):(n=this.cloneNode(c,t,void 0,a),s.push(c.id),i.push(n.id)))}for(var h=0;h<o.length;h++){if(o[h].sourceID||o[h].targetID)for(var d=0;d<s.length;d++)o[h].sourceID===s[d]&&(o[h].sourceID+=a),o[h].targetID===s[d]&&(o[h].targetID+=a);n=this.cloneConnector(o[h],t),i.push(n.id)}var u=this.cloneNode(e,t,i);return u&&u.container&&u.shape&&"UmlClassifier"===u.shape.type&&(this.diagram.updateDiagramObject(u),u.wrapper.measure(new Xt)),u},e.prototype.translateObject=function(e,t){e.id+=t||zl();var n=10*this.clipboardData.pasteIndex;if(al(e)===uo){if(e.sourcePoint={x:e.sourcePoint.x+n,y:e.sourcePoint.y+n},e.targetPoint={x:e.targetPoint.x+n,y:e.targetPoint.y+n},"Bezier"===e.type)for(var i=e.segments,r=0;r<i.length;r++)Zt.isEmptyPoint(i[r].point1)||(i[r].point1={x:i[r].point1.x+n,y:i[r].point1.y+n}),Zt.isEmptyPoint(i[r].point2)||(i[r].point2={x:i[r].point2.x+n,y:i[r].point2.y+n});if(("Straight"===e.type||"Bezier"===e.type)&&e.segments&&e.segments.length>0)for(i=e.segments,r=0;r<i.length-1;r++)i[r].point.x+=n,i[r].point.y+=n}else e.offsetX+=n,e.offsetY+=n},e.prototype.drawObject=function(e){var t,n;n=Ul(this.diagram.drawingObject);for(var i=0,r=Object.keys(e);i<r.length;i++){var o=r[i];n[o]=e[o]}return al(this.diagram.drawingObject)===sa?((t=new sa(this.diagram,"nodes",n,!0)).id=(this.diagram.drawingObject.id||"node")+zl(),this.diagram.initObject(t)):((t=new uo(this.diagram,"connectors",n,!0)).id=(this.diagram.drawingObject.id||"connector")+zl(),this.diagram.initObject(t)),this.diagram.updateDiagramObject(t),this.diagram.currentDrawingObject=t,t},e.prototype.addObjectToDiagram=function(e){var t;this.diagram.removeFromAQuad(e),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[e.id]),delete this.diagram.nameTable[e.id],t=this.diagram.add(e),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.selectObjects([t]),e&&!To(this.diagram)&&(this.diagram.tool&=~In.DrawOnce,this.diagram.currentDrawingObject=void 0)},e.prototype.addText=function(e,t){var n=this.diagram.findElementUnderMouse(e,t);this.diagram.startTextEdit(e,n instanceof Jn?n.id.split("_")[1]:void 0)},e.prototype.selectObjects=function(e,t,n){var i={oldValue:n||[],newValue:e,cause:this.diagram.diagramActions,state:"Changing",type:"Addition",cancel:!1};this.diagram.triggerEvent(Ln.selectionChange,i);var r=this.diagram.tool&In.MultipleSelect,o=ko(this.diagram);if(o||r){if(!r&&(e.length>1||t&&1===e.length)){if(1!==e.length)return;this.clearSelection()}if(!(o||1!==e.length||t&&vc(this.diagram)))return void this.clearSelection()}if(!i.cancel){for(var s=0;s<e.length;s++){var a=e[s];if(vc(this.diagram)){if((s>0||t)&&a.children&&!a.parentId)for(var l=0;l<this.diagram.selectedItems.nodes.length;l++){var c=this.diagram.nameTable[this.diagram.selectedItems.nodes[l].parentId];c&&(c=this.findParent(c))&&a.id===c.id&&this.selectGroup(a)}this.selectProcesses(a),this.selectBpmnSubProcesses(a)&&this.select(a,s>0||t,!0)}else this.select(a,s>0||t,!0)}this.diagram.triggerEvent(Ln.selectionChange,i={oldValue:n||[],newValue:e,cause:this.diagram.diagramActions,state:"Changed",type:"Addition",cancel:!1}),this.diagram.renderSelector(t||e&&e.length>1)}},e.prototype.findParent=function(e){return e.parentId&&this.findParent(e=this.diagram.nameTable[e.parentId]),e},e.prototype.selectProcesses=function(e){if(this.hasProcesses(e))for(var t=e.shape.activity.subProcess.processes,n=0;n<t.length;n++){var i=this.diagram.nameTable[t[n]];this.hasProcesses(i)&&this.selectObjects([i],!0),this.unSelect(i)}},e.prototype.selectGroup=function(e){for(var t=0;t<e.children.length;t++){var n=this.diagram.nameTable[e.children[t]];n.children&&this.selectGroup(n),this.unSelect(this.diagram.nameTable[e.children[t]])}},e.prototype.selectBpmnSubProcesses=function(e){var t,n=!0;if(e.processId)n=!wc(this.diagram,this.diagram.nameTable[e.processId])&&this.selectBpmnSubProcesses(this.diagram.nameTable[e.processId]);else if(e instanceof uo&&(e.sourceID&&this.diagram.nameTable[e.sourceID]&&this.diagram.nameTable[e.sourceID].processId&&(t=this.diagram.nameTable[e.sourceID].processId),e.targetID&&this.diagram.nameTable[e.targetID]&&this.diagram.nameTable[e.targetID].processId&&(t=this.diagram.nameTable[e.targetID].processId),t)){if(wc(this.diagram,this.diagram.nameTable[t]))return!1;n=this.selectBpmnSubProcesses(this.diagram.nameTable[t])}return n},e.prototype.hasProcesses=function(e){return!!(e&&"Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)},e.prototype.select=function(e,t,n){var i=this.getObjectLayer(e.id);if(go(e)&&!(e instanceof fo)&&!wc(this.diagram,e)&&i&&!i.lock&&i.visible&&e.wrapper.visible){(t=!!vc(this.diagram)&&t)||this.clearSelection();var r=this.diagram.selectedItems;if(e instanceof sa?r.nodes.push(e.isHeader?this.diagram.nameTable[e.parentId]:e):r.connectors.push(e),t)r.wrapper.rotateAngle=r.rotateAngle=0,r.wrapper.children.push(e.wrapper);else if(r.init(this.diagram),1===r.nodes.length&&0===r.connectors.length){var o=Is(this.diagram,r);o&&(r.wrapper.children[0]=o),r.rotateAngle=r.nodes[0].rotateAngle,r.wrapper.rotateAngle=r.nodes[0].rotateAngle,r.wrapper.pivot=r.nodes[0].pivot}n||this.diagram.renderSelector(t)}},e.prototype.labelSelect=function(e,t){var n=this.diagram.selectedItems;n.nodes=n.connectors=[],e instanceof sa?n.nodes[0]=e:n.connectors[0]=e,n.annotation=this.findTarget(t,e),n.init(this.diagram),this.diagram.renderSelector(!1)},e.prototype.unSelect=function(e){var t=[];t.push(e);var n={oldValue:t,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1};if(this.diagram.currentSymbol||this.diagram.triggerEvent(Ln.selectionChange,n),wc(this.diagram,e)){var i=this.diagram.selectedItems,r=void 0;e instanceof sa?(r=i.nodes.indexOf(e,0),i.nodes.splice(r,1)):(r=i.connectors.indexOf(e,0),i.connectors.splice(r,1)),(n={oldValue:t,newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1}).cancel||(r=i.wrapper.children.indexOf(e.wrapper,0),i.wrapper.children.splice(r,1),this.diagram.updateSelector(),this.diagram.currentSymbol||this.diagram.triggerEvent(Ln.selectionChange,n))}},e.prototype.getChildElements=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];i.children&&i.children.length>0?t.concat(this.getChildElements(i.children)):(t.push(i.id),i instanceof Jn&&t.push(i.id+"_text"))}return t},e.prototype.moveSvgNode=function(e,t){var n=bl(t+"_groupElement",this.diagram.element.id),i=bl(e+"_groupElement",this.diagram.element.id);n.parentNode.insertBefore(i,n)},e.prototype.sendLayerBackward=function(e){var t=this.getLayer(e);if(t&&0!==t.zIndex){var n=t.zIndex;if("SVG"===this.diagram.mode){var i=t.objects,r=this.getLayer(this.diagram.layerZIndexTable[n-1]).objects[0];if(r)for(var o=0,s=i;o<s.length;o++)this.moveSvgNode(s[o],r)}var a=this.getLayer(this.diagram.layerZIndexTable[n-1]);a.zIndex=a.zIndex+1,t.zIndex=t.zIndex-1;var l=this.diagram.layerZIndexTable[n];this.diagram.layerZIndexTable[n]=this.diagram.layerZIndexTable[n-1],this.diagram.layerZIndexTable[n-1]=l,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.bringLayerForward=function(e){var t=this.getLayer(e);if(t&&t.zIndex<this.diagram.layers.length-1){var n=t.zIndex,i=this.getLayer(this.diagram.layerZIndexTable[n+1]);if("SVG"===this.diagram.mode)for(var r=t.objects[0],o=0,s=i.objects;o<s.length;o++){var a=s[o];a&&this.moveSvgNode(a,r)}i.zIndex=i.zIndex-1,t.zIndex=t.zIndex+1;var l=this.diagram.layerZIndexTable[n];this.diagram.layerZIndexTable[n]=this.diagram.layerZIndexTable[n+1],this.diagram.layerZIndexTable[n+1]=l,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.sendToBack=function(){if(vc(this.diagram)){for(var e=this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id,t=this.diagram.nameTable[e].zIndex,n=this.diagram.layers.indexOf(this.getObjectLayer(e)),i=this.diagram.layers[n].zIndexTable,r=t;r>0;r--)i[r]&&(i[r-1]?(i[r]=i[r-1],this.diagram.nameTable[i[r]].zIndex=r):(i[r-1]=i[r],this.diagram.nameTable[i[r-1]].zIndex=r,delete i[r]));if(i[0]=this.diagram.nameTable[e].id,this.diagram.nameTable[e].zIndex=0,"SVG"===this.diagram.mode){for(var o=i[r=1];!o&&r<t;)o=i[++r];this.moveSvgNode(e,o),this.updateNativeNodeIndex(e)}else this.diagram.refreshCanvasLayers()}},e.prototype.bringToFront=function(){if(vc(this.diagram)){for(var e=this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id,t=this.diagram.layers.indexOf(this.getObjectLayer(e)),n=this.diagram.layers[t].zIndexTable,i=Number(Object.keys(n).sort(function(e,t){return Number(e)-Number(t)}).reverse()[0]),r=this.diagram.nameTable[e].zIndex;r<i;r++)n[r]&&(n[r+1]?(n[r]=n[r+1],this.diagram.nameTable[n[r]].zIndex=r):(n[r+1]=n[r],this.diagram.nameTable[n[r+1]].zIndex=r,delete n[r]));if(n[i]=this.diagram.nameTable[e].id,this.diagram.nameTable[e].zIndex=i,"SVG"===this.diagram.mode){var o=this.diagram.diagramLayer,s=(this.getChildElements(this.diagram.nameTable[e].wrapper.children),bl(e+"_groupElement",this.diagram.element.id)),a=this.diagram.selectedItems.nodes;if(a.length>0&&("Native"===a[0].shape.type||"HTML"===a[0].shape.type)){s.parentNode.removeChild(s);for(var l=0;l<this.diagram.views.length;l++){var c=(s=bl(e+("HTML"===a[0].shape.type?"_content_html_element":"_content_groupElement"),this.diagram.views[l])).parentNode.lastChild;c.parentNode.insertBefore(s,c.nextSibling)}var h=kl(this.diagram.element.id);this.diagram.diagramRenderer.renderElement(this.diagram.nameTable[e].wrapper,o,h)}else{var d=this.getObjectLayer(e);for(r=0;r<d.objects.length;r++)d.objects[r]!==e&&(this.moveSvgNode(d.objects[r],e),this.updateNativeNodeIndex(e))}}else this.diagram.refreshCanvasLayers()}},e.prototype.sortByZIndex=function(e,t){var n=t||"zIndex";return e.sort(function(e,t){return e[n]-t[n]})},e.prototype.sendForward=function(){if(vc(this.diagram)){var e=this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id,t=this.diagram.layers.indexOf(this.getObjectLayer(e)),n=this.diagram.layers[t].zIndexTable,i=(Object.keys(n),this.diagram.nameTable[e]),r=[],o=this.diagram.spatialSearch.findObjects(i.wrapper.bounds);o.length>2&&(o=this.sortByZIndex(o));for(var s=0,a=o;s<a.length;s++){var l=a[s];if(i.id!==l.id&&t===this.getObjectLayer(l.id).zIndex&&Number(this.diagram.nameTable[e].zIndex)<Number(l.zIndex)&&i.wrapper.bounds.intersects(l.wrapper.bounds)){r.push(l);break}}if(r.length>0){var c=r[0].zIndex,h=i.zIndex;this.diagram.layers[0].zIndexTable[c]=i.id,this.diagram.nameTable[n[c]].zIndex=c,this.diagram.layers[0].zIndexTable[h]=r[0].id,this.diagram.nameTable[n[h]].zIndex=h,"SVG"===this.diagram.mode?(this.moveSvgNode(n[Number(r[0].zIndex)],e),this.updateNativeNodeIndex(n[Number(r[0].zIndex)],e)):this.diagram.refreshCanvasLayers()}}},e.prototype.sendBackward=function(){if(vc(this.diagram)){var e=this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id,t=this.diagram.layers.indexOf(this.getObjectLayer(e)),n=this.diagram.layers[t].zIndexTable,i=(Object.keys(n),this.diagram.nameTable[e]),r=[],o=this.diagram.spatialSearch.findObjects(i.wrapper.bounds);o.length>2&&(o=this.sortByZIndex(o));for(var s=0,a=o;s<a.length;s++){var l=a[s];i.id!==l.id&&t===this.getObjectLayer(l.id).zIndex&&Number(this.diagram.nameTable[e].zIndex)>Number(l.zIndex)&&i.wrapper.bounds.intersects(l.wrapper.bounds)&&r.push(l)}if(r.length>0){var c=r[r.length-1].zIndex,h=i.zIndex;n[c]=i.id,this.diagram.nameTable[n[c]].zIndex=c,n[h]=r[r.length-1].id,this.diagram.nameTable[n[h]].zIndex=h,"SVG"===this.diagram.mode?(this.moveSvgNode(e,n[r[r.length-1].zIndex]),this.updateNativeNodeIndex(e,n[r[r.length-1].zIndex])):this.diagram.refreshCanvasLayers()}}},e.prototype.updateNativeNodeIndex=function(e,t){for(var n=this.diagram.selectedItems.nodes,i=0;i<this.diagram.views.length;i++)if(n.length>0&&("HTML"===n[0].shape.type||"Native"===n[0].shape.type)){var r="HTML"===n[0].shape.type?"_content_html_element":"_content_groupElement",o=bl(e+r,this.diagram.views[i]),s=t?bl(t+r,this.diagram.views[i]):o.parentElement.firstChild;o.parentNode.id===s.parentNode.id&&s.parentNode.insertBefore(o,s)}},e.prototype.initSelectorWrapper=function(){var e=this.diagram.selectedItems;e.init(this.diagram),1===e.nodes.length&&0===e.connectors.length&&(e.rotateAngle=e.nodes[0].rotateAngle,e.wrapper.rotateAngle=e.nodes[0].rotateAngle,e.wrapper.pivot=e.nodes[0].pivot)},e.prototype.doRubberBandSelection=function(e){this.clearSelectionRectangle();var t,n=[];n=this.diagram.getNodesConnectors(n),(t="CompleteIntersect"===this.diagram.selectedItems.rubberBandSelectionMode?function(e,t){for(var n=[],i=0;i<t.length;i++){var r=t[i];e.containsRect(r.wrapper.bounds)&&n.push(r)}return n}(e,n):this.diagram.spatialSearch.findObjects(e)).length&&this.selectObjects(t,!0)},e.prototype.clearSelectionRectangle=function(){var e=Cl(this.diagram.element.id).getElementById(this.diagram.element.id+"_diagramAdorner_selected_region");e&&B(e)},e.prototype.dragConnectorEnds=function(e,t,n,i,r,o){var s,a=!1;return t instanceof fo?s=t.connectors[0]:t instanceof uo&&this.diagram.currentDrawingObject&&(this.clearSelection(),s=this.diagram.currentDrawingObject),"BezierSourceThumb"!==e&&"BezierTargetThumb"!==e||(a=!0),"ConnectorSourceEnd"===e||"BezierSourceThumb"===e?this.dragSourceEnd(s,n.x-(a?i.bezierPoint1.x:s.sourcePoint.x),n.y-(a?i.bezierPoint1.y:s.sourcePoint.y),null,n,e,void 0,r,o,void 0,i):this.dragTargetEnd(s,n.x-(a?i.bezierPoint2.x:s.targetPoint.x),n.y-(a?i.bezierPoint2.y:s.targetPoint.y),null,n,e,void 0,i)},e.prototype.getSelectedObject=function(){var e=this.diagram.selectedItems;return e.nodes.concat(e.connectors)},e.prototype.clearSelection=function(e){if(vc(this.diagram)){var t=this.diagram.selectedItems,n=this.getSelectedObject();this.diagram.currentSymbol&&(this.diagram.previousSelectedObject=n);var i={oldValue:n,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1};e&&this.diagram.triggerEvent(Ln.selectionChange,i),i.cancel||(t.offsetX=0,t.offsetY=0,t.width=0,t.height=0,t.rotateAngle=0,t.nodes=[],t.connectors=[],t.wrapper=null,t.annotation=void 0,this.diagram.clearSelectorLayer(),e&&this.diagram.triggerEvent(Ln.selectionChange,i={oldValue:n,newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1}))}},e.prototype.clearSelectedItems=function(){this.clearSelection((this.diagram.selectedItems.nodes?this.diagram.selectedItems.nodes.length:0)+(this.diagram.selectedItems.connectors?this.diagram.selectedItems.connectors.length:0)>0)},e.prototype.removeStackHighlighter=function(){var e=Cl(this.diagram.element.id),t=e.getElementById(e.id+"_stack_highlighter");t&&t.parentNode.removeChild(t)},e.prototype.renderStackHighlighter=function(e,t){var n,i,r,o=this.diagram.selectedItems.nodes[0];if(!t){var s=this.diagram.findObjectsUnderMouse(e.position);if((t=this.diagram.findObjectUnderMouse(s,"Drag",!0))&&!(t.isLane||t.isPhase||t.isHeader))for(var a=0;a<s.length;a++){var l=this.diagram.nameTable[s[a].id];(l.isLane||l.isPhase||l.isHeader)&&(t=l)}}if(o&&t&&t.isLane&&o.shape&&!o.shape.isPhase&&(i=this.diagram.nameTable[t.parentId],this.diagram.currentSymbol&&"SwimLane"===i.shape.type&&(n=!0),(o&&!o.parentId&&"SwimLane"!==o.shape.type||o&&o.parentId&&this.diagram.nameTable[o.parentId]&&this.diagram.nameTable[o.parentId].isLane&&o.parentId!==t.parentId&&o.parentId!==t.id)&&((c=Is(this.diagram,r=this.diagram.selectedItems,t.id,!0))&&(r.wrapper.children[0]=c),this.diagram.renderSelector(!1,!0),r.wrapper.children[0]=r.nodes[0].wrapper)),o&&t&&t.parentId&&o.shape&&o.shape.isPhase&&"SwimLane"===this.diagram.nameTable[t.parentId].shape.type&&(this.diagram.selectedItems.wrapper.children[0]=this.diagram.nameTable[t.parentId].wrapper,this.diagram.renderSelector(!1,!0)),n&&this.diagram.currentSymbol.shape.isLane||o&&t&&o.parentId&&t.parentId&&!o.isPhase&&o.parentId===t.parentId&&o.id!==t.id&&i&&i.container&&("Stack"===i.container.type||"Grid"===i.container.type)){var c=void 0,h="Vertical"===i.container.orientation,d="Stack"===i.container?h:!h;"Grid"===i.container.type&&t.isLane&&(!this.diagram.currentSymbol&&"Horizontal"===i.shape.orientation&&t.rowIndex!==o.rowIndex||"Vertical"===i.shape.orientation&&t.columnIndex!==o.columnIndex||this.diagram.currentSymbol&&this.diagram.currentSymbol.shape.orientation===i.container.orientation)&&(c=Is(this.diagram,r=this.diagram.selectedItems,t.id,n));var u="Stack"===i.container.type?t.wrapper:c;u&&ns(u,d,e.position,this.diagram,!1,!0)}},e.prototype.drag=function(e,t,n){if(mo(e)&&this.checkBoundaryConstraints(t,n,e.wrapper.bounds)&&_o(this.diagram))if(e instanceof sa){var i={offsetX:e.offsetX,offsetY:e.offsetY};if(e.offsetX+=t,e.offsetY+=n,e.children&&!e.container){for(var r=this.getAllDescendants(e,[]),o=0;o<r.length;o++)this.drag(this.diagram.nameTable[r[o].id],t,n);this.updateInnerParentProperties(e)}Ko(this.diagram,e,!0)?Jo(this.diagram,e):(e&&e.shape&&"UmlClassifier"===e.shape.type&&(e.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(e,i,{offsetX:e.offsetX,offsetY:e.offsetY},void 0,void 0,!1),e.wrapper.measureChildren=!1),"SwimLane"!==e.shape.type||this.diagram.currentSymbol||fs(ls(this.diagram,e.wrapper.children[0]),this.diagram)}else{var s=e,a=(i={sourcePoint:s.sourcePoint,targetPoint:s.targetPoint},"Bezier"===s.type),l=!1;s.sourceWrapper?l=!0:this.dragSourceEnd(s,t,n,!0,null,"",a),s.targetWrapper?l=!0:this.dragTargetEnd(s,t,n,!0,null,"",a),l||(this.dragControlPoint(s,t,n,!0),this.diagram.connectorPropertyChange(s,i,{sourcePoint:s.sourcePoint,targetPoint:s.targetPoint}))}},e.prototype.connectorSegmentChange=function(e,t,n){var i,r,o=!0;if(!1===t.equals(t,e.wrapper.bounds)&&e.outEdges.length>0)for(var s=0;s<e.outEdges.length;s++){var a=this.diagram.nameTable[e.outEdges[s]];if(o=""!==a.targetID?!this.isSelected(this.diagram.nameTable[a.targetID]):!this.isSelected(this.diagram.nameTable[a.id]),"Orthogonal"===a.type&&a.segments&&a.segments.length>1)if(n){var l=a.segments[0],c=a.segments[1],h=kr(br(e.wrapper,e.wrapper.corners,e.wrapper.bounds),l.direction),d=Nr({corners:void 0,point:h=Tr(a,0,h,{x:a.sourceWrapper.offsetX,y:a.sourceWrapper.offsetY},!1),margin:void 0,direction:l.direction},{corners:void 0,point:c.points[1],margin:void 0,direction:void 0});l.length=Zt.distancePoints(d[0],d[1]),c.direction&&c.length&&(c.length=Zt.distancePoints(d[1],d[2]))}else if(o){switch(a.segments[0].direction){case"Bottom":i=e.wrapper.bounds.bottomCenter.x-t.bottomCenter.x,r=e.wrapper.bounds.bottomCenter.y-t.bottomCenter.y;break;case"Top":i=e.wrapper.bounds.topCenter.x-t.topCenter.x,r=e.wrapper.bounds.topCenter.y-t.topCenter.y;break;case"Left":i=e.wrapper.bounds.middleLeft.x-t.middleLeft.x,r=e.wrapper.bounds.middleLeft.y-t.middleLeft.y;break;case"Right":i=e.wrapper.bounds.middleRight.x-t.middleRight.x,r=e.wrapper.bounds.middleRight.y-t.middleRight.y}this.dragSourceEnd(a,i,r,!0,null,"ConnectorSourceEnd",void 0,void 0,void 0,!0)}}},e.prototype.updateEndPoint=function(e,t){var n={sourcePoint:e.sourcePoint,targetPoint:e.targetPoint};e.sourceID&&(n.sourceID=e.sourceID),e.targetID&&(n.targetID=e.targetID),e.sourcePortID&&(n.sourcePortID=e.sourcePortID),e.targetPortID&&(n.targetPortID=e.targetPortID),e.segments&&(n.segments=e.segments),this.diagram.connectorPropertyChange(e,t||{},n),this.diagram.updateSelector()},e.prototype.dragSourceEnd=function(e,t,n,i,r,o,s,a,l,c,h){var d=this.diagram.nameTable[e.id],u={},p=this.checkBoundaryConstraints(t,n,d.wrapper.bounds);if(yo(d)&&p&&"BezierSourceThumb"!==o&&_o(this.diagram)&&(u={sourcePoint:d.sourcePoint},d.sourcePoint.x+=t,d.sourcePoint.y+=n,"ConnectorSourceEnd"===o&&"Orthogonal"===d.type&&this.changeSegmentLength(d,a,l,c),"Bpmn"===d.shape.type&&"Default"===d.shape.sequence&&this.updatePathElementOffset(d)),"Bezier"===d.type)if(u={sourcePoint:d.sourcePoint},h)this.translateBezierPoints(e,""===o?"ConnectorSourceEnd":o,t,n,h,r,!s);else for(var f=0;f<e.segments.length;f++)this.translateBezierPoints(e,""===o?"ConnectorSourceEnd":o,t,n,e.segments[f],r,!s);return i||this.updateEndPoint(d,u),this.diagram.refreshCanvasLayers(),p},e.prototype.updatePathElementOffset=function(e){e.wrapper.children.splice(3,1);var t=new Zn;t=dl(e.intermediatePoints,e),e.wrapper.children.splice(3,0,t)},e.prototype.changeSegmentLength=function(e,t,n,i){if(e.segments&&null!==e.segments[0].direction&&(!t&&""===e.sourceID||i)){var r=e.segments[0],o=e.segments[1],s=this.diagram.nameTable[e.sourceID],a=void 0;if(r.points[0]=e.sourcePoint,"Top"===r.direction||"Bottom"===r.direction?(r.points[r.points.length-1].x=e.sourcePoint.x,o.points[0].y=r.points[r.points.length-1].y):(r.points[r.points.length-1].y=e.sourcePoint.y,o.points[0].x=r.points[r.points.length-1].x),r.direction&&(r.length||0===r.length)&&(r.length=Zt.distancePoints(r.points[0],r.points[r.points.length-1])),o.direction&&(o.length||0===o.length)&&(o.length=Zt.distancePoints(r.points[r.points.length-1],o.points[o.points.length-1]),o.direction=Zt.direction(r.points[r.points.length-1],o.points[o.points.length-1])),""!==e.sourcePortID&&r.length<10)if(e.segments.length>2){var l=Zt.direction((c=e.segments[2]).points[0],c.points[1]);r.direction===Wr(l)?("Right"===r.direction?c.points[0].x=r.points[r.points.length-1].x=s.wrapper.corners.middleRight.x+20:"Left"===r.direction?c.points[0].x=r.points[r.points.length-1].x=s.wrapper.corners.middleLeft.x-20:c.points[0].y=r.points[r.points.length-1].y="Top"===r.direction?s.wrapper.corners.topCenter.y-20:s.wrapper.corners.bottomCenter.y+20,c.direction&&c.length&&(c.length=Zt.distancePoints(c.points[0],c.points[c.points.length-1])),r.length=Zt.distancePoints(r.points[0],r.points[r.points.length-1])):r.direction===l&&c.direction&&c.length?("Top"===r.direction||"Bottom"===r.direction?(c.points[0]=r.points[0],c.points[c.points.length-1].x=c.points[0].x):(c.points[0]=r.points[0],c.points[c.points.length-1].y=c.points[0].y),c.length=Zt.distancePoints(c.points[0],c.points[c.points.length-1]),e.segments.splice(0,2)):r.length=20}else r.length=20;else if(r.length<1)if(""!==e.sourceID){var c;"Right"===o.direction?o.points[o.points.length-1].y=(a=s.wrapper.corners.middleRight).y:"Left"===o.direction?o.points[o.points.length-1].y=(a=s.wrapper.corners.middleLeft).y:o.points[o.points.length-1].x="Top"===o.direction?(a=s.wrapper.corners.topCenter).x:(a=s.wrapper.corners.bottomCenter).x,o.length=Zt.distancePoints(a,o.points[o.points.length-1]),e.segments.length>2&&(c=e.segments[2]).direction&&c.length&&(c.length=Zt.distancePoints(o.points[o.points.length-1],c.points[c.points.length-1])),e.segments.splice(0,1)}else e.segments.splice(0,1)}else t&&!n&&e.sourceID!==t.id&&e.segments&&null!==e.segments[0].direction&&t&&t instanceof sa&&this.changeSourceEndToNode(e,t),t&&n&&e.sourcePortID!==n&&e.segments&&null!==e.segments[0].direction&&t&&t instanceof sa&&this.changeSourceEndToPort(e,t,n)},e.prototype.changeSourceEndToPort=function(e,t,n){var i=this.diagram.getWrapper(t.wrapper,n),r={x:i.offsetX,y:i.offsetY},o=Vr(r,Hl(t.wrapper),t.wrapper.bounds),s=e.segments[0],a=e.segments[1];if(s.direction!==o){var l=[],c={};if(s.direction===Wr(o)){c={};var h=void 0;"Top"===o||"Bottom"===o?(h="Top"===o?{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(s.points[0].y-r.y)}:{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(r.y-s.points[0].y)},c=s.points[0].x>r.x?{type:"Orthogonal",isTerminal:!0,direction:"Right",length:s.points[0].x-r.x}:{type:"Orthogonal",isTerminal:!0,direction:"Left",length:r.x-s.points[0].x}):(h="Right"===o?{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(s.points[0].x-r.x)}:{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(r.x-s.points[0].x)},c=s.points[0].y>r.y?{type:"Orthogonal",direction:"Top",isTerminal:!0,length:s.points[0].y-r.y}:{type:"Orthogonal",direction:"Bottom",isTerminal:!0,length:r.y-s.points[0].y}),l.push(new no(e,"segments",h,!0)),l.push(new no(e,"segments",c,!0))}else l.push(new no(e,"segments",c={type:"Orthogonal",direction:o,length:20,isTerminal:!0},!0));s.direction!==Wr(o)&&("Top"===o||"Bottom"===o?(s.points[0].x=r.x,s.points[0].y=s.points[s.points.length-1].y="Top"===o?r.y-20:r.y+20):(s.points[0].y=r.y,s.points[0].x=s.points[s.points.length-1].x="Right"===o?r.x+20:r.x-20),s.length=Zt.distancePoints(s.points[0],s.points[s.points.length-1]),a.length=Zt.distancePoints(s.points[s.points.length-1],a.points[a.points.length-1])),e.segments=l.concat(e.segments)}else s.points[0]=r,"Top"===o||"Bottom"===o?s.points[s.points.length-1].x=r.x:s.points[s.points.length-1].y=r.y,s.length=Zt.distancePoints(s.points[0],s.points[s.points.length-1]),a.length=Zt.distancePoints(s.points[s.points.length-1],a.points[a.points.length-1])},e.prototype.removeTerminalSegment=function(e,t){for(var n=0;n<e.segments.length-2;n++){var i=e.segments[0];i.isTerminal&&(t?i.isTerminal=!1:(e.segments.splice(n,1),n--))}},e.prototype.changeSourceEndToNode=function(e,t){this.removeTerminalSegment(e);var n,i,r=t.wrapper.children[0].corners,o=e.segments[0],s=e.segments[1],a=[];if("Right"===o.direction||"Left"===o.direction)if(n="Left"===o.direction?r.middleLeft:r.middleRight,o.length>r.width||"Left"===o.direction&&n.x>=o.points[0].x||"Right"===o.direction&&n.x<=o.points[0].x)o.points[0].y=o.points[o.points.length-1].y=n.y,o.points[0].x=n.x,o.length=Zt.distancePoints(o.points[0],o.points[o.points.length-1]),s.length=Zt.distancePoints(o.points[o.points.length-1],s.points[s.points.length-1]);else{var l=void 0;i="Bottom"===(l=s.direction?s.direction:Zt.direction(s.points[0],s.points[s.points.length-1]))?r.bottomCenter:r.topCenter,s.length&&s.direction&&(s.length="Top"===l?o.points[o.points.length-1].y-(i.y+20):i.y+20-o.points[o.points.length-1].y),o.length=o.points[o.points.length-1].x-i.x,o.direction=o.length>0?"Right":"Left",a.push(new no(e,"segments",{type:"Orthogonal",direction:l,length:20},!0)),e.segments=a.concat(e.segments)}else n="Bottom"===o.direction?r.bottomCenter:r.topCenter,o.length>r.height||"Top"===o.direction&&n.y>=o.points[0].y||"Bottom"===o.direction&&n.y<=o.points[0].y?(o.points[0].x=o.points[o.points.length-1].x=n.x,o.points[0].y=n.y,o.length=Zt.distancePoints(o.points[0],o.points[o.points.length-1]),s.length=Zt.distancePoints(o.points[o.points.length-1],s.points[s.points.length-1])):(i="Left"===s.direction?r.middleLeft:r.middleRight,l=void 0,l=s.direction?s.direction:Zt.direction(s.points[0],s.points[s.points.length-1]),s.length&&s.direction&&(s.length="Left"===l?o.points[o.points.length-1].x-(i.x+20):i.x+20-o.points[o.points.length-1].x),o.length=o.points[o.points.length-1].y-i.y,o.direction=o.length>0?"Bottom":"Top",a.push(new no(e,"segments",{type:"Orthogonal",direction:l,length:20},!0)),e.segments=a.concat(e.segments))},e.prototype.translateBezierPoints=function(e,t,n,i,r,o,s){var a=e.segments.indexOf(r),l=e.segments[a];l&&("BezierSourceThumb"===t&&(l.vector1.angle||l.vector1.distance)?l.vector1={distance:e.distance(e.sourcePoint,o),angle:Zt.findAngle(e.sourcePoint,o)}:"BezierTargetThumb"===t&&(l.vector2.angle||l.vector2.distance)?l.vector2={distance:e.distance(e.targetPoint,o),angle:Zt.findAngle(e.targetPoint,o)}:("ConnectorSourceEnd"===t&&!e.sourceID||"ConnectorTargetEnd"===t&&!e.targetID)&&s&&ro(l.vector1)&&ro(l.vector2)?(Zt.isEmptyPoint(l.point1)&&(l.bezierPoint1=oo(e.sourcePoint,e.targetPoint)),Zt.isEmptyPoint(l.point2)&&(l.bezierPoint2=oo(e.targetPoint,e.sourcePoint))):"BezierSourceThumb"===t||"ConnectorSourceEnd"===t&&!s&&ro(l.vector1)?(l.bezierPoint1.x+=n,l.bezierPoint1.y+=i,Zt.isEmptyPoint(l.point1)&&!s||(l.point1={x:l.bezierPoint1.x,y:l.bezierPoint1.y})):("BezierTargetThumb"===t||"ConnectorTargetEnd"===t&&!s&&ro(l.vector2))&&(l.bezierPoint2.x+=n,l.bezierPoint2.y+=i,Zt.isEmptyPoint(l.point2)&&!s||(l.point2={x:l.bezierPoint2.x,y:l.bezierPoint2.y})))},e.prototype.dragTargetEnd=function(e,t,n,i,r,o,s,a){var l,c=this.diagram.nameTable[e.id],h=this.checkBoundaryConstraints(t,n,c.wrapper.bounds);if(vo(c)&&"BezierTargetThumb"!==o&&h&&_o(this.diagram)){if(l={targetPoint:c.targetPoint},c.targetPoint.x+=t,c.targetPoint.y+=n,"ConnectorTargetEnd"===o&&"Orthogonal"===c.type&&c.segments&&c.segments.length>0){var d=c.segments[c.segments.length-2];d&&2===c.segments[c.segments.length-1].points.length&&("Left"===d.direction||"Right"===d.direction?d.points[d.points.length-1].x=c.targetPoint.x:d.points[d.points.length-1].y=c.targetPoint.y,d.length=Zt.distancePoints(d.points[0],d.points[d.points.length-1]),d.direction=Zt.direction(d.points[0],d.points[d.points.length-1]))}"Bpmn"===c.shape.type&&"Default"===c.shape.sequence&&this.updatePathElementOffset(c)}if("Bezier"===c.type)if(l={targetPoint:c.targetPoint},a)this.translateBezierPoints(e,""===o?"ConnectorTargetEnd":o,t,n,a,r,!s);else for(var u=0;u<e.segments.length;u++)this.translateBezierPoints(e,""===o?"ConnectorTargetEnd":o,t,n,e.segments[u],r,!s);return i||this.updateEndPoint(c,l),this.diagram.refreshCanvasLayers(),h},e.prototype.dragControlPoint=function(e,t,n,i,r){var o=this.diagram.nameTable[e.id];if(("Straight"===o.type||"Bezier"===o.type)&&o.segments.length>0){if(void 0!==r&&o.segments[r])o.segments[r].point.x+=t,o.segments[r].point.y+=n;else for(var s=0;s<o.segments.length-1;s++)o.segments[s].point.x+=t,o.segments[s].point.y+=n;i||this.updateEndPoint(o)}return!0},e.prototype.rotateObjects=function(e,t,n,i,r){i=i||{};var o,s=hn();un(s,n,i.x,i.y);for(var a=0,l=t;a<l.length;a++){var c=l[a];if(c instanceof sa){if(wo(c)&&_o(this.diagram)){if(!1!==r||e!==c){o={rotateAngle:c.rotateAngle},c.rotateAngle+=n,c.rotateAngle=(c.rotateAngle+360)%360;var h=dn(s,{x:c.offsetX,y:c.offsetY});c.offsetX=h.x,c.offsetY=h.y,this.diagram.nodePropertyChange(c,o,{rotateAngle:c.rotateAngle})}if(c.processId){var d=this.diagram.bpmnModule.getChildrenBound(this.diagram.nameTable[c.processId],c.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(d,c,this.diagram)}c.children&&c.children.length&&!c.container&&this.getChildren(c,t)}}else this.rotatePoints(c,n,i||{x:c.wrapper.offsetX,y:c.wrapper.offsetY});this.diagram.updateDiagramObject(c)}this.diagram.refreshCanvasLayers(),this.diagram.updateSelector()},e.prototype.snapConnectorEnd=function(e){return this.diagram.snapSettings.constraints&bn.SnapToLines&&this.snappingModule&&this.diagram.snappingModule.snapConnectorEnd(e),e},e.prototype.snapAngle=function(e){return this.diagram.snapSettings.constraints&bn.SnapToLines&&this.snappingModule?this.snappingModule.snapAngle(this.diagram,e):0},e.prototype.rotatePoints=function(e,t,n){if(!e.sourceWrapper||!e.targetWrapper){var i=hn();un(i,t,n.x,n.y),e.sourcePoint=dn(i,e.sourcePoint),e.targetPoint=dn(i,e.targetPoint),"Bpmn"===e.shape.type&&"Default"===e.shape.sequence&&this.updatePathElementOffset(e),this.diagram.connectorPropertyChange(e,{},{sourcePoint:e.sourcePoint,targetPoint:e.targetPoint})}},e.prototype.updateInnerParentProperties=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);for(var n=this.getAllDescendants(e,[],!1,!0),i=0;i<n.length;i++){var r=this.diagram.nameTable[n[i].id];r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY,r.width=r.wrapper.width,r.height=r.wrapper.height}this.diagram.protectPropertyChange(t)},e.prototype.scale=function(e,t,n,i,r){var o=this.diagram.nameTable[e.id],s=o,a=o.wrapper;r||(r=e);var l=r.wrapper,c=function(e,t,n,i,r,o,s,a){var l={x:0,y:0},c=hn();switch(un(c,r,o,s),a.x){case 0:switch(a.y){case 0:l=dn(c,{x:e,y:t});break;case.5:l=dn(c,{x:e,y:t+i/2});break;case 1:l=dn(c,{x:e,y:t+i})}break;case.5:switch(a.y){case 0:l=dn(c,{x:e+n/2,y:t});break;case.5:l=dn(c,{x:e+n/2,y:t+i/2});break;case 1:l=dn(c,{x:e+n/2,y:t+i})}break;case 1:switch(a.y){case 0:l=dn(c,{x:e+n,y:t});break;case.5:l=dn(c,{x:e+n,y:t+i/2});break;case 1:l=dn(c,{x:e+n,y:t+i})}}return{x:l.x,y:l.y}}(l.offsetX-l.actualSize.width*l.pivot.x,l.offsetY-l.actualSize.height*l.pivot.y,l.actualSize.width,l.actualSize.height,l.rotateAngle,l.offsetX,l.offsetY,i);if(void 0!==a.actualSize.width&&void 0!==a.actualSize.height&&_o(this.diagram)){if(s.children&&!s.container){for(var h=0,d=this.getAllDescendants(s,[]);h<d.length;h++)this.scaleObject(t,n,c,d[h],a,r);e.wrapper.measure(new Xt),e.wrapper.arrange(e.wrapper.desiredSize),this.diagram.updateGroupOffset(o),this.updateInnerParentProperties(s)}else this.scaleObject(t,n,c,o,a,r);var u=Vl(e.wrapper);if(!this.checkBoundaryConstraints(void 0,void 0,u))return this.scale(e,1/t,1/n,i),!1;this.diagram.updateDiagramObject(e)}return!0},e.prototype.getAllDescendants=function(e,t,n,i){for(var r=e,o=[],s=0;s<r.children.length;s++)(e=this.diagram.nameTable[r.children[s]])&&(e.children?(n&&t.push(e),i&&o.push(e),t=this.getAllDescendants(e,t)):t.push(e));return i?o:t},e.prototype.getChildren=function(e,t){var n=e;if(e.children)for(var i=0;i<n.children.length;i++)t.push(e=this.diagram.nameTable[n.children[i]]);return t},e.prototype.cloneChild=function(e){return this.diagram.nameTable[e]},e.prototype.scaleObject=function(e,t,n,i,r,o){t=t<0?1:t;var s={};if(1!==(e=e<0?1:e)||1!==t){var a=void 0,l=void 0;if(i instanceof sa){var c=void 0,h=void 0;s={width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height,offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY,margin:{top:(p=i).margin.top,left:p.margin.left}},"Bpmn"===p.shape.type&&p.shape.activity.subProcess.processes&&p.shape.activity.subProcess.processes.length>0&&(h=this.diagram.bpmnModule.getChildrenBound(p,p.id,this.diagram),c=p.wrapper.bounds.containsRect(h)),a=p.wrapper.actualSize.width*e,l=p.wrapper.actualSize.height*t,void 0!==p.maxWidth&&0!==p.maxWidth&&(a=Math.min(p.maxWidth,a)),void 0!==p.minWidth&&0!==p.minWidth&&(a=Math.max(p.minWidth,a)),void 0!==p.maxHeight&&0!==p.maxHeight&&(l=Math.min(p.maxHeight,l)),void 0!==p.minHeight&&0!==p.minHeight&&(l=Math.max(p.minHeight,l)),c&&(a=Math.max(a,h.right-p.wrapper.bounds.x),l=Math.max(l,h.bottom-p.wrapper.bounds.y)),e=a/p.actualSize.width,t=l/p.actualSize.height}var d,u=hn();if(o||(o=i),un(u,-(d=o.wrapper).rotateAngle,n.x,n.y),pn(u,e,t,n.x,n.y),un(u,d.rotateAngle,n.x,n.y),i instanceof sa){var p,f,g,m=dn(u,{x:(p=i).wrapper.offsetX,y:p.wrapper.offsetY}),y=p.wrapper.offsetX-p.wrapper.actualSize.width*p.pivot.x,v=p.wrapper.offsetY-p.wrapper.actualSize.height*p.pivot.y;if(a>0)if(p.processId){var b=this.diagram.nameTable[p.processId];(!b.maxWidth||p.margin.left+a<b.maxWidth)&&(p.width=a,p.offsetX=m.x)}else p.width=a,p.offsetX=m.x;if(l>0)if(p.processId){var w=this.diagram.nameTable[p.processId];(!w.maxHeight||p.margin.top+l<w.maxHeight)&&(p.height=l,p.offsetY=m.y)}else p.height=l,p.offsetY=m.y;f=p.wrapper.offsetX-p.wrapper.actualSize.width*p.pivot.x,g=p.wrapper.offsetY-p.wrapper.actualSize.height*p.pivot.y,this.diagram.nameTable[p.processId]&&(p.margin.top+(g-v)<=0||p.margin.left+(f-y)<=0)?this.diagram.nodePropertyChange(i,{},{margin:{top:p.margin.top,left:p.margin.left}}):Ko(this.diagram,i,!0)?Jo(this.diagram,i):this.diagram.nodePropertyChange(i,s,{width:p.width,height:p.height,offsetX:p.offsetX,offsetY:p.offsetY,margin:{top:p.margin.top+(g-v),left:p.margin.left+(f-y)}})}else i.sourceWrapper&&i.targetWrapper||this.scaleConnector(i,u,{sourcePoint:i.sourcePoint,targetPoint:i.targetPoint});var C=this.diagram.nameTable[i.processId];C&&(h=this.diagram.bpmnModule.getChildrenBound(C,i.id,this.diagram),this.diagram.bpmnModule.updateSubProcessess(h,i,this.diagram))}},e.prototype.scaleConnector=function(e,t,n){e.sourcePoint=dn(t,e.sourcePoint),e.targetPoint=dn(t,e.targetPoint),"Bpmn"===e.shape.type&&"Default"===e.shape.sequence&&this.updatePathElementOffset(e),this.diagram.connectorPropertyChange(e,n,{sourcePoint:e.sourcePoint,targetPoint:e.targetPoint})},e.prototype.portDrag=function(e,t,n,i){var r,o,s=this.findTarget(t,e),a=Vl(e.wrapper);s&&Bo(s)&&(r=this.getPortChanges(e,s),s.offset.x+=n/a.width,s.offset.y+=i/a.height,o=this.getPortChanges(e,s),this.diagram.nodePropertyChange(e,r,o),this.diagram.updateDiagramObject(e))},e.prototype.labelDrag=function(e,t,n,i){var r,o,s;s=this.findTarget(t,e);var a=Hl(e.wrapper);r=this.getAnnotationChanges(e,s),s instanceof ni?(s.offset.x+=n/a.width,s.offset.y+=i/a.height):(this.updatePathAnnotationOffset(e,s,n,i),s instanceof ii&&(s.alignment="Center")),o=this.getAnnotationChanges(e,s),e instanceof sa?this.diagram.nodePropertyChange(e,r,o):this.diagram.connectorPropertyChange(e,r,o),this.diagram.updateDiagramObject(e),wc(this.diagram,s,!1,t)||this.labelSelect(e,t)},e.prototype.updatePathAnnotationOffset=function(e,t,n,i,r,o){var s,a,l,c,h=this.diagram.getWrapper(e.wrapper,t.id),d=e.intermediatePoints,u=0,p=r||{x:h.offsetX+n,y:h.offsetY+i},f=this.getInterceptWithSegment(p,d),g=d[d.length-1];if(l=Zt.getLengthFromListOfPoints(d),f.length>0){if(t.dragLimit.top||t.dragLimit.bottom||t.dragLimit.left||t.dragLimit.right){var m={minDistance:null};g=this.getRelativeOffset(p,d,m);var y={minDistance:null};c=this.getRelativeOffset(p,f,y),g=null!=m&&y.minDistance<m.minDistance?c:Na(e.intermediatePoints,t).point}else g=c=f[f.length-1];if(g){var v=void 0;for(v=0;v<d.length;v++){if(null!=a){if(an.toBounds([a,d[v]]).containsPoint(g)){u+=Zt.findLength(a,g);break}u+=Zt.findLength(a,d[v])}a=d[v]}s={x:u/l,y:0}}this.updateLabelMargin(e,t,s,p,o,n,i)}else this.updateLabelMargin(e,t,null,p,o,n,i)},e.prototype.getRelativeOffset=function(e,t,n){var i,r,o,s;for(s=0;s<t.length;s++)o=t[s],r=Math.round(Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2))),null!==n.minDistance&&Math.min(Math.abs(n.minDistance),Math.abs(r))!==Math.abs(r)||(i=o,n.minDistance=r);return i},e.prototype.dragLimitValue=function(e,t,n,i){var r=!1,o=!1;return n.x>=t.x-e.dragLimit.left-i.width/2&&n.x<=t.x+e.dragLimit.right+i.width/2&&(r=!0),n.y>=t.y-e.dragLimit.top-i.height/2&&n.y<=t.y+e.dragLimit.bottom+i.height/2&&(o=!0),{x:r,y:o}},e.prototype.updateLabelMargin=function(e,t,n,i,r,o,s){if(n=n||{x:t.offset,y:0},t&&n&&n.x>0&&n.x<1){var a,l=Zt.getLengthFromListOfPoints(e.intermediatePoints);a=this.getPointAtLength(l*n.x,e.intermediatePoints,0);var c=this.diagram.scrollSettings.currentZoom,h=t.dragLimit;if(h.top||h.bottom||h.left||h.right){this.diagram.getWrapper(e.wrapper,t.id);var d=new an(0,0,0,0),u=this.diagram.getWrapper(e.wrapper,t.id);d.x=u.offsetX/c+o,d.y=u.offsetY/c+s,d.width=u.bounds.width/c,d.height=u.bounds.height/c;var p=new an(a.x-(h.left||0)-d.width/2,a.y-(h.top||0)-d.height/2,(h.left||0)+(h.right||0)+d.width,(h.top||0)+(h.bottom||0)+d.height);if(p.containsPoint(i))i=i;else for(var f=0,g=this.boundsInterSects([a,i],p,!1);f<g.length;f++)i=g[f];var m=this.dragLimitValue(t,a,i,d);t.margin={left:m.x?i.x-a.x:t.margin.left,top:m.y?i.y-a.y:t.margin.top,right:0,bottom:0}}else t.margin={left:i.x-a.x,top:i.y-a.y,right:0,bottom:0};t.offset=n.x,r&&(t.width=r.width,t.height=r.height)}},e.prototype.boundsInterSects=function(e,t,n){var i;return t&&(i=this.intersect(e,[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height},{x:t.x,y:t.y}],n)),i},e.prototype.intersect=function(e,t,n){for(var i=[],r=0;r<e.length-1;r++)for(var o=0;o<t.length-1;o++){var s=(c=t[o],h=t[o+1],void 0,(d=Ta(Ma((a=e[r]).x,a.y,(l=e[r+1]).x,l.y),Ma(c.x,c.y,h.x,h.y))).enabled?d.intersectPt:{x:0,y:0});0!==s.x&&0!==s.y&&i.push(s)}var a,l,c,h,d;return i},e.prototype.getPointAtLength=function(e,t,n){for(var i,r,o=0,s={x:0,y:0},a=0;a<t.length;a++)if(r=t[a],i){var l=Zt.findLength(i,r),c=void 0,h=void 0,d=void 0,u=void 0;if(o+l>=e){c=e-o,h=Zt.findAngle(i,r),d=c*Math.cos(h*Math.PI/180),u=c*Math.sin(h*Math.PI/180),s={x:i.x+d,y:i.y+u};break}o+=l,i=r}else i=r;return s},e.prototype.getInterceptWithSegment=function(e,t){var n,i,r,o=[],s=[],a=[];r=Zt.findLength({x:0,y:0},{x:this.diagram.scroller.viewPortWidth,y:this.diagram.scroller.viewPortHeight});for(var l=1;l<t.length;l++){a=[t[l-1],t[l]],s=[],i=Math.round(Zt.findAngle(a[0],a[1])%360),n=Math.round(Zt.findAngle(a[1],a[0])%360);var c=i>0&&i<=90||i>180&&i<=270?90:-90;s.push(Zt.transform(e,i+c,r)),s.push(Zt.transform(e,n+c,r));var h=Ta({x1:a[0].x,y1:a[0].y,x2:a[1].x,y2:a[1].y},{x1:s[0].x,y1:s[0].y,x2:s[1].x,y2:s[1].y});h.enabled&&o.push(h.intersectPt)}return o},e.prototype.getAnnotationChanges=function(e,t){var n={};return n[nl(e,t.id,!0)]={width:t.width,height:t.height,offset:e instanceof sa?{x:t.offset.x,y:t.offset.y}:t.offset,rotateAngle:t.rotateAngle,margin:{left:t.margin.left,right:t.margin.right,top:t.margin.top,bottom:t.margin.bottom},horizontalAlignment:t.horizontalAlignment,verticalAlignment:t.verticalAlignment,alignment:e instanceof uo?t.alignment:void 0},{annotations:n}},e.prototype.getPortChanges=function(e,t){var n={};return n[nl(e,t.id,!1)]={offset:t.offset},{ports:n}},e.prototype.labelRotate=function(e,t,n,i){var r,o;r=this.getAnnotationChanges(e,t),hn();var s=this.diagram.getWrapper(e.wrapper,t.id),a=Dr({x:s.offsetX,y:s.offsetY},n)+90,l=this.snapAngle(a);a=0!==l?l:a,t instanceof ii&&t.segmentAngle&&(a-=_a(e.intermediatePoints,t).angle),t.rotateAngle+=(a=(a+360)%360)-(t.rotateAngle+s.parentTransform),t.margin.bottom+="Top"===s.verticalAlignment?-t.height/2:"Bottom"===s.verticalAlignment?t.height/2:0,t.margin.right+="Left"===s.horizontalAlignment?-t.width/2:"Right"===s.horizontalAlignment?t.width/2:0,t instanceof ii?t.alignment="Center":t.horizontalAlignment=t.verticalAlignment="Center",i.wrapper.rotateAngle=i.rotateAngle=t.rotateAngle,o=this.getAnnotationChanges(e,t),e instanceof sa?this.diagram.nodePropertyChange(e,r,o):this.diagram.connectorPropertyChange(e,r,o),this.diagram.updateDiagramObject(e)},e.prototype.labelResize=function(e,t,n,i,r,o){var s,a,l;s=this.getAnnotationChanges(e,t);var c=o.wrapper.children[0];if(n&&1!==n||i&&1!==i){var h=hn(),d=hn();un(h,-e.rotateAngle,e.offsetX,e.offsetY),un(d,-(l=(c.rotateAngle+(e instanceof sa?e.rotateAngle:0)+360)%360),r.x,r.y),pn(d,n,i,r.x,r.y),un(d,l,r.x,r.y);var u=dn(d,{x:c.offsetX,y:c.offsetY}),p=c.actualSize.height*i,f=c.actualSize.width*n,g=this.findTarget(c,e);if(g instanceof ii)this.updatePathAnnotationOffset(e,t,0,0,u,new Xt(f,p));else{var m=Hl(e.wrapper);(u=dn(h,u)).x=u.x-c.margin.left+c.margin.right,u.y=u.y-c.margin.top+c.margin.bottom,u.y+="Top"===g.verticalAlignment?-p/2:"Bottom"===g.verticalAlignment?p/2:0,u.x+="Left"===g.horizontalAlignment?-f/2:"Right"===g.horizontalAlignment?f/2:0;var y=m.width/(u.x-m.x),v=m.height/(u.y-m.y);f>1&&(g.width=f,g.offset.x=1/y),p>1&&(g.height=p,g.offset.y=1/v)}}t instanceof ii&&(t.alignment="Center"),a=this.getAnnotationChanges(e,t),e instanceof sa?this.diagram.nodePropertyChange(e,s,a):this.diagram.connectorPropertyChange(e,s,a),this.diagram.updateDiagramObject(e)},e.prototype.getSubProcess=function(e){var t,n={nodes:[],connectors:[]};return e instanceof sa?t=e.processId:e&&e.nodes&&e.nodes.length&&e.nodes[0].processId&&(t=e.nodes[0].processId),t?(n.nodes.push(Ul(this.diagram.nameTable[t])),n):n},e.prototype.checkBoundaryConstraints=function(e,t,n){var i=this.diagram.pageSettings,r=this.diagram.pageSettings.boundaryConstraints,o=this.diagram.scroller;if("Page"===r||"Diagram"===r){var s=n?void 0:this.diagram.selectedItems.wrapper.bounds;return(n?n.right:s.right)+(e||0)<=("Page"===r?i.width:o.viewPortWidth)&&(n?n.left:s.left)+(e||0)>=0&&(n?n.bottom:s.bottom)+(t||0)<=("Page"===r?i.height:o.viewPortHeight)&&(n?n.top:s.top)+(t||0)>=0}return!0},e.prototype.dragSelectedObjects=function(e,t){var n=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=n.offsetX,this.state.backup.offsetY=n.offsetY),n=Zo(this.diagram,n)||n,!!this.checkBoundaryConstraints(e,t)&&(this.diagram.drag(n,e,t),this.diagram.refreshCanvasLayers(),!0)},e.prototype.scaleSelectedItems=function(e,t,n){var i=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=i.offsetX,this.state.backup.offsetY=i.offsetY,this.state.backup.width=i.width,this.state.backup.height=i.height,this.state.backup.pivot=n),i=Zo(this.diagram,i)||i,this.diagram.scale(i,e,t,n)},e.prototype.rotateSelectedItems=function(e){var t=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.angle=t.rotateAngle),t=Zo(this.diagram,t)||t,this.diagram.rotate(t,e)},e.prototype.hasSelection=function(){return vc(this.diagram)},e.prototype.isSelected=function(e){return wc(this.diagram,e)},e.prototype.initExpand=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);var n=e.target||e.source,i={isExpanded:n.isExpanded};n.isExpanded=!n.isExpanded,this.diagram.preventNodesUpdate=!0,this.diagram.diagramActions|=Tn.PreventIconsUpdate,this.diagram.nodePropertyChange(n,i,{isExpanded:n.isExpanded}),this.diagram.diagramActions=this.diagram.diagramActions&~Tn.PreventIconsUpdate,this.diagram.preventNodesUpdate=!1,this.diagram.protectPropertyChange(t)},e.prototype.expandNode=function(e,t){var n,i=this.diagram.preventNodesUpdate,r=e.isExpanded;if(this.diagram.preventNodesUpdate=!0,this.diagram.preventConnectorsUpdate=!0,this.expandCollapse(e,r,this.diagram),e.isExpanded=r,this.diagram.layout.fixedNode=e.id,this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&this.diagram.organizationalChartModule&&(this.diagram.organizationalChartModule.isAnimation=!0),n=this.diagram.doLayout(),this.diagram.preventNodesUpdate=i,this.diagram.preventConnectorsUpdate=!1,this.diagram.layoutAnimateModule&&this.diagram.organizationalChartModule)this.layoutAnimateModule.expand(this.diagram.layout.enableAnimation,n,e,this.diagram);else{var o={element:Ul(e),state:!!e.isExpanded};this.triggerEvent(Ln.expandStateChange,o)}return n},e.prototype.getparentexpand=function(e,t,n,i){for(var r,o=0;o<e.inEdges.length;o++){var s=t.nameTable[e.inEdges[o]],a=t.nameTable[s.sourceID];if(a.isExpanded&&!n&&a.id!==i.sourceID&&s.visible)return!1;r=!0}return r},e.prototype.expandCollapse=function(e,t,n){for(var i=0;i<e.outEdges.length;i++){var r=n.nameTable[e.outEdges[i]],o=n.nameTable[r.targetID],s=this.getparentexpand(o,n,t,r);r.visible=t;var a={visible:o.visible,style:{opacity:o.style.opacity}},l={visible:o.visible,style:{opacity:o.style.opacity}};s&&(o.isExpanded&&this.expandCollapse(o,t,n),o.visible=t,o.style.opacity=this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&t?.1:o.style.opacity,n.nodePropertyChange(o,a,l)),n.connectorPropertyChange(r,a,l)}},e.prototype.updateNodeDimension=function(e,t){e instanceof sa&&(e.offsetX=t.x+t.width/2,e.offsetY=t.y+t.height/2,e.width=t.width,e.height=t.height,e.wrapper.children[0].canMeasurePath=!0,this.diagram.nodePropertyChange(e,{},{width:t.width,height:t.height,offsetX:e.offsetX,offsetY:e.offsetY}),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer())},e.prototype.updateConnectorPoints=function(e,t){e instanceof uo&&(this.diagram.connectorPropertyChange(e,{},{targetPoint:e.targetPoint}),this.diagram.updateDiagramObject(e))},e.prototype.drawSelectionRectangle=function(e,t,n,i){this.diagram.drawSelectionRectangle(e,t,n,i)},e.prototype.startGroupAction=function(){this.diagram.startGroupAction()},e.prototype.endGroupAction=function(){this.diagram.endGroupAction()},e.prototype.removeChildFromBPmn=function(e,t,n){var i=this.diagram.nameTable[e.id]||e.nodes[0];if(n&&i&&i.processId&&i.processId===n.wrapper.id){var r=Ul(i);r.processId=i.processId,this.diagram.startGroupAction();for(var o=[],s=(o=o.concat(i.outEdges,i.inEdges)).length-1;s>=0;s--){var a=this.diagram.nameTable[o[s]];a&&this.diagram.remove(a)}var l=void 0;(l=this.diagram.nameTable[i.processId].shape.activity.subProcess.processes||[]).splice(l.indexOf(i.id),1),this.diagram.bpmnModule.removeChildFromBPMN(this.diagram.nameTable[i.processId].wrapper,i.id),this.diagram.nameTable[i.id].processId="",i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY;var c=Ul(i);this.addHistoryEntry({type:"PositionChanged",redoObject:{nodes:[c]},undoObject:{nodes:[r]},category:"Internal"}),this.diagram.endGroupAction()}},e.prototype.isDroppable=function(e,t){var n=this.diagram.nameTable[e.id]||e.nodes[0];return!(!n||"TextAnnotation"!==n.shape.shape&&n&&"Bpmn"===n.shape.type&&(n.processId===t.id||n.id===t.processId||"Bpmn"===t.shape.type&&t.shape.activity.subProcess.collapsed))},e.prototype.renderHighlighter=function(e,t,n){if(new an,e.target instanceof sa||t&&e.source instanceof sa){var i=this.findTarget(t?e.sourceWrapper:e.targetWrapper,t?e.source:e.target,n,!0),r=void 0;if(i instanceof Gs)for(var o=i.id,s=e.target,a=0,l=s.wrapper.children[0].children[0].children[2].children;a<l.length;a++){var c=l[a];if(c.id===s.id+"_"+o){r=c.children[0];break}}else r=i instanceof sa?i.wrapper:t?e.sourceWrapper:e.targetWrapper;this.diagram.renderHighlighter(r)}},e.prototype.mouseOver=function(e,t,n){return!0},e.prototype.snapPoint=function(e,t,n,i){var r,o=r={x:n,y:i};return this.snappingModule&&(o=this.diagram.snappingModule.snapPoint(this.diagram,this.diagram.selectedItems,t.x<e.x,t.y<e.y,r,e,t)),o},e.prototype.removeSnap=function(){this.diagram.snapSettings.constraints&bn.SnapToObject&&this.snappingModule&&this.snappingModule.removeGuidelines(this.diagram)},e.prototype.dropAnnotation=function(e,t){var n=e instanceof sa?e:e.nodes[0];this.diagram.bpmnModule&&"Bpmn"===t.shape.type&&"TextAnnotation"===n.shape.shape&&(n.hasTarget=t.id,n.shape.annotation.nodeId=t.id,this.diagram.currentSymbol||(this.diagram.addTextAnnotation(n.shape.annotation,t),n.shape.annotation.nodeId="",this.diagram.remove(n)),this.diagram.refreshDiagramLayer())},e.prototype.drop=function(e,t,n){this.diagram.bpmnModule&&(this.diagram.bpmnModule.dropBPMNchild(t,e instanceof sa?e:e.nodes[0],this.diagram),this.diagram.refreshDiagramLayer())},e.prototype.addHistoryEntry=function(e){this.diagram.addHistoryEntry(e)},e.prototype.align=function(e,t,n){if(e.length>0){var i=0,r="Object"===n?Vl(e[0].wrapper):this.diagram.selectedItems.wrapper.bounds,o={nodes:[],connectors:[]},s={nodes:[],connectors:[]};for(i="Object"===n?i+1:i;i<e.length;i++){var a=0,l=0,c=Vl(e[i].wrapper);"Left"===t?a=r.left+c.width/2-c.center.x:"Right"===t?a=r.right-c.width/2-c.center.x:"Top"===t?l=r.top+c.height/2-c.center.y:"Bottom"===t?l=r.bottom-c.height/2-c.center.y:"Center"===t?a=r.center.x-c.center.x:"Middle"===t&&(l=r.center.y-c.center.y),o=this.storeObject(o,e[i]),this.drag(e[i],a,l),this.diagram.updateSelector(),s=this.storeObject(s,e[i])}o=Ul(o),s=Ul(s);var h={type:"Align",category:"Internal",undoObject:Ul(o),redoObject:Ul(s)};this.addHistoryEntry(h)}},e.prototype.distribute=function(e,t){if(e.length>0){var n=0,i=(new an,0),r=0,o=0,s=0,a=0,l=0,c=0,h={nodes:[],connectors:[]},d={nodes:[],connectors:[]};for(e=function(e,t){var n,i=0,r=0;for(i=0;i<e.length;i++){var o=Vl(e[i].wrapper);for(r=0;r<e.length;r++){var s=Vl(e[r].wrapper);"Top"===t||"Bottom"===t||"BottomToTop"===t||"Middle"===t?o.center.y>s.center.y&&(n=e[i],e[i]=e[r],e[r]=n):o.center.x>s.center.x&&(n=e[i],e[i]=e[r],e[r]=n)}}return e}(e,t),n=1;n<e.length;n++)i=i+e[n].wrapper.bounds.topRight.x-e[n-1].wrapper.bounds.topRight.x,r=r+e[n].wrapper.bounds.topLeft.x-e[n-1].wrapper.bounds.topLeft.x,o=o+e[n].wrapper.bounds.topRight.y-e[n-1].wrapper.bounds.topRight.y,s=s+e[n].wrapper.bounds.bottomRight.y-e[n-1].wrapper.bounds.bottomRight.y,a=a+e[n].wrapper.bounds.center.x-e[n-1].wrapper.bounds.center.x,l=l+e[n].wrapper.bounds.center.y-e[n-1].wrapper.bounds.center.y,c=c+e[n].wrapper.bounds.topRight.y-e[n-1].wrapper.bounds.bottomRight.y;for(n=1;n<e.length-1;n++){var u=0,p=0,f=Vl(e[n-1].wrapper),g=Vl(e[n].wrapper);"RightToLeft"===t||"Center"===t?u=f.center.x-g.center.x+a/(e.length-1):"Right"===t?u=f.topRight.x-g.topRight.x+i/(e.length-1):"Left"===t?u=f.topLeft.x-g.topLeft.x+r/(e.length-1):"Middle"===t?p=f.center.y-g.center.y+l/(e.length-1):"Top"===t?p=f.topRight.y-g.topRight.y+o/(e.length-1):"Bottom"===t?p=f.bottomRight.y-g.bottomRight.y+s/(e.length-1):"BottomToTop"===t&&(p=f.bottomRight.y-g.topRight.y+c/(e.length-1)),h=this.storeObject(h,e[n]),this.drag(e[n],u,p),this.diagram.updateSelector(),d=this.storeObject(d,e[n])}h=Ul(h),d=Ul(d);var m={type:"Distribute",category:"Internal",undoObject:Ul(h),redoObject:Ul(d)};this.addHistoryEntry(m)}},e.prototype.sameSize=function(e,t){if(e.length>0){var n,i=0;n={x:.5,y:.5};var r=Vl(e[0].wrapper),o={nodes:[],connectors:[]},s={nodes:[],connectors:[]};for(i=1;i<e.length;i++){var a=Vl(e[i].wrapper),l=1,c=1;"Width"===t?l=r.width/a.width:"Height"===t?c=r.height/a.height:"Size"===t&&(l=r.width/a.width,c=r.height/a.height),o=this.storeObject(o,e[i]),this.scale(e[i],l,c,n),s=this.storeObject(s,e[i])}this.diagram.updateSelector(),o=Ul(o),s=Ul(s);var h={type:"Sizing",category:"Internal",undoObject:Ul(o),redoObject:Ul(s)};this.addHistoryEntry(h)}},e.prototype.storeObject=function(e,t){return t instanceof sa?e.nodes.push(Ul(t)):e.connectors.push(Ul(t)),e},e.prototype.scroll=function(e,t,n){var i=this.diagram.constraints&En.PanX,r=function(e){return e.constraints&En.PanY}(this.diagram);this.diagram.pan((e=i?e:0)*this.diagram.scroller.currentZoom,(t=r?t:0)*this.diagram.scroller.currentZoom,n)},e.prototype.drawHighlighter=function(e){this.diagram.renderHighlighter(e.wrapper)},e.prototype.removeHighlighter=function(){this.diagram.clearHighlighter()},e.prototype.renderContainerHelper=function(e){return Zo(this.diagram,e)},e.prototype.isParentAsContainer=function(e,t){return Ko(this.diagram,e,t)},e.prototype.dropChildToContainer=function(e,t){es(this.diagram,e,t)},e.prototype.checkSelection=function(e,t){var n;if(1===e.nodes.length&&0===e.connectors.length)if(Ko(this.diagram,e.nodes[0],!0)){var i=e.nodes[0];if("SwimLane"===(n="SwimLane"===e.nodes[0].shape?e.nodes[0]:this.diagram.nameTable[e.nodes[0].parentId]).shape.type){var r="Horizontal"===n.shape.orientation;(i.isPhase&&(r&&"ResizeSouth"===t||!r&&"ResizeEast"===t)||i.isLane&&(r&&"ResizeEast"===t||!r&&"ResizeSouth"===t))&&Os(this.diagram,n,t)}else if("Grid"===n.container.type)if("Horizontal"===n.container.orientation&&1===i.rowIndex||"Vertical"===n.container.orientation&&i.rowIndex>0&&i.columnIndex>0){if("ResizeSouth"===t)for(var o=0;o<this.diagram.nodes.length;o++)if((s=this.diagram.nodes[o]).rowIndex===n.rows.length-1&&0===s.columnIndex){this.select(s);break}}else if("ResizeEast"===t)for(o=0;o<this.diagram.nodes.length;o++){var s;if(1===(s=this.diagram.nodes[o]).rowIndex&&s.columnIndex===n.columns.length-1){this.select(s);break}}}else Os(this.diagram,e.nodes[0],t)},e.prototype.zoom=function(e,t,n,i){this.diagram.scroller.zoom(e,t*this.diagram.scroller.currentZoom,n*this.diagram.scroller.currentZoom,i)},e}(),Gc=function(){function e(e){this.transform={tx:0,ty:0,scale:1},this.oldCollectionObjects=[],this.removeCollection=[],this.vPortWidth=0,this.vPortHeight=0,this.currentZoomFActor=1,this.hOffset=0,this.vOffset=0,this.scrolled=!1,this.hScrollSize=0,this.vScrollSize=0,this.diagram=e,this.objects=[],this.transform=e.scroller?e.scroller.transform:{tx:0,ty:0,scale:1},this.vPortWidth=e.scrollSettings.viewPortWidth,this.vPortHeight=e.scrollSettings.viewPortHeight,this.currentZoomFActor=e.scrollSettings.currentZoom,this.hOffset=e.scrollSettings.horizontalOffset,this.vOffset=e.scrollSettings.verticalOffset}return Object.defineProperty(e.prototype,"viewPortHeight",{get:function(){return this.vPortHeight},set:function(e){this.vPortHeight=e,this.diagram.scrollSettings.viewPortHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentZoom",{get:function(){return this.currentZoomFActor},set:function(e){this.currentZoomFActor=e,this.diagram.scrollSettings.currentZoom=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewPortWidth",{get:function(){return this.vPortWidth},set:function(e){this.vPortWidth=e,this.diagram.scrollSettings.viewPortWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalOffset",{get:function(){return this.hOffset},set:function(e){this.hOffset=e,Math.abs(this.hOffset-this.diagram.scrollSettings.horizontalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|jn.hScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.horizontalOffset=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalOffset",{get:function(){return this.vOffset},set:function(e){this.vOffset=e,Math.abs(this.vOffset-this.diagram.scrollSettings.verticalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|jn.vScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.verticalOffset=e},enumerable:!0,configurable:!0}),e.prototype.updateScrollOffsets=function(e,t){var n,i,r=this.getPageBounds(void 0,void 0,!0);r.x*=this.currentZoom,r.y*=this.currentZoom,r.width*=this.currentZoom,r.height*=this.currentZoom,n=Math.max(0,e-r.left),i=Math.max(0,t-r.top),void 0!==e&&void 0!==t?(this.horizontalOffset=n,this.verticalOffset=i,this.diagram.setOffset(n,i)):this.diagram.setOffset(-this.horizontalOffset-r.x,-this.verticalOffset-r.y),this.transform={tx:Math.max(this.horizontalOffset,-r.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-r.top)/this.currentZoom,scale:this.currentZoom}},e.prototype.setScrollOffset=function(e,t){this.scrolled=!1;var n=this.getPageBounds(void 0,void 0,!0);n.x*=this.currentZoom,n.y*=this.currentZoom,n.width*=this.currentZoom,n.height*=this.currentZoom;var i=-n.left,r=-n.top,o=!1,s=this.viewPortWidth*this.currentZoom,a=this.viewPortHeight*this.currentZoom,l=i-e;if(l!==this.horizontalOffset){i<this.horizontalOffset&&(this.horizontalOffset>l?this.horizontalOffset-=e:this.horizontalOffset=l,o=!0);var c=Math.max(n.right+this.vScrollSize,s);if(!o&&c<-l+this.viewPortWidth){var h=-l+s-this.vScrollSize,d=-this.horizontalOffset+s-this.vScrollSize;this.horizontalOffset=h<d?l:h-n.right>h-d?l:-(n.right+this.vScrollSize-s),o=!0}o||(this.horizontalOffset=i-e)}o=!1;var u=r-t;if(u!==this.verticalOffset){r<this.verticalOffset&&(this.verticalOffset>u?this.verticalOffset-=t:this.verticalOffset=u,o=!0);var p=Math.max(n.bottom+this.hScrollSize,a);if(!o&&p<-u+a){var f=-u+a-this.hScrollSize,g=-this.verticalOffset+a-this.hScrollSize;this.verticalOffset=f<g?u:f-n.bottom>f-g?u:-(n.bottom+this.hScrollSize-a),o=!0}o||(this.verticalOffset=r-t)}this.transform={tx:Math.max(this.horizontalOffset,-n.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-n.top)/this.currentZoom,scale:this.currentZoom},this.setSize()},e.prototype.getObjects=function(e,t){for(var n=[],i=0;i<e.length;i++){for(var r=!1,o=0;o<t.length;o++)if(e[i]===t[o]){r=!0;break}r||n.push(e[i])}return n},e.prototype.virtualizeElements=function(){for(var e=this.diagram.spatialSearch.findObjects(new an(-this.horizontalOffset/this.currentZoom,-this.verticalOffset/this.currentZoom,this.viewPortWidth/this.currentZoom,this.viewPortHeight/this.currentZoom)),t=[],n=0;n<e.length;n++)t.push(e[n].id);var i=this.getObjects(t,this.oldCollectionObjects);0===this.oldCollectionObjects.length&&(this.oldCollectionObjects=t);var r=this.getObjects(this.oldCollectionObjects,t);this.diagram.updateVirtualObjects(i,!1,r),this.oldCollectionObjects=t},e.prototype.setSize=function(){var e=this.getPageBounds(void 0,void 0,!0);e.x*=this.currentZoom,e.y*=this.currentZoom,e.width*=this.currentZoom,e.height*=this.currentZoom;var t=Math.min(e.x,-this.horizontalOffset),n=Math.min(e.y,-this.verticalOffset),i=this.scrollerWidth,r=this.scrollerWidth;-this.verticalOffset<=e.y&&-this.verticalOffset+this.viewPortHeight>=e.bottom&&(r=0),-this.horizontalOffset<=e.x&&-this.horizontalOffset+this.viewPortWidth>=e.right&&(i=0),this.hScrollSize=i,this.vScrollSize=r;var o=this.diagramWidth,s=this.diagramHeight;this.diagramWidth=Math.max(e.right,-this.horizontalOffset+this.viewPortWidth-r)-t,this.diagramHeight=Math.max(e.bottom,-this.verticalOffset+this.viewPortHeight-i)-n,o===this.diagramWidth&&s===this.diagramHeight||this.diagram.setSize(this.diagramWidth,this.diagramHeight),this.diagram.transformLayers(),this.diagram.element.style.overflow="hidden"},e.prototype.setViewPortSize=function(e,t){this.viewPortWidth=e,this.viewPortHeight=t},e.prototype.getPageBounds=function(e,t,n){var i,r=new an;if("Content"!==t&&null!==this.diagram.pageSettings.width&&null!==this.diagram.pageSettings.height){var o=this.diagram.pageSettings.width,s=this.diagram.pageSettings.height,a=0,l=0;if(this.diagram.pageSettings.multiplePage){if((r=this.diagram.spatialSearch.getPageBounds(0,0)).right>o&&(o*=c=Math.ceil(r.right/o)),r.bottom>s&&(s*=c=Math.ceil(r.bottom/s)),r.left<0&&Math.abs(r.left)>a){var c=Math.ceil(Math.abs(r.left)/this.diagram.pageSettings.width);a=this.diagram.pageSettings.width*c}r.top<0&&Math.abs(r.top)>l&&(c=Math.ceil(Math.abs(r.top)/this.diagram.pageSettings.height),l=this.diagram.pageSettings.height*c)}i=new an(-a,-l,o+a,s+l)}else{var h=e?void 0:0;i=this.diagram.spatialSearch.getPageBounds(h,h)}if(n){var d=this.diagram.scrollSettings.padding;i.x-=d.left,i.y-=d.top,i.width+=d.left+d.right,i.height+=d.top+d.bottom}return i},e.prototype.getPageBreak=function(e){for(var t=0,n=0,i=-1,r=[],o=this.diagram.pageSettings.margin.left,s=this.diagram.pageSettings.margin.right,a=this.diagram.pageSettings.margin.top,l=this.diagram.pageSettings.margin.bottom,c=1,h=1;e.width>t;)(t+=this.diagram.pageSettings.width?this.diagram.pageSettings.width:e.width)===this.diagram.pageSettings.width&&(r[++i]={x1:e.left+o,y1:e.top+a,x2:e.left+o,y2:e.bottom-l}),t<e.width&&(r[++i]={x1:e.topLeft.x+this.diagram.pageSettings.width*c,y1:e.topLeft.y+a,x2:e.bottomLeft.x+this.diagram.pageSettings.width*c,y2:e.bottomLeft.y-l},c++),e.width===t&&(r[++i]={x1:e.right-s,y1:e.top+a,x2:e.right-s,y2:e.bottom-l});for(;e.height>n;)(n+=this.diagram.pageSettings.height?this.diagram.pageSettings.height:e.height)===this.diagram.pageSettings.height&&(r[++i]={x1:e.left+o,y1:e.top+a,x2:e.right-s,y2:e.top+a}),n<e.height&&(r[++i]={x1:e.topLeft.x+o,y1:e.topLeft.y+this.diagram.pageSettings.height*h,x2:e.topRight.x-s,y2:e.topRight.y+this.diagram.pageSettings.height*h},h++),e.height===n&&(r[++i]={x1:e.left+o,y1:e.bottom-l,x2:e.right-s,y2:e.bottom-l});return r},e.prototype.zoom=function(e,t,n,i){if(this.diagram.constraints&En.Zoom&&1!==e||function(e){return e.constraints&En.Pan}(this.diagram)&&1===e){var r=hn();if(pn(r,this.currentZoom,this.currentZoom),fn(r,this.horizontalOffset,this.verticalOffset),i=dn(r,i=i||{x:(this.viewPortWidth/2-this.horizontalOffset)/this.currentZoom,y:(this.viewPortHeight/2-this.verticalOffset)/this.currentZoom}),this.currentZoom*e>=this.diagram.scrollSettings.minZoom&&this.currentZoom*e<=this.diagram.scrollSettings.maxZoom){this.currentZoom*=e;var o=this.getPageBounds(void 0,void 0,!0);o.x*=this.currentZoom,o.y*=this.currentZoom;var s=hn();pn(s,e,e,i.x,i.y),fn(s,t||0,n||0),gn(r,s);var a=dn(r,{x:0,y:0});1===e&&(a=this.applyScrollLimit(a.x,a.y)),this.transform={tx:Math.max(a.x,-o.left)/this.currentZoom,ty:Math.max(a.y,-o.top)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=a.x,this.verticalOffset=a.y,this.setSize(),"SVG"!==this.diagram.mode&&Do(this.diagram)&&this.diagram.scroller.virtualizeElements(),"SVG"===this.diagram.mode||Do(this.diagram)||this.diagram.refreshDiagramLayer(),this.diagram.setOffset(-this.horizontalOffset-o.x,-this.verticalOffset-o.y),fa(this.diagram)}}},e.prototype.fitToPage=function(e){var t=(e=e||{}).mode,n=e.region,i=e.margin||{},r=e.canZoomIn,o=e.customBounds;i.bottom=i.bottom||25,i.top=i.top||25,i.left=i.left||25,i.right=i.right||25;var s,a=o,l=-this.horizontalOffset,c=-this.verticalOffset;if("PageSettings"===(n=n||"PageSettings")&&this.diagram.pageSettings.width&&this.diagram.pageSettings.height||this.diagram.nodes.length>0||this.diagram.connectors.length>0){t=t||"Page","CustomBounds"!==n&&(a=this.getPageBounds(!0,n,!0));var h={x:0,y:0};h.x=(this.viewPortWidth-(i.left+i.right))/a.width,h.y=(this.viewPortHeight-(i.top+i.bottom))/a.height,!r&&a.width-this.horizontalOffset<this.viewPortWidth&&a.height-this.verticalOffset<this.viewPortHeight&&(h.x=Math.min(1,h.x),h.y=Math.min(1,h.y));var d=void 0;switch(t){case"Width":l+=(this.viewPortWidth-a.width*(d=h.x))/2-a.x*d+(i.left-i.right)/2*d,c-=-this.verticalOffset*(s=d/this.currentZoom),c="CustomBounds"!==n?c:c-this.verticalOffset*s;break;case"Height":s=(d=h.y)/this.currentZoom,l+=(this.viewPortWidth-a.width*d)/2-a.x*d+(i.left-i.right)/2*d,c+=(this.viewPortHeight-a.height*d)/2-a.y*d+(i.top-i.bottom)/2*d;break;case"Page":s=(d=Math.min(h.x,h.y))/this.currentZoom,l+=(this.viewPortWidth-a.width*d)/2-a.x*d+(i.left-i.right)/2*d,c+=(this.viewPortHeight-a.height*d)/2-a.y*d+(i.top-i.bottom)/2*d}this.zoom(s,l,c,{x:0,y:0})}else this.zoom(s=1/this.currentZoom,l,c,{x:0,y:0})},e.prototype.bringIntoView=function(e){var t=0,n=0,i=this.currentZoom,r=e,o=-this.horizontalOffset,s=-this.verticalOffset;r=new an(r.x*i,r.y*i,r.width*i,r.height*i),new an(o,s,this.viewPortWidth,this.viewPortHeight).containsRect(r)||(r.right>-o+this.viewPortWidth&&(t=r.right-this.viewPortWidth),r.x<-o&&(t=r.x),r.bottom>-s+this.viewPortHeight&&(n=r.bottom-this.viewPortHeight),r.y<-s&&(n=r.y),this.zoom(1,-this.horizontalOffset-t,-this.verticalOffset-n,null))},e.prototype.bringToCenter=function(e){var t=this.currentZoom,n=new an(e.x*t,e.y*t,e.width*t,e.height*t);this.zoom(1,-this.horizontalOffset-(n.x+n.width/2-this.viewPortWidth/2),-this.verticalOffset-(n.y+n.height/2-this.viewPortHeight/2),null)},e.prototype.applyScrollLimit=function(e,t){if("Infinity"!==this.diagram.scrollSettings.scrollLimit){var n=void 0;"Limited"===this.diagram.scrollSettings.scrollLimit&&(n=this.diagram.scrollSettings.scrollableArea),(n=n||this.getPageBounds(!0)).x*=this.currentZoom,n.y*=this.currentZoom,n.width*=this.currentZoom,n.height*=this.currentZoom,e*=-1,t*=-1;var i=Math.max(n.right,this.viewPortWidth);if(!(e<=n.x&&(e+this.viewPortWidth>=n.right||e>=n.right-this.viewPortWidth)||e>=n.x&&e+this.viewPortWidth<=i))if(e>=n.x)e=Math.max(n.x,Math.min(e,e-(e+this.viewPortWidth-this.vScrollSize-i)));else{var r=n.right-this.viewPortWidth;e=Math.min(r,n.x)}var o=Math.max(n.bottom,this.viewPortHeight);t<=n.y&&t+this.viewPortHeight>=n.bottom||t>=n.y&&t+this.viewPortHeight<=o||(t>=n.y?t=Math.max(n.y,Math.min(t,t-(t+this.viewPortHeight-this.hScrollSize-o))):(r=n.bottom-this.viewPortHeight,t=Math.min(n.y,r))),e*=-1,t*=-1}return{x:e,y:t}},e}(),qc=function(){function e(e,t,n,i,r){this.objects=[],this.left=e,this.top=t,this.width=n,this.height=i,this.spatialSearch=r}return e.prototype.findQuads=function(e,t){null!=this.first&&this.first.isIntersect(e)&&this.first.findQuads(e,t),null!=this.second&&this.second.isIntersect(e)&&this.second.findQuads(e,t),null!=this.third&&this.third.isIntersect(e)&&this.third.findQuads(e,t),null!=this.fourth&&this.fourth.isIntersect(e)&&this.fourth.findQuads(e,t),this.objects.length>0&&t.push(this)},e.prototype.isIntersect=function(e){return!(this.left+this.width<e.left||this.top+this.height<e.top||this.left>e.right||this.top>e.bottom)},e.prototype.selectQuad=function(){for(var e,t=null,n=this;null!=n;)e=n.getQuad(t),n=e.source,t=e.target||t;return t},e.prototype.getQuad=function(t){var n=this.width/2,i=this.height/2;if(n>=1e3&&i>=1e3){var r=this.left+n,o=this.top+i;if(this.spatialSearch.childRight<=r){if(this.spatialSearch.childBottom<=o)return this.first||((s=new e(this.left,this.top,n,i,this.spatialSearch)).parent=this,this.first=s),{source:this.first};if(this.spatialSearch.childTop>=o)return this.third||((s=new e(this.left,o,n,i,this.spatialSearch)).parent=this,this.third=s),{source:this.third}}else if(this.spatialSearch.childLeft>=r){if(this.spatialSearch.childBottom<=o)return this.second||((s=new e(r,this.top,n,i,this.spatialSearch)).parent=this,this.second=s),{source:this.second};var s;if(this.spatialSearch.childTop>=o)return this.fourth||((s=new e(r,o,n,i,this.spatialSearch)).parent=this,this.fourth=s),{source:this.fourth}}}return this.objects.push(this.spatialSearch.childNode),{target:this}},e.prototype.isContained=function(){return this.spatialSearch.childLeft>=this.left&&this.spatialSearch.childRight<=this.left+this.width&&this.spatialSearch.childTop>=this.top&&this.spatialSearch.childBottom<=this.top+this.height},e.prototype.addIntoAQuad=function(e){var t={};this.spatialSearch.setCurrentNode(e);for(var n=null;!t.isAdded;)n=(t=this.spatialSearch.parentQuad.add(n)).quad;return n},e.prototype.add=function(t){if(t=null,this.isContained())return{isAdded:!0,quad:t=this.selectQuad()};var n=void 0,i=!(0!==this.objects.length||this.first||this.second||this.third||this.fourth),r=2*this.width,o=2*this.height;return this.spatialSearch.childLeft<this.left?this.spatialSearch.childTop<this.top?(n=new e(this.left-this.width,this.top-this.height,r,o,this.spatialSearch),i||(n.fourth=this)):(n=new e(this.left-this.width,this.top,r,o,this.spatialSearch),i||(n.second=this)):this.spatialSearch.childTop<this.top?(n=new e(this.left,this.top-this.height,r,o,this.spatialSearch),i||(n.third=this)):(n=new e(this.left,this.top,r,o,this.spatialSearch),i||(n.first=this)),this.parent=n,this.spatialSearch.parentQuad=n,{isAdded:!1,quad:t}},e}(),Qc=function(){function e(e){this.quadSize=500,this.objectTable=e,this.parentQuad=new qc(0,0,2*this.quadSize,2*this.quadSize,this),this.pageLeft=Number.MAX_VALUE,this.pageRight=-Number.MAX_VALUE,this.pageTop=Number.MAX_VALUE,this.pageBottom=-Number.MAX_VALUE,this.quadTable={}}return e.prototype.removeFromAQuad=function(e){if(this.quadTable[e.id]){var t=this.quadTable[e.id],n=this.objectIndex(t.objects,e);-1!==n&&(t.objects.splice(n,1),this.update(t),delete this.quadTable[e.id])}},e.prototype.update=function(e){if(e.parent&&0===e.objects.length&&e.first&&e.second&&e.third&&e.fourth){var t=e.parent;t.first===e?t.first=null:t.second===e?t.second=null:t.third===e?t.third=null:t.fourth===e&&(t.fourth=null),this.update(e.parent)}else e!==this.parentQuad||e.first||e.second||e.third||e.fourth||(e.left=0,e.width=1e3,e.top=0,e.height=1e3)},e.prototype.addIntoAQuad=function(e){var t=this.parentQuad.addIntoAQuad(e);this.quadTable[e.id]=t},e.prototype.objectIndex=function(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t.id)return n;return-1},e.prototype.updateQuad=function(e){this.setCurrentNode(e);var t=e.outerBounds;if(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height))return!1;if(this.quadTable[e.id]?this.quadTable[e.id].isContained()||(this.removeFromAQuad(e),this.addIntoAQuad(e)):this.addIntoAQuad(e),!this.isWithinPageBounds(t)||this.leftElement===e||this.topElement===e||this.rightElement===e||this.bottomElement===e){var n=!1;return this.pageLeft===this.childLeft&&e===this.leftElement||(this.pageLeft>=this.childLeft?(this.pageLeft=this.childLeft,this.leftElement=e,n=!0):e===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.findLeft(this.parentQuad),n=!0)),this.pageTop===this.childTop&&e===this.topElement||(this.pageTop>=this.childTop?(this.pageTop=this.childTop,this.topElement=e,n=!0):e===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.findTop(this.parentQuad),n=!0)),this.pageBottom===this.childBottom&&e===this.bottomElement||(this.pageBottom<=this.childBottom?(n=!0,this.pageBottom=this.childBottom,this.bottomElement=e):e===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.findBottom(this.parentQuad),n=!0)),this.pageRight===this.childRight&&e===this.rightElement||(this.pageRight<=this.childRight?(this.pageRight=this.childRight,this.rightElement=e,n=!0):e===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.findRight(this.parentQuad),n=!0)),n}return this.setCurrentNode(null),!1},e.prototype.isWithinPageBounds=function(e){return e.left>=this.pageLeft&&e.right<=this.pageRight&&e.top>=this.pageTop&&e.bottom<=this.pageBottom},e.prototype.findQuads=function(e){var t=[];return this.parentQuad.findQuads(e,t),t},e.prototype.findObjects=function(e){for(var t=[],n=0,i=this.findQuads(e);n<i.length;n++)for(var r=0,o=i[n].objects;r<o.length;r++){var s=o[r];s.outerBounds.intersects(e)&&t.push(this.objectTable[s.id])}return t},e.prototype.updateBounds=function(e){var t=!1;return e===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.topElement=null,this.findTop(this.parentQuad),t=!0),e===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.leftElement=null,this.findLeft(this.parentQuad),t=!0),e===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.rightElement=null,this.findRight(this.parentQuad),t=!0),e===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.bottomElement=null,this.findBottom(this.parentQuad),t=!0),t},e.prototype.findBottom=function(e){e.third||e.fourth?(e.third&&this.findBottom(e.third),e.fourth&&this.findBottom(e.fourth)):(e.second&&this.findBottom(e.second),e.first&&this.findBottom(e.first));for(var t=0,n=e.objects;t<n.length;t++){var i=n[t];this.pageBottom<=i.outerBounds.bottom&&(this.pageBottom=i.outerBounds.bottom,this.bottomElement=i)}},e.prototype.findRight=function(e){e.second||e.fourth?(e.second&&this.findRight(e.second),e.fourth&&this.findRight(e.fourth)):(e.first&&this.findRight(e.first),e.third&&this.findRight(e.third));for(var t=0,n=e.objects;t<n.length;t++){var i=n[t];this.pageRight<=i.outerBounds.right&&(this.pageRight=i.outerBounds.right,this.rightElement=i)}},e.prototype.findLeft=function(e){e.first||e.third?(e.first&&this.findLeft(e.first),e.third&&this.findLeft(e.third)):(e.second&&this.findLeft(e.second),e.fourth&&this.findLeft(e.fourth));for(var t=0,n=e.objects;t<n.length;t++){var i=n[t];this.pageLeft>=i.outerBounds.left&&(this.pageLeft=i.outerBounds.left,this.leftElement=i)}},e.prototype.findTop=function(e){e.first||e.second?(e.first&&this.findTop(e.first),e.second&&this.findTop(e.second)):(e.third&&this.findTop(e.third),e.fourth&&this.findTop(e.fourth));for(var t=0,n=e.objects;t<n.length;t++){var i=n[t];this.pageTop>=i.outerBounds.top&&(this.pageTop=i.outerBounds.top,this.topElement=i)}},e.prototype.setCurrentNode=function(e){if(this.childNode=e,e){var t=e.outerBounds;this.childLeft=Number(t.left),this.childTop=Number(t.top),this.childRight=Number(t.right),this.childBottom=Number(t.bottom)}else this.childLeft=Number.MAX_VALUE,this.childTop=Number.MAX_VALUE,this.childRight=-Number.MAX_VALUE,this.childBottom=-Number.MAX_VALUE},e.prototype.getPageBounds=function(e,t){if(this.pageLeft===Number.MAX_VALUE)return new an(0,0,0,0);var n=void 0!==e?Math.min(this.pageLeft,0):this.pageLeft,i=void 0!==t?Math.min(this.pageTop,0):this.pageTop;return new an(Math.round(n),Math.round(i),Math.round(this.pageRight-n),Math.round(this.pageBottom-i))},e.prototype.getQuad=function(e){return this.quadTable[e.id]},e}(),Yc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(!1)],t.prototype,"preventDefaults",void 0),t}(Le),Xc=function(e){function t(t,n){var i,r,o=e.call(this,t,n)||this;o.version=17.1,o.connectorTable={},o.groupTable={},o.activeLabel={id:"",parentId:"",isGroup:!1},o.textEditing=!1,o.isTriggerEvent=!1,o.preventNodesUpdate=!1,o.preventConnectorsUpdate=!1,o.selectionConnectorsList=[],o.deleteVirtualObject=!1,o.crudDeleteNodes=[],o.selectedObject={helperObject:void 0,actualObject:void 0},o.renderTimer=null;for(var s=0;t&&t.nodes&&s<t.nodes.length;s++)r=o.nodes[s],(i=t.nodes[s]).children&&i.children.length>0&&(i.style&&i.style.fill||(r.style.fill="transparent"),i.style&&i.style.strokeColor||(r.style.strokeColor="transparent")),i.shape&&"UmlActivity"===i.shape.type&&Ia(i,r),i.shape&&"SwimLane"===i.shape.type&&Ea(i,r);return o}return Object(s.c)(t,e),t.prototype.clearCollection=function(e){for(var t,n=[],i=0,r=Object.keys(this.nameTable);i<r.length;i++)(t=this.nameTable[r[i]])&&(e&&t instanceof uo||!e&&t instanceof sa)&&n.push(t);this.clearObjects(n)},t.prototype.onPropertyChanged=function(n,i){for(var r=!0,o=!1,s=!1,a=0,l=Object.keys(n);a<l.length;a++)switch(l[a]){case"width":case"height":this.element.style.width=this.getSizeValue(this.width),this.element.style.height=this.getSizeValue(this.height),this.eventHandler.updateViewPortSize(this.element);for(var c=0,h=this.views;c<h.length;c++){var d=this.views[h[c]];d instanceof t||d.updateView(d)}break;case"nodes":if(n.nodes.length>0&&0===i.nodes.length)this.clearCollection(),s=!0;else{for(var u=0,p=Object.keys(n.nodes);u<p.length;u++){var f=p[u],g=Number(f),m=n.nodes[g];o=o||void 0!==m.excludeFromLayout,this.nodePropertyChange(b=this.nodes[g],i.nodes[g],m,void 0,!0,!0),this.triggerEvent(Ln.propertyChange,{element:b,cause:this.diagramActions,oldValue:i.nodes[g],newValue:n.nodes[g]}),r&&(r=!1)}"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"connectors":if(n.connectors.length>0&&0===i.connectors.length)this.clearCollection(!0),s=!0;else{for(var y=0,v=Object.keys(n.connectors);y<v.length;y++){var b;f=v[y],g=Number(f),this.connectorPropertyChange(b=this.connectors[g],i.connectors[g],m=n.connectors[g],!0,!0),this.triggerEvent(Ln.propertyChange,{element:b,cause:this.diagramActions,oldValue:i.connectors[g],newValue:n.connectors[g]}),b&&b.parentId&&"UmlClassifier"===this.nameTable[b.parentId].shape.type&&this.updateConnectorEdges(this.nameTable[b.parentId]||b),r&&(r=!1)}this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"bridgeDirection":this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer();break;case"backgroundColor":this.intOffPageBackground();break;case"pageSettings":this.validatePageSize(),this.updatePage();break;case"selectedItems":if(n.selectedItems.userHandles&&this.selectedItems.wrapper&&this.selectedItems.userHandles&&this.selectedItems.userHandles.length>0){this.renderSelector(!0);break}if(n.selectedItems.constraints){this.renderSelector(!0);break}break;case"snapSettings":this.updateSnapSettings(n);break;case"commandManager":this.initCommands();break;case"layout":o=!0;break;case"dataSourceSettings":this.clear(),this.initObjects(),"None"===this.layout.type?s=!0:o=!0;break;case"tooltip":rr(this);break;case"rulerSettings":this.updateRulerSettings(n);break;case"layers":this.updateLayer(n);break;case"scrollSettings":this.updateScrollSettings(n);break;case"locale":this.realActions|=jn.PreventDataInit,e.prototype.refresh.call(this),this.realActions&=~jn.PreventDataInit;break;case"contextMenuSettings":if(void 0!==n.contextMenuSettings.showCustomMenuOnly&&(this.contextMenuSettings.showCustomMenuOnly=n.contextMenuSettings.showCustomMenuOnly),void 0!==n.contextMenuSettings.show&&(this.contextMenuSettings.show=n.contextMenuSettings.show),n.contextMenuSettings.items)for(var w=n.contextMenuSettings.items,C=0,x=Object.keys(w);C<x.length;C++)f=x[C],g=Number(f),this.contextMenuSettings.items[g]=w[g];break;case"serializationSettings":void 0!==n.serializationSettings.preventDefaults&&(this.serializationSettings.preventDefaults=n.serializationSettings.preventDefaults)}o&&this.doLayout(),r&&this.triggerEvent(Ln.propertyChange,{element:this,cause:this.diagramActions,oldValue:i,newValue:n}),!s&&this.canLogChange()&&this.modelChanged(n,i)&&this.addHistoryEntry({type:"PropertyChanged",undoObject:i,redoObject:n,category:"Internal"}),this.resetDiagramActions(),s&&(this.initObjects(!0),this.refreshDiagramLayer())},t.prototype.updateSnapSettings=function(e){(void 0!==e.snapSettings.constraints||e.snapSettings.horizontalGridlines||e.snapSettings.verticalGridlines)&&this.diagramRenderer.updateGrid(this.snapSettings,Ol(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},t.prototype.updateRulerSettings=function(e){void 0!==e.rulerSettings.dynamicGrid&&this.diagramRenderer.updateGrid(this.snapSettings,Ol(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),void 0!==e.rulerSettings.showRulers?(this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):void 0===e.rulerSettings.horizontalRuler&&void 0===e.rulerSettings.verticalRuler||(void 0!==e.rulerSettings.horizontalRuler.thickness||void 0!==e.rulerSettings.verticalRuler.thickness?(ga(this),this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):fa(this)),this.diagramRenderer.updateGrid(this.snapSettings,Ol(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){this.initializePrivateVariables(),this.isProtectedOnChange=!0,this.serviceLocator=new lc,this.initializeServices(),this.setCulture(),window.measureElement&&(window.measureElement=null),this.initDiagram(),this.initViews(),this.unWireEvents(),this.wireEvents(),this.element.classList.add("e-diagram")},t.prototype.initializePrivateVariables=function(){this.defaultLocale={Copy:"Copy",Cut:"Cut",Paste:"Paste",Undo:"Undo",Redo:"Redo",SelectAll:"Select All",Grouping:"Grouping",Group:"Group",UnGroup:"Un Group",Order:"Order",BringToFront:"Bring To Front",MoveForward:"Move Forward",SendToBack:"Send To Back",SendBackward:"Send Backward"},this.layerZIndex=-1,this.layerZIndexTable={},this.nameTable={},this.pathTable={},this.groupTable={},this.commands={},this.isLoading||(this.views=[]),this.commandHandler=new Wc(this),this.eventHandler=new Hc(this,this.commandHandler),this.spatialSearch=new Qc(this.nameTable),this.scroller=new Gc(this)},t.prototype.initializeServices=function(){this.serviceLocator.register("localization",this.localeObj=new yt(this.getModuleName(),this.defaultLocale,this.locale))},t.prototype.setCulture=function(){this.localeObj=new yt(this.getModuleName(),this.defaultLocale,this.locale)},t.prototype.render=function(){var e=[];this.dataSourceSettings.crudAction.read&&this.renderInitialCrud(),this.initHistory(),this.diagramRenderer=new rc(this.element.id,new ic,"SVG"===this.mode),this.initLayers(),this.initializeDiagramLayers(),this.diagramRenderer.setLayers(),this.initObjects(!0),this.doLayout(),this.validatePageSize(),this.renderPageBreaks(),this.diagramRenderer.renderSvgGridlines(this.snapSettings,Ol(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.commandHandler.initSelectorWrapper(),this.notify("initial-load",{}),this.trigger("load"),this.scroller.setSize(),this.scroller.updateScrollOffsets(),this.refreshDiagramLayer(),(this.scrollSettings.verticalOffset>0||this.scrollSettings.horizontalOffset>0)&&this.updateScrollOffset(),re.isDevice&&(this.tool=In.ZoomPan|In.SingleSelect),this.notify("initial-end",{}),this.isProtectedOnChange=!1,this.tooltipObject=rr(this),this.diagramActions=Tn.Render;for(var t=this.nodes,n=0;n<t.length;n++)t[n].isExpanded||e.push(t[n]);if(e.length)for(n=e.length-1;n>=0;n--)this.commandHandler.expandNode(e[n],this);this.initCommands(),this.isLoading=!1},t.prototype.renderInitialCrud=function(){var e,t=this;t.dataSourceSettings.crudAction.read&&((e=new E(t.dataSourceSettings.crudAction.read,"GET",!1)).onSuccess=function(e){t.dataSourceSettings.dataManager=JSON.parse(e),t.dataBind()},e.send().then()),t.dataSourceSettings.connectionDataSource.crudAction.read&&((e=new E(t.dataSourceSettings.connectionDataSource.crudAction.read,"GET",!1)).onSuccess=function(e){t.dataSourceSettings.connectionDataSource.dataManager=JSON.parse(e),t.dataBind()},e.send().then())},t.prototype.getModuleName=function(){return"diagram"},t.prototype.getClassName=function(){return"Diagram"},t.prototype.requiredModules=function(){var e=[];return e.push({member:"Bpmn",args:[]}),e.push({member:"Bridging",args:[]}),e.push({member:"ConnectorEditingTool",args:[]}),this.constraints&En.UndoRedo&&e.push({member:"UndoRedo",args:[]}),("OrganizationalChart"===this.layout.type||"HierarchicalTree"===this.layout.type||this.layout.enableAnimation)&&e.push({member:"LayoutAnimate",args:[]}),this.snapSettings.constraints&&e.push({member:"Snapping",args:[this]}),e.push({member:"PrintandExport",args:[this]}),this.contextMenuSettings.show&&e.push({member:"contextMenu",args:[this,this.serviceLocator]}),"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type||e.push({member:"OrganizationalChart",args:[]}),"ComplexHierarchicalTree"===this.layout.type&&e.push({member:"ComplexHierarchicalTree",args:[]}),"MindMap"===this.layout.type&&e.push({member:"MindMapChart",args:[]}),"RadialTree"===this.layout.type&&e.push({member:"RadialTree",args:[]}),"SymmetricalLayout"===this.layout.type&&e.push({member:"SymmetricalLayout",args:[]}),(this.dataSourceSettings.dataManager||this.dataSourceSettings.data||this.dataSourceSettings.crudAction.read||this.dataSourceSettings.connectionDataSource.crudAction.read)&&e.push({member:"DataBinding",args:[]}),e},t.prototype.destroy=function(){if(clearInterval(this.renderTimer),this.renderTimer=null,this.hRuler&&this.vRuler&&(this.hRuler.destroy(),this.vRuler.destroy()),this.tooltipObject.destroy(),this.droppable.destroy(),this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),document.getElementById(this.element.id)){this.element.classList.remove("e-diagram");for(var t=document.getElementsByClassName("e-tooltip-wrap");t.length>0;)t[0].parentNode.removeChild(t[0]);var n=document.getElementById(this.element.id+"content");n&&this.element.removeChild(n),window.measureElement&&(window.measureElement.usageCount-=1,0===window.measureElement.usageCount&&(window.measureElement.parentNode.removeChild(window.measureElement),window.measureElement=null))}},t.prototype.wireEvents=function(){var e=re.touchEndEvent,t=re.touchMoveEvent,n=re.isPointer?"pointerleave":"mouseleave",i="mozilla"===re.info.name?re.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel";I.add(this.diagramCanvas,re.touchStartEvent,this.eventHandler.mouseDown,this.eventHandler),I.add(this.diagramCanvas,t,this.eventHandler.mouseMove,this.eventHandler),I.add(this.diagramCanvas,e,this.eventHandler.mouseUp,this.eventHandler),I.add(this.diagramCanvas,n,this.eventHandler.mouseLeave,this.eventHandler),I.add(this.diagramCanvas,"keydown",this.eventHandler.keyDown,this.eventHandler),I.add(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick,this.eventHandler),I.add(this.diagramCanvas,"scroll",this.eventHandler.scrolled,this.eventHandler),I.add(this.diagramCanvas,i,this.eventHandler.mouseWheel,this.eventHandler),I.add(window,"resize",this.eventHandler.windowResize,this.eventHandler),this.initDroppables()},t.prototype.unWireEvents=function(){var e=re.touchMoveEvent,t=re.isPointer?"pointerleave":"mouseleave",n="mozilla"===re.info.name?re.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel",i=re.touchEndEvent;I.remove(this.diagramCanvas,re.touchStartEvent,this.eventHandler.mouseDown),I.remove(this.diagramCanvas,e,this.eventHandler.mouseMove),I.remove(this.diagramCanvas,i,this.eventHandler.mouseUp),I.remove(this.diagramCanvas,t,this.eventHandler.mouseLeave),I.remove(this.diagramCanvas,"keydown",this.eventHandler.keyDown),I.remove(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick),I.remove(this.diagramCanvas,"scroll",this.eventHandler.scrolled),I.remove(this.diagramCanvas,n,this.eventHandler.mouseWheel),I.remove(window,"resize",this.eventHandler.windowResize)},t.prototype.select=function(e,t){null!=e&&this.commandHandler.selectObjects(e,t)},t.prototype.selectAll=function(){var e;e=this.getObjectsOfLayer(this.activeLayer.objects),this.select(e)},t.prototype.unSelect=function(e){e&&wc(this,e)&&this.commandHandler.unSelect(e)},t.prototype.clearSelection=function(){this.commandHandler.clearSelection(!0)},t.prototype.updateViewPort=function(){this.eventHandler.updateViewPortSize(this.element)},t.prototype.cutCommand=function(){this.cut()},t.prototype.cut=function(){this.commandHandler.cut()},t.prototype.addProcess=function(e,t){this.bpmnModule&&this.bpmnModule.addProcess(e,t,this)},t.prototype.removeProcess=function(e){this.bpmnModule&&this.bpmnModule.removeProcess(e,this)},t.prototype.pasteCommand=function(){this.paste()},t.prototype.paste=function(e){this.commandHandler.paste(e)},t.prototype.fitToPage=function(e){this.scroller.fitToPage(e)},t.prototype.bringIntoView=function(e){this.scroller.bringIntoView(e)},t.prototype.bringToCenter=function(e){this.scroller.bringToCenter(e)},t.prototype.copyCommand=function(){this.copy()},t.prototype.copy=function(){return this.commandHandler.copy()},t.prototype.group=function(){this.commandHandler.group()},t.prototype.unGroup=function(){this.commandHandler.unGroup()},t.prototype.sendToBack=function(){this.commandHandler.sendToBack()},t.prototype.setActiveLayer=function(e){var t=this.commandHandler.getLayer(e);this.activeLayer=t},t.prototype.addLayer=function(e,t){this.commandHandler.addLayer(e,t)},t.prototype.removeLayer=function(e){this.commandHandler.removeLayer(e)},t.prototype.moveObjects=function(e,t){this.commandHandler.moveObjects(e,t)},t.prototype.sendLayerBackward=function(e){this.commandHandler.sendLayerBackward(e)},t.prototype.bringLayerForward=function(e){this.commandHandler.bringLayerForward(e)},t.prototype.cloneLayer=function(e){this.commandHandler.cloneLayer(e)},t.prototype.bringToFront=function(){this.commandHandler.bringToFront()},t.prototype.moveForward=function(){this.commandHandler.sendForward()},t.prototype.sendBackward=function(){this.commandHandler.sendBackward()},t.prototype.getObject=function(e){return this.nameTable[e]},t.prototype.getActiveLayer=function(){return this.activeLayer},t.prototype.nudgeCommand=function(e,t,n){"object"!=typeof e&&this.nudge(e)},t.prototype.nudge=function(e,t,n){var i=0,r=0;"Left"===e||"Right"===e?i=("Left"===e?-1:1)*(t||1):r=("Up"===e?-1:1)*(n||1);var o=this.selectedItems,s=this.selectedItems.wrapper.children[0];s instanceof Jn?this.commandHandler.labelDrag(o.nodes[0],s,i,r):this.drag(o,i,r),this.refreshCanvasLayers()},t.prototype.drag=function(e,t,n){if(!(this.bpmnModule&&e instanceof sa&&this.bpmnModule.updateAnnotationDrag(e,this,t,n))){if(e instanceof fo){if(this.preventConnectorsUpdate=!0,e.nodes&&e.nodes.length)for(var i=0,r=e.nodes;i<r.length;i++){var o=r[i];if(this.drag(o,t,n),o.parentId){var s=this.nameTable[o.parentId];s.isLane&&ts(s,this.nameTable[s.parentId],o,this)}}if(e.connectors&&e.connectors.length)for(var a=0,l=e.connectors;a<l.length;a++){var c=l[a];this.drag(c,t,n),-1===this.selectionConnectorsList.indexOf(c)&&this.selectionConnectorsList.push(c)}this.updateSelector()}else e instanceof sa&&this.bpmnModule&&this.bpmnModule.updateAnnotationDrag(e,this,t,n),this.commandHandler.drag(e,t,n);if(e instanceof fo){this.preventConnectorsUpdate=!1;for(var h=0,d=this.selectionConnectorsList;h<d.length;h++){var u=d[h];this.updateConnectorProperties(this.nameTable[u.id]),"Bpmn"===u.shape.type&&"Default"===u.shape.sequence&&this.commandHandler.updatePathElementOffset(u)}this.selectionConnectorsList=[]}this.diagramActions&Tn.ToolAction||this.updateSelector()}},t.prototype.scale=function(e,t,n,i){var r=!0;if(e instanceof fo){if(e.nodes&&e.nodes.length)for(var o=0,s=e.nodes;o<s.length;o++)r=this.commandHandler.scale(s[o],t,n,i,e);if(e.connectors&&e.connectors.length)for(var a=0,l=e.connectors;a<l.length;a++)this.commandHandler.scale(l[a],t,n,i,e);this.updateSelector(),this.refreshCanvasLayers()}else this.commandHandler.scale(e,t,n,i,e.children?e:void 0);return r},t.prototype.rotate=function(e,t,n){var i;if(e)if(n=n||{x:e.wrapper.offsetX,y:e.wrapper.offsetY},e instanceof fo){e.rotateAngle+=t,e.wrapper.rotateAngle+=t;var r=Vl(e.wrapper);if(!(i=this.commandHandler.checkBoundaryConstraints(void 0,void 0,r)))return e.rotateAngle-=t,e.wrapper.rotateAngle-=t,i;var o=[];o=(o=o.concat(e.nodes)).concat(e.connectors),this.commandHandler.rotateObjects(e,o,t,n)}else this.commandHandler.rotateObjects(e,[e],t,n);return i},t.prototype.dragSourceEnd=function(e,t,n){this.commandHandler.dragSourceEnd(e,t,n)},t.prototype.dragTargetEnd=function(e,t,n){this.commandHandler.dragTargetEnd(e,t,n)},t.prototype.findObjectsUnderMouse=function(e,t){return this.eventHandler.findObjectsUnderMouse(e,t)},t.prototype.findObjectUnderMouse=function(e,t,n){return this.eventHandler.findObjectUnderMouse(e,t,n)},t.prototype.findTargetObjectUnderMouse=function(e,t,n,i,r){return this.eventHandler.findTargetUnderMouse(e,t,n,i,r)},t.prototype.findElementUnderMouse=function(e,t){return this.eventHandler.findElementUnderMouse(e,t)},t.prototype.findActionToBeDone=function(e,t,n,i){return this.eventHandler.findActionToBeDone(e,t,n,i)},t.prototype.getTool=function(e){var t,n=tc(this.getCustomTool);return n&&(t=n(e))?t:this.eventHandler.getTool(e)},t.prototype.getCursor=function(e,t){var n,i=tc(this.getCustomCursor);return i&&(n=i(e,t))?n:this.eventHandler.getCursor(e)},t.prototype.initHistory=function(){this.undoRedoModule&&this.undoRedoModule.initHistory(this)},t.prototype.addHistoryEntry=function(e){if(this.undoRedoModule&&this.constraints&En.UndoRedo&&!this.currentSymbol){if(e.undoObject&&"helper"===e.undoObject.id)return;this.undoRedoModule.addHistoryEntry(e,this),"StartGroup"!==e.type&&"EndGroup"!==e.type&&this.historyChangeTrigger(e)}},t.prototype.historyChangeTrigger=function(e){var t={},n=[];switch(e&&e.redoObject&&e.redoObject.nodes instanceof Array&&e.redoObject.connectors instanceof Array?n=e.redoObject.nodes.concat(e.redoObject.connectors):e.redoObject&&n.push(e.redoObject),t.type=e.type,e.type){case"PositionChanged":t.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY},t.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY};break;case"RotationChanged":t.oldValue={rotateAngle:e.undoObject.rotateAngle},t.newValue={rotateAngle:e.redoObject.rotateAngle};break;case"SizeChanged":t.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY,width:e.undoObject.width,height:e.undoObject.height},t.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY,width:e.redoObject.width,height:e.redoObject.height};break;case"CollectionChanged":t[e.changeType]=n;break;case"ConnectionChanged":t.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY},t.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY}}n.length&&this.triggerEvent(Ln.historyChange,{cause:e.category,source:n,change:t})},t.prototype.startGroupAction=function(){this.addHistoryEntry({type:"StartGroup",category:"Internal"})},t.prototype.endGroupAction=function(){this.addHistoryEntry({type:"EndGroup",category:"Internal"})},t.prototype.undo=function(){this.undoRedoModule&&this.constraints&En.UndoRedo&&this.undoRedoModule.undo(this)},t.prototype.redo=function(){this.undoRedoModule&&this.constraints&En.UndoRedo&&this.undoRedoModule.redo(this)},t.prototype.align=function(e,t,n){t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Tn.PublicMethod,this.commandHandler.align(t,e,n||"Object")},t.prototype.distribute=function(e,t){t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Tn.PublicMethod,this.commandHandler.distribute(t,e)},t.prototype.sameSize=function(e,t){t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Tn.PublicMethod,this.commandHandler.sameSize(t,e)},t.prototype.zoom=function(e,t){this.scroller.zoom(e,0,0,t)},t.prototype.zoomTo=function(e){var t=e.zoomFactor?e.zoomFactor:.2;this.scroller.zoom(t="ZoomOut"===e.type?1/(1+t):1+t,0,0,e.focusPoint)},t.prototype.pan=function(e,t,n){this.scroller.zoom(1,e,t,n)},t.prototype.reset=function(){this.scroller.zoom(1/this.scroller.currentZoom,-this.scroller.horizontalOffset,-this.scroller.verticalOffset,{x:0,y:0})},t.prototype.triggerEvent=function(e,t){t&&this.updateEventValue(t),this.trigger(Ln[e],t)},t.prototype.updateEventValue=function(e){var t=e.element;e.element&&t instanceof fo&&t.nodes.length+t.connectors.length===1&&(e.element=1===t.nodes.length?t.nodes[0]:t.connectors[0])},t.prototype.add=function(e,t){var n;if(e){var i={element:e=Ul(e),cause:this.diagramActions,state:"Changing",type:"Addition",cancel:!1};"helper"!==e.id&&this.triggerEvent(Ln.collectionChange,i),this.diagramActions=this.diagramActions|Tn.PublicMethod,e.id=e.id||zl();var r=this.activeLayer;if(!i.cancel&&!r.lock){if(r.objects.indexOf(e.id)<0&&!r.lock&&(r.visible||(r.visible=!0,this.dataBind()),r.objects.push(e.id)),al(e)===uo)(n=new uo(this,"connectors",e,!0)).status="New",this.connectors.push(n),this.initObject(n),!1===e.visible&&this.updateElementVisibility(n.wrapper,n,e.visible),this.updateEdges(n);else{if((n=new sa(this,"nodes",e,!0)).parentId=e.parentId,n.umlIndex=e.umlIndex,n.status="New",this.nodes.push(n),this.initObject(n,r,void 0,t),this.bpmnModule){if(n.shape.annotations&&0!==n.shape.annotations.length)for(var o=0,s=this.bpmnModule.getTextAnnotationConn(n);o<s.length;o++)this.initConnectors(s[o],r,!1);n.shape.activity&&n.shape.activity.subProcess.processes&&n.shape.activity.subProcess.processes.length&&this.bpmnModule.updateDocks(n,this)}if(n.umlIndex>-1&&e.parentId&&this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type){var a=this.nameTable[e.parentId];a.children.splice(n.umlIndex,0,n.id),a.wrapper.children.splice(n.umlIndex,0,n.wrapper),a.wrapper.measure(new Xt),a.wrapper.arrange(a.wrapper.desiredSize),this.updateDiagramObject(a)}}if(i={element:n,cause:this.diagramActions,state:"Changed",type:"Addition",cancel:!1},"helper"!==e.id&&this.triggerEvent(Ln.collectionChange,i),!(this.diagramActions&Tn.UndoRedo||this.diagramActions&Tn.Group||this.diagramActions&Tn.PreventHistory)){var l={type:"CollectionChanged",changeType:"Insert",undoObject:Ul(e),redoObject:Ul(e),category:"Internal"};this.addHistoryEntry(l)}"SVG"===this.mode&&(this.updateSvgNodes(n),this.updateDiagramObject(n),n.shape.activity&&n.shape.activity.subProcess.processes&&n.shape.activity.subProcess.processes.length&&this.updateProcesses(n),this.updateBridging())}}return this.resetDiagramActions(Tn.PublicMethod),n&&this.layers.length>1&&this.moveNode(n),n},t.prototype.updateSvgNodes=function(e){if(e.children)for(var t=0,n=e.children;t<n.length;t++){var i=n[t];if(this.nameTable[i]&&this.nameTable[i].parentId){var r=bl(i+"_groupElement",this.element.id);r.parentNode.removeChild(r)}}},t.prototype.updateProcesses=function(e){if(this.bpmnModule&&e&&e.shape&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length){var t=e.shape.activity.subProcess.processes;this.moveSvgNode(e.id);for(var n=0,i=t;n<i.length;n++){this.moveSvgNode(l=i[n]);for(var r=[],o=(r=r.concat(this.nameTable[l].outEdges,this.nameTable[l].inEdges)).length-1;o>=0;o--)this.moveSvgNode(r[o])}for(var s=0,a=t;s<a.length;s++){var l;this.nameTable[l=a[s]].shape.activity.subProcess.processes&&this.nameTable[l].shape.activity.subProcess.processes.length&&this.updateProcesses(this.nameTable[l])}}else this.moveSvgNode(e.id)},t.prototype.moveSvgNode=function(e){var t=bl(e+"_groupElement",this.element.id),n=t.parentElement;t.parentNode.removeChild(t),n.appendChild(t)},t.prototype.addTextAnnotation=function(e,t){if(this.bpmnModule){var n=this.bpmnModule.addAnnotation(t,e,this);if(this.initConnectors(n,this.commandHandler.getObjectLayer(t.id),!1),this.updateDiagramObject(t),!(this.diagramActions&Tn.UndoRedo||this.diagramActions&Tn.Group)){var i={type:"CollectionChanged",changeType:"Insert",undoObject:Ul(e),redoObject:Ul(e),category:"Internal"};this.addHistoryEntry(i)}}},t.prototype.spliceConnectorEdges=function(e,t){var n,i=[];if(n=t?this.nameTable[e.sourceID]:this.nameTable[e.targetID])for(var r=(i=t?n.outEdges:n.inEdges).length-1;r>=0;r--)i[r]===e.id&&i.splice(r,1)},t.prototype.removeDependentConnector=function(e){for(var t,n=[],i=(n=n.concat(e.outEdges,e.inEdges)).length-1;i>=0;i--)(t=this.nameTable[n[i]])&&(this.connectorTable[t.id]=Ul(t),this.remove(t))},t.prototype.removeObjectsFromLayer=function(e){if(e.children)for(var t=0;t<e.children.length;t++){var n=this.nameTable[e.children[t]];n&&this.removeObjectsFromLayer(n)}var i=this.layers.indexOf(this.commandHandler.getObjectLayer(e.id)),r=this.layers[i].objects.indexOf(e.id);r>-1&&(wc(this,e)&&this.unSelect(e),this.layers[i].objects.splice(r,1),delete this.layers[i].zIndexTable[this.nameTable[e.id].zIndex])},t.prototype.removeElements=function(e){if("SVG"===this.mode||"Canvas"===this.mode&&"Native"===e.shape.type){var t=bl(e.id+"_groupElement",this.element.id);t&&t.parentNode.removeChild(t)}this.refreshCanvasLayers();for(var n,i=e.wrapper.children,r=0;r<i.length;r++){if(i[r]instanceof Kn||i[r].id&&i[r].id.indexOf("icon_content")>0){i[r].id.indexOf("icon_content")>0&&"SVG"===this.mode&&((n=bl(i[r].id+"_shape_groupElement",this.element.id)).parentNode.removeChild(n),(n=bl(i[r].id+"_rect_groupElement",this.element.id)).parentNode.removeChild(n));for(var o=0,s=this.views;o<s.length;o++)Ll(i[r].id+"_groupElement",s[o])}else if(i[r]instanceof Gr)for(var a=0,l=this.views;a<l.length;a++)Ll(i[r].id+"_html_element",l[a]);qa(i[r].id)}},t.prototype.removeCommand=function(){this.remove()},t.prototype.remove=function(e){var t,n=[];n=n.concat(this.selectedItems.nodes,this.selectedItems.connectors);var i=!1;if(e){if((e=this.nameTable[e.id])&&e.shape&&"SwimLane"===e.shape.type&&function(e,t){var n,i,r,o,s,a,l=t.wrapper.children[0].rows;for(i=0;i<l.length;i++)for(r=0;r<l[i].cells.length;r++){if((s=ks(l[i].cells[r]))&&s.children)for(o=0;o<s.children.length;o++)s.children[o].children&&(a=e.nameTable[s.children[o].id])&&(a.isLane?Ps(e,a):(e.removeDependentConnector(a),e.diagramActions|=Tn.PreventHistory,e.remove(a),e.diagramActions&=~Tn.PreventHistory,o--));s&&(n=e.nameTable[s.id])&&Ps(e,n)}}(this,e),e&&((e instanceof uo?e.constraints&Cn.Delete:e.constraints&An.Delete)||this.diagramActions&Tn.Clear)&&(t={element:e,cause:this.diagramActions,state:"Changing",type:"Removal",cancel:!1},this.diagramActions&Tn.Clear||"helper"===e.id||this.triggerEvent(Ln.collectionChange,t),!t.cancel)){if(this.bpmnModule&&this.bpmnModule.checkAndRemoveAnnotations(e,this))return void this.refreshCanvasLayers();if(!(this.diagramActions&Tn.UndoRedo||this.diagramActions&Tn.PreventHistory)&&(e instanceof sa||e instanceof uo)){var r={type:"CollectionChanged",changeType:"Remove",undoObject:Ul(e),redoObject:Ul(e),category:"Internal"};this.diagramActions&Tn.Clear||n.length>0&&this.undoRedoModule&&!this.layout.type&&(this.historyManager.startGroupAction(),i=!0),e instanceof sa&&this.removeDependentConnector(e),e.isLane||e.isPhase||this.diagramActions&Tn.Clear||this.isStackChild(e)||this.addHistoryEntry(r)}!e.children||e.isLane||e.isPhase||this.deleteGroup(e),e.parentId&&(this.deleteChild(e),this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type&&(this.updateDiagramObject(this.nameTable[e.parentId]),this.updateConnectorEdges(this.nameTable[e.parentId])));var o=void 0;this.diagramActions=this.diagramActions|Tn.PublicMethod;var s=this.nameTable[e.id];if(s instanceof sa?("Bpmn"===s.shape.type&&this.bpmnModule&&this.bpmnModule.removeBpmnProcesses(s,this),(s.isLane||s.isPhase||"SwimLane"===s.shape.type)&&(a=s.isLane||s.isPhase?this.nameTable[s.parentId]:this.nameTable[s.id],s.isLane?function(e,t,n){var i=n.shape;if(1===i.lanes.length)e.remove(n);else{var r=n.wrapper.bounds.x,o=n.wrapper.bounds.y,s=void 0,a=void 0,l=void 0,c=void 0,h=n.wrapper.children[0],d=ys(n,t),u=Ul(i.lanes[d]);if(Ds(e,n,t),!(e.diagramActions&Tn.UndoRedo)){var p={type:"LaneCollectionChanged",changeType:"Remove",undoObject:u,redoObject:Ul(t),category:"Internal"};e.addHistoryEntry(p)}if(i.lanes.splice(d,1),"Horizontal"===i.orientation){for(s=h.rows[t.rowIndex],a=0;a<s.cells.length;a++)if((l=s.cells[a])&&l.children.length>0)for(c=0;c<l.children.length;c++)Ts(e,l.children[c]);h.removeRow(t.rowIndex)}else{for(n.width=void 0!==n.width?n.width-h.rows[0].cells[t.columnIndex].actualSize.width:n.width,a=0;a<h.rows.length;a++)if((l=h.rows[a].cells[t.columnIndex])&&l.children.length>0)for(c=0;c<l.children.length;c++)Ts(e,l.children[c]);h.removeColumn(t.columnIndex)}n.width=n.wrapper.width=h.width,n.height=n.wrapper.height=h.height,cs(n),hs(e,n,t.rowIndex),e.drag(n,r-n.wrapper.bounds.x,o-n.wrapper.bounds.y),e.updateDiagramObject(n)}}(this,s,a):s.isPhase&&function(e,t,n){e.protectPropertyChange(!0);var i,r=!1,o=n.shape,s=n.wrapper.children[0],a=function(e,t){var n=t.shape;return"Horizontal"===n.orientation?e.columnIndex:e.rowIndex-(n.header&&n.hasHeader?1:0)}(t,n);if(o.phases.length>1){a===o.phases.length-1&&(r=!0,i=Ul(o.phases[a-1]));var l=Ul(o.phases[a]);if(o.phases.splice(a,1),!(e.diagramActions&Tn.UndoRedo)){var c={type:"PhaseCollectionChanged",changeType:"Remove",undoObject:l,previousPhase:i,redoObject:Ul(t),category:"Internal",isLastPhase:r};e.addHistoryEntry(c)}"Horizontal"===o.orientation?function(e,t,n){var i,r,o,s,a,l,c,h,d,u,p,f;for(c=0;c<t.rows.length;c++)if((i=t.rows[c]).cells.length>1&&(a=(o=i.cells.length-1===n.columnIndex?i.cells[n.columnIndex-1]:i.cells[n.columnIndex+1]).children[0],(r=i.cells[n.columnIndex]).children.length>0))if(p=e.nameTable[(s=r.children[0]).id],0===o.children.length&&r.children.length>0)o.children=r.children,o.columnSpan=r.columnSpan-1;else{for(h=0;h<s.children.length;h++){if((u=s.children[h])instanceof ri){if((f=e.nameTable[u.id]).isLane||(f.parentId=a.id),i.cells.length-1===n.columnIndex&&(f.margin.left=f.wrapper.bounds.x-a.bounds.x,u.margin.left=f.wrapper.bounds.x-a.bounds.x),a.children.push(u),e.nameTable[a.id]){var g=e.nameTable[a.id];g.children||(g.children=[]),g.children.push(u.id)}s.children.splice(h,1),h--,p&&p.children&&-1!==p.children.indexOf(f.id)&&p.children.splice(p.children.indexOf(f.id),1)}if(i.cells.length-1!==n.columnIndex)for(d=0;d<a.children.length;d++){var m=a.children[d];if(m instanceof ri){var y=e.nameTable[m.id];y.margin.left=y.wrapper.bounds.x-s.bounds.x,m.margin.left=y.wrapper.bounds.x-s.bounds.x}}}if(p&&p.isPhase){var v=e.nameTable[a.id];v&&(a.maxWidth=v.wrapper.maxWidth=v.wrapper.maxWidth+=p.wrapper.maxWidth)}Ps(e,p)}t.removeColumn(n.columnIndex),n.columnIndex<t.columnDefinitions().length?(l=t.columnDefinitions()[n.columnIndex].width,t.updateColumnWidth(n.columnIndex,l+=n.wrapper.actualSize.width,!0)):(l=t.columnDefinitions()[n.columnIndex-1].width,t.updateColumnWidth(n.columnIndex-1,l+=n.wrapper.actualSize.width,!0))}(e,s,t):function(e,t,n,i,r){var o,s,a,l,c,h,d,u;o=t.rows[n.rowIndex];var p,f,g=r.shape,m=r.wrapper.bounds.y,y=g.phases.length;for(void 0!==g.header&&g.hasHeader&&(m+=t.rowDefinitions()[0].height),a=i===y?t.rows[n.rowIndex-1]:t.rows[n.rowIndex+1],c=0;c<o.cells.length;c++)if(u=a.cells[c].children[0],(s=o.cells[c]).children.length>0){var v=s.children[0],b=e.nameTable[v.id];if(i<y)for(d=0;d<u.children.length;d++)(p=u.children[d])instanceof ri&&((f=e.nameTable[p.id]).margin.top=f.wrapper.bounds.y-(0===i?m:v.bounds.y),p.margin.top=f.wrapper.bounds.y-(0===i?m:v.bounds.y));for(h=0;h<v.children.length;h++)(p=v.children[h])instanceof ri&&((f=e.nameTable[p.id]).parentId=u.id,i===y&&(f.margin.top=f.wrapper.bounds.y-(0===i?m:u.bounds.y),p.margin.top=f.wrapper.bounds.y-(0===i?m:u.bounds.y)),u.children.push(p),v.children.splice(h,1),h--,b.children&&-1!==b.children.indexOf(f.id)&&b.children.splice(b.children.indexOf(f.id),1));Ps(e,b)}t.removeRow(n.rowIndex),n.rowIndex<t.rowDefinitions().length?(l=t.rowDefinitions()[n.rowIndex].height,t.updateRowHeight(n.rowIndex,l+=n.wrapper.actualSize.height,!0)):(l=t.rowDefinitions()[n.rowIndex-1].height,t.updateRowHeight(n.rowIndex-1,l+=n.wrapper.actualSize.height,!0))}(e,s,t,a,n),ws(e,n),hs(e,n,1),ps(n,e),e.protectPropertyChange(!1),e.updateDiagramObject(n)}}(this,s,a)),-1!==(o=this.nodes.indexOf(s))&&(this.crudDeleteNodes.push(this.nameTable[s.id]),this.nodes.splice(o,1),this.updateNodeEdges(s))):(-1!==(o=this.connectors.indexOf(s))&&(this.crudDeleteNodes.push(this.nameTable[s.id]),this.connectors.splice(o,1)),this.updateEdges(s),this.spliceConnectorEdges(e,!0),this.spliceConnectorEdges(e,!1)),i&&this.historyManager.endGroupAction(),wc(this,s)&&this.unSelect(s),!s.isPhase){if(this.removeObjectsFromLayer(e),this.currentDrawingObject&&(this.currentDrawingObject.wrapper=void 0),delete this.nameTable[e.id],n.length>0&&n[0].id===s.id&&s.parentId){var a,l=this.nameTable[s.parentId];l&&l.isLane&&"SwimLane"===this.nameTable[l.parentId].shape.type&&Ds(this,a=this.nameTable[l.parentId],l,s)}this.removeElements(s),this.updateBridging(),"SVG"!==this.mode&&this.refreshDiagramLayer(),this.diagramActions&Tn.Clear||(this.removeFromAQuad(s),t={element:e,cause:this.diagramActions,state:"Changed",type:"Removal",cancel:!1},"helper"!==e.id&&this.triggerEvent(Ln.collectionChange,t),this.resetTool())}}}else if(n.length>0){this.undoRedoModule&&(this.historyManager.startGroupAction(),i=!0);for(var c=0;c<n.length;c++)if(this.nameTable[n[c].id]){if(n[c]instanceof uo&&this.bpmnModule&&this.bpmnModule.textAnnotationConnectors.indexOf(n[c])>-1)return void this.remove(this.nameTable[n[c].targetID]);this.remove(n[c])}i&&this.historyManager.endGroupAction(),this.clearSelection()}},t.prototype.isStackChild=function(e){var t,n=this.nameTable[e.parentId];if(e&&e.parentId&&n.container&&"Stack"===n.container.type&&"UmlClassifier"!==this.nameTable[e.parentId].shape.type){t=!0;var i={sourceIndex:n.wrapper.children.indexOf(e.wrapper),source:e,target:void 0,targetIndex:void 0};this.diagramActions&Tn.UndoRedo||this.addHistoryEntry({type:"StackChildPositionChanged",redoObject:{sourceIndex:void 0,source:e,target:void 0,targetIndex:void 0},undoObject:i,category:"Internal"})}return t},t.prototype.deleteChild=function(e,t){var n;if(n="string"==typeof e?e:e.id,(t=t?this.nameTable[t.id]:this.nameTable[e.parentId])&&t.children){for(var i=0;i<t.children.length;i++)if(t.children[i]===n){t.children.splice(i,1);for(var r=0;r<t.wrapper.children.length;r++)t.wrapper.children[r].id===n&&t.wrapper.children.splice(r,1)}t.wrapper.measure(new Xt),t.wrapper.arrange(t.wrapper.desiredSize)}},t.prototype.addChild=function(e,t,n){var i,r=this.nameTable[e.id];if(r.children||(r.children=[]),r.children&&("string"==typeof t?this.nameTable[t]&&(i=t):(i=t.id=t.id||zl(),this.add(t)),i&&(!t.umlIndex||-1===t.umlIndex))){var o=this.nameTable[i];o.parentId=r.id,r.container&&"Stack"===r.container.type&&this.updateStackProperty(r,o),n?(r.children.splice(n,0,i),r.wrapper.children.splice(n,0,o.wrapper)):(r.children.push(i),r.wrapper.children.push(o.wrapper)),r.wrapper.measure(new Xt),r.wrapper.arrange(r.wrapper.desiredSize),void 0!==r.container&&(o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY),(!r.parentId||this.nameTable[r.parentId]&&"SwimLane"!==this.nameTable[r.parentId].shape.type)&&this.updateDiagramObject(r)}},t.prototype.clear=function(){this.clearObjects()},t.prototype.clearObjects=function(e){var t=[];t=e||(t=t.concat(this.nodes)).concat(this.connectors),this.diagramActions=this.diagramActions|Tn.Clear;for(var n=0,i=t;n<i.length;n++){var r=i[n];this.nameTable[r.id]&&this.remove(r)}this.diagramActions=this.diagramActions&~Tn.Clear,this.spatialSearch=new Qc(this.nameTable),this.initHistory()},t.prototype.startEditCommad=function(){var e,t=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:void 0;if(t&&t instanceof sa)if(t.isLane&&t.parentId)for(var n=this.nameTable[t.parentId],i=n.shape.lanes,r=t.id.slice(n.id.length),o=r.substring(0,r.length-1),s=0;s<i.length;s++)t.isLane&&o===i[s].id&&(e=this.nameTable[i[s].header.id]);else"SwimLane"===t.shape.type&&t.shape.header&&t.shape.hasHeader&&(e=this.nameTable[t.wrapper.children[0].rows[0].cells[0].children[0].id]);this.startTextEdit(e)},t.prototype.startTextEdit=function(e,t){if(!Po(this)||ko(this)){this.textEditing=!0;var n=this.scroller.transform,i=Lo(this)?n.scale:1,r=void 0,o=void 0,s=void 0,a=void 0,l=void 0;if(e||(e=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:this.selectedItems.connectors[0]),e){e.shape&&"UmlClassifier"===e.shape.type&&(e=this.nameTable[e.children[0]]);var c=!1;if(this.bpmnModule&&(l=this.bpmnModule.getTextAnnotationWrapper(e,t))&&(e=this.nameTable[e.id.split("_textannotation_")[0]]),l?c=!0:("Text"!==e.shape.type&&0===e.annotations.length&&(e.constraints&An.ReadOnly||(this.activeLabel.isGroup=!0,this.startGroupAction(),this.addLabels(e,[{id:zl(),content:""}]))),!t&&("Text"!==e.shape.type&&e.annotations.length>0||"Text"===e.shape.type)&&(t="Text"===e.shape.type?e.wrapper.children[0].id.split("_")[1]:e.annotations[0].id),t&&(l=this.getWrapper(e.wrapper,t))),e&&l&&!(l instanceof Gr)&&(!function(e,t){return"Text"===t.shape.type?t.constraints&An.ReadOnly:t.constraints&(t instanceof uo?Cn.ReadOnly:An.ReadOnly)?l.constraints&xn.InheritReadOnly?1:0:l.constraints&xn.ReadOnly?1:0}(0,e)||c)){var h=l.style,d=void 0;d=90>(d=l.bounds.width<e.wrapper.bounds.width?l.bounds.width:e.wrapper.bounds.width)?90:d;var u=document.getElementById(this.element.id+"_editTextBoxDiv"),p=document.getElementById(this.element.id+"_editBox");r=p?p.value:l.content,u||p||(u=Pl("div",{}),p=Pl("textarea",{}),this.diagramCanvas.appendChild(u),u.appendChild(p),p.appendChild(document.createTextNode(r))),(o=ml(l.style,r,void 0,void 0,d)).isEmpty()&&(o=new Xt("Text"!==e.shape.type?$a(e,l.id.split(e.id+"_")[1]).width||50:e.width>50?50:e.width,l.style.fontSize)),e.parentId&&"UmlClassifier"===this.nameTable[e.parentId].shape.type?(o.width=e.wrapper.bounds.width-20,s=(e.wrapper.bounds.center.x+n.tx)*n.scale-o.width/2*i-2.5,a=(e.wrapper.bounds.center.y+n.ty)*n.scale-o.height/2*i-3,l.style.textAlign="Left"):(o.width=Math.max(o.width,50),s=(l.bounds.center.x+n.tx)*n.scale-o.width/2*i-2.5,a=(l.bounds.center.y+n.ty)*n.scale-o.height/2*i-3),Bl(u,{id:this.element.id+"_editTextBoxDiv",style:"position: absolute;left:"+s+"px;top:"+a+"px;width:"+(o.width+1)*i+"px;height:"+o.height*i+"px; containerName:"+e.id+";"}),Bl(p,{id:this.element.id+"_editBox",style:"width:"+(o.width+1)*i+"px;height:"+o.height*i+"px;resize: none;outline: none;overflow: hidden;;font-family:"+h.fontFamily+";font-size:"+h.fontSize*i+"px;text-align:"+l.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"}),p.style.fontWeight=h.bold?"bold":"",p.style.fontStyle=h.italic?"italic":"",p.style.lineHeight=(1.2*h.fontSize+"px;").toString(),p.style.textDecoration=h.textDecoration?h.textDecoration:"",this.activeLabel.parentId=e.id,this.activeLabel.id=t,l.visible=!1,this.updateDiagramObject(e),this.diagramActions=this.diagramActions|Tn.TextEdit,this.isTriggerEvent||(I.add(p,"input",this.eventHandler.inputChange,this.eventHandler),I.add(p,"focusout",this.focusOutEdit,this),p.select())}}}},t.prototype.updateNodeExpand=function(e,t){for(var n=0;n<e.outEdges.length;n++){var i=this.nameTable[e.outEdges[n]],r=this.nameTable[i.targetID];i.visible=t,t||(this.updateElementVisibility(i.wrapper,i,!1),r.isExpanded=t),this.updateNodeExpand(r,r.isExpanded),r.visible=t,t||this.updateElementVisibility(r.wrapper,r,!1)}},t.prototype.updateConnectorAnnotation=function(e){if(e.annotations.length)for(var t=void 0,n=0,i=e.annotations;n<i.length;n++){var r=i[n];t=this.getWrapper(e.wrapper,r.id),e.updateAnnotation(r,e.intermediatePoints,e.wrapper.bounds,t,this.diagramActions&Tn.Interactions)}e.wrapper.measure(new Xt(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize)},t.prototype.doLayout=function(){var e,t=!1,n=this.isProtectedOnChange;this.protectPropertyChange(!0);var i={x:this.scroller.viewPortWidth,y:this.scroller.viewPortHeight};if(this.organizationalChartModule?(e=this.organizationalChartModule.updateLayout(this.nodes,this.nameTable,this.layout,i,this.dataSourceSettings.id,this.diagramActions),t=!0,this.layoutAnimateModule&&e.rootNode&&!this.diagramActions&&this.updateNodeExpand(e.rootNode,e.rootNode.isExpanded)):this.mindMapChartModule?(this.mindMapChartModule.updateLayout(this.nodes,this.nameTable,this.layout,i,this.dataSourceSettings.id,this.dataSourceSettings.root),t=!0):this.radialTreeModule?(this.radialTreeModule.updateLayout(this.nodes,this.nameTable,this.layout,i),t=!0):this.symmetricalLayoutModule?(this.symmetricalLayoutModule.maxIteration=this.layout.maxIteration,this.symmetricalLayoutModule.springLength=this.layout.springLength,this.symmetricalLayoutModule.springFactor=this.layout.springFactor,this.symmetricalLayoutModule.updateLayout(this.nodes,this.connectors,this.symmetricalLayoutModule,this.nameTable,this.layout,i),t=!0):this.complexHierarchicalTreeModule&&(this.complexHierarchicalTreeModule.doLayout(this.nodes,this.nameTable,this.layout,i),t=!0),t){this.preventUpdate=!0;for(var r={},o=0,s=this.nodes;o<s.length;o++){var a=s[o];if(this.preventNodesUpdate||this.diagramActions&&this.diagramActions&Tn.PreventIconsUpdate||(this.updateIcon(a),this.updateDefaultLayoutIcons(a)),this.preventNodesUpdate=!0,this.nodePropertyChange(a,{},{offsetX:a.offsetX,offsetY:a.offsetY},!0),this.preventNodesUpdate=!1,a.wrapper.measure(new Xt(a.wrapper.width,a.wrapper.height)),a.wrapper.arrange(a.wrapper.desiredSize),this.updateDiagramObject(a,!0),a.inEdges.length>0)for(var l=0;l<a.inEdges.length;l++)r[(p=this.nameTable[a.inEdges[l]]).id]=p;if(a.outEdges.length>0)for(var c=0;c<a.outEdges.length;c++){var h=this.nameTable[a.outEdges[c]];r[h.id]=h}}for(var d=0,u=Object.keys(r);d<u.length;d++){var p;Ya(p=r[u[d]],this.getPoints(p)),"Bpmn"===p.shape.type&&"Default"===p.shape.sequence&&this.commandHandler.updatePathElementOffset(p),p.wrapper.measure(new Xt(void 0,void 0)),p.wrapper.arrange(p.wrapper.desiredSize),this.updateConnectorAnnotation(p),this.updateQuad(p),this.updateDiagramObject(p,!0)}this.preventUpdate=!1,this.updatePage(),this.diagramActions&Tn.Render&&"Canvas"!==this.mode||this.refreshDiagramLayer()}return n||this.protectPropertyChange(n),e},t.prototype.saveDiagram=function(){return e=function(e){for(var t,n,i=[],r=0;r<e.length;r++)if("SwimLane"===(t=e[r]).shape.type){n=t.wrapper.children[0].childTable;for(var o=0,s=Object.keys(n);o<s.length;o++)i=Fa(n[s[o]],i)}return i}(this.nodes),(t=Ul(this,this.getCustomProperty)).selectedItems.nodes=[],t.selectedItems.connectors=[],t.selectedItems.wrapper=null,this.serializationSettings.preventDefaults&&(t=za(t,this)),function(e,n){var i=t.nodes;if(i)for(var r=0;r<i.length;r++)-1!==e.indexOf(i[r].id)&&(i.splice(r,1),r--)}(e),JSON.stringify(t);var e,t},t.prototype.loadDiagram=function(e){return function(e,t){t.clear(),t.protectPropertyChange(!0);for(var n=t.dataSourceSettings.doBinding,i=t.setNodeTemplate,r=t.getDescription,o=t.getCustomProperty,s={},a=0,l=t.commandManager.commands;a<l.length;a++){var c=l[a];s[c.name]={execute:c.execute,canExecute:c.canExecute}}var h,d=t.rulerSettings.horizontalRuler.arrangeTick,u=t.rulerSettings.verticalRuler.arrangeTick,p=t.layout.getLayoutInfo,f=t.layout.getBranch,g=t.getNodeDefaults,m=t.getConnectorDefaults,y=JSON.parse(e);y=function(e){if(e&&(void 0===e.version||e.version<17.1))for(var t=0,n=e.nodes;t<n.length;t++){var i=n[t];if(i&&i.ports.length>0)for(var r=0,o=i.ports;r<o.length;r++){var s=o[r];s&&s.constraints&&s.constraints===_n.None&&(s.constraints=_n.Default)}}return e}(y),t.contextMenuSettings=y.contextMenuSettings||{},t.constraints=y.constraints||En.Default,t.tool=y.tool||In.Default,t.bridgeDirection=y.bridgeDirection||"Top",t.pageSettings=y.pageSettings||{},t.drawingObject=y.drawingObject||void 0,t.tooltip=y.tooltip||{},t.addInfo=y.addInfo||void 0,t.getDescription=r,t.scrollSettings=y.scrollSettings||{},t.commandManager=y.commandManager||{},t.layers=y.layers||[],t.rulerSettings.horizontalRuler.arrangeTick=d,t.rulerSettings.verticalRuler.arrangeTick=u;for(var v=0,b=t.commandManager.commands;v<b.length;v++){var w=b[v];s[w.name]&&(w.execute=s[w.name].execute,w.canExecute=s[w.name].canExecute)}if(t.backgroundColor=y.backgroundColor||"transparent",t.basicElements=y.basicElements||[],t.connectors=y.connectors||[],t.dataSourceSettings=y.dataSourceSettings||{},t.dataSourceSettings.doBinding=n,t.height=y.height||"100%",t.setNodeTemplate=i,t.getConnectorDefaults=m,t.getNodeDefaults=g,t.getCustomProperty=o,t.mode=y.mode||"SVG",y.nodes.length)for(var C=0;C<y.nodes.length;C++)y.nodes[C].shape&&"SwimLane"===y.nodes[C].shape.type&&Es(y.nodes[C],void 0,void 0,void 0,void 0,!0);for(t.nodes=y.nodes||[],t.rulerSettings=y.rulerSettings||{},t.snapSettings=y.snapSettings||{},t.width=y.width||"100%",t.layout=y.layout||{},t.layout.getLayoutInfo=tc(p),t.layout.getBranch=tc(f),t.diagramActions=0,t.isLoading=!0,t.protectPropertyChange(!1),C=0;C<t.views.length;C++)(h=t.views[t.views[C]]).refresh(),h instanceof Xc&&t.element.classList.add("e-diagram");return y.selectedItems&&(y.selectedItems.nodes=[],y.selectedItems.connectors=[]),t.selectedItems=y.selectedItems,y}(e,this)},t.prototype.getDiagramContent=function(e){return this.printandExportModule?this.printandExportModule.getDiagramContent(e):""},t.prototype.exportImage=function(e,t){this.printandExportModule&&this.printandExportModule.exportImages(e,t)},t.prototype.printImage=function(e,t){this.printandExportModule&&(t.printOptions=!0,this.printandExportModule.exportImages(e,t))},t.prototype.setStackLimit=function(e){this.undoRedoModule&&e&&(this.historyManager.stackLimit=e,this.undoRedoModule.applyLimit(this.historyManager.currentEntry,e,this,!0))},t.prototype.clearHistory=function(){this.undoRedoModule&&this.undoRedoModule.clearHistory(this)},t.prototype.getDiagramBounds=function(){if(this.printandExportModule){var e=this.printandExportModule.getDiagramBounds("",{});return e.width=e.width>this.scrollSettings.viewPortWidth?e.width+(e.x>0?e.x:0):this.scrollSettings.viewPortWidth,e.height=e.height>this.scrollSettings.viewPortHeight?e.height+(e.y>0?e.y:0):this.scrollSettings.viewPortHeight,e.x=e.x>0?0:e.x,e.y=e.y>0?0:e.y,e}return new an},t.prototype.exportDiagram=function(e){return this.printandExportModule?this.printandExportModule.exportDiagram(e):""},t.prototype.print=function(e){this.printandExportModule&&this.printandExportModule.print(e)},t.prototype.addPorts=function(e,t){var n;this.protectPropertyChange(!0),t.length>1&&this.startGroupAction();for(var i=0;i<t.length;i++)if(n=new ai(e,"ports",t[i],!0),e.ports.push(n),e.children?e.initPorts(this.getDescription,e.wrapper.children[e.wrapper.children.length-1]):e.wrapper.children.push(e.initPortWrapper(e.ports[e.ports.length-1])),!(this.diagramActions&Tn.UndoRedo||this.diagramActions&Tn.Group)){var r={type:"PortCollectionChanged",changeType:"Insert",undoObject:Ul(n),redoObject:Ul(e),category:"Internal"};this.addHistoryEntry(r)}t.length>1&&this.endGroupAction(),e.wrapper.measure(new Xt(e.width,e.height)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateDiagramObject(e),this.protectPropertyChange(!1)},t.prototype.addConstraints=function(e,t){return e|t},t.prototype.removeConstraints=function(e,t){return e&~t},t.prototype.addLabels=function(e,t){this.protectPropertyChange(!0);var n,i=e.wrapper;t.length>1&&this.startGroupAction();for(var r=0;r<t.length;r++){if(e instanceof sa)if(n=new ni(e,"annotations",t[r],!0),e.annotations.push(n),e.children)for(var o=e,s=0;s<o.wrapper.children.length;s++)o.wrapper.children[s].id===o.id+"group_container"&&o.wrapper.children[s].children.push(e.initAnnotationWrapper(e.annotations[e.annotations.length-1],this.element.id));else i.children.push(e.initAnnotationWrapper(e.annotations[e.annotations.length-1],this.element.id));else if(e instanceof uo){n=new ii(e,"annotations",t[r],!0),e.annotations.push(n);var a=i.children[0],l=new an(a.offsetX-a.width/2,a.offsetY-a.height/2,a.width,a.height);i.children.push(e.getAnnotationElement(e.annotations[e.annotations.length-1],e.intermediatePoints,l,this.getDescription,this.element.id))}if(!(this.diagramActions&Tn.UndoRedo||this.diagramActions&Tn.Group)){var c={type:"LabelCollectionChanged",changeType:"Insert",undoObject:Ul(n),redoObject:Ul(e),category:"Internal"};this.addHistoryEntry(c)}}t.length>1&&this.endGroupAction(),e.wrapper.measure(new Xt(i.width,i.height)),e.wrapper.arrange(i.desiredSize),this.updateDiagramObject(e),this.protectPropertyChange(!1)},t.prototype.addLanes=function(e,t,n){for(var i=0;i<t.length;i++)Cs(this,e,t[i],n),void 0!==n&&(n+=1)},t.prototype.addPhases=function(e,t){for(var n=0;n<t.length;n++)As(this,e,t[n])},t.prototype.removelabelExtension=function(e,t,n,i){for(var r=0;r<i.children.length;r++){var o=i.children[r];if((o instanceof Jn||o instanceof Gr)&&o.id.match("_"+t[n].id+"$")){for(var s=0;s<e.annotations.length;s++)if(o.id.match("_"+e.annotations[s].id+"$")){if(!(this.diagramActions&Tn.UndoRedo)){var a={type:"LabelCollectionChanged",changeType:"Remove",undoObject:Ul(e.annotations[s]),redoObject:Ul(e),category:"Internal"};this.addHistoryEntry(a)}e.annotations.splice(s,1)}if(i.children.splice(r,1),"SVG"===this.mode){var l=bl(o.id,this.element.id);if(l){var c=bl(o.id,this.element.id);c.parentNode.removeChild(c)}bl(o.id+"_text",this.element.id)&&(l=bl(o.id+"_text",this.element.id)).parentNode.removeChild(l);var h=bl(o.id+"_html_element",this.element.id);h&&h.parentNode.removeChild(h)}else this.refreshCanvasLayers()}}},t.prototype.removeLabels=function(e,t){t.length>1&&this.startGroupAction();for(var n=t.length-1;n>=0;n--)if(e.children&&e.children.length>0)for(var i=0;i<e.wrapper.children.length;i++)this.removelabelExtension(e,t,n,e.wrapper.children[i]);else this.removelabelExtension(e,t,n,e.wrapper);t.length>1&&this.endGroupAction()},t.prototype.removePortsExtenion=function(e,t,n,i){for(var r=0;r<i.children.length;r++){var o=i.children[r];if(o instanceof Zn&&o.id.match("_"+t[n].id+"$")){for(var s=0;s<e.ports.length;s++)if(o.id.match("_"+e.ports[s].id+"$")){if(!(this.diagramActions&Tn.UndoRedo)){var a={type:"PortCollectionChanged",changeType:"Remove",undoObject:Ul(e.ports[s]),redoObject:Ul(e),category:"Internal"};this.addHistoryEntry(a)}e.ports.splice(s,1)}if(i.children.splice(r,1),"SVG"===this.mode){var l=bl(o.id,this.element.id);l.parentNode.removeChild(l)}else this.refreshCanvasLayers()}}},t.prototype.removePorts=function(e,t){t.length>1&&this.startGroupAction();for(var n=t.length-1;n>=0;n--)if(e.children&&e.children.length>0)for(var i=0;i<e.wrapper.children.length;i++)this.removePortsExtenion(e,t,n,e.wrapper.children[i]);else this.removePortsExtenion(e,t,n,e.wrapper);t.length>1&&this.endGroupAction()},t.prototype.getSizeValue=function(e,t){var n;return n=e.toString().indexOf("px")>0?e.toString():e.toString().indexOf("%")>0?void 0!==t?"100%":e.toString():e.toString()+"px",t&&(ma(this),n="calc("+n+" - "+t+"px)"),n},t.prototype.renderRulers=function(){var e,t;this.rulerSettings.showRulers?(e=ma(this),t=Pl("div",{id:this.element.id+"_overlapRuler",style:"height:"+e.height+"px;width:"+e.width+"px;position:absolute;left:0;top:0",class:"e-ruler-overlap"}),this.element.insertBefore(t,this.element.firstChild),pa(this,!0),pa(this,!1)):ga(this)},t.prototype.intOffPageBackground=function(){var e=new Xt;e=ma(this);var t=document.getElementById(this.element.id+"content"),n=this.getSizeValue(this.width,e.width),i=this.getSizeValue(this.height,e.height),r=this.rulerSettings.showRulers?"width:"+n+"; height:"+i+";top:"+e.height+"px;left:"+e.width+"px;overflow: scroll;position:absolute;overflow:auto;":"width:"+n+"; height:"+i+";position:absolute; left:0px;  top:0px;overflow: auto;",o={id:this.element.id+"content",tabindex:"0",style:r};t?(this.diagramCanvas=t,this.diagramCanvas.setAttribute("style",r)):(this.diagramCanvas=Pl("div",o),this.element.appendChild(this.diagramCanvas)),this.diagramCanvas.style.background=this.backgroundColor},t.prototype.initDiagram=function(){this.intOffPageBackground(),Bl(this.element,{style:"width:"+this.getSizeValue(this.width)+"; height:"+this.getSizeValue(this.height)+";position:relative;overflow:hidden;"})},t.prototype.renderBackgroundLayer=function(e,t){var n=this.createSvg(this.element.id+"_backgroundLayer_svg",e.width,e.height);n.setAttribute("style",t);var i=Tl("g",{id:this.element.id+"_backgroundImageLayer",class:"e-background-image-layer"});n.appendChild(i);var r=Tl("g",{id:this.element.id+"_backgroundLayer",class:"e-background-layer"});n.appendChild(r),this.diagramCanvas.appendChild(n)},t.prototype.renderGridLayer=function(e,t){var n=this.createSvg(this.element.id+"_gridline_svg",e.width,e.height);n.setAttribute("class","e-grid-layer");var i=Tl("g",{id:this.element.id+"_gridline",width:"100%",height:"100%"}),r=Tl("rect",{id:this.element.id+"_grid_rect",x:"0",y:"0",width:"100%",height:"100%",fill:"url(#"+this.element.id+"_pattern)"});i.appendChild(r),n.appendChild(i),this.diagramCanvas.appendChild(n),Nl(n,{style:t})},t.prototype.renderDiagramLayer=function(e,t){if(this.diagramLayerDiv=Pl("div",{id:this.element.id+"_diagramLayer_div",style:"width:"+e.width+"px; height:"+e.height+"px;"+t}),"SVG"===this.mode){var n=this.createSvg(this.element.id+"_diagramLayer_svg",e.width,e.height);n.setAttribute("style"," pointer-events: none; "),n.setAttribute("class","e-diagram-layer");var i=Tl("g",{id:this.element.id+"_diagramLayer"}),r=Tl("g",{});this.diagramLayer=i,i.setAttribute("style","pointer-events: all;"),r.appendChild(i),n.appendChild(r),this.diagramLayerDiv.appendChild(n)}else this.diagramLayer=nc.createCanvas(this.element.id+"_diagram",e.width,e.height),this.diagramLayer.setAttribute("style","position:absolute;left:0px;top:0px;"),this.diagramLayerDiv.appendChild(this.diagramLayer);this.diagramCanvas.appendChild(this.diagramLayerDiv)},t.prototype.initLayers=function(){var e="position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",t=document.getElementById(this.element.id).getBoundingClientRect(),n=function(){var e=Pl("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(e);var t=e.getBoundingClientRect().width;e.style.overflow="scroll";var n=Pl("div",{style:"width:100%"});e.appendChild(n);var i=n.getBoundingClientRect().width;return e.parentNode.removeChild(e),t-i}();this.scroller.scrollerWidth=n,this.scroller.setViewPortSize(t.width,t.height),this.renderRulers(),Fl(),this.renderBackgroundLayer(t,e),this.renderGridLayer(t,e),this.renderDiagramLayer(t,e),this.renderHTMLLayer(t,e),this.renderPortsExpandLayer(t,e),this.renderNativeLayer(t,e),this.renderAdornerLayer(t,e)},t.prototype.renderAdornerLayer=function(e,t){var n=Pl("div",{id:this.element.id+"_diagramAdornerLayer",style:"width:"+e.width+"px;height:"+e.height+"px;"+t}),i=this.createSvg(this.element.id+"_diagramAdorner_svg",e.width,e.height);i.setAttribute("class","e-adorner-layer"),i.setAttribute("style","pointer-events:none;"),this.adornerLayer=Tl("g",{id:this.element.id+"_diagramAdorner"}),this.adornerLayer.setAttribute("style"," pointer-events: all; "),i.appendChild(this.adornerLayer),n.appendChild(i),this.diagramCanvas.appendChild(n);var r=Tl("g",{id:this.element.id+"_SelectorElement"});this.adornerLayer.appendChild(r),Nl(i,{style:"pointer-events:none;"})},t.prototype.renderPortsExpandLayer=function(e,t){var n=this.createSvg(this.element.id+"_diagramPorts_svg",e.width,e.height);n.setAttribute("class","e-ports-expand-layer");var i=Tl("g",{id:this.element.id+"_diagramPorts",class:"e-ports-layer",style:"pointer-events: all;"});n.appendChild(i);var r=Tl("g",{id:this.element.id+"_diagramExpander",class:"e-expand-layer",style:"pointer-events: all;"});n.appendChild(r),this.diagramCanvas.appendChild(n),Nl(n,{style:t})},t.prototype.renderHTMLLayer=function(e,t){this.htmlLayer=Pl("div",{id:this.element.id+"_htmlLayer",style:"width:"+e.width+"px; height:"+e.height+"px;position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",class:"e-html-layer"});var n=Pl("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;pointer-events:all;"});this.htmlLayer.appendChild(n),this.diagramCanvas.appendChild(this.htmlLayer)},t.prototype.renderNativeLayer=function(e,t){var n=this.createSvg(this.element.id+"_nativeLayer_svg",e.width,e.height),i=Tl("g",{id:this.element.id+"_nativeLayer",style:"pointer-events:all;"});n.appendChild(i),this.diagramLayerDiv.appendChild(n),Nl(n,{class:"e-native-layer",style:t})},t.prototype.createSvg=function(e,t,n){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");return Nl(i,{id:e,width:t,height:n}),i},t.prototype.initObjects=function(e){this.isLoading||this.initData(),this.initLayerObjects(),this.updateBridging(e)},t.prototype.initLayerObjects=function(){for(var e=this.layers.length>1,t=[],n={},i={},r=[],o=0,s=this.nodes;o<s.length;o++)(C=s[o]).id=C.id||zl(),this.addToLayer(C,e),n[C.id]=C;for(var a=0,l=this.connectors;a<l.length;a++)(C=l[a]).id=C.id||zl(),this.addToLayer(C,e),n[C.id]=C;for(var c=0,h=this.layers;c<h.length;c++){for(var d=0,u=(x=h[c]).objects;d<u.length;d++)if(n[C=u[d]])if(n[C]instanceof uo)if((O=n[C]).sourceID&&O.targetID){var p=n[O.sourceID],f=n[O.targetID];p&&p.wrapper&&f&&f.wrapper?this.initConnectors(n[C],x):t.push(n[C])}else this.initConnectors(n[C],x);else n[C].children?r.push(C):n[C].shape instanceof Zs&&n[C].shape.activity.subProcess.processes&&n[C].shape.activity.subProcess.processes.length>0?i[n[C].id]=C:this.initNodes(n[C],x);if(this.bpmnModule)for(var g=0,m=this.bpmnModule.textAnnotationConnectors;g<m.length;g++)this.initConnectors(C=m[g],x,!1)}for(var y=0,v=Object.keys(i);y<v.length;y++)this.initObject(n[C=v[y]]),this.bpmnModule.updateDocks(n[C],this);for(var b=0,w=r;b<w.length;b++){var C,x=this.commandHandler.getObjectLayer(C=w[b]);this.initNodes(n[C],x)}for(var A=0,S=t;A<S.length;A++){var O;x=this.commandHandler.getObjectLayer((O=S[A]).id),this.initConnectors(O,x)}},t.prototype.addToLayer=function(e,t){var n;t&&(n=this.commandHandler.getObjectLayer(e.id)),t&&n||-1===this.activeLayer.objects.indexOf(e.id)&&this.activeLayer.objects.push(e.id),this.setZIndex(n||this.activeLayer,e)},t.prototype.updateLayer=function(e){for(var t=0,n=Object.keys(e.layers);t<n.length;t++){for(var i=n[t],r=0,o=this.layers[i].objects;r<o.length;r++){var s=this.nameTable[o[r]];void 0!==e.layers[i].visible?this.updateElementVisibility(s.wrapper,s,e.layers[i].visible):!0===e.layers[i].lock&&this.unSelect(s)}void 0!==e.layers[i].lock&&(this.layers[i].lock=e.layers[i].lock)}"SVG"!==this.mode&&this.refreshDiagramLayer()},t.prototype.updateScrollSettings=function(e){var t=-this.scroller.horizontalOffset+e.scrollSettings.horizontalOffset||0,n=this.scroller.verticalOffset-e.scrollSettings.verticalOffset||0,i={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom};0===t&&0===n||this.pan(t,n),this.triggerEvent(Ln.scrollChange,{oldValue:i,newValue:{VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom},source:this}),"Canvas"===this.mode&&this.constraints&En.Virtualization&&this.refreshDiagramLayer()},t.prototype.initData=function(){!this.dataBindingModule||this.realActions&jn.PreventDataInit||(this.dataSourceSettings.dataManager&&this.dataSourceSettings.connectionDataSource.dataManager?(this.nodes=this.generateData(this.dataSourceSettings.dataManager,!0),this.connectors=this.generateData(this.dataSourceSettings.connectionDataSource.dataManager,!1)):this.dataSourceSettings.dataManager&&this.dataSourceSettings.dataManager.dataSource&&void 0!==this.dataSourceSettings.dataManager.dataSource.url?this.dataBindingModule.initSource(this.dataSourceSettings,this):this.dataBindingModule.initData(this.dataSourceSettings,this))},t.prototype.generateData=function(e,t){var n,i=[];for(n=0;n<e.length;n++){var r=this.makeData(e[n],!!t);!r||!r.id||Oa(i,r.id)&&Oa(i,r.id)||i.push(r)}return i},t.prototype.makeData=function(e,t){var n,i=t?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource,r={};if(r.id=e[i.id]?e[i.id]:zl(),i.sourceID&&(r.sourceID=e[i.sourceID]),i.targetID&&(r.targetID=e[i.targetID]),e[i.sourcePointX]&&e[i.sourcePointY]&&(r.sourcePoint={x:Number(e[i.sourcePointX]),y:Number(e[i.sourcePointY])}),e[i.targetPointX]&&e[i.targetPointY]&&(r.targetPoint={x:Number(e[i.targetPointX]),y:Number(e[i.targetPointY])}),i.crudAction.customFields&&i.crudAction.customFields.length>0)for(n=0;n<i.crudAction.customFields.length;n++)r[i.crudAction.customFields[n]]=e[i.crudAction.customFields[n]];return r},t.prototype.initNodes=function(e,t){this.preventUpdate=!0,this.initObject(e,t),this.preventUpdate=!1},t.prototype.initConnectors=function(e,t,n){this.preventUpdate=!0,this.initObject(e,t,n),this.updateEdges(e),this.preventUpdate=!1},t.prototype.setZIndex=function(e,t){var n=e;if(-1===t.zIndex){for(;n.zIndexTable[n.objectZIndex+1];)e.objectZIndex++;t.zIndex=++n.objectZIndex}else{var i=t.zIndex;if(n.zIndexTable[i])for(var r=Object.keys(n.zIndexTable).length,o=0;o<r;o++)if(o===i){for(var s=r;s>i;s--)n.zIndexTable[s]=n.zIndexTable[s-1],this.nameTable[n.zIndexTable[s]]&&(this.nameTable[n.zIndexTable[s]].zIndex=s);n.zIndexTable[o]=t.id}}},t.prototype.initializeDiagramLayers=function(){for(var e=0;e<this.layers.length;e++)if(-1!==this.layers[e].zIndex){var t=this.layers[e];this.layers[e]=this.layers[this.layers[e].zIndex],this.layers[t.zIndex]=t}for(var n=0,i=this.layers;n<i.length;n++){var r=i[n];r.zIndex=-1!==r.zIndex?r.zIndex:this.layers.indexOf(r),this.layerZIndexTable[r.zIndex]=r.id}for(e=0;e<this.layers.length;e++)for(var o=e+1;o<this.layers.length;o++)this.layers[e].zIndex>this.layers[o].zIndex&&(t=this.layers[e],this.layers[e]=this.layers[o],this.layers[o]=t);0===this.layers.length&&this.commandHandler.addLayer({id:"default_layer",visible:!0,lock:!1,objects:[],zIndex:0,objectZIndex:-1,zIndexTable:{}}),this.setActiveLayer(this.layers[this.layers.length-1].id)},t.prototype.resetTool=function(){this.eventHandler.resetTool()},t.prototype.initObjectExtend=function(e,t,n){if(n){var i=this.commandHandler.checkBoundaryConstraints(void 0,void 0,e.wrapper.bounds);if(t.zIndexTable[e.zIndex]=e.id,!i){for(var r=e instanceof sa?this.nodes:this.connectors,o=0;o<=r.length;o++)r[o]&&e.id===r[o].id&&r.splice(o,1);delete t.zIndexTable[e.zIndex]}}},t.prototype.initObject=function(e,t,n,i){if(void 0===n&&(n=!0),void 0!==e){if(n&&(t||(this.addToLayer(e,!1),t=this.activeLayer),(e instanceof sa||e instanceof uo)&&this.setZIndex(t,e)),e instanceof sa)n&&("helper"!==e.id&&(r=tc(this.getNodeDefaults))&&(o=r(e,this))&&o!==e&&Gl(o,e),this.initNode(e,this.element.id));else if(e instanceof uo){var r,o;(r=tc(this.getConnectorDefaults))&&((o=r(e,this))&&o!==e&&Gl(o,e),e.segments.length&&e.type!==e.segments[0].type&&(e.segments=[]));var s=this.nameTable[e.sourceID],a=this.nameTable[e.targetID],l=this.getConnectedPort(s,e),c=this.getConnectedPort(a,e),h=this.findInOutConnectPorts(s,!1),d=this.findInOutConnectPorts(a,!0);if((void 0!==s&&So(s)||""!==e.sourcePortID&&Oo(h))&&(e.sourceWrapper=this.getEndNodeWrapper(s,e,!0),e.sourcePortID&&(!l||!l.constraints||l.constraints&_n.None||(e.sourcePortWrapper=this.getWrapper(s.wrapper,e.sourcePortID)))),(void 0!==a&&xo(a)||""!==e.targetPortID&&Ao(d))&&(e.targetWrapper=this.getEndNodeWrapper(a,e,!1),e.targetPortID&&(!c||!c.constraints||c.constraints&_n.None||(e.targetPortWrapper=this.getWrapper(a.wrapper,e.targetPortID)))),!n){var u=e.getConnectorPoints(e.type);Ya(e,u)}n&&e.init(this);for(var p=0;p<e.wrapper.children.length;p++)this.pathTable[e.wrapper.children[p].data]&&(e.wrapper.children[p].absoluteBounds=this.pathTable[e.wrapper.children[p].data].absoluteBounds);e.wrapper.measure(new Xt(void 0,void 0)),e.wrapper.arrange(e.wrapper.desiredSize);for(var f=0;f<e.wrapper.children.length;f++)this.pathTable[e.wrapper.children[f].data]={},this.pathTable[e.wrapper.children[f].data].absoluteBounds=e.wrapper.children[f].absoluteBounds}if(e instanceof sa&&e.children&&e.container)for(var g=0;g<e.children.length;g++)this.nameTable[e.children[g]].offsetX=this.nameTable[e.children[g]].wrapper.offsetX,this.nameTable[e.children[g]].offsetY=this.nameTable[e.children[g]].wrapper.offsetY;if(this.bpmnModule&&e instanceof sa&&"Bpmn"===e.shape.type&&e.shape.annotations.length>0&&this.bpmnModule.updateQuad(e,this),this.initObjectExtend(e,t,n),this.nameTable[e.id]=e,e instanceof sa&&e.children){for(i||e.container||this.updateGroupOffset(e,!0),this.groupTable[e.id]=e.children,g=0;g<e.children.length;g++){var m=this.nameTable[e.children[g]];m&&(m.parentId=e.id)}this.isLoading||!e.rotateAngle||e.container||this.commandHandler.rotateObjects(e,[e],e.rotateAngle,{x:e.offsetX,y:e.offsetY},!1)}this.updateQuad(e)}!1===e.visible&&this.updateElementVisibility(e.wrapper,e,!1)},t.prototype.getConnectedPort=function(e,t){if(e&&e.ports)for(var n=0,i=e.ports;n<i.length;n++){var r=i[n];if(r.id===t.sourcePortID)return r;if(r.id===t.targetPortID)return r}return null},t.prototype.scaleObject=function(e,t,n){var i=n?e.wrapper.actualSize.width:e.wrapper.actualSize.height,r=n?1+(t-i)/i:1,o=n?1:1+(t-i)/i;this.realActions|=jn.PreventDrag,this.scale(e,r,o,{x:.5,y:.5}),this.realActions&=~jn.PreventDrag},t.prototype.updateDefaultLayoutIcons=function(e){"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type&&"ComplexHierarchicalTree"!==this.layout.type||(this.updateDefaultLayoutIcon(e,e.expandIcon),this.updateDefaultLayoutIcon(e,e.collapseIcon))},t.prototype.updateDefaultLayoutIcon=function(e,t){if("None"!==t.shape&&"Auto"===t.horizontalAlignment&&"Auto"===t.verticalAlignment&&.5===t.offset.x&&1===t.offset.y){var n=this.getWrapper(e.wrapper,"icon_content"),i=void 0,r=void 0;"TopToBottom"===this.layout.orientation||"BottomToTop"===this.layout.orientation?(i=.5,r="TopToBottom"===this.layout.orientation?1:0):"RightToLeft"!==this.layout.orientation&&"LeftToRight"!==this.layout.orientation||(i="LeftToRight"===this.layout.orientation?1:0,r=.5),n.setOffsetWithRespectToBounds(i,r,"Fraction"),n.horizontalAlignment="Center",n.verticalAlignment="Center",e.wrapper.measure(new Xt(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize)}},t.prototype.updateGroupOffset=function(e,t){if(e.children&&e.children.length>0&&!e.container||e.processId){var n=this.nameTable[e.id];if(!(this.realActions&jn.PreventScale||this.realActions&jn.PreventDrag)){if(!n.offsetX||this.diagramActions&Tn.ToolAction||this.diagramActions&Tn.PublicMethod)n.offsetX=e.wrapper.offsetX;else{this.realActions|=jn.PreventScale;var i=n.offsetX-e.wrapper.offsetX;n.offsetX=e.wrapper.offsetX,"None"===e.flip&&this.drag(n,i,0),this.realActions&=~jn.PreventScale}if(!n.offsetY||this.diagramActions&Tn.ToolAction)n.offsetY=e.wrapper.offsetY;else{this.realActions|=jn.PreventScale;var r=n.offsetY-e.wrapper.offsetY;n.offsetY=e.wrapper.offsetY,"None"===e.flip&&this.drag(n,0,r),this.realActions&=~jn.PreventScale}this.diagramActions&&(n.width=e.wrapper.actualSize.width,n.height=e.wrapper.actualSize.height)}}t&&e.children&&e.children.length>0&&(void 0!==this.nameTable[e.id].width?this.scaleObject(e,this.nameTable[e.id].width,!0):this.nameTable[e.id].width=e.wrapper.actualSize.width,void 0!==this.nameTable[e.id].height?this.scaleObject(e,this.nameTable[e.id].height,!1):this.nameTable[e.id].height=e.wrapper.actualSize.height)},t.prototype.initNode=function(e,t,n){var i,r,o=e.initContainer(),s=new ri;if(o.children||(o.children=[]),e.children){if(o.measureChildren=!1,e.container&&"Grid"===e.container.type)for(var a=0;a<e.children.length;a++){var l=new ri,c=this.nameTable[e.children[a]];l.children=[],l.children.push(c.wrapper),c&&o.addObject(c.wrapper,c.rowIndex,c.columnIndex,c.rowSpan,c.columnSpan)}else for(a=0;a<e.children.length;a++)this.nameTable[e.children[a]]&&(this.updateStackProperty(e,c=this.nameTable[e.children[a]],a),o.children.push(c.wrapper),o.elementActions=o.elementActions|Sn.ElementIsGroup,c.wrapper.flip="None"===c.wrapper.flip?e.wrapper.flip:c.wrapper.flip);s.id=e.id+"group_container",s.style.fill="none",s.style.strokeColor="none",s.horizontalAlignment="Stretch",s.verticalAlignment="Stretch",o.style=e.style,s.children=[],s.preventContainer=!0,e.container&&(s.relativeMode="Object"),e.container&&"Grid"===e.container.type||o.children.push(s)}else{var h=tc(this.setNodeTemplate);h&&(i=h(e,this)),i||(i=e.init(this)),o.children.push(i)}r=tc(this.getDescription),(e.children?o:i).description=r||(e.annotations.length?e.annotations[0].content:e.id);var d=e.children?s:o;e.initAnnotations(this.getDescription,d,this.element.id,!!Do(this)),e.initPorts(this.getDescription,d),e.initIcons(this.getDescription,this.layout,d,t),"SwimLane"===e.shape.type&&e.wrapper&&e.wrapper.children.length>0&&e.wrapper.children[0]instanceof Vo?(cs(e),function(e,t){var n,i,r,o,s,a,l,c,h=t.wrapper.children[0],d=t.shape,u=d.padding,p=d.lanes,f=h.bounds.y,g=d.phaseSize>0?d.phases.length:0,m="Horizontal"===d.orientation,y=m?d.phases.length||1:p.length+1,v=m?(d.header&&d.hasHeader?1:0)+(d.phases.length>0?1:0)+d.lanes.length:(d.header&&d.hasHeader?1:0)+d.phases.length;if(0===g&&!m&&d.lanes.length&&(v+=1),m?(n=(d.header&&d.hasHeader?1:0)+(g>0?1:0),i=0):(n=d.header&&d.hasHeader?1:0,i=g>0?1:0),p.length>0)for(f+=d.header&&d.hasHeader?d.header.height:0,a=0;a<p.length;a++){for(l=0;l<p[a].children.length;l++)if((r=p[a].children[l]).offsetX=p[a].width,r.offsetY=p[a].height,e.initObject(r),e.nodes.push(r),o=r.wrapper,m){for(c=i;c<y;c++)if(o.margin.left<(s=h.rows[n].cells[c]).bounds.right-h.bounds.x){r.parentId=s.children[0].id,c>i?o.margin.left=o.margin.left-(s.bounds.left-h.bounds.left):s.children[0].children[1].actualSize.width+u>=o.margin.left&&(o.margin.left=s.children[0].children[1].actualSize.width+u),o.margin.left<u&&(o.margin.left=u),o.margin.top<u&&(o.margin.top=u),ds(o,r,e);break}}else for(var b=n;b<v;b++)if(o.margin.top<(s=h.rows[b].cells[i]).bounds.bottom-f){r.parentId=s.children[0].id,b>n?o.margin.top=o.margin.top-(s.bounds.top-f):s.children[0].children[1].actualSize.height+u>=o.margin.top&&(o.margin.top=s.children[0].children[1].actualSize.height+u),o.margin.left<u&&(o.margin.left=u),o.margin.top<u&&(o.margin.top=u),ds(o,r,e);break}m?n++:i++}h.measure(new Xt(t.width,t.height)),h.arrange(h.desiredSize),function(e,t){var n,i,r,o,s,a,l=e.columnDefinitions(),c=e.rowDefinitions(),h=vs(t);"Vertical"===t.shape.orientation&&0===h&&(h=t.shape.header&&t.shape.hasHeader?1:0);var d=t.shape.padding;for(n=0;n<l.length;n++)e.updateColumnWidth(n,l[n].width,!0,d);for(n=h;n<c.length;n++)e.updateRowHeight(n,c[n].height,!0,d);for(i=0;i<c.length;i++)for(a=e.rows[i],n=0;n<l.length;n++)if((o=a.cells[n]).children&&o.children.length>0)for(r=0;r<o.children.length;r++)(s=o.children[r]).maxWidth&&(s.maxWidth=o.actualSize.width),s.maxHeight&&(s.maxHeight=o.actualSize.height)}(h,t),t.width=t.wrapper.width=h.width,t.height=t.wrapper.height=h.height,ws(e,t),t.wrapper.measure(new Xt(t.width,t.height)),t.wrapper.arrange(h.desiredSize),function(e){if("SwimLane"===t.shape.type)for(var n=t.shape.lanes,i=void 0,r=void 0,o=0;o<n.length;o++){i=n[o];for(var s=0;s<i.children.length;s++)(r=i.children[s]).offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY}}(),ps(t,e),us(t)}(this,e)):(o.measure(new Xt(e.width,e.height)),o instanceof Vo?o.arrange(o.desiredSize,!0):o.arrange(o.desiredSize)),"None"!==e.wrapper.flip&&e.wrapper.elementActions&Sn.ElementIsGroup&&hl(e.wrapper,e.wrapper.offsetX,e.wrapper.offsetY,this,e.wrapper.flip),e instanceof sa&&e.container&&(e.width<o.outerBounds.width||e.height<o.outerBounds.height)&&o.bounds.x<=o.outerBounds.x&&o.bounds.y<=o.outerBounds.y&&(e.width=o.width=o.outerBounds.width,e.height=o.height=o.outerBounds.height,o.measure(new Xt(e.width,e.height)),o.arrange(o.desiredSize)),e.container&&"Grid"===e.container.type&&e.children&&e.children.length>0&&this.updateChildPosition(e)},t.prototype.updateChildPosition=function(e){for(var t=0;t<e.children.length;t++){var n=this.getObject(e.children[t]);n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY,n.children&&n.children.length>0&&this.updateChildPosition(n)}},t.prototype.canExecute=function(){return!0},t.prototype.updateStackProperty=function(e,t,n){e.container&&"Stack"===e.container.type&&(t.width||(t.wrapper.horizontalAlignment="Stretch",t.horizontalAlignment="Stretch"),t.height||(t.verticalAlignment="Stretch",t.wrapper.verticalAlignment="Stretch"),n&&"UmlClassifier"===e.shape.type&&(t.umlIndex=n))},t.prototype.initViews=function(){this.isLoading||(this.views.push(this.element.id),this.views[this.element.id]=this)},t.prototype.initCommands=function(){var e=this.commandManager.commands,t={copy:{execute:this.copyCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Pn.C,keyModifiers:kn.Control}},paste:{execute:this.pasteCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Pn.V,keyModifiers:kn.Control}},cut:{execute:this.cutCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Pn.X,keyModifiers:kn.Control}},delete:{execute:this.removeCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Pn.Delete}},selectAll:{execute:this.selectAll.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Pn.A,keyModifiers:kn.Control}},undo:{execute:this.undo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Pn.Z,keyModifiers:kn.Control}},redo:{execute:this.redo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Pn.Y,keyModifiers:kn.Control}},nudgeUp:{execute:this.nudgeCommand.bind(this,"Up"),canExecute:this.canExecute.bind(this),gesture:{key:Pn.Up},parameter:"up"},nudgeRight:{execute:this.nudgeCommand.bind(this,"Right"),canExecute:this.canExecute.bind(this),gesture:{key:Pn.Right},parameter:"right"},nudgeDown:{execute:this.nudgeCommand.bind(this,"Down"),canExecute:this.canExecute.bind(this),gesture:{key:Pn.Down},parameter:"down"},nudgeLeft:{execute:this.nudgeCommand.bind(this,"Left"),canExecute:this.canExecute.bind(this),gesture:{key:Pn.Left},parameter:"left"},startEdit:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Pn.F2}},endEdit:{execute:this.endEditCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Pn.Escape}},focusToNextItem:{canExecute:this.canExecute.bind(this),gesture:{key:Pn.Tab}},focusToPreviousItem:{canExecute:this.canExecute.bind(this),gesture:{key:Pn.Tab,keyModifiers:kn.Control}},selectFocusedItem:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Pn.Enter}}};this.initCommandManager(e,t)},t.prototype.overrideCommands=function(e,t){for(var n,i=0,r=Object.keys(t);i<r.length;i++){var o=r[i];if(e.gesture.key===(n=t[o]).gesture.key&&e.gesture.keyModifiers===n.gesture.keyModifiers){delete t[o];break}}},t.prototype.initCommandManager=function(e,t){var n=0;if(e)for(n=0;n<e.length;n++)t[e[n].name]&&e[n]?(e[n].canExecute&&(t[e[n].name].canExecute=e[n].canExecute),e[n].execute&&(t[e[n].name].execute=e[n].execute),(e[n].gesture.key||e[n].gesture.keyModifiers)&&(t[e[n].name].gesture=e[n].gesture),""!==e[n].parameter&&(t[e[n].name].parameter=e[n].parameter)):(this.overrideCommands(e[n],t),t[e[n].name]={execute:e[n].execute,canExecute:e[n].canExecute,gesture:e[n].gesture,parameter:e[n].parameter});this.commands=t},t.prototype.updateNodeEdges=function(e){for(var t=0,n=e.inEdges;t<n.length;t++)this.nameTable[o=n[t]]&&(this.nameTable[o].targetID="");for(var i=0,r=e.outEdges;i<r.length;i++){var o;this.nameTable[o=r[i]]&&(this.nameTable[o].sourceID="")}e.inEdges=[],e.outEdges=[]},t.prototype.updateIconVisibility=function(e,t){for(var n=0;n<e.wrapper.children.length;n++){var i=e.wrapper.children[n];if(i.id){var r=i.id.split(e.id)[1];r&&r.match("^_icon")&&(i.visible=t,this.updateDiagramContainerVisibility(i,t))}}},t.prototype.updateEdges=function(e){var t;void 0!==e.sourceID&&""!==e.sourceID&&((t=this.nameTable[e.sourceID])&&t.outEdges&&0===t.outEdges.length&&(t.outEdges=[]),t&&t.outEdges&&-1===t.outEdges.indexOf(e.id)&&t.outEdges.push(e.id)),void 0!==e.targetID&&""!==e.targetID&&((t=this.nameTable[e.targetID])&&t.inEdges&&0===t.inEdges.length&&(t.inEdges=[]),t&&t.inEdges&&-1===t.inEdges.indexOf(e.id)&&t.inEdges.push(e.id),t&&t.visible&&t.outEdges&&this.updateIconVisibility(t,0!==t.outEdges.length))},t.prototype.refreshDiagram=function(){this.initLayerObjects(),this.doLayout(),this.updateBridging(),this.scroller.setSize()},t.prototype.updateCanupdateStyle=function(e,t){for(var n=0;n<e.length;n++)e[n].children&&this.updateCanupdateStyle(e[n].children,t),e[n].canApplyStyle=t},t.prototype.getZindexPosition=function(e,t){var n,i=[],r=void 0;if(i=(i=i.concat(this.nodes)).concat(this.connectors),-1!==e.zIndex)for(var o=0;o<i.length;o++)i[o].zIndex>e.zIndex&&("HTML"!==e.shape.type&&"Native"!==e.shape.type||(n="HTML"===e.shape.type?"html":"native"),r=wl(t,i[o].id,n));return r},t.prototype.updateDiagramObject=function(e,t){for(var n,i=0,r=this.views;i<r.length;i++)if(n=this.views[r[i]],this.diagramActions&&"SVG"===n.mode){var o=kl(this.element.id),s=document.getElementById(n.element.id+"_diagramLayer");this.diagramActions&Tn.Interactions&&this.updateCanupdateStyle(e.wrapper.children,!0),this.diagramRenderer.updateNode(e.wrapper,s,o,void 0,t?void 0:this.getZindexPosition(e,n.element.id)),this.updateCanupdateStyle(e.wrapper.children,!0)}},t.prototype.updateGridContainer=function(e){for(var t,n=kl(this.element.id),i=0,r=this.views;i<r.length;i++)if("SVG"===(t=this.views[r[i]]).mode&&this.diagramActions){var o=document.getElementById(t.element.id+"_diagramLayer");this.diagramRenderer.updateNode(e,o,n,void 0)}else this.refreshCanvasDiagramLayer(t)},t.prototype.getObjectsOfLayer=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var r=i[n];this.nameTable[r]&&t.push(this.nameTable[r])}return t},t.prototype.refreshDiagramLayer=function(){for(var e,t=0,n=this.views;t<n.length;t++)switch((e=this.views[n[t]]).mode){case"SVG":this.refreshSvgDiagramLayer(e);break;case"Canvas":this.refreshCanvasLayers(e)}},t.prototype.refreshCanvasLayers=function(e){if(e)this.refreshCanvasDiagramLayer(e);else for(var t=0,n=this.views;t<n.length;t++)this.refreshCanvasDiagramLayer(this.views[n[t]])},t.prototype.renderBasicElement=function(e){for(var t=kl(e.element.id),n=0;n<this.basicElements.length;n++){var i=this.basicElements[n];i instanceof Xn&&(i.prevRotateAngle=0),i.measure(new Xt(i.width,i.height)),i.arrange(i.desiredSize),e.diagramRenderer.renderElement(i,e.diagramLayer,t)}},t.prototype.refreshElements=function(e){if(!this.isDestroyed){this.clearCanvas(e),e instanceof t&&(e.diagramLayer.getContext("2d").setTransform(e.scroller.currentZoom,0,0,e.scroller.currentZoom,0,0),e.diagramLayer.getContext("2d").scale(1.5,1.5));var n=kl(e.element.id);this.spatialSearch.getPageBounds(),this.renderDiagramElements(e.diagramLayer,e.diagramRenderer,n);for(var i=0;i<this.basicElements.length;i++){var r=this.basicElements[i];r.measure(new Xt(r.width,r.height)),r.arrange(r.desiredSize),e.diagramRenderer.renderElement(r,e.diagramLayer,n)}e instanceof t&&(e.diagramLayer.style.transform="scale("+2/3+")",e.diagramLayer.style.transformOrigin="0 0"),this.renderTimer=null}},t.prototype.refreshCanvasDiagramLayer=function(e){var t=this;"SVG"===e.mode||this.isDestroyed||(this.basicElements.length>0&&this.renderBasicElement(e),!this.diagramActions||0==(this.diagramActions&Tn.Render)||Tn.ToolAction&this.diagramActions||Do(this)||1!==this.scroller.currentZoom?this.refreshElements(e):this.renderTimer||(this.renderTimer=setTimeout(function(){t.refreshElements(e)},40)))},t.prototype.updatePortVisibility=function(e,t,n){var i;if(e instanceof sa&&(!this.drawingObject||!this.drawingObject.shape)&&mo(e)){for(var r=e.ports,o=!1,s=0;s<r.length;s++)i=this.getWrapper(e.wrapper,r[s].id),(t&vn.Hover||t&vn.Connect)&&Ja(r[s],t)&&(i.visible=!n,o=!0);o&&this.updateDiagramObject(e)}},t.prototype.refreshSvgDiagramLayer=function(e){var t,n=document.getElementById(e.element.id+"_diagramLayer"),i=kl(e.element.id);if(Do(this))this.scroller.virtualizeElements();else{for(var r=0;r<this.basicElements.length;r++)(t=this.basicElements[r]).measure(new Xt(t.width,t.height)),t.arrange(t.desiredSize,!(this.diagramActions&Tn.Render)),this.diagramRenderer.renderElement(t,n,i);this.renderDiagramElements(n,this.diagramRenderer,i)}},t.prototype.removeVirtualObjects=function(e){if(this.deleteVirtualObject){for(var t=0;t<this.scroller.removeCollection.length;t++)this.removeElements(this.nameTable[this.scroller.removeCollection[t]]);this.deleteVirtualObject=!1}clearInterval(e)},t.prototype.updateTextElementValue=function(e){for(var t=0;t<e.wrapper.children.length;t++){var n=e.wrapper.children[t];n instanceof Jn&&(n.canMeasure=!0,n.measure(new Xt(e.width,e.height)),n.arrange(n.desiredSize))}},t.prototype.updateVirtualObjects=function(e,t,n){var i=document.getElementById("diagram_diagramLayer"),r=kl("diagram");if("SVG"===this.mode){for(var o=0;o<e.length;o++){var s=this.scroller.removeCollection.indexOf(e[o]);s>=0&&this.scroller.removeCollection.splice(s,1);var a=this.nameTable[e[o]];this.updateTextElementValue(a),this.diagramRenderer.renderElement(a.wrapper,i,r,void 0,void 0,void 0,void 0,a.zIndex)}for(var l=0;l<n.length;l++)this.scroller.removeCollection.push(n[l]);1!==this.scroller.currentZoom&&this.eventHandler.updateVirtualization()}else this.diagramActions&&this.refreshDiagramLayer()},t.prototype.renderDiagramElements=function(e,t,n,i,r,o){void 0===i&&(i=!0);var s=this.scroller.getPageBounds();s.x*=this.scroller.currentZoom,s.y*=this.scroller.currentZoom,s.width*=this.scroller.currentZoom,s.height*=this.scroller.currentZoom;for(var a=-this.scroller.horizontalOffset-s.x,l=-this.scroller.verticalOffset-s.y,c=0,h=Object.keys(this.layerZIndexTable);c<h.length;c++){var d=this.commandHandler.getLayer(this.layerZIndexTable[h[c]]),u=void 0,p=void 0;"Canvas"===this.mode&&Do(this)&&!this.diagramActions&&this.scroller.virtualizeElements();for(var f="Canvas"===this.mode&&Do(this)&&this.scroller.oldCollectionObjects.length>0?this.scroller.oldCollectionObjects:void 0,g=0,m=Object.keys(f||d.zIndexTable);g<m.length;g++){var y=m[g],v=f?this.nameTable[f[y]]:this.nameTable[d.zIndexTable[y]];if(v&&!v.parentId&&!v.processId){var b={tx:this.scroller.transform.tx,ty:this.scroller.transform.ty,scale:this.scroller.transform.scale};Do(this)&&(this.scroller.currentZoom<1?(s.x<0||this.scroller.horizontalOffset<0?(u=(a>0?a:0)+"px",p=(this.realActions&jn.vScrollbarMoved?0:-(this.scroller.verticalOffset<0?this.scroller.verticalOffset:0))+"px"):(u="0px",p="0px"),this.realActions&jn.hScrollbarMoved&&(this.realActions=this.realActions&~jn.hScrollbarMoved),this.realActions&jn.vScrollbarMoved&&(this.realActions=this.realActions&~jn.vScrollbarMoved)):(u=(s.x<0?a:-this.scroller.horizontalOffset)+"px",p=(s.y<0?l:-this.scroller.verticalOffset)+"px"),this.diagramLayer.style.left=u,this.diagramLayer.style.top=p,b.tx=this.scroller.horizontalOffset/b.scale,b.ty=this.scroller.verticalOffset/b.scale);var w=!0;r&&(w=!1),this.updateTextElementValue(v),t.renderElement(v.wrapper,e,n,!t.isSvgMode&&i?b:void 0,void 0,void 0,w&&(!this.diagramActions||o))}}}},t.prototype.updateBridging=function(e){if(this.bridgingModule)for(var t=0;t<this.connectors.length;t++){var n=this.connectors[t];this.bridgingModule.updateBridging(n,this);var i=this.connectors[t].wrapper;if(i){var r=i.children[0],o=r.data;n.getSegmentElement(n,r,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0),r.data!==o&&(i.measure(new Xt),i.arrange(i.desiredSize),"SVG"!==this.mode||e||this.updateDiagramObject(n))}}},t.prototype.setCursor=function(e){this.diagramRenderer.setCursor(this.diagramCanvas,e)},t.prototype.clearCanvas=function(e){var t,n;t=e.contentWidth||e.diagramLayer.width/this.scroller.currentZoom,n=e.contentHeight||e.diagramLayer.height/this.scroller.currentZoom,"SVG"!==e.mode&&nc.getContext(e.diagramLayer).clearRect(0,0,t,n)},t.prototype.updateScrollOffset=function(){this.scroller.setScrollOffset(this.diagramCanvas.scrollLeft,this.diagramCanvas.scrollTop),fa(this),Do(this)&&this.scroller.virtualizeElements()},t.prototype.setOffset=function(e,t){var n=document.getElementById(this.element.id+"content");n&&(n.scrollLeft=e,n.scrollTop=t)},t.prototype.setSize=function(e,t){if(this.diagramLayer&&!this.preventUpdate){var n=ma(this);e-=n.width,t-=n.height;var i=this.spatialSearch.getPageBounds();i.x*=this.scroller.currentZoom,i.y*=this.scroller.currentZoom,i.width*=this.scroller.currentZoom,i.height*=this.scroller.currentZoom;var r="SVG"===this.mode?1:1.5,o="SVG"===this.mode?vl(this.element.id):this.diagramLayer,s="Canvas"===this.mode&&this.constraints&En.Virtualization?this.scroller.viewPortHeight:t;o.setAttribute("width",(r*("Canvas"===this.mode&&this.constraints&En.Virtualization?this.scroller.viewPortWidth:e)).toString()),o.setAttribute("height",(r*s).toString());var a={width:e.toString(),height:t.toString()};this.diagramLayerDiv.style.width=e+"px",this.diagramLayerDiv.style.height=t+"px",Nl(Sl(this.element.id),a),Nl(bl(this.element.id).getElementsByClassName("e-ports-expand-layer")[0],a);var l=Cl(this.element.id);Nl(l,a),l.parentNode.style.width=e+"px",l.parentNode.style.height=t+"px";var c=Ol(this.element.id);Nl(c,a),this.diagramRenderer.updateGrid(this.snapSettings,c,this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),Nl(El(this.element.id),a),this.htmlLayer.style.width=e+"px",this.htmlLayer.style.height=t+"px","SVG"===this.mode||Do(this)||this.refreshDiagramLayer(),"SVG"===this.mode&&Do(this)&&this.scroller.virtualizeElements()}},t.prototype.transformLayers=function(){var e=this.spatialSearch.getPageBounds();e.x*=this.scroller.currentZoom,e.y*=this.scroller.currentZoom,e.width*=this.scroller.currentZoom,e.height*=this.scroller.currentZoom,this.diagramRenderer.updateGrid(this.snapSettings,Ol(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.diagramRenderer.transformLayers(this.scroller.transform,"SVG"===this.mode),this.updateSelector(),this.renderPageBreaks(e)},t.prototype.removePageBreaks=function(){if(this.diagramLayer){var e=Il(this.element.id);if(e&&e.childNodes)for(var t=e.childNodes.length,n=0;n<t;n++)e.removeChild(e.childNodes[0])}},t.prototype.renderPageBreaks=function(e){this.removePageBreaks();var t=Il(this.element.id);if(t){var n=0;e=this.scroller.getPageBounds(!0);var i=(this.scroller.transform.tx+e.x)*this.scroller.currentZoom,r=(this.scroller.transform.ty+e.y)*this.scroller.currentZoom,o=e.height*this.scroller.currentZoom,s=e.width*this.scroller.currentZoom;if(rc.renderSvgBackGroundImage(this.pageSettings.background,this.element,i,r,s,o),this.diagramRenderer.drawRect(t,{id:t.id+"rect",x:i,y:r,height:o,width:s,angle:0,stroke:"",strokeWidth:1,fill:this.pageSettings.background.color,opacity:1,pivotX:0,pivotY:0,visible:!0,dashArray:"0"}),this.pageSettings.showPageBreaks){var a=this.scroller.getPageBreak(e);for(n=0;n<a.length;n++)this.diagramRenderer.drawLine(t,{class:"e-diagram-page-break",fill:"none",stroke:"#aaaaaa",strokeWidth:1,dashArray:"10 10",opacity:2,x:0,y:0,width:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,startPoint:{x:(a[n].x1+this.scroller.transform.tx)*this.scroller.currentZoom,y:(a[n].y1+this.scroller.transform.ty)*this.scroller.currentZoom},endPoint:{x:(a[n].x2+this.scroller.transform.tx)*this.scroller.currentZoom,y:(a[n].y2+this.scroller.transform.ty)*this.scroller.currentZoom},id:a[n].y1===a[n].y2?"HorizontalLines":"VerticalLines"})}}},t.prototype.validatePageSize=function(){var e=0;"Portrait"===this.pageSettings.orientation?this.pageSettings.width>this.pageSettings.height&&(e=this.pageSettings.height,this.pageSettings.height=this.pageSettings.width,this.pageSettings.width=e):this.pageSettings.height>this.pageSettings.width&&(e=this.pageSettings.width,this.pageSettings.width=this.pageSettings.height,this.pageSettings.height=e)},t.prototype.setOverview=function(e,t){if(e)e&&(this.views.push(e.id),this.views[e.id]=e,e.renderDocument(e),e.diagramRenderer.setLayers(),e.updateView(e),this.renderNodes(e));else{for(var n=0;n<this.views.length;n++)this.views[n]===t&&(e=this.views[t]);this.views[t]=void 0;var i=this.views.indexOf(t);this.views.splice(i,1)}},t.prototype.renderNodes=function(e){if(e){var t=new rc(e.id,new ic,!1),n=document.getElementById(e.element.id+"_diagramLayer"),i=kl(e.element.id);this.renderDiagramElements(n,e.diagramRenderer||t,i,void 0,void 0,!0)}},t.prototype.updateThumbConstraints=function(e,t,n){for(var i=e.length,r=0;r<i;r++){var o=e[r],s=!1,a=!1,l=t.thumbsConstraints;o instanceof sa?(s="Bpmn"===o.shape.type&&"Activity"===o.shape.shape&&!1===o.shape.activity.subProcess.collapsed||"TextAnnotation"===o.shape.shape,a="Bpmn"===o.shape.type&&"TextAnnotation"===o.shape.shape,wo(o)&&l&On.Rotate&&!s||(l&=~On.Rotate),Eo(o,"SouthEast")&&l&On.ResizeSouthEast&&!a||(l&=~On.ResizeSouthEast),Eo(o,"NorthWest")&&l&On.ResizeNorthWest&&!a||(l&=~On.ResizeNorthWest),Eo(o,"East")&&l&On.ResizeEast&&!a||(l&=~On.ResizeEast),Eo(o,"West")&&l&On.ResizeWest&&!a||(l&=~On.ResizeWest),Eo(o,"North")&&l&On.ResizeNorth&&!a||(l&=~On.ResizeNorth),Eo(o,"South")&&l&On.ResizeSouth&&!a||(l&=~On.ResizeSouth),Eo(o,"NorthEast")&&l&On.ResizeNorthEast&&!a||(l&=~On.ResizeNorthEast),Eo(o,"SouthWest")&&l&On.ResizeSouthWest&&!a||(l&=~On.ResizeSouthWest)):o instanceof uo?(n||(l|=On.Default),yo(o)?l|=On.ConnectorSource:l&=~On.ConnectorSource,vo(o)?l|=On.ConnectorTarget:l&=~On.ConnectorTarget):(n||(l|=On.Default),Eo(o)||(l&=~(On.ResizeSouthEast|On.ResizeSouthWest|On.ResizeSouth|On.ResizeEast|On.ResizeWest|On.ResizeNorth|On.ResizeNorthEast|On.ResizeNorthWest)),wo(o)||(l&=~On.Rotate)),t.thumbsConstraints=l}},t.prototype.renderSelector=function(e,t){var n=new Xt,i=this.selectedItems,r=this.diagramRenderer.rendererActions;if(this.diagramRenderer.rendererActions=this.currentSymbol?this.addConstraints(r,Mn.DrawSelectorBorder):this.removeConstraints(r,Mn.DrawSelectorBorder),this.clearSelectorLayer(),this.commandHandler.hasSelection()){if(1===i.nodes.length&&0===i.connectors.length&&(i.rotateAngle=i.nodes[0].rotateAngle,i.pivot=i.nodes[0].pivot),i.wrapper.measure(n),i.wrapper.arrange(i.wrapper.desiredSize),i.width=i.wrapper.actualSize.width,i.height=i.wrapper.actualSize.height,i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY,0!==i.rotateAngle){for(var o=0,s=i.nodes;o<s.length;o++){var a=s[o];a.offsetX=a.wrapper.offsetX,a.offsetY=a.wrapper.offsetY}for(var l=0,c=i.connectors;l<c.length;l++);}var h;if(this.spatialSearch.getPageBounds(),h=xl(this.element.id),i.thumbsConstraints=On.Default,i.annotation?this.updateThumbConstraints([i.annotation],i):(this.updateThumbConstraints(i.nodes,i),this.updateThumbConstraints(i.connectors,i,!0)),i.annotation)this.renderSelectorForAnnotation(i,h);else if(i.nodes.length+i.connectors.length===1){if(i.nodes[0]instanceof sa){var d=i.nodes[0];Ko(this,d)&&(t||"UmlClassifier"===d.shape.type||d.parentId&&this.nameTable[d.parentId]&&"UmlClassifier"===this.nameTable[d.parentId].shape.type||((!d.container||"Canvas"!==d.container.type&&"Grid"!==d.container.type)&&(i.nodes[0].constraints&=~(An.Rotate|An.HideThumbs)),i.thumbsConstraints&=~On.Rotate));var u=!!t||!!(d.constraints&An.HideThumbs),p=!!("SwimLane"===d.shape.type||d.isLane||d.isPhase||t);this.diagramRenderer.renderResizeHandle(i.wrapper.children[0],h,i.thumbsConstraints,this.scroller.currentZoom,i.constraints,this.scroller.transform,void 0,mo(d),u,p)}else if(i.connectors[0]instanceof uo&&Fo(this.diagramRenderer.rendererActions)){var f=i.connectors[0];this.diagramRenderer.renderEndPointHandle(f,h,i.thumbsConstraints,i.constraints,this.scroller.transform,void 0!==f.sourceWrapper,void 0!==f.targetWrapper,!(!this.connectorEditingToolModule||!bo(f)))}}else this.diagramRenderer.renderResizeHandle(i.wrapper,h,i.thumbsConstraints,this.scroller.currentZoom,i.constraints,this.scroller.transform,void 0,mo(i));i.annotation||this.diagramRenderer.renderUserHandler(i,h,this.scroller.transform)}},t.prototype.updateSelector=function(){var e=new Xt,t=this.selectedItems,n=t.constraints;if(this.diagramActions&Tn.ToolAction||1!==this.selectedItems.nodes.length||(this.selectedItems.rotateAngle=this.selectedItems.nodes[0].rotateAngle,this.selectedItems.wrapper.rotateAngle=this.selectedItems.nodes[0].rotateAngle),void 0!==this.selectedItems&&(this.clearSelectorLayer(),null!==t.wrapper&&t.wrapper.children&&t.wrapper.children.length)){if(t.wrapper.measure(e),t.wrapper.arrange(t.wrapper.desiredSize),0!==t.rotateAngle||t.rotateAngle!==t.wrapper.prevRotateAngle)for(var i=0,r=t.nodes;i<r.length;i++){var o=r[i];o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY}var s;t.width=t.wrapper.actualSize.width,t.height=t.wrapper.actualSize.height,t.offsetX=t.wrapper.offsetX,t.offsetY=t.wrapper.offsetY,s=xl(this.element.id);var a=this.eventHandler.canHideResizers();if(t.thumbsConstraints=On.Default,t.annotation?this.updateThumbConstraints([t.annotation],t):(this.updateThumbConstraints(t.nodes,t),this.updateThumbConstraints(t.connectors,t,!0)),this.selectedItems.constraints&wn.UserHandle&&!t.annotation&&this.diagramRenderer.renderUserHandler(t,s,this.scroller.transform),t.annotation)this.renderSelectorForAnnotation(t,s);else if(t.nodes.length+t.connectors.length===1){if(t.connectors[0]instanceof uo&&Fo(this.diagramRenderer.rendererActions)){var l=t.connectors[0];this.diagramRenderer.renderEndPointHandle(l,s,t.thumbsConstraints,n,this.scroller.transform,void 0!==l.sourceWrapper,void 0!==l.targetWrapper,!(!this.connectorEditingToolModule||!bo(l)))}else if(t.nodes[0]instanceof sa){var c=t.nodes[0];Ko(this,t.nodes[0])&&("UmlClassifier"===c.shape.type||c.parentId&&this.nameTable[c.parentId]&&"UmlClassifier"===this.nameTable[c.parentId].shape.type||((!c.container||"Canvas"!==c.container.type&&"Grid"!==c.container.type)&&(t.nodes[0].constraints&=~(An.HideThumbs|An.Rotate)),t.thumbsConstraints&=~On.Rotate));var h=!("SwimLane"!==c.shape.type&&!c.isLane&&!c.isPhase);this.diagramRenderer.renderResizeHandle(t.wrapper.children[0],s,t.thumbsConstraints,this.scroller.currentZoom,t.constraints,this.scroller.transform,a,mo(t.nodes[0]),!!(t.nodes[0].constraints&An.HideThumbs),h)}}else this.diagramActions&Tn.Interactions&&(this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions|Mn.PreventRenderSelector),this.diagramRenderer.renderResizeHandle(t.wrapper,s,t.thumbsConstraints,this.scroller.currentZoom,t.constraints,this.scroller.transform,a,mo(t)),this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions&~Mn.PreventRenderSelector}},t.prototype.renderSelectorForAnnotation=function(e,t){this.diagramRenderer.renderResizeHandle(e.wrapper.children[0],t,e.thumbsConstraints,this.scroller.currentZoom,e.constraints,this.scroller.transform,void 0,mo(e.annotation))},t.prototype.drawSelectionRectangle=function(e,t,n,i){this.clearSelectorLayer(),this.diagramRenderer.drawSelectionRectangle(e,t,n,i,this.adornerLayer,this.scroller.transform)},t.prototype.renderHighlighter=function(e){var t=Cl(this.element.id);this.diagramRenderer.renderHighlighter(e,t,this.scroller.transform)},t.prototype.clearHighlighter=function(){var e=Cl(this.element.id),t=e.getElementById(e.id+"_highlighter");t&&t.parentNode.removeChild(t)},t.prototype.getNodesConnectors=function(e){for(var t=0;t<this.nodes.length;t++)e.push(this.nodes[t]);for(t=0;t<this.connectors.length;t++)e.push(this.connectors[t]);return e},t.prototype.clearSelectorLayer=function(){var e=Cl(this.element.id);if(this.currentSymbol){var t=e.getElementById("borderRect_symbol");t&&t.parentNode.removeChild(t)}else{var n=e.getElementById(this.adornerLayer.id+"_selected_region");n&&n.parentNode.removeChild(n),this.clearHighlighter();for(var i=xl(this.element.id).childNodes,r=void 0,o=i.length;o>0;o--)(r=i[o-1]).parentNode.removeChild(r)}},t.prototype.getWrapper=function(e,t){var n;t=e.id+"_"+t;for(var i=e instanceof ri?e:this.getPortContainer(this.nameTable[e.id]),r=0;r<i.children.length;r++)t===i.children[r].id&&(n=i.children[r]);return n},t.prototype.getEndNodeWrapper=function(e,t,n){if("Bpmn"===e.shape.type&&e.wrapper.children[0]instanceof ri){if("Activity"===e.shape.shape){if(n&&"Transaction"===e.shape.activity.subProcess.type&&t.sourcePortID){var i=t.sourcePortID,r=e.wrapper.children[0].children[0].children[2];if(r.children)for(var o=0,s=r.children;o<s.length;o++){var a=s[o];if(a.visible&&a.id===e.id+"_"+i)return a.children[0]}}return e.wrapper.children[0].children[0].children[0]}return e.wrapper.children[0].children[0]}return this.containsMargin(e.wrapper.children[0])||e.children?e.wrapper:e.wrapper.children[0]},t.prototype.containsMargin=function(e){return e.margin&&(0!==e.margin.left||0!==e.margin.top||0!==e.margin.right||0!==e.margin.bottom)},t.prototype.focusOutEdit=function(){this.endEdit()},t.prototype.endEditCommand=function(){this.endEdit(),this.textEditing=!1},t.prototype.endEdit=function(){if(this.diagramActions&Tn.TextEdit){var e=document.getElementById(this.element.id+"_editBox"),t=e.value;I.remove(e,"input",this.eventHandler.inputChange),I.remove(e,"focusout",this.focusOutEdit);var n=document.getElementById(this.element.id+"_editTextBoxDiv"),i={oldValue:n.textContent,newValue:t,cancel:!1},r=!1,o=void 0;n.parentNode.removeChild(n);var s=void 0;if(this.bpmnModule&&(o=this.bpmnModule.isBpmnTextAnnotation(this.activeLabel,this),s=this.bpmnModule.getTextAnnotationWrapper(o,this.activeLabel.id),(r=!!o)&&n.textContent!==t&&(this.triggerEvent(Ln.textEdit,i),i.cancel||this.bpmnModule.updateTextAnnotationContent(o,this.activeLabel,t,this))),!r){var a=this.eventHandler.isAddTextNode(o=this.nameTable[this.activeLabel.parentId],!0);a||n.textContent===t||this.triggerEvent(Ln.textEdit,i),s||(s=this.getWrapper(o.wrapper,this.activeLabel.id));var l=$a(o,this.activeLabel.id);if(l.content===t||i.cancel||(o.parentId&&"UmlClassifier"===this.nameTable[o.parentId].shape.type&&-1===t.indexOf("+")&&-1===t.indexOf("-")&&-1===t.indexOf("#")&&-1===t.indexOf("~")&&-1===o.id.indexOf("_umlClass_header")&&(t=" + "+t),(o.isLane||o.isPhase)&&this.protectPropertyChange(!0),l.content=t,this.dataBind(),this.updateSelector(),(o.isLane||o.isPhase)&&this.protectPropertyChange(!1)),a&&(this.removeObjectsFromLayer(o),this.removeFromAQuad(o),delete this.nameTable[this.activeLabel.parentId],""!==t)){this.clearSelection();var c=Ul(o);o=this.add(c),this.updateDiagramObject(o),this.commandHandler.select(this.nameTable[o.id])}}if(this.selectedItems.nodes.length){var h=this.nameTable[this.activeLabel.parentId],d=this.nameTable[h.parentId];if(d&&"SwimLane"===d.shape.type||"SwimLane"===h.shape.type)if("SwimLane"===h.shape.type&&(d=this.nameTable[this.activeLabel.parentId],h=o),h.isLane||h.isPhase)for(var u=h.isLane?d.shape.lanes:d.shape.phases,p=0;p<u.length;p++)u[p].id===(h.LaneHeaderParent||h.PhaseHeaderParent)&&(u[p].header.annotation.content=h.annotations[0].content);else h.isHeader&&d.shape.hasHeader&&(d.shape.header.annotation.content=h.annotations[0].content);this.dataBind()}s.visible=!0,this.updateDiagramObject(o),this.diagramActions=this.diagramActions&~Tn.TextEdit,this.activeLabel.isGroup&&this.endGroupAction(),this.activeLabel={id:"",parentId:"",isGroup:!1}}},t.prototype.canLogChange=function(){return!(!(this.diagramActions&Tn.Render)||this.diagramActions&Tn.ToolAction||this.diagramActions&Tn.UndoRedo||this.diagramActions&Tn.PublicMethod)},t.prototype.modelChanged=function(e,t){return!!(e.connectors||t.connectors||e.nodes||t.connectors||e.pageSettings||t.pageSettings||e.bridgeDirection||t.bridgeDirection)},t.prototype.resetDiagramActions=function(e){var t=!!e;this.diagramActions&Tn.UndoRedo&&(!t||e===Tn.UndoRedo)&&(this.diagramActions=this.diagramActions&~Tn.UndoRedo),this.diagramActions&Tn.PublicMethod&&(!t||e===Tn.PublicMethod)&&(this.diagramActions=this.diagramActions&~Tn.PublicMethod)},t.prototype.removeNode=function(e){this.removeObjectsFromLayer(e),this.removeFromAQuad(this.nameTable[e.id]),delete this.nameTable[e.id],e.children&&delete this.groupTable[e.id],this.nodes.splice(this.nodes.indexOf(e),1)},t.prototype.deleteGroup=function(e){var t=[];e.children&&(t=this.commandHandler.getChildren(e,[]));for(var n=0,i=t;n<i.length;n++){var r=i[n];this.nameTable[r.id]&&this.remove(r)}},t.prototype.updateObject=function(e,t,n){if(!(this.diagramActions&Tn.ToolAction||this.commandHandler.checkBoundaryConstraints(void 0,void 0,e.wrapper.children[0].bounds)))if(e instanceof sa){for(var i=t,r=0,o=Object.keys(n);r<o.length;r++)switch(o[r]){case"width":e.width=i.width;break;case"height":e.height=i.height;break;case"offsetX":e.offsetX=i.offsetX;break;case"offsetY":e.offsetY=i.offsetY;break;case"rotateAngle":e.rotateAngle=i.rotateAngle}this.nodePropertyChange(e,n,t)}else{for(var s=0,a=Object.keys(n);s<a.length;s++){var l=t,c=e.sourcePoint,h=e.targetPoint;switch(a[s]){case"sourcePoint":c.x=l.sourcePoint.x||c.x,c.y=l.sourcePoint.y||c.y;break;case"targetPoint":h.x=l.targetPoint.x||h.x,h.y=l.targetPoint.y||h.y}}this.connectorPropertyChange(e,n,t)}},t.prototype.nodePropertyChangeExtend=function(e,t,n,i){return void 0!==n.style&&"Bpmn"!==e.shape.type&&(Va(n.style,e.wrapper.children[0]),i=!0),void 0!==n.shadow&&(this.updateShadow(e.shadow,n.shadow),i=!0),void 0!==n.constraints&&(t.constraints&An.Select&&!(n.constraints&An.Select)&&wc(this,e)?this.clearSelection():(this.updateThumbConstraints(this.selectedItems.nodes,this.selectedItems),this.updateSelector(),i=!0)),this.swimLaneNodePropertyChange(e,t,n,i),i},t.prototype.swimLaneNodePropertyChange=function(e,t,n,i){if("SwimLane"===e.shape.type&&!this.currentSymbol){if(t.shape){var r=n.shape,o=e.shape,s="Horizontal"===o.orientation,a=o.padding,l=t.shape,c=e.wrapper.children[0],h=void 0,d=void 0,u=void 0;if(l.lanes||l.phases){if(l.lanes)for(var p=0,f=Object.keys(r.lanes);p<f.length;p++){var g=Number(f[p]),m=l.lanes[g],y=void 0,v=r.lanes[g];if(v&&v.header&&this.nodePropertyChange(this.nameTable[u=o.lanes[g].header.id],h=m.header,d=v.header),m.children)for(var b=0,w=Object.keys(m.children);b<w.length;b++){var C=w[b];u=o.lanes[g].children[Number(C)].id;var x=this.nameTable[u];h=m.children[Number(C)],d=v.children[Number(C)],this.nodePropertyChange(x,h,d)}m.width&&!s&&c.updateColumnWidth(y=o.phases&&o.phaseSize?g+1:g,v.width,!0,a),m.height&&s&&(y=o.header&&o.hasHeader?g+1:g,c.updateRowHeight(y+=o.phases&&o.phaseSize?1:0,v.height,!0,a))}if(r.phases)for(var A=0,S=Object.keys(r.phases);A<S.length;A++){g=Number(S[A]);var O=r.phases[g],E=void 0,I=o.header&&o.hasHeader?1:0;O&&O.header&&this.nodePropertyChange(this.nameTable[u=o.phases[g].header.id],h=l.phases[g].header,d=O.header),O.offset&&(0===g?E=O.offset:(E=O.offset-o.phases[g-1].offset)<=0&&(E=O.offset),s?(c.updateColumnWidth(g,E,!0,a),bs(e,this,c.rows[I].cells[g],g)):c.updateRowHeight(I+g,E,!0,a))}}if(void 0!==r.phaseSize&&o.phases.length)if(0===r.phaseSize||0===l.phaseSize)if(l.phaseSize)s?(c.removeRow(o.header&&o.hasHeader?1:0),e.height=e.wrapper.height=c.height):(o.header&&o.hasHeader&&(c.rows[0].cells[1].children=c.rows[0].cells[0].children,c.rows[0].cells[1].columnSpan=c.rows[0].cells[0].columnSpan-1,c.rows[0].cells[0].children=[]),c.removeColumn(0));else{if(s){var D=new Uo;D.height=r.phaseSize,c.addRow(o.header&&o.hasHeader?1:0,D,!0),e.height=e.wrapper.height+=r.phaseSize}else{var k=new Wo;k.width=r.phaseSize,c.addColumn(0,k,!0),o.header&&o.hasHeader&&(c.rows[0].cells[0].children=c.rows[0].cells[1].children,c.rows[0].cells[1].children=[],c.rows[0].cells[1].columnSpan=1,c.rows[0].cells[1].minWidth=void 0,c.rows[0].cells[0].columnSpan=o.lanes.length+1)}for(var P=0;P<o.phases.length;P++)""===o.phases[P].id&&(o.phases[P].id=zl()),rs(c,this,e,o.header&&o.hasHeader?1:0,s,P)}else s?c.updateRowHeight(o.header&&o.hasHeader?1:0,r.phaseSize,!1):c.updateColumnWidth(0,r.phaseSize,!1);o.header&&o.hasHeader&&l.header&&this.nodePropertyChange(this.nameTable[c.rows[0].cells[0].children[0].id],l.header,r.header),e.height=e.wrapper.height=c.height,e.width=e.wrapper.width=c.width}i=!0}return i},t.prototype.nodePropertyChange=function(e,t,n,i,r,o){var s,a=e.wrapper.outerBounds,l=e.wrapper.bounds,c=!1;if(void 0!==n.width&&(e.children?e.container?e.wrapper.width=n.width:this.scaleObject(e,n.width,!0):(e.wrapper.children[0].width=n.width,s=!0,c=!0)),void 0!==n.height&&(e.children?e.container?e.wrapper.height=n.height:this.scaleObject(e,n.height,!1):(e.wrapper.children[0].height=n.height,s=!0,c=!0)),s=this.nodePropertyChangeExtend(e,t,n,s),void 0!==n.constraints&&Co(t)!==Co(n)&&(e.wrapper.children[0].shadow=Co(e)?e.shadow:null),void 0!==n.offsetX){if("None"!==e.wrapper.flip){if(e.offsetX!==e.wrapper.offsetX&&void 0!==t.offsetX){var h=n.offsetX-t.offsetX;e.wrapper.offsetX=e.wrapper.offsetX+h,this.updateFlipOffset(e.wrapper,h,0,e.wrapper.flip)}}else e.wrapper.offsetX=n.offsetX;s=!0,c=!0}if(void 0!==n.offsetY){if("None"!==e.wrapper.flip){if(e.offsetY!==e.wrapper.offsetY&&void 0!==t.offsetY){var d=n.offsetY-t.offsetY;e.wrapper.offsetY=e.wrapper.offsetY+d,this.updateFlipOffset(e.wrapper,0,d,e.wrapper.flip)}}else e.wrapper.offsetY=n.offsetY;s=!0,c=!0}if(void 0!==n.pivot&&(e.wrapper.pivot=n.pivot,s=!0),void 0!==n.minWidth&&(e.wrapper.minWidth=n.minWidth,s=!0,c=!0),void 0!==n.minHeight&&(e.wrapper.minHeight=n.minHeight,s=!0,c=!0),void 0!==n.maxWidth&&(e.wrapper.maxWidth=n.maxWidth,s=!0,c=!0),void 0!==n.maxHeight&&(e.wrapper.maxHeight=n.maxHeight,s=!0,c=!0),void 0!==n.flip)if(e.wrapper.flip=n.flip,s=!0,c=!0,e.wrapper.elementActions&Sn.ElementIsGroup){if(hl(e.wrapper,e.offsetX,e.offsetY,this,n.flip),e&&e.children)for(var u=0,p=e.children;u<p.length;u++){var f=this.nameTable[p[u]];f.wrapper.flip=n.flip,this.updatePorts(f,n.flip)}}else e.wrapper.children[0].flip=n.flip,this.updatePorts(e,n.flip);if(void 0!==n.rotateAngle&&(e.children&&r&&this.commandHandler.rotateObjects(e,[e],e.rotateAngle-e.wrapper.rotateAngle,{x:e.offsetX,y:e.offsetY},!1),e.wrapper.rotateAngle=n.rotateAngle,s=!0,c=!0),void 0!==n.backgroundColor&&(e.wrapper.style.fill=n.backgroundColor),void 0!==n.visible&&this.updateElementVisibility(e.wrapper,e,e.visible),void 0!==n.shape&&"Bpmn"!==e.shape.type&&(s=!0,function(e,t,n,i){var r=new Nn;switch(e.shape.type){case"Path":var o=new Zn;o.data=t.shape.data,Wa(r=o,t,i);break;case"Image":var s=new $n;s.source=t.shape.source,s.imageAlign=t.shape.align,s.imageScale=t.shape.scale,Wa(r=s,t,i);break;case"Text":Wa(r=new Jn,t,i);break;case"Basic":var a=void 0;(a="Rectangle"===t.shape.shape?new Nn:new Zn).data="Polygon"===t.shape.shape?Jt(t.shape.points):oi(t.shape.shape),Wa(r,t,i),"Rectangle"===t.shape.shape&&(a.cornerRadius=t.shape.cornerRadius),r=a;break;case"Flow":var l=new Zn;l.data=di(t.shape.shape),Wa(r=l,t,i);break;case"Native":var c=new Kn(e.id,i.element.id);c.content=t.shape.content,c.scale=t.shape.scale,Wa(r=c,t,i);break;case"HTML":var h=new Gr(e.id,i.element.id);h.content=t.shape.content,Wa(r=h,t,i)}void 0===e.shape.type||e.shape.type===n.shape.type?function(e,t,n){if(Object.keys(e.shape).length>0)if("Path"===t.shape.type&&void 0!==e.shape.data)t.wrapper.children[0].data=e.shape.data;else if("Text"===t.shape.type&&void 0!==e.shape.content)t.wrapper.children[0].content=e.shape.content;else if("Image"===t.shape.type&&void 0!==e.shape.source)t.wrapper.children[0].source=e.shape.source;else if("Native"===t.shape.type){for(var i=void 0,r=0;r<n.views.length;r++)i=bl(t.wrapper.children[0].id+"_native_element",n.views[r]),void 0!==e.shape.content&&i&&(i.removeChild(i.children[0]),t.wrapper.children[0].content=e.shape.content,i.appendChild(_l(t.wrapper.children[0],!1)));t.wrapper.children[0].scale=e.shape.scale?e.shape.scale:t.wrapper.children[0].scale}else if("HTML"===t.shape.type){var o=void 0;for(r=0;r<n.views.length;r++)(o=bl(t.wrapper.children[0].id+"_html_element",n.views[r]))&&(o.removeChild(o.children[0]),t.wrapper.children[0].content=e.shape.content,o.appendChild(_l(t.wrapper.children[0],!0)))}else if("Flow"===t.shape.type&&void 0!==e.shape.shape){t.shape.shape=e.shape.shape;var s=di(t.shape.shape.toString());t.wrapper.children[0].data=s}else if("UmlActivity"===t.shape.type&&void 0!==e.shape.shape)!function(e,t){e.shape.shape=t.shape.shape;var n=ba(e.shape.shape.toString());"InitialNode"===e.shape.shape?e.wrapper.children[0].style.fill="black":"ForkNode"===e.shape.shape||"JoinNode"===e.shape.shape?e.wrapper.children[0].style.fill="black":"FinalNode"===e.shape.shape&&(e instanceof sa&&(e.wrapper=Ga(e)),e.wrapper.children[0].data=n)}(t,e);else if(void 0!==e.shape.cornerRadius)t.wrapper.children[0].cornerRadius=e.shape.cornerRadius;else if(void 0!==e.shape.shape){t.shape.shape=e.shape.shape;var a=oi(t.shape.shape.toString());t.wrapper.children[0].data=a}t.wrapper.children[0].canMeasurePath=!0}(e,t,i):(r.width=t.wrapper.children[0].width,r.height=t.wrapper.children[0].height,t.shape instanceof Bs&&(r.margin=t.shape.margin),r.style=t.style,t.wrapper.children[0]=r)}(n,e,t,this),c=!0),n.margin&&(s=!0,this.updateMargin(e,n),c=!0),(void 0!==n.shape&&void 0===n.shape.type||void 0!==n.width||void 0!==n.height||void 0!==n.style)&&"Bpmn"===e.shape.type&&this.bpmnModule&&(s=!0,c=!0,this.bpmnModule.updateBPMN(n,t,e,this)),"UmlActivity"===e.shape.type&&"FinalNode"===e.shape.shape&&(s=!0,c=!0,this.updateUMLActivity(n,t,e,this)),(e.shape&&"UmlClassifier"===e.shape.type||e.parentId&&this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type)&&(s=!0,c=!0),void 0!==n.ports)for(var g=0,m=Object.keys(n.ports);g<m.length;g++){var y=m[g],v=Number(y);s=!0,this.updatePort(C=n.ports[y],e.ports[v],e.wrapper),c=!0}if(void 0!==n.annotation||void 0!==n.annotations||void 0!==n.width)for(var b=0,w=Object.keys(n.annotations||e.annotations);b<w.length;b++){y=w[b],v=Number(y),s=!0;var C=void 0;C=n.annotation?n.annotation:n.annotations?n.annotations[y]:e.annotations;var x=e.annotations[v];x&&this.updateAnnotation(C,x,e.wrapper,e,!!e.width)}if(void 0===n.expandIcon&&void 0===n.collapseIcon&&void 0===n.isExpanded||(this.updateIcon(e),this.updateDefaultLayoutIcons(e),void 0!==n.isExpanded&&this.commandHandler.expandNode(e,this),s=!0),void 0!==n.tooltip&&this.updateTooltip(e,n),s){if(void 0!==this.bpmnModule&&this.bpmnModule.updateTextAnnotationProp(e,{offsetX:t.offsetX||e.offsetX,offsetY:t.offsetY||e.offsetY},this),e.wrapper.measure(new Xt(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateObject(e,t,n),!("SwimLane"!==e.shape.type||this.currentSymbol||this.diagramActions&Tn.ToolAction)){ws(this,e);var A=e.wrapper.children[0],S=e.shape,O=A.columnDefinitions().length;"Horizontal"===S.orientation&&bs(e,this,A.rows[v=S.header&&S.hasHeader?1:0].cells[O-1],O-1),e.wrapper.measure(new Xt(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize)}this.diagramActions&Tn.ToolAction&&!(this.diagramActions&Tn.UndoRedo)||this.checkSelectedItem(e)&&this.updateSelector(),i?e&&e.visible&&e.outEdges&&this.updateIconVisibility(e,0!==e.outEdges.length):(this.commandHandler.connectorSegmentChange(e,l,void 0!==n.rotateAngle),c&&this.updateConnectorEdges(e)),void 0!==this.bpmnModule&&this.bpmnModule.updateDocks(e,this),this.updateGroupOffset(e),!1===a.equals(a,e.wrapper.outerBounds)&&this.updateQuad(e);var E=[];if(0===(E=E.concat(this.selectedItems.nodes,this.selectedItems.connectors)).length&&e.parentId&&this.nameTable[e.parentId]){var I=this.nameTable[e.parentId];I.wrapper.measure(new Xt(I.wrapper.width,e.wrapper.height)),I.wrapper.arrange(I.wrapper.desiredSize),I.offsetX=I.wrapper.offsetX,I.offsetY=I.wrapper.offsetY}!1===l.equals(l,e.wrapper.bounds)&&(this.updateGroupSize(e),e.children&&this.updateGroupOffset(e)),"SwimLane"===e.shape.type&&!this.currentSymbol&&this.diagramActions&Tn.Render&&fs(ls(this,e.wrapper.children[0]),this),this.preventNodesUpdate||(this.updateDiagramObject(e),!i&&c&&this.updateConnectorEdges(e)),"New"!==e.status&&this.diagramActions&&(e.status="Update")}o||this.triggerEvent(Ln.propertyChange,{element:e,cause:this.diagramActions,oldValue:t,newValue:n})},t.prototype.updatePorts=function(e,t){if(e&&e.ports.length>0)for(var n=0,i=Object.keys(e.ports);n<i.length;n++){var r=Number(i[n]),o=e.ports[r],s=this.getWrapper(e.wrapper,o.id);(s=cl(s,t,o)).relativeMode="Point",s.measure(new Xt(s.width,s.height)),s.arrange(s.desiredSize)}},t.prototype.updateFlipOffset=function(e,t,n,i){if(e.hasChildren())for(var r=0,o=e.children;r<o.length;r++){var s=o[r];"Horizontal"!==i&&"Both"!==i||(s.flipOffset.x=s.flipOffset.x+t),"Vertical"!==i&&"Both"!==i||(s.flipOffset.y=s.flipOffset.y+n),(s instanceof ri||s instanceof Xn)&&this.updateFlipOffset(s,t,n,i)}},t.prototype.updateUMLActivity=function(e,t,n,i){if(void 0!==e.width||void 0!==e.height){var r=n.wrapper.children[0].children[0];r.width=e.width,r.height=e.height;var o=n.wrapper.children[0].children[1];o.width=e.width/1.5,o.height=e.height/1.5}},t.prototype.updateConnectorProperties=function(e){this.preventConnectorsUpdate?-1===this.selectionConnectorsList.indexOf(e)&&this.selectionConnectorsList.push(e):this.connectorPropertyChange(e,{},{sourcePoint:e.sourcePoint,targetPoint:e.targetPoint,sourceID:e.sourceID,targetID:e.targetID,sourcePortID:e.sourcePortID,targetPortID:e.targetPortID},void 0,!0)},t.prototype.updateConnectorEdges=function(e){if(e.inEdges.length>0)for(var t=0;t<e.inEdges.length;t++)this.updateConnectorProperties(this.nameTable[e.inEdges[t]]);if(e.outEdges.length>0)for(var n=0;n<e.outEdges.length;n++)this.updateConnectorProperties(this.nameTable[e.outEdges[n]]);e.parentId&&this.nameTable[e.parentId]&&this.updateConnectorEdges(this.nameTable[e.parentId])},t.prototype.connectorProprtyChangeExtend=function(e,t,n,i){return void 0!==n.type&&n.type!==t.type&&e.segments.length>0&&void 0===n.segments&&(e.segments=[]),void 0!==n.shape&&void 0!==e.shape&&e.shape&&"Bpmn"===e.shape.type&&this.bpmnModule&&this.bpmnModule.updateBPMNConnector(e,t,n,this),void 0!==e.constraints?(this.updateThumbConstraints(this.selectedItems.connectors,this.selectedItems),!0):i},t.prototype.connectorPropertyChange=function(e,t,n,i,r){var o,s,a=e.wrapper.bounds,l=!1,c=[];if(l=this.connectorProprtyChangeExtend(e,t,n,l),void 0!==n.visible&&this.updateElementVisibility(e.wrapper,e,e.visible),void 0!==n.sourcePoint||void 0!==n.targetPoint||void 0!==n.sourceID||void 0!==n.targetID||void 0!==n.targetPadding||void 0!==n.sourcePortID||void 0!==n.targetPortID||void 0!==n.sourcePadding||void 0!==n.type||void 0!==n.segments||void 0!==n.flip){if(void 0!==n.sourceID&&n.sourceID!==t.sourceID||n.sourcePortID){if(s=this.findInOutConnectPorts(u=this.nameTable[e.sourceID],!1),(!u||So(u)||""!==e.sourcePortID&&Oo(s))&&(e.sourceWrapper=u?this.getEndNodeWrapper(u,e,!0):void 0),void 0!==n.sourceID&&void 0!==t.sourceID&&""!==t.sourceID){var h=this.nameTable[t.sourceID];void 0!==h&&h.outEdges&&-1!==h.outEdges.indexOf(e.id)&&Qa(h.outEdges,e.id)}this.updateEdges(e)}if(void 0!==n.targetID&&n.targetID!==t.targetID){if(o=this.findInOutConnectPorts(f=this.nameTable[n.targetID],!0),(!f||xo(f)||""!==e.targetPortID&&Ao(o))&&(e.targetWrapper=f?this.getEndNodeWrapper(f,e,!1):void 0),void 0!==t&&void 0!==t.targetID&&""!==t.targetID){var d=this.nameTable[t.targetID];void 0!==d&&d.inEdges&&-1!==d.inEdges.indexOf(e.id)&&Qa(d.inEdges,e.id)}this.updateEdges(e)}if(void 0!==n.sourcePortID&&n.sourcePortID!==t.sourcePortID){var u,p=void 0;e.sourceID&&this.nameTable[e.sourceID]&&(p=this.nameTable[e.sourceID].wrapper),(!(u=this.nameTable[e.sourceID])||So(u)||""!==e.sourcePortID&&Oo(s))&&(e.sourcePortWrapper=p?this.getWrapper(p,n.sourcePortID):void 0)}if(void 0!==n.targetPortID&&n.targetPortID!==t.targetPortID){var f,g=void 0;e.targetID&&this.nameTable[e.targetID]&&(g=this.nameTable[e.targetID].wrapper),(!(f=this.nameTable[e.targetID])||xo(f)||""!==e.targetPortID&&Ao(o))&&(e.targetPortWrapper=g?this.getWrapper(g,n.targetPortID):void 0)}void 0!==n.flip&&(e.flip=n.flip,ll(e)),c=this.getPoints(e)}void 0!==n.style&&Va(n.style,e.wrapper.children[0]),(c.length>0||void 0!==n.sourceDecorator||void 0!==n.targetDecorator&&-1===Object.keys(n.targetDecorator).indexOf("style")||void 0!==n.cornerRadius)&&(Ya(e,c.length>0?c:e.intermediatePoints),void 0!==n.type&&(l=!0),c.length>0&&(e.wrapper.measure(new Xt(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateConnectorAnnotation(e),this.updateObject(e,t,n))),(n.sourcePoint||n.targetPoint||n.segments)&&this.diagramActions===Tn.Render&&(l=!0),i||this.updateBridging(),this.updateAnnotations(n,e),e.wrapper.measure(new Xt(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),!1===a.equals(a,e.wrapper.bounds)&&(this.updateQuad(e),this.updateGroupSize(e)),!0!==l||!this.checkSelectedItem(e)||this.diagramActions&Tn.ToolAction&&!(this.diagramActions&Tn.UndoRedo)||this.updateSelector(),this.preventConnectorsUpdate||this.updateDiagramObject(e),this.diagramActions&&"New"!==e.status&&(e.status="Update"),r||this.triggerEvent(Ln.propertyChange,{element:e,cause:this.diagramActions,oldValue:t,newValue:n})},t.prototype.findInOutConnectPorts=function(e,t){var n={};return e&&(n=tl(e,t)),n},t.prototype.getPoints=function(e,t){return e.getConnectorPoints(e.type,t,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0)},t.prototype.updateNodeProperty=function(e,t,n){if(void 0===t)this.updateElementVisibility(e,this.nameTable[e.id],t);else{e.style.opacity=n;for(var i=0;i<e.children.length;i++)e.children[i]instanceof Xn&&this.updateNodeProperty(e.children[i],void 0,n),e.children[i].style.opacity=n}},t.prototype.checkSelectedItem=function(e){var t=this.selectedItems,n=!1,i=[];return(i=i.concat(t.nodes,t.connectors)).length>0&&e.id===i[i.length-1].id&&(n=!0),n},t.prototype.updateDiagramContainerVisibility=function(e,t){if(e instanceof Xn)for(var n=0;n<e.children.length;n++)this.updateDiagramContainerVisibility(e.children[n],t);e.visible=t},t.prototype.updateElementVisibility=function(e,t,n){if(void 0!==n){if(e.visible=n,t instanceof sa){if(t.children)for(var i=0,r=t.children;i<r.length;i++){var o=r[i];this.updateElementVisibility(this.nameTable[o].wrapper,this.nameTable[o],n)}else e.children[0].visible=n,this.updateDiagramContainerVisibility(e.children[0],n),"Bpmn"===t.shape.type&&this.bpmnModule&&this.bpmnModule.updateElementVisibility(t,n,this);if(t.ports)for(var s=0,a=t.ports;s<a.length;s++){var l=a[s];l.visibility&vn.Visible&&((f=this.getWrapper(e,l.id)).visible=n)}if(t.annotations)for(var c=0,h=t.annotations;c<h.length;c++)(f=this.getWrapper(e,h[c].id)).visible=n}else for(var d=0;d<3;d++)e.children[d].visible=n;if(t.annotations)for(var u=0,p=t.annotations;u<p.length;u++)(f=this.getWrapper(e,p[u].id)).visible=n;if(t.expandIcon||t.collapseIcon){var f;if(f=this.getWrapper(e,"icon_content")){for(d=0;d<f.children.length;d++)f.children[d].visible=n;f.visible=n}t&&t.visible&&t.outEdges&&this.updateIconVisibility(t,0!==t.outEdges.length)}!1===n&&this.unSelect(this.nameTable[e.id]),(t instanceof sa&&!this.preventNodesUpdate||t instanceof uo&&!this.preventConnectorsUpdate)&&this.diagramActions&&this.updateDiagramObject(this.nameTable[e.id])}},t.prototype.updateAnnotations=function(e,t){if(void 0!==e.annotations)for(var n=0,i=Object.keys(e.annotations);n<i.length;n++){var r=i[n],o=Number(r);this.updateAnnotation(e.annotations[r],t.annotations[o],t.wrapper,t)}},t.prototype.updateAnnotation=function(e,t,n,i,r){var o,s=!1;if(void 0!==(o=this.getWrapper(n,t.id))){if(void 0!==e.width&&void 0!==e.height&&(o.width=e.width,o.height=e.height,s=!0),void 0!==e.rotateAngle&&(o.rotateAngle=e.rotateAngle),!r||o instanceof Gr||o.refreshTextElement(),t instanceof ii&&void 0!==e.segmentAngle&&(o.rotateAngle=t.rotateAngle),t instanceof ni&&void 0!==e.offset){var a=e.offset;s=!0,o.setOffsetWithRespectToBounds(void 0!==a.x?a.x:t.offset.x,void 0!==a.y?a.y:t.offset.y,"Fraction"),o.relativeMode="Point"}else t instanceof ii&&(void 0!==e.offset||void 0!==e.segmentAngle)&&i.updateAnnotation(t,i.intermediatePoints,i.wrapper.bounds,o);if(t instanceof ii&&e.displacement&&(void 0===e.displacement.x&&void 0===e.displacement.y||(s=!0)),void 0!==e.margin&&(s=!0,void 0!==e.margin.bottom&&(o.margin.bottom=e.margin.bottom),void 0!==e.margin.top&&(o.margin.top=e.margin.top),void 0!==e.margin.left&&(o.margin.left=e.margin.left),void 0!==e.margin.right&&(o.margin.right=e.margin.right)),(s||r)&&(o.width=t.width||i.width,t.template&&(o.width=o.width||o.actualSize.width,o.height=t.height||i.height||o.actualSize.height)),void 0!==e.horizontalAlignment&&(o.horizontalAlignment=e.horizontalAlignment,s=!0),void 0!==e.verticalAlignment&&(o.verticalAlignment=e.verticalAlignment,s=!0),void 0!==e.visibility&&(o.visible=!(!n.visible||!e.visibility)),void 0!==e.constraints){var l=!1;o.constraints&xn.Select&&!(e.constraints&xn.Select)&&wc(this,i,!1,o)&&(l=!0),o.constraints=e.constraints,l&&this.clearSelection()}void 0!==e.style&&Va(e.style,o),void 0!==e.hyperlink&&function(e,t,n){for(var i=o,r=i.hyperlink,s=0,a=Object.keys(e);s<a.length;s++)switch(a[s]){case"color":i.style.color=r.color=e.color;break;case"content":i.content=r.content=e.content||r.link;break;case"link":i.style.color=e.link?r.color:n.style.color,i.style.textDecoration=e.link?r.textDecoration:n.style.textDecoration,i.content=e.link?r.content||e.link:n.content,r.link=e.link;break;case"textDecoration":i.style.textDecoration=r.textDecoration=e.textDecoration}}(e.hyperlink,0,t),this.updateAnnotationContent(e,s,o,i,t,n),!0===s&&(o.measure(new Xt(o.width,o.height)),o.arrange(o.desiredSize)),o instanceof Gr||o.refreshTextElement()}},t.prototype.updateAnnotationContent=function(e,t,n,i,r,o){void 0!==e.content&&(n&&(n.content="UmlActivity"===i.shape.type&&"StructuredNode"===i.shape.shape?"<<"+e.content+">>":e.content),n instanceof Gr&&this.updateAnnotationWrapper(n,i,r,o)),void 0!==e.template&&(n.content=e.template,this.updateAnnotationWrapper(n,i,r,o))},t.prototype.updateAnnotationWrapper=function(e,t,n,i){for(var r=0,o=this.views;r<o.length;r++){var s=o[r];Ll(e.id+"_groupElement",s),Ll(e.id+"_html_element",s)}if(t instanceof sa)e=t.initAnnotationWrapper(n,this.element.id);else if(t instanceof uo){var a=t.wrapper.children[0],l=new an(a.offsetX-a.width/2,a.offsetY-a.height/2,a.width,a.height);e=t.getAnnotationElement(t.annotations[t.annotations.length-1],t.intermediatePoints,l,this.getDescription,this.element.id)}for(var c=0;c<i.children.length;c++)e.id===i.children[c].id&&i.children.splice(c,1,e)},t.prototype.updatePort=function(e,t,n){var i,r=!1;if(void 0!==(i=this.getWrapper(n,t.id))){if(void 0!==e.offset&&(r=!0,i.setOffsetWithRespectToBounds(void 0!==e.offset.x?e.offset.x:t.offset.x,void 0!==e.offset.y?e.offset.y:t.offset.y,"Fraction"),i.relativeMode="Point"),void 0!==e.width&&(r=!0,i.width=e.width),void 0!==e.height&&(r=!0,i.height=e.height),void 0!==e.visibility&&(i.visible=!(!n.visible||!Ja(t,vn.Visible))),void 0!==e.margin&&(r=!0,void 0!==e.margin.bottom&&(i.margin.bottom=e.margin.bottom),void 0!==e.margin.top&&(i.margin.top=e.margin.top),void 0!==e.margin.right&&(i.margin.right=e.margin.right),void 0!==e.margin.left&&(i.margin.left=e.margin.left)),void 0!==e.horizontalAlignment&&(r=!0,i.horizontalAlignment=e.horizontalAlignment),void 0!==e.verticalAlignment&&(r=!0,i.verticalAlignment=e.verticalAlignment),void 0!==e.style&&(void 0!==e.style.fill&&(i.style.fill=e.style.fill),void 0!==e.style.opacity&&(i.style.opacity=e.style.opacity),void 0!==e.style.strokeColor&&(i.style.strokeColor=e.style.strokeColor),void 0!==e.style.strokeWidth&&(i.style.strokeWidth=e.style.strokeWidth),void 0!==e.style.strokeDashArray&&(i.style.strokeDashArray=e.style.strokeDashArray)),void 0!==e.shape&&i){var o=li(e.shape);i.data=o}void 0!==e.pathData&&(i.data=String(e.pathData),r=!0),!0===r&&(i.measure(new Xt(i.width,i.height)),i.arrange(i.desiredSize))}},t.prototype.updateIcon=function(e){var t=this.getWrapper(e.wrapper,"icon_content"),n=this.diagramActions&Tn.Render?this.element.id:void 0;if(t){if("SVG"===this.mode){var i=bl(e.wrapper.id+"_icon_content",n);if(i){var r=bl(i.id+"_rect",n),o=bl(i.id+"_shape",n),s=bl(o.id+"_native_element",n);s&&s.parentNode.removeChild(s),o.parentNode.removeChild(o),r.parentNode.removeChild(r),i.parentNode.removeChild(i)}}var a=e.wrapper.children.indexOf(t);e.wrapper.children.splice(a,1)}var l=this.getPortContainer(e);e.initIcons(this.getDescription,this.layout,l,this.element.id)},t.prototype.getPortContainer=function(e){if(e.children)for(var t=0;t<e.wrapper.children.length;t++)if(e.wrapper.children[t].id===e.id+"group_container")return e.wrapper.children[t];return e.wrapper},t.prototype.updateTooltip=function(e,t){void 0!==t.tooltip.content&&(e.tooltip.content=t.tooltip.content),void 0!==t.tooltip.position&&(e.tooltip.position=t.tooltip.position),void 0!==t.tooltip.height&&(e.tooltip.height=t.tooltip.height),void 0!==t.tooltip.width&&(e.tooltip.width=t.tooltip.width),void 0!==t.tooltip.showTipPointer&&(e.tooltip.showTipPointer=t.tooltip.showTipPointer)},t.prototype.updateQuad=function(e){this.spatialSearch.updateQuad(e.wrapper)&&!this.preventUpdate&&this.updatePage()},t.prototype.removeFromAQuad=function(e){if(e.children)for(var t=void 0,n=e.children,i=0;i<n.length;i++)(t=this.nameTable[n[i]])&&this.removeFromAQuad(t);this.spatialSearch.removeFromAQuad(e.wrapper),this.spatialSearch.updateBounds(e.wrapper)&&!this.preventUpdate&&this.updatePage()},t.prototype.updateGroupSize=function(e){var t;e.parentId&&(t=this.nameTable[e.parentId])&&(t.parentId?this.updateGroupSize(t):(t.wrapper.measure(new Xt),t.wrapper.arrange(t.wrapper.desiredSize),this.updateGroupOffset(t),this.updateDiagramObject(t)))},t.prototype.updatePage=function(){if(this.diagramActions&Tn.Render){this.scroller.updateScrollOffsets(),this.scroller.setSize();for(var e=0,n=this.views;e<n.length;e++){var i=this.views[n[e]];i instanceof t||i.updateView(i)}}},t.prototype.protectPropertyChange=function(e){this.isProtectedOnChange=e},t.prototype.updateShadow=function(e,t){void 0!==t.angle&&(e.angle=t.angle),void 0!==t.color&&(e.color=t.color),void 0!==t.distance&&(e.distance=t.distance),void 0!==t.opacity&&(e.opacity=t.opacity)},t.prototype.updateMargin=function(e,t){void 0!==t.margin.top&&(e.margin.top=t.margin.top),void 0!==t.margin.bottom&&(e.margin.bottom=t.margin.bottom),void 0!==t.margin.left&&(e.margin.left=t.margin.left),void 0!==t.margin.right&&(e.margin.right=t.margin.right)},t.prototype.initDroppables=function(){var e,t,n=this,i={},r={};this.droppable=new ft(this.element),this.droppable.over=function(o){if(n.currentSymbol)o.event.touches&&o.event.touches.length&&n.eventHandler.mouseMove(o.event,o.event.touches);else if(o.dragData){var s=void 0,a=void 0;document.getElementById(n.element.id+"content").focus();var l=n.eventHandler.getMousePosition(o.event),c=void 0,h=o.dragData.helper,d=h.getAttribute("paletteId");if(d){var u=document.getElementById(d).ej2_instances[0];if(n.droppable.sourceElement=u,u){var p=u.selectedSymbols;c=Ul(u.selectedSymbols),i=u.childTable;var f=p.wrapper.children[0].children[0];if(u.selectedSymbols instanceof sa){c.offsetX=l.x+5+(c.width||f.actualSize.width)/2,c.offsetY=l.y+(c.height||f.actualSize.height)/2;var g=new sa(n,"nodes",c,!0);if("Bpmn"===g.shape.type&&g.shape.activity.subProcess.processes&&g.shape.activity.subProcess.processes.length&&(g.shape.activity.subProcess.processes=[]),"SwimLane"===g.shape.type){if(n.diagramActions|=Tn.PreventHistory,g.shape.isLane){g.children=[],e={id:"header"+zl()},"Horizontal"===g.shape.orientation?(e.width=g.shape.lanes[0].header.width,e.height=g.shape.lanes[0].height):(e.width=g.shape.lanes[0].width,e.height=g.shape.lanes[0].header.height),e.style=g.shape.lanes[0].header.style,e.offsetX=l.x+5+e.width/2,e.offsetY=l.y+e.height/2,e=n.add(e),t={id:"body"+zl()},"Horizontal"===g.shape.orientation?(t.width=g.shape.lanes[0].width-e.width,t.height=g.shape.lanes[0].height,t.offsetX=l.x+5+(g.shape.lanes[0].header.width+t.width/2),t.offsetY=l.y+t.height/2):(t.width=g.shape.lanes[0].width,t.height=g.shape.lanes[0].height-e.height,t.offsetX=l.x+5+t.width/2,t.offsetY=l.y+(g.shape.lanes[0].header.height+t.height/2)),t.style=g.shape.lanes[0].style,t=n.add(t);var m={id:"group"+zl(),children:[e.id,t.id]};m.shape=g.shape,m.width=g.shape.lanes[0].width,m.height=g.shape.lanes[0].height,g=n.add(m)}n.diagramActions&=~Tn.PreventHistory}if(g.shape.isPhase&&((a="Horizontal"===g.shape.orientation)?(g.offsetX=l.x+5+(g.width||f.actualSize.width)/2,g.offsetY=l.y,g.shape.data="M20,"+g.height/2+" L"+(g.width-20)+","+g.height/2+"z",g.height=1):(g.offsetX=l.x+5,g.offsetY=l.y+(g.height||f.actualSize.height)/2,g.shape.data="M"+g.width/2+",20 L"+g.width/2+","+(g.height-20)+"z",g.width=1)),s=g,c.children){var y=c;r=n.getChildren(y,{},i),rl(y,-y.offsetX,-y.offsetY,r,!0,n)}}else if(u.selectedSymbols instanceof uo){s=new uo(n,"connectors",c,!0);var v=an.toBounds([s.sourcePoint,s.targetPoint]),b=l.x-v.left,w=l.y-v.top;s.sourcePoint.x+=b,s.sourcePoint.y+=w,s.targetPoint.x+=b,s.targetPoint.y+=w}s.shape.isLane||(s.id+=zl());var C={source:u,element:s,cancel:!1,diagram:n};if(n.enterObject=s,n.enterTable=r,n.triggerEvent(Ln.dragEnter,C),s instanceof sa&&"SwimLane"===s.shape.type&&s.shape.isLane){var x,A,S=C.element,O=S.shape.lanes[0];x=n.nameTable[s.children[0]],A=n.nameTable[s.children[1]],(a="Horizontal"===S.shape.orientation)?(e.width=O.header.width,e.height=O.height,t.width=O.width-e.width,t.height=O.height,t.offsetX=l.x+5+(O.header.width+A.width/2),t.offsetY=l.y+A.height/2):(e.width=O.width,e.height=O.header.height,t.width=O.width,t.height=O.height-e.height,t.offsetX=l.x+5+A.width/2,t.offsetY=l.y+(O.header.height+A.height/2)),e.offsetX=l.x+5+x.width/2,e.offsetY=l.y+x.height/2,s.width=O.width,s.height=O.height}s instanceof sa&&s.shape.isPhase&&(a?s.height=1:s.width=1),n.activeLayer.lock||C.cancel||(n.preventUpdate=!0,s.children&&n.findChild(s,r),n.preventUpdate=!0,-1!==s.zIndex&&(s.zIndex=-1),n.initObject(s,void 0,void 0,!0),n.currentSymbol=s,"SVG"!==n.mode&&n.refreshDiagramLayer(),n.commandHandler.select(s),n.eventHandler.mouseDown(o.event),n.eventHandler.mouseMove(o.event,o),n.preventUpdate=!1,n.updatePage(),h.style.opacity="0"),delete n.enterObject,delete n.enterTable}n.droppable.selectedSymbols=h}}},this.droppable.drop=function(e){var t;if(n.currentSymbol){var i,r,o=!1;r=n.currentSymbol instanceof uo,e.event.touches&&n.eventHandler.mouseUp(e.event);var s=void 0;n.triggerEvent(Ln.drop,h={source:n.droppable.sourceElement,element:n.currentSymbol,target:n.eventHandler.hoverNode||n.eventHandler.lastObjectUnderMouse||n,cancel:!1,position:{x:n.currentSymbol.wrapper.offsetX,y:n.currentSymbol.wrapper.offsetY}});var a=void 0,l="id";if((a=Ul(n.currentSymbol)).hasTarget=n.currentSymbol.hasTarget,n.removeFromAQuad(n.currentSymbol),n.removeObjectsFromLayer(n.nameTable[n.currentSymbol.id]),n.removeElements(n.currentSymbol),(n.currentSymbol.shape.isLane||n.currentSymbol.shape.isPhase)&&n.removeChildInNodes(n.currentSymbol),h.cancel&&Ba(n.currentSymbol,n),n.currentSymbol.shape.isPhase&&(o=!0,i=n.currentSymbol.shape.orientation),delete n.nameTable[n.currentSymbol.id],n.currentSymbol=null,n.protectPropertyChange(!0),!h.cancel){if(n.startGroupAction(),a&&(a.shape.isLane||o)&&(o&&(a.shape.isPhase=o,a.shape.orientation=i),n.eventHandler.addSwimLaneObject(a)),"Bpmn"===a.shape.type&&a.shape.annotation&&a.hasTarget){var c=a.shape.annotation.nodeId;a.shape.annotation.id=a.id,n.addTextAnnotation(a.shape.annotation,n.nameTable[c]),a.nodeId=""}a.shape.isLane||o||(a.children&&n.addChildNodes(a),h.target&&h.target instanceof sa&&!r&&Ko(n,h.target)&&Io(h.target)?es(n,h.target,a):t=n.add(a,!0),(a||t)&&ko(n)&&n.select([n.nameTable[a[l]]]))}n.protectPropertyChange(!1),s=n.nameTable[a[l]],a.hasTarget&&(a.nodeId=a.hasTarget,n.remove(a)),n.bpmnModule&&s instanceof sa&&a.processId&&(s.processId=a.processId,n.bpmnModule.dropBPMNchild(n.nameTable[s.processId],s,n)),n.endGroupAction(),"SVG"!==n.mode&&n.refreshDiagramLayer(),delete n.droppable.sourceElement,B(n.droppable.selectedSymbols)}else{var h;n.triggerEvent(Ln.drop,h={source:e.droppedElement,element:void 0,target:n.eventHandler.hoverNode||n.eventHandler.lastObjectUnderMouse||n,cancel:!1,position:void 0}),a=void 0,l="id"}},this.droppable.out=function(e){n.currentSymbol&&!n.eventHandler.focus&&(n.unSelect(n.currentSymbol),n.removeFromAQuad(n.currentSymbol),"SVG"!==n.mode&&"Native"===n.currentSymbol.shape.type&&n.removeElements(n.currentSymbol),n.removeObjectsFromLayer(n.nameTable[n.currentSymbol.id]),delete n.nameTable[n.currentSymbol.id],n.triggerEvent(Ln.dragLeave,{element:n.currentSymbol,diagram:n}),"SVG"!==n.mode?n.refreshDiagramLayer():n.removeElements(n.currentSymbol),n.currentSymbol=null,n.droppable.selectedSymbols.style.opacity="1",delete n.droppable.sourceElement,n.diagramRenderer.rendererActions=n.removeConstraints(n.diagramRenderer.rendererActions,Mn.DrawSelectorBorder),n.previousSelectedObject&&n.select(n.previousSelectedObject,n.previousSelectedObject.length>1),n.previousSelectedObject=null)}},t.prototype.removeChildInNodes=function(e){if(e){if(e.children)for(var t=0;t<e.children.length;t++)this.removeChildInNodes(this.nameTable[e.children[t]]);var n=this.nodes.indexOf(e);-1!==n&&this.nodes.splice(n,1)}},t.prototype.findChild=function(e,t){for(var n,i,r=0;r<e.children.length;r++)(n=t[e.children[r]])&&(n.children&&this.findChild(n,t),n.id=n.id+zl(),t[n.id]=n,e.children[r]=n.id,i=new sa(this,"nodes",n,!0),this.initObject(i,void 0,void 0,!0))},t.prototype.getChildren=function(e,t,n){for(var i,r=0;r<e.children.length;r++)(i=n[e.children[r]])&&(i.children&&(t=this.getChildren(i,t,n)),t[i.id]=Ul(i));return t},t.prototype.addChildNodes=function(e){for(var t,n=0;n<e.children.length;n++)(t=this.nameTable[e.children[n]])&&(t.children&&this.addChildNodes(t),this.add(t,!0))},t.prototype.moveNode=function(e){for(var t,n=this.commandHandler.getObjectLayer(e.id),i=n.zIndex,r=n.objects.length,o=0;o<this.layers.length;o++)i===this.layers[o].zIndex&&(t=this.layers[o+1]);if(r>1)this.commandHandler.moveSvgNode(e.id,n.objects[r-2]),this.commandHandler.moveSvgNode(n.objects[r-2],e.id);else if(t){var s=this.commandHandler.getLayer(this.layerZIndexTable[t.zIndex]).objects[0];s?this.commandHandler.moveSvgNode(e.id,s):this.moveObjectsUp(e,n)}else this.moveObjectsUp(e,n)},t.prototype.moveObjectsUp=function(e,t){for(var n,i=this.layers.length-1;i>=0;i--)if(t.id!==(n=this.layers[i]).id){var r=this.commandHandler.getLayer(this.layerZIndexTable[n.zIndex]).objects[n.objects.length-1];if(r){this.commandHandler.moveSvgNode(e.id,r),this.commandHandler.moveSvgNode(r,e.id);break}}},t.prototype.insertData=function(e){return this.crudOperation(e,"create",this.getNewUpdateNodes("New"))},t.prototype.updateData=function(e){return this.crudOperation(e,"update",this.getNewUpdateNodes("Update"))},t.prototype.removeData=function(e){return this.crudOperation(e,"destroy",this.getDeletedNodes())},t.prototype.crudOperation=function(e,t,n){if(e){var i=this.parameterMap(e,!(e instanceof uo));if(i){var r=e instanceof uo?this.dataSourceSettings.connectionDataSource.crudAction[t]:this.dataSourceSettings.crudAction[t];this.raiseAjaxPost(JSON.stringify(i),r)}return i}var o=n;return this.processCrudCollection(o,this.dataSourceSettings.crudAction[t],this.dataSourceSettings.connectionDataSource.crudAction[t]),o},t.prototype.processCrudCollection=function(e,t,n){if(e.nodes){var i=[],r=void 0;for(r=0;r<e.nodes.length;r++)i.push(this.parameterMap(e.nodes[r],!0));i&&i.length>0&&this.raiseAjaxPost(JSON.stringify(i),t)}if(e.connectors){for(i=[],r=void 0,r=0;r<e.connectors.length;r++)i.push(this.parameterMap(e.connectors[r],!1));i&&i.length>0&&this.raiseAjaxPost(JSON.stringify(i),n)}},t.prototype.parameterMap=function(e,t){var n,i={},r=t?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource;if(r.id&&(i[r.id]=e.id),r.sourcePointX&&r.sourcePointY&&(i[r.sourcePointX]=e.sourcePoint.x,i[r.sourcePointY]=e.sourcePoint.y),r.targetPointX&&r.targetPointY&&(i[r.targetPointX]=e.targetPoint.x,i[r.targetPointY]=e.targetPoint.y),r.sourceID&&(i[r.sourceID]=e.sourceID),r.targetID&&(i[r.targetID]=e.targetID),r.crudAction&&r.crudAction.customFields&&r.crudAction.customFields.length>0)for(n=0;n<r.crudAction.customFields.length;n++)i[r.crudAction.customFields[n]]=e[r.crudAction.customFields[n]];return i},t.prototype.getNewUpdateNodes=function(e){var t=[],n=[];for(var i in this.nameTable){var r=this.nameTable[i];r.status==e&&(r&&r instanceof uo?(r.status="None",n.push(r)):(r.status="None",t.push(r)))}return{nodes:t,connectors:n}},t.prototype.getDeletedNodes=function(){var e,t=[],n=[];for(e=0;e<this.crudDeleteNodes.length;e++){var i=this.crudDeleteNodes[e];i&&i.segments?n.push(i):i&&t.push(i)}return this.crudDeleteNodes=[],{nodes:t,connectors:n}},t.prototype.raiseAjaxPost=function(e,t){var n=new E(t,"POST",!0,"application/json"),i=JSON.stringify(JSON.parse(e));n.send(i).then(),n.onSuccess=function(e){}},Object(s.b)([ye("100%")],t.prototype,"width",void 0),Object(s.b)([ye("SVG")],t.prototype,"mode",void 0),Object(s.b)([ye("100%")],t.prototype,"height",void 0),Object(s.b)([ve({},Sa)],t.prototype,"contextMenuSettings",void 0),Object(s.b)([ye(En.Default)],t.prototype,"constraints",void 0),Object(s.b)([ye(In.Default)],t.prototype,"tool",void 0),Object(s.b)([ye("Top")],t.prototype,"bridgeDirection",void 0),Object(s.b)([ye("transparent")],t.prototype,"backgroundColor",void 0),Object(s.b)([ve({},hc)],t.prototype,"snapSettings",void 0),Object(s.b)([ve({},uc)],t.prototype,"rulerSettings",void 0),Object(s.b)([ve({},sc)],t.prototype,"pageSettings",void 0),Object(s.b)([ve({},Yc)],t.prototype,"serializationSettings",void 0),Object(s.b)([we([],sa)],t.prototype,"nodes",void 0),Object(s.b)([ye()],t.prototype,"drawingObject",void 0),Object(s.b)([we([],uo)],t.prototype,"connectors",void 0),Object(s.b)([ye([])],t.prototype,"basicElements",void 0),Object(s.b)([ve({},ir)],t.prototype,"tooltip",void 0),Object(s.b)([ve({},gc)],t.prototype,"dataSourceSettings",void 0),Object(s.b)([ye()],t.prototype,"addInfo",void 0),Object(s.b)([ye()],t.prototype,"historyManager",void 0),Object(s.b)([ye()],t.prototype,"getNodeDefaults",void 0),Object(s.b)([ye()],t.prototype,"getConnectorDefaults",void 0),Object(s.b)([ye()],t.prototype,"setNodeTemplate",void 0),Object(s.b)([ye()],t.prototype,"getDescription",void 0),Object(s.b)([ye()],t.prototype,"getCustomProperty",void 0),Object(s.b)([ye()],t.prototype,"getCustomTool",void 0),Object(s.b)([ye()],t.prototype,"getCustomCursor",void 0),Object(s.b)([ye()],t.prototype,"updateSelection",void 0),Object(s.b)([ve({},fo)],t.prototype,"selectedItems",void 0),Object(s.b)([ve({},ac)],t.prototype,"scrollSettings",void 0),Object(s.b)([ve({},mc)],t.prototype,"layout",void 0),Object(s.b)([ve({},Aa)],t.prototype,"commandManager",void 0),Object(s.b)([xe()],t.prototype,"dataLoaded",void 0),Object(s.b)([xe()],t.prototype,"dragEnter",void 0),Object(s.b)([xe()],t.prototype,"dragLeave",void 0),Object(s.b)([xe()],t.prototype,"dragOver",void 0),Object(s.b)([xe()],t.prototype,"click",void 0),Object(s.b)([xe()],t.prototype,"historyChange",void 0),Object(s.b)([xe()],t.prototype,"doubleClick",void 0),Object(s.b)([xe()],t.prototype,"textEdit",void 0),Object(s.b)([xe()],t.prototype,"scrollChange",void 0),Object(s.b)([xe()],t.prototype,"selectionChange",void 0),Object(s.b)([xe()],t.prototype,"sizeChange",void 0),Object(s.b)([xe()],t.prototype,"connectionChange",void 0),Object(s.b)([xe()],t.prototype,"sourcePointChange",void 0),Object(s.b)([xe()],t.prototype,"targetPointChange",void 0),Object(s.b)([xe()],t.prototype,"propertyChange",void 0),Object(s.b)([xe()],t.prototype,"positionChange",void 0),Object(s.b)([xe()],t.prototype,"animationComplete",void 0),Object(s.b)([xe()],t.prototype,"rotateChange",void 0),Object(s.b)([xe()],t.prototype,"collectionChange",void 0),Object(s.b)([xe()],t.prototype,"expandStateChange",void 0),Object(s.b)([xe()],t.prototype,"created",void 0),Object(s.b)([xe()],t.prototype,"mouseEnter",void 0),Object(s.b)([xe()],t.prototype,"mouseLeave",void 0),Object(s.b)([xe()],t.prototype,"mouseOver",void 0),Object(s.b)([xe()],t.prototype,"contextMenuOpen",void 0),Object(s.b)([xe()],t.prototype,"contextMenuBeforeItemRender",void 0),Object(s.b)([xe()],t.prototype,"contextMenuClick",void 0),Object(s.b)([we([],Uc)],t.prototype,"layers",void 0),Object(s.b)([xe()],t.prototype,"drop",void 0),t}(ht),Zc=function(){function e(e){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof e?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this}return e.prototype.setKey=function(e){return this.key=e,this},e.prototype.using=function(e){return this.dataManager=e,this},e.prototype.execute=function(e,t,n,i){return(e=e||this.dataManager)?e.executeQuery(this,t,n,i):Jc.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.executeLocal=function(e){return(e=e||this.dataManager)?e.executeLocal(this):Jc.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.clone=function(){var t=new e;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t},e.prototype.from=function(e){return this.fromTable=e,this},e.prototype.addParams=function(e,t){return this.params.push("function"==typeof t?{key:e,fn:t}:{key:e,value:t}),this},e.prototype.distinct=function(e){return this.distincts="string"==typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.expand=function(e){return this.expands="string"==typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.where=function(e,t,n,i,r){t=t?t.toLowerCase():null;var o=null;return"string"==typeof e?o=new Kc(e,t,n,i,r):e instanceof Kc&&(o=e),this.queries.push({fn:"onWhere",e:o}),this},e.prototype.search=function(e,t,n,i,r){return"string"==typeof t&&(t=[t]),this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:n=n||"contains",searchKey:e,ignoreCase:i,ignoreAccent:r,comparer:Jc.fnOperators[n]}}),this},e.prototype.sortBy=function(t,n,i){var r,o,s="ascending";if("string"==typeof t&&Jc.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),n="descending"),n&&"string"!=typeof n||(s=n?n.toLowerCase():"ascending",n=Jc.fnSort(n)),i){r=e.filterQueries(this.queries,"onSortBy");for(var a=0;a<r.length;a++)if("string"==typeof(o=r[a].e.fieldName)){if(o===t)return this}else if(o instanceof Array)for(var l=0;l<o.length;l++)if(o[l]===t||t.toLowerCase()===o[l]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:n,direction:s}}),this},e.prototype.sortByDesc=function(e){return this.sortBy(e,"descending")},e.prototype.group=function(e,t,n){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:n||null}}),this},e.prototype.page=function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},e.prototype.range=function(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},e.prototype.take=function(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this},e.prototype.skip=function(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this},e.prototype.select=function(e){return"string"==typeof e&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},e.prototype.hierarchy=function(e,t){return this.subQuerySelector=t,this.subQuery=e,this},e.prototype.foreignKey=function(e){return this.fKey=e,this},e.prototype.requiresCount=function(){return this.isCountRequired=!0,this},e.prototype.aggregate=function(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this},e.filterQueries=function(e,t){return e.filter(function(e){return e.fn===t})},e.filterQueryLists=function(e,t){for(var n=e.filter(function(e){return-1!==t.indexOf(e.fn)}),i={},r=0;r<n.length;r++)i[n[r].fn]||(i[n[r].fn]=n[r].e);return i},e}(),Kc=function(){function e(t,n,i,r,o){return void 0===r&&(r=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof t?(this.field=t,this.operator=n.toLowerCase(),this.value=i,this.ignoreCase=r,this.ignoreAccent=o,this.isComplex=!1,this.comparer=Jc.fnOperators.processOperator(this.operator)):(t instanceof e&&i instanceof e||i instanceof Array)&&(this.isComplex=!0,this.condition=n.toLowerCase(),this.predicates=[t],i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}return e.and=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.combinePredicates([].slice.call(t,0),"and")},e.prototype.and=function(t,n,i,r,o){return e.combine(this,t,n,i,"and",r,o)},e.or=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.combinePredicates([].slice.call(t,0),"or")},e.prototype.or=function(t,n,i,r,o){return e.combine(this,t,n,i,"or",r,o)},e.fromJson=function(e){if(e instanceof Array){for(var t=[],n=0,i=e.length;n<i;n++)t.push(this.fromJSONData(e[n]));return t}return this.fromJSONData(e)},e.prototype.validate=function(e){var t,n,i=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,Jc.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);t="and"===this.condition;for(var r=0;r<i.length;r++)if(n=i[r].validate(e),t){if(!n)return!1}else if(n)return!0;return t},e.prototype.toJson=function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var n=0;n<t.length;n++)e.push(t[n].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e}},e.combinePredicates=function(t,n){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new e(t[0],n,t.slice(1))},e.combine=function(t,n,i,r,o,s,a){return n instanceof e?e[o](t,n):"string"==typeof n?e[o](t,new e(n,i,r,s,a)):Jc.throwError("Predicate - "+o+" : invalid arguments")},e.fromJSONData=function(t){for(var n=t.predicates||[],i=n.length,r=[],o=0;o<i;o++)r.push(this.fromJSONData(n[o]));return t.isComplex?new e(r[0],t.condition,r.slice(1)):new e(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)},e}(),Jc=function(){function e(){}return e.getValue=function(e,t){return"function"==typeof e?e.call(t||{}):e},e.endsWith=function(e,t){return e.slice(-t.length)===t},e.startsWith=function(e,t){return e.slice(0,t.length)===t},e.fnSort=function(t){return"ascending"===(t=t?e.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending},e.fnAscending=function(e,t){return null==t?-1:"string"==typeof e?e.localeCompare(t):null==e?1:e-t},e.fnDescending=function(e,t){return null==t?1:"string"==typeof e?-1*e.localeCompare(t):null==e?-1:t-e},e.extractFields=function(e,t){for(var n={},i=0;i<t.length;i++)n=this.setValue(t[i],this.getObject(t[i],e),n);return n},e.select=function(e,t){for(var n=[],i=0;i<e.length;i++)n.push(this.extractFields(e[i],t));return n},e.group=function(t,n,i,r,o,s){r=r||1;var a=t;if("{271bbba0-1ee7}"===a.GroupGuid){for(var l=function(e){if(m(o))a[e].items=c.group(a[e].items,n,i,a.level+1,null,s),a[e].count=a[e].items.length;else{var t,r=o.filter(function(t){return t.key===a[e].key});t=o.indexOf(r[0]),a[e].items=c.group(a[e].items,n,i,a.level+1,o[t].items,s),a[e].count=o[t].count}},c=this,h=0;h<a.length;h++)l(h);return a.childLevels+=1,a}var d={},u=[];u.GroupGuid="{271bbba0-1ee7}",u.level=r,u.childLevels=0,u.records=a;for(var p=function(e){var t=f.getVal(a,e,n);if(m(s)||(t=s(t,n)),!d[t]&&(d[t]={key:t,count:0,items:[],aggregates:{},field:n},u.push(d[t]),!m(o))){var i=o.filter(function(e){return e.key===d[t].key});d[t].count=i[0].count}d[t].count=m(o)?d[t].count+=1:d[t].count,d[t].items.push(a[e])},f=this,g=0;g<a.length;g++)p(g);if(i&&i.length){var y=function(t){for(var n={},r=void 0,s=i,a=0;a<i.length;a++)if(r=e.aggregates[i[a].type],m(o))r&&(n[s[a].field+" - "+s[a].type]=r(u[t].items,s[a].field));else{var l=o.filter(function(e){return e.key===u[t].key});r&&(n[s[a].field+" - "+s[a].type]=r(l[0].items,s[a].field))}u[t].aggregates=n};for(g=0;g<u.length;g++)y(g)}return a.length&&u||a},e.buildHierarchy=function(e,t,n,i,r){var o,s={};for(i.result&&(i=i.result),i.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),o=0;o<i.length;o++)(s[a=this.getObject(e,i[o])]||(s[a]=[])).push(i[o]);for(o=0;o<n.length;o++){var a=this.getObject(r||e,n[o]);n[o][t]=s[a]}},e.getFieldList=function(e,t,n){if(void 0===n&&(n=""),null==t)return this.getFieldList(e,[],n);for(var i=e,r=0,o=Object.keys(e);r<o.length;r++){var s=o[r];"object"!=typeof i[s]||i[s]instanceof Array?t.push(n+s):this.getFieldList(i[s],t,n+s+".")}return t},e.getObject=function(e,t){if(!e)return t;if(t){if(-1===e.indexOf("."))return t[e];for(var n=t,i=e.split("."),r=0;r<i.length&&null!=n;r++)n=n[i[r]];return n}},e.setValue=function(e,t,n){var i,r,o=e.toString().split("."),s=n||{},a=s,l=o.length;for(i=0;i<l;i++)r=o[i],i+1===l?a[r]=void 0===t?void 0:t:m(a[r])&&(a[r]={}),a=a[r];return s},e.sort=function(e,t,n){if(e.length<=1)return e;var i=parseInt((e.length/2).toString(),10),r=e.slice(0,i),o=e.slice(i);return r=this.sort(r,t,n),o=this.sort(o,t,n),this.merge(r,o,t,n)},e.ignoreDiacritics=function(t){return"string"!=typeof t?t:t.split("").map(function(t){return t in e.diacritics?e.diacritics[t]:t}).join("")},e.merge=function(e,t,n,i){for(var r,o=[];e.length>0||t.length>0;)r=e.length>0&&t.length>0?i?i(this.getVal(e,0,n),this.getVal(t,0,n))<=0?e:t:e[0][n]<e[0][n]?e:t:e.length>0?e:t,o.push(r.shift());return o},e.getVal=function(e,t,n){return n?this.getObject(n,e[t]):e[t]},e.toLowerCase=function(e){return e?"string"==typeof e?e.toLowerCase():e.toString():0===e||!1===e?e.toString():""},e.callAdaptorFunction=function(e,t,n,i){if(t in e){var r=e[t](n,i);m(r)||(n=r)}return n},e.getAddParams=function(t,n,i){var r={};return e.callAdaptorFunction(t,"addParams",{dm:n,query:i,params:i.params,reqParams:r}),r},e.isPlainObject=function(e){return!!e&&e.constructor===Object},e.isCors=function(){var e=null;try{e=new window.XMLHttpRequest}catch(t){}return!!e&&"withCredentials"in e},e.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,n){if("crypto"in window&&"getRandomValues"in crypto){var i=new Uint8Array(1);window.crypto.getRandomValues(i),t=i[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===n?3&t|8:t]})},e.isNull=function(e){return null==e},e.getItemFromComparer=function(t,n,i){var r,o,s,a=0,l="string"==typeof e.getVal(t,0,n);if(t.length)for(;m(r)&&a<t.length;)r=e.getVal(t,a,n),s=t[a++];for(;a<t.length;a++)m(o=e.getVal(t,a,n))||(l&&(r=+r,o=+o),i(r,o)>0&&(r=o,s=t[a]));return s},e.distinct=function(t,n,i){i=!m(i)&&i;var r,o=[],s={};return t.forEach(function(a,l){(r=e.getVal(t,l,n))in s||(o.push(i?t[l]:r),s[r]=1)}),o},e.serverTimezoneOffset=null,e.throwError=function(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}},e.aggregates={sum:function(t,n){for(var i,r=0,o="number"!=typeof e.getVal(t,0,n),s=0;s<t.length;s++)i=e.getVal(t,s,n),isNaN(i)||null===i||(o&&(i=+i),r+=i);return r},average:function(t,n){return e.aggregates.sum(t,n)/t.length},min:function(t,n){var i;return"function"==typeof n&&(i=n,n=null),e.getObject(n,e.getItemFromComparer(t,n,i||e.fnAscending))},max:function(t,n){var i;return"function"==typeof n&&(i=n,n=null),e.getObject(n,e.getItemFromComparer(t,n,i||e.fnDescending))},truecount:function(e,t){return new oh(e).executeLocal((new Zc).where(t,"equal",!0,!0)).length},falsecount:function(e,t){return new oh(e).executeLocal((new Zc).where(t,"equal",!1,!0)).length},count:function(e,t){return e.length}},e.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},e.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},e.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},e.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},e.diacritics={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"},e.fnOperators={equal:function(t,n,i,r){return r&&(t=e.ignoreDiacritics(t),n=e.ignoreDiacritics(n)),i?e.toLowerCase(t)===e.toLowerCase(n):t===n},notequal:function(t,n,i,r){return r&&(t=e.ignoreDiacritics(t),n=e.ignoreDiacritics(n)),!e.fnOperators.equal(t,n,i)},lessthan:function(t,n,i){return i?e.toLowerCase(t)<e.toLowerCase(n):t<n},greaterthan:function(t,n,i){return i?e.toLowerCase(t)>e.toLowerCase(n):t>n},lessthanorequal:function(t,n,i){return i?e.toLowerCase(t)<=e.toLowerCase(n):t<=n},greaterthanorequal:function(t,n,i){return i?e.toLowerCase(t)>=e.toLowerCase(n):t>=n},contains:function(t,n,i,r){return r&&(t=e.ignoreDiacritics(t),n=e.ignoreDiacritics(n)),i?!m(t)&&!m(n)&&-1!==e.toLowerCase(t).indexOf(e.toLowerCase(n)):!m(t)&&!m(n)&&-1!==t.toString().indexOf(n)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(t,n,i,r){return r&&(t=e.ignoreDiacritics(t),n=e.ignoreDiacritics(n)),i?t&&n&&e.startsWith(e.toLowerCase(t),e.toLowerCase(n)):t&&n&&e.startsWith(t,n)},endswith:function(t,n,i,r){return r&&(t=e.ignoreDiacritics(t),n=e.ignoreDiacritics(n)),i?t&&n&&e.endsWith(e.toLowerCase(t),e.toLowerCase(n)):t&&n&&e.endsWith(t,n)},processSymbols:function(t){var n=e.operatorSymbols[t];return n?e.fnOperators[n]:e.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){return e.fnOperators[t]||e.fnOperators.processSymbols(t)}},e.parse={parseJson:function(t){return"string"==typeof t?t=JSON.parse(t,e.parse.jsonReviver):t instanceof Array?e.parse.iterateAndReviveArray(t):"object"==typeof t&&null!==t&&e.parse.iterateAndReviveJson(t),t},iterateAndReviveArray:function(t){for(var n=0;n<t.length;n++)"object"==typeof t[n]&&null!==t[n]?e.parse.iterateAndReviveJson(t[n]):t[n]="string"!=typeof t[n]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[n])?e.parse.parseJson(t[n]):e.parse.jsonReviver("",t[n])},iterateAndReviveJson:function(t){for(var n,i=0,r=Object.keys(t);i<r.length;i++){var o=r[i];e.startsWith(o,"__")||("object"==typeof(n=t[o])?n instanceof Array?e.parse.iterateAndReviveArray(n):n&&e.parse.iterateAndReviveJson(n):t[o]=e.parse.jsonReviver(t[o],n))}},jsonReviver:function(t,n){var i=n;if("string"==typeof n){var r=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(n);if(r)return e.dateParse.toTimeZone(new Date(parseInt(r[1],10)),e.serverTimezoneOffset,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(n)){var o=i.split(/[^0-9]/);n=e.dateParse.toTimeZone(new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10)),e.serverTimezoneOffset,!0)}}return n},isJson:function(t){return"string"==typeof t[0]?t:e.parse.parseJson(t)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(t,n){return e.isPlainObject(t)?e.parse.jsonReplacer(t,n):t instanceof Array?e.parse.arrayReplacer(t):t instanceof Date?e.parse.jsonReplacer({val:t},n).val:t},jsonReplacer:function(t,n){for(var i,r=0,o=Object.keys(t);r<o.length;r++){var s=o[r];(i=t[s])instanceof Date&&(t[s]=e.dateParse.toTimeZone(e.dateParse.addSelfOffset(i),e.serverTimezoneOffset).toJSON())}return t},arrayReplacer:function(t){for(var n=0;n<t.length;n++)e.isPlainObject(t[n])?t[n]=e.parse.jsonReplacer(t[n]):t[n]instanceof Date&&(t[n]=e.parse.jsonReplacer({date:t[n]}).date);return t}},e.dateParse={addSelfOffset:function(e){return new Date(+e-6e4*e.getTimezoneOffset())},toUTC:function(e){return new Date(+e+6e4*e.getTimezoneOffset())},toTimeZone:function(t,n,i){if(null===n)return t;var r=i?e.dateParse.toUTC(t):t;return new Date(+r-36e5*n)},toLocalTime:function(e){var t=e,n=-t.getTimezoneOffset(),i=n>=0?"+":"-",r=function(e){var t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return t.getFullYear()+"-"+r(t.getMonth()+1)+"-"+r(t.getDate())+"T"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+i+r(n/60)+":"+r(n%60)}},e}(),$c=function(){function e(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates"},this.type=e,this.dataSource=t,this.pvt={}}return e.prototype.processResponse=function(e,t,n,i){return e},e}(),eh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.processQuery=function(e,t){for(var n,i,r=e.dataSource.json.slice(0),o=r.length,s=!0,a={},l=0;l<t.queries.length;l++)n=this[(i=t.queries[l]).fn].call(this,r,i.e,t),"onAggregates"===i.fn?a[i.e.field+" - "+i.e.type]=n:r=void 0!==n?n:r,"onPage"!==i.fn&&"onSkip"!==i.fn&&"onTake"!==i.fn&&"onRange"!==i.fn||(s=!1),s&&(o=r.length);return t.isCountRequired&&(r={result:r,count:o,aggregates:a}),r},t.prototype.batchRequest=function(e,t,n){var i,r=t.deletedRecords.length;for(i=0;i<t.addedRecords.length;i++)this.insert(e,t.addedRecords[i]);for(i=0;i<t.changedRecords.length;i++)this.update(e,n.key,t.changedRecords[i]);for(i=0;i<r;i++)this.remove(e,n.key,t.deletedRecords[i]);return t},t.prototype.onWhere=function(e,t){return e&&e.length?e.filter(function(e){if(t)return t.validate(e)}):e},t.prototype.onAggregates=function(e,t){var n=Jc.aggregates[t.type];return e&&n&&0!==e.length?n(e,t.field):null},t.prototype.onSearch=function(e,t){return e&&e.length?(0===t.fieldNames.length&&Jc.getFieldList(e[0],t.fieldNames),e.filter(function(e){for(var n=0;n<t.fieldNames.length;n++)if(t.comparer.call(e,Jc.getObject(t.fieldNames[n],e),t.searchKey,t.ignoreCase,t.ignoreAccent))return!0;return!1})):e},t.prototype.onSortBy=function(e,t,n){if(!e||!e.length)return e;var i,r=Jc.getValue(t.fieldName,n);if(!r)return e.sort(t.comparer);if(r instanceof Array){for(var o=(r=r.slice(0)).length-1;o>=0;o--)r[o]&&(i=t.comparer,Jc.endsWith(r[o]," desc")&&(i=Jc.fnSort("descending"),r[o]=r[o].replace(" desc","")),e=Jc.sort(e,r[o],i));return e}return Jc.sort(e,r,t.comparer)},t.prototype.onGroup=function(e,t,n){if(!e||!e.length)return e;var i=Zc.filterQueries(n.queries,"onAggregates"),r=[];if(i.length)for(var o=void 0,s=0;s<i.length;s++)r.push({type:(o=i[s].e).type,field:Jc.getValue(o.field,n)});return Jc.group(e,Jc.getValue(t.fieldName,n),r,null,null,t.comparer)},t.prototype.onPage=function(e,t,n){var i=Jc.getValue(t.pageSize,n),r=(Jc.getValue(t.pageIndex,n)-1)*i;return e&&e.length?e.slice(r,r+i):e},t.prototype.onRange=function(e,t){return e&&e.length?e.slice(Jc.getValue(t.start),Jc.getValue(t.end)):e},t.prototype.onTake=function(e,t){return e&&e.length?e.slice(0,Jc.getValue(t.nos)):e},t.prototype.onSkip=function(e,t){return e&&e.length?e.slice(Jc.getValue(t.nos)):e},t.prototype.onSelect=function(e,t){return e&&e.length?Jc.select(e,Jc.getValue(t.fieldNames)):e},t.prototype.insert=function(e,t,n,i,r){return m(r)?e.dataSource.json.push(t):e.dataSource.json.splice(r,0,t)},t.prototype.remove=function(e,t,n,i){var r,o=e.dataSource.json;for("object"==typeof n&&(n=n[t]),r=0;r<o.length&&o[r][t]!==n;r++);return r!==o.length?o.splice(r,1):null},t.prototype.update=function(e,t,n,i){var r,o=e.dataSource.json,s=n[t];for(r=0;r<o.length&&o[r][t]!==s;r++);return r<o.length?f(o[r],n):null},t}($c),th=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.processQuery=function(e,t,n){var i,r,o=this.getQueryRequest(t),s=Zc.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),a=t.params,l=e.dataSource.url,c=null,h=this.options,d={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in s?r=((r=Jc.getValue((i=s.onPage).pageIndex,t))-1)*(c=Jc.getValue(i.pageSize,t)):"onRange"in s&&(r=(i=s.onRange).start,c=i.end-i.start);for(var u=0;u<o.sorts.length;u++)i=Jc.getValue(o.sorts[u].e.fieldName,t),d.sorts.push(Jc.callAdaptorFunction(this,"onEachSort",{name:i,direction:o.sorts[u].e.direction},t));for(n&&(i=this.getFiltersFrom(n,t))&&d.filters.push(Jc.callAdaptorFunction(this,"onEachWhere",i.toJson(),t)),u=0;u<o.filters.length;u++){d.filters.push(Jc.callAdaptorFunction(this,"onEachWhere",o.filters[u].e.toJson(),t));for(var p=0,f="object"==typeof d.filters[u]?Object.keys(d.filters[u]):[];p<f.length;p++)Jc.isNull(d[v=f[p]])&&delete d[v]}for(u=0;u<o.searches.length;u++)d.searches.push(Jc.callAdaptorFunction(this,"onEachSearch",{fields:(i=o.searches[u].e).fieldNames,operator:i.operator,key:i.searchKey,ignoreCase:i.ignoreCase},t));for(u=0;u<o.groups.length;u++)d.groups.push(Jc.getValue(o.groups[u].e.fieldName,t));for(u=0;u<o.aggregates.length;u++)d.aggregates.push({type:(i=o.aggregates[u].e).type,field:Jc.getValue(i.field,t)});var g={};this.getRequestQuery(h,t,s,d,g),Jc.callAdaptorFunction(this,"addParams",{dm:e,query:t,params:a,reqParams:g});for(var m=0,y=Object.keys(g);m<y.length;m++){var v;(Jc.isNull(g[v=y[m]])||""===g[v]||0===g[v].length)&&delete g[v]}h.skip in g&&h.take in g||null===c||(g[h.skip]=Jc.callAdaptorFunction(this,"onSkip",r,t),g[h.take]=Jc.callAdaptorFunction(this,"onTake",c,t));var b=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(g),url:l,pvtData:b,type:"POST",contentType:"application/json; charset=utf-8"}:(i=this.convertToQueryString(g,t,e),{type:"GET",url:(i=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+i).length?l.replace(/\/*$/,i):l,pvtData:b})},t.prototype.getRequestQuery=function(e,t,n,i,r){var o=r;o[e.from]=t.fromTable,e.apply&&t.distincts.length&&(o[e.apply]="onDistinct"in this?Jc.callAdaptorFunction(this,"onDistinct",t.distincts):""),!t.distincts.length&&e.expand&&(o[e.expand]="onExpand"in this&&"onSelect"in n?Jc.callAdaptorFunction(this,"onExpand",{selects:Jc.getValue(n.onSelect.fieldNames,t),expands:t.expands},t):t.expands),o[e.select]="onSelect"in n&&!t.distincts.length?Jc.callAdaptorFunction(this,"onSelect",Jc.getValue(n.onSelect.fieldNames,t),t):"",o[e.count]=t.isCountRequired?Jc.callAdaptorFunction(this,"onCount",t.isCountRequired,t):"",o[e.search]=i.searches.length?Jc.callAdaptorFunction(this,"onSearch",i.searches,t):"",o[e.skip]="onSkip"in n?Jc.callAdaptorFunction(this,"onSkip",Jc.getValue(n.onSkip.nos,t),t):"",o[e.take]="onTake"in n?Jc.callAdaptorFunction(this,"onTake",Jc.getValue(n.onTake.nos,t),t):"",o[e.where]=i.filters.length||i.searches.length?Jc.callAdaptorFunction(this,"onWhere",i.filters,t):"",o[e.sortBy]=i.sorts.length?Jc.callAdaptorFunction(this,"onSortBy",i.sorts,t):"",o[e.group]=i.groups.length?Jc.callAdaptorFunction(this,"onGroup",i.groups,t):"",o[e.aggregates]=i.aggregates.length?Jc.callAdaptorFunction(this,"onAggregates",i.aggregates,t):"",o.param=[]},t.prototype.convertToQueryString=function(e,t,n){return""},t.prototype.processResponse=function(e,t,n,i,r,o){i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("application/json")&&(e=Jc.parse.parseJson(e));var s=r,a=s.pvtData||{},l=e?e.groupDs:[];if(i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("xml"))return n.isCountRequired?{result:[],count:0}:[];var c=JSON.parse(s.data);if(c&&"batch"===c.action&&e&&e.addedRecords)return o.addedRecords=e.addedRecords,o;e&&e.d&&(e=e.d);var h={};return e&&"count"in e&&(h.count=e.count),h.result=e&&e.result?e.result:e,this.getAggregateResult(a,e,h,l,n),Jc.isNull(h.count)?h.result:{result:h.result,count:h.count,aggregates:h.aggregates}},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,t,n,i,r){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(g({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:n[void 0],key:n[void 0]},Jc.getAddParams(this,e,i)))}},t.prototype.beforeSend=function(e,t){},t.prototype.insert=function(e,t,n,i){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(g({},{value:t,table:n,action:"insert"},Jc.getAddParams(this,e,i)))}},t.prototype.remove=function(e,t,n,i,r){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(g({},{key:n,keyColumn:t,table:i,action:"remove"},Jc.getAddParams(this,e,r)))}},t.prototype.update=function(e,t,n,i,r){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(g({},{value:n,action:"update",keyColumn:t,key:n[t],table:i},Jc.getAddParams(this,e,r)))}},t.prototype.getFiltersFrom=function(e,t){var n,i=t.fKey,r=i,o=t.key,s=[];"object"!=typeof e[0]&&(r=null);for(var a=0;a<e.length;a++)n="object"==typeof e[0]?Jc.getObject(o||r,e[a]):e[a],s.push(new Kc(i,"equal",n));return Kc.or(s)},t.prototype.getAggregateResult=function(e,t,n,i,r){var o=t;if(t&&t.result&&(o=t.result),e&&e.aggregates&&e.aggregates.length){var s=e.aggregates,a=void 0,l=o,c={};t.aggregate&&(l=t.aggregate);for(var h=0;h<s.length;h++)(a=Jc.aggregates[s[h].type])&&(c[s[h].field+" - "+s[h].type]=a(l,s[h].field));n.aggregates=c}if(e&&e.groups&&e.groups.length){var d=e.groups;for(h=0;h<d.length;h++){m(i)||(i=Jc.group(i,d[h]));var u=Zc.filterQueries(r.queries,"onGroup")[h].e;o=Jc.group(o,d[h],e.aggregates,null,i,u.comparer)}n.result=o}return n},t.prototype.getQueryRequest=function(e){var t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=Zc.filterQueries(e.queries,"onSortBy"),t.groups=Zc.filterQueries(e.queries,"onGroup"),t.filters=Zc.filterQueries(e.queries,"onWhere"),t.searches=Zc.filterQueries(e.queries,"onSearch"),t.aggregates=Zc.filterQueries(e.queries,"onAggregates"),t},t.prototype.addParams=function(e){var t=e.reqParams;e.params.length&&(t.params={});for(var n=0,i=e.params;n<i.length;n++){var r=i[n];if(t[r.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");t[r.key]=r.value,r.fn&&(t[r.key]=r.fn.call(e.query,r.key,e.query,e.dm)),t.params[r.key]=t[r.key]}},t}($c),nh=function(e){function t(t){var n=e.call(this)||this;return n.options=g({},n.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),g(n.options,t||{}),n}return Object(s.c)(t,e),t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,n,i){var r,o,s="",a=e.value,l=typeof a,c=e.field?t.getField(e.field):null;if(a instanceof Date&&(a="datetime'"+Jc.parse.replacer(a)+"'"),"string"===l&&(a=encodeURIComponent(a),i&&(c="cast("+c+", 'Edm.String')"),Jc.parse.isGuid(a="'"+a+"'")&&(o="guid"),e.ignoreCase&&(o||(c="tolower("+c+")"),a=a.toLowerCase())),r=Jc.odBiOperator[e.operator])return s+=c,s+=r,o&&(s+=o),s+a;if("substringof"===(r=m(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?Jc.odUniOperator[e.operator]:Jc.odv4UniOperator[e.operator])){var h=a;a=c,c=h}return s+=r+"(",s+=c+",",o&&(s+=o),s+(a+")")},t.prototype.addParams=function(t){e.prototype.addParams.call(this,t),delete t.reqParams.params},t.prototype.onComplexPredicate=function(e,t,n){for(var i=[],r=0;r<e.predicates.length;r++)i.push("("+this.onEachWhere(e.predicates[r],t,n)+")");return i.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,t,n){return e.isComplex?this.onComplexPredicate(e,t,n):this.onPredicate(e,t,n)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&0===e.fields.length&&Jc.throwError("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.search||[],n=0;n<e.fields.length;n++)t.push(new Kc(e.fields[n],e.operator,e.key,e.ignoreCase));this.pvt.search=t},t.prototype.onSearch=function(e){return this.pvt.search=Kc.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var n=[];if(e.name instanceof Array)for(var i=0;i<e.name.length;i++)n.push(t.getField(e.name[i])+("descending"===e.direction?" desc":""));else n.push(t.getField(e.name)+("descending"===e.direction?" desc":""));return n.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var n=0;n<e.length;n++)e[n]=t.getField(e[n]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return!0===e?"allpages":""},t.prototype.beforeSend=function(e,t,n){Jc.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()?(t.setRequestHeader("Accept",this.options.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")):t.setRequestHeader("Accept",this.options.accept),t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,t,n,i,r,o){if(!m(e.d)){var s=n&&n.isCountRequired?e.d.results:e.d;if(!m(s))for(var a=0;a<s.length;a++)m(s[a].__metadata)||delete s[a].__metadata}var l=r&&r.pvtData,c=this.processBatchResponse(e,n,i,r,o);if(c)return c;var h=i&&r.getResponseHeader("DataServiceVersion"),d=null,u=h&&parseInt(h,10)||2;n&&n.isCountRequired&&((e.__count||e["odata.count"])&&(d=e.__count||e["odata.count"]),e.d&&(e=e.d),(e.__count||e["odata.count"])&&(d=e.__count||e["odata.count"])),3===u&&e.value&&(e=e.value),e.d&&(e=e.d),u<3&&e.results&&(e=e.results);var p={};return p.count=d,p.result=e,this.getAggregateResult(l,e,p,null,n),Jc.isNull(d)?p.result:{result:p.result,count:p.count,aggregates:p.aggregates}},t.prototype.convertToQueryString=function(e,t,n){var i=[],r=e.table||"";delete e.table,n.dataSource.requiresFormat&&(e.$format="json");for(var o=0,s=Object.keys(e);o<s.length;o++){var a=s[o];i.push(a+"="+e[a])}return i=i.join("&"),n.dataSource.url&&-1!==n.dataSource.url.indexOf("?")&&!r?i:i.length?r+"?"+i:r||""},t.prototype.localTimeReplacer=function(e,t){for(var n=0,i=m(t)?[]:Object.keys(t);n<i.length;n++){var r=i[n];t[r]instanceof Date&&(t[r]=Jc.dateParse.toLocalTime(t[r]))}return t},t.prototype.insert=function(e,t,n){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:""),data:JSON.stringify(t,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,t,n,i){var r;return r="string"!=typeof n||Jc.parse.isGuid(n)?"("+n+")":"('"+n+"')",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,i?"/"+i:"")+r}},t.prototype.update=function(e,t,n,i,r,o){var s;return"PATCH"!==this.options.updateType||m(o)||(n=this.compareAndRemove(n,o,t)),s="string"!=typeof n[t]||Jc.parse.isGuid(n[t])?"("+n[t]+")":"('"+n[t]+"')",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,i?"/"+i:"")+s,data:JSON.stringify(n,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,t,n,i,r){var o=n.guid=Jc.getGuid(this.options.batchPre),s=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),a={url:n.url,key:n.key,cid:1,cSet:Jc.getGuid(this.options.changeSet)},l="--"+o+"\n";return l+="Content-Type: multipart/mixed; boundary="+a.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(t.addedRecords,a,e),l+=this.generateUpdateRequest(t.changedRecords,a,e,r?r.changedRecords:[]),l+=this.generateDeleteRequest(t.deletedRecords,a,e),l+=a.cSet+"--\n",{type:"POST",url:s,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+o,data:l+="--"+o+"--"}},t.prototype.generateDeleteRequest=function(e,t,n){return e?this.generateBodyContent(e,t,{method:"DELETE ",url:function(e,t,n){return"("+e[t][n]+")"},data:function(e,t){return""}},n)+"\n":""},t.prototype.generateInsertRequest=function(e,t,n){return e?this.generateBodyContent(e,t,{method:"POST ",url:function(e,t,n){return""},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}},n):""},t.prototype.generateUpdateRequest=function(e,t,n,i){var r=this;return e?(e.forEach(function(e){return e=r.compareAndRemove(e,i.filter(function(n){return Jc.getObject(t.key,n)===Jc.getObject(t.key,e)})[0],t.key)}),this.generateBodyContent(e,t,{method:this.options.updateType+" ",url:function(e,t,n){return"("+e[t][n]+")"},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}},n)):""},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,t,n,i){for(var r="",o=0;o<e.length;o++)r+="\n"+t.cSet+"\n",r+=this.options.changeSetContent+"\n\n",r+=n.method,"POST "===n.method?r+=(i.dataSource.insertUrl||i.dataSource.crudUrl||t.url)+n.url(e,o,t.key)+" HTTP/1.1\n":"PUT "===n.method||"PATCH "===n.method?r+=(i.dataSource.updateUrl||i.dataSource.crudUrl||t.url)+n.url(e,o,t.key)+" HTTP/1.1\n":"DELETE "===n.method&&(r+=(i.dataSource.removeUrl||i.dataSource.crudUrl||t.url)+n.url(e,o,t.key)+" HTTP/1.1\n"),r+="Accept: "+this.options.accept+"\n",r+="Content-Id: "+this.pvt.changeSet+++"\n",r+=this.options.batchChangeSetContentType+"\n",m(e[o]["@odata.etag"])?r+="\n":(r+="If-Match: "+e[o]["@odata.etag"]+"\n\n",delete e[o]["@odata.etag"]),r+=n.data(e,o);return r},t.prototype.processBatchResponse=function(e,t,n,i,r){if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return t.isCountRequired?{result:[],count:0}:[];if(i&&this.options.batch&&Jc.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()){var o=n.getResponseHeader("Content-Type"),s=void 0,a=void 0,l=e+"";if(o=o.substring(o.indexOf("=batchresponse")+1),(l=l.split(o)).length<2)return{};var c=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(l=l[1]);c&&l.replace(c[0],"");for(var h=(l=l.split(c?c[1]:"")).length;h>-1;h--)/\bContent-ID:/i.test(l[h])&&/\bHTTP.+201/.test(l[h])&&(s=parseInt(/\bContent-ID: (\d+)/i.exec(l[h])[1],10),r.addedRecords[s]&&(a=Jc.parse.parseJson(/^\{.+\}/m.exec(l[h])[0]),g({},r.addedRecords[s],this.processResponse(a))));return r}return null},t.prototype.compareAndRemove=function(e,t,n){var i=this;return m(t)?e:(Object.keys(e).forEach(function(r){r!==n&&"@odata.etag"!==r&&(Jc.isPlainObject(e[r])?(i.compareAndRemove(e[r],t[r]),0===Object.keys(e[r]).filter(function(e){return"@odata.etag"!==e}).length&&delete e[r]):e[r]===t[r]?delete e[r]:e[r]&&t[r]&&e[r].valueOf()===t[r].valueOf()&&delete e[r])}),e)},t}(th),ih=function(e){function t(){var t=e.call(this)||this;return d("beforeSend",th.prototype.beforeSend,t),t}return Object(s.c)(t,e),t.prototype.insert=function(e,t,n,i){return this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(g({},{value:t,table:n,action:"insert"},Jc.getAddParams(this,e,i)))}},t.prototype.remove=function(t,n,i,r,o){return e.prototype.remove.call(this,t,n,i),{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(g({},{key:i,keyColumn:n,table:r,action:"remove"},Jc.getAddParams(this,t,o)))}},t.prototype.update=function(e,t,n,i,r){return this.updateType="update",this.updateKey=t,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(g({},{value:n,action:"update",keyColumn:t,key:n[t],table:i},Jc.getAddParams(this,e,r)))}},t.prototype.processResponse=function(t,n,i,r,o,s,a){var l;if("add"===this.updateType&&e.prototype.insert.call(this,n,t),"update"===this.updateType&&e.prototype.update.call(this,n,this.updateKey,t),this.updateType=void 0,t.added)for(l=0;l<t.added.length;l++)e.prototype.insert.call(this,n,t.added[l]);if(t.changed)for(l=0;l<t.changed.length;l++)e.prototype.update.call(this,n,a.key,t.changed[l]);if(t.deleted)for(l=0;l<t.deleted.length;l++)e.prototype.remove.call(this,n,a.key,t.deleted[l]);return t},t.prototype.batchRequest=function(e,t,n){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:n.url,key:n.key})}},t.prototype.addParams=function(e){(new th).addParams(e)},t}(eh),rh=function(e){function t(t,n,i){var r=e.call(this)||this;r.isCrudAction=!1,r.isInsertAction=!1,m(t)||(r.cacheAdaptor=t),r.pageSize=i,r.guidId=Jc.getGuid("cacheAdaptor"),window.localStorage.setItem(r.guidId,JSON.stringify({keys:[],results:[]}));var o=r.guidId;return m(n)||setInterval(function(){var e;e=Jc.parse.parseJson(window.localStorage.getItem(o));for(var t=[],i=0;i<e.results.length;i++){var r=+new Date,s=+new Date(e.results[i].timeStamp);e.results[i].timeStamp=r-s,r-s>n&&t.push(i)}for(i=0;i<t.length;i++)e.results.splice(t[i],1),e.keys.splice(t[i],1);window.localStorage.removeItem(o),window.localStorage.setItem(o,JSON.stringify(e))},n),r}return Object(s.c)(t,e),t.prototype.generateKey=function(e,t){var n=this.getQueryRequest(t),i=Zc.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),r=e;"onPage"in i&&(r+=i.onPage.pageIndex),n.sorts.forEach(function(e){r+=e.e.direction+e.e.fieldName}),n.groups.forEach(function(e){r+=e.e.fieldName}),n.searches.forEach(function(e){r+=e.e.searchKey});for(var o=0;o<n.filters.length;o++){var s=n.filters[o];if(s.e.isComplex){var a=t.clone();a.queries=[];for(var l=0;l<s.e.predicates.length;l++)a.queries.push({fn:"onWhere",e:s.e.predicates[l],filter:t.queries.filter});r+=s.e.condition+this.generateKey(e,a)}else r+=s.e.field+s.e.operator+s.e.value}return r},t.prototype.processQuery=function(e,t,n){var i,r=this.generateKey(e.dataSource.url,t),o=(i=Jc.parse.parseJson(window.localStorage.getItem(this.guidId)))?i.results[i.keys.indexOf(r)]:null;return null==o||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):o},t.prototype.processResponse=function(e,t,n,i,r,o){if(this.isInsertAction||r&&this.cacheAdaptor.options.batch&&Jc.endsWith(r.url,this.cacheAdaptor.options.batch)&&"post"===r.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,n,i,r,o);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var s=n?this.generateKey(t.dataSource.url,n):t.dataSource.url,a={},l=(a=Jc.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(s);for(-1!==l&&(a.results.splice(l,1),a.keys.splice(l,1)),a.results[a.keys.push(s)-1]={keys:s,result:e.result,timeStamp:new Date,count:e.count};a.results.length>this.pageSize;)a.results.splice(0,1),a.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(a)),e},t.prototype.beforeSend=function(e,t,n){Jc.endsWith(n.url,this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase()&&t.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||t.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,t,n,i){return this.isCrudAction=!0,this.cacheAdaptor.update(e,t,n,i)},t.prototype.insert=function(e,t,n){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,t,n)},t.prototype.remove=function(e,t,n,i){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,t,n,i)},t.prototype.batchRequest=function(e,t,n){return this.cacheAdaptor.batchRequest(e,t,n)},t}(th),oh=function(){function e(e,t,n){var i,r=this;return this.dateParse=!0,this.requests=[],e||this.dataSource||(e=[]),n=n||e.adaptor,e instanceof Array?i={json:e,offline:!0}:"object"==typeof e?(e.json||(e.json=[]),i={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:void 0!==e.offline?e.offline:!(e.adaptor instanceof ih||e.url),requiresFormat:e.requiresFormat}):Jc.throwError("DataManager: Invalid arguments"),void 0!==i.requiresFormat||Jc.isCors()||(i.requiresFormat=!!m(i.crossDomain)||i.crossDomain),void 0===i.dataType&&(i.dataType="json"),this.dataSource=i,this.defaultQuery=t,i.url&&i.offline&&!i.json.length?(this.isDataAvailable=!1,this.adaptor=n||new nh,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new Zc),this.ready.then(function(e){r.dataSource.offline=!0,r.isDataAvailable=!0,i.json=e.result,r.adaptor=new eh})):this.adaptor=i.offline?new eh:new nh,!i.jsonp&&this.adaptor instanceof nh&&(i.jsonp="callback"),this.adaptor=n||this.adaptor,i.enableCaching&&(this.adaptor=new rh(this.adaptor,i.timeTillExpiration,i.cachingPageSize)),this}return e.prototype.setDefaultQuery=function(e){return this.defaultQuery=e,this},e.prototype.executeLocal=function(t){this.defaultQuery||t instanceof Zc||Jc.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||Jc.throwError("DataManager - executeLocal() : Json data is required to execute");var n=this.adaptor.processQuery(this,t=t||this.defaultQuery);if(t.subQuery){var i=t.subQuery.fromTable,r=t.subQuery.lookups,o=t.isCountRequired?n.result:n;r&&r instanceof Array&&Jc.buildHierarchy(t.subQuery.fKey,i,o,r,t.subQuery.key);for(var s=0;s<o.length;s++)o[s][i]instanceof Array&&(o[s]=g({},{},o[s]),o[s][i]=this.adaptor.processResponse(t.subQuery.using(new e(o[s][i].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(n,this,t)},e.prototype.executeQuery=function(t,n,i,r){var o=this;"function"==typeof t&&(r=i,i=n,n=t,t=null),t||(t=this.defaultQuery),t instanceof Zc||Jc.throwError("DataManager - executeQuery() : A query is required to execute");var s=new sh,a={query:t};if(this.dataSource.offline||void 0===this.dataSource.url||""===this.dataSource.url)e.nextTick(function(){var n=o.executeLocal(t);a=e.getDeferedArgs(t,n,a),s.resolve(a)});else{var l=this.adaptor.processQuery(this,t);this.makeRequest(l,s,a,t)}return(n||i)&&s.promise.then(n,i),r&&s.promise.then(r,r),s.promise},e.getDeferedArgs=function(e,t,n){return e.isCountRequired?(n.result=t.result,n.count=t.count,n.aggregates=t.aggregates):n.result=t,n},e.nextTick=function(e){(window.setImmediate||window.setTimeout)(e,0)},e.prototype.extendRequest=function(e,t,n){return g({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:n},e)},e.prototype.makeRequest=function(e,t,n,i){var r=this,o=!!i.subQuerySelector,s=function(e){n.error=e,t.reject(n)},a=function(e,i,r,o,s,a,l){n.xhr=r,n.count=i?parseInt(i.toString(),10):0,n.result=e,n.request=o,n.aggregates=a,n.actual=s,n.virtualSelectRecords=l,t.resolve(n)},l=function(e,t){var l=new sh,c={parent:n};i.subQuery.isChild=!0;var h=r.adaptor.processQuery(r,i.subQuery,e?r.adaptor.processResponse(e):t),d=r.makeRequest(h,l,c,i.subQuery);return o||l.then(function(t){e&&(Jc.buildHierarchy(i.subQuery.fKey,i.subQuery.fromTable,e,t,i.subQuery.key),a(e,t.count,t.xhr))},s),d},c=this.extendRequest(e,function(e,t){-1===t.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&r.dateParse&&(e=Jc.parse.parseJson(e));var n=r.adaptor.processResponse(e,r,i,t.httpRequest,t),s=0,c=null,h=e.virtualSelectRecords;i.isCountRequired&&(s=n.count,c=n.aggregates,n=n.result),i.subQuery?o||l(n,t):a(n,s,t.httpRequest,t.type,e,c,h)},s),h=new E(c);if(h.beforeSend=function(){r.beforeSend(h.httpRequest,h)},(c=h.send()).catch(function(e){return!0}),this.requests.push(h),o){var d=i.subQuerySelector.call(this,{query:i.subQuery,parent:i});d&&d.length?Promise.all([c,l(null,d)]).then(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],s=r.adaptor.processResponse(n[0],r,i,r.requests[0].httpRequest,r.requests[0]),l=0;i.isCountRequired&&(l=s.count,s=s.result);var c=r.adaptor.processResponse(n[1],r,i.subQuery,r.requests[1].httpRequest,r.requests[1]);l=0,i.subQuery.isCountRequired&&(l=c.count,c=c.result),Jc.buildHierarchy(i.subQuery.fKey,i.subQuery.fromTable,s,c,i.subQuery.key),o=!1,a(s,l,r.requests[0].httpRequest)}):o=!1}return c},e.prototype.beforeSend=function(e,t){this.adaptor.beforeSend(this,e,t);for(var n,i=this.dataSource.headers,r=0;i&&r<i.length;r++){n=[];for(var o=0,s=Object.keys(i[r]);o<s.length;o++){var a=s[o];n.push(a),e.setRequestHeader(a,i[r][a])}}},e.prototype.saveChanges=function(e,t,n,i,r){var o=this;n instanceof Zc&&(i=n,n=null);var s={url:n,key:t||this.dataSource.key},a=this.adaptor.batchRequest(this,e,s,i||new Zc,r);if(this.dataSource.offline)return a;var l=new sh,c=new E(a);return c.beforeSend=function(){o.beforeSend(c.httpRequest,c)},c.onSuccess=function(t,n){l.resolve(o.adaptor.processResponse(t,o,null,n.httpRequest,n,e,s))},c.onFailure=function(e){l.reject([{error:e}])},c.send().catch(function(e){return!0}),l.promise},e.prototype.insert=function(e,t,n,i){t instanceof Zc&&(n=t,t=null);var r=this.adaptor.insert(this,e,t,n,i);return this.dataSource.offline?r:this.doAjaxRequest(r)},e.prototype.remove=function(e,t,n,i){"object"==typeof t&&(t=t[e]),n instanceof Zc&&(i=n,n=null);var r=this.adaptor.remove(this,e,t,n,i);return this.dataSource.offline?r:this.doAjaxRequest(r)},e.prototype.update=function(e,t,n,i,r){n instanceof Zc&&(i=n,n=null);var o=this.adaptor.update(this,e,t,n,i,r);return this.dataSource.offline?o:this.doAjaxRequest(o)},e.prototype.doAjaxRequest=function(e){var t=this,n=new sh;e=g({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},e);var i=new E(e);return i.beforeSend=function(){t.beforeSend(i.httpRequest,i)},i.onSuccess=function(e,i){try{Jc.parse.parseJson(e)}catch(r){e=[]}e=t.adaptor.processResponse(Jc.parse.parseJson(e),t,null,i.httpRequest,i),n.resolve(e)},i.onFailure=function(e){n.reject([{error:e}])},i.send().catch(function(e){return!0}),n.promise},e}(),sh=function(){return function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}(),ah=function(){function e(){this.groupUndo=!1,this.childTable=[],this.historyCount=0,this.hasGroup=!1,this.groupCount=0}return e.prototype.initHistory=function(e){e.historyManager={canRedo:!1,canUndo:!1,currentEntry:null,push:e.addHistoryEntry.bind(e),undo:Function,redo:Function,startGroupAction:e.startGroupAction.bind(e),endGroupAction:e.endGroupAction.bind(e),canLog:null,undoStack:[],redoStack:[],stackLimit:e.historyManager?e.historyManager.stackLimit:void 0}},e.prototype.addHistoryEntry=function(e,t){var n=null;t.historyManager.canLog&&!0===t.historyManager.canLog(e).cancel||(t.historyManager&&t.historyManager.canUndo&&t.historyManager.currentEntry&&((n=t.historyManager.currentEntry).next?n.previous&&(n.next.previous=null,n.next=e,e.previous=n):(n.next=e,e.previous=n)),t.historyManager.currentEntry=e,t.historyManager.stackLimit&&("StartGroup"!==e.type&&"EndGroup"!==e.type||this.setEntryLimit("EndGroup"===e.type),this.hasGroup||0!==this.groupCount||(this.historyCount<t.historyManager.stackLimit?this.historyCount++:this.applyLimit(t.historyManager.currentEntry,t.historyManager.stackLimit,t))),this.getHistoryList(t),t.historyManager.canUndo=!0,t.historyManager.canRedo=!1)},e.prototype.applyLimit=function(e,t,n,i){e&&e.previous&&("StartGroup"!==e.type&&"EndGroup"!==e.type||this.setEntryLimit("StartGroup"===e.type),this.hasGroup||0!==this.groupCount||t--,0===t?(i&&this.limitHistoryStack(e.previous,n),n.historyManager.stackLimit<this.historyCount&&(this.historyCount=n.historyManager.stackLimit),delete e.previous):e.previous&&this.applyLimit(e.previous,t,n,i)),this.groupCount=0},e.prototype.clearHistory=function(e){var t=e.historyManager;t.currentEntry=void 0,t.canUndo=!1,t.canRedo=!1,this.historyCount=0,this.groupCount=0,e.historyManager.undoStack=[],e.historyManager.redoStack=[]},e.prototype.setEntryLimit=function(e){e?this.groupCount--:this.groupCount++,this.hasGroup=e?!e:e},e.prototype.limitHistoryStack=function(e,t){"StartGroup"!==e.type&&"EndGroup"!==e.type&&(this.removeFromStack(t.historyManager.undoStack,e),this.removeFromStack(t.historyManager.redoStack,e)),e.previous&&this.limitHistoryStack(e.previous,t)},e.prototype.removeFromStack=function(e,t){if(e.length)for(var n=0;n<=e.length;n++)if(e[n].undoObject===t.undoObject&&e[n].redoObject===t.redoObject){e.splice(n,1);break}},e.prototype.undo=function(e){var t=this.getUndoEntry(e),n=0;t&&("Internal"===t.category?("EndGroup"===t.type?(n++,this.groupUndo=!0):this.undoEntry(t,e),this.groupUndo&&(this.undoGroupAction(t,e,n),this.groupUndo=!1)):e.historyManager.undo(t))},e.prototype.getHistoryList=function(e){var t=[],n=[],i=e.historyManager.currentEntry;for(this.getHistroyObject(e.historyManager.canUndo||0===e.historyManager.undoStack.length?t:n,i=e.historyManager.currentEntry);i&&i.previous;)this.getHistroyObject(t,i.previous),i=i.previous;for(i=e.historyManager.currentEntry;i&&i.next;)this.getHistroyObject(n,i.next),i=i.next;e.historyManager.undoStack=t,e.historyManager.redoStack=n},e.prototype.getHistroyObject=function(e,t){t&&"StartGroup"!==t.type&&"EndGroup"!==t.type&&e.push({redoObject:t.redoObject?t.redoObject:null,undoObject:t.undoObject?t.undoObject:null,type:t.type?t.type:null,category:t.category?t.category:null})},e.prototype.undoGroupAction=function(e,t,n){for(;0!==n;)this.undoEntry(e,t),"StartGroup"===(e=this.getUndoEntry(t)).type?n--:"EndGroup"===e.type&&n++;n=0},e.prototype.undoEntry=function(e,t){var n,i;if("PropertyChanged"!==e.type&&"CollectionChanged"!==e.type&&"LabelCollectionChanged"!==e.type&&(n=e.undoObject,i=e.undoObject),"StartGroup"!==e.type&&"EndGroup"!==e.type&&t.historyManager.undoStack.length>0){var r=t.historyManager.undoStack.splice(0,1);t.historyManager.redoStack.splice(0,0,r[0]),i=e.undoObject}switch(t.protectPropertyChange(!0),t.diagramActions|=Tn.UndoRedo,e.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(n,t);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(n,t,e);break;case"RotationChanged":this.recordRotationChanged(n,t,e);break;case"ConnectionChanged":this.recordConnectionChanged(n,t);break;case"PropertyChanged":this.recordPropertyChanged(e,t,!1);break;case"CollectionChanged":e.isUndo=!0,this.recordCollectionChanged(e,t),e.isUndo=!1;break;case"LabelCollectionChanged":e.isUndo=!0,this.recordLabelCollectionChanged(e,t),e.isUndo=!1;break;case"PortCollectionChanged":e.isUndo=!0,this.recordPortCollectionChanged(e,t),e.isUndo=!1;break;case"Group":this.unGroup(e,t);break;case"UnGroup":this.group(e,t);break;case"SegmentChanged":this.recordSegmentChanged(n,t);break;case"PortPositionChanged":this.recordPortChanged(e,t,!1);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(e,t,!1);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(e,t,!1);break;case"StackChildPositionChanged":this.recordStackPositionChanged(e,t,!1);break;case"RowHeightChanged":this.recordGridSizeChanged(e,t,!1,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(e,t,!1,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(e,t,!1);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":e.isUndo=!0,this.recordLaneOrPhaseCollectionChanged(e,t,!1),e.isUndo=!1}if(t.diagramActions&=~Tn.UndoRedo,t.protectPropertyChange(!1),t.historyChangeTrigger(e),i){var o=this.checkNodeObject(i,t);if(o){var s=tc(t.updateSelection);s&&s(o,t)}}},e.prototype.checkNodeObject=function(e,t){var n;if(e.id)n=t.nameTable[e.id];else if(e.nodes&&e.nodes.length>0||e.connectors&&e.connectors.length>0)for(var i=0,r=e.nodes.length>0?e.nodes:e.connectors;i<r.length;i++)n=t.nameTable[(n=r[i]).id];else{var o=e.nodes?e.nodes:e.connectors;if(o)for(var s=0,a=Object.keys(o);s<a.length;s++){var l=Number(a[s]);n=e.nodes?t.nodes[l]:t.connectors[l]}}return n},e.prototype.group=function(e,t){t.add(e.undoObject)},e.prototype.unGroup=function(e,t){e.redoObject=Ul(e.undoObject),t.commandHandler.unGroup(e.undoObject)},e.prototype.ignoreProperty=function(e){return"zIndex"===e||"wrapper"===e},e.prototype.getProperty=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];this.ignoreProperty(r)||(t[r]instanceof Object?this.getProperty(e[r],t[r]):e[r]=t[r])}},e.prototype.recordLaneOrPhaseCollectionChanged=function(e,t,n){var i=e.redoObject,r=e.undoObject;if("Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType))t.remove(i);else if(i.isPhase)t.addPhases(o=t.nameTable[i.parentId],[r]);else{var o,s=ys(o=t.nameTable[i.parentId],i);t.addLanes(o,[r],s)}t.clearSelection()},e.prototype.recordAnnotationChanged=function(e,t,n){var i=n?e.redoObject:e.undoObject,r=$a(i,e.objectId),o=t.commandHandler.getAnnotationChanges(t.nameTable[i.id],r),s=t.nameTable[i.id],a=$a(s,e.objectId);a.offset=r.offset,a.margin=r.margin,a.width=r.width,a.height=r.height,a.rotateAngle=r.rotateAngle,a.margin=r.margin,s instanceof sa?t.nodePropertyChange(s,{},o):t.connectorPropertyChange(s,{},o)},e.prototype.recordChildCollectionChanged=function(e,t,n){var i=n?e.redoObject:e.undoObject,r=t.nameTable[i.parentId],o=t.nameTable[i.id];r?es(t,r,o,!n):(o.parentId&&((r=t.nameTable[o.parentId]).children.splice(r.children.indexOf(o.id),1),r.wrapper.children.splice(r.wrapper.children.indexOf(o.wrapper),1)),""!==i.parentId&&((r=t.nameTable[i.parentId]).children.push(i.id),r.wrapper.children.push(o.wrapper)),o.parentId=i.parentId,t.removeElements(o),t.updateDiagramObject(o))},e.prototype.recordStackPositionChanged=function(e,t,n){var i=n?e.redoObject:e.undoObject;if(i.source){var r=t.nameTable[i.source.parentId];r&&(i.target?(r.wrapper.children.splice(i.targetIndex,1),r.wrapper.children.splice(i.sourceIndex,0,i.source.wrapper)):void 0!==i.sourceIndex?(t.nameTable[i.source.id]||t.add(i.source),r.wrapper.children.splice(i.sourceIndex,0,t.nameTable[i.source.id].wrapper),t.nameTable[i.source.id].parentId=r.id):(r.wrapper.children.splice(r.wrapper.children.indexOf(t.nameTable[i.source.id].wrapper),1),t.nameTable[i.source.id].parentId=""),n&&"UmlClassifier"===r.shape.type&&t.remove(i.source),r.wrapper.measure(new Xt),r.wrapper.arrange(r.wrapper.desiredSize),t.updateDiagramObject(r),t.updateSelector())}},e.prototype.recordGridSizeChanged=function(e,t,n,i){var r=n?e.redoObject:e.undoObject;if(r.parentId){var o=t.nameTable[r.parentId],s=t.nameTable[r.id],a=o.wrapper.bounds.x,l=o.wrapper.bounds.y;if("SwimLane"===o.shape.type){var c=o.wrapper.children[0],h=o.shape.padding;ms(t,n?e.undoObject:e.redoObject,o,r),i?(c.updateRowHeight(r.rowIndex,r.wrapper.actualSize.height,!0,h),o.height=o.wrapper.height=c.height):(c.updateColumnWidth(r.columnIndex,r.wrapper.actualSize.width,!0,h),o.width=o.wrapper.width=c.width,r.isPhase&&(s.maxWidth=s.wrapper.maxWidth=r.wrapper.actualSize.width)),cs(o),t.drag(o,a-o.wrapper.bounds.x,l-o.wrapper.bounds.y),t.clearSelection(),t.updateDiagramObject(o)}}},e.prototype.recordLanePositionChanged=function(e,t,n){var i=n?e.redoObject:e.undoObject;if(i.source){var r=t.nameTable[i.source.parentId];r&&"SwimLane"===r.shape.type&&(gs(t,i.target,i.source),t.clearSelection())}},e.prototype.recordPortChanged=function(e,t,n){var i=n?e.redoObject.nodes[0]:e.undoObject.nodes[0],r=el(i,e.objectId),o=t.commandHandler.getPortChanges(t.nameTable[i.id],r),s=t.nameTable[i.id];el(s,e.objectId).offset=r.offset,t.nodePropertyChange(s,{},o),s.parentId&&t.updateConnectorEdges(t.nameTable[s.parentId])},e.prototype.recordPropertyChanged=function(e,t,n){var i=e.redoObject,r=e.undoObject;this.getProperty(t,n?i:r),n?t.onPropertyChanged(i,r):t.onPropertyChanged(r,i),t.diagramActions=t.diagramActions|Tn.UndoRedo},e.prototype.recordSegmentChanged=function(e,t){var n=0;if(e.connectors&&e.connectors.length>0)for(n=0;n<e.connectors.length;n++)this.segmentChanged(e.connectors[n],t)},e.prototype.segmentChanged=function(e,t){var n=t.nameTable[e.id];n.segments=e.segments,t.commandHandler.updateEndPoint(n)},e.prototype.recordPositionChanged=function(e,t){var n=0;if(e.nodes&&e.nodes.length>0)for(n=0;n<e.nodes.length;n++)this.positionChanged(e.nodes[n],t);if(e.connectors&&e.connectors.length>0)for(n=0;n<e.connectors.length;n++)this.connectionChanged(e.connectors[n],t)},e.prototype.positionChanged=function(e,t){var n=t.nameTable[e.id];if(e.processId&&!n.processId&&t.addProcess(e,e.processId),!e.processId&&n.processId&&t.removeProcess(e.id),n.processId)t.drag(n,e.margin.left-n.margin.left,e.margin.top-n.margin.top);else{if(n.parentId){var i=t.nameTable[n.parentId];i.isLane&&(e.wrapper.offsetX=e.width/2+(i.wrapper.bounds.x+e.margin.left),e.wrapper.offsetY=e.height/2+(i.wrapper.bounds.y+e.margin.top))}t.drag(n,e.wrapper.offsetX-n.offsetX,e.wrapper.offsetY-n.offsetY)}t.bpmnModule&&t.bpmnModule.updateDocks(n,t)},e.prototype.recordSizeChanged=function(e,t,n){var i,r=0;if(e&&e.nodes&&e.nodes.length>0)for(r=0;r<e.nodes.length;r++)if((i=e.nodes[r]).children&&!i.container)for(var o=t.commandHandler.getAllDescendants(i,[]),s=0;s<o.length;s++){var a=n.childTable[o[s].id];al(a)===sa?(this.sizeChanged(a,t,n),this.positionChanged(a,t)):this.connectionChanged(a,t,n)}else this.sizeChanged(i,t),this.positionChanged(i,t);if(e&&e.connectors&&e.connectors.length>0){var l=e.connectors;for(r=0;r<l.length;r++)this.connectionChanged(l[r],t)}},e.prototype.sizeChanged=function(e,t,n){var i=t.nameTable[e.id],r=e.wrapper.actualSize.width/i.wrapper.actualSize.width,o=e.wrapper.actualSize.height/i.wrapper.actualSize.height;n&&n.childTable&&(n.childTable[e.id]=Ul(i)),t.scale(i,r,o,{x:e.wrapper.offsetX/i.wrapper.offsetX,y:e.wrapper.offsetY/i.wrapper.offsetY})},e.prototype.recordRotationChanged=function(e,t,n){var i,r=0,o=t.selectedItems;if(o.rotateAngle=e.rotateAngle,o&&o.wrapper&&(o.wrapper.rotateAngle=e.rotateAngle),e&&e.nodes&&e.nodes.length>0)for(r=0;r<e.nodes.length;r++)this.rotationChanged(i=e.nodes[r],t),this.positionChanged(i,t);if(e&&e.connectors&&e.connectors.length>0)for(r=0;r<e.connectors.length;r++)this.connectionChanged(e.connectors[r],t)},e.prototype.rotationChanged=function(e,t){var n=t.nameTable[e.id];t.rotate(n,e.rotateAngle-n.rotateAngle)},e.prototype.recordConnectionChanged=function(e,t){this.connectionChanged(e.connectors[0],t)},e.prototype.connectionChanged=function(e,t,n){var i=t.nameTable[e.id];e.sourcePortID!==i.sourcePortID&&(i.sourcePortID=e.sourcePortID,t.connectorPropertyChange(i,{},{sourcePortID:e.sourcePortID})),e.targetPortID!==i.targetPortID&&(i.targetPortID=e.targetPortID,t.connectorPropertyChange(i,{},{targetPortID:e.targetPortID})),e.sourceID!==i.sourceID&&(""===e.sourceID?Qa(t.nameTable[i.sourceID].outEdges,e.id):t.nameTable[e.sourceID].outEdges.push(e.id),i.sourceID=e.sourceID,t.connectorPropertyChange(i,{},{sourceID:e.sourceID})),e.targetID!==i.targetID&&(""===e.targetID?Qa(t.nameTable[i.targetID].inEdges,e.id):t.nameTable[e.targetID].inEdges.push(e.id),i.targetID=e.targetID,t.connectorPropertyChange(i,{},{targetID:e.targetID})),n&&n.childTable&&(n.childTable[e.id]=Ul(i));var r=e.sourcePoint.x-i.sourcePoint.x,o=e.sourcePoint.y-i.sourcePoint.y;0===r&&0===o||t.dragSourceEnd(i,r,o);var s=e.targetPoint.x-i.targetPoint.x,a=e.targetPoint.y-i.targetPoint.y;0===s&&0===a||t.dragTargetEnd(i,s,a),t.updateSelector(),"SVG"!==t.mode&&t.refreshDiagramLayer()},e.prototype.recordCollectionChanged=function(e,t){var n=e.undoObject;if(e&&e.changeType){if("Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType))n.nodeId?t.remove(t.nameTable[n.nodeId+"_textannotation_"+n.id]):(t.remove(n),t.clearSelectorLayer());else{if(t.clearSelectorLayer(),n.parentId){var i=t.nameTable[n.parentId];i?t.addChild(i,n):t.add(n)}else n.nodeId?t.addTextAnnotation(n,t.nameTable[n.nodeId]):t.nameTable[n.id]||(n&&n.shape&&"SwimLane"===n.shape.type&&e.isUndo&&Es(n,void 0,void 0,void 0,void 0,!0),t.add(n));n.processId&&t.nameTable[n.processId]&&t.addProcess(n,n.processId)}"SVG"!==t.mode&&t.refreshDiagramLayer()}},e.prototype.recordLabelCollectionChanged=function(e,t){var n=e.undoObject,i=t.nameTable[e.redoObject.id];e&&e.changeType&&("Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType)?(t.removeLabels(i,[n]),t.clearSelectorLayer()):(t.clearSelectorLayer(),t.addLabels(i,[n])),"SVG"!==t.mode&&t.refreshDiagramLayer())},e.prototype.recordPortCollectionChanged=function(e,t){var n=e.undoObject,i=t.nameTable[e.redoObject.id];e&&e.changeType&&("Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType)?(t.removePorts(i,[n]),t.clearSelectorLayer()):(t.clearSelectorLayer(),t.addPorts(i,[n])),"SVG"!==t.mode&&t.refreshDiagramLayer())},e.prototype.redo=function(e){var t=this.getRedoEntry(e),n=0;t&&("Internal"===t.category?("StartGroup"===t.type?(n++,this.groupUndo=!0):this.redoEntry(t,e),this.groupUndo&&(this.redoGroupAction(t,e,n),this.groupUndo=!1)):e.historyManager.redo(t))},e.prototype.redoGroupAction=function(e,t,n){for(;0!==n;)this.redoEntry(e,t),"EndGroup"===(e=this.getRedoEntry(t)).type?n--:"StartGroup"===e.type&&n++;n=0},e.prototype.redoEntry=function(e,t){var n,i;if("PropertyChanged"!==e.type&&"CollectionChanged"!==e.type&&(n=e.redoObject,i=e.redoObject),t.diagramActions|=Tn.UndoRedo,"StartGroup"!==e.type&&"EndGroup"!==e.type&&t.historyManager.redoStack.length>0){var r=t.historyManager.redoStack.splice(0,1);t.historyManager.undoStack.splice(0,0,r[0]),i=e.redoObject}switch(t.protectPropertyChange(!0),e.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(n,t);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(n,t,e);break;case"RotationChanged":this.recordRotationChanged(n,t,e);break;case"ConnectionChanged":this.recordConnectionChanged(n,t);break;case"PropertyChanged":this.recordPropertyChanged(e,t,!0);break;case"CollectionChanged":this.recordCollectionChanged(e,t);break;case"LabelCollectionChanged":this.recordLabelCollectionChanged(e,t);break;case"PortCollectionChanged":this.recordPortCollectionChanged(e,t);break;case"Group":this.group(e,t);break;case"UnGroup":this.unGroup(e,t);break;case"SegmentChanged":this.recordSegmentChanged(n,t);break;case"PortPositionChanged":this.recordPortChanged(e,t,!0);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(e,t,!0);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(e,t,!0);break;case"StackChildPositionChanged":this.recordStackPositionChanged(e,t,!0);break;case"RowHeightChanged":this.recordGridSizeChanged(e,t,!0,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(e,t,!0,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(e,t,!0);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":this.recordLaneOrPhaseCollectionChanged(e,t,!0)}if(t.protectPropertyChange(!1),t.diagramActions&=~Tn.UndoRedo,t.historyChangeTrigger(e),i){var o=this.checkNodeObject(i,t);if(o){var s=tc(t.updateSelection);s&&s(o,t)}}},e.prototype.getUndoEntry=function(e){var t,n=null,i=e.historyManager;return i.canUndo&&(n=i.currentEntry,(t=i.currentEntry.previous)?(i.currentEntry=t,i.canRedo||(i.canRedo=!0)):(i.canRedo=!0,i.canUndo=!1)),n},e.prototype.getRedoEntry=function(e){var t,n=null,i=e.historyManager;return i.canRedo&&((t=i.currentEntry.previous||i.canUndo?i.currentEntry.next:i.currentEntry)&&(i.currentEntry=t,i.canUndo||(i.canUndo=!0),t.next||(i.canRedo=!1,i.canUndo=!0)),n=i.currentEntry),n},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"UndoRedo"},e}(),lh={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper"};function ch(e,t){var n={};if(m(e)||"string"==typeof e||"number"==typeof e||!m(e.isHeader))return e;for(var i=0,r=Object.keys(t);i<r.length;i++){var o=t[r[i]],s=m(o)||"string"!=typeof o?void 0:h(o,e);m(s)||(n[o]=s)}return n}!function(e){e.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},n={showCheckBox:!1,showIcon:!1,expandCollapse:!1,fields:e.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right"};function i(e,t,n,i){return x(e,r(e,t,n,i),null,i)}function r(e,t,i,r){var o=[],s=g({},n,r);lh=b(s.moduleName);for(var a=p(),l=0;l<t.length;l++)if(!m(t[l])){var c;s.itemCreating&&"function"==typeof s.itemCreating&&s.itemCreating({dataSource:t,curData:t[l],text:t[l],options:s}),c=i?v(e,t[l],void 0,null,null,[],null,a,l,r):C(e,t[l],void 0,null,null,r),s.itemCreated&&"function"==typeof s.itemCreated&&s.itemCreated({dataSource:t,curData:t[l],text:t[l],item:c,options:s}),o.push(c)}return o}function o(i,r,o,s,a){var l=g({},n,o);lh=b(l.moduleName);var c,u=g({},e.defaultMappedFields,l.fields),w=g({},t,l.ariaAttributes);s&&(w.level=s);var x,A=[];r&&r.length&&!m(h(r).item)&&!h(r).item.hasOwnProperty(u.id)&&(c=p());for(var S=0;S<r.length;S++){var O=ch(r[S],u);if(!m(r[S])){l.itemCreating&&"function"==typeof l.itemCreating&&l.itemCreating({dataSource:r,curData:r[S],text:O[u.text],options:l,fields:u});var E=r[S];l.itemCreating&&"function"==typeof l.itemCreating&&(O=ch(r[S],u)),O.hasOwnProperty(u.id)&&!m(O[u.id])&&(c=O[u.id]);var I=[];if(l.showCheckBox&&I.push(i("input",{className:lh.check,attrs:{type:"checkbox"}})),!0===a)l.showIcon&&O.hasOwnProperty(u.iconCss)&&!m(O[u.iconCss])&&I.push(i("span",{className:lh.icon+" "+O[u.iconCss]})),x=v(i,E,O,u,l.itemClass,I,!(!E.hasOwnProperty("isHeader")||!E.isHeader),c,S,o);else{if((x=C(i,E,O,u,l.itemClass,o)).classList.add(lh.level+"-"+w.level),x.setAttribute("aria-level",w.level.toString()),O.hasOwnProperty(u.tooltip)&&x.setAttribute("title",O[u.tooltip]),O.hasOwnProperty(u.htmlAttributes)&&O[u.htmlAttributes]&&d(x,O[u.htmlAttributes]),O.hasOwnProperty(u.enabled)&&!1===O[u.enabled]&&x.classList.add(lh.disabled),O.hasOwnProperty(u.isVisible)&&!1===O[u.isVisible]&&(x.style.display="none"),O.hasOwnProperty(u.imageUrl)&&!m(O[u.imageUrl])&&!l.template){var D={src:O[u.imageUrl]};f(D,O[u.imageAttributes]),R([i("img",{className:lh.image,attrs:D})],x.firstElementChild)}l.showIcon&&O.hasOwnProperty(u.iconCss)&&!m(O[u.iconCss])&&!l.template&&R([i("div",{className:lh.icon+" "+O[u.iconCss]})],x.firstElementChild),I.length&&R(I,x.firstElementChild),y(i,O,u,0,l,x,w.level)}l.itemCreated&&"function"==typeof l.itemCreated&&l.itemCreated({dataSource:r,curData:r[S],text:O[u.text],item:x,options:l,fields:u}),A.push(x)}}return A}function s(e,t,i,r,s){var a=g({},n,i);return x(e,o(e,t,i,r,s),a.listClass,i)}function a(e,t){if(t&&e)return Array.prototype.slice.call(t).indexOf(e)}function l(e,t,n){if(void 0===n&&(n=new Zc),"Ascending"===e)n.sortBy(t,"ascending",!0);else if("Descending"===e)n.sortBy(t,"descending",!0);else for(var i=0;i<n.queries.length;i++)"onSortBy"===n.queries[i].fn&&n.queries.splice(i,1);return n}function c(e,t){return new oh(e).executeLocal(t)}function h(e){for(var t=0;t<e.length;t++)if(!m(e[t]))return{typeof:typeof e[t],item:e[t]};return{typeof:null,item:null}}function d(e,t){var n={};f(n,t),n.class&&(P([e],n.class.split(" ")),delete n.class),F(e,n)}function u(e){for(var t={},n=e.attributes,i=0;i<n.length;i++)t[n[i].nodeName]=n[i].nodeValue;return t}function p(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function y(e,t,n,i,r,o,a){var l=t[n.child]||[],c=t[n.hasChildren];if(l.length&&(c=!0,o.classList.add(lh.hasChild),r.processSubChild)){var h=s(e,l,r,++a);o.appendChild(h)}r.expandCollapse&&c&&!r.template&&(o.firstElementChild.classList.add(lh.iconWrapper),("Left"===r.expandIconPosition?R:L)([e("div",{className:"e-icons "+r.expandIconClass})],o.querySelector("."+lh.textContent)))}function v(e,i,r,o,s,a,l,c,h,u){var p,f,y=g({},n,u),v=g({},t,y.ariaAttributes),b=i,C=i;"string"!=typeof i&&"number"!=typeof i&&"boolean"!=typeof i&&(p=i,b="boolean"==typeof r[o.text]||"number"==typeof r[o.text]?r[o.text]:r[o.text]||"",C=r[o.value]),f=m(p)||m(r[o.id])||""===r[o.id]?c+"-"+h:c;var x=e("li",{className:(!0===l?lh.group:lh.li)+" "+(m(s)?"":s),id:f,attrs:""!==v.groupItemRole&&""!==v.itemRole?{role:!0===l?v.groupItemRole:v.itemRole}:{}});return p&&r.hasOwnProperty(o.enabled)&&"false"===r[o.enabled].toString()&&x.classList.add(lh.disabled),l?x.innerText=b:(m(C)||x.setAttribute("data-value",C),x.setAttribute("role","option"),p&&r.hasOwnProperty(o.htmlAttributes)&&r[o.htmlAttributes]&&d(x,r[o.htmlAttributes]),a.length&&L(a,x),x.appendChild(p&&(r[o.url]||r[o.urlAttributes]&&r[o.urlAttributes].href)?w(e,p,o,b):document.createTextNode(b))),x}function b(e){return{li:"e-"+e+"-item",ul:"e-"+e+"-parent e-ul",group:"e-"+e+"-group-item",icon:"e-"+e+"-icon",text:"e-"+e+"-text",check:"e-"+e+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+e+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+e+"-img",iconWrapper:"e-icon-wrapper"}}function w(e,t,n,i){var r=ch(t,n),o={href:r[n.url]};r.hasOwnProperty(n.urlAttributes)&&r[n.urlAttributes]&&(f(o,r[n.urlAttributes]),o.href=r[n.url]?r[n.url]:r[n.urlAttributes].href);var s=e("a",{className:lh.text+" "+lh.url,innerHTML:i});return d(s,o),s}function C(e,i,r,o,s,a){var l,c,h,d=g({},n,a),u=g({},t,d.ariaAttributes),f=i;"string"!=typeof i&&"number"!=typeof i&&(h=i,f=r[o.text]||"",l=r[o.id],c=!(!i.hasOwnProperty("isHeader")||!i.isHeader));var y=e("li",{className:(!0===c?lh.group:lh.li)+" "+(m(s)?"":s),attrs:""!==u.groupItemRole&&""!==u.itemRole?{role:!0===c?u.groupItemRole:u.itemRole}:{}});if(m(l)?y.setAttribute("data-uid",p()):y.setAttribute("data-uid",l),c&&a&&a.groupTemplate)L(_t(a.groupTemplate)(i),y);else if(!c&&a&&a.template)L(_t(a.template)(i),y);else{var v=e("div",{className:lh.textContent,attrs:""!==u.wrapperRole?{role:u.wrapperRole}:{}});v.appendChild(h&&(r[o.url]||r[o.urlAttributes]&&r[o.urlAttributes].href)?w(e,h,o,f):e("span",{className:lh.text,innerHTML:f,attrs:""!==u.itemText?{role:u.itemText}:{}})),y.appendChild(v)}return y}function x(e,i,r,o){var s=g({},n,o),a=g({},t,s.ariaAttributes),l=e("ul",{className:(lh=b(s.moduleName)).ul+" "+(m(r)?"":r),attrs:""!==a.listRole?{role:a.listRole}:{}});return L(i,l),l}e.createList=function(e,r,o,a){var l=g({},n,o),c=g({},t,l.ariaAttributes),d=h(r).typeof;return"string"===d||"number"===d?i(e,r,a,o):s(e,r,o,c.level,a)},e.createListFromArray=i,e.createListItemFromArray=r,e.createListItemFromJson=o,e.createListFromJson=s,e.getSiblingLI=function(e,t,i){if(lh=b(n.moduleName),e&&e.length){var r,o,s=Array.prototype.slice.call(e);for(r=s[(o=t?a(t,s):!0===i?s.length:-1)+(!0===i?-1:1)];r&&(!j(r)||r.classList.contains(lh.disabled));)r=s[o+=!0===i?-1:1];return r}},e.indexOf=a,e.groupDataSource=function(t,n,i){void 0===i&&(i="None");var r=g({},e.defaultMappedFields,n),o=(new Zc).group(r.groupBy),s=c(t,o=l(i,"key",o));t=[];for(var a=0;a<s.length;a++){var h=s[a].items,d={};d[r.text]=s[a].key,d.isHeader=!0,d.id="group-list-item-"+(s[a].key?s[a].key.toString().trim():"undefined"),d.items=h,t.push(d);for(var u=0;u<h.length;u++)t.push(h[u])}return t},e.addSorting=l,e.getDataSource=c,e.createJsonFromElement=function t(i,r){var o=g({},n,r),s=g({},e.defaultMappedFields,o.fields),a=i.cloneNode(!0),l=[];a.classList.add("json-parent");var c=a.querySelectorAll(".json-parent>li");a.classList.remove("json-parent");for(var h=0;h<c.length;h++){for(var d=c[h],f=d.querySelector("a"),m=d.querySelector("ul"),y={},v=f?f.childNodes:d.childNodes,b=Object.keys(v),w=0;w<v.length;w++)v[Number(b[w])].hasChildNodes()||(y[s.text]=v[Number(b[w])].textContent);var C=u(d);C.id?(y[s.id]=C.id,delete C.id):y[s.id]=p(),Object.keys(C).length&&(y[s.htmlAttributes]=C),f&&(C=u(f),Object.keys(C).length&&(y[s.urlAttributes]=C)),m&&(y[s.child]=t(m,r)),l.push(y)}return l},e.renderContentTemplate=function(t,i,r,o,s){for(var a=t("ul",{className:(lh=b(n.moduleName)).ul,attrs:{role:"presentation"}}),l=g({},n,s),c=g({},e.defaultMappedFields,o),h=_t(i),d=[],u=p(),f=0;f<r.length;f++){var m=ch(r[f],c),y=r[f],v=y.isHeader,w=m[c.value];l.itemCreating&&"function"==typeof l.itemCreating&&l.itemCreating({dataSource:r,curData:y,text:w,options:l,fields:c}),l.itemCreating&&"function"==typeof l.itemCreating&&(w=(m=ch(r[f],c))[c.value]);var C=t("li",{id:u+"-"+f,className:v?lh.group:lh.li,attrs:{role:"presentation"}});v?C.innerText=m[c.text]:(L(h(y),C),C.setAttribute("data-value",w),C.setAttribute("role","option")),l.itemCreated&&"function"==typeof l.itemCreated&&l.itemCreated({dataSource:r,curData:y,text:w,item:C,options:l,fields:c}),d.push(C)}return L(d,a),a},e.renderGroupTemplate=function(t,n,i,r){for(var o=_t(t),s=g({},e.defaultMappedFields,i).groupBy,a=0,l=r;a<l.length;a++){var c=l[a],h={};h[s]=c.textContent,c.innerHTML="",L(o(h),c)}return r},e.generateId=p,e.generateUL=x,e.generateIcon=function(e,t,i,r){var o=g({},n,r);return lh=b(o.moduleName),("Left"===o.expandIconPosition?R:L)([e("div",{className:"e-icons "+o.expandIconClass+" "+(m(i)?"":i)})],t.querySelector("."+lh.textContent)),t}}(Cc||(Cc={}));var hh=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(s.c)(t,e),t.prototype.preRender=function(){this.browser=re.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=re.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=v("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new wt(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),I.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),(m(this.scrollStep)||this.scrollStep<0)&&(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1)},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");for(var n=this.element,i=0,r=[].slice.call(n.children);i<r.length;i++)e.appendChild(r[i]);t.appendChild(e),n.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove("e-scroll-device");var n=H(".e-"+t.id+"_nav.e-scroll-nav",t),i=H(".e-scroll-overlay",t);[].slice.call(i).forEach(function(e){N(e)});for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++)t.appendChild(o[r]);this.uniqueId&&this.element.removeAttribute("id"),N(this.scrollEle),n.length>0&&(N(n[0]),m(n[1])||N(n[1])),I.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=H(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach(function(t){t.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlay=function(e){var t=e.id.concat("_nav"),n=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),r=this.createElement("div",{id:t.concat("_right"),className:i}),o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});r.appendChild(o);var s=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(n),e.appendChild(r),e.insertBefore(s,e.firstChild),this.eventBinding([r])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),i=this.createElement("div",{id:t.concat("_right"),className:n});i.setAttribute("aria-disabled","false");var r=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),s=this.createElement("div",{id:t.concat("_left"),className:o+" e-overlay"});s.setAttribute("aria-disabled","true");var a=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});s.appendChild(a),i.appendChild(r),i.setAttribute("tabindex","0"),e.appendChild(i),e.insertBefore(s,e.firstChild),this.ieCheck&&(i.classList.add("e-ie-align"),s.classList.add("e-ie-align")),this.eventBinding([i,s])},t.prototype.onKeyPress=function(e){var t=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout(function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)},100))},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach(function(e){new wt(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",function(e){e.preventDefault()}),I.add(e,"click",t.clickEventHandler,t)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,n=e.originalEvent.target;n=this.contains(n,"e-scroll-nav")?n.firstElementChild:n,this.timeout=window.setInterval(function(){t.eleScrolling(10,n,!0)},50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,n){var i=this.element,r=t.classList;r.contains("e-scroll-nav")&&(r=t.querySelector(".e-nav-arrow").classList),this.contains(i,"e-rtl")&&this.browserCheck&&(e=-e),!this.contains(i,"e-rtl")||this.browserCheck||this.ieCheck?r.contains("e-nav-right-arrow")?this.frameScrollRequest(e,"add",n):this.frameScrollRequest(e,"",n):r.contains("e-nav-left-arrow")?this.frameScrollRequest(e,"add",n):this.frameScrollRequest(e,"",n)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var t,n=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var i=.5,r=function(){var o=Math.sin(i);o<=0?window.cancelAnimationFrame(o):("Left"===e.swipeDirection?n.scrollLeft+=t*o:"Right"===e.swipeDirection&&(n.scrollLeft-=t*o),i-=.02,window.requestAnimationFrame(r))};r()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e},t.prototype.frameScrollRequest=function(e,t,n){var i=this;if(n)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(H(".e-scroll-overlay",this.element)).forEach(function(t){e-=t.offsetWidth});var r=function(){var n,o;i.contains(i.element,"e-rtl")&&i.browserCheck?(n=-e,o=-10):(n=e,o=10),n<10?window.cancelAnimationFrame(o):(i.scrollUpdating(o,t),e-=o,window.requestAnimationFrame(r))};r()}},t.prototype.touchHandler=function(e){var t,n=this.scrollEle;t=e.distanceX,this.ieCheck&&this.contains(this.element,"e-rtl")&&(t=-t),"Left"===e.scrollDirection?n.scrollLeft=n.scrollLeft+t:"Right"===e.scrollDirection&&(n.scrollLeft=n.scrollLeft-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var n=(m(e)?t:e).querySelector(".e-nav-arrow");m(e)?W(n,["e-nav-right-arrow"],["e-nav-left-arrow"]):W(n,["e-nav-left-arrow"],["e-nav-right-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollHandler=function(e){var t=e.target,n=t.offsetWidth,i=this.element,r=this.element.querySelector(".e-scroll-left-nav"),o=this.element.querySelector(".e-scroll-right-nav"),s=this.element.querySelector(".e-scroll-left-overlay"),a=this.element.querySelector(".e-scroll-right-overlay"),l=t.scrollLeft;if(l<=0&&(l=-l),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(s=this.element.querySelector(".e-scroll-right-overlay"),a=this.element.querySelector(".e-scroll-left-overlay")),s.style.width=l<40?l+"px":"40px",a.style.width=t.scrollWidth-Math.ceil(n+l)<40?t.scrollWidth-Math.ceil(n+l)+"px":"40px"),0===l)!this.contains(i,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(r,o):this.arrowDisabling(o,r);else if(Math.ceil(n+l+.1)>=t.scrollWidth)!this.contains(i,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(o,r):this.arrowDisabling(r,o);else{var c=this.element.querySelector(".e-scroll-nav.e-overlay");c&&(c.classList.remove("e-overlay"),c.setAttribute("aria-disabled","false"),c.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"scrollStep":break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}},Object(s.b)([ye(null)],t.prototype,"scrollStep",void 0),Object(s.b)([Ae],t)}(ht),dh=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(s.c)(t,e),t.prototype.preRender=function(){this.browser=re.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=re.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=v("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new wt(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),I.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),(m(this.scrollStep)||this.scrollStep<0)&&(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1),I.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.initialize=function(){var e=k("div",{className:"e-vscroll-content"}),t=k("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");for(var n=this.element,i=0,r=[].slice.call(n.children);i<r.length;i++)e.appendChild(r[i]);t.appendChild(e),n.appendChild(t),t.style.overflowY="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",T([this.element],["e-vscroll","e-scroll-device"]);var n=H(".e-"+t.id+"_nav.e-scroll-nav",t),i=H(".e-scroll-overlay",t);[].slice.call(i).forEach(function(e){N(e)});for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++)t.appendChild(o[r]);this.uniqueId&&this.element.removeAttribute("id"),N(this.scrollEle),n.length>0&&(N(n[0]),m(n[1])||N(n[1])),I.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=H(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach(function(t){t.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlayElement=function(e){var t=e.id.concat("_nav"),n=k("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),r=k("div",{id:t.concat("down"),className:i}),o=k("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});r.appendChild(o);var s=k("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(n),e.appendChild(r),e.insertBefore(s,e.firstChild),this.eventBinding([r])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),i=k("div",{id:t.concat("_down"),className:n});i.setAttribute("aria-disabled","false");var r=k("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),s=k("div",{id:t.concat("_up"),className:o+" e-overlay"});s.setAttribute("aria-disabled","true");var a=k("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});s.appendChild(a),i.appendChild(r),i.setAttribute("tabindex","0"),e.appendChild(i),e.insertBefore(s,e.firstChild),this.ieCheck&&(i.classList.add("e-ie-align"),s.classList.add("e-ie-align")),this.eventBinding([i,s])},t.prototype.onKeyPress=function(e){var t=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout(function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)},100))},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach(function(e){new wt(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",function(e){e.preventDefault()}),I.add(e,"click",t.clickEventHandler,t)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,n=e.originalEvent.target;n=this.contains(n,"e-scroll-nav")?n.firstElementChild:n,this.timeout=window.setInterval(function(){t.eleScrolling(10,n,!0)},50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,n){var i=t.classList;i.contains("e-scroll-nav")&&(i=t.querySelector(".e-nav-arrow").classList),i.contains("e-nav-down-arrow")?this.frameScrollRequest(e,"add",n):i.contains("e-nav-up-arrow")&&this.frameScrollRequest(e,"",n)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var t,n=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var i=.5,r=function(){var o=Math.sin(i);o<=0?window.cancelAnimationFrame(o):("Up"===e.swipeDirection?n.scrollTop+=t*o:"Down"===e.swipeDirection&&(n.scrollTop-=t*o),i-=.02,window.requestAnimationFrame(r))};r()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,t,n){var i=this;if(n)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(H(".e-scroll-overlay",this.element)).forEach(function(t){e-=t.offsetHeight});var r=function(){e<10?window.cancelAnimationFrame(10):(i.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(r))};r()}},t.prototype.touchHandler=function(e){var t,n=this.scrollEle;t=e.distanceY,"Up"===e.scrollDirection?n.scrollTop=n.scrollTop+t:"Down"===e.scrollDirection&&(n.scrollTop=n.scrollTop-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var n=(m(e)?t:e).querySelector(".e-nav-arrow");m(e)?W(n,["e-nav-down-arrow"],["e-nav-up-arrow"]):W(n,["e-nav-up-arrow"],["e-nav-down-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var t=e.target,n=t.offsetHeight,i=this.element.querySelector(".e-scroll-up-nav"),r=this.element.querySelector(".e-scroll-down-nav"),o=this.element.querySelector(".e-scroll-up-overlay"),s=this.element.querySelector(".e-scroll-down-overlay"),a=t.scrollTop;if(a<=0&&(a=-a),this.isDevice&&(o.style.height=a<40?a+"px":"40px",s.style.height=t.scrollHeight-Math.ceil(n+a)<40?t.scrollHeight-Math.ceil(n+a)+"px":"40px"),0===a)this.arrowDisabling(i,r);else if(Math.ceil(n+a+.1)>=t.scrollHeight)this.arrowDisabling(r,i);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"scrollStep":break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}},Object(s.b)([ye(null)],t.prototype,"scrollStep",void 0),Object(s.b)([Ae],t)}(ht),uh="e-focused",ph="e-menu-header",fh="e-selected",gh="e-menu-item",mh="e-menu-hide",yh="e-menu-popup",vh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("id")],t.prototype,"itemId",void 0),Object(s.b)([ye("parentId")],t.prototype,"parentId",void 0),Object(s.b)([ye("text")],t.prototype,"text",void 0),Object(s.b)([ye("iconCss")],t.prototype,"iconCss",void 0),Object(s.b)([ye("url")],t.prototype,"url",void 0),Object(s.b)([ye("separator")],t.prototype,"separator",void 0),Object(s.b)([ye("items")],t.prototype,"children",void 0),t}(Le),bh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(null)],t.prototype,"iconCss",void 0),Object(s.b)([ye("")],t.prototype,"id",void 0),Object(s.b)([ye(!1)],t.prototype,"separator",void 0),Object(s.b)([we([],t)],t.prototype,"items",void 0),Object(s.b)([ye("")],t.prototype,"text",void 0),Object(s.b)([ye("")],t.prototype,"url",void 0),t}(Le),wh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("SlideDown")],t.prototype,"effect",void 0),Object(s.b)([ye(400)],t.prototype,"duration",void 0),Object(s.b)([ye("ease")],t.prototype,"easing",void 0),t}(Le),Ch=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.navIdx=[],i.animation=new Oe({}),i.isTapHold=!1,i}return Object(s.c)(t,e),t.prototype.preRender=function(){if(!this.isMenu){var e=void 0;if("EJS-CONTEXTMENU"===this.element.tagName){e=this.createElement("ul",{id:v(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var t=h("ej2_instances",this.element);T([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=e,d("ej2_instances",t,this.element)}else{e=this.createElement("ul",{id:v(this.getModuleName())}),L([].slice.call(this.element.cloneNode(!0).children),e);var n=this.element.nextElementSibling;n?this.element.parentElement.insertBefore(e,n):this.element.parentElement.appendChild(e),this.clonedElement=e}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){for(var i=this.element,r=h("ej2_instances",i),o=(e=this.createElement("ul"),this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"})),s=0,a=i.attributes.length;s<a;s++)e.setAttribute(i.attributes[s].nodeName,i.attributes[s].nodeValue);i.parentNode.insertBefore(o,i),N(i),o.appendChild(i=e),d("ej2_instances",r,i),this.clonedElement=o,this.element=i,this.element.id||(this.element.id=v(this.getModuleName()))}},t.prototype.render=function(){this.initialize(),this.renderItems(),this.wireEvents()},t.prototype.initialize=function(){var e=this.getWrapper();e||(e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(e,this.element):document.body.appendChild(e)),this.cssClass&&P([e],this.cssClass.split(" ")),this.enableRtl&&e.classList.add("e-rtl"),e.appendChild(this.element)},t.prototype.renderItems=function(){if(!this.items.length){var e=Cc.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:e},!0),this.element.innerHTML=""}var t=this.createItems(this.items);L(Array.prototype.slice.call(t.children),this.element),this.element.classList.add("e-menu-parent");var n=this.getWrapper();this.element.classList.contains("e-vertical")?this.addScrolling(n,this.element,"vscroll",n.offsetHeight,this.element.offsetHeight):this.addScrolling(n,this.element,"hscroll",n.offsetWidth,this.element.offsetWidth)},t.prototype.wireEvents=function(){var e=this.getWrapper();if(this.target){for(var t=void 0,n=H(this.target),i=0,r=n.length;i<r;i++)t=n[i],re.isIos?new wt(t,{tapHold:this.touchHandler.bind(this)}):I.add(t,"contextmenu",this.cmenuHandler,this);this.targetElement=t;for(var o=0,s=Ji(this.targetElement);o<s.length;o++)I.add(s[o],"scroll",this.scrollHandler,this)}re.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),I.add(this.isMenu?document:e,"mouseover",this.delegateMoverHandler,this),I.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),I.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(e),this.rippleFn=Ee(e,{selector:"."+gh})},t.prototype.wireKeyboardEvent=function(e){var t={downarrow:"downarrow",uparrow:"uparrow",enter:"enter",leftarrow:"leftarrow",rightarrow:"rightarrow",escape:"escape"};this.isMenu&&(t.home="home",t.end="end"),new mt(e,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:t})},t.prototype.mouseDownHandler=function(e){V(e.target,".e-"+this.getModuleName()+"-wrapper")===this.getWrapper()||V(e.target,".e-"+this.getModuleName()+"-popup")||this.closeMenu(this.navIdx.length,e)},t.prototype.keyBoardHandler=function(e){var t="",n=e.target,i=this.isMenu&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(e.preventDefault(),this.enableScrolling&&13===e.keyCode&&n.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([uh,fh],[V(n,".e-"+this.getModuleName()+"-wrapper")]),i)switch(e.action){case"rightarrow":t="rightarrow",e.action="downarrow";break;case"leftarrow":t="leftarrow",e.action="uparrow";break;case"downarrow":t="downarrow",e.action="rightarrow";break;case"uparrow":t="uparrow",e.action=""}else if(this.enableRtl)switch(e.action){case"leftarrow":i=!0,t="leftarrow",e.action="rightarrow";break;case"rightarrow":i=!0,t="rightarrow",e.action="leftarrow"}switch(e.action){case"downarrow":case"uparrow":case"end":case"home":this.upDownKeyHandler(e);break;case"rightarrow":this.rightEnterKeyHandler(e);break;case"leftarrow":this.leftEscKeyHandler(e);break;case"enter":this.rightEnterKeyHandler(e);break;case"escape":this.leftEscKeyHandler(e)}i&&(e.action=t)},t.prototype.upDownKeyHandler=function(e){var t=this.getUlByNavIdx(),n="downarrow"===e.action||"home"===e.action?0:t.childElementCount-1,i=n,r=this.getLIByClass(t,uh);r&&("end"!==e.action&&"home"!==e.action&&(i=this.getIdx(t,r)),r.classList.remove(uh),"end"!==e.action&&"home"!==e.action&&("downarrow"===e.action?i++:i--,i===("downarrow"===e.action?t.childElementCount:-1)&&(i=n))),i=this.isValidLI(t.children[i],i,e.action),t.children[i].classList.add(uh),t.children[i].focus()},t.prototype.isValidLI=function(e,t,n){this.getWrapper();var i=this.getUlByNavIdx();return(e.classList.contains("e-separator")||e.classList.contains("e-disabled")||e.classList.contains(mh))&&("downarrow"===n||"rightarrow"===n?t++:t--),((e=i.children[t]).classList.contains("e-separator")||e.classList.contains("e-disabled")||e.classList.contains(mh))&&(t=this.isValidLI(e,t,n)),t},t.prototype.getUlByNavIdx=function(e){if(void 0===e&&(e=this.navIdx.length),this.isMenu){var t=[this.getWrapper()].concat([].slice.call(H("."+yh)))[e];return m(t)?null:z(".e-menu-parent",t)}return this.getWrapper().children[e]},t.prototype.rightEnterKeyHandler=function(e){var t=this.getUlByNavIdx(),n=this.getLIByClass(t,uh);if(n){var i=this.getIdx(t,n),r=this.navIdx.concat(i),o=void 0,s=this.getItem(r);s.items.length?(this.navIdx.push(i),this.openMenu(n,s,null,null,e),n.classList.remove(uh),this.isMenu&&1===this.navIdx.length&&this.removeLIStateByClass([fh],[this.getWrapper()]),n.classList.add(fh),"enter"===e.action&&this.trigger("select",{element:n,item:s,event:e}),n.focus(),t=this.getUlByNavIdx(),o=this.isValidLI(t.children[0],0,e.action),t.children[o].classList.add(uh),t.children[o].focus()):"enter"===e.action&&(this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass([fh],[this.getWrapper()]):n.classList.remove(uh),n.classList.add(fh),this.trigger("select",{element:n,item:s,event:e}),this.closeMenu(null,e))}},t.prototype.leftEscKeyHandler=function(e){if(this.navIdx.length){this.closeMenu(this.navIdx.length,e);var t=this.getUlByNavIdx(),n=this.getLIByClass(t,fh);n&&(n.setAttribute("aria-expanded","false"),n.classList.remove(fh),n.classList.add(uh),n.focus())}else"escape"===e.action&&this.closeMenu(null,e)},t.prototype.scrollHandler=function(e){this.closeMenu(null,e)},t.prototype.touchHandler=function(e){this.isTapHold=!0,this.cmenuHandler(e.originalEvent)},t.prototype.cmenuHandler=function(e){e.preventDefault(),this.closeMenu(null,e),this.canOpen(e.target)&&(e.changedTouches?this.openMenu(null,null,e.changedTouches[0].pageY+1,e.changedTouches[0].pageX+1,e):this.openMenu(null,null,e.pageY+1,e.pageX+1,e))},t.prototype.closeMenu=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=null),this.isMenuVisible())for(var n=void 0,i=void 0,r=void 0,o=void 0,s=void 0,a=void 0,l=void 0,c=this.getWrapper(),h=this.getPopups(),d=this.isMenu?h.length+1:c.childElementCount;d>e;d--){if(n=this.isMenu&&1!==d?z(".e-ul",h[d-2]):H(".e-menu-parent",c)[d-1],this.isMenu&&n.classList.contains("e-menu")){(i=this.getLIByClass(n,fh))&&i.classList.remove(fh);break}r=this.navIdx.length?this.getItem(this.navIdx):null,this.trigger("beforeClose",s={element:n,parentItem:r,items:o=r?r.items:this.items,event:t,cancel:!1}),s.cancel||(this.isMenu?(a=V(n,"."+yh),this.unWireKeyboardEvent(a),this.destroyScrollObj(A(a.children[0],dh),a.children[0]),(l=A(a,Ki)).hide(),l.destroy(),N(a)):this.toggleAnimation(n,!1),this.navIdx.length=e?e-1:e,this.trigger("onClose",{element:n,parentItem:r,items:o}))}},t.prototype.destroyScrollObj=function(e,t){e&&(e.destroy(),t.parentElement.appendChild(z(".e-menu-parent",t)),N(t))},t.prototype.getPopups=function(){var e=this,t=[];return[].slice.call(document.querySelectorAll("."+yh)).forEach(function(n){e.getIndex(n.querySelector("."+gh).id,!0).length&&t.push(n)}),t},t.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&j(this.element).valueOf()},t.prototype.canOpen=function(e){var t=!0;if(this.filter){t=!1;for(var n=this.filter.split(" "),i=0,r=n.length;i<r;i++)if(V(e,"."+n[i])){t=!0;break}}return t},t.prototype.openMenu=function(e,t,n,i,r,o){var s,a,l,c,h=this;void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=null),void 0===o&&(o=this.targetElement);var d=this.getWrapper();if(e){if(s=this.createItems(t[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&re.isDevice){d.lastChild.style.display="none";var u={text:t[this.getField("text")].toString(),iconCss:"e-icons e-previous"},p=new bh(this.items[0],null,u,!0),f=this.createItems([p]).children[0];f.classList.add(ph),s.insertBefore(f,s.children[0])}if(this.isMenu){l=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+yh,id:e.id+"-menu-popup"}),document.body.appendChild(l);var g=this.element.classList.contains("e-vertical")||1!==this.navIdx.length;a=new Ki(l,{relateTo:e,collision:{X:g||this.enableRtl?"none":"flip",Y:"fit"},position:g?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:s,open:function(){var e=z(".e-menu-vscroll",a.element);e&&(e.style.height="inherit",e.style.maxHeight="");var t=z(".e-ul",a.element);a.element.style.maxHeight="",t.focus(),h.triggerOpen(t)}}),this.cssClass&&P([l],this.cssClass.split(" ")),a.hide(),n=(c=this.triggerBeforeOpen(e,s,t,r,0,0)).top,i=c.left,l.style.display="block",l.style.maxHeight=l.getBoundingClientRect().height+"px",this.addScrolling(l,s,"vscroll",l.offsetHeight,s.offsetHeight),this.checkScrollOffset(r);var m=void 0;i||n?a.collision={X:"none",Y:"none"}:(a.refreshPosition(e,!0),i=parseInt(l.style.left,10),n=parseInt(l.style.top,10),this.enableRtl&&(i=g?i-l.offsetWidth-e.parentElement.offsetWidth:i-l.offsetWidth+e.offsetWidth),m=Ri(l,null,i,n),(g||this.enableRtl)&&(m.indexOf("right")>-1||m.indexOf("left")>-1)&&(a.collision.X="none",i=this.enableRtl?xi(e,g?"right":"left","top").left:i-l.offsetWidth-V(e,".e-"+this.getModuleName()+"-wrapper").offsetWidth),((m=Ri(l,null,i,n)).indexOf("left")>-1||m.indexOf("right")>-1)&&(i=this.callFit(l,!0,!1,n,i).left),l.style.left=i+"px"),l.style.display=""}else s.style.zIndex=this.element.style.zIndex,d.appendChild(s),n=(c=this.triggerBeforeOpen(e,s,t,r,n,i)).top,i=c.left}else(s=this.element).style.zIndex=$i(o||this.element).toString(),n=(c=this.triggerBeforeOpen(e,s,t,r,n,i)).top,i=c.left;c.cancel?(this.isMenu&&(a.destroy(),N(l)),this.navIdx.pop()):this.isMenu?(this.wireKeyboardEvent(l),Ee(l,{selector:"."+gh}),l.style.left=i+"px",l.style.top=n+"px",a.show("None"!==this.animationSettings.effect?{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing}:null,e)):(this.setPosition(e,s,n,i),this.toggleAnimation(s))},t.prototype.callFit=function(e,t,n,i,r){return ji(e,null,{X:t,Y:n},{top:i,left:r})},t.prototype.triggerBeforeOpen=function(e,t,n,i,r,o){this.getIndex(e?e.id:null,!0);var s={element:t,items:e?n[this.getField("children",this.navIdx.length-1)]:this.items,parentItem:n,event:i,cancel:!1,top:r,left:o};return this.trigger("beforeOpen",s),s},t.prototype.checkScrollOffset=function(e){var t=this.getWrapper();if(t.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){var n,i,r=m(e)?this.element:V(e.target,"."+gh),o=z(".e-hscroll-bar",t);o.scrollLeft>r.offsetLeft&&(o.scrollLeft-=o.scrollLeft-r.offsetLeft),(n=o.scrollLeft+o.offsetWidth)<(i=r.offsetLeft+r.offsetWidth)&&(o.scrollLeft+=i-n)}},t.prototype.addScrolling=function(e,t,n,i,r){if(this.enableScrolling&&i<r){var o=this.createElement("div",{className:"e-menu-"+n});e.appendChild(o),o.appendChild(t),o.style.maxHeight=e.style.maxHeight,e.style.overflow="hidden","vscroll"===n?new dh({enableRtl:this.enableRtl},o).scrollStep=z(".e-"+n+"-bar",e).offsetHeight/2:new hh({enableRtl:this.enableRtl},o).scrollStep=z(".e-"+n+"-bar",e).offsetWidth}},t.prototype.setPosition=function(e,t,n,i){if(this.toggleVisiblity(t),t===this.element||!m(i)&&!m(n))(o=Ri(t,null,i,n)).indexOf("right")>-1&&(i-=t.offsetWidth),o.indexOf("bottom")>-1&&(n=(r=this.callFit(t,!1,!0,n,i)).top-20),(o=Ri(t,null,i,n)).indexOf("left")>-1&&(i=(r=this.callFit(t,!0,!1,n,i)).left);else if(re.isDevice)n=Number(this.element.style.top.replace("px","")),i=Number(this.element.style.left.replace("px",""));else{var r;i=(r=xi(e,this.enableRtl?"left":"right","top")).left;var o,s=(o=Ri(t,null,this.enableRtl?i-t.offsetWidth:i,n=r.top)).indexOf("left")>-1||o.indexOf("right")>-1;s&&(i=(r=xi(e,this.enableRtl?"right":"left","top")).left),(this.enableRtl||s)&&(i=this.enableRtl&&s?i:i-t.offsetWidth),o.indexOf("bottom")>-1&&(n=(r=this.callFit(t,!1,!0,n,i)).top)}this.toggleVisiblity(t,!1),t.style.top=n+"px",t.style.left=i+"px"},t.prototype.toggleVisiblity=function(e,t){void 0===t&&(t=!0),e.style.visibility=t?"hidden":"",e.style.display=t?"block":"none"},t.prototype.createItems=function(e){var t=this,n=this.navIdx?this.navIdx.length:0,i=this.hasField(e,this.getField("iconCss",n)),r={showIcon:i,moduleName:"menu",fields:this.getFields(n),template:this.template,itemCreating:function(e){e.curData[e.fields.id]||(e.curData[e.fields.id]=v("menuitem")),e.curData.htmlAttributes={role:"menuitem",tabindex:"-1"},t.isMenu&&!e.curData[t.getField("separator",n)]&&(e.curData.htmlAttributes["aria-label"]=e.curData[e.fields.text]),""===e.curData[e.fields.iconCss]&&(e.curData[e.fields.iconCss]=null)},itemCreated:function(e){if(e.curData[t.getField("separator",n)]&&(e.item.classList.add("e-separator"),e.item.removeAttribute("role")),!i||e.curData[e.fields.iconCss]||e.curData[t.getField("separator",n)]||e.item.classList.add("e-blankicon"),e.curData[e.fields.child]&&e.curData[e.fields.child].length){var r=t.createElement("span",{className:"e-icons e-caret"});e.item.appendChild(r),e.item.setAttribute("aria-haspopup","true"),e.item.setAttribute("aria-expanded","false"),t.isMenu||e.item.removeAttribute("role"),e.item.classList.add("e-menu-caret-icon")}t.isMenu&&t.template&&(e.item.setAttribute("id",e.curData[e.fields.id].toString()),e.item.removeAttribute("data-uid")),t.trigger("beforeItemRender",{item:e.curData,element:e.item})}};this.setProperties({items:this.items},!0);var o=Cc.createList(this.createElement,e,r,!this.template);return o.setAttribute("tabindex","0"),this.isMenu&&o.setAttribute("role","menu"),o},t.prototype.moverHandler=function(e){var t=this.getWrapper(),n=e.target,i=this.getLI(n);i&&V(i,".e-"+this.getModuleName()+"-wrapper")&&(this.removeLIStateByClass([uh],this.isMenu?[t].concat(this.getPopups()):[t]),i.classList.add(uh),this.showItemOnClick||this.clickHandler(e)),this.isMenu&&(n.parentElement===t||V(n,".e-"+this.getModuleName()+"-popup")||i&&(!i||this.getIndex(i.id,!0).length)||(this.removeLIStateByClass([uh,fh],[t]),this.navIdx.length&&this.closeMenu(null,e)),t=V(n,".e-menu-vscroll"),"DIV"===n.tagName&&t&&this.removeLIStateByClass([uh,fh],[t]))},t.prototype.removeLIStateByClass=function(e,t){for(var n,i=function(i){e.forEach(function(e){(n=z("."+e,t[i]))&&n.classList.remove(e)})},r=0;r<t.length;r++)i(r)},t.prototype.getField=function(e,t){void 0===t&&(t=0);var n=this.fields[e];return"string"==typeof n?n:n[t]?n[t].toString():n[n.length-1].toString()},t.prototype.getFields=function(e){return void 0===e&&(e=0),{id:this.getField("itemId",e),iconCss:this.getField("iconCss",e),text:this.getField("text",e),url:this.getField("url",e),child:this.getField("children",e),separator:this.getField("separator",e)}},t.prototype.hasField=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n][t])return!0;return!1},t.prototype.clickHandler=function(e){if(this.isTapHold)this.isTapHold=!1;else{var t=this.getWrapper(),n=e.target,i=this.getLI(n),r=i?V(i,".e-"+this.getModuleName()+"-wrapper"):null,o=i&&r&&(this.isMenu?this.getIndex(i.id,!0).length>0:t.firstElementChild.id===r.firstElementChild.id);if(o&&"click"===e.type&&!i.classList.contains(ph)){this.setLISelected(i);var s=this.getIndex(i.id,!0),a=this.getItem(s);this.trigger("select",{element:i,item:a,event:e})}if(o&&("mouseover"===e.type||re.isDevice||this.showItemOnClick)){var l=void 0;if(i.classList.contains(ph))this.toggleAnimation(l=t.children[this.navIdx.length-1]),(u=this.getLIByClass(l,fh))&&u.classList.remove(fh),N(i.parentNode),this.navIdx.pop();else if(!i.classList.contains("e-separator")){var c=!0,h=i.parentNode,d=this.getIdx(h,i);if(this.isMenu||!re.isDevice){var u,p=this.isMenu?Array.prototype.indexOf.call([t].concat(this.getPopups()),V(h,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(t,h);this.navIdx[p]===d&&(c=!1),p===this.navIdx.length||"mouseover"===e.type&&!c||((u=this.getLIByClass(h,fh))&&u.classList.remove(fh),this.closeMenu(p+1,e))}if(c){var f=this.navIdx.concat(d);(a=this.getItem(f))[this.getField("children",f.length-1)]&&a[this.getField("children",f.length-1)].length?(("mouseover"===e.type||re.isDevice&&this.isMenu)&&this.setLISelected(i),i.setAttribute("aria-expanded","true"),this.navIdx.push(d),this.openMenu(i,a,null,null,e)):"mouseover"!==e.type&&this.closeMenu(null,e)}}}else if(this.isMenu&&"DIV"===n.tagName&&this.navIdx.length&&V(n,".e-menu-vscroll")){var g=V(n,"."+yh),m=Array.prototype.indexOf.call(this.getPopups(),g)+1;m<this.navIdx.length&&(this.closeMenu(m+1,e),this.removeLIStateByClass([uh,fh],[g]))}else"UL"===n.tagName&&n.parentElement===t||i&&i.querySelector(".e-caret")||this.closeMenu(null,e)}},t.prototype.setLISelected=function(e){var t=this.getLIByClass(e.parentElement,fh);t&&t.classList.remove(fh),this.isMenu||e.classList.remove(uh),e.classList.add(fh)},t.prototype.getLIByClass=function(e,t){for(var n=0,i=e.children.length;n<i;n++)if(e.children[n].classList.contains(t))return e.children[n];return null},t.prototype.getItem=function(e){var t=(e=e.slice()).pop();return this.getItems(e)[t]},t.prototype.getItems=function(e){for(var t=this.items,n=0;n<e.length;n++)t=t[e[n]][this.getField("children",n)];return t},t.prototype.getIdx=function(e,t,n){void 0===n&&(n=!0);var i=Array.prototype.indexOf.call(e.children,t);return n&&e.children[0].classList.contains(ph)&&i--,i},t.prototype.getLI=function(e){return"LI"===e.tagName&&e.classList.contains("e-menu-item")?e:V(e,"li.e-menu-item")},t.prototype.onPropertyChanged=function(e,t){for(var n=this,i=this.getWrapper(),r=function(r){switch(r){case"cssClass":t.cssClass&&T([i],t.cssClass.split(" ")),e.cssClass&&P([i],e.cssClass.split(" "));break;case"enableRtl":i.classList.toggle("e-rtl");break;case"showItemOnClick":o.unWireEvents(),o.showItemOnClick=e.showItemOnClick,o.wireEvents();break;case"enableScrolling":if(e.enableScrolling){var s;o.element.classList.contains("e-vertical")?o.addScrolling(i,o.element,"vscroll",i.offsetHeight,o.element.offsetHeight):o.addScrolling(i,o.element,"hscroll",i.offsetWidth,o.element.offsetWidth),o.getPopups().forEach(function(e){s=z(".e-ul",e),n.addScrolling(e,s,"vscroll",e.offsetHeight,s.offsetHeight)})}else{var a=i.children[0];o.element.classList.contains("e-vertical")?o.destroyScrollObj(A(a,dh),a):o.destroyScrollObj(A(a,hh),a),i.style.overflow="",i.appendChild(o.element),o.getPopups().forEach(function(e){n.destroyScrollObj(A(a=e.children[0],dh),a),e.style.overflow=""})}break;case"items":var l=void 0,c=void 0,h=void 0;if(Object.keys(t.items).length){var d=Object.keys(e.items);for(p=0;p<d.length;p++)(c=o.getChangedItemIndex(e,[],Number(d[p]))).length<=o.getWrapper().children.length&&(l=c.pop(),h=o.getItems(c),o.insertAfter([h[l]],h[l].text),o.removeItem(h,c,l)),c.length=0}else{var u=o.element;u.innerHTML="",[].slice.call(o.createItems(o.items).children).forEach(function(e){u.appendChild(e)});for(var p=1,f=i.childElementCount;p<f;p++)N(i.lastElementChild);o.navIdx=[]}}},o=this,s=0,a=Object.keys(e);s<a.length;s++)r(a[s])},t.prototype.getChangedItemIndex=function(e,t,n){t.push(n);var i=Object.keys(e.items[n]).pop();if("items"===i){var r=e.items[n];this.getChangedItemIndex(r,t,Number(Object.keys(r.items).pop()))}else"isParentArray"===i&&t.length>1&&t.pop();return t},t.prototype.removeItem=function(e,t,n){e.splice(n,1);var i=this.getWrapper().children;t.length<i.length&&N(i[t.length].children[n])},t.prototype.unWireEvents=function(e){void 0===e&&(e=this.target);var t=this.getWrapper();if(e){for(var n=void 0,i=void 0,r=H(e),o=0,s=r.length;o<s;o++)n=r[o],re.isIos?(i=A(n,wt))&&i.destroy():I.remove(n,"contextmenu",this.cmenuHandler);for(var a=0,l=Ji(this.targetElement);a<l.length;a++)I.remove(l[a],"scroll",this.scrollHandler)}re.isDevice||(I.remove(this.isMenu?document:t,"mouseover",this.delegateMoverHandler),I.remove(document,"mousedown",this.delegateMouseDownHandler)),I.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(t),this.rippleFn()},t.prototype.unWireKeyboardEvent=function(e){var t=A(e,mt);t&&t.destroy()},t.prototype.toggleAnimation=function(e,t){var n=this;void 0===t&&(t=!0),"None"!==this.animationSettings.effect&&t?this.animation.animate(e,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(e){e.element.style.display="block",e.element.style.maxHeight=e.element.getBoundingClientRect().height+"px"},end:function(e){n.end(e.element,t)}}):this.end(e,t)},t.prototype.triggerOpen=function(e){var t=this.navIdx.length?this.getItem(this.navIdx):null;this.trigger("onOpen",{element:e,parentItem:t,items:t?t.items:this.items})},t.prototype.end=function(e,t){if(t)if(e.style.display="block",e.style.maxHeight="",this.triggerOpen(e),e.querySelector("."+uh))e.querySelector("."+uh).focus();else{var n=void 0;(n=this.getWrapper().children[this.getIdx(this.getWrapper(),e)-1])?n.querySelector("."+fh).focus():this.element.focus()}else if(e===this.element){var i=this.getLIByClass(this.element,uh);i&&i.classList.remove(uh);var r=this.getLIByClass(this.element,fh);r&&r.classList.remove(fh),e.style.display="none"}else N(e)},t.prototype.getPersistData=function(){return""},t.prototype.getWrapper=function(){return V(this.element,".e-"+this.getModuleName()+"-wrapper")},t.prototype.getIndex=function(e,t,n,i,r,o){var s;void 0===n&&(n=this.items),void 0===i&&(i=[]),void 0===r&&(r=!1),void 0===o&&(o=0),o=r?o+1:0;for(var a=0,l=n.length;a<l;a++){if(s=n[a],(t?s[this.getField("itemId",o)]:s[this.getField("text",o)])===e){i.push(a);break}if(s[this.getField("children",o)]&&s[this.getField("children",o)].length){if(-1!==(i=this.getIndex(e,t,s[this.getField("children",o)],i,!0,o))[i.length-1]){i.unshift(a);break}a!==l-1&&i.pop()}else a===l-1&&i.push(-1)}return r||-1!==i[0]?i:[]},t.prototype.enableItems=function(e,t,n){var i,r,o;void 0===t&&(t=!0);for(var s="e-disabled",a=0;a<e.length;a++)r=(o=this.getIndex(e[a],n)).pop(),(i=this.getUlByNavIdx(o.length))&&(t?this.isMenu?(i.children[r].classList.remove(s),i.children[r].removeAttribute("aria-disabled")):re.isDevice&&!i.classList.contains("e-contextmenu")?i.children[r+1].classList.remove(s):i.children[r].classList.remove(s):this.isMenu?(i.children[r].classList.add(s),i.children[r].setAttribute("aria-disabled","true")):re.isDevice&&!i.classList.contains("e-contextmenu")?i.children[r+1].classList.add(s):i.children[r].classList.add(s))},t.prototype.showItems=function(e,t){this.showHideItems(e,!1,t)},t.prototype.hideItems=function(e,t){this.showHideItems(e,!0,t)},t.prototype.showHideItems=function(e,t,n){for(var i,r,o,s=0;s<e.length;s++)r=(o=this.getIndex(e[s],n)).pop(),(i=this.getUlByNavIdx(o.length))&&(t?re.isDevice&&!i.classList.contains("e-contextmenu")?i.children[r+1].classList.add(mh):i.children[r].classList.add(mh):re.isDevice&&!i.classList.contains("e-contextmenu")?i.children[r+1].classList.remove(mh):i.children[r].classList.remove(mh))},t.prototype.removeItems=function(e,t){for(var n,i,r,o=0;o<e.length;o++)n=(i=this.getIndex(e[o],t)).pop(),r=this.getItems(i),this.removeItem(r,i,n)},t.prototype.insertAfter=function(e,t,n){this.insertItems(e,t,n)},t.prototype.insertBefore=function(e,t,n){this.insertItems(e,t,n,!1)},t.prototype.insertItems=function(e,t,n,i){var r,o,s,a,l;void 0===i&&(i=!0);for(var c=0;c<e.length;c++){o=(s=this.getIndex(t,n)).pop(),a=this.getItems(s),l=new bh(a[0],"items",e[c],!0),a.splice(i?o+1:o,0,l);var h=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(s.length<h.length){o=i?o+1:o,this.hasField(a,this.getField("iconCss",s.length-1)),r=this.createItems(a).children[o];var d=this.isMenu?z(".e-menu-parent",h[s.length]):h[s.length];d.insertBefore(r,d.children[o])}}},t.prototype.removeAttributes=function(){var e=this;["top","left","display","z-index"].forEach(function(t){e.element.style.removeProperty(t)}),["role","tabindex","class","style"].forEach(function(t){"class"===t&&e.element.classList.contains("e-menu-parent")&&e.element.classList.remove("e-menu-parent"),-1!==["class","style"].indexOf(t)&&e.element.getAttribute(t)||e.element.removeAttribute(t),e.isMenu&&"class"===t&&e.element.classList.contains("e-vertical")&&e.element.classList.remove("e-vertical")})},t.prototype.destroy=function(){var t=this.getWrapper();if(t){if(this.unWireEvents(),this.isMenu)this.closeMenu(),this.element.innerHTML="",this.removeAttributes(),t.parentNode.insertBefore(this.element,t);else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)P([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var n=this.clonedElement.nextElementSibling;n&&n!==t?this.clonedElement.parentElement.insertBefore(this.element,n):this.clonedElement.parentElement.appendChild(this.element),this.element.innerHTML="",L([].slice.call(this.clonedElement.children),this.element),N(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?(N(this.element),t.style.display="",t.classList.remove("e-"+this.getModuleName()+"-wrapper"),t.removeAttribute("data-ripple")):N(t),e.prototype.destroy.call(this)}},Object(s.b)([xe()],t.prototype,"beforeItemRender",void 0),Object(s.b)([xe()],t.prototype,"beforeOpen",void 0),Object(s.b)([xe()],t.prototype,"onOpen",void 0),Object(s.b)([xe()],t.prototype,"beforeClose",void 0),Object(s.b)([xe()],t.prototype,"onClose",void 0),Object(s.b)([xe()],t.prototype,"select",void 0),Object(s.b)([xe()],t.prototype,"created",void 0),Object(s.b)([ye("")],t.prototype,"cssClass",void 0),Object(s.b)([ye(!1)],t.prototype,"showItemOnClick",void 0),Object(s.b)([ye("")],t.prototype,"target",void 0),Object(s.b)([ye("")],t.prototype,"filter",void 0),Object(s.b)([ye(null)],t.prototype,"template",void 0),Object(s.b)([ye(!1)],t.prototype,"enableScrolling",void 0),Object(s.b)([ve({},vh)],t.prototype,"fields",void 0),Object(s.b)([we([],bh)],t.prototype,"items",void 0),Object(s.b)([ve({},wh)],t.prototype,"animationSettings",void 0),Object(s.b)([Ae],t)}(ht),xh=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(s.c)(t,e),t.prototype.preRender=function(){this.isMenu=!1,e.prototype.preRender.call(this)},t.prototype.initialize=function(){e.prototype.initialize.call(this),F(this.element,{role:"menu",tabindex:"0"}),this.element.style.zIndex=$i(this.element).toString()},t.prototype.open=function(t,n,i){e.prototype.openMenu.call(this,null,null,t,n,null,i)},t.prototype.close=function(){e.prototype.closeMenu.call(this)},t.prototype.onPropertyChanged=function(t,n){e.prototype.onPropertyChanged.call(this,t,n);for(var i=0,r=Object.keys(t);i<r.length;i++)switch(r[i]){case"filter":this.close(),this.filter=t.filter;break;case"target":this.unWireEvents(n.target),this.wireEvents()}},t.prototype.getModuleName=function(){return"contextmenu"},Object(s.b)([ye("")],t.prototype,"target",void 0),Object(s.b)([ye("")],t.prototype,"filter",void 0),Object(s.b)([we([],bh)],t.prototype,"items",void 0),Object(s.b)([Ae],t)}(Ch),Ah=function(){function e(e,t){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=e,this.serviceLocator=t,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on("initial-load",this.render,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off("initial-load",this.render)},e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.element=Pl("ul",{id:this.parent.element.id+"_contextMenu"}),this.parent.element.appendChild(this.element);var e="#"+this.parent.element.id;this.contextMenu=new xh({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:e,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),beforeItemRender:this.BeforeItemRender.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:"e-diagram-menu"}),this.contextMenu.appendTo(this.element)},e.prototype.getMenuItems=function(){var e=[],t=[],n=[];if(!this.parent.contextMenuSettings.showCustomMenuOnly){for(var i=0,r=this.getDefaultItems();i<r.length;i++){var o=r[i];-1!==o.toLocaleLowerCase().indexOf("group")?"grouping"!==o.toLocaleLowerCase()&&n.push(this.buildDefaultItems(o)):-1!==o.toLocaleLowerCase().indexOf("order")?"order"!==o.toLocaleLowerCase()&&t.push(this.buildDefaultItems(o)):e.push(this.buildDefaultItems(o))}var s;n.length>0&&((s=this.buildDefaultItems("grouping")).items=n,e.push(s)),t.length>0&&((s=this.buildDefaultItems("order")).items=t,e.push(s))}if(this.parent.contextMenuSettings.items)for(var a=0,l=this.parent.contextMenuSettings.items;a<l.length;a++)e.push(l[a]);return e},e.prototype.contextMenuOpen=function(){this.isOpen=!0},e.prototype.BeforeItemRender=function(e){this.parent.trigger("contextMenuBeforeItemRender",e)},e.prototype.contextMenuItemClick=function(e){document.getElementById(this.parent.element.id+"content").focus(),this.parent.trigger("contextMenuClick",e);var t=this.getKeyFromId(e.item.id);if(!e.cancel)switch(t){case"cut":this.parent.cut();break;case"copy":this.parent.copy();break;case"undo":this.parent.undo();break;case"redo":this.parent.redo();break;case"paste":this.parent.paste();break;case"selectAll":this.parent.selectAll();break;case"group":this.parent.group();break;case"unGroup":this.parent.unGroup();break;case"bringToFrontOrder":this.parent.bringToFront();break;case"moveForwardOrder":this.parent.moveForward();break;case"sendToBackOrder":this.parent.sendToBack();break;case"sendBackwardOrder":this.parent.sendBackward()}},e.prototype.contextMenuOnClose=function(e){e.items.length>0&&e.items[0].parentObj instanceof xh&&this.updateItemStatus()},e.prototype.getLocaleText=function(e){return this.l10n.getConstant(this.localeText[e])},e.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems,!0),this.contextMenu.enableItems(this.disableItems,!1,!0),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1},e.prototype.ensureItems=function(e,t){var n=this.getKeyFromId(e.id);-1!==this.getDefaultItems().indexOf(n)&&e.target&&t&&!this.ensureTarget(e)&&this.hiddenItems.push(e.id)},e.prototype.contextMenuBeforeOpen=function(e){var t=e;t.hiddenItems=[];for(var n=0,i=e.items;n<i.length;n++){var r=i[n];if(this.ensureItems(r,e.event),r.items.length)for(var o=0,s=r.items;o<s.length;o++)this.ensureItems(s[o],e.event)}this.eventArgs=e.event,this.parent.trigger("contextMenuOpen",t);var a=!0;this.hiddenItems=this.hiddenItems.concat(t.hiddenItems),this.contextMenu.enableItems(this.disableItems,!1,!0);var l=this;e.items.forEach(function(e){l.hiddenItems.indexOf(e.id)>-1&&l.contextMenu.hideItems([e.id],!0)}),l.contextMenu.items.forEach(function(e){-1===l.hiddenItems.indexOf(e.id)&&(a=!1)}),a&&(t.cancel=a,this.hiddenItems=[])},e.prototype.ensureTarget=function(e){var t=this.parent.selectedItems.nodes.length+this.parent.selectedItems.connectors.length,n=!1;switch(this.getKeyFromId(e.id)){case"undo":n=!(!this.parent.historyManager||!this.parent.historyManager.canUndo);break;case"redo":n=!(!this.parent.historyManager||!this.parent.historyManager.canRedo);break;case"paste":n=!!this.parent.commandHandler.clipboardData.clipObject;break;case"selectAll":n=!!(this.parent.nodes.length+this.parent.connectors.length);break;case"grouping":n=!!(t>1||this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"group":n=t>1;break;case"unGroup":n=!!(this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"cut":case"copy":case"order":case"bringToFrontOrder":case"moveForwardOrder":case"sendToBackOrder":case"sendBackwardOrder":n=!!t}return n},e.prototype.destroy=function(){this.contextMenu.destroy(),B(this.element),this.removeEventListener()},e.prototype.getModuleName=function(){return"contextMenu"},e.prototype.generateID=function(e){return this.parent.element.id+"_contextMenu_"+e},e.prototype.getKeyFromId=function(e){return e.replace(this.parent.element.id+"_contextMenu_","")},e.prototype.buildDefaultItems=function(e){var t;switch(e){case"copy":t={target:".e-diagramcontent",iconCss:"e-copy"};break;case"cut":t={target:".e-diagramcontent",iconCss:"e-cut"};break;case"paste":t={target:".e-diagramcontent",iconCss:"e-paste"};break;case"undo":t={target:".e-diagramcontent",iconCss:"e-undo"};break;case"redo":t={target:".e-diagramcontent",iconCss:"e-redo"};break;case"grouping":t={target:".e-diagramcontent"};break;case"group":t={target:".e-diagramcontent",iconCss:"e-group"};break;case"unGroup":t={target:".e-diagramcontent",iconCss:"e-ungroup"};break;case"order":t={target:".e-diagramcontent",iconCss:"e-order"};break;case"bringToFrontOrder":t={target:".e-diagramcontent",iconCss:"e-bringfront"};break;case"moveForwardOrder":t={target:".e-diagramcontent",iconCss:"e-bringforward"};break;case"sendToBackOrder":t={target:".e-diagramcontent",iconCss:"e-sendback"};break;case"sendBackwardOrder":t={target:".e-diagramcontent",iconCss:"e-sendbackward"};break;case"selectAll":t={target:".e-diagramcontent"}}return this.defaultItems[e]={text:this.getLocaleText(e),id:this.generateID(e),target:t.target,iconCss:t.iconCss?"e-icons "+t.iconCss:""},this.defaultItems[e]},e.prototype.getDefaultItems=function(){return["copy","cut","paste","undo","redo","selectAll","grouping","group","unGroup","order","bringToFrontOrder","moveForwardOrder","sendToBackOrder","sendBackwardOrder"]},e.prototype.setLocaleKey=function(){return{copy:"Copy",cut:"Cut",paste:"Paste",undo:"Undo",redo:"Redo",selectAll:"SelectAll",grouping:"Grouping",group:"Group",unGroup:"UnGroup",order:"Order",bringToFrontOrder:"BringToFront",moveForwardOrder:"MoveForward",sendToBackOrder:"SendToBack",sendBackwardOrder:"SendBackward"}},e}(),Sh="e-acrdn-item",Oh="e-acrdn-header",Eh="e-acrdn-panel",Ih=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("SlideDown")],t.prototype,"effect",void 0),Object(s.b)([ye(400)],t.prototype,"duration",void 0),Object(s.b)([ye("linear")],t.prototype,"easing",void 0),t}(Le),Dh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ve({effect:"SlideUp",duration:400,easing:"linear"},Ih)],t.prototype,"collapse",void 0),Object(s.b)([ve({effect:"SlideDown",duration:400,easing:"linear"},Ih)],t.prototype,"expand",void 0),t}(Le),kh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(null)],t.prototype,"content",void 0),Object(s.b)([ye(null)],t.prototype,"header",void 0),Object(s.b)([ye(null)],t.prototype,"cssClass",void 0),Object(s.b)([ye(null)],t.prototype,"iconCss",void 0),Object(s.b)([ye(!1)],t.prototype,"expanded",void 0),t}(Le),Ph=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"},i}return Object(s.c)(t,e),t.prototype.destroy=function(){var t=this,n=this.element;for(e.prototype.destroy.call(this),this.unwireEvents(),this.isDestroy=!0,this.restoreContent(null);n.firstChild;)n.removeChild(n.firstChild);if(this.trgtEle)for(;this.ctrlTem.firstChild;)n.appendChild(this.ctrlTem.firstChild);n.classList.remove("e-acrdn-root"),n.removeAttribute("style"),["aria-disabled","aria-multiselectable","role","data-ripple"].forEach(function(e){t.element.removeAttribute(e)})},t.prototype.preRender=function(){var e=V(this.element,"."+Eh);this.isNested=!1,this.templateEle=[],this.isDestroy||(this.isDestroy=!1),m(e)?this.element.classList.add("e-acrdn-root"):(e.classList.add("e-nested"),this.isNested=!0),this.enableRtl&&this.add(this.element,"e-rtl"),this.enablePersistence&&!m(this.expandedItems)||(this.expandedItems=[])},t.prototype.add=function(e,t){e.classList.add(t)},t.prototype.remove=function(e,t){e.classList.remove(t)},t.prototype.render=function(){this.initialize(),this.renderControl(),this.wireEvents()},t.prototype.initialize=function(){var e=x(this.width),t=x(this.height);U(this.element,{width:e,height:t}),this.expandedItems.length>0&&(this.initExpand=this.expandedItems),F(this.element,{"aria-disabled":"false",role:"presentation","aria-multiselectable":"true"}),"Single"===this.expandMode&&this.element.setAttribute("aria-multiselectable","false")},t.prototype.renderControl=function(){this.trgtEle=this.element.children.length>0?z("div",this.element):null,this.renderItems(),this.initItemExpand()},t.prototype.unwireEvents=function(){I.remove(this.element,"click",this.clickHandler),m(this.keyModule)||this.keyModule.destroy()},t.prototype.wireEvents=function(){I.add(this.element,"click",this.clickHandler,this),this.isNested||this.isDestroy||Ee(this.element,{selector:"."+Oh}),this.isNested||(this.keyModule=new mt(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},t.prototype.focusIn=function(e){e.target.parentElement.classList.add("e-item-focus")},t.prototype.focusOut=function(e){e.target.parentElement.classList.remove("e-item-focus")},t.prototype.ctrlTemplate=function(){var e,t=this;this.ctrlTem=this.element.cloneNode(!0);var n,i=z(".e-accordion-container",this.element);P([].slice.call(e=i?i.children:this.element.children),[Sh]),[].slice.call(e).forEach(function(i){if(i.id=v("acrdn_item"),i.children.length>0){t.add(i.children[0],Oh);var r=i.children[0];F(r,{tabindex:"0",role:"heading","aria-level":e.length.toString()}),r.id=v("acrdn_header"),I.add(r,"focus",t.focusIn,t),I.add(r,"blur",t.focusOut,t);var o=r.firstElementChild;o&&o.classList.add("e-acrdn-header-content"),(n=i.children[1])&&(n.id=v("acrdn_panel"),r.setAttribute("aria-controls",n.id),n.style.display="",i.classList.add("e-select"),i.children[0].appendChild(t.toggleIconGenerate()),W(n,[Eh,"e-content-hide"],[]),F(n,{"aria-labelledby":r.id,"aria-hidden":"true"}),(n=n.firstElementChild)&&(n.classList.add("e-acrdn-content"),n.style.display=""))}})},t.prototype.toggleIconGenerate=function(){var e=this.createElement("div",{className:"e-toggle-icon"}),t=this.createElement("span",{className:"e-tgl-collapse-icon e-icons"});return e.appendChild(t),e},t.prototype.initItemExpand=function(){var e=this.initExpand.length;if(0!==e)if("Single"===this.expandMode)this.expandItem(!0,this.initExpand[e-1]);else for(var t=0;t<e;t++)this.expandItem(!0,this.initExpand[t])},t.prototype.renderItems=function(){var e,t=this,n=this.element;m(this.initExpand)&&(this.initExpand=[]);var i=this.items;m(this.trgtEle)?n&&i.length>0&&i.forEach(function(i,r){e=t.renderInnerItem(i,r),n.appendChild(e),e.childElementCount>0&&(I.add(e.querySelector("."+Oh),"focus",t.focusIn,t),I.add(e.querySelector("."+Oh),"blur",t.focusOut,t))}):this.ctrlTemplate()},t.prototype.clickHandler=function(e){var t,n,i=this,r=e.target,o={};if(V(r,".e-accordion")===this.element){r.classList.add("e-target");var s,a=V(r,"."+Sh),l=V(r,"."+Oh),c=V(r,"."+Eh);a&&(m(l)||m(c))&&(l=a.children[0],c=a.children[1]),l&&(n=z(".e-toggle-icon",l)),l?s=V(l,"."+Sh):c&&(s=V(c,"."+Sh));var h=[];t=this.getIndexByItem(a),s&&(o.item=this.items[this.getIndexByItem(s)]),o.originalEvent=e,!(!m(n)&&m(this.trgtEle)&&a.childElementCount<=1)||!m(c)&&m(z(".e-acrdn-header .e-toggle-icon",s))||(a.appendChild(this.contentRendering(t)),this.ariaAttrUpdate(a)),this.trigger("clicked",o);var d=c&&!m(z(".e-target",c)),u=c&&!m(z(".e-accordion",c))&&m(V(r,".e-acrdn-panel .e-accordion")),p=c&&m(z(".e-accordion",c))||!(V(r,".e-accordion")===this.element);if(d=d&&(u||p),r.classList.remove("e-target"),!(r.classList.contains(Eh)||r.classList.contains("e-acrdn-content")||d)){var f=this.element.querySelector(".e-accordion-container");[].slice.call(f?f.children:this.element.children).forEach(function(e){e.classList.contains("e-active")&&h.push(e)});var g=[].slice.call(this.element.querySelectorAll(".e-acrdn-item [e-animate]"));if(g.length>0)for(var y=0,v=g;y<v.length;y++)h.push(v[y].parentElement);var b=-1!==h.indexOf(s)&&"true"===c.getAttribute("e-animate"),w=!1;if(!m(a)&&!m(l)){var C=z("."+Eh,a),x=V(a,".e-acrdn-root").querySelector(".e-expand-state");if(m(C))return;w=x===a,!j(C)||b&&!s.classList.contains("e-selected")?(h.length>0&&"Single"===this.expandMode&&!b&&h.forEach(function(e){i.collapse(z("."+Eh,e)),e.classList.remove("e-expand-state")}),this.expand(C)):this.collapse(C),m(x)||w||x.classList.remove("e-expand-state")}}}},t.prototype.eleMoveFocus=function(e,t,n){var i,r=V(n,"."+Sh);n===t?i=("moveUp"===e?n.lastElementChild:n).querySelector("."+Oh):n.classList.contains(Oh)&&(r="moveUp"===e?r.previousElementSibling:r.nextElementSibling)&&(i=z("."+Oh,r)),i&&i.focus()},t.prototype.keyActionHandler=function(e){var t=e.target;if(!m(V(e.target,Oh))||t.classList.contains("e-accordion")||t.classList.contains(Oh)){var n,i=this.element;switch(e.action){case"moveUp":case"moveDown":this.eleMoveFocus(e.action,i,t);break;case"space":case"enter":!m(n=t.nextElementSibling)&&n.classList.contains(Eh)?"true"!==n.getAttribute("e-animate")&&t.click():t.click();break;case"home":case"end":("home"===e.action?i.firstElementChild.children[0]:i.lastElementChild.children[0]).focus()}}},t.prototype.headerEleGenerate=function(){var e=this.createElement("div",{className:Oh,id:v("acrdn_header")});return F(e,{tabindex:"0",role:"heading","aria-expanded":"false","aria-selected":"false","aria-disabled":"false","aria-level":this.items.length.toString()}),e},t.prototype.renderInnerItem=function(e,t){var n;if((n=this.createElement("div",{className:Sh})).id=v("acrdn_item"),e.header&&this.angularnativeCondiCheck(e,"header")){var i=this.headerEleGenerate(),r=this.createElement("div",{className:"e-acrdn-header-content"});i.appendChild(r),i.appendChild(this.fetchElement(r,e.header,t,!0)),n.appendChild(i)}var o=z("."+Oh,n);if(!e.expanded||m(t)||this.enablePersistence||-1===this.initExpand.indexOf(t)&&this.initExpand.push(t),e.cssClass&&n.classList.add(e.cssClass),e.iconCss){var s=this.createElement("div",{className:"e-acrdn-header-icon"}),a=this.createElement("span",{className:e.iconCss+" e-icons"});s.appendChild(a),m(o)?((o=this.headerEleGenerate()).appendChild(s),n.appendChild(o)):o.insertBefore(s,o.childNodes[0])}if(e.content&&this.angularnativeCondiCheck(e,"content")){var l=this.toggleIconGenerate();m(o)&&(o=this.headerEleGenerate(),n.appendChild(o)),o.appendChild(l),this.add(n,"e-select")}return n},t.prototype.angularnativeCondiCheck=function(e,t){var n="content"===t?e.content:e.header;if(this.isAngular&&!m(n.elementRef)){var i=n.elementRef.nativeElement.data;if(m(i)||""===i||-1===i.indexOf("bindings="))return!0;var r=JSON.parse(n.elementRef.nativeElement.data.replace("bindings=",""));return!(!m(r)&&"false"===r["ng-reflect-ng-if"])}return!0},t.prototype.fetchElement=function(e,t,n,i){var r,o,s;try{if(document.querySelectorAll(t).length){var a=document.querySelector(t);o=a.outerHTML.trim(),e.appendChild(a),a.style.display=""}}catch(l){r=_t(t)}return m(r)||(s=r()),m(s)||!(s.length>0)||m(s[0].tagName)&&1===s.length?0===e.childElementCount&&(e.innerHTML=t):[].slice.call(s).forEach(function(t){m(t.tagName)||(t.style.display=""),e.appendChild(t)}),m(o)||-1===this.templateEle.indexOf(t)&&this.templateEle.push(t),e},t.prototype.ariaAttrUpdate=function(e){var t=z("."+Oh,e),n=z("."+Eh,e);t.setAttribute("aria-controls",n.id),n.setAttribute("aria-labelledby",t.id)},t.prototype.contentRendering=function(e){var t=this.items[e].content,n=this.createElement("div",{className:Eh+" e-content-hide",id:v("acrdn_panel")});F(n,{"aria-hidden":"true"});var i=this.createElement("div",{className:"e-acrdn-content"});return n.appendChild(this.fetchElement(i,t,e,!1)),n},t.prototype.expand=function(e){var t,n=V(e,"."+Sh);if(!(m(e)||j(e)&&"true"!==e.getAttribute("e-animate")||n.classList.contains("e-overlay"))){var i=V(n,".e-acrdn-root").querySelector(".e-expand-state"),r={name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing},o=z(".e-toggle-icon",n).firstElementChild;t={element:n,item:this.items[this.getIndexByItem(n)],index:this.getIndexByItem(n),content:n.querySelector("."+Eh),isExpanded:!0};var s=r.name;if(this.trigger("expanding",t),!t.cancel){if(o.classList.add("e-toggle-animation"),this.expandedItemsPush(n),m(i)||i.classList.remove("e-expand-state"),n.classList.add("e-expand-state"),"None"===r.name)return this.expandProgress("begin",o,e,n,t),void this.expandProgress("end",o,e,n,t);this.expandAnimation(s,o,e,n,r,t)}}},t.prototype.expandAnimation=function(e,t,n,i,r,o){var s,a=this;this.lastActiveItemId=i.id,"SlideDown"===e?(r.begin=function(){a.expandProgress("begin",t,n,i,o),n.style.position="absolute",s=i.offsetHeight,n.style.maxHeight=n.offsetHeight+"px",i.style.maxHeight=""},r.progress=function(){i.style.minHeight=s+n.offsetHeight+"px"},r.end=function(){U(n,{position:"",maxHeight:""}),i.style.minHeight="",a.expandProgress("end",t,n,i,o)}):(r.begin=function(){a.expandProgress("begin",t,n,i,o)},r.end=function(){a.expandProgress("end",t,n,i,o)}),new Oe(r).animate(n)},t.prototype.expandProgress=function(e,t,n,i,r){this.remove(n,"e-content-hide"),this.add(i,"e-selected"),this.add(t,"e-expand-icon"),"end"===e&&(this.add(i,"e-active"),n.setAttribute("aria-hidden","false"),F(n.previousElementSibling,{"aria-selected":"true","aria-expanded":"true"}),t.classList.remove("e-toggle-animation"),this.trigger("expanded",r))},t.prototype.expandedItemsPush=function(e){var t=this.getIndexByItem(e);-1===this.expandedItems.indexOf(t)&&this.expandedItems.push(t)},t.prototype.getIndexByItem=function(e){return[].slice.call(this.element.children).indexOf(e)},t.prototype.expandedItemsPop=function(e){var t=this.getIndexByItem(e);this.expandedItems.splice(this.expandedItems.indexOf(t),1)},t.prototype.collapse=function(e){var t,n=V(e,"."+Sh);if(!m(e)&&j(e)&&!n.classList.contains("e-overlay")){var i={name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing},r=z(".e-toggle-icon",n).firstElementChild;t={element:n,item:this.items[this.getIndexByItem(n)],index:this.getIndexByItem(n),content:n.querySelector("."+Eh),isExpanded:!1};var o=i.name;if(this.trigger("expanding",t),!t.cancel){if(this.expandedItemsPop(n),n.classList.add("e-expand-state"),r.classList.add("e-toggle-animation"),"None"===i.name)return this.collapseProgress("begin",r,e,n,t),void this.collapseProgress("end",r,e,n,t);this.collapseAnimation(o,e,n,r,i,t)}}},t.prototype.collapseAnimation=function(e,t,n,i,r,o){var s,a,l,c,h=this;this.lastActiveItemId=n.id,"SlideUp"===e?(r.begin=function(){n.style.minHeight=(l=n.offsetHeight)+"px",t.style.position="absolute",s=n.offsetHeight,t.style.maxHeight=(a=t.offsetHeight)+"px",h.collapseProgress("begin",i,t,n,o)},r.progress=function(){(c=s-(a-t.offsetHeight))<l&&(n.style.minHeight=c+"px")},r.end=function(){t.style.display="none",h.collapseProgress("end",i,t,n,o),n.style.minHeight="",U(t,{position:"",maxHeight:"",display:""})}):(r.begin=function(){h.collapseProgress("begin",i,t,n,o)},r.end=function(){h.collapseProgress("end",i,t,n,o)}),new Oe(r).animate(t)},t.prototype.collapseProgress=function(e,t,n,i,r){this.remove(t,"e-expand-icon"),this.remove(i,"e-selected"),"end"===e&&(this.add(n,"e-content-hide"),t.classList.remove("e-toggle-animation"),this.remove(i,"e-active"),n.setAttribute("aria-hidden","true"),F(n.previousElementSibling,{"aria-selected":"false","aria-expanded":"false"}),this.trigger("expanded",r))},t.prototype.getModuleName=function(){return"accordion"},t.prototype.itemAttribUpdate=function(){var e=[].slice.call(this.element.children),t=this.items.length;e.forEach(function(e){z("."+Oh,e).setAttribute("aria-level",""+t)})},t.prototype.addItem=function(e,t){var n=this.element;if(m(t)&&(t=this.items.length),n.childElementCount>=t){this.items.splice(t,0,e);var i=this.renderInnerItem(e,t);n.childElementCount===t?n.appendChild(i):n.insertBefore(i,n.children[t]),I.add(i.querySelector("."+Oh),"focus",this.focusIn,this),I.add(i.querySelector("."+Oh),"blur",this.focusOut,this),this.itemAttribUpdate()}this.expandedItems=[],this.expandedItemRefresh(n),e.expanded&&this.expandItem(!0,t)},t.prototype.expandedItemRefresh=function(e){var t=this;[].slice.call(e.children).forEach(function(e){e.classList.contains("e-selected")&&t.expandedItemsPush(e)})},t.prototype.removeItem=function(e){var t=this.element.children[e];m(t)||(this.restoreContent(e),N(t),this.items.splice(e,1),this.itemAttribUpdate(),this.expandedItems=[],this.expandedItemRefresh(this.element))},t.prototype.select=function(e){var t=this.element.children[e];m(t)||m(z("."+Oh,t))||t.children[0].focus()},t.prototype.hideItem=function(e,t){var n=this.element.children[e];m(n)||(m(t)&&(t=!0),t?this.add(n,"e-hide"):this.remove(n,"e-hide"))},t.prototype.enableItem=function(e,t){var n=this.element.children[e];if(!m(n)){var i=n.firstElementChild;t?(this.remove(n,"e-overlay"),F(i,{tabindex:"0","aria-disabled":"false"}),i.focus()):(n.classList.contains("e-active")&&(this.expandItem(!1,e),this.eleMoveFocus("movedown",this.element,i)),this.add(n,"e-overlay"),i.setAttribute("aria-disabled","true"),i.removeAttribute("tabindex"))}},t.prototype.expandItem=function(e,t){var n=this,i=this.element;if(m(t))if("Single"===this.expandMode&&e)this.itemExpand(e,s=i.children[i.childElementCount-1],this.getIndexByItem(s));else{var r=z("#"+this.lastActiveItemId,this.element);[].slice.call(this.element.children).forEach(function(t){n.itemExpand(e,t,n.getIndexByItem(t)),t.classList.remove("e-expand-state")});var o=z(".e-expand-state",this.element);o&&o.classList.remove("e-expand-state"),r&&r.classList.add("e-expand-state")}else{var s;if(m(s=this.element.children[t])||!s.classList.contains("e-select")||s.classList.contains("e-active")&&e)return;"Single"===this.expandMode&&this.expandItem(!1),this.itemExpand(e,s,t)}},t.prototype.itemExpand=function(e,t,n){var i=t.children[1];if(!t.classList.contains("e-overlay")){if(m(i)&&e)i=this.contentRendering(n),t.appendChild(i),this.ariaAttrUpdate(t);else if(m(i))return;e?this.expand(i):this.collapse(i)}},t.prototype.destroyItems=function(){this.restoreContent(null),[].slice.call(this.element.querySelectorAll("."+Sh)).forEach(function(e){N(e)})},t.prototype.restoreContent=function(e){var t;t=m(e)?this.element:this.element.querySelectorAll("."+Sh)[e],this.templateEle.forEach(function(e){m(t.querySelector(e))||(document.body.appendChild(t.querySelector(e)).style.display="none")})},t.prototype.updateItem=function(e,t){if(!m(e)){var n=this.items[t];this.items.splice(t,1),this.restoreContent(t),N(e),this.addItem(n,t)}},t.prototype.getPersistData=function(){return this.addOnPersist(["expandedItems"])},t.prototype.onPropertyChanged=function(e,t){for(var n=this.element,i=0,r=Object.keys(e);i<r.length;i++)switch(r[i]){case"items":if(e.items instanceof Array&&t.items instanceof Array)this.destroyItems(),this.renderItems(),this.initItemExpand();else for(var o=Object.keys(e.items),s=0;s<o.length;s++){var a=parseInt(Object.keys(e.items)[s],10),l=Object.keys(e.items[a])[0],c=H("."+Sh,this.element)[a],h=Object(t.items[a])[l],d=Object(e.items[a])[l];("header"===l||"iconCss"===l||"expanded"===l||"content"===l&&""===h)&&this.updateItem(c,a),"cssClass"!==l||m(c)||(c.classList.remove(h),c.classList.add(d)),"content"!==l||m(c)||2!==c.children.length||(c.classList.contains("e-selected")&&this.expandItem(!1,a),N(c.querySelector("."+Eh)))}break;case"enableRtl":e.enableRtl?this.add(n,"e-rtl"):this.remove(n,"e-rtl");break;case"height":U(this.element,{height:x(e.height)});break;case"width":U(this.element,{width:x(e.width)});break;case"expandMode":"Single"===e.expandMode?(this.element.setAttribute("aria-multiselectable","false"),this.expandedItems.length>1&&this.expandItem(!1)):this.element.setAttribute("aria-multiselectable","true")}},Object(s.b)([we([],kh)],t.prototype,"items",void 0),Object(s.b)([ye("100%")],t.prototype,"width",void 0),Object(s.b)([ye("auto")],t.prototype,"height",void 0),Object(s.b)([ye("Multiple")],t.prototype,"expandMode",void 0),Object(s.b)([ve({},Dh)],t.prototype,"animation",void 0),Object(s.b)([xe()],t.prototype,"clicked",void 0),Object(s.b)([xe()],t.prototype,"expanding",void 0),Object(s.b)([xe()],t.prototype,"expanded",void 0),Object(s.b)([xe()],t.prototype,"created",void 0),Object(s.b)([xe()],t.prototype,"destroyed",void 0),Object(s.b)([Ae],t)}(ht),Th=function(e){return e.sourcePoint||e.targetPoint||e.sourceID||e.targetID||e.sourcePortID||e.targetPortID||e.sourceDecorator||e.targetDecorator?uo:sa},Mh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"id",void 0),Object(s.b)([ye()],t.prototype,"height",void 0),Object(s.b)([ye(!0)],t.prototype,"expanded",void 0),Object(s.b)([ye("")],t.prototype,"iconCss",void 0),Object(s.b)([ye("")],t.prototype,"title",void 0),Object(s.b)([Ce(Th)],t.prototype,"symbols",void 0),t}(Le),jh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye()],t.prototype,"width",void 0),Object(s.b)([ye()],t.prototype,"height",void 0),Object(s.b)([ve({},Zt)],t.prototype,"offset",void 0),t}(Le),Rh=function(e){function t(t,n){var i,r=e.call(this,t,n)||this;r.symbolTable={},r.childTable={},r.info="info",r.laneTable={},r.helper=function(e){var t,n=e.sender.target.id.split("_container")[0],i=r.symbolTable[n];return i&&r.selectedSymbol&&(r.selectedSymbols=r.selectedSymbol.id===i.id?i:r.selectedSymbol,r.getMousePosition(e.sender),(t=r.getSymbolPreview(r.selectedSymbols,e.sender,r.element)).setAttribute("paletteId",r.element.id)),t};for(var o=0;r&&r.palettes&&o<r.palettes.length;o++)for(var s=0;s<r.palettes[o].symbols.length;s++)(i=r.palettes[o].symbols[s])&&"UmlActivity"===i.shape.type&&Ia(t.palettes[o].symbols[s],i);return r}return Object(s.c)(t,e),t.prototype.onPropertyChanged=function(e,t){for(var n=!1,i=0,r=Object.keys(e);i<r.length;i++)switch(r[i]){case"width":this.element.style.width=this.width.toString();break;case"height":this.element.style.height=this.height.toString();break;case"symbolPreview":break;case"symbolWidth":case"symbolHeight":case"getSymbolInfo":n=!0;break;case"enableSearch":if(e.enableSearch)this.createTextbox();else{var o=document.getElementById(this.element.id+"_search");o&&o.parentNode.removeChild(o)}break;case"palettes":for(var s=0,a=Object.keys(e.palettes);s<a.length;s++){var l=Number(a[s]);this.accordionElement.items[l]||(this.accordionElement.items[l]={header:e.palettes[l].title||"",expanded:e.palettes[l].expanded,iconCss:e.palettes[l].iconCss||""}),void 0!==e.palettes[l].iconCss&&(this.accordionElement.items[l].iconCss=e.palettes[l].iconCss||"",n=!0),void 0!==e.palettes[l].expanded&&(this.palettes[l].isInteraction?this.palettes[l].isInteraction=!1:(this.accordionElement.items[l].expanded=e.palettes[l].expanded,n=!0))}break;case"enableAnimation":this.accordionElement.animation=this.enableAnimation?{expand:{duration:400},collapse:{duration:400}}:{expand:{duration:0},collapse:{duration:0}};break;case"expandMode":this.accordionElement.expandMode=this.expandMode,n=!0;break;case"allowDrag":this.allowDrag=e.allowDrag,this.draggable.helper=this.allowDrag?this.helper:function(){return null}}n&&this.refreshPalettes()},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){var e=this;this.element.style.overflow="auto",this.element.style.height=this.height.toString(),this.element.style.width=this.width.toString(),this.enableSearch&&this.createTextbox();var t=Pl("div",{id:this.element.id+"_container"});this.accordionElement=new Ph({expandMode:this.expandMode}),this.enableAnimation||(this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}}),this.accordionElement.expanded=function(t){var n=e.accordionElement.items.indexOf(t.item);e.palettes[n].expanded=t.isExpanded,e.palettes[n].isInteraction=!0},this.element.appendChild(t),window.measureElement&&(window.measureElement=null),Fl(),this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.diagramRenderer=new rc(this.element.id,new ic,!1),this.svgRenderer=new rc(this.element.id,new ic,!0),this.updatePalettes(),this.accordionElement.appendTo("#"+this.element.id+"_container")},t.prototype.getModuleName=function(){return"SymbolPalette"},t.prototype.requiredModules=function(){var e=[];return e.push({member:"Bpmn",args:[]}),e},t.prototype.destroy=function(){if(this.allowDrag){this.draggable.destroy(),this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this);var t=document.getElementById(this.element.id+"_container");t&&(this.element.removeChild(t),window.measureElement&&(window.measureElement.usageCount-=1,0===window.measureElement.usageCount&&(window.measureElement.parentNode.removeChild(window.measureElement),window.measureElement=null))),(t=document.getElementById(this.element.id+"_search"))&&t.parentNode.removeChild(t),this.element.classList.remove("e-symbolpalette")}},t.prototype.initSymbols=function(e){for(var t=[],n=0,i=0,r=e.symbols;i<r.length;i++){if("SwimLane"===(x=r[i]).shape.type){var o=x,s=x.shape,a="Horizontal"===s.orientation;if(s.isLane){this.laneTable[x.id]={height:a?this.symbolHeight-this.symbolHeight/2:this.symbolHeight-this.symbolHeight/4,width:n=a?this.symbolWidth-this.symbolWidth/4:this.symbolWidth-this.symbolWidth/2};var l=s.lanes[0].header,c=s.lanes[0].style,h=l.style,d={id:"header"+zl(),shape:{type:"Basic",shape:"Rectangle"},width:a?l.width:o.width,height:a?o.height:l.height,style:h,annotations:[{content:l.annotation.content}]};d.offsetX=d.width/2,d.offsetY=d.height/2,this.addPaletteItem(e.id,d);var u={id:"lane"+zl(),shape:{type:"Basic",shape:"Rectangle"},width:a?o.width-l.width:o.width,height:a?o.height:o.height-l.height,style:c};u.offsetX=a?d.width+u.width/2:u.width/2,u.offsetY=a?u.height/2:d.height+u.height/2,this.addPaletteItem(e.id,u),o.children=[d.id,u.id]}else s.isPhase&&(n=o.width?o.width:this.symbolWidth,x.shape.type="Path",x.shape.data=a?"M0,0 L"+n+",0":"M0,0 L0,"+n)}if(x instanceof sa){var p=tc(this.getNodeDefaults);p&&p(x,this)}else if(x instanceof uo){var f=tc(this.getConnectorDefaults);f&&f(x,this)}this.symbolTable[x.id]=x,x instanceof sa&&x.children&&t.push(x)}for(var g=0;g<t.length;g++)for(var m=void 0,y=0;y<t[g].children.length;y++)(m=this.symbolTable[t[g].children[y]])&&(this.childTable[m.id]=m,m.parentId=t[g].id);for(var v=0,b=e.symbols;v<b.length;v++)(x=b[v])instanceof sa&&x.children||this.prepareSymbol(x);for(var w=0,C=t;w<C.length;w++){var x;this.prepareSymbol(x=C[w])}},t.prototype.renderPalette=function(e){var t="display:none;overflow:auto;";e.height&&(t+="height:"+e.height+"px");var n=Pl("div",{id:e.id,style:t});this.element.appendChild(n),this.accordionElement.items.push({header:e.title,expanded:e.expanded,content:"#"+e.id,iconCss:e.iconCss}),this.renderSymbols(e,n)},t.prototype.addPaletteItem=function(e,t){for(var n=0;n<this.palettes.length;n++){var i=this.palettes[n];if(-1!==i.id.indexOf(e)){for(var r=[void 0,i,"symbols",{},!0],o=new(Function.prototype.bind.apply(Th(t),r)),s=0;s<Object.keys(t).length;s++)o[Object.keys(t)[s]]=t[Object.keys(t)[s]];i.symbols.push(o),o.children||this.prepareSymbol(o),this.symbolTable[o.id]=o;var a=document.getElementById(i.id);a&&a.appendChild(this.getSymbolContainer(o,a));break}}},t.prototype.removePaletteItem=function(e,t){for(var n,i=0;i<this.palettes.length;i++){var r=this.palettes[i];if(-1!==r.id.indexOf(e))for(var o=0,s=r.symbols;o<s.length;o++){var a=s[o];if(-1!==a.id.indexOf(t)){var l=r.symbols.indexOf(a);if(r.symbols.splice(l,1),a.children)for(var c=a.children,h=0;h<c.length;h++)delete this.symbolTable[c[h]];delete this.symbolTable[a.id];var d=document.getElementById(a.id+"_container");d.parentNode.removeChild(d),n=!0;break}}if(n)break}},t.prototype.prepareSymbol=function(e){var t,n,i,r,o,s=new Ho,a=e,l=new ri,c=e instanceof sa?e.initContainer():null;c&&!c.children&&(c.children=[]);var h=tc(this.getSymbolTemplate);if(h&&(o=h(e)),o||(a.children?o=this.getContainer(a,c):(o=e.init(this),e instanceof sa&&e.parentId&&c.children.push(o))),!e.parentId){var d={width:this.symbolWidth,height:this.symbolHeight},u=tc(this.getSymbolInfo);if(u&&(d=u(e)),d=d||{},e.shape&&e.shape.isPhase&&(d.width=d.width||this.symbolWidth,d.height=d.height||this.symbolHeight),o.relativeMode="Object",o.horizontalAlignment=o.verticalAlignment="Center",l.style.strokeColor=l.style.fill="none",l.children=[o],o.measure(new Xt),o.arrange(o.desiredSize),t=d.width=d.width||(void 0!==a.width?o.actualSize.width:void 0)||this.symbolWidth,i=d.height=d.height||(void 0!==a.height?o.actualSize.height:void 0)||this.symbolHeight,void 0!==t&&void 0!==i){var p=t,f=i,g=!!e.shape.isPhase;void 0!==this.symbolWidth?p=this.symbolWidth-this.symbolMargin.left-this.symbolMargin.right:t+=a.style.strokeWidth,void 0!==this.symbolHeight?f=this.symbolHeight-this.symbolMargin.top-this.symbolMargin.bottom:i+=a.style.strokeWidth,d.description&&""!==d.description.text&&(f-=20),n=p/(!g&&o.width||t),r=f/(!g&&o.height||i),d.fit&&(n=p/d.width,r=f/d.height),t=p,i=f,n=r=Math.min(n,r),l.width=t,l.height=i,o.width=d.width,o.height=d.height,this.scaleSymbol(e,l,n,r,t,i)}else{var m=void 0;e instanceof uo&&(m=Ur(e)),o.width=e.width||m?m.width:o.actualSize.width,o.height=e.height||m?m.height:o.actualSize.height}e.wrapper=s,s.children=[l],o.pivot=s.pivot={x:0,y:0},s.id=o.id+"_symbol",s.style.fill=s.style.strokeColor="transparent",s.offsetX=e.style.strokeWidth/2,s.offsetY=e.style.strokeWidth/2,this.getSymbolDescription(d,t,s),s.measure(new Xt),s.arrange(s.desiredSize),d.width=d.width||o.actualSize.width,d.height=d.height||o.actualSize.height,e[this.info]=d}e.parentId&&(c.measure(new Xt(a.width,a.height)),c.arrange(c.desiredSize))},t.prototype.getContainer=function(e,t){var n;t.measureChildren=!1;var i=e.children;t.children=[];for(var r=0;r<i.length;r++)this.symbolTable[i[r]]&&t.children.push(this.symbolTable[i[r]].wrapper);return t.measure(new Xt(e.width,e.height)),t.arrange(t.desiredSize),0===t.bounds.x&&0===t.bounds.y||(rl(e,(n=t.bounds).x,n.y,this.symbolTable,!1,this),t=this.getContainer(e,t)),t},t.prototype.getSymbolDescription=function(e,t,n){if(e&&e.description&&e.description.text){var i=new Jn;e.description.overflow=e.description.overflow||"Ellipsis",e.description.wrap=e.description.wrap||"WrapWithOverflow",i.content=e.description.text,i.width=t,i.height=20,i.style.strokeColor="transparent",i.style.fill="transparent",i.style.strokeWidth=0,i.style.textWrapping=e.description.wrap,i.style.textOverflow=e.description.overflow,i.margin={left:0,right:0,top:0,bottom:5},n.children.push(i)}},t.prototype.renderSymbols=function(e,t){for(var n=0,i=e.symbols;n<i.length;n++){var r=i[n];r.parentId||this.getSymbolContainer(r,t)}},t.prototype.getSymbolPreview=function(e,t,n){var i,r,o,s=e.wrapper.children[0].desiredSize.width+e.style.strokeWidth,a=e.wrapper.children[0].desiredSize.height+e.style.strokeWidth,l=e.wrapper.children[0].children[0];if(void 0!==this.symbolPreview.width||void 0!==this.symbolPreview.height){r=(s=(this.symbolPreview.width||s)-e.style.strokeWidth)/l.actualSize.width,o=(a=(this.symbolPreview.height||a)-e.style.strokeWidth)/l.actualSize.height,r=o=Math.min(r,o);var c=l.actualSize.width*r,h=l.actualSize.height*o;e.wrapper.children[0].width=s,e.wrapper.children[0].height=a,this.measureAndArrangeSymbol(l,e instanceof sa),this.scaleSymbol(e,e.wrapper.children[0],r,o,c,h,!0),s=c,a=h}var d={x:l.offsetX,y:l.offsetY};l.offsetX=l.offsetY=e.style.strokeWidth/2,l.pivot={x:0,y:0},this.measureAndArrangeSymbol(l,e instanceof sa);var u,p=Pl("div",{draggable:"true",class:"e-dragclone",style:"pointer-events:none"});document.body.appendChild(p);var f="margin:5px;";if("Native"===e.shape.type){i=Tl("svg",{id:e.id+"_preview",width:Math.ceil(s)+1,height:Math.ceil(a)+1});var g=Tl("g",{id:e.id+"_g"});i.appendChild(g),p.appendChild(i),this.svgRenderer.renderElement(l,g,void 0,void 0,i)}else if("HTML"===e.shape.type)u=this.getHtmlSymbol(e,i,p,a,s,!0);else if(e.children&&e.children.length>0&&ka(e,"HTML",this.childTable))u=this.getGroupParent(e,i,p,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!0);else{i=nc.createCanvas(e.id+"_preview",2*(Math.ceil(s)+e.style.strokeWidth+1),2*(Math.ceil(a)+e.style.strokeWidth+1)),p.appendChild(i),f+="transform:scale(0.5);",i.setAttribute("transform-origin","0 0");var m=2;e instanceof uo&&(m=1.9),i.getContext("2d").setTransform(m,0,0,m,0,0),this.diagramRenderer.renderElement(l,i,void 0)}return(u&&("HTML"===e.shape.type||e.children&&e.children.length>0)?u:i).setAttribute("style",f),l.offsetX=d.x,l.offsetY=d.y,p},t.prototype.measureAndArrangeSymbol=function(e,t){e.children&&!t&&(e.children[0].transform=Dn.Self),e.measure(new Xt),e.arrange(e.desiredSize),e.children&&(e.children[0].transform=Dn.Parent)},t.prototype.updateSymbolSize=function(e,t,n){var i=e.wrapper.children[0].children[0],r=e.style.strokeWidth;i.width=(t||i.width)-(r+1),i.height=(n||i.height)-(r+1),e.wrapper.measure(new Xt),e.wrapper.arrange(e.wrapper.desiredSize)},t.prototype.getSymbolContainer=function(e,t,n){var i,r,o,s=this.symbolTable[e.id][this.info],a=this.getSymbolSize(e,s),l=a.width+1,c=a.height+1,h=Pl("div",{id:e.id+"_container",style:"width:"+l+"px;height:"+c+"px;float:left;overflow:hidden",title:s.tooltip?s.tooltip:e.id});if(t.appendChild(h),"Native"===e.shape.type)i=Tl("svg",{id:e.id,width:Math.ceil(e.wrapper.actualSize.width)+1,height:Math.ceil(e.wrapper.actualSize.height)+1}),r=Tl("g",{id:e.id+"_g"}),i.appendChild(r),h.appendChild(i),this.updateSymbolSize(e),this.svgRenderer.renderElement(e.wrapper,r,void 0,void 0,i);else if("HTML"===e.shape.type)o=this.getHtmlSymbol(e,i,h,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!1);else if(e.children&&e.children.length>0&&ka(e,"HTML",this.childTable))o=this.getGroupParent(e,i,h,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!1);else{i=nc.createCanvas(e.id,Math.ceil(2*(e.wrapper.actualSize.width+e.style.strokeWidth))+1,Math.ceil(2*(e.wrapper.actualSize.height+e.style.strokeWidth))+1),h.appendChild(i);var d=2;e instanceof uo&&(d=1.9),i.getContext("2d").setTransform(d,0,0,d,0,0),this.diagramRenderer.renderElement(e.wrapper,r||i,void 0,void 0,void 0,void 0,!0)}if(!n){var u=e.wrapper.actualSize.width+e.style.strokeWidth,p=e.wrapper.actualSize.height+e.style.strokeWidth,f="pointer-events:none;transform-origin:0 0;overflow:hidden;";return f+=e.shape.isPhase?"Horizontal"===e.shape.orientation?"margin-left:"+Math.max(this.symbolMargin.left,(l-u)/2)+"px;margin-top:"+a.height/2+"px;":"margin-left:"+a.width/2+"px;margin-top:"+Math.max(this.symbolMargin.top,(c-p)/2)+"px;":"margin-left:"+Math.max(this.symbolMargin.left,(l-u)/2)+"px;margin-top:"+Math.max(this.symbolMargin.top,(c-p)/2)+"px;",i instanceof HTMLCanvasElement&&(f+="transform:scale(.5,.5);"),(o&&("HTML"===e.shape.type||e.children&&e.children.length>0)?o:i).setAttribute("style",f),h.classList.add("e-symbol-draggable"),h}return i},t.prototype.getGroupParent=function(e,t,n,i,r,o){var s=Pl("div",{id:e.id+(o?"_html_div_preview":"_html_div")}),a=Pl("div",{id:e.id+(o?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(i+1)+"px;position:absolute",class:"e-html-layer"}),l=Pl("div",{id:e.id+(o?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(i+1)+"px;position:absolute"});return a.appendChild(l),s.appendChild(a),t=nc.createCanvas(o?e.id+"_preview":e.id,Math.ceil(r)+1,Math.ceil(i)+1),s.appendChild(t),n.appendChild(s),this.diagramRenderer.renderElement(e.wrapper.children[0].children[0],t,a),s},t.prototype.getHtmlSymbol=function(e,t,n,i,r,o){var s=Pl("div",{id:e.id+(o?"_html_div_preview":"_html_div")}),a=Pl("div",{id:e.id+(o?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(i+1)+"px;position:absolute",class:"e-html-layer"}),l=Pl("div",{id:e.id+(o?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(i+1)+"px;position:absolute"});return a.appendChild(l),s.appendChild(a),t=nc.createCanvas(e.id,Math.ceil(2*(e.wrapper.actualSize.width+e.style.strokeWidth))+1,Math.ceil(2*(e.wrapper.actualSize.height+e.style.strokeWidth))+1),n.appendChild(t),t.getContext("2d").setTransform(2,0,0,2,0,0),s.appendChild(t),n.appendChild(s),this.diagramRenderer.renderElement(e.wrapper.children[0].children[0],t,a),s},t.prototype.getSymbolSize=function(e,t){var n=e.wrapper.actualSize.width,i=e.wrapper.actualSize.height;return this.symbolWidth||this.symbolHeight?(n=this.symbolWidth,i=Math.max(this.symbolHeight,i)):(n+=this.symbolMargin.left+this.symbolMargin.right+e.style.strokeWidth,i+=this.symbolMargin.top+this.symbolMargin.bottom+e.style.strokeWidth),new Xt(n,i)},t.prototype.getMousePosition=function(e){var t,n,i;return-1!==e.type.indexOf("touch")?(t=(i=e).changedTouches[0].clientY-this.element.offsetTop,n=i.changedTouches[0].clientX-this.element.offsetLeft):(t=e.clientY-this.element.offsetTop,n=e.clientX-this.element.offsetLeft),{x:n,y:t}},t.prototype.mouseMove=function(e,t){!this.highlightedSymbol||this.selectedSymbol&&this.selectedSymbol.id+"_container"===this.highlightedSymbol.id||(this.highlightedSymbol.classList.remove("e-symbol-hover"),this.highlightedSymbol.style.backgroundColor="",this.highlightedSymbol=null);var n=e.target.id.split("_container")[0];if(this.symbolTable[n]){var i=document.getElementById(n+"_container");i.classList.add("e-symbol-hover"),this.highlightedSymbol=i}e.preventDefault()},t.prototype.mouseUp=function(e){if(e&&e.target)if("iconSearch"===e.srcElement.id){var t=document.getElementById("iconSearch");t.classList.contains("e-clear-searchtext")&&(t.className="e-input-group-icon e-search e-icons",document.getElementById("textEnter").value="",this.searchPalette(""))}else{var n=e.target.id.split("_container")[0];n&&this.selectedSymbol&&(this.trigger("paletteSelectionChange",{oldValue:this.selectedSymbol.id,newValue:n}),e.preventDefault())}},t.prototype.keyUp=function(e){var t=this;if(this.enableSearch){var n=this;document.getElementById("iconSearch").className="e-input-group-icon e-clear-searchtext e-icons",!e||"Enter"!==e.key&&13!==e.keyCode?(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.target instanceof HTMLInputElement&&(n.searchPalette(e.target.value),t.timer=null)},500)):e.target instanceof HTMLInputElement&&this.searchPalette(e.target.value)}},t.prototype.mouseDown=function(e){var t=e.target.id.split("_container")[0];if(this.selectedSymbol){var n,i=document.getElementById(this.selectedSymbol.id+"_container");t!==this.selectedSymbol.id&&i&&i.classList.remove("e-symbol-selected"),(n=document.getElementById(this.selectedSymbol.id+"_container"))&&(n.style.backgroundColor=""),this.selectedSymbol=null}this.symbolTable[t]&&((n=document.getElementById(t+"_container")).classList.add("e-symbol-selected"),this.selectedSymbol=this.symbolTable[t],e.preventDefault())},t.prototype.keyDown=function(e){if(e&&"Escape"===e.key){var t=this.draggable.helperElement;t&&t.parentNode&&(t.parentNode.removeChild(t),this.draggable.intDestroy())}},t.prototype.initDraggable=function(){this.allowDrag&&(this.draggable=new pt(this.element,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,preventDefault:!1,dragStop:this.dragStop,drag:function(e){var t=Ml(e.target,"e-droppable");t&&t.classList.contains("e-diagram")&&t.ej2_instances[0].droppable.over(e)},cursorAt:{left:this.symbolPreview.offset.x,top:this.symbolPreview.offset.y}}))},t.prototype.dragStart=function(e){var t=this.helper[0];t&&t.setAttribute("paletteId",this.element.id)},t.prototype.dragStop=function(e){Ml(e.target,"e-diagram")||B(e.helper)},t.prototype.scaleSymbol=function(e,t,n,i,r,o,s){if(e instanceof uo){var a=e.wrapper;e.wrapper=t.children[0];for(var l=e.scale(n,i,r,o,t.children[0]),c=r/2-t.children[0].children[0].offsetX+l.x/2,h=o/2-t.children[0].children[0].offsetY+l.y/2,d=0,u=t.children[0].children;d<u.length;d++){var p=u[d];p.offsetX+=c,p.offsetY+=h,p.staticSize=!1}e.wrapper=a}else if(e.shape instanceof Zs&&this.bpmnModule)a=e.wrapper,e.wrapper=t,t.children[0].width=r,t.children[0].height=o,this.bpmnModule.updateBPMN({width:r,height:o},e,e,null),e.wrapper=a;else if(e.children){var f,g,m=e.children;if(!s)for(var y=void 0,v=void 0,b=0;b<m.length;b++)(v=t.children[0].children[b])&&(v.children[0].children&&this.measureChild(v),v.width=(y=this.symbolTable[v.id]).width,v.height=y.height,v.measure(new Xt),v.arrange(v.children[0].desiredSize));if(f=r/t.children[0].desiredSize.width,g=o/t.children[0].desiredSize.height,t.children[0].measure(new Xt),t.children[0].arrange(t.children[0].desiredSize),!s){var w=void 0;for(b=0;b<m.length;b++)(w=t.children[0].children[b])&&(w.children[0].children&&this.scaleChildren(w,f,g,e),this.scaleGroup(w,f,g,e))}if(s){y=void 0;var C=void 0,x=void 0;for(w=void 0,b=0;b<m.length;b++)y=this.symbolTable[m[b]],C=r/e.wrapper.children[0].desiredSize.width,x=o/e.wrapper.children[0].desiredSize.height,(w=t.children[0].children[b])&&(w.children[0].children&&this.scaleChildren(w,C,x,e,!0),this.scaleGroup(w,C,x,e,!0));e.wrapper.children[0].measure(new Xt),e.wrapper.children[0].arrange(e.wrapper.children[0].desiredSize)}}else!function e(t,n,i,r){if(void 0!==t.width&&void 0!==t.height&&(t.width*=n,t.height*=i),t instanceof Xn){var o=hn(),s=r.width||r.actualSize.width,a=r.height||r.actualSize.height;if(void 0!==s&&void 0!==a){var l={x:r.offsetX-s*r.pivot.x+s*r.pivot.x,y:r.offsetY-a*r.pivot.y+a*r.pivot.y};l=ec(r.rotateAngle,r.offsetX,r.offsetY,l),un(o,-r.rotateAngle,l.x,l.y),pn(o,n,i,l.x,l.y),un(o,r.rotateAngle,l.x,l.y);for(var c=0,h=t.children;c<h.length;c++){var d=h[c];if(void 0!==d.width&&void 0!==d.height){var u=dn(o,{x:d.offsetX,y:d.offsetY});d.offsetX=u.x,d.offsetY=u.y,e(d,n,i,r)}}}}}(t.children[0],n,i,t)},t.prototype.scaleChildren=function(e,t,n,i,r){for(var o,s=0;s<e.children.length;s++)(o=e.children[s]).children[0].children?this.scaleChildren(o,t,n,i,r):this.scaleGroup(o,t,n,i,r)},t.prototype.measureChild=function(e){for(var t,n,i=0;i<e.children.length;i++)(t=e.children[i]).children[0].children?this.measureChild(t):(t.width=(n=this.symbolTable[t.id]).width,t.height=n.height,t.measure(new Xt),t.arrange(t.children[0].desiredSize))},t.prototype.scaleGroup=function(e,t,n,i,r){e.width=e.width*t,e.height=e.height*n,e.offsetX=r?e.offsetX*t-i.style.strokeWidth:e.offsetX*t+i.style.strokeWidth/2,e.offsetY=r?e.offsetY*n-i.style.strokeWidth:e.offsetY*n+i.style.strokeWidth/2,e.measure(new Xt),e.arrange(e.children[0].desiredSize)},t.prototype.refreshPalettes=function(){this.accordionElement.items=[],this.updatePalettes(),this.accordionElement.dataBind()},t.prototype.updatePalettes=function(){for(var e=0;e<this.palettes.length;e++){var t=this.palettes[e];this.initSymbols(t),this.renderPalette(t)}},t.prototype.createTextbox=function(){var e=Pl("div",{id:this.element.id+"_search"});e.setAttribute("style","backgroundColor:white;height:30px"),e.className="e-input-group",this.element.appendChild(e);var t=Pl("input",{});t.placeholder="Search Shapes",t.id="textEnter",t.setAttribute("style","width:100%;height:auto"),t.className="e-input",e.appendChild(t);var n=Pl("span",{id:"iconSearch",className:"e-input-group-icon e-search e-icons"});e.appendChild(n)},t.prototype.searchPalette=function(e){var t,n=[],i=document.getElementById("SearchPalette");if(i)for(var r=i.children.length-1;r>=0;r--)i.removeChild(i.children[r]);for(var o=0;o<this.palettes.length;o++)for(var s=this.palettes[o],a=0;a<s.symbols.length;a++){var l=s.symbols[a];""!==e&&-1!==l.id.toLowerCase().indexOf(e.toLowerCase())&&n.push(l)}var c=tc(this.filterSymbols);if(c&&(n=c(n)||[]),i||(i=t=this.createSearchPalette(t)),n.length>0)for(var h=0,d=n;h<d.length;h++)this.getSymbolContainer(d[h],i);else if(""!==e){var u=Pl("div",{id:"EmptyDiv",style:"text-align:center;font-style:italic"});u.innerHTML="No Items To Display",i.appendChild(u)}else document.getElementById("iconSearch").className="e-input-group-icon e-search e-icons",this.accordionElement.removeItem(0)},t.prototype.createSearchPalette=function(e){return e=Pl("div",{id:"SearchPalette",style:"display:none;overflow:auto;"}),this.element.appendChild(e),this.accordionElement.addItem({header:"Search Results",expanded:!0,content:"#SearchPalette"},0),e},t.prototype.wireEvents=function(){var e=re.touchEndEvent,t=re.touchMoveEvent;I.add(this.element,re.touchStartEvent,this.mouseDown,this),I.add(this.element,t,this.mouseMove,this),I.add(this.element,e,this.mouseUp,this),I.add(this.element,"keyup",this.keyUp,this),I.add(document,"keydown",this.keyDown,this),this.initDraggable()},t.prototype.unWireEvents=function(){var e=re.touchEndEvent,t=re.touchMoveEvent;I.remove(this.element,re.touchStartEvent,this.mouseDown),I.remove(this.element,t,this.mouseMove),I.remove(this.element,e,this.mouseUp),I.remove(this.element,"keyup",this.keyUp),I.remove(document,"keydown",this.keyDown)},Object(s.b)([ye("S")],t.prototype,"accessKey",void 0),Object(s.b)([ye("100%")],t.prototype,"width",void 0),Object(s.b)([ye("100%")],t.prototype,"height",void 0),Object(s.b)([we([],Mh)],t.prototype,"palettes",void 0),Object(s.b)([ye()],t.prototype,"getSymbolInfo",void 0),Object(s.b)([ye()],t.prototype,"filterSymbols",void 0),Object(s.b)([ye()],t.prototype,"getSymbolTemplate",void 0),Object(s.b)([ye()],t.prototype,"symbolWidth",void 0),Object(s.b)([ye()],t.prototype,"symbolHeight",void 0),Object(s.b)([ve({left:10,right:10,top:10,bottom:10},zn)],t.prototype,"symbolMargin",void 0),Object(s.b)([ye(!0)],t.prototype,"allowDrag",void 0),Object(s.b)([ve({},jh)],t.prototype,"symbolPreview",void 0),Object(s.b)([ye(!1)],t.prototype,"enableSearch",void 0),Object(s.b)([ye(!0)],t.prototype,"enableAnimation",void 0),Object(s.b)([ye("Multiple")],t.prototype,"expandMode",void 0),Object(s.b)([xe()],t.prototype,"paletteSelectionChange",void 0),Object(s.b)([ye()],t.prototype,"getNodeDefaults",void 0),Object(s.b)([ye()],t.prototype,"getConnectorDefaults",void 0),t}(ht),Lh=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.mode="Canvas",i.id="overview",i.actionName="",i.startPoint=null,i.currentPoint=null,i.prevPoint=null,i.scale=null,i.inAction=!1,i.viewPortRatio=1,i.horizontalOffset=0,i.verticalOffset=0,i.model={},i.event=!0,i.model={width:i.width,height:i.height},i}return Object(s.c)(t,e),t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"sourceID":this.setParent(e.sourceID);break;case"width":case"height":this.renderCanvas(),this.setParent(this.sourceID)}},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){this.element.style.background="transparent",this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.diagramRenderer=new rc(this.element.id,new ic,!1),this.renderCanvas(),this.setParent(this.sourceID)},t.prototype.getSizeValue=function(e){return e.toString().indexOf("px")>0||e.toString().indexOf("%")>0?e.toString():e.toString()+"px"},t.prototype.renderCanvas=function(e){var t=document.getElementById(this.element.id+"_canvas");t||(t=Pl("div",{}),this.element.appendChild(t)),Bl(t,{id:this.element.id+"_canvas",class:"drawing",style:"position:relative; height:"+this.getSizeValue(this.model.height)+"; width:"+this.getSizeValue(this.model.width)+";style:-ms-touch-action: none;touch-action: none;"}),this.element.setAttribute("tabindex",String(0)),this.element.style.overflow="hidden",this.element.style.height=String(this.model.height),this.element.style.width=String(this.model.width),this.canvas=t},t.prototype.setParent=function(e){var t=document.getElementById(e);if(this.parent){var n=this.parent;this.parent=null,n.setOverview(null,this.element.id),this.removeDocument(this)}this.parent=this.getDiagram(t,"ej2_instances"),this.parent&&this.parent.setOverview(this)},t.prototype.getDiagram=function(e,t){for(var n,i=e[t].length,r=0;r<i;r++)if(jl(e[t][r].element,"e-diagram")){n=e[t][r];break}return n},t.prototype.unWireEvents=function(){var e=re.touchMoveEvent,t=re.isPointer?"pointerleave":"mouseleave",n=re.touchEndEvent;I.remove(this.element,re.touchStartEvent,this.mouseDown),I.remove(this.element,e,this.mouseMove),I.remove(this.element,n,this.mouseUp),I.remove(this.element,t,this.documentMouseUp),I.remove(window,"resize",this.windowResize);var i=document.getElementById(this.sourceID+"content");i&&I.remove(i,"scroll",this.scrolled)},t.prototype.wireEvents=function(){var e=re.touchEndEvent,t=re.touchMoveEvent,n=re.isPointer?"pointerleave":"mouseleave";I.add(this.element,re.touchStartEvent,this.mouseDown,this),I.add(this.element,t,this.mouseMove,this),I.add(this.element,e,this.mouseUp,this),I.add(this.element,n,this.documentMouseUp,this),I.add(window,"resize",this.windowResize,this);var i=document.getElementById(this.sourceID+"content");i&&I.add(i,"scroll",this.scrolled,this)},t.prototype.renderDocument=function(e){e.canvas=this.canvas;var t=document.getElementById(this.canvas.id+"_svg");t&&t.parentNode.removeChild(t);var n=Tl("svg",{id:this.canvas.id+"_svg",version:"1.1",xlink:"http://www.w3.org/1999/xlink",class:"overview_svg"});this.svg=n,e.svg=n,e.canvas.appendChild(n);var i=document.getElementById(this.element.id),r=i.clientWidth,o=i.clientHeight,s=i.getBoundingClientRect(),a=window.screenX<0?-1*window.screenX:window.screenX,l=window.screenY<0?-1*window.screenY:window.screenY;0===r&&(r=Math.floor(window.innerWidth-a-Math.floor(s.left))),0===o&&(o=Math.floor(window.innerHeight-l-Math.floor(s.top))),n.setAttribute("width",String(r)),n.setAttribute("height",String(o)),this.model.width=r,this.model.height=o,e.diagramLayerDiv||(e.diagramLayerDiv=Pl("div",{}),document.getElementById(this.element.id),e.diagramLayer=nc.createCanvas(this.element.id+"_diagramLayer",this.model.width,this.model.height),e.diagramLayer.setAttribute("style","position:absolute; left:0px;  top:0px "),e.diagramLayerDiv.appendChild(e.diagramLayer),e.canvas.appendChild(e.diagramLayerDiv)),Bl(e.diagramLayerDiv,{id:this.element.id+"_diagramLayer_div",style:"width:"+this.model.width+"px; height:"+this.model.height+"px;position:absolute;top:0px;left:0px"}),this.renderHtmlLayer(e.canvas),this.renderNativeLayer(e.canvas,e),this.addOverviewRectPanel(e)},t.prototype.removeDocument=function(e){var t=document.getElementById(this.canvas.id+"_svg");this.canvas.removeChild(t);var n=document.getElementById(this.element.id+"_htmlLayer");this.canvas.removeChild(n);var i=document.getElementById(this.element.id+"_diagramLayer_div");this.canvas.removeChild(i),e.diagramLayerDiv=null,e.diagramLayer=null},t.prototype.renderHtmlLayer=function(e){var t=Pl("div",{id:this.element.id+"_htmlLayer",class:"e-html-layer",style:"pointer-events:none;position:absolute;top:0px;left:0px;"}),n=Pl("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;"});return t.appendChild(n),e.appendChild(t),t},t.prototype.renderNativeLayer=function(e,t){var n=this.parent.createSvg(this.element.id+"_nativeLayer_svg",this.model.width,this.model.height),i=Tl("g",{id:this.element.id+"_nativeLayer"});n.appendChild(i),t.diagramLayerDiv.appendChild(n),Nl(n,{class:"e-native-layer"})},t.prototype.addOverviewRectPanel=function(e){var t=document.getElementById(this.canvas.id+"_overviewsvg");t&&t.parentNode.removeChild(t),t=Tl("svg",{id:this.canvas.id+"_overviewsvg",version:"1.1",xlink:"http://www.w3.org/1999/xlink",style:"position:absolute;left:0px;top:0px; aria-label:Specifies overview",width:this.model.width,height:this.model.height}),e.canvas.appendChild(t);var n=Tl("g",{id:this.element.id+"_overviewlayer",style:"pointer-events:none"});t.appendChild(n);var i=Tl("rect",{fill:"transparent",width:"100%",height:"100%",class:"overviewbackrect",id:this.canvas.id+"overviewbackrect"});i.setAttribute("style"," pointer-events: none; "),n.appendChild(i);var r=Tl("g",{id:this.canvas.id+"overviewhandle",style:"pointer-events:all"});n.appendChild(r);var o=Tl("rect",{id:this.canvas.id+"overviewrect",fill:"transparent"});r.appendChild(o),this.renderOverviewCorner("left",r),this.renderOverviewCorner("right",r),this.renderOverviewCorner("top",r),this.renderOverviewCorner("bottom",r),this.renderOverviewCorner("topleft",r),this.renderOverviewCorner("topright",r),this.renderOverviewCorner("bottomleft",r),this.renderOverviewCorner("bottomright",r)},t.prototype.renderOverviewCorner=function(e,t){var n,i=Tl(n="top"===e||"bottom"===e||"right"===e||"left"===e?"rect":"circle",{id:this.canvas.id+"visible"+e});t.appendChild(i);var r=Tl(n,{id:this.canvas.id+e,class:"overviewresizer",fill:"transparent"});t.appendChild(r)},t.prototype.updateOverviewRectangle=function(){var e=this.currentPoint.x-this.prevPoint.x,t=this.currentPoint.y-this.prevPoint.y,n=new Xt;n.width=0,n.height=0;var i=0,r=0;switch(this.resizeDirection){case"left":n.width-=e,n.height-=e/this.viewPortRatio,i=e,r=e/this.viewPortRatio,r/=2;break;case"right":n.width+=e,n.height+=e/this.viewPortRatio,r=e/this.viewPortRatio,r/=-2;break;case"top":n.height-=t,n.width-=t*this.viewPortRatio,r=t,i=t*this.viewPortRatio,i/=2;break;case"bottom":n.height+=t,n.width+=t*this.viewPortRatio,i=t*this.viewPortRatio,i/=-2;break;case"topleft":Math.abs(t)>Math.abs(e)?e=t*this.viewPortRatio:t=e/this.viewPortRatio,n.width-=e,n.height-=t,i=e,r=t;break;case"topright":Math.abs(t)>Math.abs(e)?e=-t*this.viewPortRatio:t=-e/this.viewPortRatio,r=t,n.width+=e,n.height-=t;break;case"bottomleft":Math.abs(t)>Math.abs(e)?e=-t*this.viewPortRatio:t=-e/this.viewPortRatio,i=e,n.width-=e,n.height+=t;break;case"bottomright":Math.abs(t)>Math.abs(e)?e=t*this.viewPortRatio:t=e/this.viewPortRatio,n.width+=e,n.height+=t}this.updateHelper(i,r,n,void 0,void 0)},t.prototype.updateHelper=function(e,t,n,i,r){var o,s,a,l,c,h=this.element.getElementsByTagName("svg")[2].getElementById("helper");n?(o=(a=h.getBBox()).x+e,s=a.y+t,i=a.width+n.width,r=a.height+n.height):(l=this.currentPoint.x>this.startPoint.x?this.currentPoint.x-this.prevPoint.x:this.prevPoint.x-this.currentPoint.x,c=this.currentPoint.y>this.startPoint.y?this.currentPoint.y-this.prevPoint.y:this.prevPoint.y-this.currentPoint.y,Math.abs(c)>Math.abs(l)?l=this.viewPortRatio*c:c=l/this.viewPortRatio,a=h.getBBox(),o=this.startPoint.x>this.currentPoint.x?a.x-l:a.x,s=this.startPoint.y>this.currentPoint.y?a.y-c:a.y,i=a.width+l,r=a.height+c),Nl(this.helper,{id:this.helper.id,x:o,y:s,width:Math.max(0,i),height:Math.max(0,r)})},t.prototype.updateOverviewrect=function(e,t,n,i){Bl(document.getElementById(this.canvas.id+"overviewrect"),{x:e,y:t,width:Math.max(1,n),height:Math.max(1,i)}),this.updateOverviewCorner("top",e+8,t-2,Math.max(0,n-16),2),this.updateOverviewCorner("bottom",e+8,t+i,Math.max(0,n-16),2),this.updateOverviewCorner("left",e-2,t+8,2,Math.max(0,i-16)),this.updateOverviewCorner("right",e+n,t+8,2,Math.max(0,i-16)),this.updateOverviewCorner("topleft",e,t,5,5),this.updateOverviewCorner("topright",e+n,t,5,5),this.updateOverviewCorner("bottomleft",e,t+i,5,5),this.updateOverviewCorner("bottomright",e+n,t+i,5,5)},t.prototype.updateOverviewCorner=function(e,t,n,i,r){var o,s;"top"===e||"bottom"===e||"right"===e||"left"===e?(o={x:t,y:n,width:i,height:r,fill:"#ED1C24"},s={x:t-2,y:n-2,width:2===i?4:i,height:2===r?4:r}):(o={cx:t,cy:n,r:4,fill:"#ED1C24"},s={cx:t,cy:n,r:6,fill:"transparent"}),Bl(document.getElementById(this.canvas.id+"visible"+e),o),Bl(document.getElementById(this.canvas.id+e),s)},t.prototype.translateOverviewRectangle=function(){var e=Number(this.model.width),t=Number(this.model.height),n=this.currentPoint.x-this.prevPoint.x,i=this.currentPoint.y-this.prevPoint.y,r=(Math.min(this.parent.scroller.viewPortWidth/e,this.parent.scroller.viewPortHeight/t),this.element.getElementsByTagName("svg")[2].getElementById(this.canvas.id+"overviewrect").getBBox()),o=r.x+n,s=r.y+i,a=r.width,l=r.height;this.updateOverviewrect(o,s,a,l),this.updateParentView(this.parent.scroller.currentZoom,o,s,a,l,null)},t.prototype.renderOverviewRect=function(e,t,n,i){var r=Number(this.model.width),o=Number(this.model.height),s=Math.max(this.parent.scroller.viewPortWidth/(n/r*this.contentWidth),this.parent.scroller.viewPortHeight/(i/o*this.contentHeight));if(s>=.25&&s<=30){this.updateParentView(s,e,t,n,i,{x:0,y:0});var a=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);if(this.helper){var l=this.element.getElementsByTagName("rect")[10].getBBox();a.x=l.x,a.y=l.y}this.updateOverviewrect(a.x,a.y,a.width,a.height)}},t.prototype.scrollOverviewRect=function(e,t,n,i){if(!this.actionName||i){var r=Number(this.model.width),o=Number(this.model.height),s=Math.min(this.contentWidth/r,this.contentHeight/o),a=new an,l=a.x=e/n/s,c=a.y=t/n/s,h=a.width=this.parent.scroller.viewPortWidth/n/s,d=a.height=this.parent.scroller.viewPortHeight/n/s;if(i){var u=new an;return u.x=l,u.y=c,u.width=h,u.height=d,u}this.updateOverviewrect(-l,-c,h,d)}return null},t.prototype.updateParentView=function(e,t,n,i,r,o){var s,a,l=Number(this.model.width),c=Number(this.model.height),h=t*(this.contentWidth/l)*e,d=n*(this.contentHeight/c)*e;this.parent.scroller.getPageBounds(),1===e&&"pan"!==this.actionName||(s=-h-this.parent.scroller.horizontalOffset,a=-d-this.parent.scroller.verticalOffset),"scale"===this.actionName||"draw"===this.actionName?this.parent.scroller.zoom(e/this.parent.scroller.currentZoom,s,a,o):this.parent.pan(s,a,o)},t.prototype.updateView=function(e){var t,n,i=this.parent.scroller.getPageBounds();t=i.width,n=i.height;var r,o=Number(this.model.width),s=Number(this.model.height),a=Math.max(t,this.parent.scroller.viewPortWidth),l=Math.max(n,this.parent.scroller.viewPortHeight);this.contentWidth=a=Math.max(a,o/s*l),this.contentHeight=l=Math.max(l,s/o*a),r=Math.min(o/a,s/l);var c=document.getElementById(this.element.id+"_htmlLayer");c.style.webkitTransform="scale("+r+") translate("+-i.x+"px,"+-i.y+"px)",c.style.transform="scale("+r+") translate("+-i.x+"px,"+-i.y+"px)",document.getElementById(this.element.id+"_overviewlayer").setAttribute("transform","translate("+-i.x*r+","+-i.y*r+")"),this.horizontalOffset=i.x*r,this.verticalOffset=i.y*r;var h=document.getElementById(this.element.id+"_diagramLayer"),d=Dl(this.element.id),u=h.getContext("2d"),p=Number(this.model.width)/this.contentWidth,f=Number(this.model.height)/this.contentHeight;p=Math.min(p,f),d.setAttribute("transform","translate(0,0),scale("+p+")"),u.setTransform(p,0,0,p,0,0),u.fillStyle="red",this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom)},t.prototype.scrolled=function(e){if(this.event){var t=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);this.updateOverviewrect(-t.x,-t.y,t.width,t.height)}},t.prototype.updateCursor=function(e){if(jl(e.target,"overviewresizer"))switch(e.target.id){case this.canvas.id+"left":this.canvas.style.cursor="w-resize";break;case this.canvas.id+"right":this.canvas.style.cursor="e-resize";break;case this.canvas.id+"top":this.canvas.style.cursor="n-resize";break;case this.canvas.id+"bottom":this.canvas.style.cursor="s-resize";break;case this.canvas.id+"topleft":this.canvas.style.cursor="nw-resize";break;case this.canvas.id+"topright":this.canvas.style.cursor="ne-resize";break;case this.canvas.id+"bottomleft":this.canvas.style.cursor="sw-resize";break;case this.canvas.id+"bottomright":this.canvas.style.cursor="se-resize"}else this.canvas.style.cursor="default"},t.prototype.mouseMove=function(e){if(this.event=!1,this.updateCursor(e),this.currentPoint=this.mousePosition(e),this.actionName)switch(this.actionName){case"draw":this.inAction||this.startPoint.x===this.currentPoint.x&&this.startPoint.y===this.currentPoint.y||(this.initHelper(),this.inAction=!0),this.inAction&&this.updateHelper();break;case"scale":this.inAction||(this.initHelper(),this.inAction=!0),this.updateOverviewRectangle();break;case"pan":(this.startPoint.x!==this.currentPoint.x||this.startPoint.y===this.currentPoint.y||this.inAction)&&(this.inAction=!0,this.translateOverviewRectangle())}this.prevPoint=this.currentPoint},t.prototype.documentMouseUp=function(e){this.inAction=!1,this.actionName="",this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},t.prototype.windowResize=function(e){var t=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){var e=document.getElementById(t.element.id).getBoundingClientRect();t.model.width=e.width,t.model.height=e.height,t.renderCanvas(),t.setParent(t.sourceID)},10),!1},t.prototype.mouseDown=function(e){if(e.target.id===this.canvas.id+"_overviewsvg"&&(this.actionName="draw"),e.target.id===this.canvas.id+"overviewrect"&&(this.actionName="pan"),jl(e.target,"overviewresizer"))switch(this.actionName="scale",e.target.id){case this.canvas.id+"left":this.resizeDirection="left";break;case this.canvas.id+"right":this.resizeDirection="right";break;case this.canvas.id+"top":this.resizeDirection="top";break;case this.canvas.id+"bottom":this.resizeDirection="bottom";break;case this.canvas.id+"topleft":this.resizeDirection="topleft";break;case this.canvas.id+"topright":this.resizeDirection="topright";break;case this.canvas.id+"bottomleft":this.resizeDirection="bottomleft";break;case this.canvas.id+"bottomright":this.resizeDirection="bottomright"}this.startPoint=this.prevPoint=this.mousePosition(e),this.viewPortRatio=this.parent.scroller.viewPortWidth/this.parent.scroller.viewPortHeight,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="none"},t.prototype.mouseUp=function(e){if(this.currentPoint=this.mousePosition(e),Number(this.model.width),Number(this.model.height),this.actionName)if(this.startPoint.x!==this.currentPoint.x||this.startPoint.y!==this.currentPoint.y){if("pan"===this.actionName);else if(this.helper){var t=this.element.getElementsByTagName("rect")[10].getBBox();this.resizeDirection=this.resizeDirection||"",this.renderOverviewRect(t.x,t.y,n=t.width,i=t.height)}}else if(e.target.id===this.canvas.id+"_overviewsvg"||"helper"===e.target.id){var n=(t=this.element.getElementsByTagName("svg")[2].getElementById(this.canvas.id+"overviewrect").getBBox()).width,i=t.height;this.inAction=!0,this.actionName="pan",this.renderOverviewRect(this.currentPoint.x-n/2,this.currentPoint.y-i/2,n,i),this.inAction=!1}this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.actionName="",this.startPoint=null,this.currentPoint=null,this.prevPoint=null,this.helper=null,this.viewPortRatio=1,this.resizeDirection="",this.inAction=!1,this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},t.prototype.initHelper=function(){var e=this.element.getElementsByTagName("svg")[2],t=this.startPoint.x,n=this.startPoint.y,i=1,r=1;if("scale"===this.actionName){var o=e.getElementById(this.canvas.id+"overviewrect").getBBox();t=o.x,n=o.y,i=o.width,r=o.height}var s=Tl("rect",{id:"helper",x:t,y:n,width:i,height:r,fill:"transparent",stroke:"gray","stroke-dasharray":"2 2","shape-rendering":"crispEdges"});e.getElementById(this.element.id+"_overviewlayer").appendChild(s),this.helper=s},t.prototype.mousePosition=function(e){var t,n,i;-1!==e.type.indexOf("touch")?(n=(t=e).changedTouches[0].clientX-this.element.offsetLeft,i=t.changedTouches[0].clientY-this.element.offsetTop):(n=e.clientX,i=e.clientY);var r=this.element.getBoundingClientRect();return{x:(n-=r.left)+this.horizontalOffset,y:(i-=r.top)+this.verticalOffset}},t.prototype.destroy=function(){if(this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),document.getElementById(this.element.id)){this.element.classList.remove("e-overview");var t=document.getElementById(this.element.id+"_canvas");t&&this.element.removeChild(t)}this.parent.views.splice(this.parent.views.indexOf(this.element.id),1),this.diagramLayerDiv=null,this.canvas=null,this.parent=null},t.prototype.getModuleName=function(){return"Overview"},Object(s.b)([ye("100%")],t.prototype,"width",void 0),Object(s.b)([ye("100%")],t.prototype,"height",void 0),Object(s.b)([ye("")],t.prototype,"sourceID",void 0),Object(s.b)([xe()],t.prototype,"created",void 0),t}(ht),_h=["animationComplete","click","collectionChange","connectionChange","contextMenuBeforeItemRender","contextMenuClick","contextMenuOpen","created","dataLoaded","doubleClick","dragEnter","dragLeave","dragOver","drop","expandStateChange","historyChange","mouseEnter","mouseLeave","mouseOver","positionChange","propertyChange","rotateChange","scrollChange","selectionChange","sizeChange","sourcePointChange","targetPointChange","textEdit"],Nh=[""],Bh=function(e){function t(t,n,i,r){var o=e.call(this)||this;o.ngEle=t,o.srenderer=n,o.viewContainerRef=i,o.injector=r,o.tags=["layers","connectors","nodes"],o.element=o.ngEle.nativeElement,o.injectedModules=o.injectedModules||[];try{var s=o.injector.get("DiagramsHierarchicalTree");-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(a){}try{s=o.injector.get("DiagramsMindMap"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(l){}try{s=o.injector.get("DiagramsRadialTree"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(c){}try{s=o.injector.get("DiagramsComplexHierarchicalTree"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(h){}try{s=o.injector.get("DiagramsDataBinding"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(d){}try{s=o.injector.get("DiagramsSnapping"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(u){}try{s=o.injector.get("DiagramsPrintAndExport"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(p){}try{s=o.injector.get("DiagramsBpmnDiagrams"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(f){}try{s=o.injector.get("DiagramsSymmetricLayout"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(g){}try{s=o.injector.get("DiagramsConnectorBridging"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(m){}try{s=o.injector.get("DiagramsUndoRedo"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(y){}try{s=o.injector.get("DiagramsLayoutAnimation"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(v){}try{s=o.injector.get("DiagramsDiagramContextMenu"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(b){}try{s=o.injector.get("DiagramsConnectorEditing"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(w){}return o.registerEvents(_h),o.addTwoWay.call(o,Nh),Ht("currentInstance",o,o.viewContainerRef),o}return Object(s.c)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.ngAfterContentChecked=function(){},t}(Xc);Bh=Object(s.b)([Bt([Wt])],Bh);var Fh=function(){return function(){}}(),zh=["paletteSelectionChange"],Hh=[""],Vh=function(e){function t(t,n,i,r){var o=e.call(this)||this;o.ngEle=t,o.srenderer=n,o.viewContainerRef=i,o.injector=r,o.tags=["palettes"],o.element=o.ngEle.nativeElement,o.injectedModules=o.injectedModules||[];try{var s=o.injector.get("DiagramsBpmnDiagrams");-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(a){}return o.registerEvents(zh),o.addTwoWay.call(o,Hh),Ht("currentInstance",o,o.viewContainerRef),o}return Object(s.c)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.ngAfterContentChecked=function(){},t}(Rh);Vh=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Bt([Wt]),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector])}()],Vh);var Uh=function(){return function(){}}(),Wh=["created"],Gh=[""],qh=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.ngEle=t,o.srenderer=n,o.viewContainerRef=i,o.injector=r,o.tags=[""],o.element=o.ngEle.nativeElement,o.injectedModules=o.injectedModules||[],o.registerEvents(Wh),o.addTwoWay.call(o,Gh),Ht("currentInstance",o,o.viewContainerRef),o}return Object(s.c)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.ngAfterContentChecked=function(){},t}(Lh);qh=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Bt([Wt]),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector])}()],qh);var Qh=Cn.Default|Cn.Bridging|Cn.BridgeObstacle,Yh=Cn.None,Xh=An.Default&~An.InConnect&~An.OutConnect,Zh=An.Default&~An.Delete&~An.InConnect,Kh="componentId",Jh=function(e){return e[e.Hardware=0]="Hardware",e[e.Software=1]="Software",e}({}),$h=function(){function e(){this.saved_design=!0,this.connected_component_id_index={},this.nodeid_index={},this.unsubscribe_sim=new o.a,this.sim_mode=new o.a,this.currentMode=this.sim_mode.asObservable(),this.logedin=new o.a,this.currentloginstatus=this.logedin.asObservable(),this.port_value_table={},this.port_observables_table={},this.domainbaseurl_without_port="http://192.168.1.30",this.domainbaseurl=this.domainbaseurl_without_port+":80/",this.baseurl=this.domainbaseurl+"api",this.imageUrl=this.domainbaseurl+"component/",this.localhost_trayapp="http://localhost:4000/",this.web_socket_server_url=this.domainbaseurl_without_port+":3001",this.ip=null,this.port=null}return e.prototype.setPinInputBit=function(e,t,n,i){this.pin_inputs_bit_values[n]=this.pin_inputs_bit_values[n]||{},this.pin_inputs_bit_values[n][i]=this.pin_inputs_bit_values[n][i]||"",this.pin_inputs_bit_index[n]=this.pin_inputs_bit_index[n]||{},this.pin_inputs_bit_index[n][i]=this.pin_inputs_bit_index[n][i]||{},this.pin_inputs_bit_index[n][i][e]=this.pin_inputs_bit_index[n][i][e]||{},this.pin_inputs_bit_values[n][i]+="0",this.pin_inputs_bit_index[n][i][e][t]=this.pin_inputs_bit_values[n][i].length},e.prototype.changeMode=function(e){this.sim_mode.next(e)},e.prototype.changeLogin=function(e){this.logedin.next(e)},e.prototype.changePortValue=function(e,t,n,i,r){var o=this,s=this.updatePinBitAndGetValue(e,n,t,i,r);n in this.port_value_table?(this.diagram.nodes[n].ports[t].addInfo.sim_value=e||s,Object.keys(this.port_value_table[n]).forEach(function(i){var r=o.port_value_table[n][i][t]||null;null!=r&&Object.keys(r).forEach(function(o){r[o].next({value:e,target_node_index:i,target_port_index:o,source_node_index:n,source_port_index:t})})})):this.diagram.nodes[n].ports[t].addInfo.sim_value=e||s},e.prototype.updatePinBitAndGetValue=function(e,t,n,i,r){if(this.diagram.nodes[t].addInfo.type==Jh.Hardware)return!1;var o=this.pin_inputs_bit_index[t][n][i][r],s=e?"1":"0",a=this.pin_inputs_bit_values[t][n],l=a.substr(0,o)+s+a.substr(o+1);return this.pin_inputs_bit_values[t][n]=l,this.pin_inputs_bit_values[t][n].includes("1")},e.prototype.addOutputEvent=function(e,t,n,i){return this.port_value_table[t]=this.port_value_table[t]||{},this.port_observables_table[t]=this.port_observables_table[t]||{},this.port_value_table[t][i]=this.port_value_table[t][i]||{},this.port_observables_table[t][i]=this.port_observables_table[t][i]||{},this.port_value_table[t][i][e]=this.port_value_table[t][i][e]||{},this.port_observables_table[t][i][e]=this.port_observables_table[t][i][e]||{},this.port_value_table[t][i][e][n]=new o.a,this.port_observables_table[t][i][e][n]=this.port_value_table[t][i][e][n].asObservable(),this.port_observables_table[t][i][e][n]},e}(),ed=n("6blF"),td=n("gFX4"),nd=function(){function e(e){this.sharedData=e}return e.prototype.initSocket=function(e,t){void 0===t&&(t="simulate");var n=JSON.parse(localStorage.getItem("currentUser")).token;this.socket=td(this.sharedData.web_socket_server_url,{query:{token:n,design_id:e,mode:t}})},e.prototype.send=function(e){this.socket.emit("message",e)},e.prototype.bindBoards=function(e){this.socket.emit("bind_boards",e)},e.prototype.close=function(){this.socket.close()},e.prototype.onMessage=function(){var e=this;return new ed.a(function(t){e.socket.on("message",function(e){return t.next(e)})})},e.prototype.onEvent=function(e){var t=this;return new ed.a(function(n){t.socket.on(e,function(e){return n.next(e)})})},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e(i.inject($h))},token:e,providedIn:"root"}),e}(),id=n("Ip0R"),rd=n("F/XL"),od=n("0/uQ"),sd=n("26FU"),ad=n("3fWJ"),ld=n("dzgT"),cd=n("lYZG"),hd=n("G5J1"),dd=n("67Y/"),ud=n("Txjg"),pd=n("FFOo");function fd(e,t){return function(n){return n.lift(new gd(e,t))}}var gd=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new md(e,this.predicate,this.thisArg))},e}(),md=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.predicate=n,r.thisArg=i,r.count=0,r}return s.c(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(pd.a),yd=n("b7mW");function vd(e){return function(t){return 0===e?Object(hd.b)():t.lift(new bd(e))}}var bd=function(){function e(e){if(this.total=e,this.total<0)throw new yd.a}return e.prototype.call=function(e,t){return t.subscribe(new wd(e,this.total))},e}(),wd=function(e){function t(t,n){var i=e.call(this,t)||this;return i.total=n,i.ring=new Array,i.count=0,i}return s.c(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,i=this.count++;t.length<n?t.push(e):t[i%n]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,i=this.ring,r=0;r<n;r++){var o=t++%n;e.next(i[o])}e.complete()},t}(pd.a),Cd=n("+umK"),xd=n("2Bdj");function Ad(e,t,n){return function(i){return i.lift(new Sd(e,t,n))}}var Sd=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new Od(e,this.nextOrObserver,this.error,this.complete))},e}(),Od=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;return o._tapNext=Cd.a,o._tapError=Cd.a,o._tapComplete=Cd.a,o._tapError=i||Cd.a,o._tapComplete=r||Cd.a,Object(xd.a)(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||Cd.a,o._tapError=n.error||Cd.a,o._tapComplete=n.complete||Cd.a),o}return s.c(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(pd.a),Ed=function(e){return void 0===e&&(e=Id),Ad({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw e()}})};function Id(){return new ad.a}function Dd(e){return void 0===e&&(e=null),function(t){return t.lift(new kd(e))}}var kd=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new Pd(e,this.defaultValue))},e}(),Pd=function(e){function t(t,n){var i=e.call(this,t)||this;return i.defaultValue=n,i.isEmpty=!0,i}return s.c(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(pd.a),Td=n("mChF");function Md(e,t){var n=arguments.length>=2;return function(i){return i.pipe(e?fd(function(t,n){return e(t,n,i)}):Td.a,vd(1),n?Dd(t):Ed(function(){return new ad.a}))}}var jd=n("MGBS"),Rd=n("rPjj"),Ld=n("zotm");function _d(e){return function(t){var n=new Nd(e),i=t.lift(n);return n.caught=i}}var Nd=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new Bd(e,this.selector,this.caught))},e}(),Bd=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.selector=n,r.caught=i,r}return s.c(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(r){return void e.prototype.error.call(this,r)}this._unsubscribeAndRecycle();var i=new Rd.a(this,void 0,void 0);this.add(i),Object(Ld.a)(this,n,void 0,void 0,i)}},t}(jd.a);function Fd(e){return function(t){return 0===e?Object(hd.b)():t.lift(new zd(e))}}var zd=function(){function e(e){if(this.total=e,this.total<0)throw new yd.a}return e.prototype.call=function(e,t){return t.subscribe(new Hd(e,this.total))},e}(),Hd=function(e){function t(t,n){var i=e.call(this,t)||this;return i.total=n,i.count=0,i}return s.c(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(pd.a);function Vd(e,t){var n=arguments.length>=2;return function(i){return i.pipe(e?fd(function(t,n){return e(t,n,i)}):Td.a,Fd(1),n?Dd(t):Ed(function(){return new ad.a}))}}var Ud=n("psW0"),Wd=function(){function e(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new Gd(e,this.predicate,this.thisArg,this.source))},e}(),Gd=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;return o.predicate=n,o.thisArg=i,o.source=r,o.index=0,o.thisArg=i||o,o}return s.c(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(pd.a);function qd(e,t){return"function"==typeof t?function(n){return n.pipe(qd(function(n,i){return Object(od.a)(e(n,i)).pipe(Object(dd.a)(function(e,r){return t(n,e,i,r)}))}))}:function(t){return t.lift(new Qd(e))}}var Qd=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new Yd(e,this.project))},e}(),Yd=function(e){function t(t,n){var i=e.call(this,t)||this;return i.project=n,i.index=0,i}return s.c(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var i=this.innerSubscription;i&&i.unsubscribe();var r=new Rd.a(this,void 0,void 0);this.destination.add(r),this.innerSubscription=Object(Ld.a)(this,e,t,n,r)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,i,r){this.destination.next(t)},t}(jd.a),Xd=n("IUTb"),Zd=n("PU8L"),Kd=n("dEwP"),Jd=n("nkY7");function $d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n=e[e.length-1];Object(Jd.a)(n)?e.pop():n=null;var i=e.length;return 1!==i||n?i>0?Object(Kd.a)(Object(Xd.a)(e,n),t):Object(Kd.a)(Object(hd.b)(n),t):Object(Kd.a)(Object(Zd.a)(e[0]),t)}}function eu(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new tu(e,t,n))}}var tu=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new nu(e,this.accumulator,this.seed,this.hasSeed))},e}(),nu=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;return o.accumulator=n,o._seed=i,o.hasSeed=r,o.index=0,o}return s.c(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(i){this.destination.error(i)}this.seed=t,this.destination.next(t)},t}(pd.a);function iu(e,t){return Object(Ud.a)(e,t,1)}var ru=n("y3By"),ou=n("pugT");function su(e){return function(t){return t.lift(new au(e))}}var au=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new lu(e,this.callback))},e}(),lu=function(e){function t(t,n){var i=e.call(this,t)||this;return i.add(new ou.a(n)),i}return s.c(t,e),t}(pd.a),cu=n("Zn8D"),hu=null;function du(){return hu}var uu,pu={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},fu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gu={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};i["\u0275global"].Node&&(uu=i["\u0275global"].Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var mu,yu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.parse=function(e){throw new Error("parse not implemented")},t.makeCurrent=function(){var e;e=new t,hu||(hu=e)},t.prototype.hasProperty=function(e,t){return t in e},t.prototype.setProperty=function(e,t,n){e[t]=n},t.prototype.getProperty=function(e,t){return e[t]},t.prototype.invoke=function(e,t,n){var i;(i=e)[t].apply(i,Object(s.g)(n))},t.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},t.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},t.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},t.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return pu},enumerable:!0,configurable:!0}),t.prototype.contains=function(e,t){return uu.call(e,t)},t.prototype.querySelector=function(e,t){return e.querySelector(t)},t.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},t.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},t.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},t.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},t.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},t.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},t.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},t.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},t.prototype.getInnerHTML=function(e){return e.innerHTML},t.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},t.prototype.getOuterHTML=function(e){return e.outerHTML},t.prototype.nodeName=function(e){return e.nodeName},t.prototype.nodeValue=function(e){return e.nodeValue},t.prototype.type=function(e){return e.type},t.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},t.prototype.firstChild=function(e){return e.firstChild},t.prototype.nextSibling=function(e){return e.nextSibling},t.prototype.parentElement=function(e){return e.parentNode},t.prototype.childNodes=function(e){return e.childNodes},t.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),i=0;i<t.length;i++)n[i]=t[i];return n},t.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.prototype.appendChild=function(e,t){e.appendChild(t)},t.prototype.removeChild=function(e,t){e.removeChild(t)},t.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},t.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},t.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},t.prototype.insertAllBefore=function(e,t,n){n.forEach(function(n){return e.insertBefore(n,t)})},t.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},t.prototype.setInnerHTML=function(e,t){e.innerHTML=t},t.prototype.getText=function(e){return e.textContent},t.prototype.setText=function(e,t){e.textContent=t},t.prototype.getValue=function(e){return e.value},t.prototype.setValue=function(e,t){e.value=t},t.prototype.getChecked=function(e){return e.checked},t.prototype.setChecked=function(e,t){e.checked=t},t.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},t.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},t.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},t.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},t.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},t.prototype.createScriptTag=function(e,t,n){var i=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return i.setAttribute(e,t),i},t.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},t.prototype.createShadowRoot=function(e){return e.createShadowRoot()},t.prototype.getShadowRoot=function(e){return e.shadowRoot},t.prototype.getHost=function(e){return e.host},t.prototype.clone=function(e){return e.cloneNode(!0)},t.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},t.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},t.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},t.prototype.addClass=function(e,t){e.classList.add(t)},t.prototype.removeClass=function(e,t){e.classList.remove(t)},t.prototype.hasClass=function(e,t){return e.classList.contains(t)},t.prototype.setStyle=function(e,t,n){e.style[t]=n},t.prototype.removeStyle=function(e,t){e.style[t]=""},t.prototype.getStyle=function(e,t){return e.style[t]},t.prototype.hasStyle=function(e,t,n){var i=this.getStyle(e,t)||"";return n?i==n:i.length>0},t.prototype.tagName=function(e){return e.tagName},t.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,i=0;i<n.length;i++){var r=n.item(i);t.set(r.name,r.value)}return t},t.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},t.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},t.prototype.getAttribute=function(e,t){return e.getAttribute(t)},t.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},t.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},t.prototype.setAttributeNS=function(e,t,n,i){e.setAttributeNS(t,n,i)},t.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},t.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},t.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},t.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},t.prototype.getDefaultDocument=function(){return document},t.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},t.prototype.getTitle=function(e){return e.title},t.prototype.setTitle=function(e,t){e.title=t||""},t.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},t.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},t.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},t.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},t.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},t.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},t.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},t.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},t.prototype.adoptNode=function(e){return document.adoptNode(e)},t.prototype.getHref=function(e){return e.getAttribute("href")},t.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&gu.hasOwnProperty(t)&&(t=gu[t]))}return fu[t]||t},t.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},t.prototype.getHistory=function(){return window.history},t.prototype.getLocation=function(){return window.location},t.prototype.getBaseHref=function(e){var t,n=vu||(vu=document.querySelector("base"))?vu.getAttribute("href"):null;return null==n?null:(t=n,mu||(mu=document.createElement("a")),mu.setAttribute("href",t),"/"===mu.pathname.charAt(0)?mu.pathname:"/"+mu.pathname)},t.prototype.resetBaseElement=function(){vu=null},t.prototype.getUserAgent=function(){return window.navigator.userAgent},t.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},t.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},t.prototype.getComputedStyle=function(e){return getComputedStyle(e)},t.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},t.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},t.prototype.supportsCookies=function(){return!0},t.prototype.getCookie=function(e){return Object(id["\u0275parseCookieValue"])(document.cookie,e)},t.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},t}(function(e){function t(){var t=e.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var i=["Webkit","Moz","O","ms"],r=0;r<i.length;r++)if(null!=t.getStyle(n,i[r]+"AnimationName")){t._animationPrefix="-"+i[r].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=o[e])})}catch(s){t._animationPrefix=null,t._transitionEnd=null}return t}return Object(s.c)(t,e),t.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},t.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},t.prototype.supportsDOMEvents=function(){return!0},t.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},t.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},t.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},t.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},t}(function(){function e(){this.resourceLoaderType=null}return Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),e}())),vu=null,bu=id.DOCUMENT;function wu(){return!!window.history.pushState}var Cu=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n._init(),n}return Object(s.c)(t,e),t.prototype._init=function(){this.location=du().getLocation(),this._history=du().getHistory()},t.prototype.getBaseHrefFromDOM=function(){return du().getBaseHref(this._doc)},t.prototype.onPopState=function(e){du().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},t.prototype.onHashChange=function(e){du().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(t.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),t.prototype.pushState=function(e,t,n){wu()?this._history.pushState(e,t,n):this.location.hash=n},t.prototype.replaceState=function(e,t,n){wu()?this._history.replaceState(e,t,n):this.location.hash=n},t.prototype.forward=function(){this._history.forward()},t.prototype.back=function(){this._history.back()},Object(s.b)([Object(s.e)(0,Object(i.Inject)(bu)),Object(s.d)("design:paramtypes",[Object])],t)}(id.PlatformLocation),xu=new i.InjectionToken("TRANSITION_ID"),Au=[{provide:i.APP_INITIALIZER,useFactory:function(e,t,n){return function(){n.get(i.ApplicationInitStatus).donePromise.then(function(){var n=du();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter(function(t){return n.getAttribute(t,"ng-transition")===e}).forEach(function(e){return n.remove(e)})})}},deps:[xu,bu,i.Injector],multi:!0}],Su=function(){function e(){}return e.init=function(){Object(i.setTestabilityGetter)(new e)},e.prototype.addToWindow=function(e){i["\u0275global"].getAngularTestability=function(t,n){void 0===n&&(n=!0);var i=e.findTestabilityInTree(t,n);if(null==i)throw new Error("Could not find testability for element.");return i},i["\u0275global"].getAllAngularTestabilities=function(){return e.getAllTestabilities()},i["\u0275global"].getAllAngularRootElements=function(){return e.getAllRootElements()},i["\u0275global"].frameworkStabilizers||(i["\u0275global"].frameworkStabilizers=[]),i["\u0275global"].frameworkStabilizers.push(function(e){var t=i["\u0275global"].getAllAngularTestabilities(),n=t.length,r=!1,o=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(o)})})},e.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var i=e.getTestability(t);return null!=i?i:n?du().isShadowRoot(t)?this.findTestabilityInTree(e,du().getHost(t),!0):this.findTestabilityInTree(e,du().parentElement(t),!0):null},e}();function Ou(e,t){"undefined"!=typeof COMPILED&&COMPILED||((i["\u0275global"].ng=i["\u0275global"].ng||{})[e]=t)}var Eu={ApplicationRef:i.ApplicationRef,NgZone:i.NgZone};function Iu(e){return Object(i.getDebugNode)(e)}var Du=new i.InjectionToken("EventManagerPlugins"),ku=function(){function e(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}return e.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},e.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},e.prototype.getZone=function(){return this._zone},e.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,i=0;i<n.length;i++){var r=n[i];if(r.supports(e))return this._eventNameToPlugin.set(e,r),r}throw new Error("No event manager plugin found for event "+e)},e}(),Pu=function(){function e(e){this._doc=e}return e.prototype.addGlobalEventListener=function(e,t,n){var i=du().getGlobalEventTarget(this._doc,e);if(!i)throw new Error("Unsupported event target "+i+" for event "+t);return this.addEventListener(i,t,n)},e}(),Tu=function(){function e(){this._stylesSet=new Set}return e.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},e.prototype.onStylesAdded=function(e){},e.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},e}(),Mu=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(t.head),n}return Object(s.c)(t,e),t.prototype._addStylesToHost=function(e,t){var n=this;e.forEach(function(e){var i=n._doc.createElement("style");i.textContent=e,n._styleNodes.add(t.appendChild(i))})},t.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},t.prototype.removeHost=function(e){this._hostNodes.delete(e)},t.prototype.onStylesAdded=function(e){var t=this;this._hostNodes.forEach(function(n){return t._addStylesToHost(e,n)})},t.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return du().remove(e)})},t}(Tu),ju={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ru=/%COMP%/g,Lu="_nghost-%COMP%",_u="_ngcontent-%COMP%";function Nu(e,t,n){for(var i=0;i<t.length;i++){var r=t[i];Array.isArray(r)?Nu(e,r,n):(r=r.replace(Ru,e),n.push(r))}return n}function Bu(e){return function(t){!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var Fu=function(){function e(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new zu(e)}return e.prototype.createRenderer=function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case i.ViewEncapsulation.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new Wu(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case i.ViewEncapsulation.Native:case i.ViewEncapsulation.ShadowDom:return new Gu(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=Nu(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}},e.prototype.begin=function(){},e.prototype.end=function(){},e}(),zu=function(){function e(e){this.eventManager=e,this.data=Object.create(null)}return e.prototype.destroy=function(){},e.prototype.createElement=function(e,t){return t?document.createElementNS(ju[t],e):document.createElement(e)},e.prototype.createComment=function(e){return document.createComment(e)},e.prototype.createText=function(e){return document.createTextNode(e)},e.prototype.appendChild=function(e,t){e.appendChild(t)},e.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},e.prototype.removeChild=function(e,t){e&&e.removeChild(t)},e.prototype.selectRootElement=function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'+e+'" did not match any elements');return t||(n.textContent=""),n},e.prototype.parentNode=function(e){return e.parentNode},e.prototype.nextSibling=function(e){return e.nextSibling},e.prototype.setAttribute=function(e,t,n,i){if(i){t=i+":"+t;var r=ju[i];r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)},e.prototype.removeAttribute=function(e,t,n){if(n){var i=ju[n];i?e.removeAttributeNS(i,t):e.removeAttribute(n+":"+t)}else e.removeAttribute(t)},e.prototype.addClass=function(e,t){e.classList.add(t)},e.prototype.removeClass=function(e,t){e.classList.remove(t)},e.prototype.setStyle=function(e,t,n,r){r&i.RendererStyleFlags2.DashCase?e.style.setProperty(t,n,r&i.RendererStyleFlags2.Important?"important":""):e.style[t]=n},e.prototype.removeStyle=function(e,t,n){n&i.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},e.prototype.setProperty=function(e,t,n){Vu(t,"property"),e[t]=n},e.prototype.setValue=function(e,t){e.nodeValue=t},e.prototype.listen=function(e,t,n){return Vu(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Bu(n)):this.eventManager.addEventListener(e,t,Bu(n))},e}(),Hu="@".charCodeAt(0);function Vu(e,t){if(e.charCodeAt(0)===Hu)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Uu,Wu=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;o.component=i;var s=Nu(r+"-"+i.id,i.styles,[]);return n.addStyles(s),o.contentAttr=_u.replace(Ru,r+"-"+i.id),o.hostAttr=Lu.replace(Ru,r+"-"+i.id),o}return Object(s.c)(t,e),t.prototype.applyToHost=function(t){e.prototype.setAttribute.call(this,t,this.hostAttr,"")},t.prototype.createElement=function(t,n){var i=e.prototype.createElement.call(this,t,n);return e.prototype.setAttribute.call(this,i,this.contentAttr,""),i},t}(zu),Gu=function(e){function t(t,n,r,o){var s=e.call(this,t)||this;s.sharedStylesHost=n,s.hostEl=r,s.component=o,s.shadowRoot=o.encapsulation===i.ViewEncapsulation.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),s.sharedStylesHost.addHost(s.shadowRoot);for(var a=Nu(o.id,o.styles,[]),l=0;l<a.length;l++){var c=document.createElement("style");c.textContent=a[l],s.shadowRoot.appendChild(c)}return s}return Object(s.c)(t,e),t.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},t.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},t.prototype.appendChild=function(t,n){return e.prototype.appendChild.call(this,this.nodeOrShadowRoot(t),n)},t.prototype.insertBefore=function(t,n,i){return e.prototype.insertBefore.call(this,this.nodeOrShadowRoot(t),n,i)},t.prototype.removeChild=function(t,n){return e.prototype.removeChild.call(this,this.nodeOrShadowRoot(t),n)},t.prototype.parentNode=function(t){return this.nodeOrShadowRoot(e.prototype.parentNode.call(this,this.nodeOrShadowRoot(t)))},t}(zu),qu="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},Qu=qu("addEventListener"),Yu=qu("removeEventListener"),Xu={},Zu="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[qu("BLACK_LISTED_EVENTS")]&&(Uu={});var Ku=function(e){return!!Uu&&Uu.hasOwnProperty(e)},Ju=function(e){var t=Xu[e.type];if(t){var n=this[t];if(n){var i=[e];if(1===n.length)return(s=n[0]).zone!==Zone.current?s.zone.run(s.handler,this,i):s.handler.apply(this,i);for(var r=n.slice(),o=0;o<r.length&&!0!==e[Zu];o++){var s;(s=r[o]).zone!==Zone.current?s.zone.run(s.handler,this,i):s.handler.apply(this,i)}}}},$u=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.ngZone=n,i&&Object(id.isPlatformServer)(i)||r.patchEvent(),r}return Object(s.c)(t,e),t.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Zu]=!0),e&&e.apply(this,arguments)}}},t.prototype.supports=function(e){return!0},t.prototype.addEventListener=function(e,t,n){var r=this,o=n;if(!e[Qu]||i.NgZone.isInAngularZone()&&!Ku(t))e.addEventListener(t,o,!1);else{var s=Xu[t];s||(s=Xu[t]=qu("ANGULAR"+t+"FALSE"));var a=e[s],l=a&&a.length>0;a||(a=e[s]=[]);var c=Ku(t)?Zone.root:Zone.current;if(0===a.length)a.push({zone:c,handler:o});else{for(var h=!1,d=0;d<a.length;d++)if(a[d].handler===o){h=!0;break}h||a.push({zone:c,handler:o})}l||e[Qu](t,Ju,!1)}return function(){return r.removeEventListener(e,t,o)}},t.prototype.removeEventListener=function(e,t,n){var i=e[Yu];if(!i)return e.removeEventListener.apply(e,[t,n,!1]);var r=Xu[t],o=r&&e[r];if(!o)return e.removeEventListener.apply(e,[t,n,!1]);for(var s=!1,a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&i.apply(e,[t,Ju,!1]):e.removeEventListener.apply(e,[t,n,!1])},t}(Pu),ep={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},tp=new i.InjectionToken("HammerGestureConfig"),np=new i.InjectionToken("HammerLoader"),ip=function(){function e(){this.events=[],this.overrides={}}return e.prototype.buildHammer=function(e){var t=new Hammer(e,this.options);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t},e}(),rp=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;return o._config=n,o.console=i,o.loader=r,o}return Object(s.c)(t,e),t.prototype.supports=function(e){return!(!ep.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+e+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},t.prototype.addEventListener=function(e,t,n){var i=this,r=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){var o=!1,s=function(){o=!0};return this.loader().then(function(){if(!window.Hammer)return i.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(s=function(){});o||(s=i.addEventListener(e,t,n))}).catch(function(){i.console.warn('The "'+t+'" event cannot be bound because the custom Hammer.JS loader failed.'),s=function(){}}),function(){s()}}return r.runOutsideAngular(function(){var o=i._config.buildHammer(e),s=function(e){r.runGuarded(function(){n(e)})};return o.on(t,s),function(){o.off(t,s),"function"==typeof o.destroy&&o.destroy()}})},t.prototype.isCustomEvent=function(e){return this._config.events.indexOf(e)>-1},t}(Pu),op=["alt","control","meta","shift"],sp={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},ap=function(e){function t(t){return e.call(this,t)||this}var n;return Object(s.c)(t,e),n=t,t.prototype.supports=function(e){return null!=n.parseEventName(e)},t.prototype.addEventListener=function(e,t,i){var r=n.parseEventName(t),o=n.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return du().onAndCancel(e,r.domEventName,o)})},t.parseEventName=function(e){var t=e.toLowerCase().split("."),i=t.shift();if(0===t.length||"keydown"!==i&&"keyup"!==i)return null;var r=n._normalizeKey(t.pop()),o="";if(op.forEach(function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),o+=e+".")}),o+=r,0!=t.length||0===r.length)return null;var s={};return s.domEventName=i,s.fullKey=o,s},t.getEventFullKey=function(e){var t="",n=du().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),op.forEach(function(i){i!=n&&(0,sp[i])(e)&&(t+=i+".")}),t+=n},t.eventCallback=function(e,t,i){return function(r){n.getEventFullKey(r)===e&&i.runGuarded(function(){return t(r)})}},t._normalizeKey=function(e){switch(e){case"esc":return"escape";default:return e}},t}(Pu),lp=function(){return function(){}}(),cp=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n}return Object(s.c)(t,e),t.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case i.SecurityContext.NONE:return t;case i.SecurityContext.HTML:return t instanceof dp?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),Object(i["\u0275_sanitizeHtml"])(this._doc,String(t)));case i.SecurityContext.STYLE:return t instanceof up?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),Object(i["\u0275_sanitizeStyle"])(t));case i.SecurityContext.SCRIPT:if(t instanceof pp)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case i.SecurityContext.URL:return t instanceof gp||t instanceof fp?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),Object(i["\u0275_sanitizeUrl"])(String(t)));case i.SecurityContext.RESOURCE_URL:if(t instanceof gp)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},t.prototype.checkNotSafeValue=function(e,t){if(e instanceof hp)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},t.prototype.bypassSecurityTrustHtml=function(e){return new dp(e)},t.prototype.bypassSecurityTrustStyle=function(e){return new up(e)},t.prototype.bypassSecurityTrustScript=function(e){return new pp(e)},t.prototype.bypassSecurityTrustUrl=function(e){return new fp(e)},t.prototype.bypassSecurityTrustResourceUrl=function(e){return new gp(e)},t}(lp),hp=function(){function e(e){this.changingThisBreaksApplicationSecurity=e}return e.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},e}(),dp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getTypeName=function(){return"HTML"},t}(hp),up=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getTypeName=function(){return"Style"},t}(hp),pp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getTypeName=function(){return"Script"},t}(hp),fp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getTypeName=function(){return"URL"},t}(hp),gp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getTypeName=function(){return"ResourceURL"},t}(hp),mp=[{provide:i.PLATFORM_ID,useValue:id["\u0275PLATFORM_BROWSER_ID"]},{provide:i.PLATFORM_INITIALIZER,useValue:function(){yu.makeCurrent(),Su.init()},multi:!0},{provide:id.PlatformLocation,useClass:Cu,deps:[bu]},{provide:bu,useFactory:function(){return document},deps:[]}],yp=Object(i.createPlatformFactory)(i.platformCore,"browser",mp);function vp(){return new i.ErrorHandler}var bp=function(){function e(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}var t;return t=e,e.withServerTransition=function(e){return{ngModule:t,providers:[{provide:i.APP_ID,useValue:e.appId},{provide:xu,useExisting:i.APP_ID},Au]}},e}();"undefined"!=typeof window&&window;var wp=function(){return function(e,t){this.id=e,this.url=t}}(),Cp=function(e){function t(t,n,i,r){void 0===i&&(i="imperative"),void 0===r&&(r=null);var o=e.call(this,t,n)||this;return o.navigationTrigger=i,o.restoredState=r,o}return Object(s.c)(t,e),t.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},t}(wp),xp=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.urlAfterRedirects=i,r}return Object(s.c)(t,e),t.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},t}(wp),Ap=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.reason=i,r}return Object(s.c)(t,e),t.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},t}(wp),Sp=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.error=i,r}return Object(s.c)(t,e),t.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},t}(wp),Op=function(e){function t(t,n,i,r){var o=e.call(this,t,n)||this;return o.urlAfterRedirects=i,o.state=r,o}return Object(s.c)(t,e),t.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},t}(wp),Ep=function(e){function t(t,n,i,r){var o=e.call(this,t,n)||this;return o.urlAfterRedirects=i,o.state=r,o}return Object(s.c)(t,e),t.prototype.toString=function(){return"GuardsCheckStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},t}(wp),Ip=function(e){function t(t,n,i,r,o){var s=e.call(this,t,n)||this;return s.urlAfterRedirects=i,s.state=r,s.shouldActivate=o,s}return Object(s.c)(t,e),t.prototype.toString=function(){return"GuardsCheckEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+", shouldActivate: "+this.shouldActivate+")"},t}(wp),Dp=function(e){function t(t,n,i,r){var o=e.call(this,t,n)||this;return o.urlAfterRedirects=i,o.state=r,o}return Object(s.c)(t,e),t.prototype.toString=function(){return"ResolveStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},t}(wp),kp=function(e){function t(t,n,i,r){var o=e.call(this,t,n)||this;return o.urlAfterRedirects=i,o.state=r,o}return Object(s.c)(t,e),t.prototype.toString=function(){return"ResolveEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},t}(wp),Pp=function(){function e(e){this.route=e}return e.prototype.toString=function(){return"RouteConfigLoadStart(path: "+this.route.path+")"},e}(),Tp=function(){function e(e){this.route=e}return e.prototype.toString=function(){return"RouteConfigLoadEnd(path: "+this.route.path+")"},e}(),Mp=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ChildActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),jp=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ChildActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),Rp=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),Lp=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),_p=function(){function e(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}return e.prototype.toString=function(){return"Scroll(anchor: '"+this.anchor+"', position: '"+(this.position?this.position[0]+", "+this.position[1]:null)+"')"},e}(),Np=function(){return function(){}}(),Bp="primary",Fp=function(){function e(e){this.params=e||{}}return e.prototype.has=function(e){return this.params.hasOwnProperty(e)},e.prototype.get=function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null},e.prototype.getAll=function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]},Object.defineProperty(e.prototype,"keys",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),e}();function zp(e){return new Fp(e)}var Hp="ngNavigationCancelingError";function Vp(e){var t=Error("NavigationCancelingError: "+e);return t[Hp]=!0,t}function Up(e,t,n){var i=n.path.split("/");if(i.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||i.length<e.length))return null;for(var r={},o=0;o<i.length;o++){var s=i[o],a=e[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}var Wp=function(){return function(e,t){this.routes=e,this.module=t}}();function Gp(e,t){void 0===t&&(t="");for(var n=0;n<e.length;n++){var i=e[n];qp(i,Qp(t,i))}}function qp(e,t){if(!e)throw new Error("\n      Invalid configuration of route '"+t+"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");if(Array.isArray(e))throw new Error("Invalid configuration of route '"+t+"': Array cannot be specified");if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==Bp)throw new Error("Invalid configuration of route '"+t+"': a componentless route without children or loadChildren cannot have a named outlet set");if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '"+t+"': redirectTo and children cannot be used together");if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '"+t+"': redirectTo and loadChildren cannot be used together");if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '"+t+"': children and loadChildren cannot be used together");if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '"+t+"': redirectTo and component cannot be used together");if(e.path&&e.matcher)throw new Error("Invalid configuration of route '"+t+"': path and matcher cannot be used together");if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '"+t+"'. One of the following must be provided: component, redirectTo, children or loadChildren");if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '"+t+"': routes must have either a path or a matcher specified");if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '"+t+"': path cannot start with a slash");if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \""+t+'", redirectTo: "'+e.redirectTo+"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.");if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '"+t+"': pathMatch can only be set to 'prefix' or 'full'");e.children&&Gp(e.children,t)}function Qp(e,t){return t?e||t.path?e&&!t.path?e+"/":!e&&t.path?t.path:e+"/"+t.path:"":e}function Yp(e){var t=e.children&&e.children.map(Yp),n=t?Object(s.a)({},e,{children:t}):Object(s.a)({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Bp&&(n.component=Np),n}function Xp(e,t){var n,i=Object.keys(e),r=Object.keys(t);if(i.length!=r.length)return!1;for(var o=0;o<i.length;o++)if(e[n=i[o]]!==t[n])return!1;return!0}function Zp(e){return Array.prototype.concat.apply([],e)}function Kp(e){return e.length>0?e[e.length-1]:null}function Jp(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function $p(e){return Object(i["\u0275isObservable"])(e)?e:Object(i["\u0275isPromise"])(e)?Object(od.a)(Promise.resolve(e)):Object(rd.a)(e)}function ef(e,t,n){return n?function(e,t){return Xp(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!of(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(var i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(function(n){return t[n]===e[n]})}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,i,r){if(n.segments.length>r.length)return!!of(s=n.segments.slice(0,r.length),r)&&!i.hasChildren();if(n.segments.length===r.length){if(!of(n.segments,r))return!1;for(var o in i.children){if(!n.children[o])return!1;if(!e(n.children[o],i.children[o]))return!1}return!0}var s=r.slice(0,n.segments.length),a=r.slice(n.segments.length);return!!of(n.segments,s)&&!!n.children[Bp]&&t(n.children[Bp],i,a)}(t,n,n.segments)}(e.root,t.root)}var tf=function(){function e(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}return Object.defineProperty(e.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=zp(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return cf.serialize(this)},e}(),nf=function(){function e(e,t){var n=this;this.segments=e,this.children=t,this.parent=null,Jp(t,function(e,t){return e.parent=n})}return e.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(e.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return hf(this)},e}(),rf=function(){function e(e,t){this.path=e,this.parameters=t}return Object.defineProperty(e.prototype,"parameterMap",{get:function(){return this._parameterMap||(this._parameterMap=zp(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return mf(this)},e}();function of(e,t){return e.length===t.length&&e.every(function(e,n){return e.path===t[n].path})}function sf(e,t){var n=[];return Jp(e.children,function(e,i){i===Bp&&(n=n.concat(t(e,i)))}),Jp(e.children,function(e,i){i!==Bp&&(n=n.concat(t(e,i)))}),n}var af=function(){return function(){}}(),lf=function(){function e(){}return e.prototype.parse=function(e){var t=new Cf(e);return new tf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())},e.prototype.serialize=function(e){var t,n;return"/"+function e(t,n){if(!t.hasChildren())return hf(t);if(n){var i=t.children[Bp]?e(t.children[Bp],!1):"",r=[];return Jp(t.children,function(t,n){n!==Bp&&r.push(n+":"+e(t,!1))}),r.length>0?i+"("+r.join("//")+")":i}var o=sf(t,function(n,i){return i===Bp?[e(t.children[Bp],!1)]:[i+":"+e(n,!1)]});return hf(t)+"/("+o.join("//")+")"}(e.root,!0)+(t=e.queryParams,(n=Object.keys(t).map(function(e){var n=t[e];return Array.isArray(n)?n.map(function(t){return uf(e)+"="+uf(t)}).join("&"):uf(e)+"="+uf(n)})).length?"?"+n.join("&"):"")+("string"==typeof e.fragment?"#"+encodeURI(e.fragment):"")},e}(),cf=new lf;function hf(e){return e.segments.map(function(e){return mf(e)}).join("/")}function df(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uf(e){return df(e).replace(/%3B/gi,";")}function pf(e){return df(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ff(e){return decodeURIComponent(e)}function gf(e){return ff(e.replace(/\+/g,"%20"))}function mf(e){return""+pf(e.path)+(t=e.parameters,Object.keys(t).map(function(e){return";"+pf(e)+"="+pf(t[e])}).join(""));var t}var yf=/^[^\/()?;=#]+/;function vf(e){var t=e.match(yf);return t?t[0]:""}var bf=/^[^=?&#]+/,wf=/^[^?&#]+/,Cf=function(){function e(e){this.url=e,this.remaining=e}return e.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nf([],{}):new nf([],this.parseChildren())},e.prototype.parseQueryParams=function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e},e.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null},e.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[Bp]=new nf(e,t)),n},e.prototype.parseSegment=function(){var e=vf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(e),new rf(ff(e),this.parseMatrixParams())},e.prototype.parseMatrixParams=function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e},e.prototype.parseParam=function(e){var t=vf(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var i=vf(this.remaining);i&&this.capture(n=i)}e[ff(t)]=ff(n)}},e.prototype.parseQueryParam=function(e){var t,n=(t=this.remaining.match(bf))?t[0]:"";if(n){this.capture(n);var i="";if(this.consumeOptional("=")){var r=function(e){var t=e.match(wf);return t?t[0]:""}(this.remaining);r&&this.capture(i=r)}var o=gf(n),s=gf(i);if(e.hasOwnProperty(o)){var a=e[o];Array.isArray(a)||(e[o]=a=[a]),a.push(s)}else e[o]=s}},e.prototype.parseParens=function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=vf(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error("Cannot parse url '"+this.url+"'");var r=void 0;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):e&&(r=Bp);var o=this.parseChildren();t[r]=1===Object.keys(o).length?o[Bp]:new nf([],o),this.consumeOptional("//")}return t},e.prototype.peekStartsWith=function(e){return this.remaining.startsWith(e)},e.prototype.consumeOptional=function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)},e.prototype.capture=function(e){if(!this.consumeOptional(e))throw new Error('Expected "'+e+'".')},e}(),xf=function(){function e(e){this._root=e}return Object.defineProperty(e.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),e.prototype.parent=function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null},e.prototype.children=function(e){var t=Af(e,this._root);return t?t.children.map(function(e){return e.value}):[]},e.prototype.firstChild=function(e){var t=Af(e,this._root);return t&&t.children.length>0?t.children[0].value:null},e.prototype.siblings=function(e){var t=Sf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(function(e){return e.value}).filter(function(t){return t!==e})},e.prototype.pathFromRoot=function(e){return Sf(e,this._root).map(function(e){return e.value})},e}();function Af(e,t){var n,i;if(e===t.value)return t;try{for(var r=Object(s.h)(t.children),o=r.next();!o.done;o=r.next()){var a=Af(e,o.value);if(a)return a}}catch(l){n={error:l}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return null}function Sf(e,t){var n,i;if(e===t.value)return[t];try{for(var r=Object(s.h)(t.children),o=r.next();!o.done;o=r.next()){var a=Sf(e,o.value);if(a.length)return a.unshift(t),a}}catch(l){n={error:l}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return[]}var Of=function(){function e(e,t){this.value=e,this.children=t}return e.prototype.toString=function(){return"TreeNode("+this.value+")"},e}();function Ef(e){var t={};return e&&e.children.forEach(function(e){return t[e.value.outlet]=e}),t}var If=function(e){function t(t,n){var i=e.call(this,t)||this;return i.snapshot=n,jf(i,t),i}return Object(s.c)(t,e),t.prototype.toString=function(){return this.snapshot.toString()},t}(xf);function Df(e,t){var n=function(e,t){var n=new Tf([],{},{},"",{},Bp,t,null,e.root,-1,{});return new Mf("",new Of(n,[]))}(e,t),i=new sd.a([new rf("",{})]),r=new sd.a({}),o=new sd.a({}),s=new sd.a({}),a=new sd.a(""),l=new kf(i,r,s,a,o,Bp,t,n.root);return l.snapshot=n.root,new If(new Of(l,[]),n)}var kf=function(){function e(e,t,n,i,r,o,s,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=s,this._futureSnapshot=a}return Object.defineProperty(e.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Object(dd.a)(function(e){return zp(e)}))),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(dd.a)(function(e){return zp(e)}))),this._queryParamMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},e}();function Pf(e,t){void 0===t&&(t="emptyOnly");var n=e.pathFromRoot,i=0;if("always"!==t)for(i=n.length-1;i>=1;){var r=n[i],o=n[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function(e){return e.reduce(function(e,t){return{params:Object(s.a)({},e.params,t.params),data:Object(s.a)({},e.data,t.data),resolve:Object(s.a)({},e.resolve,t._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(i))}var Tf=function(){function e(e,t,n,i,r,o,s,a,l,c,h){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=c,this._resolve=h}return Object.defineProperty(e.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=zp(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=zp(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Route(url:'"+this.url.map(function(e){return e.toString()}).join("/")+"', path:'"+(this.routeConfig?this.routeConfig.path:"")+"')"},e}(),Mf=function(e){function t(t,n){var i=e.call(this,n)||this;return i.url=t,jf(i,n),i}return Object(s.c)(t,e),t.prototype.toString=function(){return Rf(this._root)},t}(xf);function jf(e,t){t.value._routerState=e,t.children.forEach(function(t){return jf(e,t)})}function Rf(e){var t=e.children.length>0?" { "+e.children.map(Rf).join(", ")+" } ":"";return""+e.value+t}function Lf(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Xp(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Xp(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!Xp(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Xp(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function _f(e,t){var n,i;return Xp(e.params,t.params)&&of(n=e.url,i=t.url)&&n.every(function(e,t){return Xp(e.parameters,i[t].parameters)})&&!(!e.parent!=!t.parent)&&(!e.parent||_f(e.parent,t.parent))}function Nf(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Bf(e,t,n,i,r){var o={};return i&&Jp(i,function(e,t){o[t]=Array.isArray(e)?e.map(function(e){return""+e}):""+e}),new tf(n.root===e?t:function e(t,n,i){var r={};return Jp(t.children,function(t,o){r[o]=t===n?i:e(t,n,i)}),new nf(t.segments,r)}(n.root,e,t),o,r)}var Ff=function(){function e(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Nf(n[0]))throw new Error("Root segment cannot have matrix parameters");var i=n.find(function(e){return"object"==typeof e&&null!=e&&e.outlets});if(i&&i!==Kp(n))throw new Error("{outlets:{}} has to be the last command")}return e.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]},e}(),zf=function(){return function(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}();function Hf(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets[Bp]:""+e}function Vf(e,t,n){if(e||(e=new nf([],{})),0===e.segments.length&&e.hasChildren())return Uf(e,t,n);var i=function(e,t,n){for(var i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};r<e.segments.length;){if(i>=n.length)return o;var s=e.segments[r],a=Hf(n[i]),l=i<n.length-1?n[i+1]:null;if(r>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!Qf(a,l,s))return o;i+=2}else{if(!Qf(a,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){var o=new nf(e.segments.slice(0,i.pathIndex),{});return o.children[Bp]=new nf(e.segments.slice(i.pathIndex),e.children),Uf(o,0,r)}return i.match&&0===r.length?new nf(e.segments,{}):i.match&&!e.hasChildren()?Wf(e,t,n):i.match?Uf(e,0,r):Wf(e,t,n)}function Uf(e,t,n){if(0===n.length)return new nf(e.segments,{});var i=function(e){var t,n;return"object"!=typeof e[0]?((t={})[Bp]=e,t):void 0===e[0].outlets?((n={})[Bp]=e,n):e[0].outlets}(n),r={};return Jp(i,function(n,i){null!==n&&(r[i]=Vf(e.children[i],t,n))}),Jp(e.children,function(e,t){void 0===i[t]&&(r[t]=e)}),new nf(e.segments,r)}function Wf(e,t,n){for(var i=e.segments.slice(0,t),r=0;r<n.length;){if("object"==typeof n[r]&&void 0!==n[r].outlets){var o=Gf(n[r].outlets);return new nf(i,o)}if(0===r&&Nf(n[0]))i.push(new rf(e.segments[t].path,n[0])),r++;else{var s=Hf(n[r]),a=r<n.length-1?n[r+1]:null;s&&a&&Nf(a)?(i.push(new rf(s,qf(a))),r+=2):(i.push(new rf(s,{})),r++)}}return new nf(i,{})}function Gf(e){var t={};return Jp(e,function(e,n){null!==e&&(t[n]=Wf(new nf([],{}),0,e))}),t}function qf(e){var t={};return Jp(e,function(e,n){return t[n]=""+e}),t}function Qf(e,t,n){return e==n.path&&Xp(t,n.parameters)}var Yf=function(){function e(e,t,n,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=i}return e.prototype.activate=function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Lf(this.futureState.root),this.activateChildRoutes(t,n,e)},e.prototype.deactivateChildRoutes=function(e,t,n){var i=this,r=Ef(t);e.children.forEach(function(e){var t=e.value.outlet;i.deactivateRoutes(e,r[t],n),delete r[t]}),Jp(r,function(e,t){i.deactivateRouteAndItsChildren(e,n)})},e.prototype.deactivateRoutes=function(e,t,n){var i=e.value,r=t?t.value:null;if(i===r)if(i.component){var o=n.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else r&&this.deactivateRouteAndItsChildren(t,n)},e.prototype.deactivateRouteAndItsChildren=function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)},e.prototype.detachAndStoreRouteSubtree=function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var i=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:i,route:e,contexts:r})}},e.prototype.deactivateRouteAndOutlet=function(e,t){var n=this,i=t.getContext(e.value.outlet);if(i){var r=Ef(e),o=e.value.component?i.children:t;Jp(r,function(e,t){return n.deactivateRouteAndItsChildren(e,o)}),i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated())}},e.prototype.activateChildRoutes=function(e,t,n){var i=this,r=Ef(t);e.children.forEach(function(e){i.activateRoutes(e,r[e.value.outlet],n),i.forwardEvent(new Lp(e.value.snapshot))}),e.children.length&&this.forwardEvent(new jp(e.value.snapshot))},e.prototype.activateRoutes=function(e,t,n){var i=e.value,r=t?t.value:null;if(Lf(i),i===r)if(i.component){var o=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(i.component)if(o=n.getOrCreateContext(i.outlet),this.routeReuseStrategy.shouldAttach(i.snapshot)){var s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),Xf(s.route)}else{var a=function(e){for(var t=i.snapshot.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=l,o.outlet&&o.outlet.activateWith(i,l),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,n)},e}();function Xf(e){Lf(e.value),e.children.forEach(Xf)}function Zf(e){return"function"==typeof e}function Kf(e){return e instanceof tf}var Jf=function(){return function(e){this.segmentGroup=e||null}}(),$f=function(){return function(e){this.urlTree=e}}();function eg(e){return new ed.a(function(t){return t.error(new Jf(e))})}function tg(e){return new ed.a(function(t){return t.error(new $f(e))})}function ng(e){return new ed.a(function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '"+e+"'"))})}var ig=function(){function e(e,t,n,r,o){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(i.NgModuleRef)}return e.prototype.apply=function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Bp).pipe(Object(dd.a)(function(t){return e.createUrlTree(t,e.urlTree.queryParams,e.urlTree.fragment)})).pipe(_d(function(t){if(t instanceof $f)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof Jf)throw e.noMatchError(t);throw t}))},e.prototype.match=function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,Bp).pipe(Object(dd.a)(function(n){return t.createUrlTree(n,e.queryParams,e.fragment)})).pipe(_d(function(e){if(e instanceof Jf)throw t.noMatchError(e);throw e}))},e.prototype.noMatchError=function(e){return new Error("Cannot match any routes. URL Segment: '"+e.segmentGroup+"'")},e.prototype.createUrlTree=function(e,t,n){var i,r=e.segments.length>0?new nf([],((i={})[Bp]=e,i)):e;return new tf(r,t,n)},e.prototype.expandSegmentGroup=function(e,t,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(Object(dd.a)(function(e){return new nf([],e)})):this.expandSegment(e,n,t,n.segments,i,!0)},e.prototype.expandChildren=function(e,t,n){var i=this;return function(n,r){if(0===Object.keys(n).length)return Object(rd.a)({});var o=[],s=[],a={};return Jp(n,function(n,r){var l,c,h=(l=r,c=n,i.expandSegmentGroup(e,t,c,l)).pipe(Object(dd.a)(function(e){return a[r]=e}));r===Bp?o.push(h):s.push(h)}),rd.a.apply(null,o.concat(s)).pipe(Object(ud.a)(),Md(),Object(dd.a)(function(){return a}))}(n.children)},e.prototype.expandSegment=function(e,t,n,i,r,o){var a=this;return rd.a.apply(void 0,Object(s.g)(n)).pipe(Object(dd.a)(function(s){return a.expandSegmentAgainstRoute(e,t,n,s,i,r,o).pipe(_d(function(e){if(e instanceof Jf)return Object(rd.a)(null);throw e}))}),Object(ud.a)(),Vd(function(e){return!!e}),_d(function(e,n){if(e instanceof ad.a||"EmptyError"===e.name){if(a.noLeftoversInUrl(t,i,r))return Object(rd.a)(new nf([],{}));throw new Jf(t)}throw e}))},e.prototype.noLeftoversInUrl=function(e,t,n){return 0===t.length&&!e.children[n]},e.prototype.expandSegmentAgainstRoute=function(e,t,n,i,r,o,s){return ag(i)!==o?eg(t):void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,r):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,i,r,o):eg(t)},e.prototype.expandSegmentAgainstRouteUsingRedirect=function(e,t,n,i,r,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,r,o)},e.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(e,t,n,i){var r=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?tg(o):this.lineralizeSegments(n,o).pipe(Object(Ud.a)(function(n){var o=new nf(n,{});return r.expandSegment(e,o,t,n,i,!1)}))},e.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(e,t,n,i,r,o){var s=this,a=rg(t,i,r),l=a.consumedSegments,c=a.lastChild,h=a.positionalParamSegments;if(!a.matched)return eg(t);var d=this.applyRedirectCommands(l,i.redirectTo,h);return i.redirectTo.startsWith("/")?tg(d):this.lineralizeSegments(i,d).pipe(Object(Ud.a)(function(i){return s.expandSegment(e,t,n,i.concat(r.slice(c)),o,!1)}))},e.prototype.matchSegmentAgainstRoute=function(e,t,n,i){var r=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(Object(dd.a)(function(e){return n._loadedConfig=e,new nf(i,{})})):Object(rd.a)(new nf(i,{}));var o=rg(t,n,i),a=o.consumedSegments,l=o.lastChild;if(!o.matched)return eg(t);var c=i.slice(l);return this.getChildConfig(e,n,i).pipe(Object(Ud.a)(function(e){var n=e.module,i=e.routes,o=function(e,t,n,i){return n.length>0&&function(e,t,n){return i.some(function(n){return sg(e,t,n)&&ag(n)!==Bp})}(e,n)?{segmentGroup:og(new nf(t,function(e,t){var n,i,r={};r[Bp]=t;try{for(var o=Object(s.h)(e),a=o.next();!a.done;a=o.next()){var l=a.value;""===l.path&&ag(l)!==Bp&&(r[ag(l)]=new nf([],{}))}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r}(i,new nf(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return i.some(function(n){return sg(e,t,n)})}(e,n)?{segmentGroup:og(new nf(e.segments,function(e,t,n,i){var r,o,a={};try{for(var l=Object(s.h)(n),c=l.next();!c.done;c=l.next()){var h=c.value;sg(e,t,h)&&!i[ag(h)]&&(a[ag(h)]=new nf([],{}))}}catch(d){r={error:d}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}return Object(s.a)({},i,a)}(e,n,i,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,a,c,i),l=o.segmentGroup,h=o.slicedSegments;return 0===h.length&&l.hasChildren()?r.expandChildren(n,i,l).pipe(Object(dd.a)(function(e){return new nf(a,e)})):0===i.length&&0===h.length?Object(rd.a)(new nf(a,{})):r.expandSegment(n,l,i,h,Bp,!0).pipe(Object(dd.a)(function(e){return new nf(a.concat(e.segments),e.children)}))}))},e.prototype.getChildConfig=function(e,t,n){var i=this;return t.children?Object(rd.a)(new Wp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Object(rd.a)(t._loadedConfig):function(e,t,n){var i,r=t.canLoad;return r&&0!==r.length?Object(od.a)(r).pipe(Object(dd.a)(function(i){var r,o=e.get(i);if(function(e){return e&&Zf(e.canLoad)}(o))r=o.canLoad(t,n);else{if(!Zf(o))throw new Error("Invalid CanLoad guard");r=o(t,n)}return $p(r)})).pipe(Object(ud.a)(),(i=function(e){return!0===e},function(e){return e.lift(new Wd(i,void 0,e))})):Object(rd.a)(!0)}(e.injector,t,n).pipe(Object(Ud.a)(function(n){return n?i.configLoader.load(e.injector,t).pipe(Object(dd.a)(function(e){return t._loadedConfig=e,e})):function(e){return new ed.a(function(t){return t.error(Vp("Cannot load children because the guard of the route \"path: '"+e.path+"'\" returned false"))})}(t)})):Object(rd.a)(new Wp([],e))},e.prototype.lineralizeSegments=function(e,t){for(var n=[],i=t.root;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return Object(rd.a)(n);if(i.numberOfChildren>1||!i.children[Bp])return ng(e.redirectTo);i=i.children[Bp]}},e.prototype.applyRedirectCommands=function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)},e.prototype.applyRedirectCreatreUrlTree=function(e,t,n,i){var r=this.createSegmentGroup(e,t.root,n,i);return new tf(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)},e.prototype.createQueryParams=function(e,t){var n={};return Jp(e,function(e,i){if("string"==typeof e&&e.startsWith(":")){var r=e.substring(1);n[i]=t[r]}else n[i]=e}),n},e.prototype.createSegmentGroup=function(e,t,n,i){var r=this,o=this.createSegments(e,t.segments,n,i),s={};return Jp(t.children,function(t,o){s[o]=r.createSegmentGroup(e,t,n,i)}),new nf(o,s)},e.prototype.createSegments=function(e,t,n,i){var r=this;return t.map(function(t){return t.path.startsWith(":")?r.findPosParam(e,t,i):r.findOrReturn(t,n)})},e.prototype.findPosParam=function(e,t,n){var i=n[t.path.substring(1)];if(!i)throw new Error("Cannot redirect to '"+e+"'. Cannot find '"+t.path+"'.");return i},e.prototype.findOrReturn=function(e,t){var n,i,r=0;try{for(var o=Object(s.h)(t),a=o.next();!a.done;a=o.next()){var l=a.value;if(l.path===e.path)return t.splice(r),l;r++}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return e},e}();function rg(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var i=(t.matcher||Up)(n,e,t);return i?{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,positionalParamSegments:i.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function og(e){if(1===e.numberOfChildren&&e.children[Bp]){var t=e.children[Bp];return new nf(e.segments.concat(t.segments),t.children)}return e}function sg(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function ag(e){return e.outlet||Bp}var lg=function(){return function(e){this.path=e,this.route=this.path[this.path.length-1]}}(),cg=function(){return function(e,t){this.component=e,this.route=t}}();function hg(e,t,n){var i=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(i?i.module.injector:n).get(e)}function dg(e,t,n,i,r){void 0===r&&(r={canDeactivateChecks:[],canActivateChecks:[]});var o=Ef(t);return e.children.forEach(function(e){!function(e,t,n,i,r){void 0===r&&(r={canDeactivateChecks:[],canActivateChecks:[]});var o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){var l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!of(e.url,t.url);case"pathParamsOrQueryParamsChange":return!of(e.url,t.url)||!Xp(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_f(e,t)||!Xp(e.queryParams,t.queryParams);case"paramsChange":default:return!_f(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new lg(i)):(o.data=s.data,o._resolvedData=s._resolvedData),dg(e,t,o.component?a?a.children:null:n,i,r),l&&r.canDeactivateChecks.push(new cg(a&&a.outlet&&a.outlet.component||null,s))}else s&&ug(t,a,r),r.canActivateChecks.push(new lg(i)),dg(e,null,o.component?a?a.children:null:n,i,r)}(e,o[e.value.outlet],n,i.concat([e.value]),r),delete o[e.value.outlet]}),Jp(o,function(e,t){return ug(e,n.getContext(t),r)}),r}function ug(e,t,n){var i=Ef(e),r=e.value;Jp(i,function(e,i){ug(e,r.component?t?t.children.getContext(i):null:t,n)}),n.canDeactivateChecks.push(new cg(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}var pg=Symbol("INITIAL_VALUE");function fg(){return qd(function(e){return ld.a.apply(void 0,Object(s.g)(e.map(function(e){return e.pipe(Fd(1),$d(pg))}))).pipe(eu(function(e,t){var n=!1;return t.reduce(function(e,i,r){if(e!==pg)return e;if(i===pg&&(n=!0),!n){if(!1===i)return i;if(r===t.length-1||Kf(i))return i}return e},e)},pg),fd(function(e){return e!==pg}),Object(dd.a)(function(e){return Kf(e)?e:!0===e}),Fd(1))})}function gg(e,t){return null!==e&&t&&t(new Rp(e)),Object(rd.a)(!0)}function mg(e,t){return null!==e&&t&&t(new Mp(e)),Object(rd.a)(!0)}function yg(e,t,n){var i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return Object(rd.a)(!0);var r=i.map(function(i){return Object(cd.a)(function(){var r,o=hg(i,t,n);if(function(e){return e&&Zf(e.canActivate)}(o))r=$p(o.canActivate(t,e));else{if(!Zf(o))throw new Error("Invalid CanActivate guard");r=$p(o(t,e))}return r.pipe(Vd())})});return Object(rd.a)(r).pipe(fg())}function vg(e,t,n){var i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)}).filter(function(e){return null!==e}).map(function(t){return Object(cd.a)(function(){var r=t.guards.map(function(r){var o,s=hg(r,t.node,n);if(function(e){return e&&Zf(e.canActivateChild)}(s))o=$p(s.canActivateChild(i,e));else{if(!Zf(s))throw new Error("Invalid CanActivateChild guard");o=$p(s(i,e))}return o.pipe(Vd())});return Object(rd.a)(r).pipe(fg())})});return Object(rd.a)(r).pipe(fg())}var bg=function(){return function(){}}(),wg=function(){function e(e,t,n,i,r,o){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=o}return e.prototype.recognize=function(){try{var e=Ag(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Bp),n=new Tf([],Object.freeze({}),Object.freeze(Object(s.a)({},this.urlTree.queryParams)),this.urlTree.fragment,{},Bp,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Of(n,t),r=new Mf(this.url,i);return this.inheritParamsAndData(r._root),Object(rd.a)(r)}catch(o){return new ed.a(function(e){return e.error(o)})}},e.prototype.inheritParamsAndData=function(e){var t=this,n=e.value,i=Pf(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),e.children.forEach(function(e){return t.inheritParamsAndData(e)})},e.prototype.processSegmentGroup=function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)},e.prototype.processChildren=function(e,t){var n,i=this,r=sf(t,function(t,n){return i.processSegmentGroup(e,t,n)});return n={},r.forEach(function(e){var t=n[e.value.outlet];if(t){var i=t.url.map(function(e){return e.toString()}).join("/"),r=e.value.url.map(function(e){return e.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+i+"' and '"+r+"'.")}n[e.value.outlet]=e.value}),r.sort(function(e,t){return e.value.outlet===Bp?-1:t.value.outlet===Bp?1:e.value.outlet.localeCompare(t.value.outlet)}),r},e.prototype.processSegment=function(e,t,n,i){var r,o;try{for(var a=Object(s.h)(e),l=a.next();!l.done;l=a.next()){var c=l.value;try{return this.processSegmentAgainstRoute(c,t,n,i)}catch(h){if(!(h instanceof bg))throw h}}}catch(d){r={error:d}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}if(this.noLeftoversInUrl(t,n,i))return[];throw new bg},e.prototype.noLeftoversInUrl=function(e,t,n){return 0===t.length&&!e.children[n]},e.prototype.processSegmentAgainstRoute=function(e,t,n,i){if(e.redirectTo)throw new bg;if((e.outlet||Bp)!==i)throw new bg;var r,o=[],a=[];if("**"===e.path){var l=n.length>0?Kp(n).parameters:{};r=new Tf(n,l,Object.freeze(Object(s.a)({},this.urlTree.queryParams)),this.urlTree.fragment,Eg(e),i,e.component,e,Cg(t),xg(t)+n.length,Ig(e))}else{var c=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new bg;return{consumedSegments:[],lastChild:0,parameters:{}}}var i=(t.matcher||Up)(n,e,t);if(!i)throw new bg;var r={};Jp(i.posParams,function(e,t){r[t]=e.path});var o=i.consumed.length>0?Object(s.a)({},r,i.consumed[i.consumed.length-1].parameters):r;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o}}(t,e,n);o=c.consumedSegments,a=n.slice(c.lastChild),r=new Tf(o,c.parameters,Object.freeze(Object(s.a)({},this.urlTree.queryParams)),this.urlTree.fragment,Eg(e),i,e.component,e,Cg(t),xg(t)+o.length,Ig(e))}var h=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),d=Ag(t,o,a,h,this.relativeLinkResolution),u=d.segmentGroup,p=d.slicedSegments;if(0===p.length&&u.hasChildren()){var f=this.processChildren(h,u);return[new Of(r,f)]}if(0===h.length&&0===p.length)return[new Of(r,[])];var g=this.processSegment(h,u,p,Bp);return[new Of(r,g)]},e}();function Cg(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function xg(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Ag(e,t,n,i,r){if(n.length>0&&function(e,t,n){return i.some(function(n){return Sg(e,t,n)&&Og(n)!==Bp})}(e,n)){var o=new nf(t,function(e,t,n,i){var r,o,a={};a[Bp]=i,i._sourceSegment=e,i._segmentIndexShift=t.length;try{for(var l=Object(s.h)(n),c=l.next();!c.done;c=l.next()){var h=c.value;if(""===h.path&&Og(h)!==Bp){var d=new nf([],{});d._sourceSegment=e,d._segmentIndexShift=t.length,a[Og(h)]=d}}}catch(u){r={error:u}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}return a}(e,t,i,new nf(n,e.children)));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return i.some(function(n){return Sg(e,t,n)})}(e,n)){var a=new nf(e.segments,function(e,t,n,i,r,o){var a,l,c={};try{for(var h=Object(s.h)(i),d=h.next();!d.done;d=h.next()){var u=d.value;if(Sg(e,n,u)&&!r[Og(u)]){var p=new nf([],{});p._sourceSegment=e,p._segmentIndexShift="legacy"===o?e.segments.length:t.length,c[Og(u)]=p}}}catch(f){a={error:f}}finally{try{d&&!d.done&&(l=h.return)&&l.call(h)}finally{if(a)throw a.error}}return Object(s.a)({},r,c)}(e,t,n,i,e.children,r));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:n}}var l=new nf(e.segments,e.children);return l._sourceSegment=e,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:n}}function Sg(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Og(e){return e.outlet||Bp}function Eg(e){return e.data||{}}function Ig(e){return e.resolve||{}}function Dg(e,t,n,i){var r=hg(e,t,i);return $p(r.resolve?r.resolve(t,n):r(t,n))}function kg(e){return function(t){return t.pipe(qd(function(t){var n=e(t);return n?Object(od.a)(n).pipe(Object(dd.a)(function(){return t})):Object(od.a)([t])}))}}var Pg=function(){return function(){}}(),Tg=function(){function e(){}return e.prototype.shouldDetach=function(e){return!1},e.prototype.store=function(e,t){},e.prototype.shouldAttach=function(e){return!1},e.prototype.retrieve=function(e){return null},e.prototype.shouldReuseRoute=function(e,t){return e.routeConfig===t.routeConfig},e}(),Mg=new i.InjectionToken("ROUTES"),jg=function(){function e(e,t,n,i){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=i}return e.prototype.load=function(e,t){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(Object(dd.a)(function(i){n.onLoadEndListener&&n.onLoadEndListener(t);var r=i.create(e);return new Wp(Zp(r.injector.get(Mg)).map(Yp),r)}))},e.prototype.loadModuleFactory=function(e){var t=this;return"string"==typeof e?Object(od.a)(this.loader.load(e)):$p(e()).pipe(Object(Ud.a)(function(e){return e instanceof i.NgModuleFactory?Object(rd.a)(e):Object(od.a)(t.compiler.compileModuleAsync(e))}))},e}(),Rg=function(){return function(){}}(),Lg=function(){function e(){}return e.prototype.shouldProcessUrl=function(e){return!0},e.prototype.extract=function(e){return e},e.prototype.merge=function(e,t){return e},e}();function _g(e){throw e}function Ng(e,t,n){return t.parse("/")}function Bg(e,t){return Object(rd.a)(null)}var Fg=function(){function e(e,t,n,r,s,a,l,c){var h=this;this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new o.a,this.errorHandler=_g,this.malformedUriErrorHandler=Ng,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Bg,afterPreactivation:Bg},this.urlHandlingStrategy=new Lg,this.routeReuseStrategy=new Tg,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=s.get(i.NgModuleRef),this.console=s.get(i["\u0275Console"]);var d=s.get(i.NgZone);this.isNgZoneEnabled=d instanceof i.NgZone,this.resetConfig(c),this.currentUrlTree=new tf(new nf([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new jg(a,l,function(e){return h.triggerEvent(new Pp(e))},function(e){return h.triggerEvent(new Tp(e))}),this.routerState=Df(this.currentUrlTree,this.rootComponentType),this.transitions=new sd.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return e.prototype.setupNavigations=function(e){var t=this,n=this.events;return e.pipe(fd(function(e){return 0!==e.id}),Object(dd.a)(function(e){return Object(s.a)({},e,{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})}),qd(function(e){var i,r,o,a=!1,l=!1;return Object(rd.a)(e).pipe(Ad(function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object(s.a)({},t.lastSuccessfulNavigation,{previousNavigation:null}):null}}),qd(function(e){var i,r,o,a,l=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||l)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Object(rd.a)(e).pipe(qd(function(e){var i=t.transitions.getValue();return n.next(new Cp(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),i!==t.transitions.getValue()?hd.a:[e]}),qd(function(e){return Promise.resolve(e)}),(i=t.ngModule.injector,r=t.configLoader,o=t.urlSerializer,a=t.config,function(e){return e.pipe(qd(function(e){return function(t,n,i,r,o){return new ig(t,n,i,e.extractedUrl,o).apply()}(i,r,o,0,a).pipe(Object(dd.a)(function(t){return Object(s.a)({},e,{urlAfterRedirects:t})}))}))}),Ad(function(e){t.currentNavigation=Object(s.a)({},t.currentNavigation,{finalUrl:e.urlAfterRedirects})}),function(e,n,i,r,o){return function(i){return i.pipe(Object(Ud.a)(function(i){return function(e,t,n,i,r,o){return void 0===r&&(r="emptyOnly"),void 0===o&&(o="legacy"),new wg(e,t,n,i,r,o).recognize()}(e,n,i.urlAfterRedirects,(a=i.urlAfterRedirects,t.serializeUrl(a)),r,o).pipe(Object(dd.a)(function(e){return Object(s.a)({},i,{targetSnapshot:e})}));var a}))}}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),Ad(function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id),t.browserUrlTree=e.urlAfterRedirects)}),Ad(function(e){var i=new Op(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(i)}));if(l&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var c=e.extractedUrl,h=e.source,d=e.restoredState,u=e.extras,p=new Cp(e.id,t.serializeUrl(c),h,d);n.next(p);var f=Df(c,t.rootComponentType).snapshot;return Object(rd.a)(Object(s.a)({},e,{targetSnapshot:f,urlAfterRedirects:c,extras:Object(s.a)({},u,{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,e.resolve(null),hd.a}),kg(function(e){var n=e.extras;return t.hooks.beforePreactivation(e.targetSnapshot,{navigationId:e.id,appliedUrlTree:e.extractedUrl,rawUrlTree:e.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})}),Ad(function(e){var n=new Ep(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),Object(dd.a)(function(e){return Object(s.a)({},e,{guards:(n=e.targetSnapshot,i=e.currentSnapshot,r=t.rootContexts,o=n._root,dg(o,i?i._root:null,r,[o.value]))});var n,i,r,o}),function(e,t){return function(n){return n.pipe(Object(Ud.a)(function(n){var i=n.targetSnapshot,r=n.currentSnapshot,o=n.guards,a=o.canActivateChecks,l=o.canDeactivateChecks;return 0===l.length&&0===a.length?Object(rd.a)(Object(s.a)({},n,{guardsResult:!0})):function(e,t,n,i){return Object(od.a)(e).pipe(Object(Ud.a)(function(e){return function(e,t,n,i,r){var o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(rd.a)(!0);var s=o.map(function(o){var s,a=hg(o,t,r);if(function(e){return e&&Zf(e.canDeactivate)}(a))s=$p(a.canDeactivate(e,t,n,i));else{if(!Zf(a))throw new Error("Invalid CanDeactivate guard");s=$p(a(e,t,n,i))}return s.pipe(Vd())});return Object(rd.a)(s).pipe(fg())}(e.component,e.route,n,t,i)}),Vd(function(e){return!0!==e},!0))}(l,i,r,e).pipe(Object(Ud.a)(function(n){return n&&"boolean"==typeof n?function(e,t,n,i){return Object(od.a)(t).pipe(iu(function(t){return Object(od.a)([mg(t.route.parent,i),gg(t.route,i),vg(e,t.path,n),yg(e,t.route,n)]).pipe(Object(ud.a)(),Vd(function(e){return!0!==e},!0))}),Vd(function(e){return!0!==e},!0))}(i,a,e,t):Object(rd.a)(n)}),Object(dd.a)(function(e){return Object(s.a)({},n,{guardsResult:e})}))}))}}(t.ngModule.injector,function(e){return t.triggerEvent(e)}),Ad(function(e){if(Kf(e.guardsResult)){var n=Vp('Redirecting to "'+t.serializeUrl(e.guardsResult)+'"');throw n.url=e.guardsResult,n}}),Ad(function(e){var n=new Ip(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(n)}),fd(function(e){if(!e.guardsResult){t.resetUrlToCurrentUrlTree();var i=new Ap(e.id,t.serializeUrl(e.extractedUrl),"");return n.next(i),e.resolve(!1),!1}return!0}),kg(function(e){if(e.guards.canActivateChecks.length)return Object(rd.a)(e).pipe(Ad(function(e){var n=new Dp(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),(n=t.paramsInheritanceStrategy,i=t.ngModule.injector,function(e){return e.pipe(Object(Ud.a)(function(e){var t=e.targetSnapshot,r=e.guards.canActivateChecks;return r.length?Object(od.a)(r).pipe(iu(function(e){return function(e,n,i,r){return function(e,t,n,i){var r=Object.keys(e);if(0===r.length)return Object(rd.a)({});if(1===r.length){var o=r[0];return Dg(e[o],t,n,i).pipe(Object(dd.a)(function(e){var t;return(t={})[o]=e,t}))}var s={};return Object(od.a)(r).pipe(Object(Ud.a)(function(r){return Dg(e[r],t,n,i).pipe(Object(dd.a)(function(e){return s[r]=e,e}))})).pipe(Md(),Object(dd.a)(function(){return s}))}(e._resolve,e,t,r).pipe(Object(dd.a)(function(t){return e._resolvedData=t,e.data=Object(s.a)({},e.data,Pf(e,i).resolve),null}))}(e.route,0,n,i)}),function(e,t){return arguments.length>=2?function(t){return Object(ru.a)(eu(e,void 0),vd(1),Dd(void 0))(t)}:function(t){return Object(ru.a)(eu(function(t,n,i){return e(t)}),vd(1))(t)}}(function(e,t){return e}),Object(dd.a)(function(t){return e})):Object(rd.a)(e)}))}),Ad(function(e){var n=new kp(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}));var n,i}),kg(function(e){var n=e.extras;return t.hooks.afterPreactivation(e.targetSnapshot,{navigationId:e.id,appliedUrlTree:e.extractedUrl,rawUrlTree:e.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})}),Object(dd.a)(function(e){var n,i,r,o=(r=function e(t,n,i){if(i&&t.shouldReuseRoute(n.value,i.value.snapshot)){(c=i.value)._futureSnapshot=n.value;var r=function(t,n,i){return n.children.map(function(n){var r,o;try{for(var a=Object(s.h)(i.children),l=a.next();!l.done;l=a.next()){var c=l.value;if(t.shouldReuseRoute(c.value.snapshot,n.value))return e(t,n,c)}}catch(h){r={error:h}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return e(t,n)})}(t,n,i);return new Of(c,r)}var o=t.retrieve(n.value);if(o){var a=o.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(var i=0;i<t.children.length;++i)e(t.children[i],n.children[i])}(n,a),a}var l,c=new kf(new sd.a((l=n.value).url),new sd.a(l.params),new sd.a(l.queryParams),new sd.a(l.fragment),new sd.a(l.data),l.outlet,l.component,l);return r=n.children.map(function(n){return e(t,n)}),new Of(c,r)}(t.routeReuseStrategy,(n=e.targetSnapshot)._root,(i=e.currentRouterState)?i._root:void 0),new If(r,n));return Object(s.a)({},e,{targetRouterState:o})}),Ad(function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)}),(i=t.rootContexts,r=t.routeReuseStrategy,o=function(e){return t.triggerEvent(e)},Object(dd.a)(function(e){return new Yf(r,e.targetRouterState,e.currentRouterState,o).activate(i),e})),Ad({next:function(){a=!0},complete:function(){a=!0}}),su(function(){if(!a&&!l){t.resetUrlToCurrentUrlTree();var i=new Ap(e.id,t.serializeUrl(e.extractedUrl),"Navigation ID "+e.id+" is not equal to the current navigation id "+t.navigationId);n.next(i),e.resolve(!1)}t.currentNavigation=null}),_d(function(i){if(l=!0,(a=i)&&a[Hp]){var r=Kf(i.url);r||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var o=new Ap(e.id,t.serializeUrl(e.extractedUrl),i.message);n.next(o),e.resolve(!1),r&&t.navigateByUrl(i.url)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var s=new Sp(e.id,t.serializeUrl(e.extractedUrl),i);n.next(s);try{e.resolve(t.errorHandler(i))}catch(c){e.reject(c)}}var a;return hd.a}))}))},e.prototype.resetRootComponentType=function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType},e.prototype.getTransition=function(){return this.transitions.value},e.prototype.setTransition=function(e){this.transitions.next(Object(s.a)({},this.getTransition(),e))},e.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},e.prototype.setUpLocationChangeListener=function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(t){var n=e.parseUrl(t.url),i="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(function(){e.scheduleNavigation(n,i,r,{replaceUrl:!0})},0)}))},Object.defineProperty(e.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),e.prototype.getCurrentNavigation=function(){return this.currentNavigation},e.prototype.triggerEvent=function(e){this.events.next(e)},e.prototype.resetConfig=function(e){Gp(e),this.config=e.map(Yp),this.navigated=!1,this.lastSuccessfulId=-1},e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},e.prototype.createUrlTree=function(e,t){void 0===t&&(t={});var n=t.relativeTo,r=t.queryParams,o=t.fragment,a=t.preserveQueryParams,l=t.queryParamsHandling,c=t.preserveFragment;Object(i.isDevMode)()&&a&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var h=n||this.routerState.root,d=c?this.currentUrlTree.fragment:o,u=null;if(l)switch(l){case"merge":u=Object(s.a)({},this.currentUrlTree.queryParams,r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}else u=a?this.currentUrlTree.queryParams:r||null;return null!==u&&(u=this.removeEmptyProps(u)),function(e,t,n,i,r){if(0===n.length)return Bf(t.root,t.root,t,i,r);var o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Ff(!0,0,e);var t=0,n=!1,i=e.reduce(function(e,i,r){if("object"==typeof i&&null!=i){if(i.outlets){var o={};return Jp(i.outlets,function(e,t){o[t]="string"==typeof e?e.split("/"):e}),Object(s.g)(e,[{outlets:o}])}if(i.segmentPath)return Object(s.g)(e,[i.segmentPath])}return"string"!=typeof i?Object(s.g)(e,[i]):0===r?(i.split("/").forEach(function(i,r){0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?t++:""!=i&&e.push(i))}),e):Object(s.g)(e,[i])},[]);return new Ff(n,t,i)}(n);if(o.toRoot())return Bf(t.root,new nf([],{}),t,i,r);var a=function(e,n,i){if(e.isAbsolute)return new zf(t.root,!0,0);if(-1===i.snapshot._lastPathIndex)return new zf(i.snapshot._urlSegment,!0,0);var r=Nf(e.commands[0])?0:1;return function(t,n,o){for(var s=i.snapshot._urlSegment,a=i.snapshot._lastPathIndex+r,l=e.numberOfDoubleDots;l>a;){if(l-=a,!(s=s.parent))throw new Error("Invalid number of '../'");a=s.segments.length}return new zf(s,!1,a-l)}()}(o,0,e),l=a.processChildren?Uf(a.segmentGroup,a.index,o.commands):Vf(a.segmentGroup,a.index,o.commands);return Bf(a.segmentGroup,l,t,i,r)}(h,this.currentUrlTree,e,u,d)},e.prototype.navigateByUrl=function(e,t){void 0===t&&(t={skipLocationChange:!1}),Object(i.isDevMode)()&&this.isNgZoneEnabled&&!i.NgZone.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=Kf(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)},e.prototype.navigate=function(e,t){return void 0===t&&(t={skipLocationChange:!1}),function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains "+n+" segment at index "+t)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)},e.prototype.serializeUrl=function(e){return this.urlSerializer.serialize(e)},e.prototype.parseUrl=function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t},e.prototype.isActive=function(e,t){if(Kf(e))return ef(this.currentUrlTree,e,t);var n=this.parseUrl(e);return ef(this.currentUrlTree,n,t)},e.prototype.removeEmptyProps=function(e){return Object.keys(e).reduce(function(t,n){var i=e[n];return null!=i&&(t[n]=i),t},{})},e.prototype.processNavigations=function(){var e=this;this.navigations.subscribe(function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.events.next(new xp(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,t.resolve(!0)},function(t){e.console.warn("Unhandled Navigation Error: ")})},e.prototype.scheduleNavigation=function(e,t,n,i){var r=this.getTransition();if(r&&"imperative"!==t&&"imperative"===r.source&&r.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(r&&"hashchange"==t&&"popstate"===r.source&&r.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(r&&"popstate"==t&&"hashchange"===r.source&&r.rawUrl.toString()===e.toString())return Promise.resolve(!0);var o=null,s=null,a=new Promise(function(e,t){o=e,s=t}),l=++this.navigationId;return this.setTransition({id:l,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:i,resolve:o,reject:s,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch(function(e){return Promise.reject(e)})},e.prototype.setBrowserUrl=function(e,t,n,i){var r=this.urlSerializer.serialize(e);i=i||{},this.location.isCurrentPathEqualTo(r)||t?this.location.replaceState(r,"",Object(s.a)({},i,{navigationId:n})):this.location.go(r,"",Object(s.a)({},i,{navigationId:n}))},e.prototype.resetStateAndUrl=function(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()},e.prototype.resetUrlToCurrentUrlTree=function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})},e}(),zg=function(){function e(e,t,n){var i=this;this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.subscription=e.events.subscribe(function(e){e instanceof xp&&i.updateTargetUrlAndHref()})}return Object.defineProperty(e.prototype,"routerLink",{set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preserveQueryParams",{set:function(e){Object(i.isDevMode)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){this.updateTargetUrlAndHref()},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.onClick=function(e,t,n,i){if(0!==e||t||n||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var r={skipLocationChange:Hg(this.skipLocationChange),replaceUrl:Hg(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!1},e.prototype.updateTargetUrlAndHref=function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))},Object.defineProperty(e.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Hg(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Hg(this.preserveFragment)})},enumerable:!0,configurable:!0}),Object(s.b)([Object(i.HostBinding)("attr.target"),Object(i.Input)(),Object(s.d)("design:type",String)],e.prototype,"target",void 0),e}();function Hg(e){return""===e||!!e}var Vg=function(){return function(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ug,this.attachRef=null}}(),Ug=function(){function e(){this.contexts=new Map}return e.prototype.onChildOutletCreated=function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)},e.prototype.onChildOutletDestroyed=function(e){var t=this.getContext(e);t&&(t.outlet=null)},e.prototype.onOutletDeactivated=function(){var e=this.contexts;return this.contexts=new Map,e},e.prototype.onOutletReAttached=function(e){this.contexts=e},e.prototype.getOrCreateContext=function(e){var t=this.getContext(e);return t||(t=new Vg,this.contexts.set(e,t)),t},e.prototype.getContext=function(e){return this.contexts.get(e)||null},e}(),Wg=function(){function e(e,t,n,r,o){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.EventEmitter,this.deactivateEvents=new i.EventEmitter,this.name=r||Bp,e.onChildOutletCreated(this.name,this)}return e.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},e.prototype.ngOnInit=function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}},Object.defineProperty(e.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activatedRouteData",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),e.prototype.detach=function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e},e.prototype.attach=function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)},e.prototype.deactivate=function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}},e.prototype.activateWith=function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new Gg(e,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},e}(),Gg=function(){function e(e,t,n){this.route=e,this.childContexts=t,this.parent=n}return e.prototype.get=function(e,t){return e===kf?this.route:e===Ug?this.childContexts:this.parent.get(e,t)},e}(),qg=function(){return function(){}}(),Qg=function(){function e(){}return e.prototype.preload=function(e,t){return t().pipe(_d(function(){return Object(rd.a)(null)}))},e}(),Yg=function(){function e(){}return e.prototype.preload=function(e,t){return Object(rd.a)(null)},e}(),Xg=function(){function e(e,t,n,i,r){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=new jg(t,n,function(t){return e.triggerEvent(new Pp(t))},function(t){return e.triggerEvent(new Tp(t))})}return e.prototype.setUpPreloading=function(){var e=this;this.subscription=this.router.events.pipe(fd(function(e){return e instanceof xp}),iu(function(){return e.preload()})).subscribe(function(){})},e.prototype.preload=function(){var e=this.injector.get(i.NgModuleRef);return this.processRoutes(e,this.router.config)},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.processRoutes=function(e,t){var n,i,r=[];try{for(var o=Object(s.h)(t),a=o.next();!a.done;a=o.next()){var l=a.value;if(l.loadChildren&&!l.canLoad&&l._loadedConfig){var c=l._loadedConfig;r.push(this.processRoutes(c.module,c.routes))}else l.loadChildren&&!l.canLoad?r.push(this.preloadConfig(e,l)):l.children&&r.push(this.processRoutes(e,l.children))}}catch(h){n={error:h}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return Object(od.a)(r).pipe(Object(cu.a)(),Object(dd.a)(function(e){}))},e.prototype.preloadConfig=function(e,t){var n=this;return this.preloadingStrategy.preload(t,function(){return n.loader.load(e.injector,t).pipe(Object(Ud.a)(function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)}))})},e}(),Zg=function(){function e(e,t,n){void 0===n&&(n={}),this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}return e.prototype.init=function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()},e.prototype.createScrollEvents=function(){var e=this;return this.router.events.subscribe(function(t){t instanceof Cp?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xp&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))})},e.prototype.consumeScrollEvents=function(){var e=this;return this.router.events.subscribe(function(t){t instanceof _p&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))})},e.prototype.scheduleScrollEvent=function(e,t){this.router.triggerEvent(new _p(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))},e.prototype.ngOnDestroy=function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()},e}(),Kg=new i.InjectionToken("ROUTER_CONFIGURATION"),Jg=new i.InjectionToken("ROUTER_FORROOT_GUARD"),$g=[id.Location,{provide:af,useClass:lf},{provide:Fg,useFactory:sm,deps:[i.ApplicationRef,af,Ug,id.Location,i.Injector,i.NgModuleFactoryLoader,i.Compiler,Mg,Kg,[Rg,new i.Optional],[Pg,new i.Optional]]},Ug,{provide:kf,useFactory:am,deps:[Fg]},{provide:i.NgModuleFactoryLoader,useClass:i.SystemJsNgModuleLoader},Xg,Yg,Qg,{provide:Kg,useValue:{enableTracing:!1}}];function em(){return new i.NgProbeToken("Router",Fg)}var tm=function(){function e(e,t){}var t;return t=e,e.forRoot=function(e,n){return{ngModule:t,providers:[$g,om(e),{provide:Jg,useFactory:rm,deps:[[Fg,new i.Optional,new i.SkipSelf]]},{provide:Kg,useValue:n||{}},{provide:id.LocationStrategy,useFactory:im,deps:[id.PlatformLocation,[new i.Inject(id.APP_BASE_HREF),new i.Optional],Kg]},{provide:Zg,useFactory:nm,deps:[Fg,id.ViewportScroller,Kg]},{provide:qg,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Yg},{provide:i.NgProbeToken,multi:!0,useFactory:em},[lm,{provide:i.APP_INITIALIZER,multi:!0,useFactory:cm,deps:[lm]},{provide:dm,useFactory:hm,deps:[lm]},{provide:i.APP_BOOTSTRAP_LISTENER,multi:!0,useExisting:dm}]]}},e.forChild=function(e){return{ngModule:t,providers:[om(e)]}},e}();function nm(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Zg(e,t,n)}function im(e,t,n){return void 0===n&&(n={}),n.useHash?new id.HashLocationStrategy(e,t):new id.PathLocationStrategy(e,t)}function rm(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function om(e){return[{provide:i.ANALYZE_FOR_ENTRY_COMPONENTS,multi:!0,useValue:e},{provide:Mg,multi:!0,useValue:e}]}function sm(e,t,n,i,r,o,s,a,l,c,h){void 0===l&&(l={});var d=new Fg(null,t,n,i,r,o,s,Zp(a));if(c&&(d.urlHandlingStrategy=c),h&&(d.routeReuseStrategy=h),l.errorHandler&&(d.errorHandler=l.errorHandler),l.malformedUriErrorHandler&&(d.malformedUriErrorHandler=l.malformedUriErrorHandler),l.enableTracing){var u=du();d.events.subscribe(function(e){u.logGroup("Router Event: "+e.constructor.name),u.log(e.toString()),u.log(e),u.logGroupEnd()})}return l.onSameUrlNavigation&&(d.onSameUrlNavigation=l.onSameUrlNavigation),l.paramsInheritanceStrategy&&(d.paramsInheritanceStrategy=l.paramsInheritanceStrategy),l.urlUpdateStrategy&&(d.urlUpdateStrategy=l.urlUpdateStrategy),l.relativeLinkResolution&&(d.relativeLinkResolution=l.relativeLinkResolution),d}function am(e){return e.routerState.root}var lm=function(){function e(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new o.a}return e.prototype.appInitializer=function(){var e=this;return this.injector.get(id.LOCATION_INITIALIZED,Promise.resolve(null)).then(function(){var t=null,n=new Promise(function(e){return t=e}),i=e.injector.get(Fg),r=e.injector.get(Kg);if(e.isLegacyDisabled(r)||e.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)i.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error("Invalid initialNavigation options: '"+r.initialNavigation+"'");i.hooks.afterPreactivation=function(){return e.initNavigation?Object(rd.a)(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},i.initialNavigation()}return n})},e.prototype.bootstrapListener=function(e){var t=this.injector.get(Kg),n=this.injector.get(Xg),r=this.injector.get(Zg),o=this.injector.get(Fg),s=this.injector.get(i.ApplicationRef);e===s.components[0]&&(this.isLegacyEnabled(t)?o.initialNavigation():this.isLegacyDisabled(t)&&o.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},e.prototype.isLegacyEnabled=function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation},e.prototype.isLegacyDisabled=function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation},e}();function cm(e){return e.appInitializer.bind(e)}function hm(e){return e.bootstrapListener.bind(e)}var dm=new i.InjectionToken("Router Initializer"),um=function(){function e(e){this.router=e,this.history=[]}return e.prototype.loadRouting=function(){var e=this;this.router.events.pipe(fd(function(e){return e instanceof xp})).subscribe(function(t){e.history=e.history.concat([t.urlAfterRedirects])})},e.prototype.getHistory=function(){return this.history},e.prototype.getPreviousUrl=function(){return this.history[this.history.length-2]||"/index"},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e(i.inject(Fg))},token:e,providedIn:"root"}),e}(),pm=function(){function e(e){var t=this;this.router=e,this.subject=new o.a,this.keepAfterNavigationChange=!1,e.events.subscribe(function(e){e instanceof Cp&&(t.keepAfterNavigationChange?t.keepAfterNavigationChange=!1:t.subject.next())})}return e.prototype.success=function(e,t){void 0===t&&(t=!1),this.keepAfterNavigationChange=t,this.subject.next({type:"success",text:e})},e.prototype.error=function(e,t){void 0===t&&(t=!1),this.keepAfterNavigationChange=t,this.subject.next({type:"error",text:e})},e.prototype.getMessage=function(){return this.subject.asObservable()},e}(),fm=function(){function e(e,t){this.http=e,this.sharedData=t}return e.prototype.login=function(e,t){return this.http.post(this.sharedData.baseurl+"/users/authenticate",{email:e,password:t}).pipe(Object(dd.a)(function(e){return e&&e.token&&localStorage.setItem("currentUser",JSON.stringify(e)),e}))},e.prototype.logout=function(){localStorage.removeItem("currentUser")},e}(),gm=function(){function e(e,t){this.http=e,this.sharedData=t,this.baseurl=this.sharedData.baseurl}return e.prototype.getAll=function(){return this.http.get("/api/users")},e.prototype.getById=function(e){return this.http.get("/api/users/"+e)},e.prototype.register=function(e){return this.http.post(this.sharedData.baseurl+"/users/register",e)},e.prototype.update=function(e){return this.http.put("/api/users/"+e.id,e)},e.prototype.delete=function(e){return this.http.delete("/users/"+e)},e.prototype.getDesignFiles=function(){return this.http.get(this.baseurl+"/users/designfiles")},e.prototype.getUserBoards=function(){return this.http.get(this.baseurl+"/users/customboards")},e.prototype.createDesignFile=function(e){return this.http.post(this.baseurl+"/users/designfile",{filename:e})},e}(),mm=function(){function e(e,t){this.http=e,this.sharedData=t,this.baseurl=this.sharedData.baseurl+"/design"}return e.prototype.getReservedComponents=function(e){return this.http.get(this.baseurl+"/"+e+"/reserve")},e.prototype.unreserve=function(e){return this.http.delete(this.baseurl+"/"+e+"/reserve")},e.prototype.getAll=function(){return this.http.get("/api/users")},e.prototype.getImage=function(e){return this.http.get(""+this.sharedData.imageUrl+e+"/image",{responseType:"blob"})},e.prototype.reserve=function(e,t){return this.http.post(this.baseurl+"/"+t+"/reserve",e)},e.prototype.saveDesign=function(e,t){var n=new FormData;return n.append("file",e),this.http.put(this.baseurl+"/designfile/"+t,n)},e.prototype.getDesignFileById=function(e){return this.http.get(this.baseurl+"/designfile/"+e)},e.prototype.createDesignFile=function(e){return this.http.post(this.baseurl+"/designfile",{filename:e})},e.prototype.deleteDesignFile=function(e){return this.http.delete(this.baseurl+"/designfile/"+e)},e.prototype.sendDesignConnections=function(e,t){return this.http.post(this.baseurl+"/"+t+"/connections",e)},e.prototype.getSideBarItems=function(){var e=this;return this.http.get(this.baseurl+"/components").pipe(Object(dd.a)(function(t){var n=0,i=[],r=[];return t.boards.forEach(function(t){var o,s={};s.id=t.name+"_"+n++,s.addInfo=((o={}).name=""+t.name,o[Kh]=t.id,o.reserved=!1,o.type=Jh.Hardware,o),s.shape={type:"Image",source:""+e.sharedData.imageUrl+t.id+"/image"},s.constraints=Xh,0!=t.ports.length&&(s.ports=t.ports,s.ports.forEach(function(e){e.constraints=_n.InConnect|_n.OutConnect,e.visibility=vn.Visible,e.addInfo=e.addInfo||{};var t="2";"VCC"==e.addInfo.pin_type?t="1":"GROUND"==e.addInfo.pin_type&&(t="0"),e.addInfo.sim_value=t})),s.annotations=[{content:s.id}],null==t.UserId?i.push(s):r.push(s)}),[i,r]}))},e}(),ym=function(){function e(e){this.sharedData=e,this.globalPinId_boardid_portid={}}return e.prototype.getDesignHWComponentsCount=function(e){return e.nodes.filter(function(e){return e.addInfo.type==Jh.Hardware}).length},e.prototype.getConnector=function(){return{type:"Orthogonal",constraints:Cn.Default|Cn.Bridging}},e.prototype.getDesignConnections=function(){var e=0,t={},n=this.sharedData.nodeid_index,i=this.sharedData.diagram.nodes,r=this.globalPinId_boardid_portid,o=this;return this.sharedData.diagram.connectors.forEach(function(s){if(""!=s.targetID&&""!=s.sourceID){var a,l=i[n[s.sourceID]],c=i[n[s.targetID]],h=s.sourcePortID,d=s.targetPortID;if(a=c.addInfo.type==Jh.Software?o.sharedData.ip+":"+o.sharedData.port:c.addInfo.IP+":"+c.addInfo.port,c.addInfo.type==Jh.Software){var u=e++;d=""+u;var p=n[l.id],f=l.ports.findIndex(function(e){return e.id==s.sourcePortID});r[u]={component_index:p,port_index:f}}var g=l.ports.find(function(e){return e.id==s.sourcePortID});if(l.addInfo.type==Jh.Hardware&&"GROUND"!=g.addInfo.pin_type&&"VCC"!=g.addInfo.pin_type&&(l.addInfo.connectedComponentId in t||(t[l.addInfo.connectedComponentId]=""),t[l.addInfo.connectedComponentId]+="O:"+h+":"+a+":"+d+","),c.addInfo.type==Jh.Hardware){c.addInfo.connectedComponentId in t||(t[c.addInfo.connectedComponentId]="");var m=l.addInfo.IP;l.addInfo.type==Jh.Software&&(m=o.sharedData.ip),t[c.addInfo.connectedComponentId]+="I:"+d+":"+m+","}}}),t},e.prototype.getDesignComponents=function(e){var t={};return e.nodes.forEach(function(e){e.addInfo.isBinded=!1,e.addInfo.type==Jh.Hardware&&(e.addInfo[Kh]in t?t[e.addInfo[Kh]]+=1:t[e.addInfo[Kh]]=1)}),t},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e(i.inject($h))},token:e,providedIn:"root"}),e}(),vm=function(){function e(e,t,n,i,r,o){var s=this;this.chatService=e,this.sharedData=t,this.router=n,this.authenticationService=i,this.sharedData.currentloginstatus.subscribe(function(e){s.logedin=e}),o.events.pipe(fd(function(e){return e instanceof Cp})).subscribe(function(e){console.group("NavigationStart Event")})}return e.prototype.logout=function(){this.authenticationService.logout(),this.logedin=!1,this.router.navigate(["/login"])},e.prototype.ScrollToBottom=function(){window.scrollTo({top:400,behavior:"smooth"})},e.prototype.ngOnInit=function(){localStorage.getItem("currentUser")&&(this.logedin=!0)},e}(),bm=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function wm(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),i["\u0275did"](1,212992,null,0,Wg,[Ug,i.ViewContainerRef,i.ComponentFactoryResolver,[8,null],i.ChangeDetectorRef],null,null)],function(e,t){e(t,1,0)},null)}function Cm(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,wm,bm)),i["\u0275did"](1,49152,null,0,Np,[],null,null)],null,null)}var xm=i["\u0275ccf"]("ng-component",Np,Cm,{},{},[]),Am=n("VNr4"),Sm=function(){function e(){}return Object.defineProperty(e.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},e.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},e.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},e}(),Om=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object.defineProperty(t.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),t}(Sm);function Em(e){return null==e||0===e.length}var Im=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Dm=function(){function e(){}return e.min=function(e){return function(t){if(Em(t.value)||Em(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}},e.max=function(e){return function(t){if(Em(t.value)||Em(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}},e.required=function(e){return Em(e.value)?{required:!0}:null},e.requiredTrue=function(e){return!0===e.value?null:{required:!0}},e.email=function(e){return Em(e.value)?null:Im.test(e.value)?null:{email:!0}},e.minLength=function(e){return function(t){if(Em(t.value))return null;var n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}},e.maxLength=function(e){return function(t){var n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}},e.pattern=function(t){return t?("string"==typeof t?(i="","^"!==t.charAt(0)&&(i+="^"),i+=t,"$"!==t.charAt(t.length-1)&&(i+="$"),n=new RegExp(i)):(i=t.toString(),n=t),function(e){if(Em(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:i,actualValue:t}}}):e.nullValidator;var n,i},e.nullValidator=function(e){return null},e.compose=function(e){if(!e)return null;var t=e.filter(km);return 0==t.length?null:function(e){return Tm(function(e,n){return t.map(function(t){return t(e)})}(e))}},e.composeAsync=function(e){if(!e)return null;var t=e.filter(km);return 0==t.length?null:function(e){var n=function(e,n){return t.map(function(t){return t(e)})}(e).map(Pm);return Object(Am.a)(n).pipe(Object(dd.a)(Tm))}},e}();function km(e){return null!=e}function Pm(e){var t=Object(i["\u0275isPromise"])(e)?Object(od.a)(e):e;if(!Object(i["\u0275isObservable"])(t))throw new Error("Expected validator to return Promise or Observable.");return t}function Tm(e){var t=e.reduce(function(e,t){return null!=t?Object(s.a)({},e,t):e},{});return 0===Object.keys(t).length?null:t}var Mm=new i.InjectionToken("NgValueAccessor"),jm=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),Rm=new i.InjectionToken("CompositionEventMode"),Lm=function(){function e(e,t,n){var i;this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=du()?du().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._handleInput=function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)},e.prototype._compositionStart=function(){this._composing=!0},e.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},e}();function _m(e){return e.validate?function(t){return e.validate(t)}:e}function Nm(e){return e.validate?function(t){return e.validate(t)}:e}var Bm=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}();function Fm(){throw new Error("unimplemented")}var zm=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._parent=null,t.name=null,t.valueAccessor=null,t._rawValidators=[],t._rawAsyncValidators=[],t}return Object(s.c)(t,e),Object.defineProperty(t.prototype,"validator",{get:function(){return Fm()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return Fm()},enumerable:!0,configurable:!0}),t}(Sm),Hm=function(){function e(){this._accessors=[]}return e.prototype.add=function(e,t){this._accessors.push([e,t])},e.prototype.remove=function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},e.prototype.select=function(e){var t=this;this._accessors.forEach(function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)})},e.prototype._isSameGroup=function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name},e}(),Vm=function(){function e(e,t,n,i){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return e.prototype.ngOnInit=function(){this._control=this._injector.get(zm),this._checkName(),this._registry.add(this._control,this)},e.prototype.ngOnDestroy=function(){this._registry.remove(this)},e.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},e.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},e.prototype.fireUncheck=function(e){this.writeValue(e)},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},e.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},e}(),Um=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},e.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),Wm='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Gm='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',qm='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Qm=function(){function e(){}return e.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Wm)},e.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+Gm+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+qm)},e.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Wm)},e.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Gm)},e.arrayParentException=function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')},e.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},e.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},e}();function Ym(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var Xm=function(){function e(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=i["\u0275looseIdentical"]}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=Ym(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)},e.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(){return(this._idCounter++).toString()},e.prototype._getOptionId=function(e){var t,n;try{for(var i=Object(s.h)(Array.from(this._optionMap.keys())),r=i.next();!r.done;r=i.next()){var o=r.value;if(this._compareWith(this._optionMap.get(o),e))return o}}catch(a){t={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return null},e.prototype._getOptionValue=function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e},e}(),Zm=function(){function e(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}return Object.defineProperty(e.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Ym(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),e.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},e.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},e}();function Km(e,t){return null==e?""+t:("string"==typeof t&&(t="'"+t+"'"),t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var Jm=function(){function e(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=i["\u0275looseIdentical"]}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var i=e.map(function(e){return n._getOptionId(e)});t=function(e,t){e._setSelected(i.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)},e.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){var i=[];if(n.hasOwnProperty("selectedOptions"))for(var r=n.selectedOptions,o=0;o<r.length;o++){var s=r.item(o),a=t._getOptionValue(s.value);i.push(a)}else for(r=n.options,o=0;o<r.length;o++)(s=r.item(o)).selected&&(a=t._getOptionValue(s.value),i.push(a));t.value=i,e(i)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},e.prototype._getOptionId=function(e){var t,n;try{for(var i=Object(s.h)(Array.from(this._optionMap.keys())),r=i.next();!r.done;r=i.next()){var o=r.value;if(this._compareWith(this._optionMap.get(o)._value,e))return o}}catch(a){t={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return null},e.prototype._getOptionValue=function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e},e}(),$m=function(){function e(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}return Object.defineProperty(e.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(Km(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(Km(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),e.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},e.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},e.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},e}();function ey(e,t){return Object(s.g)(t.path,[e])}function ty(e,t){e||oy(t,"Cannot find control with"),t.valueAccessor||oy(t,"No value accessor for form control with"),e.validator=Dm.compose([e.validator,t.validator]),e.asyncValidator=Dm.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&ny(e,t)})}(e,t),function(e,t){e.registerOnChange(function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&ny(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(function(e){t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(function(){return e.updateValueAndValidity()})}),t._rawAsyncValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(function(){return e.updateValueAndValidity()})})}function ny(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function iy(e,t){null==e&&oy(t,"Cannot find control with"),e.validator=Dm.compose([e.validator,t.validator]),e.asyncValidator=Dm.composeAsync([e.asyncValidator,t.asyncValidator])}function ry(e){return oy(e,"There is no FormControl instance attached to form control element with")}function oy(e,t){var n;throw n=e.path.length>1?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(t+" "+n)}function sy(e){return null!=e?Dm.compose(e.map(_m)):null}function ay(e){return null!=e?Dm.composeAsync(e.map(Nm)):null}function ly(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Object(i["\u0275looseIdentical"])(t,n.currentValue)}var cy=[jm,Um,Bm,Xm,Jm,Vm];function hy(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function dy(e,t){if(!t)return null;Array.isArray(t)||oy(e,"Value accessor was not provided as an array for form control with");var n=void 0,i=void 0,r=void 0;return t.forEach(function(t){var o;t.constructor===Lm?n=t:(o=t,cy.some(function(e){return o.constructor===e})?(i&&oy(e,"More than one built-in value accessor matches form control with"),i=t):(r&&oy(e,"More than one custom value accessor matches form control with"),r=t))}),r||i||n||(oy(e,"No valid value accessor for form control with"),null)}function uy(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var py=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},t.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(t.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return ey(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return sy(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return ay(this._asyncValidators)},enumerable:!0,configurable:!0}),t.prototype._checkParentType=function(){},t}(Om),fy=function(){function e(e){this._cd=e}return Object.defineProperty(e.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),e}(),gy=function(e){function t(t){return e.call(this,t)||this}return Object(s.c)(t,e),t}(fy),my=function(e){function t(t){return e.call(this,t)||this}return Object(s.c)(t,e),t}(fy);function yy(e){var t=by(e)?e.validators:e;return Array.isArray(t)?sy(t):t||null}function vy(e,t){var n=by(t)?t.asyncValidators:e;return Array.isArray(n)?ay(n):n||null}function by(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var wy=function(){function e(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return"VALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return"INVALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return"PENDING"==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return"DISABLED"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return"DISABLED"!==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),e.prototype.setValidators=function(e){this.validator=yy(e)},e.prototype.setAsyncValidators=function(e){this.asyncValidator=vy(e)},e.prototype.clearValidators=function(){this.validator=null},e.prototype.clearAsyncValidators=function(){this.asyncValidator=null},e.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},e.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},e.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype.markAsPending=function(e){void 0===e&&(e={}),this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},e.prototype.disable=function(e){void 0===e&&(e={}),this.status="DISABLED",this.errors=null,this._forEachChild(function(t){t.disable(Object(s.a)({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(e),this._onDisabledChange.forEach(function(e){return e(!0)})},e.prototype.enable=function(e){void 0===e&&(e={}),this.status="VALID",this._forEachChild(function(t){t.enable(Object(s.a)({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(e),this._onDisabledChange.forEach(function(e){return e(!1)})},e.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},e.prototype.setParent=function(e){this._parent=e},e.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},e.prototype._updateTreeValidity=function(e){void 0===e&&(e={emitEvent:!0}),this._forEachChild(function(t){return t._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})},e.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"},e.prototype._runValidator=function(){return this.validator?this.validator(this):null},e.prototype._runAsyncValidator=function(e){var t=this;if(this.asyncValidator){this.status="PENDING";var n=Pm(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){return t.setErrors(n,{emitEvent:e})})}},e.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},e.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},e.prototype.get=function(e){return function(e,t,n){return null==t?null:(t instanceof Array||(t=t.split(".")),t instanceof Array&&0===t.length?null:t.reduce(function(e,t){return e instanceof xy?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Ay&&e.at(t)||null},e))}(this,e)},e.prototype.getError=function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null},e.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(e.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),e.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},e.prototype._initObservables=function(){this.valueChanges=new i.EventEmitter,this.statusChanges=new i.EventEmitter},e.prototype._calculateStatus=function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"},e.prototype._anyControlsHaveStatus=function(e){return this._anyControls(function(t){return t.status===e})},e.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},e.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},e.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},e.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},e.prototype._setUpdateStrategy=function(e){by(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},e}(),Cy=function(e){function t(t,n,i){void 0===t&&(t=null);var r=e.call(this,yy(n),vy(i,n))||this;return r._onChange=[],r._applyFormState(t),r._setUpdateStrategy(n),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r._initObservables(),r}return Object(s.c)(t,e),t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},t.prototype.reset=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},t.prototype._updateValue=function(){},t.prototype._anyControls=function(e){return!1},t.prototype._allControlsDisabled=function(){return this.disabled},t.prototype.registerOnChange=function(e){this._onChange.push(e)},t.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},t.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},t.prototype._forEachChild=function(e){},t.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},t.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},t}(wy),xy=function(e){function t(t,n,i){var r=e.call(this,yy(n),vy(i,n))||this;return r.controls=t,r._initObservables(),r._setUpdateStrategy(n),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}return Object(s.c)(t,e),t.prototype.registerControl=function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},t.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this._checkAllValuesPresent(e),Object.keys(e).forEach(function(i){n._throwIfControlMissing(i),n.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){var n=this;void 0===t&&(t={}),Object.keys(e).forEach(function(i){n.controls[i]&&n.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.reset=function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this._forEachChild(function(n,i){n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t),this._updatePristine(t),this._updateTouched(t)},t.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof Cy?t.value:t.getRawValue(),e})},t.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},t.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},t.prototype._forEachChild=function(e){var t=this;Object.keys(this.controls).forEach(function(n){return e(t.controls[n],n)})},t.prototype._setUpControls=function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})},t.prototype._updateValue=function(){this.value=this._reduceValue()},t.prototype._anyControls=function(e){var t=this,n=!1;return this._forEachChild(function(i,r){n=n||t.contains(r)&&e(i)}),n},t.prototype._reduceValue=function(){var e=this;return this._reduceChildren({},function(t,n,i){return(n.enabled||e.disabled)&&(t[i]=n.value),t})},t.prototype._reduceChildren=function(e,t){var n=e;return this._forEachChild(function(e,i){n=t(n,e,i)}),n},t.prototype._allControlsDisabled=function(){var e,t;try{for(var n=Object(s.h)(Object.keys(this.controls)),i=n.next();!i.done;i=n.next())if(this.controls[i.value].enabled)return!1}catch(r){e={error:r}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return Object.keys(this.controls).length>0||this.disabled},t.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '"+n+"'.")})},t}(wy),Ay=function(e){function t(t,n,i){var r=e.call(this,yy(n),vy(i,n))||this;return r.controls=t,r._initObservables(),r._setUpdateStrategy(n),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}return Object(s.c)(t,e),t.prototype.at=function(e){return this.controls[e]},t.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},t.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},t.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(t.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this._checkAllValuesPresent(e),e.forEach(function(e,i){n._throwIfControlMissing(i),n.at(i).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){var n=this;void 0===t&&(t={}),e.forEach(function(e,i){n.at(i)&&n.at(i).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.reset=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this._forEachChild(function(n,i){n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t),this._updatePristine(t),this._updateTouched(t)},t.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof Cy?e.value:e.getRawValue()})},t.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},t.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},t.prototype._forEachChild=function(e){this.controls.forEach(function(t,n){e(t,n)})},t.prototype._updateValue=function(){var e=this;this.value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(e){return e.value})},t.prototype._anyControls=function(e){return this.controls.some(function(t){return t.enabled&&e(t)})},t.prototype._setUpControls=function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})},t.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: "+n+".")})},t.prototype._allControlsDisabled=function(){var e,t;try{for(var n=Object(s.h)(this.controls),i=n.next();!i.done;i=n.next())if(i.value.enabled)return!1}catch(r){e={error:r}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return this.controls.length>0||this.disabled},t.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},t}(wy),Sy=Promise.resolve(null),Oy=function(e){function t(t,n){var r=e.call(this)||this;return r.submitted=!1,r._directives=[],r.ngSubmit=new i.EventEmitter,r.form=new xy({},sy(t),ay(n)),r}return Object(s.c)(t,e),t.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(t.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),t.prototype.addControl=function(e){var t=this;Sy.then(function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),ty(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)})},t.prototype.getControl=function(e){return this.form.get(e.path)},t.prototype.removeControl=function(e){var t=this;Sy.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name),uy(t._directives,e)})},t.prototype.addFormGroup=function(e){var t=this;Sy.then(function(){var n=t._findContainer(e.path),i=new xy({});iy(i,e),n.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})},t.prototype.removeFormGroup=function(e){var t=this;Sy.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)})},t.prototype.getFormGroup=function(e){return this.form.get(e.path)},t.prototype.updateModel=function(e,t){var n=this;Sy.then(function(){n.form.get(e.path).setValue(t)})},t.prototype.setValue=function(e){this.control.setValue(e)},t.prototype.onSubmit=function(e){return this.submitted=!0,hy(this.form,this._directives),this.ngSubmit.emit(e),!1},t.prototype.onReset=function(){this.resetForm()},t.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},t.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},t.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},t}(Om),Ey=function(){function e(){}return e.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+Wm+'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},e.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+Gm+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+qm)},e.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},e.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+Gm+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+qm)},e.ngFormWarning=function(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")},e}(),Iy=new i.InjectionToken("NgFormSelectorWarning"),Dy=function(e){function t(t,n,i){var r=e.call(this)||this;return r._parent=t,r._validators=n,r._asyncValidators=i,r}var n;return Object(s.c)(t,e),n=t,t.prototype._checkParentType=function(){this._parent instanceof n||this._parent instanceof Oy||Ey.modelGroupParentException()},t}(py),ky=Promise.resolve(null),Py=function(e){function t(t,n,r,o){var s=e.call(this)||this;return s.control=new Cy,s._registered=!1,s.update=new i.EventEmitter,s._parent=t,s._rawValidators=n||[],s._rawAsyncValidators=r||[],s.valueAccessor=dy(s,o),s}return Object(s.c)(t,e),t.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),ly(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},t.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(t.prototype,"path",{get:function(){return this._parent?ey(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return sy(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return ay(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),t.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},t.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},t.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},t.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},t.prototype._setUpStandalone=function(){ty(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},t.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},t.prototype._checkParentType=function(){!(this._parent instanceof Dy)&&this._parent instanceof py?Ey.formGroupNameException():this._parent instanceof Dy||this._parent instanceof Oy||Ey.modelParentException()},t.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Ey.missingNameException()},t.prototype._updateValue=function(e){var t=this;ky.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},t.prototype._updateDisabled=function(e){var t=this,n=e.isDisabled.currentValue,i=""===n||n&&"false"!==n;ky.then(function(){i&&!t.control.disabled?t.control.disable():!i&&t.control.disabled&&t.control.enable()})},t}(zm),Ty=new i.InjectionToken("NgModelWithFormControlWarning"),My=function(e){function t(t,n){var r=e.call(this)||this;return r._validators=t,r._asyncValidators=n,r.submitted=!1,r.directives=[],r.form=null,r.ngSubmit=new i.EventEmitter,r}return Object(s.c)(t,e),t.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(t.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),t.prototype.addControl=function(e){var t=this.form.get(e.path);return ty(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},t.prototype.getControl=function(e){return this.form.get(e.path)},t.prototype.removeControl=function(e){uy(this.directives,e)},t.prototype.addFormGroup=function(e){var t=this.form.get(e.path);iy(t,e),t.updateValueAndValidity({emitEvent:!1})},t.prototype.removeFormGroup=function(e){},t.prototype.getFormGroup=function(e){return this.form.get(e.path)},t.prototype.addFormArray=function(e){var t=this.form.get(e.path);iy(t,e),t.updateValueAndValidity({emitEvent:!1})},t.prototype.removeFormArray=function(e){},t.prototype.getFormArray=function(e){return this.form.get(e.path)},t.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},t.prototype.onSubmit=function(e){return this.submitted=!0,hy(this.form,this.directives),this.ngSubmit.emit(e),!1},t.prototype.onReset=function(){this.resetForm()},t.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},t.prototype._updateDomValue=function(){var e=this;this.directives.forEach(function(t){var n=e.form.get(t.path);t.control!==n&&(function(e,t){t.valueAccessor.registerOnChange(function(){return ry(t)}),t.valueAccessor.registerOnTouched(function(){return ry(t)}),t._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),e&&e._clearChangeFns()}(t.control,t),n&&ty(n,t),t.control=n)}),this.form._updateTreeValidity({emitEvent:!1})},t.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange(function(){return e._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},t.prototype._updateValidators=function(){var e=sy(this._validators);this.form.validator=Dm.compose([this.form.validator,e]);var t=ay(this._asyncValidators);this.form.asyncValidator=Dm.composeAsync([this.form.asyncValidator,t])},t.prototype._checkFormPresent=function(){this.form||Qm.missingFormException()},t}(Om),jy=function(e){function t(t,n,i){var r=e.call(this)||this;return r._parent=t,r._validators=n,r._asyncValidators=i,r}return Object(s.c)(t,e),t.prototype._checkParentType=function(){Ly(this._parent)&&Qm.groupParentException()},t}(py),Ry=function(e){function t(t,n,i){var r=e.call(this)||this;return r._parent=t,r._validators=n,r._asyncValidators=i,r}return Object(s.c)(t,e),t.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},t.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(t.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return ey(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return sy(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return ay(this._asyncValidators)},enumerable:!0,configurable:!0}),t.prototype._checkParentType=function(){Ly(this._parent)&&Qm.arrayParentException()},t}(Om);function Ly(e){return!(e instanceof jy||e instanceof My||e instanceof Ry)}var _y=function(e){function t(t,n,r,o,s){var a=e.call(this)||this;return a._ngModelWarningConfig=s,a._added=!1,a.update=new i.EventEmitter,a._ngModelWarningSent=!1,a._parent=t,a._rawValidators=n||[],a._rawAsyncValidators=r||[],a.valueAccessor=dy(a,o),a}var n;return Object(s.c)(t,e),n=t,Object.defineProperty(t.prototype,"isDisabled",{set:function(e){Qm.disabledAttrWarning()},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(e){var t,r;this._added||this._setUpControl(),ly(e,this.viewModel)&&("formControlName",t=n,this,r=this._ngModelWarningConfig,Object(i.isDevMode)()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||this._ngModelWarningSent)||(Qm.ngModelWarning("formControlName"),t._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},t.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},t.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(t.prototype,"path",{get:function(){return ey(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return sy(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return ay(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),t.prototype._checkParentType=function(){!(this._parent instanceof jy)&&this._parent instanceof py?Qm.ngModelGroupException():this._parent instanceof jy||this._parent instanceof My||this._parent instanceof Ry||Qm.controlParentException()},t.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},t._ngModelWarningSentOnce=!1,t}(zm),Ny=function(){function e(){}return e.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),i=null,r=null,o=void 0;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(i=null!=t.validators?t.validators:null,r=null!=t.asyncValidators?t.asyncValidators:null,o=null!=t.updateOn?t.updateOn:void 0):(i=null!=t.validator?t.validator:null,r=null!=t.asyncValidator?t.asyncValidator:null)),new xy(n,{asyncValidators:r,updateOn:o,validators:i})},e.prototype.control=function(e,t,n){return new Cy(e,t,n)},e.prototype.array=function(e,t,n){var i=this,r=e.map(function(e){return i._createControl(e)});return new Ay(r,t,n)},e.prototype._reduceControls=function(e){var t=this,n={};return Object.keys(e).forEach(function(i){n[i]=t._createControl(e[i])}),n},e.prototype._createControl=function(e){return e instanceof Cy||e instanceof xy||e instanceof Ay?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)},e}(),By=function(){return function(){}}(),Fy=function(){return function(){}}(),zy=function(){function e(){}var t;return t=e,e.withConfig=function(e){return{ngModule:t,providers:[{provide:Iy,useValue:e.warnOnDeprecatedNgFormSelector}]}},e}(),Hy=function(){function e(){}var t;return t=e,e.withConfig=function(e){return{ngModule:t,providers:[{provide:Ty,useValue:e.warnOnNgModelWithFormControl}]}},e}();function Vy(e){for(var t,n=e.childNodes,i=0;i<n.length;i++)if(3===(t=n[i]).nodeType)return t;return null}function Uy(e,t,n){void 0===t&&(t=!1),void 0===n&&(n={});var i=e("div",{className:"e-checkbox-wrapper e-css"});if(n.cssClass&&P([i],n.cssClass.split(" ")),n.enableRtl&&i.classList.add("e-rtl"),t){var r=e("span",{className:"e-ripple-container"});Ee(r,{isCenterRipple:!0,duration:400}),i.appendChild(r)}var o=e("span",{className:"e-frame e-icons"});if(n.checked&&o.classList.add("e-check"),i.appendChild(o),n.label){var s=e("span",{className:"e-label",innerHTML:n.label});i.appendChild(s)}return i}var Wy,Gy=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(s.c)(t,e),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize()},t.prototype.initialize=function(){this.cssClass&&P([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),this.content&&(this.element.innerHTML=this.content),this.setIconCss(),this.enableRtl&&this.element.classList.add("e-rtl"),this.disabled?this.controlStatus(this.disabled):this.wireEvents(),this.removeRippleEffect=Ee(this.element,{selector:".e-btn"})},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),"Top"!==this.iconPosition&&"Bottom"!==this.iconPosition||this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var t=this.element.childNodes[0];!t||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,t)}},t.prototype.wireEvents=function(){this.isToggle&&I.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&I.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var t,n=["e-primary","e-rtl","e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(n=n.concat(this.cssClass.split(" "))),e.prototype.destroy.call(this),T([this.element],n),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,"")),(t=this.element.querySelector("span.e-btn-icon"))&&N(t),this.unWireEvents(),this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"isPrimary":e.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(e.disabled),this.unWireEvents();break;case"iconCss":var r=this.element.querySelector("span.e-btn-icon");r?e.iconCss?(r.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&r.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):N(r):this.setIconCss();break;case"iconPosition":T([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(r=this.element.querySelector("span.e-btn-icon"))&&N(r),this.setIconCss();break;case"cssClass":t.cssClass&&T([this.element],t.cssClass.split(" ")),e.cssClass&&P([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl");break;case"content":Vy(this.element)||this.element.classList.remove("e-icon-btn"),this.element.innerHTML=e.content,this.setIconCss();break;case"isToggle":e.isToggle?I.add(this.element,"click",this.btnClickHandler,this):(I.remove(this.element,"click",this.btnClickHandler),T([this.element],["e-active"]))}},Object(s.b)([ye("Left")],t.prototype,"iconPosition",void 0),Object(s.b)([ye("")],t.prototype,"iconCss",void 0),Object(s.b)([ye(!1)],t.prototype,"disabled",void 0),Object(s.b)([ye(!1)],t.prototype,"isPrimary",void 0),Object(s.b)([ye("")],t.prototype,"cssClass",void 0),Object(s.b)([ye("")],t.prototype,"content",void 0),Object(s.b)([ye(!1)],t.prototype,"isToggle",void 0),Object(s.b)([ye()],t.prototype,"locale",void 0),Object(s.b)([xe()],t.prototype,"created",void 0),Object(s.b)([Ae],t)}(ht),qy="e-toolbar-items",Qy="e-toolbar-popup",Yy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"id",void 0),Object(s.b)([ye("")],t.prototype,"text",void 0),Object(s.b)([ye("auto")],t.prototype,"width",void 0),Object(s.b)([ye("")],t.prototype,"cssClass",void 0),Object(s.b)([ye(!1)],t.prototype,"showAlwaysInPopup",void 0),Object(s.b)([ye("")],t.prototype,"prefixIcon",void 0),Object(s.b)([ye("")],t.prototype,"suffixIcon",void 0),Object(s.b)([ye("None")],t.prototype,"overflow",void 0),Object(s.b)([ye("")],t.prototype,"template",void 0),Object(s.b)([ye("Button")],t.prototype,"type",void 0),Object(s.b)([ye("Both")],t.prototype,"showTextOn",void 0),Object(s.b)([ye(null)],t.prototype,"htmlAttributes",void 0),Object(s.b)([ye("")],t.prototype,"tooltipText",void 0),Object(s.b)([ye("Left")],t.prototype,"align",void 0),Object(s.b)([xe()],t.prototype,"click",void 0),t}(Le),Xy=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.resizeContext=i.resize.bind(i),i.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},i}return Object(s.c)(t,e),t.prototype.destroy=function(){var t=this,n=this.element;for(e.prototype.destroy.call(this),this.unwireEvents(),this.tempId.forEach(function(e){m(t.element.querySelector(e))||(document.body.appendChild(t.element.querySelector(e)).style.display="none")});n.firstChild;)n.removeChild(n.firstChild);this.trgtEle&&n.appendChild(this.ctrlTem),this.clearProperty(),this.popObj=null,this.tbarAlign=null,this.remove(this.element,"e-toolpop"),n.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach(function(e){t.element.removeAttribute(e)})},t.prototype.preRender=function(){var e={enableCollision:!0,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains("e-vertical"),this.popupPriCount=0,this.enableRtl&&this.add(this.element,"e-rtl")},t.prototype.wireEvents=function(){I.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.keyModule=new mt(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),I.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")},t.prototype.docKeyDown=function(e){if("INPUT"!==e.target.tagName){var t=!m(this.popObj)&&j(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}},t.prototype.unwireEvents=function(){I.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.keyModule.destroy(),window.removeEventListener("resize",this.resizeContext),I.remove(document,"scroll",this.docEvent),I.remove(this.element,"keydown",this.docKeyDown),I.remove(document,"click",this.docEvent)},t.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},t.prototype.docEvent=function(e){var t=V(e.target,".e-popup");this.popObj&&j(this.popObj.element)&&!t&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},t.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,"e-tbar-pos"),this.scrollModule.destroy(),this.scrollModule=null)},t.prototype.destroyItems=function(){[].slice.call(this.element.querySelectorAll(".e-toolbar-item")).forEach(function(e){N(e)});var e=this.element.querySelector("."+qy);this.tbarAlign&&([].slice.call(e.children).forEach(function(e){N(e)}),this.tbarAlign=!1,this.remove(e,"e-tbar-pos")),this.clearProperty()},t.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,"e-rtl"),this.destroyScroll()),this.remove(this.element,"e-tbar-extended"),this.remove(this.element,"e-extended-toolbar");var e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,"e-toolbar-multirow"),this.popObj&&this.popupRefresh(this.popObj.element,!0)},t.prototype.add=function(e,t){e.classList.add(t)},t.prototype.remove=function(e,t){e.classList.remove(t)},t.prototype.elementFocus=function(e){var t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()},t.prototype.clstElement=function(e,t){return e&&this.popObj&&j(this.popObj.element)?this.popObj.element.querySelector(".e-toolbar-item"):this.element===t||e?this.element.querySelector(".e-toolbar-item:not(.e-overlay ):not(.e-separator )"):V(t,".e-toolbar-item")},t.prototype.keyHandling=function(e,t,n,i,r){var o=this.popObj,s=this.element,a={name:"FadeOut",duration:100};switch(t.action){case"moveRight":if(this.isVertical)return;s===n?this.elementFocus(e):i||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;i||this.eleFocus(e,"previous");break;case"home":case"end":var l=void 0,c=void 0;if(e){var h=V(e,".e-popup");h?j(this.popObj.element)&&(c=[].slice.call(h.children),l="home"===t.action?c[0]:c[c.length-1]):(c=this.element.querySelectorAll("."+qy+" .e-toolbar-item"),l="home"===t.action?c[0]:c[c.length-1]),l&&this.elementFocus(l)}break;case"moveUp":case"moveDown":var d="moveUp"===t.action?"previous":"next";if(this.isVertical)this.eleFocus(e,"moveUp"===t.action?"previous":"next");else if(o&&V(n,".e-popup")){var u=o.element;if("previous"===d&&u.firstElementChild===e||"next"===d&&u.lastElementChild===e)return;this.eleFocus(e,d)}else"moveDown"===t.action&&o&&j(o.element)&&this.elementFocus(e);break;case"tab":if(!r&&!i){var p=e.firstElementChild;s===n&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(p),p.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":o&&"Extended"!==this.overflowMode&&o.hide(a);break;case"popupOpen":if(!i)return;o&&!j(o.element)?(o.element.style.top=s.offsetHeight+"px",o.show({name:"FadeIn",duration:100})):o.hide(a)}},t.prototype.keyActionHandler=function(e){var t=e.target;if("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!this.element.classList.contains("e-overlay")){var n;e.preventDefault();var i=t.classList.contains("e-hor-nav"),r=t.classList.contains("e-scroll-nav");((n=this.clstElement(i,t))||r)&&this.keyHandling(n,e,t,i,r)}},t.prototype.disable=function(e){var t=this.element;e?t.classList.add("e-overlay"):t.classList.remove("e-overlay"),t.setAttribute("tabindex",e?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",e?"-1":"0"),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(j(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},t.prototype.eleFocus=function(e,t){var n=Object(e)[t+"ElementSibling"],i=function(e){return e.classList.contains("e-separator")||e.classList.contains("e-overlay")||e.getAttribute("disabled")||e.classList.contains("e-hidden")||!j(e)};if(n){if(i(n))return void this.eleFocus(n,t);this.elementFocus(n)}else if(this.tbarAlign){var r,o=Object(e.parentElement)[t+"ElementSibling"];m(o)||0!==o.children.length||(o=Object(o)[t+"ElementSibling"]),!m(o)&&o.children.length>0&&("next"===t?i(r=o.querySelector(".e-toolbar-item"))?this.eleFocus(r,t):(r.firstElementChild.focus(),this.activeEleSwitch(r)):i(r=o.lastElementChild)?this.eleFocus(r,t):this.elementFocus(r))}},t.prototype.clickHandler=function(e){var t,n=e.target,i=n.classList,r=this.element,o=!m(V(n,".e-toolbar-pop")),s=V(n,".e-hor-nav");s||(s=n),r.children[0].classList.contains("e-hscroll")||r.children[0].classList.contains("e-vscroll")||!i.contains("e-hor-nav")||(i=n.querySelector(".e-icons").classList),(i.contains("e-popup-up-icon")||i.contains("e-popup-down-icon"))&&this.popupClickHandler(r,s,"e-rtl");var a=V(e.target,".e-toolbar-item");if(!m(a)&&!a.classList.contains("e-overlay")||s.classList.contains("e-hor-nav")){a&&(t=this.items[this.tbarEle.indexOf(a)]);var l={originalEvent:e,item:t};t&&!m(t.click)&&this.trigger("items["+this.tbarEle.indexOf(a)+"].click",l),l.cancel||this.trigger("clicked",l),m(this.popObj)||!o||l.cancel||"Popup"!==this.overflowMode||this.popObj.hide({name:"FadeOut",duration:100})}},t.prototype.popupClickHandler=function(e,t,n){var i=this.popObj;j(i.element)?(t.classList.remove("e-nav-active"),i.hide({name:"FadeOut",duration:100})):(e.classList.contains(n)&&(i.enableRtl=!0,i.position={X:"left",Y:"top"}),0!==i.offsetX||e.classList.contains(n)||(i.enableRtl=!1,i.position={X:"right",Y:"top"}),i.dataBind(),i.refreshPosition(),i.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(i.element.style.minHeight="0px"),t.classList.add("e-nav-active"),i.show({name:"FadeIn",duration:100}))},t.prototype.render=function(){this.initialize(),this.renderControl(),this.separator(),this.wireEvents()},t.prototype.initialize=function(){var e=x(this.width),t=x(this.height);"msie"===re.info.name&&"auto"===this.height&&"MultiRow"!==this.overflowMode||U(this.element,{height:t}),U(this.element,{width:e}),F(this.element,{role:"toolbar","aria-disabled":"false","aria-haspopup":"false","aria-orientation":this.isVertical?"vertical":"horizontal"})},t.prototype.renderControl=function(){this.trgtEle=this.element.children.length>0?this.element.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1)},t.prototype.changeOrientation=function(){var e=this.element;this.isVertical?(e.classList.remove("e-vertical"),this.isVertical=!1,"auto"!==this.height&&"100%"!==this.height||(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add("e-vertical"),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),U(this.element,{height:x(this.height),width:x(this.width)})),this.destroyMode(),this.refreshOverflow()},t.prototype.initScroll=function(e,t){!this.scrollModule&&this.checkOverflow(e,t[0])&&(this.tbarAlign&&this.element.querySelector("."+qy+" .e-toolbar-center").removeAttribute("style"),this.scrollModule=this.isVertical?new dh({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]):new hh({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]),this.remove(this.scrollModule.element,"e-tbar-pos"),U(this.element,{overflow:"hidden"}))},t.prototype.itemWidthCal=function(e){var t,n=this,i=0;return[].slice.call(H(".e-toolbar-item",e)).forEach(function(e){j(e)&&(t=window.getComputedStyle(e),i+=n.isVertical?e.offsetHeight:e.offsetWidth,i+=parseFloat(n.isVertical?t.marginTop:t.marginRight),i+=parseFloat(n.isVertical?t.marginBottom:t.marginLeft))}),i},t.prototype.getScrollCntEle=function(e){return e.querySelector(this.isVertical?".e-vscroll-content":".e-hscroll-content")},t.prototype.checkOverflow=function(e,t){if(m(e)||m(t)||!j(e))return!1;var n=this.isVertical?e.offsetHeight:e.offsetWidth,i=this.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||n===i)&&(i=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));var r=e.querySelector(".e-hor-nav"),o=e.querySelector(".e-scroll-nav"),s=0;return r?s=this.isVertical?r.offsetHeight:r.offsetWidth:o&&(s=this.isVertical?2*o.offsetHeight:2*o.offsetWidth),i>n-s},t.prototype.refreshOverflow=function(){this.resize()},t.prototype.toolbarAlign=function(e){this.tbarAlign&&(this.add(e,"e-tbar-pos"),this.itemPositioning())},t.prototype.renderOverflowMode=function(){var e=this.element,t=e.querySelector("."+qy),n=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===re.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":m(this.scrollModule)&&this.initScroll(e,e.getElementsByClassName(qy));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,t)||n)&&(this.createPopupEle(e,[].slice.call(H("."+qy+" .e-toolbar-item",e))),this.element.querySelector(".e-hor-nav").setAttribute("tabIndex","0")),this.toolbarAlign(t);break;case"MultiRow":this.add(t,"e-toolbar-multirow"),this.checkOverflow(e,t)&&this.tbarAlign&&(this.removePositioning(),this.add(t,"e-multirow-pos")),"hidden"===e.style.overflow&&(e.style.overflow=""),"msie"!==re.info.name&&"auto"===e.style.height||(e.style.height="auto");break;case"Extended":this.add(this.element,"e-extended-toolbar"),(this.checkOverflow(e,t)||n)&&(this.tbarAlign&&this.removePositioning(),this.createPopupEle(e,[].slice.call(H("."+qy+" .e-toolbar-item",e))),this.element.querySelector(".e-hor-nav").setAttribute("tabIndex","0")),this.toolbarAlign(t)}},t.prototype.separator=function(){var e,t=this.element,n=[].slice.call(t.querySelectorAll(".e-separator")),i=t.querySelector(".e-multirow-separator"),r=t.querySelector(".e-extended-separator");null!==(e="MultiRow"===this.overflowMode?i:r)&&("MultiRow"===this.overflowMode?e.classList.remove("e-multirow-separator"):"Extended"===this.overflowMode&&e.classList.remove("e-extended-separator"));for(var o=0;o<=n.length-1;o++)n[o].offsetLeft<30&&0!==n[o].offsetLeft&&("MultiRow"===this.overflowMode?n[o].classList.add("e-multirow-separator"):"Extended"===this.overflowMode&&n[o].classList.add("e-extended-separator"))},t.prototype.createPopupEle=function(e,t){var n=e.querySelector(".e-hor-nav"),i=this.isVertical;n||this.createPopupIcon(e),n=e.querySelector(".e-hor-nav");var r=(i?e.offsetHeight:e.offsetWidth)-(i?n.offsetHeight:n.offsetWidth);this.element.classList.remove("e-rtl"),U(this.element,{direction:"initial"}),this.checkPriority(e,t,r,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},t.prototype.pushingPoppedEle=function(e,t,n,i,r){var o=e.element,s=H(".e-overflow-show",n),a=0,l=[].slice.call(H("."+Qy,o.querySelector("."+qy))),c=0;l.forEach(function(o,l){s=H(".e-overflow-show",n),o.classList.contains("e-overflow-show")&&s.length>0?e.tbResize&&s.length>l?(n.insertBefore(o,s[l]),++c):(n.insertBefore(o,n.children[s.length]),++c):o.classList.contains("e-overflow-show")?(n.insertBefore(o,n.firstChild),++c):e.tbResize&&o.classList.contains("e-overflow-hide")&&n.children.length>0&&0===s.length?(n.insertBefore(o,n.firstChild),++c):o.classList.contains("e-overflow-hide")?t.push(o):e.tbResize?(n.insertBefore(o,n.childNodes[a+c]),++a):n.appendChild(o),o.classList.contains("e-separator")?U(o,{display:"",height:r+"px"}):U(o,{display:"",height:i+"px"})}),t.forEach(function(e){n.appendChild(e)});for(var h=H(".e-toolbar-item",o.querySelector("."+qy)),d=h.length-1;d>=0;d--){var u=h[d];if(!u.classList.contains("e-separator")||"Extended"===this.overflowMode)break;U(u,{display:"none"})}},t.prototype.createPopup=function(){var e,t,n,i,r,o=this.element;if("Extended"===this.overflowMode&&(i=o.querySelector(".e-separator:not(."+Qy+")"),n="auto"===o.style.height||""===o.style.height?null:i.offsetHeight),t=o.querySelector(".e-toolbar-item:not(.e-separator):not(."+Qy+")"),e="auto"===o.style.height||""===o.style.height?null:t&&t.offsetHeight,o.querySelector("#"+o.id+"_popup.e-toolbar-pop"))r=o.querySelector("#"+o.id+"_popup.e-toolbar-pop");else{var s=this.createElement("div",{id:o.id+"_popup",className:"e-toolbar-pop e-toolbar-extended"}),a=this.createElement("div",{id:o.id+"_popup",className:"e-toolbar-pop"});r="Extended"===this.overflowMode?s:a}this.pushingPoppedEle(this,[],r,e,n),this.popupInit(o,r)},t.prototype.getElementOffsetY=function(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},t.prototype.popupInit=function(e,t){if(this.popObj){var n=this.popObj.element;U(n,{maxHeight:"",display:"block"}),U(n,{maxHeight:n.offsetHeight+"px",display:""})}else{e.appendChild(t),U(this.element,{overflow:""});var i=window.getComputedStyle(this.element),r=new Ki(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});r.appendTo(t),"Extended"===this.overflowMode&&(r.width=parseFloat(i.width)+2*parseFloat(i.borderRightWidth),r.offsetX=0),I.add(document,"scroll",this.docEvent.bind(this)),I.add(document,"click ",this.docEvent.bind(this)),r.element.style.maxHeight=r.element.offsetHeight+"px",this.isVertical&&(r.element.style.visibility="hidden"),r.hide(),this.popObj=r,this.element.setAttribute("aria-haspopup","true")}},t.prototype.tbarPopupHandler=function(e){"Extended"===this.overflowMode&&(e?this.add(this.element,"e-tbar-extended"):this.remove(this.element,"e-tbar-extended"))},t.prototype.popupOpen=function(e){var t=this.popObj;this.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());var n=this.popObj.element,i=this.popObj.element.parentElement,r=i.querySelector(".e-hor-nav");U(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.overflowMode&&(t.element.style.minHeight="");var o=n.offsetTop+n.offsetHeight+xi(i).top,s=r.firstElementChild;r.classList.add("e-nav-active"),W(s,["e-popup-up-icon"],["e-popup-down-icon"]),this.tbarPopupHandler(!0);var a=m(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+a<o&&this.element.offsetTop<n.offsetHeight){var l=n.offsetHeight-(o-window.innerHeight-a+5);t.height=l+"px";for(var c=0;c<=n.childElementCount;c++){var h=n.children[c];if(h.offsetTop+h.offsetHeight>l){l=h.offsetTop;break}}U(t.element,{maxHeight:l+"px"})}else if(this.isVertical){var d=this.element.getBoundingClientRect();U(t.element,{maxHeight:d.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}},t.prototype.popupClose=function(e){var t=this.element.querySelector(".e-hor-nav"),n=t.firstElementChild;t.classList.remove("e-nav-active"),W(n,["e-popup-down-icon"],["e-popup-up-icon"]),this.tbarPopupHandler(!1)},t.prototype.checkPriority=function(e,t,n,i){for(var r,o=this.popupPriCount>0,s=n,a=0,l=0,c=0,h=function(e,t){var n=!1;return t.forEach(function(t){e.classList.contains(t)&&(n=!0)}),n},d=t.length-1;d>=0;d--){var u=void 0,p=window.getComputedStyle(t[d]);this.isVertical?(u=parseFloat(p.marginTop),u+=parseFloat(p.marginBottom)):(u=parseFloat(p.marginRight),u+=parseFloat(p.marginLeft));var f=t[d]===this.tbarEle[0];f&&(this.tbarEleMrgn=u),r=this.isVertical?t[d].offsetHeight:t[d].offsetWidth;var g=f?r+u:r;if(h(t[d],["e-popup-alone"])&&o&&(t[d].classList.add(Qy),U(t[d],this.isVertical?{display:"none",minHeight:g+"px"}:{display:"none",minWidth:g+"px"}),c++),this.isVertical?t[d].offsetTop+t[d].offsetHeight+u>n:t[d].offsetLeft+t[d].offsetWidth+u>n){if(t[d].classList.contains("e-separator")){if("Extended"===this.overflowMode)l===c&&h(m=t[d],["e-separator","e-ignore"])&&(t[d].classList.add(Qy),c++),l++;else if("Popup"===this.overflowMode){var m;a>0&&l===c&&h(m=t[d+l+(a-1)],["e-separator","e-ignore"])&&U(m,{display:"none"}),a++,l=0,c=0}}else l++;t[d].classList.contains("e-overflow-show")&&i?n-=(this.isVertical?t[d].offsetHeight:t[d].offsetWidth)+u:h(t[d],["e-separator","e-ignore"])?n-=(this.isVertical?t[d].offsetHeight:t[d].offsetWidth)+u:(t[d].classList.add(Qy),U(t[d],this.isVertical?{display:"none",minHeight:g+"px"}:{display:"none",minWidth:g+"px"}),c++)}}if(i){var y=H(".e-toolbar-item:not(."+Qy+")",this.element);this.checkPriority(e,y,s,!1)}},t.prototype.createPopupIcon=function(e){var t=e.id.concat("_nav"),n="e-"+e.id.concat("_nav e-hor-nav"),i=this.createElement("div",{id:t,className:n="Extended"===this.overflowMode?n+" e-expended-nav":n});"msie"!==re.info.name&&"edge"!==re.info.name||i.classList.add("e-ie-align");var r=this.createElement("div",{className:"e-popup-down-icon e-icons"});i.appendChild(r),i.setAttribute("tabindex","0"),e.appendChild(i)},t.prototype.tbarPriRef=function(e,t,n,i,r,o,s,a){var l=a,c=H("."+Qy+":not(.e-overflow-show)",this.popObj.element).length,h=function(e,t){return e.classList.contains(t)};if(0===H(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){var d=e.children[t-(t-n)-1],u=!m(d)&&h(d,"e-ignore");if(!m(d)&&h(d,"e-separator")&&!j(d)||u){d.style.display="inherit";var p=d.offsetWidth+2*parseFloat(window.getComputedStyle(d).marginRight),f=d.previousElementSibling;o+p<s||r?(e.insertBefore(i,e.children[t+l-(t-n)]),m(f)||(f.style.display="")):f.classList.contains("e-separator")&&(f.style.display="none"),d.style.display=""}else e.insertBefore(i,e.children[t+l-(t-n)])}else e.insertBefore(i,e.children[t+l-c])},t.prototype.popupRefresh=function(e,t){var n=this,i=this.element,r=this.isVertical,o=i.querySelector(".e-hor-nav"),s=i.querySelector("."+qy);if(!m(o)){var a;s.removeAttribute("style"),e.style.display="block",a=r?i.offsetHeight-(o.offsetHeight+s.offsetHeight):i.offsetWidth-(o.offsetWidth+s.offsetWidth);var l=0;[].slice.call(e.children).forEach(function(e){l+=n.popupEleWidth(e),U(e,{position:""})}),a+(r?o.offsetHeight:o.offsetWidth)>l&&0===this.popupPriCount&&(t=!0),this.popupEleRefresh(a,e,t),e.style.display="",0===e.children.length&&o&&this.popObj&&(N(o),o=null,this.popObj.destroy(),N(this.popObj.element),this.popObj=null,i.setAttribute("aria-haspopup","false"))}},t.prototype.ignoreEleFetch=function(e,t){var n=[].slice.call(t.querySelectorAll(".e-ignore")),i=[],r=0;return n.length>0?(n.forEach(function(e){i.push([].slice.call(t.children).indexOf(e))}),i.forEach(function(t){t<=e&&r++}),r):0},t.prototype.checkPopupRefresh=function(e,t){t.style.display="block";var n=this.popupEleWidth(t.firstElementChild);t.firstElementChild.style.removeProperty("Position");var i=e.offsetWidth-e.querySelector(".e-hor-nav").offsetWidth,r=e.querySelector("."+qy).offsetWidth;return t.style.removeProperty("display"),i>n+r},t.prototype.popupEleWidth=function(e){e.style.position="absolute";var t=this.isVertical?e.offsetHeight:e.offsetWidth,n=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains("e-popup-text")){var i=e.children[0];!m(n)&&e.classList.contains("e-popup-text")?n.style.display="none":!m(n)&&e.classList.contains("e-toolbar-text")&&(n.style.display="block"),i.style.minWidth="0%",t=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),i.style.minWidth="",i.style.minHeight="",m(n)||(n.style.display="")}return t},t.prototype.popupEleRefresh=function(e,t,n){for(var i,r,o=this.popupPriCount>0,s=this.tbarEle,a=this.element.querySelector("."+qy),l=0,c=function(t){if(t.classList.contains("e-popup-alone")&&o&&!n)return"continue";var c=h.popupEleWidth(t);if(t===h.tbarEle[0]&&(c+=h.tbarEleMrgn),t.style.position="",!(c<e||n))return"break";if(U(t,{minWidth:"",height:"",minHeight:""}),t.classList.contains("e-overflow-hide")||t.classList.remove(Qy),r=h.tbarEle.indexOf(t),h.tbarAlign){var d=h.items[r].align;r=h.tbarAlgEle[(d+"s").toLowerCase()].indexOf(t),s=h.tbarAlgEle[(d+"s").toLowerCase()],a=h.element.querySelector("."+qy+" .e-toolbar-"+d.toLowerCase())}var u=0;"Extended"!==h.overflowMode&&s.slice(0,r).forEach(function(t){(t.classList.contains("e-overflow-show")||t.classList.contains("e-separator"))&&(t.classList.contains("e-separator")&&(t.style.display="",e-=t.offsetWidth),u++)}),l=h.ignoreEleFetch(r,a),t.classList.contains("e-overflow-show")?(h.tbarPriRef(a,r,u,t,n,c,e,l),e-=t.offsetWidth):0===r?(a.insertBefore(t,a.firstChild),e-=t.offsetWidth):(i=H(".e-overflow-show",h.popObj.element).length,a.insertBefore(t,a.children[r+l-i]),e-=t.offsetWidth),t.style.height=""},h=this,d=0,u=[].slice.call(t.children);d<u.length&&"break"!==c(u[d]);d++);this.checkOverflow(this.element,this.element.getElementsByClassName(qy)[0])&&!n&&this.renderOverflowMode()},t.prototype.removePositioning=function(){var e=this.element.querySelector("."+qy);if(!m(e)&&e.classList.contains("e-tbar-pos")){this.remove(e,"e-tbar-pos");var t=[].slice.call(e.childNodes);t[1].removeAttribute("style"),t[2].removeAttribute("style")}},t.prototype.refreshPositioning=function(){var e=this.element.querySelector("."+qy);this.add(e,"e-tbar-pos"),this.itemPositioning()},t.prototype.itemPositioning=function(){var e,t=this.element.querySelector("."+qy);if(!m(t)&&t.classList.contains("e-tbar-pos")){var n,i=this.element.querySelector(".e-hor-nav");n=[].slice.call(this.scrollModule?t.querySelector("."+(this.isVertical?"e-vscroll-content":"e-hscroll-content")).children:t.childNodes),e=this.isVertical?n[0].offsetHeight+n[2].offsetHeight:n[0].offsetWidth+n[2].offsetWidth;var r=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(i){r-=this.isVertical?i.offsetHeight:i.offsetWidth;var o=(this.isVertical?i.offsetHeight:i.offsetWidth)+"px";n[2].removeAttribute("style"),this.isVertical?this.enableRtl?n[2].style.top=o:n[2].style.bottom=o:this.enableRtl?n[2].style.left=o:n[2].style.right=o}if(!(r<=e)){var s=(r-e-(this.isVertical?n[1].offsetHeight:n[1].offsetWidth))/2;n[1].removeAttribute("style");var a=(this.isVertical?n[0].offsetHeight:n[0].offsetWidth)+s+"px";this.isVertical?this.enableRtl?n[1].style.marginBottom=a:n[1].style.marginTop=a:this.enableRtl?n[1].style.marginRight=a:n[1].style.marginLeft=a}}},t.prototype.tbarItemAlign=function(e,t,n){var i=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var r=[];if(r.push(this.createElement("div",{className:"e-toolbar-left"})),r.push(this.createElement("div",{className:"e-toolbar-center"})),r.push(this.createElement("div",{className:"e-toolbar-right"})),0===n&&"Left"!==e.align)r.forEach(function(e){t.appendChild(e)}),this.tbarAlign=!0,this.add(t,"e-tbar-pos");else if("Left"!==e.align){var o=r[0];[].slice.call(t.childNodes).forEach(function(e){i.tbarAlgEle.lefts.push(e),o.appendChild(e)}),t.appendChild(o),t.appendChild(r[1]),t.appendChild(r[2]),this.tbarAlign=!0,this.add(t,"e-tbar-pos")}}},t.prototype.ctrlTemplate=function(){var e=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,qy),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(function(t){"DIV"===t.tagName&&(e.tbarEle.push(t),t.setAttribute("aria-disabled","false"),e.add(t,"e-toolbar-item"))})},t.prototype.renderItems=function(){var e,t,n,i=this.element,r=this.items;if(i&&i.children.length>0&&(e=i.querySelector("."+qy)),null!=this.trgtEle)this.ctrlTemplate();else if(i&&r.length>0){e||(e=this.createElement("div",{className:qy}));for(var o=0;o<r.length;o++)t=this.renderSubComponent(r[o],o),-1===this.tbarEle.indexOf(t)&&this.tbarEle.push(t),this.tbarAlign||this.tbarItemAlign(r[o],e,o),(n=e.querySelector(".e-toolbar-"+r[o].align.toLowerCase()))?(r[o].showAlwaysInPopup&&"Show"!==r[o].overflow||this.tbarAlgEle[(r[o].align+"s").toLowerCase()].push(t),n.appendChild(t)):e.appendChild(t);i.appendChild(e)}},t.prototype.setAttr=function(e,t){for(var n,i=Object.keys(e),r=0;r<i.length;r++)"class"===(n=i[r])?this.add(t,e[n]):t.setAttribute(n,e[n])},t.prototype.enableItems=function(e,t){var n=e,i=n.length;m(t)&&(t=!0);var r=function(e,t){e?(t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false")):(t.classList.add("e-overlay"),t.setAttribute("aria-disabled","true"))};if(i&&i>1){for(var o=0,s=[].slice.call(n);o<s.length;o++)r(t,s[o]);t?T(n,"e-overlay"):P(n,"e-overlay")}else r(t,i&&1===i?n[0]:e)},t.prototype.addItems=function(e,t){var n,i=this.element.querySelector("."+qy);if(m(i))this.itemsRerender(e);else{var r,o="Left";m(t)&&(t=0),e.forEach(function(e){m(e.align)||"Left"===e.align||"Left"!==o||(o=e.align)});for(var s=0,a=e;s<a.length;s++){var l=a[s];if(m(l.type)&&(l.type="Button"),n=H(".e-toolbar-item",this.element),l.align=o,r=this.renderSubComponent(l,t),this.tbarEle.length>=t&&n.length>=0){m(this.scrollModule)&&this.destroyMode();var c="L"===l.align[0]?0:"C"===l.align[0]?1:2,h=void 0;this.tbarAlign||"Left"===o?this.tbarAlign?((h=V(n[0],"."+qy).children[c]).insertBefore(r,h.children[t]),this.tbarAlgEle[(l.align+"s").toLowerCase()].splice(t,0,r),this.refreshPositioning()):0===n.length?(n=H("."+qy,this.element))[0].appendChild(r):n[0].parentNode.insertBefore(r,n[t]):(this.tbarItemAlign(l,i,1),this.tbarAlign=!0,(h=V(n[0],"."+qy).children[c]).appendChild(r),this.tbarAlgEle[(l.align+"s").toLowerCase()].push(r),this.refreshPositioning()),this.items.splice(t,0,l),this.tbarEle.splice(t,0,r),t++,this.offsetWid=i.offsetWidth}}i.style.width="",this.renderOverflowMode()}},t.prototype.removeItems=function(e){var t,n=e,i=[].slice.call(H(".e-toolbar-item",this.element));if("number"==typeof n)t=parseInt(e.toString(),10),this.removeItemByIndex(t,i);else if(n&&n.length>1)for(var r=0,o=[].slice.call(n);r<o.length;r++)t=this.tbarEle.indexOf(o[r]),this.removeItemByIndex(t,i),i=H(".e-toolbar-item",this.element);else t=i.indexOf(n&&n.length&&1===n.length?n[0]:e),this.removeItemByIndex(t,i);this.resize()},t.prototype.removeItemByIndex=function(e,t){if(this.tbarEle[e]&&t[e]){var n,i=this.tbarEle.indexOf(t[e]);this.tbarAlign&&(n=this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].indexOf(this.tbarEle[i]),this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].splice(n,1)),N(t[e]),this.items.splice(i,1),this.tbarEle.splice(i,1)}},t.prototype.templateRender=function(e,t,n,i){var r,o=e;if("object"==typeof e&&(r="function"==typeof o.appendTo),"string"!=typeof e&&r)"Input"===n.type&&((l=this.createElement("input")).id=n.id?n.id:v("tbr-ipt"),t.appendChild(l),o.appendTo(l));else{var s,a=void 0;s="string"==typeof e?e.trim():e;try{if("object"!=typeof e||m(e.tagName)){if(document.querySelectorAll(s).length){var l,c=(l=document.querySelector(s)).outerHTML.trim();t.appendChild(l),l.style.display="",m(c)||this.tempId.push(s)}}else t.appendChild(e)}catch(d){a=_t(s)}var h=void 0;m(a)||(h=a({},this,"template")),!m(h)&&h.length>0&&[].slice.call(h).forEach(function(e){m(e.tagName)||(e.style.display=""),t.appendChild(e)})}this.add(t,"e-template"),this.tbarEle.push(t)},t.prototype.buttonRendering=function(e,t){var n=this.createElement("button",{className:"e-tbar-btn"});n.setAttribute("type","button");var i,r,o=e.text;n.id=e.id?e.id:v("e-tbr-btn");var s=this.createElement("span",{className:"e-tbar-btn-text"});o?(s.innerHTML=o,n.appendChild(s),n.classList.add("e-tbtn-txt")):this.add(t,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(i=e.prefixIcon+" e-icons",r="Left"):(i=e.suffixIcon+" e-icons",r="Right"));var a=new Gy({iconCss:i,iconPosition:r});return a.createElement=this.createElement,a.appendTo(n),e.width&&U(n,{width:x(e.width)}),n},t.prototype.renderSubComponent=function(e,t){var n,i;if((n=this.createElement("div",{className:"e-toolbar-item"})).setAttribute("aria-disabled","false"),this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,n),e.tooltipText){var r=this.createElement("div",{innerHTML:e.tooltipText});n.setAttribute("title",r.textContent)}if(e.cssClass&&(n.className=n.className+" "+e.cssClass),e.template)this.templateRender(e.template,n,e,t);else switch(e.type){case"Button":(i=this.buttonRendering(e,n)).setAttribute("tabindex","-1"),n.appendChild(i),n.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(n,"e-separator")}if(e.showTextOn){var o=e.showTextOn;"Toolbar"===o?(this.add(n,"e-toolbar-text"),this.add(n,"e-tbtn-align")):"Overflow"===o&&this.add(n,"e-popup-text")}if(e.overflow){var s=e.overflow;"Show"===s?this.add(n,"e-overflow-show"):"Hide"===s&&(n.classList.contains("e-separator")||this.add(n,"e-overflow-hide"))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!n.classList.contains("e-separator")&&(this.add(n,"e-popup-alone"),this.popupPriCount++),n},t.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},t.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},t.prototype.activeEleRemove=function(e){m(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=e,m(this.trgtEle)&&!e.parentElement.classList.contains("e-template")?e.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"toolbar"},t.prototype.itemsRerender=function(e){this.items=this.tbarItemsCol,this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode()},t.prototype.resize=function(){var e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();var t=this.checkOverflow(e,e.getElementsByClassName(qy)[0]);if(!t){this.destroyScroll();var n=e.querySelector("."+qy);m(n)||(this.remove(n,"e-multirow-pos"),this.tbarAlign&&this.add(n,"e-tbar-pos"))}if(!t||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||t)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){var i=window.getComputedStyle(this.element);this.popObj.width=parseFloat(i.width)+2*parseFloat(i.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}},t.prototype.onPropertyChanged=function(e,t){for(var n=this.element,i=0,r=Object.keys(e);i<r.length;i++)switch(r[i]){case"items":if(e.items instanceof Array&&t.items instanceof Array)this.itemsRerender(e.items);else for(var o=Object.keys(e.items),s=0;s<o.length;s++){var a=parseInt(Object.keys(e.items)[s],10),l=Object.keys(e.items[a])[0],c=(Object(t.items[a]),Object(e.items[a])[l]);if(this.tbarAlign||"align"===l){this.refresh(),this.trigger("created");break}("showAlwaysInPopup"===l&&!c||this.items[a].showAlwaysInPopup&&"overflow"===l&&0!==this.popupPriCount)&&--this.popupPriCount,m(this.scrollModule)&&this.destroyMode(),N([].slice.call(H("."+qy+" .e-toolbar-item",n))[a]),this.tbarEle.splice(a,1),this.addItems([this.items[a]],a),this.items.splice(a,1),this.items[a].template&&this.tbarEle.splice(this.items.length,1)}break;case"width":var h=n.offsetWidth;U(n,{width:x(e.width)}),this.renderOverflowMode(),this.popObj&&h<n.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":U(this.element,{height:x(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(n,"e-rtl"),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(n,"e-rtl"):this.remove(n,"e-rtl"),m(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,"e-rtl"):this.remove(this.scrollModule.element,"e-rtl")),m(this.popObj)||(e.enableRtl?this.add(this.popObj.element,"e-rtl"):this.remove(this.popObj.element,"e-rtl")),this.tbarAlign&&this.itemPositioning()}},t.prototype.hideItem=function(e,t){var n,i=e;"object"==typeof e?n=e:this.tbarEle[i]&&(n=[].slice.call(H(".e-toolbar-item",this.element))[i]),n&&(t?n.classList.add("e-hidden"):n.classList.remove("e-hidden"),this.refreshOverflow())},Object(s.b)([we([],Yy)],t.prototype,"items",void 0),Object(s.b)([ye("auto")],t.prototype,"width",void 0),Object(s.b)([ye("auto")],t.prototype,"height",void 0),Object(s.b)([ye("Scrollable")],t.prototype,"overflowMode",void 0),Object(s.b)([ye(!1)],t.prototype,"enableRtl",void 0),Object(s.b)([xe()],t.prototype,"clicked",void 0),Object(s.b)([xe()],t.prototype,"created",void 0),Object(s.b)([xe()],t.prototype,"destroyed",void 0),Object(s.b)([xe()],t.prototype,"beforeCreate",void 0),Object(s.b)([Ae],t)}(ht),Zy="e-toolbar-items",Ky="e-toolbar-item",Jy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("SlideLeftIn")],t.prototype,"effect",void 0),Object(s.b)([ye(600)],t.prototype,"duration",void 0),Object(s.b)([ye("ease")],t.prototype,"easing",void 0),t}(Le),$y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ve({effect:"SlideLeftIn",duration:600,easing:"ease"},Jy)],t.prototype,"previous",void 0),Object(s.b)([ve({effect:"SlideRightIn",duration:600,easing:"ease"},Jy)],t.prototype,"next",void 0),t}(Le),ev=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("")],t.prototype,"text",void 0),Object(s.b)([ye("")],t.prototype,"iconCss",void 0),Object(s.b)([ye("left")],t.prototype,"iconPosition",void 0),t}(Le),tv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ve({},ev)],t.prototype,"header",void 0),Object(s.b)([ye("")],t.prototype,"content",void 0),Object(s.b)([ye("")],t.prototype,"cssClass",void 0),Object(s.b)([ye(!1)],t.prototype,"disabled",void 0),t}(Le),nv=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.show={},i.hide={},i.animateOptions={},i.animObj=new Oe(i.animateOptions),i.maxHeight=0,i.title="Close",i.lastIndex=0,i.isAdd=!1,i.isIconAlone=!1,i.resizeContext=i.refreshActElePosition.bind(i),i.keyConfigs={tab:"tab",home:"home",end:"end",enter:"enter",space:"space",delete:"delete",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"},i}return Object(s.c)(t,e),t.prototype.destroy=function(){var t=this;if(m(this.tbObj)||this.tbObj.destroy(),this.unWireEvents(),["role","aria-disabled","aria-activedescendant","tabindex","aria-orientation"].forEach(function(e){t.element.removeAttribute(e)}),this.expTemplateContent(),this.isTemplate){var n=z(".e-tab > .e-content",this.element);this.element.classList.remove("e-template"),m(n)||(n.innerHTML=this.cnt)}else for(;this.element.firstChild;)B(this.element.firstChild);e.prototype.destroy.call(this),this.trigger("destroyed")},t.prototype.preRender=function(){var e=V(this.element,".e-content");this.prevIndex=0,this.isNested=!1,this.isPopup=!1,this.initRender=!0,this.isSwipeed=!1,this.itemIndexArray=[],this.templateEle=[],m(e)||(e.parentElement.classList.add("e-nested"),this.isNested=!0);var t=re.info.name,n="msie"===t?"e-ie":"edge"===t?"e-edge":"safari"===t?"e-safari":"";U(this.element,{width:x(this.width),height:x(this.height)}),this.setCssClass(this.element,this.cssClass,!0),F(this.element,{role:"tablist","aria-disabled":"false","aria-activedescendant":""}),this.setCssClass(this.element,n,!0),this.updatePopAnimationConfig()},t.prototype.render=function(){this.btnCls=this.createElement("span",{className:"e-icons e-close-icon",attrs:{title:this.title}}),this.renderContainer(),this.wireEvents(),this.initRender=!1},t.prototype.renderContainer=function(){var e=this.element;if(this.items.length>0&&0===e.children.length)e.appendChild(this.createElement("div",{className:"e-content"})),this.setOrientation(this.headerPlacement,this.createElement("div",{className:"e-tab-header"})),this.isTemplate=!1;else if(this.element.children.length>0){this.isTemplate=!0,e.classList.add("e-template");var t=e.querySelector(".e-tab-header");t&&"Bottom"===this.headerPlacement&&this.setOrientation(this.headerPlacement,t)}if(!m(z(".e-tab-header",this.element))&&!m(z(".e-content",this.element))){if(this.renderHeader(),this.tbItems=z(".e-tab-header ."+Zy,this.element),m(this.tbItems)||Ee(this.tbItems,{selector:".e-tab-wrap"}),this.renderContent(),H("."+Ky,this.element).length>0){var n=void 0;this.tbItems=z(".e-tab-header ."+Zy,this.element),this.bdrLine=this.createElement("div",{className:"e-indicator e-hidden e-ignore"}),m(n=z("."+this.scrCntClass,this.tbItems))?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstChild):n.insertBefore(this.bdrLine,n.firstChild),this.setContentHeight(!0),this.select(this.selectedItem)}this.setRTL(this.enableRtl)}},t.prototype.renderHeader=function(){var e=this,t=this.headerPlacement,n=[];if(this.hdrEle=z(".e-tab-header",this.element),this.addVerticalClass(),this.isTemplate){this.element.children.length>1&&this.element.children[1].classList.contains("e-tab-header")&&this.setProperties({headerPlacement:"Bottom"},!0);for(var i=this.hdrEle.children.length,r=[],o=0;o<i;o++)r.push(this.hdrEle.children.item(o).innerHTML);i>0&&(this.hdrEle.innerHTML="",this.hdrEle.appendChild(this.createElement("div",{className:"e-items"})),r.forEach(function(t,n){e.lastIndex=n;var i={className:"e-item",id:"e-item_"+n,attrs:{role:"tab","aria-controls":"e-content_"+n,"aria-selected":"false"}},r=e.createElement("span",{className:"e-tab-text",innerHTML:t,attrs:{role:"presentation"}}).outerHTML,o=e.createElement("div",{className:"e-text-wrap",innerHTML:r+e.btnCls.outerHTML}).outerHTML,s=e.createElement("div",{className:"e-tab-wrap",innerHTML:o,attrs:{tabIndex:"-1"}});z(".e-items",e.element).appendChild(e.createElement("div",i)),H(".e-item",e.element)[n].appendChild(s)}))}else n=this.parseObject(this.items,0);this.tbObj=new Xy({width:"Left"===t||"Right"===t?"auto":"100%",height:"Left"===t||"Right"===t?"100%":"auto",overflowMode:this.overflowMode,items:0!==n.length?n:[],clicked:this.clickHandler.bind(this)}),this.tbObj.createElement=this.createElement,this.tbObj.appendTo(this.hdrEle),this.updateOrientationAttribute(),this.setCloseButton(this.showCloseButton)},t.prototype.renderContent=function(){this.cntEle=z(".e-content",this.element);var e=H("."+Ky,this.element);if(this.isTemplate){this.cnt=this.cntEle.children.length>0?this.cntEle.innerHTML:"";for(var t=this.cntEle.children,n=0;n<e.length;n++)t.length-1>=n&&(t.item(n).className+="e-item",F(t.item(n),{role:"tabpanel","aria-labelledby":"e-item_"+n}),t.item(n).id="e-content_"+n)}},t.prototype.reRenderItems=function(){this.renderContainer(),m(this.cntEle)||(this.touchModule=new wt(this.cntEle,{swipe:this.swipeHandler.bind(this)}))},t.prototype.parseObject=function(e,t){var n,i=this,r=H("."+Ky,this.element).length,o=[],s=[];return e.forEach(function(e,a){var l=m(e.header.iconPosition)?"":e.header.iconPosition,c=m(e.header.iconCss)?"":e.header.iconCss;if(m(e.header)||m(e.header.text)||0===e.header.text.length&&""===c)s.push(a);else{var h=e.header.text;i.lastIndex=0===r?a:i.isReplace?t+a:i.lastIndex+1;var d=e.disabled?" e-disable e-overlay":"";n=i.createElement("div",{className:"e-tab-text",attrs:{role:"presentation"}});var u=h instanceof Object?h.outerHTML:h,p=!m(u)&&""!==u;m(h.tagName)?i.headerTextCompile(n,h):n.appendChild(h);var f=i.createElement("span",{className:"e-icons e-tab-icon e-icon-"+l+" "+c}),g=i.createElement("div",{className:"e-text-wrap"});g.appendChild(n),""!==h&&void 0!==h&&""!==c?("left"===l||"top"===l?g.insertBefore(f,g.firstElementChild):g.appendChild(f),i.isIconAlone=!1):(""===c?n:f)===f&&(N(n),g.appendChild(f),i.isIconAlone=!0);var y=e.disabled?{}:{tabIndex:"-1"};g.appendChild(i.btnCls.cloneNode(!0));var v=i.createElement("div",{className:"e-tab-wrap",attrs:y});v.appendChild(g),i.itemIndexArray===[]?i.itemIndexArray.push("e-item_"+i.lastIndex):i.itemIndexArray.splice(t+a,0,"e-item_"+i.lastIndex);var b={htmlAttributes:{id:"e-item_"+i.lastIndex,role:"tab","aria-selected":"false"},template:v};b.cssClass=e.cssClass+" "+d+" "+(""!==c?"e-i"+l:"")+" "+(p?"":"e-icon"),"top"!==l&&"bottom"!==l||i.element.classList.add("e-vertical-icon"),o.push(b),a++}}),this.isAdd||s.forEach(function(e){i.items.splice(e,1)}),this.isIconAlone?this.element.classList.add("e-icon-tab"):this.element.classList.remove("e-icon-tab"),o},t.prototype.removeActiveClass=function(e){var t=H(":root .e-tab-header .e-toolbar-item.e-active",this.element)[0];"Bottom"===this.headerPlacement&&(t=H(":root .e-tab-header .e-toolbar-item.e-active",this.element.children[1])[0]),m(t)||t.classList.remove("e-active")},t.prototype.checkPopupOverflow=function(e){this.tbPop=z(".e-toolbar-pop",this.element);var t=z(".e-hor-nav",this.element),n=z("."+Zy,this.element),i=n.lastChild,r=!1;return!this.isVertical()&&(this.enableRtl&&t.offsetLeft+t.offsetWidth>n.offsetLeft||!this.enableRtl&&t.offsetLeft<n.offsetWidth)?r=!0:this.isVertical()&&t.offsetTop<i.offsetTop+i.offsetHeight&&(r=!0),r&&(e.classList.add("e-toolbar-popup"),this.tbPop.insertBefore(e.cloneNode(!0),H(".e-toolbar-popup",this.tbPop)[0]),e.outerHTML=""),!0},t.prototype.popupHandler=function(e){var t=e.querySelector(".e-ripple-element");m(t)||(t.outerHTML="",e.querySelector(".e-tab-wrap").classList.remove("e-ripple")),this.tbItem=H(".e-toolbar-items ."+Ky,this.hdrEle);var n=this.tbItem[this.tbItem.length-1];return 0!==this.tbItem.length&&(e.classList.remove("e-toolbar-popup"),e.removeAttribute("style"),this.tbItems.appendChild(e.cloneNode(!0)),this.actEleId=e.id,e.outerHTML="",this.checkPopupOverflow(n)&&this.checkPopupOverflow(this.tbItems.lastChild.previousElementSibling),this.isPopup=!0),H("."+Ky,this.tbItems).length-1},t.prototype.updateOrientationAttribute=function(){F(this.element,{"aria-orientation":this.isVertical()?"vertical":"horizontal"})},t.prototype.setCloseButton=function(e){var t=z(".e-tab-header",this.element);!0===e?t.classList.add("e-close-show"):t.classList.remove("e-close-show"),this.tbObj.refreshOverflow(),this.refreshActElePosition()},t.prototype.prevCtnAnimation=function(e,t){return this.enableRtl||this.element.classList.contains("e-rtl"),this.isPopup||e<=t?"SlideLeftIn"===this.animation.previous.effect?{name:"SlideLeftOut",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}:null:"SlideRightIn"===this.animation.next.effect?{name:"SlideRightOut",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}:null},t.prototype.triggerPrevAnimation=function(e,t){var n=this,i=this.prevCtnAnimation(t,this.selectedItem);m(i)?e.classList.remove("e-active"):(i.begin=function(){U(e,{position:"absolute"}),e.classList.add("e-progress"),e.classList.add("e-view")},i.end=function(){e.style.display="none",e.classList.remove("e-active"),e.classList.remove("e-progress"),e.classList.remove("e-view"),U(e,{display:"",position:""}),0!==e.childNodes.length||n.isTemplate||N(e)},new Oe(i).animate(e))},t.prototype.triggerAnimation=function(e,t){var n,i=this,r=this.prevIndex;[].slice.call(this.element.querySelector(".e-content").children).forEach(function(e){e.id===i.prevActiveEle&&(n=e)});var o=this.tbItem[r],s=this.extIndex(this.tbItem[this.selectedItem].id),a=this.getTrgContent(this.cntEle,s);if(m(n)&&!m(o)){var l=this.extIndex(o.id);n=this.getTrgContent(this.cntEle,l)}if(this.prevActiveEle=a.id,this.initRender||!1===t||this.animation==={}||m(this.animation))n&&n!==a&&n.classList.remove("e-active");else{var c,h=z(".e-content",this.element);if(this.prevIndex>this.selectedItem&&!this.isPopup){var d=this.animation.previous.effect;c={name:"None"===d?"":"SlideLeftIn"!==d?d:"SlideLeftIn",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}}else if(this.isPopup||this.prevIndex<this.selectedItem||this.prevIndex===this.selectedItem){var u=this.animation.next.effect;c={name:"None"===u?"":"SlideRightIn"!==u?u:"SlideRightIn",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}}c.progress=function(){h.classList.add("e-progress"),i.setActiveBorder()},c.end=function(){h.classList.remove("e-progress"),a.classList.add("e-active")},this.initRender||m(n)||this.triggerPrevAnimation(n,r),this.isPopup=!1,""===c.name?a.classList.add("e-active"):new Oe(c).animate(a)}},t.prototype.keyPressed=function(e){var t=V(e,".e-tab-header ."+Ky),n=this.getEleIndex(t);!m(this.popEle)&&e.classList.contains("e-hor-nav")?this.popEle.classList.contains("e-popup-open")?this.popObj.hide(this.hide):this.popObj.show(this.show):e.classList.contains("e-scroll-nav")?e.click():m(t)||!1!==t.classList.contains("e-active")||(this.select(n),m(this.popEle)||this.popObj.hide(this.hide))},t.prototype.getEleIndex=function(e){return Array.prototype.indexOf.call(H(".e-tab-header ."+Ky,this.element),e)},t.prototype.extIndex=function(e){return e.replace("e-item_","")},t.prototype.expTemplateContent=function(){var e=this;this.templateEle.forEach(function(t){m(e.element.querySelector(t))||(document.body.appendChild(e.element.querySelector(t)).style.display="none")})},t.prototype.templateCompile=function(e,t){var n=this.createElement("div");this.compileElement(n,t,"content"),0!==n.childNodes.length&&e.appendChild(n)},t.prototype.compileElement=function(e,t,n){"string"==typeof t&&(t=t.trim());var i,r=_t(t);m(r)||(i=r({},this,n)),!m(r)&&i.length>0&&[].slice.call(i).forEach(function(t){e.appendChild(t)})},t.prototype.headerTextCompile=function(e,t){this.compileElement(e,t,"headerText")},t.prototype.getContent=function(e,t,n){var i;if("string"==typeof t||m(t.innerHTML))if("."===t[0]||"#"===t[0])if(document.querySelectorAll(t).length){var r=document.querySelector(t);i=r.outerHTML.trim(),"clone"===n?e.appendChild(r.cloneNode(!0)):(e.appendChild(r),r.style.display="")}else this.templateCompile(e,t);else this.templateCompile(e,t);else e.appendChild(t);m(i)||-1===this.templateEle.indexOf(t.toString())&&this.templateEle.push(t.toString())},t.prototype.getTrgContent=function(e,t){return this.element.classList.contains("e-nested")?z(".e-nested> .e-content > #e-content_"+t,this.element):this.findEle(e.children,"e-content_"+t)},t.prototype.findEle=function(e,t){for(var n,i=0;i<e.length;i++)if(e[i].id===t){n=e[i];break}return n},t.prototype.isVertical=function(){var e="Left"===this.headerPlacement||"Right"===this.headerPlacement;return this.scrCntClass=e?"e-vscroll-content":"e-hscroll-content",e},t.prototype.addVerticalClass=function(){this.isVertical()&&(P([this.hdrEle],["e-vertical","Left"===this.headerPlacement?"e-vertical-left":"e-vertical-right"]),this.element.classList.add("e-vertical-tab"))},t.prototype.updatePopAnimationConfig=function(){this.show={name:this.isVertical()?"FadeIn":"SlideDown",duration:100},this.hide={name:this.isVertical()?"FadeOut":"SlideUp",duration:100}},t.prototype.changeOrientation=function(e){this.setOrientation(e,this.hdrEle);var t=!!this.hdrEle.classList.contains("e-vertical");T([this.element],["e-vertical-tab"]),T([this.hdrEle],["e-vertical","e-vertical-left","e-vertical-right"]),t!==this.isVertical()&&(this.tbObj.setProperties({height:this.isVertical()?"100%":"auto",width:this.isVertical()?"auto":"100%"},!0),this.tbObj.changeOrientation(),this.updatePopAnimationConfig()),this.addVerticalClass(),this.updateOrientationAttribute(),this.select(this.selectedItem)},t.prototype.setOrientation=function(e,t){"Bottom"===e&&1!==Array.prototype.indexOf.call(this.element.children,t)?this.element.appendChild(t):this.element.insertBefore(t,z(".e-content",this.element))},t.prototype.setCssClass=function(e,t,n){if(""!==t)for(var i=t.split(" "),r=0;r<i.length;r++)n?e.classList.add(i[r]):e.classList.remove(i[r])},t.prototype.setContentHeight=function(e){if(!m(this.cntEle)){var t=z(".e-tab-header",this.element);if("None"===this.heightAdjustMode){if("auto"===this.height)return;this.isVertical()||U(this.cntEle,{height:this.element.offsetHeight-t.offsetHeight+"px"})}else if("Fill"===this.heightAdjustMode)U(this.element,{height:"100%"}),U(this.cntEle,{height:"auto"});else if("Auto"===this.heightAdjustMode){var n=H(".e-content > .e-item",this.element);if(!0===this.isTemplate)for(var i=0;i<n.length;i++)n[i].setAttribute("style","display:block; visibility: visible"),this.maxHeight=Math.max(this.maxHeight,this.getHeight(n[i])),n[i].style.removeProperty("display"),n[i].style.removeProperty("visibility");else{this.cntEle=z(".e-content",this.element),!0===e&&this.cntEle.appendChild(this.createElement("div",{id:"e-content_0",className:"e-item e-active",attrs:{role:"tabpanel","aria-labelledby":"e-item_0"}}));var r=this.cntEle.children.item(0);for(i=0;i<this.items.length;i++)for(this.getContent(r,this.items[i].content,"clone"),this.maxHeight=Math.max(this.maxHeight,this.getHeight(r));r.firstChild;)r.removeChild(r.firstChild);this.clearTemplate(["content"]),this.templateEle=[],this.getContent(r,this.items[0].content,"render"),r.classList.remove("e-active")}U(this.cntEle,{height:this.maxHeight+"px"})}else U(this.cntEle,{height:"auto"})}},t.prototype.getHeight=function(e){var t=window.getComputedStyle(e);return e.offsetHeight+parseFloat(t.getPropertyValue("padding-top"))+parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))},t.prototype.setActiveBorder=function(){var e,t,n,i;if("Bottom"===this.headerPlacement?(i=this.element.children[1],e=z(".e-toolbar-item.e-active",this.element.children[1])):(i=this.element.children[0],e=z(".e-toolbar-item.e-active",this.element)),null!==e){var r=V(e,".e-tab");if(this.element===r){if(this.tbItems=z("."+Zy,i),t=z(".e-indicator",i),n=z(".e-toolbar-items ."+this.scrCntClass,i),this.isVertical())U(t,{left:"",right:""}),U(t,0!==(m(n)?this.tbItems.offsetHeight:n.offsetHeight)?{top:e.offsetTop+"px",height:e.offsetHeight+"px"}:{top:0,height:0});else{U(t,{top:"",height:""});var o=m(n)?this.tbItems.offsetWidth:n.offsetWidth;U(t,0!==o?{left:e.offsetLeft+"px",right:o-(e.offsetLeft+e.offsetWidth)+"px"}:{left:"auto",right:"auto"})}m(this.bdrLine)||this.bdrLine.classList.remove("e-hidden")}}},t.prototype.setActive=function(e){this.tbItem=H(".e-tab-header ."+Ky,this.element);var t=this.tbItem[e];if(e>=0&&this.setProperties({selectedItem:e},!0),!(e<0||isNaN(e)||0===this.tbItem.length))if(t.classList.contains("e-active"))this.setActiveBorder();else{if(!this.isTemplate){var n=this.tbItem[this.prevIndex];m(n)||n.removeAttribute("aria-controls"),F(t,{"aria-controls":"e-content_"+e})}var i=t.id;this.removeActiveClass(i),t.classList.add("e-active"),t.setAttribute("aria-selected","true");var r=Number(this.extIndex(i));if(m(this.prevActiveEle)&&(this.prevActiveEle="e-content_"+r),F(this.element,{"aria-activedescendant":i}),this.isTemplate){if(z(".e-content",this.element).children.length>0){var o=this.findEle(z(".e-content",this.element).children,"e-content_"+r);m(o)||o.classList.add("e-active"),this.triggerAnimation(i,this.enableAnimation)}}else{this.cntEle=z(".e-tab > .e-content",this.element);var s=this.getTrgContent(this.cntEle,this.extIndex(i));if(m(s)){this.cntEle.appendChild(this.createElement("div",{id:"e-content_"+this.extIndex(i),className:"e-item e-active",attrs:{role:"tabpanel","aria-labelledby":"e-item_"+this.extIndex(i)}}));var a=this.getTrgContent(this.cntEle,this.extIndex(i)),l=Array.prototype.indexOf.call(this.itemIndexArray,t.id);this.getContent(a,this.items[l].content,"render")}else s.classList.add("e-active");this.triggerAnimation(i,this.enableAnimation)}this.setActiveBorder();var c=z(".e-tab-header #"+i,this.element);this.refreshItemVisibility(c),this.initRender||c.firstChild.focus();var h={previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:t,selectedIndex:e,selectedContent:z("#e-content_"+this.selectedID,this.content),isSwiped:this.isSwipeed};this.initRender&&0===this.selectedItem||this.trigger("selected",h)}},t.prototype.setItems=function(e){this.isReplace=!0,this.tbItems=z(".e-tab-header ."+Zy,this.element),this.tbObj.items=this.parseObject(e,0),this.tbObj.dataBind(),this.isReplace=!1},t.prototype.setRTL=function(e){this.tbObj.enableRtl=e,this.tbObj.dataBind(),this.setCssClass(this.element,"e-rtl",e),this.refreshActiveBorder()},t.prototype.refreshActiveBorder=function(){m(this.bdrLine)||this.bdrLine.classList.add("e-hidden"),this.setActiveBorder()},t.prototype.showPopup=function(e){var t=z(".e-popup.e-toolbar-pop",this.hdrEle);if(t.classList.contains("e-popup-close")){var n=t&&t.ej2_instances[0];n.position.X="Left"===this.headerPlacement?"left":"right",n.dataBind(),n.show(e)}},t.prototype.wireEvents=function(){window.addEventListener("resize",this.resizeContext),I.add(this.element,"mouseover",this.hoverHandler,this),I.add(this.element,"keydown",this.spaceKeyDown,this),m(this.cntEle)||(this.touchModule=new wt(this.cntEle,{swipe:this.swipeHandler.bind(this)})),this.keyModule=new mt(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs}),this.tabKeyModule=new mt(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:{openPopup:"shift+f10",tab:"tab",shiftTab:"shift+tab"},eventName:"keydown"})},t.prototype.unWireEvents=function(){this.keyModule.destroy(),this.tabKeyModule.destroy(),m(this.cntEle)||this.touchModule.destroy(),window.removeEventListener("resize",this.resizeContext),I.remove(this.element,"mouseover",this.hoverHandler),I.remove(this.element,"keydown",this.spaceKeyDown),this.element.classList.remove("e-rtl"),this.element.classList.remove("e-focused")},t.prototype.clickHandler=function(e){this.element.classList.remove("e-focused");var t=e.originalEvent.target,n=V(t,"."+Ky),i=this.getEleIndex(n);t.classList.contains("e-close-icon")?this.removeTab(i):this.isVertical()&&V(t,".e-hor-nav")?this.showPopup(this.show):(this.isPopup=!1,m(n)||i===this.selectedItem||this.select(i))},t.prototype.swipeHandler=function(e){if(!(e.velocity<3&&m(e.originalEvent.changedTouches))){if(this.isSwipeed=!0,"Right"===e.swipeDirection&&0!==this.selectedItem){for(var t=this.selectedItem-1;t>=0;t--)if(!this.tbItem[t].classList.contains("e-hidden")){this.select(t);break}}else if("Left"===e.swipeDirection&&this.selectedItem!==H("."+Ky,this.element).length-1)for(var n=this.selectedItem+1;n<this.tbItem.length;n++)if(!this.tbItem[n].classList.contains("e-hidden")){this.select(n);break}this.isSwipeed=!1}},t.prototype.spaceKeyDown=function(e){(32===e.keyCode&&32===e.which||35===e.keyCode&&35===e.which)&&(m(V(e.target,".e-tab-header"))||e.preventDefault())},t.prototype.keyHandler=function(e){if(!this.element.classList.contains("e-disable")){this.element.classList.add("e-focused");var t=e.target,n=z(".e-tab-header .e-active",this.element);switch(H(".e-toolbar-item:not(.e-toolbar-popup)",this.element),this.popEle=z(".e-tab-header .e-toolbar-pop",this.element),m(this.popEle)||(this.popObj=this.popEle.ej2_instances[0]),e.action){case"space":case"enter":if(t.parentElement.classList.contains("e-disable"))return;if("enter"===e.action&&t.classList.contains("e-hor-nav")){this.showPopup(this.show);break}this.keyPressed(t);break;case"tab":case"shiftTab":t.classList.contains("e-tab-wrap")&&!1===V(t,"."+Ky).classList.contains("e-active")&&t.setAttribute("tabindex","-1"),this.popObj&&j(this.popObj.element)&&this.popObj.hide(this.hide),n.children.item(0).setAttribute("tabindex","0");break;case"moveLeft":case"moveRight":var i=V(document.activeElement,"."+Ky);m(i)||this.refreshItemVisibility(i);break;case"openPopup":e.preventDefault(),!m(this.popEle)&&this.popEle.classList.contains("e-popup-close")&&this.popObj.show(this.show);break;case"delete":var r=V(t,"."+Ky);if(!0===this.showCloseButton&&!m(r)){var o=r.nextSibling;!m(o)&&o.classList.contains(Ky)&&o.firstChild.focus(),this.removeTab(this.getEleIndex(r))}this.setActiveBorder()}}},t.prototype.refreshActElePosition=function(){var e=z(".e-toolbar-item.e-toolbar-popup.e-active",this.element);m(e)||this.select(this.getEleIndex(e)),this.refreshActiveBorder()},t.prototype.refreshItemVisibility=function(e){var t=z("."+this.scrCntClass,this.tbItems);if(!this.isVertical()&&!m(t)){var n=z(".e-hscroll-bar",this.tbItems),i=n.scrollLeft,r=i+n.offsetWidth,o=e.offsetLeft,s=e.offsetWidth,a=e.offsetLeft+e.offsetWidth;i<o&&r<a?n.scrollLeft=i+(s-(r-o)):i>o&&r>a&&(n.scrollLeft=i-(s-(a-i)))}},t.prototype.hoverHandler=function(e){var t=e.target;!m(t.classList)&&t.classList.contains("e-close-icon")&&t.setAttribute("title",new yt("tab",{closeButtonTitle:this.title},this.locale).getConstant("closeButtonTitle"))},t.prototype.evalOnPropertyChangeItems=function(e,t){if(e.items instanceof Array&&t.items instanceof Array)this.lastIndex=0,m(this.tbObj)?this.reRenderItems():(this.setItems(e.items),this.templateEle.length>0&&this.expTemplateContent(),this.templateEle=[],z(".e-tab > .e-content",this.element).innerHTML="",this.select(this.selectedItem));else for(var n=Object.keys(e.items),i=0;i<n.length;i++){var r=parseInt(Object.keys(e.items)[i],10),o=Object.keys(e.items[r])[0],s=Object(t.items[r])[o],a=Object(e.items[r])[o],l=z(".e-toolbar-items #e-item_"+r,this.element),c=z(".e-content #e-content_"+r,this.element);if("header"===o)if(""===this.items[r].header.text&&""===this.items[r].header.iconCss)this.removeTab(r);else{var h=[];h.push(this.items[r]),this.items.splice(r,1),this.itemIndexArray.splice(r,1),this.tbObj.items.splice(r,1);var d=l.classList.contains("e-hidden");N(l),this.isReplace=!0,this.addTab(h,r),d&&this.hideTab(r),this.isReplace=!1}if("content"===o&&!m(c))if("string"!=typeof a&&!m(a.innerHTML)||"."!==a[0]&&"#"!==a[0]||!a.length)""===a&&"#"===s[0]?(document.body.appendChild(this.element.querySelector(s)).style.display="none",c.innerHTML=a):c.innerHTML=a;else{var u=document.querySelector(a);c.appendChild(u),u.style.display=""}"cssClass"===o&&(m(l)||(l.classList.remove(s),l.classList.add(a)),m(c)||(c.classList.remove(s),c.classList.add(a))),"disabled"===o&&this.enableTab(r,!0!==a)}},t.prototype.enableTab=function(e,t){var n=H("."+Ky,this.element)[e];m(n)||(!0===t?(n.classList.remove("e-disable","e-overlay"),n.firstChild.setAttribute("tabindex","-1")):(n.classList.add("e-disable","e-overlay"),n.firstChild.removeAttribute("tabindex"),n.classList.contains("e-active")&&this.select(e+1)),m(this.items[e])||(this.items[e].disabled=!t,this.dataBind()),n.setAttribute("aria-disabled",!0===t?"false":"true"))},t.prototype.addTab=function(e,t){var n=this,i=0,r={addedItems:e,cancel:!1};if(this.isReplace||this.trigger("adding",r),!r.cancel){if(this.hdrEle=z(".e-tab-header",this.element),m(this.hdrEle))return this.items=e,void this.reRenderItems();var o=H("."+Ky,this.element).length;if(0!==o&&(i=this.lastIndex+1),m(t)&&(t=o-1),!(o<t||t<0||isNaN(t))){0!==o||m(this.hdrEle)||(this.hdrEle.style.display=""),m(this.bdrLine)||this.bdrLine.classList.add("e-hidden"),this.tbItems=z(".e-tab-header ."+Zy,this.element),this.isAdd=!0;var s=this.parseObject(e,t);this.isAdd=!1;var a,l=0;e.forEach(function(e,r){if(a=e.header.text,m(e.header)||m(a)||0===a.length&&m(e.header.iconCss)||(n.items.splice(t+l,0,e),l++),n.isTemplate&&!m(e.header)&&!m(e.header.text)){var o=i+r,s=n.createElement("div",{id:"e-content_"+o,className:"e-item",attrs:{role:"tabpanel","aria-labelledby":"e-item_"+o}});n.cntEle.insertBefore(s,n.cntEle.children[t+r]);var c=n.getTrgContent(n.cntEle,o.toString());n.getContent(c,e.content,"render")}}),this.tbObj.addItems(s,t),this.isReplace||this.trigger("added",{addedItems:e}),this.selectedItem===t?this.select(t):this.setActiveBorder()}}},t.prototype.removeTab=function(e){var t=H("."+Ky,this.element)[e],n={removedItem:t,removedIndex:e,cancel:!1};if(this.trigger("removing",n),!n.cancel&&!m(t)){this.tbObj.removeItems(e),this.items.splice(e,1),this.itemIndexArray.splice(e,1),this.refreshActiveBorder();var i=z("#e-content_"+this.extIndex(t.id),z(".e-content",this.element));m(i)||N(i),this.trigger("removed",n),t.classList.contains("e-active")&&(e=e>H(".e-toolbar-item:not(.e-toolbar-popup)",this.element).length-1?e-1:e,this.enableAnimation=!1,this.selectedItem=e,this.select(e)),0===H("."+Ky,this.element).length&&(this.hdrEle.style.display="none"),this.enableAnimation=!0}},t.prototype.hideTab=function(e,t){var n,i=H("."+Ky,this.element)[e];if(!m(i)){if(m(t)&&(t=!0),this.bdrLine.classList.add("e-hidden"),!0===t)if(i.classList.add("e-hidden"),0!==(n=H(".e-toolbar-item:not(.e-hidden)",this.tbItems)).length&&i.classList.contains("e-active")){if(0!==e)for(var r=e-1;r>=0;r--){if(!this.tbItem[r].classList.contains("e-hidden")){this.select(r);break}if(0===r)for(var o=e+1;o<this.tbItem.length;o++)if(!this.tbItem[o].classList.contains("e-hidden")){this.select(o);break}}else for(o=e+1;o<this.tbItem.length;o++)if(!this.tbItem[o].classList.contains("e-hidden")){this.select(o);break}}else 0===n.length&&this.element.classList.add("e-hidden");else this.element.classList.remove("e-hidden"),0===(n=H(".e-toolbar-item:not(.e-hidden)",this.tbItems)).length&&this.select(e),i.classList.remove("e-hidden");this.setActiveBorder(),i.setAttribute("aria-hidden",""+t)}},t.prototype.select=function(e){this.tbItems=z(".e-tab-header ."+Zy,this.element),this.tbItem=H(".e-tab-header ."+Ky,this.element),this.content=z(".e-content",this.element),this.prevItem=this.tbItem[this.prevIndex],m(this.selectedItem)||this.selectedItem<0||this.tbItem.length<=this.selectedItem||isNaN(this.selectedItem)?this.selectedItem=0:this.selectedID=this.extIndex(this.tbItem[this.selectedItem].id);var t=this.tbItem[e];m(t)?this.selectedID="0":this.selectingID=this.extIndex(t.id),m(this.prevItem)||this.prevItem.classList.contains("e-disable")||this.prevItem.children.item(0).setAttribute("tabindex","-1");var n={previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:this.tbItem[this.selectedItem],selectedIndex:this.selectedItem,selectedContent:m(this.content)?null:z("#e-content_"+this.selectedID,this.content),selectingItem:t,selectingIndex:e,selectingContent:m(this.content)?null:z("#e-content_"+this.selectingID,this.content),isSwiped:this.isSwipeed};if(this.initRender&&0===this.selectedItem||this.trigger("selecting",n),!n.cancel)if("number"==typeof e){if(!m(this.tbItem[e])&&this.tbItem[e].classList.contains("e-disable"))for(var i=e+1;i<this.items.length;i++){if(!1===this.items[i].disabled){e=i;break}e=0}this.tbItem.length>e&&e>=0&&!isNaN(e)?(this.prevIndex=this.selectedItem,this.tbItem[e].classList.contains("e-toolbar-popup")?this.setActive(this.popupHandler(this.tbItem[e])):this.setActive(e)):this.setActive(0)}else e instanceof HTMLElement&&this.setActive(this.getEleIndex(e))},t.prototype.disable=function(e){this.setCssClass(this.element,"e-disable",e),this.element.setAttribute("aria-disabled",""+e)},t.prototype.getPersistData=function(){return this.addOnPersist(["selectedItem","actEleId"])},t.prototype.getModuleName=function(){return"tab"},t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"width":U(this.element,{width:x(e.width)});break;case"height":U(this.element,{height:x(e.height)}),this.setContentHeight(!1);break;case"cssClass":this.setCssClass(this.element,e.cssClass,!0);break;case"items":this.evalOnPropertyChangeItems(e,t);break;case"showCloseButton":this.setCloseButton(e.showCloseButton);break;case"selectedItem":this.selectedItem=t.selectedItem,this.select(e.selectedItem);break;case"headerPlacement":this.changeOrientation(e.headerPlacement);break;case"enableRtl":this.setRTL(e.enableRtl);break;case"overflowMode":this.tbObj.overflowMode=e.overflowMode,this.tbObj.dataBind(),this.refreshActElePosition();break;case"heightAdjustMode":this.setContentHeight(!1),this.select(this.selectedItem)}},Object(s.b)([we([],tv)],t.prototype,"items",void 0),Object(s.b)([ye("100%")],t.prototype,"width",void 0),Object(s.b)([ye("auto")],t.prototype,"height",void 0),Object(s.b)([ye("")],t.prototype,"cssClass",void 0),Object(s.b)([ye(0)],t.prototype,"selectedItem",void 0),Object(s.b)([ye("Top")],t.prototype,"headerPlacement",void 0),Object(s.b)([ye("Content")],t.prototype,"heightAdjustMode",void 0),Object(s.b)([ye("Scrollable")],t.prototype,"overflowMode",void 0),Object(s.b)([ye(!1)],t.prototype,"enableRtl",void 0),Object(s.b)([ye(!1)],t.prototype,"enablePersistence",void 0),Object(s.b)([ye(!1)],t.prototype,"showCloseButton",void 0),Object(s.b)([ve({},$y)],t.prototype,"animation",void 0),Object(s.b)([xe()],t.prototype,"created",void 0),Object(s.b)([xe()],t.prototype,"adding",void 0),Object(s.b)([xe()],t.prototype,"added",void 0),Object(s.b)([xe()],t.prototype,"selecting",void 0),Object(s.b)([xe()],t.prototype,"selected",void 0),Object(s.b)([xe()],t.prototype,"removing",void 0),Object(s.b)([xe()],t.prototype,"removed",void 0),Object(s.b)([xe()],t.prototype,"destroyed",void 0),Object(s.b)([Ae],t)}(ht),iv={RTL:"e-rtl",DISABLE:"e-disabled",INPUT:"e-input",INPUTGROUP:"e-input-group",FLOATINPUT:"e-float-input",FLOATLINE:"e-float-line",FLOATTEXT:"e-float-text",CLEARICON:"e-clear-icon",CLEARICONHIDE:"e-clear-icon-hide",LABELTOP:"e-label-top",LABELBOTTOM:"e-label-bottom",NOFLOATLABEL:"e-no-float-label",INPUTCUSTOMTAG:"e-input-custom-tag",FLOATCUSTOMTAG:"e-float-custom-tag"};!function(e){function t(){var e=s(this).getElementsByClassName("e-float-text")[0];P([e],iv.LABELTOP),e.classList.contains(iv.LABELBOTTOM)&&T([e],iv.LABELBOTTOM)}function n(){var e=s(this);if(e.getElementsByTagName("textarea")[0]?""===e.getElementsByTagName("textarea")[0].value:""===e.getElementsByTagName("input")[0].value){var t=e.getElementsByClassName("e-float-text")[0];t.classList.contains(iv.LABELTOP)&&T([t],iv.LABELTOP),P([t],iv.LABELBOTTOM)}}function i(e,i,r){var s,a,c,h=m(r)?k:r;"Auto"===e.floatLabelType&&((c=e.element).addEventListener("focus",t),c.addEventListener("blur",n)),m(i.container)?(i.container=l(e,iv.FLOATINPUT,iv.FLOATCUSTOMTAG,"div",h),e.element.parentNode.insertBefore(i.container,e.element)):(m(e.customTag)||i.container.classList.add(iv.FLOATCUSTOMTAG),i.container.classList.add(iv.FLOATINPUT)),s=h("span",{className:iv.FLOATLINE}),a=h("label",{className:iv.FLOATTEXT}),m(e.element.id)||""===e.element.id||(a.id="label_"+e.element.id.replace(/ /g,"_"),F(e.element,{"aria-labelledby":a.id})),m(e.element.placeholder)||""===e.element.placeholder||(a.innerHTML=e.element.placeholder,e.element.removeAttribute("placeholder")),m(e.properties)||m(e.properties.placeholder)||""===e.properties.placeholder||(a.innerHTML=e.properties.placeholder),a.innerHTML||i.container.classList.add(iv.NOFLOATLABEL),i.container.appendChild(e.element),i.container.appendChild(s),i.container.appendChild(a),o(e.element.value,a),"Always"===e.floatLabelType&&(a.classList.contains(iv.LABELBOTTOM)&&T([a],iv.LABELBOTTOM),P([a],iv.LABELTOP)),"Auto"===e.floatLabelType&&(e.element.addEventListener("input",function(t){o(e.element.value,a)}),e.element.addEventListener("blur",function(t){o(e.element.value,a)})),m(e.element.getAttribute("id"))||a.setAttribute("for",e.element.getAttribute("id"))}function r(e,t){e?T([t],iv.CLEARICONHIDE):P([t],iv.CLEARICONHIDE)}function o(e,t){e?(P([t],iv.LABELTOP),t.classList.contains(iv.LABELBOTTOM)&&T([t],iv.LABELBOTTOM)):(t.classList.contains(iv.LABELTOP)&&T([t],iv.LABELTOP),P([t],iv.LABELBOTTOM))}function s(e){return e.parentNode}function a(e,t){if(s(e).classList.contains(iv.FLOATINPUT)&&"Auto"===t){var n=s(e).getElementsByClassName("e-float-text")[0];o(e.value,n)}}function l(e,t,n,i,r){var o,s=m(r)?k:r;return m(e.customTag)?o=s(i,{className:t}):(o=s(e.customTag,{className:t})).classList.add(n),o.classList.add("e-control-wrapper"),o}function c(e,t,n){m(n)||""===n||T(t,n.split(" ")),m(e)||""===e||P(t,e.split(" "))}function h(e,t){var n;e=function(e){var t="";if(!m(e)&&""!==e){var n=document.createElement("span");n.innerHTML=e,t=n.textContent}return t}(e),(n=s(t)).classList.contains(iv.FLOATINPUT)?m(e)||""===e?(n.classList.add(iv.NOFLOATLABEL),n.getElementsByClassName(iv.FLOATTEXT)[0].textContent=""):(n.getElementsByClassName(iv.FLOATTEXT)[0].textContent=e,n.classList.remove(iv.NOFLOATLABEL)):m(e)||""===e?(t.removeAttribute("placeholder"),t.removeAttribute("aria-placeholder")):F(t,{placeholder:e,"aria-placeholder":e})}function d(e,t,n){e?F(t,{readonly:""}):t.removeAttribute("readonly"),m(n)||a(t,n)}function u(e,t){e?P(t,iv.RTL):T(t,iv.RTL)}function p(e,t,n,i){var r={disabled:"disabled","aria-disabled":"true"},o=!m(i);e?(t.classList.remove(iv.DISABLE),g(r,t),o&&T([i],iv.DISABLE)):(t.classList.add(iv.DISABLE),y(r,t),o&&P([i],iv.DISABLE)),m(n)||a(t,n)}function f(e,t,n,i,o){var s=m(o)?k:o;e?n.clearButton=function(e,t,n,i){var o=(m(i)?k:i)("span",{className:iv.CLEARICON}),s=t.container;return m(n)?(t.container.classList.contains(iv.FLOATINPUT)?t.container.querySelector("."+iv.FLOATTEXT):e).insertAdjacentElement("afterend",o):s.appendChild(o),!m(s)&&s.classList.contains(iv.FLOATINPUT)&&P([s],iv.INPUTGROUP),P([o],iv.CLEARICONHIDE),function(e,t,n){t.addEventListener("click",function(n){e.classList.contains(iv.DISABLE)||e.readOnly||(n.preventDefault(),e!==document.activeElement&&e.focus(),e.value="",P([t],iv.CLEARICONHIDE))}),e.addEventListener("input",function(n){r(e.value,t)}),e.addEventListener("focus",function(n){r(e.value,t)}),e.addEventListener("blur",function(e){setTimeout(function(){P([t],iv.CLEARICONHIDE)},200)})}(e,o),o.setAttribute("aria-label","close"),o}(t,n,i,s):(n.clearButton.remove(),n.clearButton=null)}function g(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n],o=void 0;o=s(t),"disabled"===r&&t.classList.remove(iv.DISABLE),"disabled"===r&&o.classList.contains(iv.INPUTGROUP)&&o.classList.remove(iv.DISABLE),"placeholder"===r&&o.classList.contains(iv.FLOATINPUT)?o.getElementsByClassName(iv.FLOATTEXT)[0].textContent="":t.removeAttribute(r)}}function y(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n],o=void 0;o=s(t),"disabled"===r&&t.classList.add(iv.DISABLE),"disabled"===r&&o.classList.contains(iv.INPUTGROUP)&&o.classList.add(iv.DISABLE),"placeholder"===r&&o.classList.contains(iv.FLOATINPUT)?o.getElementsByClassName(iv.FLOATTEXT)[0].textContent=e[r]:t.setAttribute(r,e[r])}}function v(e,t,n){var i=[];i.push(n);var r=m(n)?t.querySelectorAll(".e-input-group-icon"):i;if(e&&r.length>0)for(var o=0;o<r.length;o++)r[o].addEventListener("mousedown",b,!1),r[o].addEventListener("mouseup",w,!1);else if(r.length>0)for(o=0;o<r.length;o++)r[o].removeEventListener("mousedown",b,this),r[o].removeEventListener("mouseup",w,this)}function b(){for(var e,t=this.parentElement;!t.classList.contains("e-input-group");)t=t.parentElement;(e=t).classList.contains("e-disabled")||e.querySelector("input").readOnly||this.classList.add("e-input-btn-ripple")}function w(){var e=this;setTimeout(function(){e.classList.remove("e-input-btn-ripple")},500)}function C(e,t,n){var i=(m(n)?k:n)("span",{className:e});return i.classList.add("e-input-group-icon"),t.appendChild(i),t.classList.contains(iv.INPUTGROUP)||t.classList.add(iv.INPUTGROUP),v(!0,t,i),i}e.createInput=function(e,t){var n=m(t)?k:t,r={container:null,buttons:[],clearButton:null};if(m(e.floatLabelType)||"Never"===e.floatLabelType?(r.container=l(e,iv.INPUTGROUP,iv.INPUTCUSTOMTAG,"span",n),e.element.parentNode.insertBefore(r.container,e.element),P([e.element],iv.INPUT),r.container.appendChild(e.element)):i(e,r,n),e.element.addEventListener("focus",function(){var e=s(this);e.classList.contains("e-input-group")&&e.classList.add("e-input-focus")}),e.element.addEventListener("blur",function(){var e=s(this);e.classList.contains("e-input-group")&&e.classList.remove("e-input-focus")}),m(e.properties)||m(e.properties.showClearButton)||!e.properties.showClearButton||"TEXTAREA"===e.element.tagName||(f(e.properties.showClearButton,e.element,r,!0,n),r.container.classList.contains(iv.FLOATINPUT)&&P([r.container],iv.INPUTGROUP)),!m(e.buttons)&&"TEXTAREA"!==e.element.tagName)for(var o=0;o<e.buttons.length;o++)r.buttons.push(C(e.buttons[o],r.container,n));return function(e,t){if(!m(e.properties))for(var n=0,i=Object.keys(e.properties);n<i.length;n++)switch(i[n]){case"cssClass":c(e.properties.cssClass,[t.container]);break;case"enabled":p(e.properties.enabled,e.element,e.floatLabelType,t.container);break;case"enableRtl":u(e.properties.enableRtl,[t.container]);break;case"placeholder":h(e.properties.placeholder,e.element);break;case"readonly":d(e.properties.readonly,e.element)}return t}(e,r)},e.setValue=function(e,t,n,i){if(t.value=e,m(n)||"Auto"!==n||a(t,n),!m(i)&&i){var r=s(t),o=r.getElementsByClassName(iv.CLEARICON)[0];t.value&&r.classList.contains("e-input-focus")?T([o],iv.CLEARICONHIDE):P([o],iv.CLEARICONHIDE)}},e.setCssClass=c,e.setPlaceholder=h,e.setReadonly=d,e.setEnableRtl=u,e.setEnabled=p,e.setClearButton=f,e.removeAttributes=g,e.addAttributes=y,e.removeFloating=function(e){var i,r=e.container;if(!m(r)&&r.classList.contains(iv.FLOATINPUT)){var o=r.querySelector("textarea")?r.querySelector("textarea"):r.querySelector("input"),s=r.querySelector("."+iv.FLOATTEXT).textContent,a=null!==r.querySelector(".e-clear-icon");N(r.querySelector("."+iv.FLOATLINE)),N(r.querySelector("."+iv.FLOATTEXT)),W(r,[iv.INPUTGROUP],[iv.FLOATINPUT]),(i=o).removeEventListener("focus",t),i.removeEventListener("blur",n),F(o,{placeholder:s}),o.classList.add(iv.INPUT),a||"INPUT"!==o.tagName||o.removeAttribute("required")}},e.addFloating=function(e,t,n,r){var o=m(r)?k:r,s=V(e,"."+iv.INPUTGROUP);if("Never"!==t){var a=s.tagName,l={element:e,floatLabelType:t,customTag:a="DIV"!==a&&"SPAN"!==a?a:null,properties:{placeholder:n}},c=s.querySelector(".e-clear-icon"),h={container:s};if(e.classList.remove(iv.INPUT),i(l,h,o),m(c)&&(c=s.querySelector(".e-input-group-icon")),m(c))s.classList.remove(iv.INPUTGROUP);else{var d=s.querySelector("."+iv.FLOATLINE),u=s.querySelector("."+iv.FLOATTEXT);s.insertBefore(e,c),s.insertBefore(d,c),s.insertBefore(u,c)}}},e.setRipple=function(e,t){for(var n=0;n<t.length;n++)v(e,t[n].container)},e.appendSpan=C}(Wy||(Wy={}));var rv={},ov=null,sv=null,av=30,lv=30,cv=30,hv=36,dv="e-spin-show",uv="e-spin-hide",pv="e-spin-material",fv="e-spin-fabric",gv="e-spin-bootstrap",mv="e-spin-bootstrap4",yv="e-spin-high-contrast",vv="e-spinner-pane",bv="e-spinner-inner",wv="e-path-circle",Cv="e-path-arc",xv="e-spin-label",Av="e-spin-template";function Sv(e,t){var n,i=m(t)?k:t,r=function(e,t){var n=t("div",{});n.classList.add(vv);var i=t("div",{});return i.classList.add(bv),e.appendChild(n),n.appendChild(i),{wrap:n,inner_wrap:i}}(e.target,i);if(m(e.cssClass)||r.wrap.classList.add(e.cssClass),m(e.template)&&m(ov)){var o=m(e.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(r.wrap):e.type;n=function(e,t){var n;switch(t){case"Material":n=av;break;case"Fabric":n=lv;break;case"Bootstrap4":n=hv;break;default:n=cv}return e=e?parseFloat(e+""):n,"Bootstrap"===t?e:e/2}(m(e.width)?void 0:e.width,o),function(e,t,n,i){var r=t.querySelector("."+bv),o=r.querySelector("svg");switch(m(o)||r.removeChild(o),e){case"Material":!function(e,t,n){var i=Ov();rv[i]={timeOut:0,type:"Material",radius:t},Iv(e,i,0,pv),Dv(t,e,"Material",pv)}(r,n);break;case"Fabric":!function(e,t,n){var i=Ov();rv[i]={timeOut:0,type:"Fabric",radius:t},Ev(e,i,fv),Mv(t,e,fv)}(r,n);break;case"Bootstrap":!function(e,t,n){var i=Ov();rv[i]={timeOut:0,type:"Bootstrap",radius:t},function(e,t,n){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("id",t),i.setAttribute("class",gv),i.setAttribute("viewBox","0 0 64 64"),e.insertBefore(i,e.firstChild);for(var r=0;r<=7;r++){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("class",wv+"_"+r),o.setAttribute("r","2"),o.setAttribute("transform","translate(32,32)"),i.appendChild(o)}}(e,i),function(e,t){var n=e.querySelector("svg.e-spin-bootstrap");n.style.width=n.style.height=t+"px";for(var i=90,r=0;r<=7;r++){var o=jv(0,0,24,i),s=n.querySelector("."+wv+"_"+r);s.setAttribute("cx",o.x+""),s.setAttribute("cy",o.y+""),i=i>=360?0:i,i+=45}}(e,t)}(r,n);break;case"HighContrast":!function(e,t,n){var i=Ov();rv[i]={timeOut:0,type:"HighContrast",radius:t},Ev(e,i,yv),Mv(t,e,yv)}(r,n);break;case"Bootstrap4":!function(e,t,n){var i=Ov();rv[i]={timeOut:0,type:"Bootstrap4",radius:t},Iv(e,i,0,mv),Dv(t,e,"Bootstrap4",mv)}(r,n)}}(o,r.wrap,n),m(e.label)||function(e,t,n){var i=n("div",{});i.classList.add(xv),i.textContent=t,e.appendChild(i)}(r.inner_wrap,e.label,i)}else{var s=m(e.template)?ov:e.template;r.wrap.classList.add(Av),function(e,t,n){m(n)||e.classList.add(n),e.querySelector(".e-spinner-inner").innerHTML=t}(r.wrap,s,sv)}r.wrap.classList.add(uv),r=null}function Ov(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function Ev(e,t,n,i){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id",t),r.setAttribute("class",n);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",wv);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",Cv),e.insertBefore(r,e.firstChild),r.appendChild(o),r.appendChild(s)}function Iv(e,t,n,i){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("class",i),r.setAttribute("id",t);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",wv),e.insertBefore(r,e.firstChild),r.appendChild(o)}function Dv(e,t,n,i){var r=2*e,o=t.querySelector("svg."+i),s=o.querySelector("path.e-path-circle"),a=kv(r),l=r/2+"px";o.setAttribute("viewBox","0 0 "+r+" "+r),o.style.width=o.style.height=r+"px",o.style.transformOrigin=l+" "+l+" "+l,s.setAttribute("d",function(e,t){var n=e/2,i=t/2;return"M"+n+","+i+"A"+(n-i)+","+(n-i)+" 0 1 1 "+i+","+n}(r,a)),"Material"===n&&(s.setAttribute("stroke-width",a+""),s.setAttribute("stroke-dasharray",(r-a)*Math.PI*.75+""),s.setAttribute("stroke-dashoffset",Pv(r,a,1,75)+""))}function kv(e){return.1*e}function Pv(e,t,n,i){return(e-t)*Math.PI*(3*i/100-n/100)}function Tv(e,t,n,i){var r=(e/=i)*e,o=r*e;return t+n*(6*o*r+-15*r*r+10*o)}function Mv(e,t,n){var i=e,r=e,o=2*e,s=t.querySelector("."+n),a=s.querySelector(".e-path-circle"),l=s.querySelector(".e-path-arc"),c=o/2+"px";a.setAttribute("d",function(e,t,n){return["M",i,r,"m",-n,0,"a",n,n,0,1,0,2*n,0,"a",n,n,0,1,0,2*-n,0].join(" ")}(0,0,e)),l.setAttribute("d",function(e,t,n,i,r){var o=jv(e,t,n,45),s=jv(e,t,n,315);return["M",o.x,o.y,"A",n,n,0,0,0,s.x,s.y].join(" ")}(i,r,e)),s.setAttribute("viewBox","0 0 "+o+" "+o),s.style.transformOrigin=c+" "+c+" "+c,s.style.width=s.style.height=o+"px"}function jv(e,t,n,i){var r=(i-90)*Math.PI/180;return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}function Rv(e){Lv(e,!1),e=null}function Lv(e,t){var n=e.classList.contains(vv)?e:e.querySelector("."+vv),i=n.querySelector("."+bv);if(t?!n.classList.contains(Av)&&!n.classList.contains(uv):!n.classList.contains(Av)&&!n.classList.contains(dv)){var r=n.querySelector("svg");if(m(r))return;var o=r.getAttribute("id");switch(rv[o].isAnimate=!t,rv[o].type){case"Material":t?clearTimeout(rv[o].timeOut):function(e,t,n){var i={};rv[t].timeOut=0,i[t]=function(e,t,n,i){return{radius:t,count:0,previousId:0}}(0,n),function e(t){!function(t,n,i,r,o,s,a){var l=++a.globalInfo[a.uniqueID].previousId,c=(new Date).getTime(),h=parseFloat(2*a.globalInfo[a.uniqueID].radius+""),d=kv(h),u=-90*(a.globalInfo[a.uniqueID].count||0);!function t(n){var r=Math.max(0,Math.min((new Date).getTime()-c,1333));!function(e,t){if(!m(t.querySelector("svg.e-spin-material"))&&!m(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var n=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");n.setAttribute("stroke-dashoffset",Pv(h,d,e,75)+""),n.setAttribute("transform","rotate("+u+" "+h/2+" "+h/2+")")}}(i(r,1,148,1333),n.container),l===n.globalInfo[n.uniqueID].previousId&&r<1333?rv[n.uniqueID].timeOut=setTimeout(t.bind(null,n),1):e(n)}(a)}(0,0,Tv,0,0,0,t),t.globalInfo[t.uniqueID].count=++t.globalInfo[t.uniqueID].count%4}({uniqueID:t,container:e,globalInfo:i,timeOutVar:0})}(i,o,rv[o].radius);break;case"Bootstrap":t?clearTimeout(rv[o].timeOut):function(e){for(var t=e.querySelector("svg.e-spin-bootstrap").getAttribute("id"),n=1;n<=8;n++)l(e.getElementsByClassName("e-path-circle_"+(8===n?0:n))[0],n,0,(i=void 0,void 0,void 0,s=void 0,a=void 0,i=[],o=n,s=!1,a=1,function e(t){i.push(t),t===o&&1!==a||(t<=r&&t>1&&!s?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),s=!0):t<8&&s?8===(t=parseFloat((t+.2).toFixed(2)))&&(s=!1):t<=8&&!s&&(t=parseFloat((t-.2).toFixed(2))),++a,e(t))}(r=n),i),t);var i,r,o,s,a;function l(e,t,n,i,r){var o=0;!function t(n){rv[r].isAnimate&&(++o,e.setAttribute("r",n+""),o>=i.length&&(o=0),rv[r].timeOut=setTimeout(t.bind(null,i[o]),18))}(t)}}(i)}}t?W(n,[uv],[dv]):W(n,[dv],[uv]),e=null}function _v(e){Lv(e,!0),e=null}var Nv="e-icon-collapsible",Bv="e-icon-expandable",Fv="e-list-item",zv="e-list-text",Hv="e-list-parent",Vv="e-hover",Uv="e-active",Wv="e-icons-spinner",Gv="e-process",qv="e-text-content",Qv="e-sibling",Yv="e-drop-next",Xv="e-check",Zv="e-checkbox-wrapper",Kv="e-node-focus",Jv={treeRole:"tree",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""},$v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("child")],t.prototype,"child",void 0),Object(s.b)([ye([])],t.prototype,"dataSource",void 0),Object(s.b)([ye("expanded")],t.prototype,"expanded",void 0),Object(s.b)([ye("hasChildren")],t.prototype,"hasChildren",void 0),Object(s.b)([ye("htmlAttributes")],t.prototype,"htmlAttributes",void 0),Object(s.b)([ye("iconCss")],t.prototype,"iconCss",void 0),Object(s.b)([ye("id")],t.prototype,"id",void 0),Object(s.b)([ye("imageUrl")],t.prototype,"imageUrl",void 0),Object(s.b)([ye("isChecked")],t.prototype,"isChecked",void 0),Object(s.b)([ye("parentID")],t.prototype,"parentID",void 0),Object(s.b)([ye(null)],t.prototype,"query",void 0),Object(s.b)([ye("selected")],t.prototype,"selected",void 0),Object(s.b)([ye(null)],t.prototype,"tableName",void 0),Object(s.b)([ye("text")],t.prototype,"text",void 0),Object(s.b)([ye("tooltip")],t.prototype,"tooltip",void 0),Object(s.b)([ye("navigateUrl")],t.prototype,"navigateUrl",void 0),t}(Le),eb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("SlideDown")],t.prototype,"effect",void 0),Object(s.b)([ye(400)],t.prototype,"duration",void 0),Object(s.b)([ye("linear")],t.prototype,"easing",void 0),t}(Le),tb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ve({effect:"SlideUp",duration:400,easing:"linear"},eb)],t.prototype,"collapse",void 0),Object(s.b)([ve({effect:"SlideDown",duration:400,easing:"linear"},eb)],t.prototype,"expand",void 0),t}(Le),nb=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.preventExpand=!1,i.checkedElement=[],i.disableNode=[],i.parentNodeCheck=[],i.expandChildren=[],i.mouseDownStatus=!1,i}var n;return Object(s.c)(t,e),n=t,t.prototype.getModuleName=function(){return"treeview"},t.prototype.preRender=function(){var e=this;this.checkActionNodes=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:Bv,ariaAttributes:Jv,expandIconPosition:"Left",itemCreated:function(t){e.beforeNodeCreate(t)}},this.updateListProp(this.fields),this.aniObj=new Oe({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),m(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),m(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),m(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0},t.prototype.getPersistData=function(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])},t.prototype.render=function(){this.initialRender=!0,this.initialize(),this.setDataBinding(),this.setExpandOnType(),this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.wireEvents(),this.initialRender=!1},t.prototype.initialize=function(){this.element.setAttribute("role","tree"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)},t.prototype.setEnableRtl=function(){this.enableRtl?P([this.element],"e-rtl"):T([this.element],"e-rtl")},t.prototype.setRipple=function(){this.rippleFn=Ee(this.element,{selector:".e-fullrow,.e-text-content",ignore:"."+qv+" > .e-icons,.e-input-group,.e-input, ."+Zv}),this.rippleIconFn=Ee(this.element,{selector:"."+qv+" > .e-icons",isCenterRipple:!0})},t.prototype.setFullRow=function(e){e?P([this.element],"e-fullrow-wrap"):T([this.element],"e-fullrow-wrap")},t.prototype.setMultiSelect=function(e){var t=z("."+Hv,this.element);e?t.setAttribute("aria-multiselectable","true"):t.removeAttribute("aria-multiselectable")},t.prototype.templateComplier=function(e){if(e)try{if(document.querySelectorAll(e).length)return _t(document.querySelector(e).innerHTML.trim())}catch(t){return _t(e)}},t.prototype.setDataBinding=function(){var e=this;this.treeList.push("false"),this.fields.dataSource instanceof oh?this.fields.dataSource.ready?this.fields.dataSource.ready.then(function(t){e.fields.dataSource instanceof oh&&e.fields.dataSource.dataSource.offline&&(e.treeList.pop(),e.treeData=t.result,e.isNumberTypeId=e.getType(),e.setRootData(),e.renderItems(!0),0!==e.treeList.length||e.isLoaded||e.finalize())}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function(t){e.treeList.pop(),e.treeData=t.result,e.isNumberTypeId=e.getType(),e.setRootData(),e.renderItems(!0),0!==e.treeList.length||e.isLoaded||e.finalize()}):(this.treeList.pop(),m(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0!==this.treeList.length||this.isLoaded||this.finalize()},t.prototype.getQuery=function(e,t){void 0===t&&(t=null);var n,i=[];if(e.query)n=e.query.clone();else{n=new Zc;for(var r=this.getActualProperties(e),o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];"dataSource"!==a&&"tableName"!==a&&"child"!==a&&e[a]&&-1===i.indexOf(e[a])&&i.push(e[a])}n.select(i),r.hasOwnProperty("tableName")&&n.from(e.tableName)}return Cc.addSorting(this.sortOrder,e.text,n),m(t)||m(e.parentID)||n.where(e.parentID,"equal",this.isNumberTypeId?parseFloat(t):t),n},t.prototype.getType=function(){return!!this.treeData[0]&&"number"==typeof h(this.fields.id,this.treeData[0])},t.prototype.setRootData=function(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);var e=this.getChildNodes(this.treeData,void 0,!0);this.rootData=m(e)?[]:e}else this.rootData=this.treeData},t.prototype.renderItems=function(e){if(this.listBaseOption.ariaAttributes.level=1,this.ulElement=Cc.createList(this.createElement,e?this.rootData:this.getSortedData(this.rootData),this.listBaseOption),this.element.appendChild(this.ulElement),!1===this.loadOnDemand)for(var t=this.ulElement.querySelectorAll(".e-list-item"),n=0;n<t.length;)this.renderChildNodes(t[n],!0,null,!0),n++;else this.finalizeNode(this.element);this.parentNodeCheck=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()},t.prototype.updateCheckedStateFromDS=function(e){if(this.treeData&&this.showCheckBox)if(1===this.dataType){for(var t=this.fields,n=new oh(this.treeData).executeLocal((new Zc).where(t.isChecked,"equal",!0,!1)),i=0;i<n.length;i++){var r=n[i][this.fields.id]?n[i][this.fields.id].toString():null;if(n[i][this.fields.parentID]&&n[i][this.fields.parentID].toString(),-1!==this.checkedNodes.indexOf(r)||this.isLoaded||this.checkedNodes.push(r),n[i][this.fields.hasChildren])for(var o=n[i][this.fields.id],s=new oh(this.treeData).executeLocal((new Zc).where(t.parentID,"equal",o,!1)),a=0;a<s.length;a++){var l=s[a][this.fields.id]?s[a][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(l)&&this.autoCheck&&this.checkedNodes.push(l)}}for(i=0;i<this.checkedNodes.length;i++){var c=this.fields,d=new oh(this.treeData).executeLocal((new Zc).where(c.id,"equal",this.checkedNodes[i],!0));d[0]&&this.autoCheck&&(this.getCheckedNodeDetails(c,d),this.checkIndeterminateState(d[0]));for(var u=new oh(this.treeData).executeLocal((new Zc).where(c.parentID,"equal",this.checkedNodes[i],!0)),p=0;p<u.length;p++){var f=u[p][this.fields.id]?u[p][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(f)&&this.autoCheck&&this.checkedNodes.push(f)}}}else if(2===this.dataType||this.fields.dataSource instanceof oh&&this.fields.dataSource.dataSource.offline)for(p=0;p<this.treeData.length;p++){var g=this.treeData[p][this.fields.id]?this.treeData[p][this.fields.id].toString():"";this.treeData[p][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(g)&&this.checkedNodes.push(g);var m=h(this.fields.child.toString(),this.treeData[p]);m&&this.updateChildCheckState(m,this.treeData[p])}},t.prototype.getCheckedNodeDetails=function(e,t){var n=t[0][this.fields.parentID]?t[0][this.fields.parentID].toString():null,i=0,r=this.element.querySelector('[data-uid="'+t[0][this.fields.id]+'"]'),o=this.element.querySelector('[data-uid="'+t[0][this.fields.parentID]+'"]');if(r||o)o&&(z("."+Xv,o)||this.changeState(o,"indeterminate",null));else{-1===this.parentNodeCheck.indexOf(n)&&this.parentNodeCheck.push(n);for(var s=this.getChildNodes(this.treeData,n),a=0;a<s.length;a++){var l=s[a][this.fields.id]?s[a][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(l)&&i++,i===s.length&&-1===this.checkedNodes.indexOf(n)&&this.checkedNodes.push(n)}var c=new oh(this.treeData).executeLocal((new Zc).where(e.id,"equal",n,!0));this.getCheckedNodeDetails(e,c)}},t.prototype.updateParentCheckState=function(){for(var e,t=H(".e-stop",this.element),n=0;n<t.length;n++){var i=V(t[n],"."+Fv),r=this.getTreeData(i),o=r[0][this.fields.id].toString(),s=0;if(e=1===this.dataType?this.getChildNodes(this.treeData,o):h(this.fields.child.toString(),r[0])){for(var a=0;a<e.length;a++){var l=e[a][this.fields.id].toString();-1!==this.checkedNodes.indexOf(l)&&s++}if(s===e.length){var c=i.getAttribute("data-uid");-1===this.checkedNodes.indexOf(c)&&this.checkedNodes.push(c),this.changeState(i,"check",null)}else 0===s&&0===this.checkedNodes.length&&this.changeState(i,"uncheck",null)}}},t.prototype.checkIndeterminateState=function(e){var t;(t=this.element.querySelector(1===this.dataType?'[data-uid="'+e[this.fields.parentID]+'"]':'[data-uid="'+e[this.fields.id]+'"]'))?"true"!==t.querySelector("."+Zv).getAttribute("aria-checked")&&this.changeState(t,"indeterminate",null,!0,!0):2===this.dataType&&-1===this.parentNodeCheck.indexOf(e[this.fields.id].toString())&&this.parentNodeCheck.push(e[this.fields.id].toString())},t.prototype.updateChildCheckState=function(e,t){for(var n=0,i=t[this.fields.id]?t[this.fields.id].toString():"",r=0;r<e.length;r++){var o=e[r][this.fields.id]?e[r][this.fields.id].toString():"";e[r][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o),-1!==this.checkedNodes.indexOf(i)&&-1===this.checkedNodes.indexOf(o)&&this.autoCheck&&this.checkedNodes.push(o),-1!==this.checkedNodes.indexOf(o)&&this.autoCheck&&n++;var s=h(this.fields.child.toString(),e[r]);s&&(this.parentCheckData=t,this.updateChildCheckState(s,e[r])),n===e.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(i)&&this.checkedNodes.push(i)}0!==n&&this.autoCheck&&(this.checkIndeterminateState(t),t!==this.parentCheckData&&this.parentCheckData&&this.checkIndeterminateState(this.parentCheckData)),this.parentCheckData=null},t.prototype.beforeNodeCreate=function(e){if(this.showCheckBox){var t=Uy(this.createElement,!0,{cssClass:this.touchClass}),n=z("div.e-icons",e.item),i=e.item.getAttribute("data-uid");e.item.childNodes[0].insertBefore(t,e.item.childNodes[0].childNodes[m(n)?0:1]);var r=h(e.fields.isChecked,e.curData);this.checkedNodes.indexOf(i)>-1?(z(".e-frame",t).classList.add(Xv),t.setAttribute("aria-checked","true"),this.addCheck(e.item)):m(r)||"true"!==r.toString()?t.setAttribute("aria-checked","false"):(z(".e-frame",t).classList.add(Xv),t.setAttribute("aria-checked","true"),this.addCheck(e.item));var o=z(".e-frame",t);I.add(o,"mousedown",this.frameMouseHandler,this),I.add(o,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(e.item),this.allowMultiSelection&&!e.item.classList.contains("e-selected")&&e.item.setAttribute("aria-selected","false");var s=e.fields;if(this.addActionClass(e,s.selected,"e-selected"),this.addActionClass(e,s.expanded,"e-expanded"),!m(this.nodeTemplateFn)){var a=e.item.querySelector("."+zv);a.innerHTML="";var l=this.nodeTemplateFn(e.curData);L(l=Array.prototype.slice.call(l),a)}this.trigger("drawNode",{node:e.item,nodeData:e.curData,text:e.text})},t.prototype.frameMouseHandler=function(e){!function(e,t){if(t){var n=document.createEvent("MouseEvents");n.initEvent(e.type,!1,!0),t.dispatchEvent(n)}}(e,z(".e-ripple-container",e.target.parentElement))},t.prototype.addActionClass=function(e,t,n){var i=h(t,e.curData);m(i)||"false"===i.toString()||e.item.classList.add(n)},t.prototype.getDataType=function(e,t){if(this.fields.dataSource instanceof oh){for(var n=0;n<e.length;n++)if("string"==typeof t.child&&m(h(t.child,e[n])))return 1;return 2}n=0;for(var i=e.length;n<i;n++){if("string"==typeof t.child&&!m(h(t.child,e[n])))return 2;if(!m(h(t.parentID,e[n]))||!m(h(t.hasChildren,e[n])))return 1}return 1},t.prototype.getGroupedData=function(e,t){for(var n=(new Zc).group(t),i=Cc.getDataSource(e,n),r=[],o=0;o<i.length;o++)r.push(i[o].items);return r},t.prototype.getSortedData=function(e){return e&&"None"!==this.sortOrder&&(e=Cc.getDataSource(e,Cc.addSorting(this.sortOrder,this.fields.text))),e},t.prototype.finalizeNode=function(e){for(var t=H(".e-list-img",e),n=0;n<t.length;n++)t[n].setAttribute("alt","e-list-img");if(this.isLoaded){for(var i=H(".e-selected",e),r=0;r<i.length;r++){this.selectNode(i[r],null);break}T(i,"e-selected")}for(var o=H(".e-list-item:not(.e-expanded)",e),s=0;s<o.length;s++){var a=z("div.e-icons",o[s]);a&&a.classList.contains(Bv)&&this.disableExpandAttr(o[s])}var l=H(".e-expanded",e);if(!this.isInitalExpand)for(r=0;r<l.length;r++)this.renderChildNodes(l[r]);T(l,"e-expanded"),this.updateList(),this.isLoaded&&this.updateCheckedProp()},t.prototype.updateCheckedProp=function(){if(this.showCheckBox){var e=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:e},!0)}},t.prototype.ensureIndeterminate=function(){if(this.autoCheck)for(var e=H("li",this.element),t=0;t<e.length;t++)e[t].classList.contains(Fv)&&(z("."+Hv,e[t])?this.ensureParentCheckState(e[t]):this.ensureChildCheckState(e[t]));else{var n=H(".e-stop",this.element);for(t=0;t<n.length;t++)n[t].classList.remove("e-stop")}},t.prototype.ensureParentCheckState=function(e){if(!m(e)){if(e.classList.contains("e-treeview"))return;var t=e;e.classList.contains(Fv)&&(t=z("."+Hv,e));var n=H("."+Xv,t),i=H(".e-stop",t),r=H("."+Fv,t),o=e.getElementsByClassName(Zv)[0];r.length===n.length?this.changeState(o,"check",null,!0,!0):n.length>0||i.length>0?this.changeState(o,"indeterminate",null,!0,!0):0===n.length&&this.changeState(o,"uncheck",null,!0,!0);var s=V(e,"."+Hv);if(!m(s)){var a=V(s,"."+Fv);this.ensureParentCheckState(a)}}},t.prototype.ensureChildCheckState=function(e,t){if(!m(e)){var n=z("."+Hv,e),i=void 0;if(!m(n)){i=H("."+Zv,n);for(var r=e.getElementsByClassName("e-frame")[0].classList.contains(Xv),o=e.getElementsByClassName("e-frame")[0].classList.contains("e-stop"),s=n.querySelectorAll("li"),a=void n.parentElement.getAttribute("aria-expanded"),l=0;l<i.length;l++){if(m(this.currentLoadData)||m(h(this.fields.isChecked,this.currentLoadData[l]))){var c=i[l].getElementsByClassName("e-frame")[0].classList.contains(Xv),d=s[l].getAttribute("data-uid");r?a="check":c&&!this.isLoaded?a="check":-1!==this.checkedNodes.indexOf(d)&&this.isLoaded&&(o||r)?a="check":s[l].classList.contains("e-has-child")&&!y(this.parentNodeCheck)&&this.autoCheck&&(r||o)&&-1!==this.parentNodeCheck.indexOf(d)?(a="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(d),1)):1===this.dataType&&!y(this.parentNodeCheck)&&this.autoCheck&&(r||o)&&-1!==this.parentNodeCheck.indexOf(d)?(a="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(d),1)):a="uncheck"}else a=h(this.fields.isChecked,this.currentLoadData[l])?"check":"uncheck",-1!==this.ele&&(a=r?"check":"uncheck");this.changeState(i[l],a,t,!0,!0)}}this.autoCheck&&this.isLoaded&&this.updateParentCheckState()}},t.prototype.doCheckBoxAction=function(e,t){var n=H("."+Fv,this.element);if(m(e)){for(var i=H("."+Zv,this.element),r=0;r<i.length;r++)this.changeState(i[r],t?"check":"uncheck");for(c=0;c<n.length;c++)this.ensureStateChange(n[c],t)}else for(var o=e.length;o>=0;o--){var s;if(m(s=this.getElement(1===e.length?e[o-1]:e[o]))){var a=void 0;if(""!==(a=e[o-e.length]?e[o-e.length].toString():e[o]?e[o].toString():null)&&t&&a)this.setValidCheckedNode(a),this.dynamicCheckState(a,t);else if(-1!==this.checkedNodes.indexOf(a)&&""!==a&&!t){this.checkedNodes.splice(this.checkedNodes.indexOf(a),1);var l=this.getChildNodes(this.treeData,a);if(l){for(var c=0;c<l.length;c++){var h=l[c][this.fields.id]?l[c][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(h)&&this.checkedNodes.splice(this.checkedNodes.indexOf(h),1)}-1!==this.parentNodeCheck.indexOf(a)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1)}a&&this.dynamicCheckState(a,t),this.updateField(this.treeData,this.fields,a,"isChecked",null)}}else{var d=z(".e-list-parent ."+Zv,s);this.validateCheckNode(d,!t,s,null)}}if(e)for(var u=0;u<e.length;u++)a=e[u]?e[u].toString():"",t||this.updateField(this.treeData,this.fields,a,"isChecked",null);this.autoCheck&&this.updateParentCheckState()},t.prototype.dynamicCheckState=function(e,t){if(1===this.dataType){var n=0,i=new oh(this.treeData).executeLocal((new Zc).where(this.fields.id,"equal",e,!0));if(i[0]){var r=i[0][this.fields.id]?i[0][this.fields.id].toString():null,o=i[0][this.fields.parentID]?i[0][this.fields.parentID].toString():null,s=((u=this.element.querySelector('[data-uid="'+o+'"]'))&&z(".e-stop",u),u?z("."+Xv,u):null),a=this.element.querySelector('[data-uid="'+r+'"]'),l=this.getChildNodes(this.treeData,o);if(l)for(var c=0;c<l.length;c++){var d=l[c][this.fields.id]?l[c][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(d)&&n++}-1!==this.checkedNodes.indexOf(e)&&u&&r===e&&this.autoCheck?this.changeState(u,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&a&&r===e&&!t?this.changeState(a,"uncheck",null):-1!==this.checkedNodes.indexOf(e)&&a&&r===e&&t?this.changeState(a,"check",null):-1===this.checkedNodes.indexOf(e)&&!a&&u&&r===e&&this.autoCheck&&0!==n?this.changeState(u,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&!a&&u&&r===e&&this.autoCheck&&0===n?this.changeState(u,"uncheck",null):a||u||r!==e||!this.autoCheck||this.updateIndeterminate(e,t)}}else if(2===this.dataType||this.fields.dataSource instanceof oh&&this.fields.dataSource.dataSource.offline){r=void 0;var u=void 0;for(s=void 0,c=0;c<this.treeData.length;c++){r=this.treeData[c][this.fields.id]?this.treeData[c][this.fields.id].toString():"",s=(u=this.element.querySelector('[data-uid="'+r+'"]'))?z("."+Xv,u):null,-1===this.checkedNodes.indexOf(r)&&u&&s&&!t&&this.changeState(u,"uncheck",null);var p=h(this.fields.child.toString(),this.treeData[c]);p&&this.updateChildIndeterminate(p,r,e,t,r)}}},t.prototype.updateIndeterminate=function(e,t){var n,i=this.getTreeData(e),r=0;1===this.dataType&&(n=i[0][this.fields.parentID]?i[0][this.fields.parentID].toString():null);var o=this.getChildNodes(this.treeData,n);if(o)for(var s=0;s<o.length;s++){var a=o[s][this.fields.id]?o[s][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(a)&&r++}var l=this.element.querySelector('[data-uid="'+n+'"]');l&&t?this.changeState(l,"indeterminate",null):!t&&l&&-1===this.parentNodeCheck.indexOf(n)&&0!==r?this.changeState(l,"indeterminate",null):!t&&l&&-1===this.parentNodeCheck.indexOf(n)&&0===r?this.changeState(l,"uncheck",null):l||(t||-1!==this.checkedNodes.indexOf(n)||-1===this.parentNodeCheck.indexOf(n)?t&&-1===this.checkedNodes.indexOf(n)&&-1===this.parentNodeCheck.indexOf(n)&&this.parentNodeCheck.push(n):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(n),1),this.updateIndeterminate(n,t),-1===this.checkedNodes.indexOf(n)||t||this.checkedNodes.splice(this.checkedNodes.indexOf(n),1))},t.prototype.updateChildIndeterminate=function(e,t,n,i,r){for(var o=0,s=0;s<e.length;s++){var a=e[s][this.fields.id]?e[s][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(a)&&o++;var l=this.element.querySelector('[data-uid="'+t+'"]'),c=l?z(".e-stop",l):null,d=l?z("."+Xv,l):null,u=this.element.querySelector('[data-uid="'+a+'"]');if(-1!==this.checkedNodes.indexOf(n)&&l&&a===n&&this.autoCheck)this.changeState(l,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(n)||!l||u||a!==n||i){if(-1===this.checkedNodes.indexOf(n)&&u&&a===n&&!i)this.changeState(u,"uncheck",null);else if(-1===this.checkedNodes.indexOf(n)&&c&&a===n&&this.autoCheck&&0===o&&!i)c.classList.remove("e-stop");else if(-1===this.checkedNodes.indexOf(n)&&!u&&d&&a===n&&0===o)this.changeState(l,"uncheck",null);else if(!u&&!l&&a===n||-1!==this.parentNodeCheck.indexOf(t)&&this.autoCheck){var p=this.element.querySelector('[data-uid="'+r+'"]');i&&0!==o?this.changeState(p,"indeterminate",null):i&&o===e.length&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t),-1===this.parentNodeCheck.indexOf(t)&&this.parentNodeCheck.push(t)}}else this.changeState(l,this.autoCheck?"uncheck":0!==o?"indeterminate":"uncheck",null);var f=h(this.fields.child.toString(),e[s]);f&&this.updateChildIndeterminate(f,a,n,i,r)}},t.prototype.changeState=function(e,t,n,i,r){var o,s,a=V(e,"."+Fv);if(i||(this.checkActionNodes=[],s=this.getCheckEvent(a,t,n),this.trigger("nodeChecking",s),!s.cancel)){var l=e.getElementsByClassName("e-frame")[0];if("check"!==t||l.classList.contains(Xv)?"uncheck"===t&&(l.classList.contains(Xv)||l.classList.contains("e-stop"))?(T([l],[Xv,"e-stop"]),this.removeCheck(a),o="false"):"indeterminate"===t&&!l.classList.contains("e-stop")&&this.autoCheck&&(l.classList.remove(Xv),l.classList.add("e-stop"),this.removeCheck(a),o="mixed"):(l.classList.remove("e-stop"),l.classList.add(Xv),this.addCheck(a),o="true"),m(o="check"===t?"true":"uncheck"===t?"false":o)||e.setAttribute("aria-checked",o),r){var c=[].concat([],this.checkActionNodes);s=this.getCheckEvent(a,t,n),y(i)&&(s.data=c)}i||m(o)||(e.setAttribute("aria-checked",o),s.data[0].checked=o,this.trigger("nodeChecked",s),this.checkActionNodes=[])}},t.prototype.addCheck=function(e){var t=e.getAttribute("data-uid");m(t)||-1!==this.checkedNodes.indexOf(t)||this.checkedNodes.push(t)},t.prototype.removeCheck=function(e){var t=this.checkedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.checkedNodes.splice(t,1)},t.prototype.getCheckEvent=function(e,t,n){this.checkActionNodes.push(this.getNodeData(e));var i=this.checkActionNodes;return{action:t,cancel:!1,isInteracted:!m(n),node:e,data:i}},t.prototype.finalize=function(){z("."+Hv,this.element).setAttribute("role",Jv.treeRole),this.setMultiSelect(this.allowMultiSelection);var e=z("."+Fv,this.element);e&&(P([e],Kv),this.updateIdAttr(null,e)),this.hasPid=!!this.rootData[0]&&this.rootData[0].hasOwnProperty(this.fields.parentID),this.doExpandAction()},t.prototype.doExpandAction=function(){var e=this.expandedNodes;if(this.isInitalExpand&&e.length>0)if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof oh)this.expandGivenNodes(e);else{for(var t=0;t<e.length;t++){var n=z('[data-uid="'+e[t]+'"]',this.element);if(m(n))e[t]&&-1===this.expandChildren.indexOf(e[t])&&this.expandChildren.push(e[t].toString());else{var i=z("."+Bv,z("."+qv,n));m(i)||this.expandAction(n,i,null)}}this.afterFinalized()}else this.afterFinalized()},t.prototype.expandGivenNodes=function(e){var t=this;this.expandCallback(e[this.index],function(){t.index++,t.index<e.length?t.expandGivenNodes(e):t.afterFinalized()})},t.prototype.expandCallback=function(e,t){var n=z('[data-uid="'+e+'"]',this.element);if(m(n))t();else{var i=z("."+Bv,z("."+qv,n));m(i)?t():this.expandAction(n,i,null,!1,t)}},t.prototype.afterFinalized=function(){this.doSelectionAction(),this.updateCheckedProp(),this.isLoaded=!0,this.isAnimate=!0,this.isInitalExpand=!1,this.trigger("dataBound",{data:this.treeData})},t.prototype.doSelectionAction=function(){var e=H(".e-selected",this.element),t=this.selectedNodes;if(t.length>0){this.setProperties({selectedNodes:[]},!0);for(var n=0;n<t.length;n++){var i=z('[data-uid="'+t[n]+'"]',this.element);if(i&&!i.classList.contains("e-active")?this.selectNode(i,null,!0):this.selectedNodes.push(t[n]),!this.allowMultiSelection)break}}else this.selectGivenNodes(e);T(e,"e-selected")},t.prototype.selectGivenNodes=function(e){for(var t=0;t<e.length&&(e[t].classList.contains("e-disable")||this.selectNode(e[t],null,!0),this.allowMultiSelection);t++);},t.prototype.clickHandler=function(e){var t=e.originalEvent.target;if(I.remove(this.element,"contextmenu",this.preventContextMenu),t&&!this.dragStartAction){var n=t.classList,i=V(t,"."+Fv);if(i){if(this.removeHover(),this.setFocusElement(i),this.showCheckBox&&!i.classList.contains("e-disable")){var r=V(t,"."+Zv);if(!m(r)){var o=z(".e-frame",r);return this.validateCheckNode(r,o.classList.contains(Xv),i,e.originalEvent),void this.triggerClickEvent(e.originalEvent,i)}}n.contains(Bv)?this.expandAction(i,t,e):n.contains(Nv)?this.collapseNode(i,t,e):n.contains(Hv)||n.contains(Fv)||this.toggleSelect(i,e.originalEvent,!1),this.triggerClickEvent(e.originalEvent,i)}}},t.prototype.nodeCheckingEvent=function(e,t,n){var i=V(e,"."+Fv);this.checkActionNodes=[];var r=t?"false":"true";m(r)||e.setAttribute("aria-checked",r);var o=this.getCheckEvent(i,t?"uncheck":"check",n);return this.trigger("nodeChecking",o),o},t.prototype.nodeCheckedEvent=function(e,t,n){V(e,"."+Fv);var i=this.getCheckEvent(e,t?"uncheck":"check",n);i.data=i.data.splice(0,i.data.length-1),this.trigger("nodeChecked",i)},t.prototype.triggerClickEvent=function(e,t){this.trigger("nodeClicked",{event:e,node:t})},t.prototype.expandNode=function(e,t,n){var i=this;if(t.classList.contains(Wv)&&this.hideSpinner(t),this.initialRender||t.classList.add("interaction"),!0!==n||!0===n&&e.classList.contains("e-expanded")){if(!0!==this.preventExpand){T([t],Bv),P([t],Nv);var r=0,o=0,s=this,a=z("."+Hv,e),l=e;this.setHeight(l,a);var c=z(".e-list-item."+Uv,e);this.isAnimate?this.aniObj.animate(a,{name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:function(t){l.style.overflow="hidden",!m(c)&&c instanceof HTMLElement&&c.classList.add("e-animation-active"),r=l.offsetHeight,o=z("."+qv,e).offsetHeight},progress:function(e){e.element.style.display="block",s.animateHeight(e,r,o)},end:function(e){e.element.style.display="block",!m(c)&&c instanceof HTMLElement&&c.classList.remove("e-animation-active"),i.expandedNode(l,a,t)}}):this.expandedNode(l,a,t)}}else z("."+Hv,e).style.display="none",this.fields.dataSource instanceof oh==1&&(this.preventExpand=!1);this.initialRender&&t.classList.add("interaction")},t.prototype.expandedNode=function(e,t,n){t.style.display="block",e.style.display="block",e.style.overflow="",e.style.height="",T([n],Gv),this.addExpand(e),this.isLoaded&&this.expandArgs&&(this.expandArgs=this.getExpandEvent(e,null),this.trigger("nodeExpanded",this.expandArgs))},t.prototype.addExpand=function(e){e.setAttribute("aria-expanded","true"),T([e],"e-node-collapsed");var t=e.getAttribute("data-uid");m(t)||-1!==this.expandedNodes.indexOf(t)||this.expandedNodes.push(t)},t.prototype.collapseNode=function(e,t,n){var i,r=this;if(!t.classList.contains(Gv))if(P([t],Gv),this.isLoaded&&(i=this.getExpandEvent(e,n),this.trigger("nodeCollapsing",i),i.cancel))T([t],Gv);else{T([t],Nv),P([t],Bv);var o=0,s=0,a=this,l=z("."+Hv,e),c=e,h=z(".e-list-item."+Uv,e);this.isAnimate?this.aniObj.animate(l,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:function(t){c.style.overflow="hidden",!m(h)&&h instanceof HTMLElement&&h.classList.add("e-animation-active"),o=z("."+qv,e).offsetHeight,s=c.offsetHeight},progress:function(e){a.animateHeight(e,o,s)},end:function(e){e.element.style.display="none",!m(h)&&h instanceof HTMLElement&&h.classList.remove("e-animation-active"),r.collapsedNode(c,l,t,i)}}):this.collapsedNode(c,l,t,i)}},t.prototype.collapsedNode=function(e,t,n,i){t.style.display="none",e.style.overflow="",e.style.height="",T([n],Gv),this.removeExpand(e),this.isLoaded&&this.trigger("nodeCollapsed",i)},t.prototype.removeExpand=function(e,t){t?e.removeAttribute("aria-expanded"):this.disableExpandAttr(e);var n=this.expandedNodes.indexOf(e.getAttribute("data-uid"));n>-1&&this.expandedNodes.splice(n,1)},t.prototype.disableExpandAttr=function(e){e.setAttribute("aria-expanded","false"),P([e],"e-node-collapsed")},t.prototype.setHeight=function(e,t){t.style.display="block",t.style.visibility="hidden",e.style.height=e.offsetHeight+"px",t.style.display="none",t.style.visibility=""},t.prototype.animateHeight=function(e,t,n){e.element.parentElement.style.height=(e.duration-e.timeStamp)/e.duration*(n-t)+t+"px"},t.prototype.renderChildNodes=function(e,t,n,i){var r,o=this,s=z("div.e-icons",e);if(!m(s))if(this.showSpinner(s),this.fields.dataSource instanceof oh){var a=this.parents(e,"."+Hv).length,l=this.getChildFields(this.fields,a,1);if(m(l)||m(l.dataSource))return N(s),void this.removeExpand(e,!0);this.treeList.push("false"),this.fields.dataSource instanceof oh&&this.fields.dataSource.dataSource.offline?(this.treeList.pop(),r=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.loadChild(r,l,s,e,t,n,i)):l.dataSource.executeQuery(this.getQuery(l,e.getAttribute("data-uid"))).then(function(a){o.treeList.pop(),o.loadChild(r=a.result,l,s,e,t,n,i)})}else{if(r=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.currentLoadData=r,m(r)||0===r.length)return N(s),void this.removeExpand(e,!0);this.listBaseOption.ariaAttributes.level=parseFloat(e.getAttribute("aria-level"))+1,e.appendChild(Cc.createList(this.createElement,this.getSortedData(r),this.listBaseOption)),this.expandNode(e,s,i),this.setSelectionForChildNodes(r),this.ensureCheckNode(e),this.finalizeNode(e),this.disableTreeNodes(r),this.renderSubChild(e,t,i)}},t.prototype.loadChild=function(e,t,n,i,r,o,s){if(this.currentLoadData=e,m(e)||0===e.length)N(n),this.removeExpand(i,!0);else{if(this.updateListProp(t),this.fields.dataSource instanceof oh&&!this.fields.dataSource.dataSource.offline){var a=i.getAttribute("data-uid");d("child",e,this.getNodeObject(a))}this.listBaseOption.ariaAttributes.level=parseFloat(i.getAttribute("aria-level"))+1,i.appendChild(Cc.createList(this.createElement,e,this.listBaseOption)),this.expandNode(i,n,s),this.setSelectionForChildNodes(e),this.ensureCheckNode(i),this.finalizeNode(i),this.disableTreeNodes(e),this.renderSubChild(i,r,s)}o&&o(),0!==this.treeList.length||this.isLoaded||this.finalize()},t.prototype.disableTreeNodes=function(e){for(var t=0;t<e.length;){var n=e[t][this.fields.id].toString();void 0!==this.disableNode&&-1!==this.disableNode.indexOf(n)&&this.doDisableAction([n]),t++}},t.prototype.setSelectionForChildNodes=function(e){var t;for(t=0;t<e.length;t++){var n=e[t][this.fields.id].toString();void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(n)&&this.doSelectionAction()}},t.prototype.ensureCheckNode=function(e){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(e.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(e),this.ensureParentCheckState(e))),this.currentLoadData=null},t.prototype.getFields=function(e,t,n){return t===n?e:this.getFields(this.getChildMapper(e),t,n+1)},t.prototype.getChildFields=function(e,t,n){return t===n?this.getChildMapper(e):this.getChildFields(this.getChildMapper(e),t,n+1)},t.prototype.getChildMapper=function(e){return"string"==typeof e.child||m(e.child)?e:e.child},t.prototype.getChildNodes=function(e,t,n){var i;if(void 0===n&&(n=!1),m(e))return i;if(1===this.dataType)return this.getChildGroup(this.groupedData,t,n);if("string"==typeof this.fields.child)for(var r=0,o=e.length;r<o;r++){var s=h(this.fields.id,e[r]);if(s&&s.toString()===t)return h(this.fields.child,e[r]);if(!m(h(this.fields.child,e[r]))&&void 0!==(i=this.getChildNodes(h(this.fields.child,e[r]),t)))break}return i},t.prototype.getChildGroup=function(e,t,n){if(!m(e))for(var i=0,r=e.length;i<r;i++){if(m(e[i][0])||m(h(this.fields.parentID,e[i][0])))return n?e[i]:[];if(h(this.fields.parentID,e[i][0]).toString()===t)return e[i]}},t.prototype.renderSubChild=function(e,t,n){if(t)for(var i=H("."+Bv,e),r=0,o=i.length;r<o;r++){var s=i[r];if(e.querySelector(".e-icons")!==i[r]){var a=V(s,"."+Fv);this.expandArgs=this.getExpandEvent(a,null),!0!==n&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(a,t,null,n)}}},t.prototype.toggleSelect=function(e,t,n){e.classList.contains("e-disable")||(this.allowMultiSelection&&(t&&t.ctrlKey||n)&&this.isActive(e)?this.unselectNode(e,t):this.selectNode(e,t,n))},t.prototype.isActive=function(e){return!!e.classList.contains(Uv)},t.prototype.selectNode=function(e,t,n){var i;if(m(e)||!this.allowMultiSelection&&this.isActive(e)&&!m(t))this.setFocusElement(e);else if(!this.isLoaded||(i=this.getSelectEvent(e,"select",t),this.trigger("nodeSelecting",i),!i.cancel)){if(this.allowMultiSelection&&(n||t&&(!t||t.ctrlKey))||this.removeSelectAll(),this.allowMultiSelection&&t&&t.shiftKey){this.startNode||(this.startNode=e);var r=this.liList.indexOf(this.startNode),o=this.liList.indexOf(e);if(r>o){var s=r;r=o,o=s}for(var a=r;a<=o;a++){var l=this.liList[a];j(l)&&!l.classList.contains("e-disable")&&this.addSelect(l)}}else this.startNode=e,this.addSelect(e);this.setFocusElement(e),this.isLoaded&&(i.nodeData=this.getNodeData(e),this.trigger("nodeSelected",i))}},t.prototype.unselectNode=function(e,t){var n;this.isLoaded&&(n=this.getSelectEvent(e,"un-select",t),this.trigger("nodeSelecting",n),n.cancel)||(this.removeSelect(e),this.setFocusElement(e),this.isLoaded&&(n.nodeData=this.getNodeData(e),this.trigger("nodeSelected",n)))},t.prototype.setFocusElement=function(e){if(!m(e)){var t=this.getFocusedNode();t&&T([t],Kv),P([e],Kv),this.updateIdAttr(t,e)}},t.prototype.addSelect=function(e){e.setAttribute("aria-selected","true"),P([e],Uv);var t=e.getAttribute("data-uid");m(t)||-1!==this.selectedNodes.indexOf(t)||this.selectedNodes.push(t)},t.prototype.removeSelect=function(e){this.allowMultiSelection?e.setAttribute("aria-selected","false"):e.removeAttribute("aria-selected"),T([e],Uv);var t=this.selectedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.selectedNodes.splice(t,1)},t.prototype.removeSelectAll=function(){for(var e=this.element.querySelectorAll("."+Uv),t=0,n=e;t<n.length;t++){var i=n[t];this.allowMultiSelection?i.setAttribute("aria-selected","false"):i.removeAttribute("aria-selected")}T(e,Uv),this.setProperties({selectedNodes:[]},!0)},t.prototype.getSelectEvent=function(e,t,n){var i=this.getNodeData(e);return{action:t,cancel:!1,isInteracted:!m(n),node:e,nodeData:i}},t.prototype.setExpandOnType=function(){this.expandOnType="Auto"===this.expandOn?re.isDevice?"Click":"DblClick":this.expandOn},t.prototype.expandHandler=function(e){var t=e.originalEvent.target;!t||t.classList.contains("e-input")||t.classList.contains("e-treeview")||t.classList.contains(Hv)||t.classList.contains(Fv)||t.classList.contains("e-icons")||this.showCheckBox&&V(t,"."+Zv)||this.expandCollapseAction(V(t,"."+Fv),e)},t.prototype.expandCollapseAction=function(e,t){var n=z("div.e-icons",e);n&&!n.classList.contains(Gv)&&(n.classList.contains(Bv)?this.expandAction(e,n,t):this.collapseNode(e,n,t))},t.prototype.expandAction=function(e,t,n,i,r){if(!t.classList.contains(Gv))if(P([t],Gv),this.isLoaded&&(this.expandArgs=this.getExpandEvent(e,n),this.trigger("nodeExpanding",this.expandArgs),this.expandArgs.cancel))T([t],Gv);else{var o=z("."+Hv,e);if(o&&"UL"===o.nodeName)this.expandNode(e,t);else{this.renderChildNodes(e,i,r);for(var s=H("."+Fv,e),a=0;a<s.length;a++){var l=this.getId(s[a]);if(-1!==this.expandChildren.indexOf(l)&&void 0!==this.expandChildren){var c=z("."+Bv,z("."+qv,s[a]));m(c)||this.expandAction(s[a],c,null),this.expandChildren.splice(this.expandChildren.indexOf(l),1)}}}}},t.prototype.keyActionHandler=function(e){var t=e.target,n=this.getFocusedNode();if(t&&t.classList.contains("e-input")){var i=t;"enter"===e.action?(i.blur(),this.element.focus(),P([n],Vv)):"escape"===e.action&&(i.value=this.oldText,i.blur(),this.element.focus(),P([n],Vv))}else{e.preventDefault();var r={cancel:!1,event:e,node:n};if(this.trigger("keyPress",r),!r.cancel)switch(e.action){case"space":this.showCheckBox&&this.checkNode(e);break;case"moveRight":this.openNode(!this.enableRtl,e);break;case"moveLeft":this.openNode(!!this.enableRtl,e);break;case"shiftDown":this.shiftKeySelect(!0,e);break;case"moveDown":case"ctrlDown":case"csDown":this.navigateNode(!0);break;case"shiftUp":this.shiftKeySelect(!1,e);break;case"moveUp":case"ctrlUp":case"csUp":this.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":this.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":this.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":this.toggleSelect(n,e);break;case"f2":this.allowEditing&&!n.classList.contains("e-disable")&&this.createTextbox(n,e);break;case"ctrlA":if(this.allowMultiSelection){var o=H(".e-list-item:not(.e-active)",this.element);this.selectGivenNodes(o)}}}},t.prototype.navigateToFocus=function(e){var t=this.getFocusedNode().querySelector("."+qv),n=t.getBoundingClientRect(),i=this.getScrollParent(this.element);if(!m(i)){var r=i.getBoundingClientRect();n.bottom>r.bottom?i.scrollTop+=n.bottom-r.bottom:n.top<r.top&&(i.scrollTop-=r.top-n.top)}this.isVisibleInViewport(t)||t.scrollIntoView(e)},t.prototype.isVisibleInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},t.prototype.getScrollParent=function(e){return m(e)?null:e.scrollHeight>e.clientHeight?e:this.getScrollParent(e.parentElement)},t.prototype.shiftKeySelect=function(e,t){if(this.allowMultiSelection){var n=this.getFocusedNode(),i=e?this.getNextNode(n):this.getPrevNode(n);this.removeHover(),this.setFocusElement(i),this.toggleSelect(i,t,!1),this.navigateToFocus(!e)}else this.navigateNode(e)},t.prototype.checkNode=function(e){var t=this.getFocusedNode(),n=z("."+Zv,t),i=z(" .e-frame",n).classList.contains(Xv);t.classList.contains("e-disable")||this.validateCheckNode(n,i,t,e)},t.prototype.validateCheckNode=function(e,t,n,i){if(!this.nodeCheckingEvent(e,t,i).cancel){if(-1===this.checkedElement.indexOf(n.getAttribute("data-uid"))){this.checkedElement.push(n.getAttribute("data-uid"));var r=this.getChildNodes(this.treeData,n.getAttribute("data-uid"));null!==r?this.allCheckNode(r,this.checkedElement,null,null,!1):r=null}this.changeState(e,t?"uncheck":"check",i,!0),this.autoCheck&&(this.ensureChildCheckState(n),this.ensureParentCheckState(V(V(n,"."+Hv),"."+Fv))),this.autoCheck&&this.ensureStateChange(n),this.nodeCheckedEvent(e,t,i)}},t.prototype.ensureStateChange=function(e,t){var n=z("."+Hv,e),i=e.getAttribute("data-uid"),r=this.fields;if(1===this.dataType&&this.autoCheck)for(var o=new oh(this.treeData).executeLocal((new Zc).where(r.parentID,"equal",i,!0)),s=0;s<o.length;s++){var a=o[s][this.fields.id]?o[s][this.fields.id].toString():null,l=o[s][this.fields.isChecked]?o[s][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(i)&&-1===this.checkedNodes.indexOf(a)){this.checkedNodes.push(a);var c=this.getChildNodes(this.treeData,a);this.getChildItems(c,t),-1!==this.parentNodeCheck.indexOf(a)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1)}else if(-1===this.checkedNodes.indexOf(i)&&null===n&&-1!==this.checkedNodes.indexOf(a)&&(this.checkedNodes.splice(this.checkedNodes.indexOf(a),1),"true"===l&&this.updateField(this.treeData,this.fields,a,"isChecked",null),-1===this.checkedNodes.indexOf(i)&&null===n||-1!==this.parentNodeCheck.indexOf(a))){var h=this.getChildNodes(this.treeData,a);this.getChildItems(h,t),-1!==this.parentNodeCheck.indexOf(a)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1)}}else if(1!==this.dataType||this.autoCheck)(c=this.getChildNodes(this.treeData,i))&&this.childStateChange(c,i,n,t);else if(t)for(s=0;s<this.treeData.length;s++){var d=this.treeData[s][this.fields.id]?this.treeData[s][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(d)&&this.checkedNodes.push(d)}else{var u=new oh(this.treeData).executeLocal((new Zc).where(r.isChecked,"equal",!0,!1));for(s=0;s<u.length;s++){var p=u[s][this.fields.id]?u[s][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(p)&&this.checkedNodes.splice(this.checkedNodes.indexOf(p),1),this.updateField(this.treeData,this.fields,p,"isChecked",null)}this.checkedNodes=[]}},t.prototype.getChildItems=function(e,t){for(var n=0;n<e.length;n++){var i=e[n][this.fields.id]?e[n][this.fields.id].toString():null,r=e[n][this.fields.isChecked]?e[n][this.fields.isChecked].toString():null;-1===this.checkedNodes.indexOf(i)||t||this.checkedNodes.splice(this.checkedNodes.indexOf(i),1),-1===this.checkedNodes.indexOf(i)&&t&&this.checkedNodes.push(i),"true"!==r||t||this.updateField(this.treeData,this.fields,i,"isChecked",null);var o=this.getChildNodes(this.treeData,i);o.length>0&&this.getChildItems(o)}},t.prototype.childStateChange=function(e,t,n,i){for(var r=0;r<e.length;r++){var o=e[r][this.fields.id]?e[r][this.fields.id].toString():"",s=e[r][this.fields.isChecked]?e[r][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(t)&&-1===this.checkedNodes.indexOf(o)?(this.checkedNodes.push(o),-1!==this.parentNodeCheck.indexOf(o)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(o),1)):-1!==this.checkedNodes.indexOf(t)||null!==n||i||(this.checkedNodes.splice(this.checkedNodes.indexOf(o),1),"true"===s&&this.updateField(this.treeData,this.fields,o,"isChecked",null)):this.autoCheck||(i?-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o):(-1!==this.checkedNodes.indexOf(o)&&this.checkedNodes.splice(this.checkedNodes.indexOf(o),1),this.updateField(this.treeData,this.fields,o,"isChecked",null),this.checkedNodes=[]));var a=this.getChildNodes(this.treeData,o);a&&this.childStateChange(a,t,n,i)}},t.prototype.allCheckNode=function(e,t,n,i,r){if(e)for(var o=0;o<e.length;o++){var s=h(this.fields.id,e[o]),a=this.element.querySelector('[data-uid="'+s+'"]');if(!1!==r&&-1===this.checkedElement.indexOf(s.toString())&&(null===a&&!m(e[o][this.fields.isChecked])&&-1===t.indexOf(s.toString())||0===i||2===n)&&(!1!==e[o][this.fields.isChecked]||2===n?t.push(s.toString()):i=null,i=!1!==e[o][this.fields.isChecked]||2===n?0:null),-1===t.indexOf(s.toString())&&m(n)&&t.push(s.toString()),!0===h(this.fields.hasChildren,e[o])||h(this.fields.child.toString(),e[o])){var l=h(this.fields.id,e[o]),c=this.getChildNodes(this.treeData,l.toString());c&&(m(r)?this.allCheckNode(c,t,n,i):this.allCheckNode(c,t,n,i,r),i=null)}i=null}},t.prototype.openNode=function(e,t){var n=this.getFocusedNode(),i=z("div.e-icons",n);if(e){if(!i)return;i.classList.contains(Bv)?this.expandAction(n,i,t):this.focusNextNode(n,!0)}else if(i&&i.classList.contains(Nv))this.collapseNode(n,i,t);else{var r=V(V(n,"."+Hv),"."+Fv);if(!r)return;r.classList.contains("e-disable")||(this.setFocus(n,r),this.navigateToFocus(!0))}},t.prototype.navigateNode=function(e){var t=this.getFocusedNode();this.focusNextNode(t,e)},t.prototype.navigateRootNode=function(e){var t=this.getFocusedNode(),n=e?this.getRootNode():this.getEndNode();n.classList.contains("e-disable")||(this.setFocus(t,n),this.navigateToFocus(e))},t.prototype.getFocusedNode=function(){var e,t=z(".e-list-item."+Kv,this.element);return m(t)&&(e=z("."+Fv,this.element)),m(t)?m(e)?this.element.firstElementChild:e:t},t.prototype.focusNextNode=function(e,t){var n=t?this.getNextNode(e):this.getPrevNode(e);if(this.setFocus(e,n),this.navigateToFocus(!t),n.classList.contains("e-disable")){var i=n.lastChild;null==n.previousSibling&&n.classList.contains("e-level-1")?this.focusNextNode(n,!0):null==n.nextSibling&&n.classList.contains("e-node-collapsed")?this.focusNextNode(n,!1):null==n.nextSibling&&i.classList.contains("e-text-content")?this.focusNextNode(n,!1):this.focusNextNode(n,t)}},t.prototype.getNextNode=function(e){var t,n=this.liList.indexOf(e);do{if(m(t=this.liList[++n]))return e}while(!j(t));return t},t.prototype.getPrevNode=function(e){var t,n=this.liList.indexOf(e);do{if(m(t=this.liList[--n]))return e}while(!j(t));return t},t.prototype.getRootNode=function(){var e,t=0;do{e=this.liList[t],t++}while(!j(e));return e},t.prototype.getEndNode=function(){var e,t=this.liList.length-1;do{e=this.liList[t],t--}while(!j(e));return e},t.prototype.setFocus=function(e,t){T([e],[Vv,Kv]),t.classList.contains("e-disable")||(P([t],[Vv,Kv]),this.updateIdAttr(e,t))},t.prototype.updateIdAttr=function(e,t){this.element.removeAttribute("aria-activedescendant"),e&&e.removeAttribute("id"),t.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},t.prototype.focusIn=function(){this.mouseDownStatus||P([this.getFocusedNode()],Vv),this.mouseDownStatus=!1},t.prototype.focusOut=function(){T([this.getFocusedNode()],Vv)},t.prototype.onMouseOver=function(e){var t=e.target,n=t.classList,i=V(t,"."+Fv);!i||n.contains(Hv)||n.contains(Fv)?this.removeHover():i&&!i.classList.contains("e-disable")&&this.setHover(i)},t.prototype.setHover=function(e){e.classList.contains(Vv)||(this.removeHover(),P([e],Vv))},t.prototype.onMouseLeave=function(e){this.removeHover()},t.prototype.removeHover=function(){var e=H("."+Vv,this.element);e&&e.length&&T(e,Vv)},t.prototype.getNodeData=function(e,t){if(!m(e)&&e.classList.contains(Fv)&&!m(V(e,".e-control"))&&V(e,".e-control").classList.contains("e-treeview")){var n=e.getAttribute("data-uid"),i=this.getText(e,t),r=V(e.parentNode,"."+Fv),o=r?r.getAttribute("data-uid"):null,s=e.classList.contains(Uv),a="true"===e.getAttribute("aria-expanded"),l=null;return this.showCheckBox&&(l=z("."+Zv,e).getAttribute("aria-checked")),{id:n,text:i,parentID:o,selected:s,expanded:a,isChecked:l}}return{id:"",text:"",parentID:"",selected:"",expanded:"",isChecked:""}},t.prototype.getText=function(e,t){if(t){var n=this.getNodeObject(e.getAttribute("data-uid")),i=parseFloat(e.getAttribute("aria-level"));return h(this.getFields(this.fields,i,1).text,n)}return z("."+zv,e).textContent},t.prototype.getExpandEvent=function(e,t){var n=this.getNodeData(e);return{cancel:!1,isInteracted:!m(t),node:e,nodeData:n,event:t}},t.prototype.reRenderNodes=function(){this.element.innerHTML="",this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.isLoaded=!1,this.setDataBinding()},t.prototype.setCssClass=function(e,t){m(e)||""===e||T([this.element],e.split(" ")),m(t)||""===t||P([this.element],t.split(" "))},t.prototype.editingHandler=function(e){var t=e.target;if(!(!t||t.classList.contains("e-treeview")||t.classList.contains(Hv)||t.classList.contains(Fv)||t.classList.contains("e-icons")||t.classList.contains("e-input")||t.classList.contains("e-input-group"))){var n=V(t,"."+Fv);this.createTextbox(n,e)}},t.prototype.createTextbox=function(e,t){var n=z(".e-tree-input",this.element);n&&n.blur();var i=z("."+zv,e);this.updateOldText(e);var r=this.createElement("input",{className:"e-tree-input",attrs:{value:this.oldText}}),o=this.getEditEvent(e,null,r.outerHTML);if(this.trigger("nodeEditing",o),!o.cancel){var s="width:"+(i.offsetWidth+5)+"px";P([e],"e-editing"),i.innerHTML=o.innerHtml;var a=z(".e-tree-input",i);this.inputObj=Wy.createInput({element:a,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.setAttribute("style",s),a.focus(),a.setSelectionRange(0,a.value.length),this.wireInputEvents(a)}},t.prototype.updateOldText=function(e){var t=e.getAttribute("data-uid");this.editData=this.getNodeObject(t);var n=parseFloat(e.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,n,1),this.oldText=h(this.editFields.text,this.editData)},t.prototype.inputFocusOut=function(e){if(z(".e-tree-input",this.element)){var t=e.target,n=t.value,i=V(t,"."+zv),r=V(t,"."+Fv);N(this.inputObj.container),this.appendNewText(r,i,n,!0)}},t.prototype.appendNewText=function(e,t,n,i){var r=this.getEditEvent(e,n,null);this.trigger("nodeEdited",r);var o=d(this.editFields.text,n=r.cancel?r.oldText:r.newText,this.editData);if(m(this.nodeTemplateFn))t.innerHTML=n;else{t.innerHTML="";var s=this.nodeTemplateFn(o);L(s=Array.prototype.slice.call(s),t)}i&&(T([e],"e-editing"),t.focus()),r.oldText!==n&&this.triggerEvent()},t.prototype.getElement=function(e){return m(e)?null:"string"==typeof e?this.element.querySelector('[data-uid="'+e+'"]'):"object"==typeof e?e:null},t.prototype.getId=function(e){return m(e)?null:"string"==typeof e?e:"object"==typeof e?e.getAttribute("data-uid"):null},t.prototype.getEditEvent=function(e,t,n){return{cancel:!1,newText:t,node:e,nodeData:this.getNodeData(e),oldText:this.oldText,innerHtml:n}},t.prototype.getNodeObject=function(e){if(!m(e)){if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,e);for(var t=0,n=this.treeData.length;t<n;t++){var i=h(this.fields.id,this.treeData[t]);if(!m(this.treeData[t])&&!m(i)&&i.toString()===e)return this.treeData[t]}}},t.prototype.getChildNodeObject=function(e,t,n){var i;if(m(e))return i;for(var r=0,o=e.length;r<o;r++){var s=h(t.id,e[r]);if(e[r]&&s&&s.toString()===n)return e[r];if("string"!=typeof t.child||m(h(t.child,e[r]))){if(this.fields.dataSource instanceof oh&&!m(h("child",e[r]))&&void 0!==(i=this.getChildNodeObject(h("child",e[r]),this.getChildMapper(t),n)))break}else{var a=h(t.child,e[r]);if(void 0!==(i=this.getChildNodeObject(a,this.getChildMapper(t),n)))break}}return i},t.prototype.setDragAndDrop=function(e){e?this.initializeDrag():this.destroyDrag()},t.prototype.initializeDrag=function(){var e,t=this,n=this;this.dragObj=new pt(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragTarget:"."+qv,helper:function(i){t.dragTarget=i.sender.target;var r=V(t.dragTarget,".e-treeview"),o=V(t.dragTarget,"."+qv);if(t.dragLi=V(t.dragTarget,"."+Fv),t.fullRowSelect&&!o&&t.dragTarget.classList.contains("e-fullrow")&&(o=t.dragTarget.nextElementSibling),!t.dragTarget||!i.element.isSameNode(r)||!o||t.dragTarget.classList.contains("e-treeview")||t.dragTarget.classList.contains(Hv)||t.dragTarget.classList.contains(Fv)||t.dragLi.classList.contains("e-disable"))return!1;var s=o.cloneNode(!0);if(m(z("div.e-icons",s))){var a=n.createElement("div",{className:"e-icons "+Bv});s.insertBefore(a,s.children[0])}(e=n.createElement("div",{className:"e-drag-item e-treeview "+t.cssClass+" "+(t.enableRtl?"e-rtl":"")})).appendChild(s);var l=t.selectedNodes.length;if(l>1&&t.allowMultiSelection&&t.dragLi.classList.contains(Uv)){var c=n.createElement("span",{className:"e-drop-count",innerHTML:""+l});e.appendChild(c)}return document.body.appendChild(e),document.body.style.cursor="",t.dragData=t.getNodeData(t.dragLi),e},dragStart:function(n){P([t.element],"e-dragging");var i,r=V(n.target,".e-list-item");r&&(i=parseInt(r.getAttribute("aria-level"),10));var o=t.getDragEvent(n.event,t,null,n.target,null,e,i);o.draggedNode.classList.contains("e-editing")?o.cancel=!0:t.trigger("nodeDragStart",o),o.cancel?(N(e),T([t.element],"e-dragging"),t.dragStartAction=!1):t.dragStartAction=!0},drag:function(n){t.dragObj.setProperties({cursorAt:{top:!m(n.event.targetTouches)||re.isDevice?60:-20}}),t.dragAction(n,e)},dragStop:function(e){T([t.element],"e-dragging"),t.removeVirtualEle();var n=e.target,i=V(n,".e-droppable");n&&i||(N(e.helper),document.body.style.cursor="");var r,o=V(n,".e-list-item");o&&(r=parseInt(o.getAttribute("aria-level"),10));var s=t.getDragEvent(e.event,t,n,n,null,e.helper,r);s.preventTargetExpand=!1,t.trigger("nodeDragStop",s),t.dragParent=s.draggedParentNode,t.preventExpand=s.preventTargetExpand,s.cancel&&(e.helper.parentNode&&N(e.helper),document.body.style.cursor=""),t.dragStartAction=!1}}),this.dropObj=new ft(this.element,{out:function(e){m(e)||e.target.classList.contains(Qv)||(document.body.style.cursor="not-allowed")},over:function(e){document.body.style.cursor=""},drop:function(e){t.dropAction(e)}})},t.prototype.dragAction=function(e,t){var n=V(e.target,".e-droppable"),i=V(e.target,"."+qv),r=z("div.e-icons",t);T([r],["e-drop-in",Yv,"e-drop-out","e-no-drop"]),this.removeVirtualEle(),document.body.style.cursor="";var o=e.target.classList;if(this.fullRowSelect&&!i&&!m(o)&&o.contains("e-fullrow")&&(i=e.target.nextElementSibling),n){var s=V(e.target,"."+Fv);if(!n.classList.contains("e-treeview")||i&&!s.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,s))if(s&&e&&e.event.offsetY<7){P([r],Yv);var a=this.createElement("div",{className:Qv});s.insertBefore(a,s.children[this.fullRowSelect?1:0])}else s&&e&&e.target.offsetHeight>0&&e.event.offsetY>e.target.offsetHeight-10?(P([r],Yv),a=this.createElement("div",{className:Qv}),s.insertBefore(a,s.children[this.fullRowSelect?2:1])):P([r],"e-drop-in");else"LI"!==e.target.nodeName||s.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,s)?e.target.classList.contains(Qv)?P([r],Yv):P([r],"e-drop-out"):(P([r],Yv),this.renderVirtualEle(e))}else P([r],"e-no-drop"),document.body.style.cursor="not-allowed";var l,c=V(e.target,".e-list-item");c&&(l=parseInt(c.getAttribute("aria-level"),10));var h=this.getDragEvent(e.event,this,e.target,e.target,null,t,l);h.dropIndicator&&T([r],h.dropIndicator),this.trigger("nodeDragging",h),h.dropIndicator&&P([r],h.dropIndicator)},t.prototype.dropAction=function(e){for(var t,i,r=e.event.offsetY,o=e.target,s=!1,a=e.dragData.draggable,l=0;l<a.ej2_instances.length;l++)if(a.ej2_instances[l]instanceof n){t=a.ej2_instances[l];break}if(t&&t.dragTarget){var c=V(t.dragTarget,"."+Fv),h=V(o,"."+Fv);if(null==h&&o.classList.contains("e-treeview")&&(h=o.firstElementChild),N(e.droppedElement),document.body.style.cursor="",!h||h.isSameNode(c)||this.isDescendant(c,h))return void(this.fields.dataSource instanceof oh==0&&(this.preventExpand=!1));if(t.allowMultiSelection&&c.classList.contains(Uv)){var d=H("."+Uv,t.element);for(l=0;l<d.length;l++)h.isSameNode(d[l])||this.isDescendant(d[l],h)||this.appendNode(o,d[l],h,e,t,r)}else this.appendNode(o,c,h,e,t,r);i=parseInt(c.getAttribute("aria-level"),10),s=!0}this.fields.dataSource instanceof oh==0&&(this.preventExpand=!1),this.trigger("nodeDropped",this.getDragEvent(e.event,t,o,e.target,e.dragData.draggedElement,null,i,s)),this.triggerEvent()},t.prototype.appendNode=function(e,t,n,i,r,o){t.classList.contains("e-disable")||n.classList.contains("e-disable")||("LI"===e.nodeName?this.dropAsSiblingNode(t,n,i,r):e.firstElementChild&&e.classList.contains("e-treeview")?"UL"===e.firstElementChild.nodeName&&this.dropAsSiblingNode(t,n,i,r):this.dropAsChildNode(t,n,r,null,i,o))},t.prototype.dropAsSiblingNode=function(e,t,n,i){var r,o=V(t,"."+Hv),s=V(e,"."+Hv),a=V(s,"."+Fv);n.target.offsetHeight>0&&n.event.offsetY>n.target.offsetHeight-2?r=!1:n.event.offsetY<2&&(r=!0),o.insertBefore(e,r?n.target:n.target.nextElementSibling),this.moveData(e,t,o,r,i),this.updateElement(s,a),this.updateAriaLevel(e),i.element.id===this.element.id?this.updateList():(i.updateInstance(),this.updateInstance())},t.prototype.dropAsChildNode=function(e,t,n,i,r,o){var s=V(e,"."+Hv),a=V(s,"."+Fv),l=V(t,"."+Hv);if(r&&o<7)l.insertBefore(e,t),this.moveData(e,t,l,!0,n);else if(r&&r.target.offsetHeight>0&&o>r.target.offsetHeight-10)l.insertBefore(e,t.nextElementSibling),this.moveData(e,t,l,!1,n);else{var c=this.expandParent(t),h=c.childNodes[i];c.insertBefore(e,h),this.moveData(e,h,c,!0,n)}this.updateElement(s,a),this.updateAriaLevel(e),n.element.id===this.element.id?this.updateList():(n.updateInstance(),this.updateInstance())},t.prototype.moveData=function(e,t,n,i,r){var o=V(n,"."+Fv),s=this.getId(e),a=r.updateChildField(r.treeData,r.fields,s,null,null,!0),l=this.getId(t),c=this.getDataPos(this.treeData,this.fields,l),h=this.getId(o);if(1===this.dataType){this.updateField(this.treeData,this.fields,h,"hasChildren",!0);var u=m(c)?this.treeData.length:i?c:c+1;if(m(h)&&!this.hasPid)delete a[0][this.fields.parentID];else{var p=this.isNumberTypeId?parseFloat(h):h;d(this.fields.parentID,p,a[0])}if(this.treeData.splice(u,0,a[0]),r.element.id!==this.element.id){var f=r.removeChildNodes(s);u++;for(var g=0,y=f.length;g<y;g++)this.treeData.splice(u,0,f[g]),u++;r.groupedData=r.getGroupedData(r.treeData,r.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,h,a,i?c:c+1)},t.prototype.expandParent=function(e){var t=z("div.e-icons",e);t&&t.classList.contains(Bv)&&!0!==this.preventExpand&&this.expandAction(e,t,null);var n,i=z("."+Hv,e);return!0===this.preventExpand&&!i&&t&&this.renderChildNodes(e),m(i=z("."+Hv,e))||!0!==this.preventExpand||(i.style.display="none"),m(i)||!1!==this.preventExpand||(i.style.display="block"),m(i)&&!0===this.preventExpand&&(m(t)&&Cc.generateIcon(this.createElement,e,Bv,this.listBaseOption),(n=z("div.e-icons",e))&&n.classList.add("e-icon-expandable"),i=Cc.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(i),n?T([n],Nv):Cc.generateIcon(this.createElement,e,Bv,this.listBaseOption),e.setAttribute("aria-expanded","false"),i.style.display="none"),m(i)&&(this.trigger("nodeExpanding",this.getExpandEvent(e,null)),m(t)&&Cc.generateIcon(this.createElement,e,Nv,this.listBaseOption),(n=z("div.e-icons",e))?T([n],Bv):(Cc.generateIcon(this.createElement,e,Nv,this.listBaseOption),T([n=z("div.e-icons",e)],Bv)),i=Cc.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(i),this.addExpand(e),this.trigger("nodeExpanded",this.getExpandEvent(e,null))),i},t.prototype.updateElement=function(e,t){if(t&&0===e.childElementCount){var n=z("div.e-icons",t);N(e),N(n);var i=this.getId(t);this.updateField(this.treeData,this.fields,i,"hasChildren",null),this.removeExpand(t,!0)}},t.prototype.updateAriaLevel=function(e){var t=this.parents(e,"."+Hv).length;e.setAttribute("aria-level",""+t),this.updateChildAriaLevel(z("."+Hv,e),t+1)},t.prototype.updateChildAriaLevel=function(e,t){if(!m(e))for(var n=e.childNodes,i=0,r=n.length;i<r;i++){var o=n[i];o.setAttribute("aria-level",""+t),this.updateChildAriaLevel(z("."+Hv,o),t+1)}},t.prototype.renderVirtualEle=function(e){var t;e.event.offsetY>e.target.offsetHeight-2?t=!1:e.event.offsetY<2&&(t=!0);var n=this.createElement("div",{className:Qv});e.target.insertBefore(n,e.target.children[this.fullRowSelect?t?1:2:t?0:1])},t.prototype.removeVirtualEle=function(){var e=z("."+Qv);e&&N(e)},t.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},t.prototype.getDragEvent=function(e,t,n,i,r,o,s,a){var l=n?V(n,"."+Fv):null,c=l?this.getNodeData(l):null,h=t?t.dragLi:r,d=t?t.dragData:null,u=n?this.parents(n,"."+Fv):null,p=t.dragLi.parentElement,f=t.dragLi?V(p,"."+Fv):null,g=null,m=null,y=[Yv,"e-drop-in","e-drop-out","e-no-drop"],v=null,b=!0===a?h:l,w=b?V(b,".e-list-parent"):null,C=0;if(f=t.dragLi&&null===f?V(p,".e-treeview"):f,f=!0===a?this.dragParent:f,o)for(;C<4;){if(z(".e-icons",o).classList.contains(y[C])){v=y[C];break}C++}if(w){var x=0;for(C=0;C<w.childElementCount;C++){if(x=!0!==a&&w.children[C]===h&&l!==h?++x:x,!0!==a&&w.children[C].classList.contains("e-hover")){m=e.offsetY>=23?C+1:C;break}if(w.children[C]===b){m=C;break}}m=0!==x?--m:m}if(n&&(g=0===u.length?null:n.classList.contains(Fv)?u[0]:u[1]),l===h&&(g=l),n&&i.offsetHeight<=33&&e.offsetY<i.offsetHeight-10&&e.offsetY>6&&(g=l,!0!==a)){s=++s;var A=g?z(".e-list-parent",g):null;if(m=A?A.children.length:0,!(this.fields.dataSource instanceof oh)&&null===A&&g){var S=g.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,g.getAttribute("data-uid").toString()):null;m=S?S.length:0}}return{cancel:!1,clonedNode:o,event:e,draggedNode:h,draggedNodeData:d,droppedNode:l,droppedNodeData:c,dropIndex:m,dropLevel:s,draggedParentNode:f,dropTarget:g,dropIndicator:v,target:i}},t.prototype.addFullRow=function(e){var t=this.liList.length;if(e)for(var n=0;n<t;n++)this.createFullRow(this.liList[n]);else for(n=0;n<t;n++)N(z(".e-fullrow",this.liList[n]))},t.prototype.createFullRow=function(e){var t=this.createElement("div",{className:"e-fullrow"});e.insertBefore(t,e.childNodes[0])},t.prototype.addMultiSelect=function(e){if(e)for(var t=0,n=H('.e-list-item:not([aria-selected="true"])',this.element);t<n.length;t++)n[t].setAttribute("aria-selected","false");else for(var i=0,r=H('.e-list-item[aria-selected="false"]',this.element);i<r.length;i++)r[i].removeAttribute("aria-selected")},t.prototype.collapseByLevel=function(e,t,n){if(t>0&&!m(e))for(var i=this.getVisibleNodes(n,e.childNodes),r=0,o=i.length;r<o;r++){var s=i[r],a=z("."+Nv,z("."+qv,s));m(a)||this.collapseNode(s,a,null),this.collapseByLevel(z("."+Hv,s),t-1,n)}},t.prototype.collapseAllNodes=function(e){for(var t=this.getVisibleNodes(e,H("."+Nv,this.element)),n=0,i=t.length;n<i;n++){var r=t[n],o=V(r,"."+Fv);this.collapseNode(o,r,null)}},t.prototype.expandByLevel=function(e,t,n){if(t>0&&!m(e))for(var i=this.getVisibleNodes(n,e.childNodes),r=0,o=i.length;r<o;r++){var s=i[r],a=z("."+Bv,z("."+qv,s));m(a)||this.expandAction(s,a,null),this.expandByLevel(z("."+Hv,s),t-1,n)}},t.prototype.expandAllNodes=function(e){for(var t=this.getVisibleNodes(e,H("."+Bv,this.element)),n=0,i=t.length;n<i;n++){var r=t[n],o=V(r,"."+Fv);this.expandAction(o,r,null,!0)}},t.prototype.getVisibleNodes=function(e,t){var n=Array.prototype.slice.call(t);if(e)for(var i=0;i<n.length;i++)j(n[i])||(n.splice(i,1),i--);return n},t.prototype.removeNode=function(e){var t=V(e,"."+Hv),n=V(t,"."+Fv);N(e),this.updateElement(t,n),this.updateInstance(),this.removeData(e)},t.prototype.updateInstance=function(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()},t.prototype.updateList=function(){this.liList=Array.prototype.slice.call(H("."+Fv,this.element))},t.prototype.updateSelectedNodes=function(){this.setProperties({selectedNodes:[]},!0);var e=H("."+Uv,this.element);this.selectGivenNodes(e)},t.prototype.updateExpandedNodes=function(){this.setProperties({expandedNodes:[]},!0);for(var e=H('[aria-expanded="true"]',this.element),t=0,n=e.length;t<n;t++)this.addExpand(e[t])},t.prototype.removeData=function(e){if(1===this.dataType){var t=new oh(this.treeData),n=this.getId(e),i={},r=this.isNumberTypeId?parseFloat(n):n;i[this.fields.id]=r,t.remove(this.fields.id,i),this.removeChildNodes(n)}else n=this.getId(e),this.updateChildField(this.treeData,this.fields,n,null,null,!0)},t.prototype.removeChildNodes=function(e){var t=this.getChildGroup(this.groupedData,e,!1),n=[];if(t)for(var i=0,r=t.length;i<r;i++){var o=new oh(this.treeData),s=h(this.fields.id,t[i]).toString(),a={},l=this.isNumberTypeId?parseFloat(s):s;a[this.fields.id]=l;var c=o.remove(this.fields.id,a);n.push(c[0]),this.removeChildNodes(s)}return n},t.prototype.doGivenAction=function(e,t,n){for(var i=0,r=e.length;i<r;i++){var o=this.getElement(e[i]);if(!m(o)){var s=z("."+t,z("."+qv,o));m(s)||(n?this.expandAction(o,s,null):this.collapseNode(o,s,null))}}},t.prototype.addGivenNodes=function(e,t,n,i,r){if(0!==e.length){var o=this.getSortedData(e),s=t?parseFloat(t.getAttribute("aria-level"))+1:1;i&&this.updateMapper(s);for(var a,l=Cc.createListItemFromJson(this.createElement,o,this.listBaseOption,s),c=(a=r||(t?this.expandParent(t):z("."+Hv,this.element))).childNodes[n],h=0;h<l.length;h++)a.insertBefore(l[h],c);var u=this.getId(t);if(1===this.dataType){this.updateField(this.treeData,this.fields,u,"hasChildren",!0);for(var p=this.getId(c),f=m(p)?this.treeData.length:this.getDataPos(this.treeData,this.fields,p),g=0;g<e.length;g++){if(!m(u)){var y=this.isNumberTypeId?parseFloat(u):u;d(this.fields.parentID,y,e[g])}this.treeData.splice(f,0,e[g]),f++}}else this.addChildData(this.treeData,this.fields,u,e,n);this.finalizeNode(a)}},t.prototype.updateMapper=function(e){var t=1===e?this.fields:this.getChildFields(this.fields,e-1,1);this.updateListProp(t)},t.prototype.updateListProp=function(e){var t=this.getActualProperties(e);this.listBaseOption.fields=t,this.listBaseOption.fields.url=t.hasOwnProperty("navigateUrl")?t.navigateUrl:"navigateUrl"},t.prototype.getDataPos=function(e,t,n){for(var i=null,r=0,o=e.length;r<o;r++){var s=h(t.id,e[r]);if(e[r]&&s&&s.toString()===n)return r;if("string"!=typeof t.child||m(h(t.child,e[r]))){if(this.fields.dataSource instanceof oh&&!m(h("child",e[r]))){var a=h("child",e[r]);if(null!==(i=this.getDataPos(a,this.getChildMapper(t),n)))break}}else{var l=h(t.child,e[r]);if(null!==(i=this.getDataPos(l,this.getChildMapper(t),n)))break}}return i},t.prototype.addChildData=function(e,t,n,i,r){var o;if(m(n)){r=m(r)?e.length:r;for(var s=0,a=i.length;s<a;s++)e.splice(r,0,i[s]),r++;return o}for(var l=0,c=e.length;l<c;l++){var d=h(t.id,e[l]);if(e[l]&&d&&d.toString()===n){if("string"==typeof t.child&&e[l].hasOwnProperty(t.child)||this.fields.dataSource instanceof oh&&e[l].hasOwnProperty("child")){var u=h("string"==typeof t.child?t.child:"child",e[l]);for(r=m(r)?u.length:r,s=0,a=i.length;s<a;s++)u.splice(r,0,i[s]),r++}else e[l]["string"==typeof t.child?t.child:"child"]=i;return!0}if("string"!=typeof t.child||m(h(t.child,e[l]))){if(this.fields.dataSource instanceof oh&&!m(h("child",e[l]))&&(u=h("child",e[l]),void 0!==(o=this.addChildData(u,this.getChildMapper(t),n,i,r))))break}else{var p=h(t.child,e[l]);if(void 0!==(o=this.addChildData(p,this.getChildMapper(t),n,i,r)))break}}return o},t.prototype.doDisableAction=function(e){for(var t=0,n=e.length;t<n;t++){var i=this.getElement(e[t]);m(i)?e[t]&&e[t].toString()&&-1===this.disableNode.indexOf(e[t].toString())&&this.disableNode.push(e[t].toString()):(i.setAttribute("aria-disabled","true"),P([i],"e-disable"))}},t.prototype.doEnableAction=function(e){for(var t=0,n=e.length;t<n;t++){var i=this.getElement(e[t]);if(m(i)){var r=e[t]?e[t].toString():null;r&&-1!==this.disableNode.indexOf(r)&&this.disableNode.splice(this.disableNode.indexOf(r),1)}else i.removeAttribute("aria-disabled"),T([i],"e-disable")}},t.prototype.setTouchClass=function(){var e=V(this.element,".e-bigger");this.touchClass=m(e)?"":"e-small"},t.prototype.updatePersistProp=function(){this.removeField(this.treeData,this.fields,["selected","expanded"]);for(var e=this.selectedNodes,t=0,n=e.length;t<n;t++)this.updateField(this.treeData,this.fields,e[t],"selected",!0);for(var i=this.expandedNodes,r=0,o=i.length;r<o;r++)this.updateField(this.treeData,this.fields,i[r],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);var s=this.checkedNodes,a=0;for(o=s.length;a<o;a++)this.updateField(this.treeData,this.fields,s[a],"isChecked",!0)}},t.prototype.removeField=function(e,t,n){if(!m(e)&&!m(t))for(var i=0,r=e.length;i<r;i++){for(var o=0;o<n.length;o++){var s=this.getMapperProp(t,n[o]);m(e[i][s])||delete e[i][s]}"string"!=typeof t.child||m(h(t.child,e[i]))?this.fields.dataSource instanceof oh&&!m(h("child",e[i]))&&this.removeField(h("child",e[i]),this.getChildMapper(t),n):this.removeField(h(t.child,e[i]),this.getChildMapper(t),n)}},t.prototype.getMapperProp=function(e,t){switch(t){case"selected":return m(e.selected)?"selected":e.selected;case"expanded":return m(e.expanded)?"expanded":e.expanded;case"isChecked":return m(e.isChecked)?"isChecked":e.isChecked;case"hasChildren":return m(e.hasChildren)?"hasChildren":e.hasChildren;default:return t}},t.prototype.updateField=function(e,t,n,i,r){if(!m(n))if(1===this.dataType){var o=this.isNumberTypeId?parseFloat(n):n,s=new oh(this.treeData).executeLocal((new Zc).where(t.id,"equal",o,!1));d(this.getMapperProp(t,i),r,s[0])}else this.updateChildField(e,t,n,i,r)},t.prototype.updateChildField=function(e,t,n,i,r,o){var s;if(m(e))return s;for(var a=0,l=e.length;a<l;a++){var c=h(t.id,e[a]);if(e[a]&&c&&c.toString()===n)return o?s=e.splice(a,1):(d(this.getMapperProp(t,i),r,e[a]),s=[]),s;if("string"!=typeof t.child||m(h(t.child,e[a]))){if(this.fields.dataSource instanceof oh&&!m(h("child",e[a]))){var u=h("child",e[a]);if(void 0!==(s=this.updateChildField(u,this.getChildMapper(t),n,i,r,o)))break}}else{var p=h(t.child,e[a]);if(void 0!==(s=this.updateChildField(p,this.getChildMapper(t),n,i,r,o)))break}}return s},t.prototype.triggerEvent=function(){this.trigger("dataSourceChanged",{data:this.treeData})},t.prototype.wireInputEvents=function(e){I.add(e,"blur",this.inputFocusOut,this)},t.prototype.wireEditingEvents=function(e){if(e){var t=this;this.touchEditObj=new wt(this.element,{tap:function(e){2===e.tapCount&&(e.originalEvent.preventDefault(),t.editingHandler(e.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()},t.prototype.wireClickEvent=function(e){if(e){var t=this;this.touchClickObj=new wt(this.element,{tap:function(e){e.originalEvent.preventDefault(),t.clickHandler(e)}})}else this.touchClickObj&&this.touchClickObj.destroy()},t.prototype.wireExpandOnEvent=function(e){var t=this;if(e){var n=this;this.touchExpandObj=new wt(this.element,{tap:function(e){("Click"===t.expandOnType||"DblClick"===t.expandOnType&&2===e.tapCount)&&n.expandHandler(e)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()},t.prototype.mouseDownHandler=function(e){this.mouseDownStatus=!0,(e.shiftKey||e.ctrlKey)&&e.preventDefault(),e.ctrlKey&&this.allowMultiSelection&&I.add(this.element,"contextmenu",this.preventContextMenu,this)},t.prototype.preventContextMenu=function(e){e.preventDefault()},t.prototype.wireEvents=function(){I.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),I.add(this.element,"focus",this.focusIn,this),I.add(this.element,"blur",this.focusOut,this),I.add(this.element,"mouseover",this.onMouseOver,this),I.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new mt(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.unWireEvents=function(){I.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),I.remove(this.element,"focus",this.focusIn),I.remove(this.element,"blur",this.focusOut),I.remove(this.element,"mouseover",this.onMouseOver),I.remove(this.element,"mouseout",this.onMouseLeave),this.keyboardModule.destroy()},t.prototype.parents=function(e,t){for(var n=[],i=e.parentNode;!m(i);)G(i,t)&&n.push(i),i=i.parentNode;return n},t.prototype.isDescendant=function(e,t){for(var n=t.parentNode;!m(n);){if(n===e)return!0;n=n.parentNode}return!1},t.prototype.showSpinner=function(e){P([e],Wv),Sv({target:e,width:re.isDevice?16:14},this.createElement),Rv(e)},t.prototype.hideSpinner=function(e){_v(e),e.innerHTML="",T([e],Wv)},t.prototype.setCheckedNodes=function(e){e=JSON.parse(JSON.stringify(e)),this.uncheckAll(this.checkedNodes),this.setIndeterminate(e),e.length>0&&this.checkAll(e)},t.prototype.setValidCheckedNode=function(e){if(1===this.dataType){var t=this.fields,n=new oh(this.treeData).executeLocal((new Zc).where(t.id,"equal",e,!0));if(n[0]&&(this.setChildCheckState(n,e,n[0]),this.autoCheck)){for(var i=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null,r=this.getChildNodes(this.treeData,i),o=0,s=0;s<r.length;s++){var a=r[s][this.fields.id].toString();-1!==this.checkedNodes.indexOf(a)&&o++}o===r.length&&-1===this.checkedNodes.indexOf(i)&&i&&this.checkedNodes.push(i)}}else if(2===this.dataType)for(var l=0;l<this.treeData.length;l++){if((this.treeData[l][this.fields.id]?this.treeData[l][this.fields.id].toString():"")===e&&-1===this.checkedNodes.indexOf(e)){this.checkedNodes.push(e);break}var c=h(this.fields.child.toString(),this.treeData[l]);c&&this.setChildCheckState(c,e,this.treeData[l])}},t.prototype.setChildCheckState=function(e,t,n){var i,r=0;if(1===this.dataType){n&&(i=n[this.fields.id]?n[this.fields.id].toString():null);for(var o=0;o<e.length;o++){var s=e[o][this.fields.id]?e[o][this.fields.id].toString():null;n&&i&&this.autoCheck&&-1!==this.checkedNodes.indexOf(i)&&-1===this.checkedNodes.indexOf(s)&&this.checkedNodes.push(s),s===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t),(a=this.getChildNodes(this.treeData,s))&&this.setChildCheckState(a,t,n)}}else for(n&&(i=n[this.fields.id]?n[this.fields.id].toString():""),o=0;o<e.length;o++){var a,l=e[o][this.fields.id]?e[o][this.fields.id].toString():"";n&&i&&this.autoCheck&&-1!==this.checkedNodes.indexOf(i)&&-1===this.checkedNodes.indexOf(l)&&this.checkedNodes.push(l),l===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t),(a=h(this.fields.child.toString(),e[o]))&&this.setChildCheckState(a,t,e[o]),-1!==this.checkedNodes.indexOf(l)&&this.autoCheck&&r++,r===e.length&&-1===this.checkedNodes.indexOf(i)&&this.autoCheck&&this.checkedNodes.push(i)}},t.prototype.setIndeterminate=function(e){for(var t=0;t<e.length;t++)this.setValidCheckedNode(e[t])},t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){var r=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(r,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=t.checkedNodes,this.setCheckedNodes(e.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=e.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(t.cssClass,e.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:m(e.expandedNodes)?[]:e.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0);break;case"fields":this.isAnimate=!1,this.initialRender=!0,this.updateListProp(this.fields),this.reRenderNodes(),this.initialRender=!1,this.isAnimate=!0;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect);break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){for(var o=this.element.querySelectorAll("li"),s=0;s<o.length;)this.renderChildNodes(o[s],!0,null,!0),s++;this.onLoaded=!0}break;case"nodeTemplate":this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:e.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"sortOrder":this.reRenderNodes()}},t.prototype.destroy=function(){this.element.removeAttribute("aria-activedescendant"),this.element.removeAttribute("tabindex"),this.unWireEvents(),this.wireEditingEvents(!1),this.rippleFn(),this.rippleIconFn(),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.element.innerHTML="",e.prototype.destroy.call(this)},t.prototype.addNodes=function(e,t,n,i){if(!m(e)){e=JSON.parse(JSON.stringify(e));var r=this.getElement(t);if(this.preventExpand=i,this.fields.dataSource instanceof oh){var o,s=r?r.querySelector(".e-icons"):null,a=this;r&&s&&s.classList.contains(Bv)&&null===r.querySelector("."+Hv)?a.renderChildNodes(r,null,function(){o=r.querySelector("."+Hv),a.addGivenNodes(e,r,n,!0,o),a.triggerEvent()}):(this.addGivenNodes(e,r,n,!0),this.triggerEvent())}else if(2===this.dataType)this.addGivenNodes(e,r,n);else{if(r)this.addGivenNodes(e,r,n);else{e=this.getSortedData(e);for(var l=0;l<e.length;l++){var c=h(this.fields.parentID,e[l]);r=c?this.getElement(c.toString()):c,this.addGivenNodes([e[l]],r,n)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.showCheckBox&&r&&this.ensureParentCheckState(r),this.fields.dataSource instanceof oh==0&&(this.preventExpand=!1,this.triggerEvent())}},t.prototype.beginEdit=function(e){var t=this.getElement(e);m(t)||this.createTextbox(t,null)},t.prototype.checkAll=function(e){this.showCheckBox&&this.doCheckBoxAction(e,!0)},t.prototype.collapseAll=function(e,t,n){m(e)?t>0?this.collapseByLevel(z("."+Hv,this.element),t,n):this.collapseAllNodes(n):this.doGivenAction(e,Nv,!1)},t.prototype.disableNodes=function(e){m(e)||this.doDisableAction(e)},t.prototype.enableNodes=function(e){m(e)||this.doEnableAction(e)},t.prototype.ensureVisible=function(e){var t=this.getElement(e);if(!m(t)){var n=this.parents(t,"."+Fv);this.expandAll(n),setTimeout(function(){t.scrollIntoView(!0)},450)}},t.prototype.expandAll=function(e,t,n){m(e)?t>0?this.expandByLevel(z("."+Hv,this.element),t,n):this.expandAllNodes(n):this.doGivenAction(e,Bv,!0)},t.prototype.getAllCheckedNodes=function(){for(var e=this.checkedNodes,t=[],n=0,i=this.fields.id;n<this.treeData.length;n++){var r=null,o=null,s=this.element.querySelector('[data-uid="'+this.treeData[n][i].toString()+'"]');s&&null===s.querySelector(".e-list-item")&&(!0===this.treeData[n][this.fields.isChecked]&&-1===this.checkedElement.indexOf(this.treeData[n][i].toString())&&(t.push(this.treeData[n][i].toString()),r=2),2!==r&&(r=1),null!==(o=this.getChildNodes(this.treeData,this.treeData[n][i].toString()))&&this.autoCheck?this.allCheckNode(o,t,r):o=null)}for(n=0;n<e.length;)if(-1===t.indexOf(e[n])){t.push(e[n]);var a=this.element.querySelector('[data-uid="'+e[n]+'"]');if(a&&null===a.querySelector(".e-list-item")){var l=this.getChildNodes(this.treeData,e[n].toString());l&&this.autoCheck?this.allCheckNode(l,t):l=null}n++}else n++;return t},t.prototype.getNode=function(e){var t=this.getElement(e);return this.getNodeData(t,!0)},t.prototype.getTreeData=function(e){var t=this.getId(e);if(this.updatePersistProp(),m(t))return this.treeData;var n=this.getNodeObject(t);return m(n)?[]:[n]},t.prototype.moveNodes=function(e,t,n,i){var r=this.getElement(t);if(!m(r)){for(var o=0;o<e.length;o++){var s=this.getElement(e[o]);m(s)||r.isSameNode(s)||this.isDescendant(s,r)||(this.preventExpand=i,this.dropAsChildNode(s,r,this,n))}this.fields.dataSource instanceof oh==0&&(this.preventExpand=!1),this.triggerEvent()}},t.prototype.removeNodes=function(e){if(!m(e)){for(var t=0,n=e.length;t<n;t++){var i=this.getElement(e[t]);m(i)||this.removeNode(i)}1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent()}},t.prototype.updateNode=function(e,t){if(!m(e)&&!m(t)&&this.allowEditing){var n=this.getElement(e);if(!m(n)){var i=z("."+zv,n);this.updateOldText(n);var r=this.getEditEvent(n,null,null);this.trigger("nodeEditing",r),r.cancel||this.appendNewText(n,i,t,!1)}}},t.prototype.uncheckAll=function(e){this.showCheckBox&&this.doCheckBoxAction(e,!1)},Object(s.b)([ye(!1)],t.prototype,"allowDragAndDrop",void 0),Object(s.b)([ye(!1)],t.prototype,"allowEditing",void 0),Object(s.b)([ye(!1)],t.prototype,"allowMultiSelection",void 0),Object(s.b)([ve({},tb)],t.prototype,"animation",void 0),Object(s.b)([ye()],t.prototype,"checkedNodes",void 0),Object(s.b)([ye("")],t.prototype,"cssClass",void 0),Object(s.b)([ye(!1)],t.prototype,"enablePersistence",void 0),Object(s.b)([ye(!1)],t.prototype,"enableRtl",void 0),Object(s.b)([ye()],t.prototype,"expandedNodes",void 0),Object(s.b)([ye("Auto")],t.prototype,"expandOn",void 0),Object(s.b)([ve({},$v)],t.prototype,"fields",void 0),Object(s.b)([ye(!0)],t.prototype,"fullRowSelect",void 0),Object(s.b)([ye(!0)],t.prototype,"loadOnDemand",void 0),Object(s.b)([ye()],t.prototype,"nodeTemplate",void 0),Object(s.b)([ye()],t.prototype,"selectedNodes",void 0),Object(s.b)([ye("None")],t.prototype,"sortOrder",void 0),Object(s.b)([ye(!1)],t.prototype,"showCheckBox",void 0),Object(s.b)([ye(!0)],t.prototype,"autoCheck",void 0),Object(s.b)([xe()],t.prototype,"created",void 0),Object(s.b)([xe()],t.prototype,"dataBound",void 0),Object(s.b)([xe()],t.prototype,"dataSourceChanged",void 0),Object(s.b)([xe()],t.prototype,"drawNode",void 0),Object(s.b)([xe()],t.prototype,"destroyed",void 0),Object(s.b)([xe()],t.prototype,"keyPress",void 0),Object(s.b)([xe()],t.prototype,"nodeChecked",void 0),Object(s.b)([xe()],t.prototype,"nodeChecking",void 0),Object(s.b)([xe()],t.prototype,"nodeClicked",void 0),Object(s.b)([xe()],t.prototype,"nodeCollapsed",void 0),Object(s.b)([xe()],t.prototype,"nodeCollapsing",void 0),Object(s.b)([xe()],t.prototype,"nodeDragging",void 0),Object(s.b)([xe()],t.prototype,"nodeDragStart",void 0),Object(s.b)([xe()],t.prototype,"nodeDragStop",void 0),Object(s.b)([xe()],t.prototype,"nodeDropped",void 0),Object(s.b)([xe()],t.prototype,"nodeEdited",void 0),Object(s.b)([xe()],t.prototype,"nodeEditing",void 0),Object(s.b)([xe()],t.prototype,"nodeExpanded",void 0),Object(s.b)([xe()],t.prototype,"nodeExpanding",void 0),Object(s.b)([xe()],t.prototype,"nodeSelected",void 0),Object(s.b)([xe()],t.prototype,"nodeSelecting",void 0),n=Object(s.b)([Ae],t)}(ht),ib="e-open",rb="e-right",ob="e-left",sb="e-over",ab="e-push",lb="e-sidebar-context",cb=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(s.c)(t,e),t.prototype.preRender=function(){this.setWidth()},t.prototype.render=function(){this.initialize(),this.wireEvents()},t.prototype.initialize=function(){this.setTarget(),this.addClass(),this.setZindex(),this.enableDock&&this.setDock(),this.isOpen?this.show():this.setMediaQuery(),this.checkType(!0),this.setType(this.type),this.setCloseOnDocumentClick(),this.setEnableRTL()},t.prototype.setEnableRTL=function(){this.enableRtl?P([this.element],"e-rtl"):T([this.element],"e-rtl")},t.prototype.setTarget=function(){this.sidebarEleCopy=this.element.cloneNode(!0),"string"==typeof this.target&&this.setProperties({target:document.querySelector(this.target)},!0),this.target&&(this.target.insertBefore(this.element,this.target.children[0]),P([this.element],"e-sidebar-absolute"),P([this.target],lb))},t.prototype.setCloseOnDocumentClick=function(){this.closeOnDocumentClick?I.add(document,"mousedown touchstart",this.documentclickHandler,this):I.remove(document,"mousedown touchstart",this.documentclickHandler)},t.prototype.setWidth=function(){this.enableDock&&"Left"===this.position?U(this.element,{width:this.setDimension(this.dockSize)}):this.enableDock&&"Right"===this.position?U(this.element,{width:this.setDimension(this.dockSize)}):this.enableDock||U(this.element,{width:this.setDimension(this.width)})},t.prototype.setDimension=function(e){return"number"==typeof e?x(e):"string"==typeof e?e.match(/px|%|em/)?e:x(e):"100%"},t.prototype.setZindex=function(){U(this.element,{"z-index":""+this.zIndex})},t.prototype.addClass=function(){var e=document.querySelector(".e-main-content");m(e||this.element.nextElementSibling)||P([e||this.element.nextElementSibling],["e-content-animation"]),this.enableDock||"Auto"===this.type||P([this.element],["e-visibility"]),T([this.element],[ib,"e-close",rb,ob,"e-slide",ab,sb]),this.element.classList.add("e-sidebar"),P([this.element],"Right"===this.position?rb:ob),"Auto"!==this.type||re.isDevice?this.isOpen||P([this.element],"e-close"):this.show(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)},t.prototype.checkType=function(e){"Push"!==this.type&&"Over"!==this.type&&"Slide"!==this.type?this.type="Auto":this.element.classList.contains("e-close")||e||this.hide()},t.prototype.destroyBackDrop=function(){var e=document.querySelector(".e-main-content")||this.element.nextElementSibling;this.target&&this.showBackdrop&&e?T([e],"e-backdrop"):this.showBackdrop&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},t.prototype.hide=function(e){var t={model:this,element:this.element,cancel:!1,isInteracted:!m(e),event:e||null};if(this.trigger("close",t),!t.cancel){if(this.element.classList.contains("e-close"))return;this.element.classList.contains(ib)&&this.trigger("change",{name:"change",element:this.element}),P([this.element],"e-close"),T([this.element],ib),U(this.element,this.enableDock?{width:x(this.dockSize)}:{width:x(this.width)}),this.setDock(),this.setType(this.type);var n=document.querySelector(".e-main-content")||this.element.nextElementSibling;!this.enableDock&&n&&(n.style.transform="translateX(0px)","Left"===this.position?n.style.marginLeft="0px":n.style.marginRight="0px"),this.destroyBackDrop(),this.setAnimation(),"Slide"===this.type&&document.body.classList.remove("e-sidebar-overflow"),this.setProperties({isOpen:!1},!0)}},t.prototype.show=function(e){var t={model:this,element:this.element,cancel:!1,isInteracted:!m(e),event:e||null};if(this.trigger("open",t),!t.cancel){if(T([this.element],"e-visibility"),this.element.classList.contains(ib))return;this.element.classList.contains("e-close")&&this.trigger("change",{name:"change",element:this.element}),P([this.element],[ib,"e-transition"]),U(this.element,{transform:""}),T([this.element],"e-close"),U(this.element,{width:x(this.width)}),this.element.getBoundingClientRect(),this.setType(this.type),this.createBackDrop(),this.setAnimation(),"Slide"===this.type&&document.body.classList.add("e-sidebar-overflow"),this.setProperties({isOpen:!0},!0)}},t.prototype.setAnimation=function(){this.animate?T([this.element],"e-disable-animation"):P([this.element],"e-disable-animation")},t.prototype.setDock=function(){this.enableDock&&"Left"===this.position&&!this.getState()?U(this.element,{transform:"translateX(-100%) translateX("+this.setDimension(this.dockSize)+")"}):this.enableDock&&"Right"===this.position&&!this.getState()&&U(this.element,{transform:"translateX(100%) translateX(-"+this.setDimension(this.dockSize)+")"}),this.element.classList.contains("e-close")&&this.enableDock&&U(this.element,{width:this.setDimension(this.dockSize)})},t.prototype.createBackDrop=function(){this.target&&this.showBackdrop?P([document.querySelector(".e-main-content")||this.element.nextElementSibling],"e-backdrop"):this.showBackdrop&&!this.modal&&this.getState()&&(this.modal=this.createElement("div"),this.modal.className="e-sidebar-overlay",this.modal.style.display="block",document.body.appendChild(this.modal))},t.prototype.getPersistData=function(){return this.addOnPersist(["type","position","isOpen"])},t.prototype.getModuleName=function(){return"sidebar"},t.prototype.toggle=function(e){this.element.classList.contains(ib)?this.hide():this.show()},t.prototype.getState=function(){return!!this.element.classList.contains(ib)},t.prototype.setMediaQuery=function(){this.mediaQuery&&(("string"==typeof this.mediaQuery?window.matchMedia(this.mediaQuery).matches:this.mediaQuery.matches)?this.show():this.getState()&&this.hide())},t.prototype.resize=function(e){"Auto"===this.type&&P([this.element],re.isDevice?sb:ab),this.setMediaQuery()},t.prototype.documentclickHandler=function(e){V(e.target,".e-control.e-sidebar")||this.hide(e)},t.prototype.enableGestureHandler=function(e){"Left"===this.position&&"Right"===e.swipeDirection&&e.startX<=20&&e.distanceX>=50&&e.velocity>=.5?this.show():"Left"===this.position&&"Left"===e.swipeDirection?this.hide():"Right"===this.position&&"Right"===e.swipeDirection?this.hide():"Right"===this.position&&"Left"===e.swipeDirection&&window.innerWidth-e.startX<=20&&e.distanceX>=50&&e.velocity>=.5&&this.show()},t.prototype.setEnableGestures=function(){this.enableGestures?(this.mainContentEle=new wt(document.body,{swipe:this.enableGestureHandler.bind(this)}),this.sidebarEle=new wt(this.element,{swipe:this.enableGestureHandler.bind(this)})):this.mainContentEle&&this.sidebarEle&&(this.mainContentEle.destroy(),this.sidebarEle.destroy())},t.prototype.wireEvents=function(){this.setEnableGestures(),window.addEventListener("resize",this.resize.bind(this))},t.prototype.unWireEvents=function(){window.removeEventListener("resize",this.resize.bind(this)),I.remove(document,"mousedown touchstart",this.documentclickHandler),this.mainContentEle&&this.mainContentEle.destroy(),this.sidebarEle&&this.sidebarEle.destroy()},t.prototype.onPropertyChanged=function(t,n){for(var i=document.querySelector(".e-main-content")||this.element.nextElementSibling,r=0,o=Object.keys(t);r<o.length;r++)switch(o[r]){case"isOpen":this.isOpen?this.show():this.hide();break;case"width":this.setWidth(),this.getState()||this.setDock();break;case"animate":this.setAnimation();break;case"type":this.checkType(!1),T([this.element],["e-visibility"]),this.addClass(),P([this.element],"Auto"===this.type?re.isDevice?["e-over"]:["e-push"]:["e-"+this.type.toLowerCase()]);break;case"position":this.element.style.transform="",this.setDock(),i&&("Left"===this.position?i.style.marginRight="0px":i.style.marginLeft="0px"),"Right"===this.position?(T([this.element],ob),P([this.element],rb)):(T([this.element],rb),P([this.element],ob)),this.setType(this.type);break;case"showBackdrop":this.showBackdrop?this.createBackDrop():this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null);break;case"target":"string"==typeof this.target&&this.setProperties({target:document.querySelector(this.target)},!0),m(this.target)?(T([this.element],"e-sidebar-absolute"),T([n.target],lb),U(i,{"margin-left":0,"margin-right":0}),document.body.insertAdjacentElement("afterbegin",this.element)):e.prototype.refresh.call(this);break;case"closeOnDocumentClick":this.setCloseOnDocumentClick();break;case"enableDock":this.getState()||this.setDock();break;case"zIndex":this.setZindex();break;case"mediaQuery":this.setMediaQuery();break;case"enableGestures":this.setEnableGestures();break;case"enableRtl":this.setEnableRTL()}},t.prototype.setType=function(e){var t=this.element.getBoundingClientRect().width;this.setZindex(),this.enableDock&&P([this.element],"e-dock");var n=document.querySelector(".e-main-content")||this.element.nextElementSibling;n&&(n.style.transform="translateX(0px)",re.isDevice||"Auto"===this.type||("Left"===this.position?n.style.marginLeft="0px":n.style.marginRight="0px"));var i=t+"px",r="Left"===this.position?t:-t;switch(T([this.element],[ab,sb,"e-slide"]),e){case"Push":P([this.element],[ab]),n&&(this.enableDock||this.element.classList.contains(ib))&&("Left"===this.position?n.style.marginLeft=i:n.style.marginRight=i);break;case"Slide":P([this.element],["e-slide"]),n&&(this.enableDock||this.element.classList.contains(ib))&&(n.style.transform="translateX("+r+"px)");break;case"Over":P([this.element],[sb]),this.enableDock&&this.element.classList.contains("e-close")&&n&&("Left"===this.position?n.style.marginLeft=i:n.style.marginRight=i);break;case"Auto":P([this.element],["e-transition"]),re.isDevice?n&&this.enableDock&&!this.getState()?("Left"===this.position?n.style.marginLeft=i:n.style.marginRight=i,P([this.element],ab)):P([this.element],sb):(P([this.element],ab),n&&(this.enableDock||this.element.classList.contains(ib))&&("Left"===this.position?n.style.marginLeft=i:n.style.marginRight=i)),this.createBackDrop()}},t.prototype.destroy=function(){e.prototype.destroy.call(this),T([this.element],[ib,"e-close",ab,"e-slide",sb,ob,rb,"e-transition"]),this.target&&(T([this.element],"e-sidebar-absolute"),T([this.target],lb)),this.destroyBackDrop(),this.element.style.width="",this.element.style.zIndex="",this.element.style.transform="",m(this.sidebarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex);var t=document.querySelector(".e-main-content")||this.element.nextElementSibling;m(t)||(t.style.margin="",t.style.transform=""),this.unWireEvents()},Object(s.b)([ye("auto")],t.prototype,"dockSize",void 0),Object(s.b)([ye(null)],t.prototype,"mediaQuery",void 0),Object(s.b)([ye(!1)],t.prototype,"enableDock",void 0),Object(s.b)([ye("en-US")],t.prototype,"locale",void 0),Object(s.b)([ye(!1)],t.prototype,"enablePersistence",void 0),Object(s.b)([ye(!0)],t.prototype,"enableGestures",void 0),Object(s.b)([ye(!1)],t.prototype,"isOpen",void 0),Object(s.b)([ye(!1)],t.prototype,"enableRtl",void 0),Object(s.b)([ye(!0)],t.prototype,"animate",void 0),Object(s.b)([ye("auto")],t.prototype,"height",void 0),Object(s.b)([ye(!1)],t.prototype,"closeOnDocumentClick",void 0),Object(s.b)([ye("Left")],t.prototype,"position",void 0),Object(s.b)([ye(null)],t.prototype,"target",void 0),Object(s.b)([ye(!1)],t.prototype,"showBackdrop",void 0),Object(s.b)([ye("Auto")],t.prototype,"type",void 0),Object(s.b)([ye("auto")],t.prototype,"width",void 0),Object(s.b)([ye(1e3)],t.prototype,"zIndex",void 0),Object(s.b)([xe()],t.prototype,"created",void 0),Object(s.b)([xe()],t.prototype,"close",void 0),Object(s.b)([xe()],t.prototype,"open",void 0),Object(s.b)([xe()],t.prototype,"change",void 0),Object(s.b)([xe()],t.prototype,"destroyed",void 0),Object(s.b)([Ae],t)}(ht),hb="e-vertical",db=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.tempItems=[],i}return Object(s.c)(t,e),t.prototype.getModuleName=function(){return"menu"},t.prototype.preRender=function(){if(this.isMenu=!0,this.template)try{document.querySelectorAll(this.template).length&&(this.template=document.querySelector(this.template).innerHTML.trim(),this.clearChanges())}catch(t){}else this.updateMenuItems(this.items);e.prototype.preRender.call(this)},t.prototype.initialize=function(){e.prototype.initialize.call(this),F(this.element,{role:"menubar",tabindex:"0"}),"Vertical"===this.orientation?(this.element.classList.add(hb),this.element.setAttribute("aria-orientation","vertical")):re.isDevice&&!this.enableScrolling&&this.element.parentElement.classList.add("e-scrollable")},t.prototype.updateMenuItems=function(e){this.tempItems=e,this.items=[],this.tempItems.map(this.createMenuItems,this),this.setProperties({items:this.items},!0),this.tempItems=[]},t.prototype.onPropertyChanged=function(t,n){for(var i=0,r=Object.keys(t);i<r.length;i++)switch(r[i]){case"orientation":"Vertical"===t.orientation?(this.element.classList.add(hb),this.element.setAttribute("aria-orientation","vertical")):(this.element.classList.remove(hb),this.element.removeAttribute("aria-orientation"));break;case"items":Object.keys(n.items).length||this.updateMenuItems(t.items)}e.prototype.onPropertyChanged.call(this,t,n)},t.prototype.createMenuItems=function(e){var t,n,i,r=this.items;if(e[t=this.getField("parentId")]){for(n=this.getIndex(e[t].toString(),!0),i=0;i<n.length;i++)r[n[i]].items||(r[n[i]].items=[]),r=r[n[i]].items;r.push(e)}else this.items.push(e)},Object(s.b)([ye("Horizontal")],t.prototype,"orientation",void 0),Object(s.b)([ye(null)],t.prototype,"template",void 0),Object(s.b)([ye(!1)],t.prototype,"enableScrolling",void 0),Object(s.b)([ve({},vh)],t.prototype,"fields",void 0),Object(s.b)([Ae],t)}(Ch),ub=[],pb=function(e){function t(t){var n=e.call(this)||this;return n.viewContainerRef=t,Ht("currentInstance",n,n.viewContainerRef),n.registerEvents(ub),n}return Object(s.c)(t,e),t}(Vt);Object(s.b)([qt(),Object(s.d)("design:type",Object)],pb.prototype,"header",void 0),Object(s.b)([qt(),Object(s.d)("design:type",Object)],pb.prototype,"content",void 0);var fb=["clicked","created","destroyed","expanded","expanding"],gb=[""],mb=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.ngEle=t,o.srenderer=n,o.viewContainerRef=i,o.injector=r,o.tags=["items"],o.element=o.ngEle.nativeElement,o.injectedModules=o.injectedModules||[],o.registerEvents(fb),o.addTwoWay.call(o,gb),Ht("currentInstance",o,o.viewContainerRef),o}return Object(s.c)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.ngAfterContentChecked=function(){},t}(Ph);mb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Bt([Wt]),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector])}()],mb);var yb=["click"],vb=function(e){function t(t){var n=e.call(this)||this;return n.viewContainerRef=t,Ht("currentInstance",n,n.viewContainerRef),n.registerEvents(yb),n}return Object(s.c)(t,e),t}(Vt);!function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([qt(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",t)}(0,Object)],vb.prototype,"template",void 0);var bb=function(e){function t(){return e.call(this,"items")||this}return Object(s.c)(t,e),t}(Ut),wb=["beforeCreate","clicked","created","destroyed"],Cb=[""],xb=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.ngEle=t,o.srenderer=n,o.viewContainerRef=i,o.injector=r,o.tags=["items"],o.element=o.ngEle.nativeElement,o.injectedModules=o.injectedModules||[],o.registerEvents(wb),o.addTwoWay.call(o,Cb),Ht("currentInstance",o,o.viewContainerRef),o}return Object(s.c)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.ngAfterContentChecked=function(){},t}(Xy);xb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Bt([Wt]),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector])}()],xb);var Ab=function(){return function(){}}(),Sb=["beforeClose","beforeItemRender","beforeOpen","created","onClose","onOpen","select"],Ob=[""],Eb=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.ngEle=t,o.srenderer=n,o.viewContainerRef=i,o.injector=r,o.element=o.ngEle.nativeElement,o.injectedModules=o.injectedModules||[],o.registerEvents(Sb),o.addTwoWay.call(o,Ob),Ht("currentInstance",o,o.viewContainerRef),o}return Object(s.c)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.ngAfterContentChecked=function(){},t}(xh);Eb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Bt([Wt]),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector])}()],Eb);var Ib=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Db=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},kb=[],Pb=function(e){function t(t){var n=e.call(this)||this;return n.viewContainerRef=t,Ht("currentInstance",n,n.viewContainerRef),n.registerEvents(kb),n}return Object(s.c)(t,e),t}(Vt);Ib([qt(),Db("design:type",Object)],Pb.prototype,"content",void 0),Ib([qt(),Db("design:type",Object)],Pb.prototype,"header_text",void 0);var Tb=["added","adding","created","destroyed","removed","removing","selected","selecting"],Mb=[""],jb=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.ngEle=t,o.srenderer=n,o.viewContainerRef=i,o.injector=r,o.tags=["items"],o.element=o.ngEle.nativeElement,o.injectedModules=o.injectedModules||[],o.registerEvents(Tb),o.addTwoWay.call(o,Mb),Ht("currentInstance",o,o.viewContainerRef),o}return Object(s.c)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.ngAfterContentChecked=function(){},t}(nv);jb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Bt([Wt]),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector])}()],jb);var Rb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Lb=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_b=["created","dataBound","dataSourceChanged","destroyed","drawNode","keyPress","nodeChecked","nodeChecking","nodeClicked","nodeCollapsed","nodeCollapsing","nodeDragStart","nodeDragStop","nodeDragging","nodeDropped","nodeEdited","nodeEditing","nodeExpanded","nodeExpanding","nodeSelected","nodeSelecting"],Nb=[""],Bb=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.ngEle=t,o.srenderer=n,o.viewContainerRef=i,o.injector=r,o.element=o.ngEle.nativeElement,o.injectedModules=o.injectedModules||[],o.registerEvents(_b),o.addTwoWay.call(o,Nb),Ht("currentInstance",o,o.viewContainerRef),o}return Object(s.c)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.ngAfterContentChecked=function(){},t}(nb);Rb([qt(),Lb("design:type",Object)],Bb.prototype,"nodeTemplate",void 0),Bb=Rb([Bt([Wt]),Lb("design:paramtypes",[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector])],Bb);var Fb=["change","close","created","destroyed","open","isOpenChange"],zb=["isOpen"],Hb=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.ngEle=t,o.srenderer=n,o.viewContainerRef=i,o.injector=r,o.element=o.ngEle.nativeElement,o.injectedModules=o.injectedModules||[],o.registerEvents(Fb),o.addTwoWay.call(o,zb),Ht("currentInstance",o,o.viewContainerRef),o}return Object(s.c)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.ngAfterContentChecked=function(){},t}(cb);Hb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Bt([Wt]),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector])}()],Hb);var Vb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Ub=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Wb=["beforeClose","beforeItemRender","beforeOpen","created","onClose","onOpen","select"],Gb=[""],qb=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.ngEle=t,o.srenderer=n,o.viewContainerRef=i,o.injector=r,o.tags=["items"],o.element=o.ngEle.nativeElement,o.injectedModules=o.injectedModules||[],o.registerEvents(Wb),o.addTwoWay.call(o,Gb),Ht("currentInstance",o,o.viewContainerRef),o}return Object(s.c)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.ngAfterContentChecked=function(){},t}(db);Vb([qt(),Ub("design:type",Object)],qb.prototype,"template",void 0),qb=Vb([Bt([Wt]),Ub("design:paramtypes",[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector])],qb);var Qb=function(){return function(){}}(),Yb=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Xb(e){return i["\u0275vid"](2,[i["\u0275ncd"](null,0)],null,null)}var Zb=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Kb(e){return i["\u0275vid"](2,[],null,null)}var Jb=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function $b(e){return i["\u0275vid"](2,[],null,null)}var ew=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function tw(e){return i["\u0275vid"](2,[],null,null)}var nw=function(){function e(){this.modals=[]}return e.prototype.add=function(e){this.modals.push(e)},e.prototype.remove=function(e){this.modals=this.modals.filter(function(t){return t.id!==e})},e.prototype.open=function(e){this.modals.filter(function(t){return t.id===e})[0].open()},e.prototype.close=function(e){this.modals.filter(function(t){return t.id===e})[0].close()},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),iw=function(){function e(e,t){this.modalService=e,this.el=t,this.childEvent=new i.EventEmitter,this.element=t.nativeElement}return e.prototype.ngOnInit=function(){this.id?(document.body.appendChild(this.element),this.modalService.add(this)):console.error("modal must have an id")},e.prototype.ngOnDestroy=function(){this.modalService.remove(this.id),this.element.remove()},e.prototype.open=function(){this.element.style.display="block",document.body.classList.add("jw-modal-open")},e.prototype.close=function(){this.element.style.display="none",document.body.classList.remove("jw-modal-open")},e.prototype.customClose=function(){this.childEvent.emit()},e}(),rw=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function ow(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["`"])),(e()(),i["\u0275eld"](1,0,null,null,2,"div",[["class","jw-modal"]],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,1,"div",[["class","jw-modal-body"]],null,null,null,null,null)),i["\u0275ncd"](null,0),(e()(),i["\u0275eld"](4,0,null,null,0,"div",[["class","jw-modal-background"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["`"]))],null,null)}var sw=function(){return function(){}}(),aw=function(){return function(){}}(),lw=function(){function e(e){var t=this;this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){t.headers=new Map,e.split("\n").forEach(function(e){var n=e.indexOf(":");if(n>0){var i=e.slice(0,n),r=i.toLowerCase(),o=e.slice(n+1).trim();t.maybeSetNormalizedName(i,r),t.headers.has(r)?t.headers.get(r).push(o):t.headers.set(r,[o])}})}:function(){t.headers=new Map,Object.keys(e).forEach(function(n){var i=e[n],r=n.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(t.headers.set(r,i),t.maybeSetNormalizedName(n,r))})}:this.headers=new Map}return e.prototype.has=function(e){return this.init(),this.headers.has(e.toLowerCase())},e.prototype.get=function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null},e.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},e.prototype.getAll=function(e){return this.init(),this.headers.get(e.toLowerCase())||null},e.prototype.append=function(e,t){return this.clone({name:e,value:t,op:"a"})},e.prototype.set=function(e,t){return this.clone({name:e,value:t,op:"s"})},e.prototype.delete=function(e,t){return this.clone({name:e,value:t,op:"d"})},e.prototype.maybeSetNormalizedName=function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)},e.prototype.init=function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(e){return t.applyUpdate(e)}),this.lazyUpdate=null))},e.prototype.copyFrom=function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach(function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))})},e.prototype.clone=function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n},e.prototype.applyUpdate=function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var i=("a"===e.op?this.headers.get(t):void 0)||[];i.push.apply(i,Object(s.g)(n)),this.headers.set(t,i);break;case"d":var r=e.value;if(r){var o=this.headers.get(t);if(!o)return;0===(o=o.filter(function(e){return-1===r.indexOf(e)})).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}},e.prototype.forEach=function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return e(t.normalizedNames.get(n),t.headers.get(n))})},e}(),cw=function(){function e(){}return e.prototype.encodeKey=function(e){return hw(e)},e.prototype.encodeValue=function(e){return hw(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}();function hw(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var dw=function(){function e(e){void 0===e&&(e={});var t,n,i,r=this;if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new cw,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(t=e.fromString,n=this.encoder,i=new Map,t.length>0&&t.split("&").forEach(function(e){var t=e.indexOf("="),r=Object(s.f)(-1==t?[n.decodeKey(e),""]:[n.decodeKey(e.slice(0,t)),n.decodeValue(e.slice(t+1))],2),o=r[0],a=r[1],l=i.get(o)||[];l.push(a),i.set(o,l)}),i)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(function(t){var n=e.fromObject[t];r.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}return e.prototype.has=function(e){return this.init(),this.map.has(e)},e.prototype.get=function(e){this.init();var t=this.map.get(e);return t?t[0]:null},e.prototype.getAll=function(e){return this.init(),this.map.get(e)||null},e.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},e.prototype.append=function(e,t){return this.clone({param:e,value:t,op:"a"})},e.prototype.set=function(e,t){return this.clone({param:e,value:t,op:"s"})},e.prototype.delete=function(e,t){return this.clone({param:e,value:t,op:"d"})},e.prototype.toString=function(){var e=this;return this.init(),this.keys().map(function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map(function(t){return n+"="+e.encoder.encodeValue(t)}).join("&")}).join("&")},e.prototype.clone=function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n},e.prototype.init=function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(t){return e.map.set(t,e.cloneFrom.map.get(t))}),this.updates.forEach(function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var i=e.map.get(t.param)||[],r=i.indexOf(t.value);-1!==r&&i.splice(r,1),i.length>0?e.map.set(t.param,i):e.map.delete(t.param)}}),this.cloneFrom=this.updates=null)},e}();function uw(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function pw(e){return"undefined"!=typeof Blob&&e instanceof Blob}function fw(e){return"undefined"!=typeof FormData&&e instanceof FormData}var gw=function(){function e(e,t,n,i){var r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new lw),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{var s=t.indexOf("?");this.urlWithParams=t+(-1===s?"?":s<t.length-1?"&":"")+o}}else this.params=new dw,this.urlWithParams=t}return e.prototype.serializeBody=function(){return null===this.body?null:uw(this.body)||pw(this.body)||fw(this.body)||"string"==typeof this.body?this.body:this.body instanceof dw?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},e.prototype.detectContentTypeHeader=function(){return null===this.body?null:fw(this.body)?null:pw(this.body)?this.body.type||null:uw(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof dw?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},e.prototype.clone=function(t){void 0===t&&(t={});var n=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,l=t.headers||this.headers,c=t.params||this.params;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce(function(e,n){return e.set(n,t.setHeaders[n])},l)),t.setParams&&(c=Object.keys(t.setParams).reduce(function(e,n){return e.set(n,t.setParams[n])},c)),new e(n,i,o,{params:c,headers:l,reportProgress:a,responseType:r,withCredentials:s})},e}(),mw=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({}),yw=function(){return function(e,t,n){void 0===t&&(t=200),void 0===n&&(n="OK"),this.headers=e.headers||new lw,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}(),vw=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type=mw.ResponseHeader,n}return Object(s.c)(t,e),t.prototype.clone=function(e){return void 0===e&&(e={}),new t({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},t}(yw),bw=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type=mw.Response,n.body=void 0!==t.body?t.body:null,n}return Object(s.c)(t,e),t.prototype.clone=function(e){return void 0===e&&(e={}),new t({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},t}(yw),ww=function(e){function t(t){var n=e.call(this,t,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):"Http failure response for "+(t.url||"(unknown url)")+": "+t.status+" "+t.statusText,n.error=t.error||null,n}return Object(s.c)(t,e),t}(yw);function Cw(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var xw=function(){function e(e){this.handler=e}return e.prototype.request=function(e,t,n){var i,r=this;if(void 0===n&&(n={}),e instanceof gw)i=e;else{var o;o=n.headers instanceof lw?n.headers:new lw(n.headers);var s=void 0;n.params&&(s=n.params instanceof dw?n.params:new dw({fromObject:n.params})),i=new gw(e,t,void 0!==n.body?n.body:null,{headers:o,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var a=Object(rd.a)(i).pipe(iu(function(e){return r.handler.handle(e)}));if(e instanceof gw||"events"===n.observe)return a;var l=a.pipe(fd(function(e){return e instanceof bw}));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return l.pipe(Object(dd.a)(function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return l.pipe(Object(dd.a)(function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return l.pipe(Object(dd.a)(function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return l.pipe(Object(dd.a)(function(e){return e.body}))}case"response":return l;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},e.prototype.delete=function(e,t){return void 0===t&&(t={}),this.request("DELETE",e,t)},e.prototype.get=function(e,t){return void 0===t&&(t={}),this.request("GET",e,t)},e.prototype.head=function(e,t){return void 0===t&&(t={}),this.request("HEAD",e,t)},e.prototype.jsonp=function(e,t){return this.request("JSONP",e,{params:(new dw).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},e.prototype.options=function(e,t){return void 0===t&&(t={}),this.request("OPTIONS",e,t)},e.prototype.patch=function(e,t,n){return void 0===n&&(n={}),this.request("PATCH",e,Cw(n,t))},e.prototype.post=function(e,t,n){return void 0===n&&(n={}),this.request("POST",e,Cw(n,t))},e.prototype.put=function(e,t,n){return void 0===n&&(n={}),this.request("PUT",e,Cw(n,t))},e}(),Aw=function(){function e(e,t){this.next=e,this.interceptor=t}return e.prototype.handle=function(e){return this.interceptor.intercept(e,this.next)},e}(),Sw=new i.InjectionToken("HTTP_INTERCEPTORS"),Ow=function(){function e(){}return e.prototype.intercept=function(e,t){return t.handle(e)},e}(),Ew=/^\)\]\}',?\n/,Iw=function(){return function(){}}(),Dw=function(){function e(){}return e.prototype.build=function(){return new XMLHttpRequest},e}(),kw=function(){function e(e){this.xhrFactory=e}return e.prototype.handle=function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new ed.a(function(n){var i=t.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach(function(e,t){return i.setRequestHeader(e,t.join(","))}),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var r=e.detectContentTypeHeader();null!==r&&i.setRequestHeader("Content-Type",r)}if(e.responseType){var o=e.responseType.toLowerCase();i.responseType="json"!==o?o:"text"}var s=e.serializeBody(),a=null,l=function(){if(null!==a)return a;var t=1223===i.status?204:i.status,n=i.statusText||"OK",r=new lw(i.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(i)||e.url;return a=new vw({headers:r,status:t,statusText:n,url:o})},c=function(){var t=l(),r=t.headers,o=t.status,s=t.statusText,a=t.url,c=null;204!==o&&(c=void 0===i.response?i.responseText:i.response),0===o&&(o=c?200:0);var h=o>=200&&o<300;if("json"===e.responseType&&"string"==typeof c){var d=c;c=c.replace(Ew,"");try{c=""!==c?JSON.parse(c):null}catch(u){c=d,h&&(h=!1,c={error:u,text:c})}}h?(n.next(new bw({body:c,headers:r,status:o,statusText:s,url:a||void 0})),n.complete()):n.error(new ww({error:c,headers:r,status:o,statusText:s,url:a||void 0}))},h=function(e){var t=l().url,r=new ww({error:e,status:i.status||0,statusText:i.statusText||"Unknown Error",url:t||void 0});n.error(r)},d=!1,u=function(t){d||(n.next(l()),d=!0);var r={type:mw.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(r.total=t.total),"text"===e.responseType&&i.responseText&&(r.partialText=i.responseText),n.next(r)},p=function(e){var t={type:mw.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return i.addEventListener("load",c),i.addEventListener("error",h),e.reportProgress&&(i.addEventListener("progress",u),null!==s&&i.upload&&i.upload.addEventListener("progress",p)),i.send(s),n.next({type:mw.Sent}),function(){i.removeEventListener("error",h),i.removeEventListener("load",c),e.reportProgress&&(i.removeEventListener("progress",u),null!==s&&i.upload&&i.upload.removeEventListener("progress",p)),i.abort()}})},e}(),Pw=new i.InjectionToken("XSRF_COOKIE_NAME"),Tw=new i.InjectionToken("XSRF_HEADER_NAME"),Mw=function(){return function(){}}(),jw=function(){function e(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return e.prototype.getToken=function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(id["\u0275parseCookieValue"])(e,this.cookieName),this.lastCookieString=e),this.lastToken},e}(),Rw=function(){function e(e,t){this.tokenService=e,this.headerName=t}return e.prototype.intercept=function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var i=this.tokenService.getToken();return null===i||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,i)})),t.handle(e)},e}(),Lw=function(){function e(e,t){this.backend=e,this.injector=t,this.chain=null}return e.prototype.handle=function(e){if(null===this.chain){var t=this.injector.get(Sw,[]);this.chain=t.reduceRight(function(e,t){return new Aw(e,t)},this.backend)}return this.chain.handle(e)},e}(),_w=function(){function e(){}var t;return t=e,e.disable=function(){return{ngModule:t,providers:[{provide:Rw,useClass:Ow}]}},e.withOptions=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[e.cookieName?{provide:Pw,useValue:e.cookieName}:[],e.headerName?{provide:Tw,useValue:e.headerName}:[]]}},e}(),Nw=function(){return function(){}}(),Bw=function(){function e(e,t){this.http=e,this.sharedData=t,this.baseurl=this.sharedData.baseurl+"/customboard"}return e.prototype.createCustomBoard=function(e,t,n){var i=new FormData;i.append("image",e),i.append("board",JSON.stringify(t)),i.append("pinmap",JSON.stringify(n));var r="";return null!=t.id&&(r="?board_id="+t.id),this.http.post(""+this.baseurl+r,i)},e.prototype.deleteBoard=function(e){return this.http.delete(this.baseurl+"/"+e)},e.prototype.getBoard=function(e){return this.http.get(this.baseurl+"?board_id="+e)},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e(i.inject(xw),i.inject($h))},token:e,providedIn:"root"}),e}(),Fw=function(){function e(){}return e.prototype.unloadNotification=function(e){this.canDeactivate()||(e.returnValue=!0)},e}(),zw=function(e){function t(t,n,r,o,s){var a,l,c=e.call(this)||this;return c.modalService=t,c.sharedData=n,c.customBoardService=r,c.Activatedroute=o,c.router=s,c.board_name_regex=/^[A-Za-z][a-zA-Z0-9]*$/,c.board_id=null,c.map_table_rows_count=10,c.selected=!1,c.SAM_pins=["3","4","17","27","22","10","9","11","5","6","13","19","26","14","15","18","23","24","25","8"],c.saved_design=!0,c.board_props={id:"board",offsetX:300,offsetY:300,width:300,height:300,annotations:[{content:"board name"}],ports:[],addInfo:(a={type:"board"},a[Kh]=null,a),zIndex:-1},c.board_props_default={id:"board",offsetX:300,offsetY:300,width:300,height:300,annotations:[{content:"boardname",width:100,height:100}],ports:[],addInfo:(l={type:"board"},l[Kh]=null,l.selected=!1,l),zIndex:-1},c.pin_number=1,c.pin={shape:{shape:"Rectangle",type:"Basic"},offsetX:100,offsetY:100,width:30,height:30,annotations:[{content:"pin"+c.pin_number}],addInfo:{type:"pin",pin_type:"I/O"},zIndex:50},c.board_grouper={id:"group",width:c.board_props.width,height:c.board_props.height,addInfo:{type:"grouper"}},c.hide_pin_type=!0,c.isVCC=!1,c.isGROUND=!1,c.boardPin_selected={},c.add_pin="add-pin",c.save_board="save-board",c.image_upload="image-upload",c.save_custom_board_modal_id="custom-board-modal",c.readingEnded=function(e){localStorage.setItem("board",e.target.result),c.board_props=JSON.parse(JSON.stringify(c.board_props_default)),c.board_props.shape={type:"Image",source:e.target.result};var t=new i.EventEmitter,n=new Image;t.subscribe(function(e){c.board_props.width=e.width,c.board_props.height=e.height,c.board_props.ports=[],c.addBoard()}),n.onload=function(){t.emit({width:n.width,height:n.height})},n.src=e.target.result},c.BoardPin_SAMPin={},c.SAMPin_BoardPin={},c.hide_modal_close_btn=!1,c.saved=!1,c.error_saved=!1,c.error_message=null,c}return s.c(t,e),t.prototype.ngOnInit=function(){this.contextMenuSettings={show:!0},this.board_id=+this.Activatedroute.snapshot.queryParamMap.get("board_id")||null,console.log("bo:",this.SAM_pins),this.setCommandManager(),this.resetTable()},t.prototype.myPaste=function(e){this.pin.annotations[0].content="pin"+this.pin_number,this.pin.width=e.width,this.pin.height=e.height,this.pin.offsetX=e.offsetX+.5*e.width,this.pin.offsetY=e.offsetY+.5*e.height;var t=this.diagram.add(this.pin);this.pin_number+=1,this.grouper_node.children.push(t.id),this.diagram.dataBind()},t.prototype.setCommandManager=function(){var e=this.diagram,t=this;this.diagram.commandManager={commands:[{name:"copy",canExecute:function(){return console.log("canExecute",e.selectedItems.nodes),1==e.selectedItems.nodes.length&&"pin"==e.selectedItems.nodes[0].addInfo.type},execute:function(){var n=e.copy();t.myPaste(n[0])}},{name:"cut",canExecute:function(){return console.log("canExecute",e.selectedItems.nodes),1==e.selectedItems.nodes.length&&"pin"==e.selectedItems.nodes[0].addInfo.type}},{name:"paste",canExecute:function(){return!1}},{name:"delete",execute:function(){1==e.selectedItems.nodes.length&&"pin"!=e.selectedItems.nodes[0].addInfo.type?confirm("are you sure all changed will be removed")&&(e.clear(),t.resetTable()):(e.removeNode(e.selectedItems.nodes[0]),e.refresh())}},{name:"undo",canExecute:function(){return!1}},{name:"redo",canExecute:function(){return!1}}]}},t.prototype.resetTable=function(){var e=this;Object.keys(this.SAMPin_BoardPin).forEach(function(t){e.SAMPin_BoardPin[t]=""}),this.boardPin_selected={},this.BoardPin_SAMPin={}},t.prototype.canDeactivate=function(){return this.saved_design},t.prototype.historyChanged=function(e){var t=this;this.sharedData.saved_design=!1;var n=e.change.Remove||!1,i="PropertyChanged"==e.change.type||!1;if(n)e.source.forEach(function(e){var n=e.annotations[0].content;t.SAMPin_BoardPin[t.BoardPin_SAMPin[n]]="",delete t.BoardPin_SAMPin[n]});else if(i&&(console.log("source 0",e.source[0]),null!=e.source[0].nodes[0])){var r=e.source[0].nodes[0].annotations||null;if(null!=r){if(console.log("annotaionts",r[0].id),!this.board_name_regex.test(r[0].content))return alert("invalid name"),this.board_node.annotations[0].content=this.board_props_default.annotations[0].content,void this.diagram.refresh();this.board_props_default.annotations[0].content=r[0].content}}console.log(e),console.log(n)},t.prototype.ngOnDestroy=function(){this.sub=this.sub||null,null!=this.sub&&this.sub.unsubscribe()},t.prototype.changePinType=function(e){console.log(e.target.value),this.diagram.selectedItems.nodes[0].addInfo.pin_type=e.target.value},t.prototype.selectionChangeEvent=function(e){if("Changed"==e.state){var t=this.diagram.selectedItems.nodes;1==t.length&&"pin"==t[0].addInfo.type?(this.hide_pin_type=!1,"GROUND"==t[0].addInfo.pin_type?(this.isGROUND=!0,this.isVCC=!1):"VCC"==t[0].addInfo.pin_type?(this.isGROUND=!1,this.isVCC=!0):(this.isGROUND=!1,this.isVCC=!1)):this.hide_pin_type=!0}},t.prototype.getPins=function(){return this.diagram.nodes.filter(function(e){return"pin"==(e.addInfo.type||null)})},t.prototype.PinSelectedEvent=function(e,t){if(console.log("change sele",e),""==t){console.log("pin is null");var n=this.SAMPin_BoardPin[e]||null;console.log("old pin_id",n),null!=n&&(delete this.BoardPin_SAMPin[e],this.boardPin_selected[n]=!1),this.SAMPin_BoardPin[e]="",console.log(this.SAMPin_BoardPin[e])}else this.BoardPin_SAMPin[t]=e,this.boardPin_selected[t]=!0,this.SAMPin_BoardPin[e]=t;console.log(this.boardPin_selected,this.SAMPin_BoardPin)},t.prototype.convertPortToNode=function(e,t){return{shape:{shape:"Rectangle",type:"Basic"},offsetX:this.board_node.offsetX-this.board_node.width/2+e.offset.x*this.board_node.width,offsetY:this.board_node.offsetY-this.board_node.height/2+e.offset.y*this.board_node.height,width:e.width,height:e.height,annotations:[{content:t[e.id]}],addInfo:{type:"pin",pin_type:e.addInfo?e.addInfo.pin_type:"I/O"}}},t.prototype.initTable=function(e){var t=this;Object.keys(e).forEach(function(n){e[n]&&(t.SAMPin_BoardPin[n]=e[n]),t.BoardPin_SAMPin[e[n]]=n,t.boardPin_selected[e[n]]=!0})},t.prototype.diagramCreated=function(){var e=this;null!=this.board_id&&this.customBoardService.getBoard(this.board_id).subscribe(function(t){e.board_props.shape={type:"Image",source:e.sharedData.imageUrl+e.board_id+"/image"},e.board_props.annotations[0].content=t.name,e.board_props.addInfo[Kh]=t.id,e.board_props.addInfo.type="board",console.log(t.pin_map);var n=new i.EventEmitter,r=new Image;n.subscribe(function(n){e.board_props.width=n.width,e.board_props.height=n.height,e.addBoard(),t.ports.forEach(function(n){var i=e.diagram.add(e.convertPortToNode(n,t.pin_map));e.grouper_node.children.push(i.id),e.pin_number+=1}),e.initTable(t.pin_map),e.diagram.refreshDiagram()}),r.onload=function(){n.emit({width:r.width,height:r.height})},r.src=e.board_props.shape.source},function(t){e.router.navigate([e.router.url])})},t.prototype.addBoard=function(){console.log(this.board_props),console.log("add board",this.board_props.width),this.diagram.add(this.board_props),this.board_node=this.diagram.nodes[0],console.log("node width  ",this.board_node.width),this.board_grouper.children=[this.board_node.id],this.diagram.add(this.board_grouper),this.grouper_node=this.diagram.nodes[1],this.diagram.dataBind(),this.diagram.refreshDiagram()},t.prototype.fileInputChange=function(e){if(this.saved_design=!1,this.image=e.target.files[0],this.diagram.clear(),this.resetTable(),null!=this.image){var t=new FileReader;t.onloadend=this.readingEnded,t.readAsDataURL(this.image)}},t.prototype.between=function(e,t,n,i,r){return e.x>t&&e.x<n&&e.y>i&&e.y<r},t.prototype.isNodeInsideBoard=function(e){var t=e.offsetX-e.width/2,n=e.offsetY-e.height/2,i=e.offsetX+e.width/2,r=e.offsetY+e.height/2,o=this.board_node.offsetX-this.board_node.width/2,s=this.board_node.offsetY-this.board_node.height/2,a=this.board_node.offsetX+this.board_node.width/2,l=this.board_node.offsetY+this.board_node.height/2;return console.log(t,n,i,r,o,s,a,l),this.between({x:i,y:r},o,a,s,l)&&this.between({x:t,y:n},o,a,s,l)},t.prototype.getPinOffset=function(e,t,n){return[(t-(this.board_node.offsetX-this.board_node.width/2))/this.board_node.width,(n-(this.board_node.offsetY-this.board_node.height/2))/this.board_node.height]},t.prototype.create_board=function(){var e=this;console.log(this.board_node);var t={id:this.board_id,name:this.board_node.annotations[0].content,ports:[],code_required:!0},n=[],i=[];if(this.diagram.nodes.forEach(function(t){if("board"!=t.id&&"group"!=t.id){if(!e.isNodeInsideBoard(t))throw Error("pins not inside board");if(console.log(t.annotations[0].content,i),i.includes(t.annotations[0].content))throw Error("pins should have unique name,more than one pin have the same name");i.push(t.annotations[0].content);var r=t.annotations[0].content,o=e.BoardPin_SAMPin[r];if(console.log("helllllllllllllllllllll1",t.addInfo.pin_type),null==o)throw Error("SAM pin map not assigned");var s=e.getPinOffset(e.board_node,t.offsetX,t.offsetY);n.push({id:e.BoardPin_SAMPin[r],offset:{x:s[0],y:s[1]},shape:"Square",width:t.width,height:t.height,addInfo:{pin_type:t.addInfo.pin_type}})}}),t.ports=n,!this.board_name_regex.test(this.board_node.annotations[0].content))throw Error("name should start with letter then containt only letter or digits or _ ");return t},t.prototype.EditBoardNameEvent=function(e){},t.prototype.customClose=function(e){this.modalService.close(e),this.saved=!1,this.error_saved=!1,this.error_message=null},t.prototype.getPinInitPosition=function(){return console.log("get random",this.board_node.width),[this.board_node.offsetX,this.board_node.offsetY]},t.prototype.checkAllPinMapped=function(){var e=this;return console.log("nodes",this.diagram.nodes),console.log("board pn sele",this.boardPin_selected),console.log("nodes pins lenght",this.diagram.nodes.filter(function(e){return"pin"==e.addInfo.type}).length),console.log("selected pins",Object.keys(this.boardPin_selected).filter(function(t){return 1==e.boardPin_selected[t]}).length),Object.keys(this.boardPin_selected).filter(function(t){return 1==e.boardPin_selected[t]}).length==this.diagram.nodes.filter(function(e){return"pin"==e.addInfo.type}).length},t.prototype.getSAMMapping=function(){var e=this,t={};return Object.keys(this.SAMPin_BoardPin).forEach(function(n){t[n]=e.SAMPin_BoardPin[n]}),t},t.prototype.toolbarClick=function(e){var t=this;switch(e.item.id){case this.add_pin:if(null!=this.diagram.getObject("board")){var n=this.getPinInitPosition(),i=n[1];this.pin.offsetX=n[0],this.pin.offsetY=i,this.pin.annotations[0].content="pin"+this.pin_number;var r=this.diagram.add(this.pin);this.pin_number+=1,this.grouper_node.children.push(r.id),this.diagram.refresh()}else alert("upload board image first"),this.modalService.close(this.save_custom_board_modal_id);break;case this.save_board:if(console.log("boardpin sampin:",this.BoardPin_SAMPin),this.checkAllPinMapped()){this.modalService.open(this.save_custom_board_modal_id);try{var o=this.create_board(),s=this.getSAMMapping();console.log("sent board",o),this.customBoardService.createCustomBoard(this.image,o,s).pipe(su(function(){t.hide_modal_close_btn=!1})).subscribe(function(e){t.saved=!0,t.error_saved=!1,t.saved_design=!0,console.log("before if board id ",t.board_id),t.hide_modal_close_btn=!1,null==t.board_id&&(console.log(e.id),t.board_id=e.id,t.board_node.addInfo[Kh]=e.id,t.router.navigate(["customboard"],{queryParams:{board_id:t.board_id},skipLocationChange:!0}))},function(e){t.saved=!1,t.error_saved=!0,t.error_message=e})}catch(a){alert(a),this.modalService.close(this.save_custom_board_modal_id)}}else alert("please set mapping pins for each pin in board to SAM pin number")}},t}(Fw),Hw=i["\u0275crt"]({encapsulation:0,styles:[["table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #000;border-collapse:collapse}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:15px}.main-wrapper[_ngcontent-%COMP%]{height:100vh}"]],data:{}});function Vw(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"label",[["class","button"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["upload board image"])),(e()(),i["\u0275eld"](2,0,[["fileinput",1]],null,0,"input",[["accept","image/png, image/jpeg"],["type","file"]],[[8,"id",0]],[[null,"change"]],function(e,t,n){var i=!0;return"change"===t&&(i=!1!==e.component.fileInputChange(n)&&i),i},null,null))],null,function(e,t){var n=t.component;e(t,0,0,n.image_upload),e(t,2,0,n.image_upload)})}function Uw(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,8,"div",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,1,"label",[["class","button"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["pin type"])),(e()(),i["\u0275eld"](3,0,null,null,0,"input",[["name","type"],["type","radio"],["value","I/O"]],[[8,"checked",0]],[[null,"change"]],function(e,t,n){var i=!0;return"change"===t&&(i=!1!==e.component.changePinType(n)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,[" I/O "])),(e()(),i["\u0275eld"](5,0,null,null,0,"input",[["name","type"],["type","radio"],["value","VCC"]],[[8,"checked",0]],[[null,"change"]],function(e,t,n){var i=!0;return"change"===t&&(i=!1!==e.component.changePinType(n)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,[" VCC "])),(e()(),i["\u0275eld"](7,0,null,null,0,"input",[["name","type"],["type","radio"],["value","GROUND"]],[[8,"checked",0]],[[null,"change"]],function(e,t,n){var i=!0;return"change"===t&&(i=!1!==e.component.changePinType(n)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,[" GROUND "]))],null,function(e,t){var n=t.component;e(t,0,0,n.hide_pin_type),e(t,1,0,n.pin_type_id),e(t,3,0,!n.isVCC&&!n.isGROUND),e(t,5,0,n.isVCC),e(t,7,0,n.isGROUND)})}function Ww(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,3,"option",[],null,null,null,null,null)),i["\u0275did"](1,147456,null,0,Zm,[i.ElementRef,i.Renderer2,[2,Xm]],null,null),i["\u0275did"](2,147456,null,0,$m,[i.ElementRef,i.Renderer2,[8,null]],null,null),(e()(),i["\u0275ted"](3,null,[" ",""]))],null,function(e,t){e(t,3,0,t.parent.context.$implicit.annotations[0].content)})}function Gw(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,Ww)),i["\u0275did"](2,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275and"](0,null,null,0))],function(e,t){var n=t.component;e(t,2,0,t.context.$implicit.annotations[0].content==n.SAMPin_BoardPin[t.parent.context.$implicit]||null==n.boardPin_selected[t.context.$implicit.annotations[0].content]||!n.boardPin_selected[t.context.$implicit.annotations[0].content])},null)}function qw(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,15,"tr",[],[[1,"data-index",0]],null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),i["\u0275ted"](2,null,["SAM pin:",""])),(e()(),i["\u0275eld"](3,0,null,null,12,"td",[],null,null,null,null,null)),(e()(),i["\u0275eld"](4,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,t,n){var r=!0,o=e.component;return"change"===t&&(r=!1!==i["\u0275nov"](e,5).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==i["\u0275nov"](e,5).onTouched()&&r),"ngModelChange"===t&&(r=!1!==o.PinSelectedEvent(e.context.$implicit,n)&&r),r},null,null)),i["\u0275did"](5,16384,null,0,Xm,[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,Mm,function(e){return[e]},[Xm]),i["\u0275did"](7,671744,null,0,Py,[[8,null],[8,null],[8,null],[6,Mm]],{model:[0,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,zm,null,[Py]),i["\u0275did"](9,16384,null,0,gy,[[4,zm]],null,null),(e()(),i["\u0275eld"](10,0,null,null,3,"option",[["value",""]],[[8,"selected",0]],null,null,null,null)),i["\u0275did"](11,147456,null,0,Zm,[i.ElementRef,i.Renderer2,[2,Xm]],{value:[0,"value"]},null),i["\u0275did"](12,147456,null,0,$m,[i.ElementRef,i.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),i["\u0275ted"](-1,null,["none"])),(e()(),i["\u0275and"](16777216,null,null,1,null,Gw)),i["\u0275did"](15,278528,null,0,id.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,7,0,n.SAMPin_BoardPin[t.context.$implicit]),e(t,11,0,""),e(t,12,0,""),e(t,15,0,n.getPins())},function(e,t){var n=t.component;e(t,0,0,t.context.index),e(t,2,0,t.context.$implicit),e(t,4,0,i["\u0275nov"](t,9).ngClassUntouched,i["\u0275nov"](t,9).ngClassTouched,i["\u0275nov"](t,9).ngClassPristine,i["\u0275nov"](t,9).ngClassDirty,i["\u0275nov"](t,9).ngClassValid,i["\u0275nov"](t,9).ngClassInvalid,i["\u0275nov"](t,9).ngClassPending),e(t,10,0,n.selected)})}function Qw(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{sidebar:0}),i["\u0275qud"](402653184,2,{diagram:0}),(e()(),i["\u0275eld"](2,0,null,null,21,"div",[["class","row "],["style","background-color:lightgray"]],null,null,null,null,null)),(e()(),i["\u0275eld"](3,0,null,null,20,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),i["\u0275eld"](4,16777216,null,null,19,"ejs-toolbar",[["class","toggle"]],null,[[null,"clicked"]],function(e,t,n){var i=!0;return"clicked"===t&&(i=!1!==e.component.toolbarClick(n)&&i),i},Xb,Yb)),i["\u0275did"](5,6537216,[["toolbar_design",4]],1,xb,[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector],null,{clicked:"clicked"}),i["\u0275qud"](335544320,3,{childItems:0}),(e()(),i["\u0275eld"](7,0,null,null,16,"e-items",[],null,null,null,null,null)),i["\u0275did"](8,7421952,[[3,4]],1,bb,[],null,null),i["\u0275qud"](603979776,4,{children:1}),(e()(),i["\u0275eld"](10,16777216,null,null,2,"e-item",[["prefixIcon","e-undo-icon"],["tooltipText","add pin"]],null,null,null,null,null)),i["\u0275did"](11,11091968,[[4,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],prefixIcon:[1,"prefixIcon"],tooltipText:[2,"tooltipText"]},null),i["\u0275qud"](335544320,5,{template:0}),(e()(),i["\u0275eld"](13,16777216,null,null,2,"e-item",[["prefixIcon","e-save-icon"],["tooltipText","save board"]],null,null,null,null,null)),i["\u0275did"](14,11091968,[[4,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],prefixIcon:[1,"prefixIcon"],tooltipText:[2,"tooltipText"]},null),i["\u0275qud"](335544320,6,{template:0}),(e()(),i["\u0275eld"](16,16777216,null,null,3,"e-item",[],null,null,null,null,null)),i["\u0275did"](17,11091968,[[4,4]],1,vb,[i.ViewContainerRef],null,null),i["\u0275qud"](335544320,7,{template:0}),(e()(),i["\u0275and"](0,[[7,2],["template",2]],null,0,null,Vw)),(e()(),i["\u0275eld"](20,16777216,null,null,3,"e-item",[],null,null,null,null,null)),i["\u0275did"](21,11091968,[[4,4]],1,vb,[i.ViewContainerRef],null,null),i["\u0275qud"](335544320,8,{template:0}),(e()(),i["\u0275and"](0,[[8,2],["template",2]],null,0,null,Uw)),(e()(),i["\u0275eld"](24,0,null,null,16,"div",[["class","row nopadding"]],null,null,null,null,null)),(e()(),i["\u0275eld"](25,0,null,null,9,"div",[["class","col-3 nopadding"]],null,null,null,null,null)),(e()(),i["\u0275eld"](26,0,null,null,8,"table",[],null,null,null,null,null)),(e()(),i["\u0275eld"](27,0,null,null,7,"tbody",[],null,null,null,null,null)),(e()(),i["\u0275eld"](28,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),i["\u0275eld"](29,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Sam pin name"])),(e()(),i["\u0275eld"](31,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Board pin name"])),(e()(),i["\u0275and"](16777216,null,null,1,null,qw)),i["\u0275did"](34,278528,null,0,id.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275eld"](35,0,null,null,5,"div",[["class"," col-9 w-80 nopadding main-wrapper"]],null,null,null,null,null)),(e()(),i["\u0275eld"](36,16777216,null,null,4,"ejs-diagram",[["height","600px"],["id","diagram"],["width","100%"]],null,[[null,"created"],[null,"selectionChange"],[null,"historyChange"],[null,"textEdit"]],function(e,t,n){var i=!0,r=e.component;return"created"===t&&(i=!1!==r.diagramCreated()&&i),"selectionChange"===t&&(i=!1!==r.selectionChangeEvent(n)&&i),"historyChange"===t&&(i=!1!==r.historyChanged(n)&&i),"textEdit"===t&&(i=!1!==r.EditBoardNameEvent(n)&&i),i},$b,Jb)),i["\u0275did"](37,6537216,[[2,4],["diagram",4]],3,Bh,[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector],{commandManager:[0,"commandManager"],contextMenuSettings:[1,"contextMenuSettings"],height:[2,"height"],width:[3,"width"]},{created:"created",historyChange:"historyChange",selectionChange:"selectionChange",textEdit:"textEdit"}),i["\u0275qud"](335544320,9,{childLayers:0}),i["\u0275qud"](335544320,10,{childConnectors:0}),i["\u0275qud"](335544320,11,{childNodes:0}),(e()(),i["\u0275eld"](41,0,null,null,13,"jw-modal",[],null,null,null,ow,rw)),i["\u0275did"](42,245760,null,0,iw,[nw,i.ElementRef],{id:[0,"id"]},null),(e()(),i["\u0275eld"](43,0,null,0,1,"h1",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["saving board"])),(e()(),i["\u0275eld"](45,0,null,0,1,"p",[["style","display:inline"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["saving board "])),(e()(),i["\u0275eld"](47,0,null,0,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u2705"])),(e()(),i["\u0275eld"](49,0,null,0,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u274c"])),(e()(),i["\u0275eld"](51,0,null,0,1,"p",[],null,null,null,null,null)),(e()(),i["\u0275ted"](52,null,["",""])),(e()(),i["\u0275eld"](53,0,null,0,1,"button",[],[[8,"hidden",0]],[[null,"click"]],function(e,t,n){var i=!0,r=e.component;return"click"===t&&(i=!1!==r.customClose(r.save_custom_board_modal_id)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,[" Close"])),(e()(),i["\u0275eld"](55,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),i["\u0275did"](56,212992,null,0,Wg,[Ug,i.ViewContainerRef,i.ComponentFactoryResolver,[8,null],i.ChangeDetectorRef],null,null)],function(e,t){var n=t.component;e(t,5,0),e(t,8,0),e(t,11,0,n.add_pin,"e-undo-icon","add pin"),e(t,14,0,n.save_board,"e-save-icon","save board"),e(t,17,0),e(t,21,0),e(t,34,0,n.SAM_pins),e(t,37,0,n.commandManager,n.contextMenuSettings,"600px","100%"),e(t,42,0,i["\u0275inlineInterpolate"](1,"",n.save_custom_board_modal_id,"")),e(t,56,0)},function(e,t){var n=t.component;e(t,47,0,!n.saved),e(t,49,0,!n.error_saved),e(t,52,0,n.error_message),e(t,53,0,n.hide_modal_close_btn)})}function Yw(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-custom-board",[],null,[["window","beforeunload"]],function(e,t,n){var r=!0;return"window:beforeunload"===t&&(r=!1!==i["\u0275nov"](e,1).unloadNotification(n)&&r),r},Qw,Hw)),i["\u0275did"](1,245760,null,0,zw,[nw,$h,Bw,kf,Fg],null,null)],function(e,t){e(t,1,0)},null)}var Xw=i["\u0275ccf"]("app-custom-board",zw,Yw,{},{},[]),Zw=n("lUfZ"),Kw=function(e){function t(t){var n=e.call(this)||this;return n.sanitizer=t,n.filename="diagramfile",n.result="",n}return s.c(t,e),t.prototype.download=function(){var e=new Blob([this.file_content],{type:"application/json"});this.fileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(window.URL.createObjectURL(e)),this.result=this.filename,this.close()},t.prototype.create=function(){this.result=this.filename,this.close()},t.prototype.myClose=function(){this.result="",this.close()},t}(Zw.SimpleModalComponent),Jw=function(){function e(e,t,n,i,r,o){this.userService=e,this.designService=t,this.customBoardService=n,this.simpleModalService=i,this.router=r,this.alertService=o}return e.prototype.ngOnInit=function(){this.loadUserDesigns(),this.loadUserBoards()},e.prototype.loadUserDesigns=function(){var e=this;this.userService.getDesignFiles().pipe(Vd()).subscribe(function(t){e.design_files=t})},e.prototype.loadUserBoards=function(){var e=this;this.userService.getUserBoards().pipe(Vd()).subscribe(function(t){e.user_boards=t})},e.prototype.customBoardDesign=function(){this.router.navigateByUrl("/customboard")},e.prototype.deleteDesignFile=function(e,t){var n=this;confirm("if you delete this file ,you will not be able to restore again,sure about delete?")&&this.designService.deleteDesignFile(e).subscribe(function(i){n.loadUserDesigns(),n.alertService.success("File "+t+"("+e+") deleted")},function(i){n.alertService.error("Sorry file "+t+" ("+e+") couldn't be deleted")})},e.prototype.deleteBoard=function(e,t){var n=this;confirm("if you delete this file ,you will not be able to restore again,sure about delete?")&&this.customBoardService.deleteBoard(e).subscribe(function(){n.loadUserBoards(),n.alertService.success("Board "+t+" ("+e+") created")},function(i){n.alertService.error("Sorry board "+t+" ("+e+") couldn't be deleted")})},e.prototype.createNewFile=function(){var e=this;this.simpleModalService.addModal(Kw,{title:"Download Digram as file",question:"File name",isdownload:!1}).subscribe(function(t){""!=t&&e.designService.createDesignFile(t).subscribe(function(n){e.loadUserDesigns(),e.alertService.success("file "+t+" created"),e.router.navigate(["/design/"+n.id])},function(n){e.alertService.error("Sorry File "+t+" couldn't be created")})})},e}(),$w=n("xN82"),eC=i["\u0275crt"]({encapsulation:0,styles:[[".bgimg1[_ngcontent-%COMP%]{background-image:url(IMG_7311.aa95c57ca50f612dc294.JPG);height:200px;background-position:center;background-size:cover}.bgimg2[_ngcontent-%COMP%]{background-image:url(IMG_7309.88dc3642c18cf002c5b2.JPG);height:200px;background-position:center;background-size:cover}.bgimg3[_ngcontent-%COMP%]{background-image:url(IMG_7376.bfddb18eb4f15674fe35.JPG);height:200px;background-position:center;background-size:cover}.bgcontainer[_ngcontent-%COMP%]{background-image:url(IMG_7303.6f0ce85243fef86c64e2.JPG);height:100%;background-position:center;background-size:cover}.title[_ngcontent-%COMP%]{color:#fff;padding-bottom:7%;padding-top:1%;text-align:center;font-size:500%}.titleofcard[_ngcontent-%COMP%]{text-align:center;margin-top:5%}.btnofcard[_ngcontent-%COMP%], .descriptionofcard[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function tC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,31,"div",[["class","container-fluid bgcontainer min-vh-100"]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,1,"h1",[["class","title"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["The SAM Menu"])),(e()(),i["\u0275eld"](3,0,null,null,28,"div",[["class","card-deck"]],null,null,null,null,null)),(e()(),i["\u0275eld"](4,0,null,null,7,"div",[["class","card"]],null,null,null,null,null)),(e()(),i["\u0275eld"](5,0,null,null,6,"a",[["href","#"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.createNewFile()&&i),i},null,null)),(e()(),i["\u0275eld"](6,0,null,null,0,"div",[["class","card-img-top bgimg1"]],null,null,null,null,null)),(e()(),i["\u0275eld"](7,0,null,null,4,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275eld"](8,0,null,null,1,"h4",[["class","card-title titleofcard"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Design"])),(e()(),i["\u0275eld"](10,0,null,null,1,"p",[["class","card-text descriptionofcard"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Make your own new Design with various boards shared by our users"])),(e()(),i["\u0275eld"](12,0,null,null,10,"div",[["class","card"]],null,null,null,null,null)),(e()(),i["\u0275eld"](13,0,null,null,9,"a",[["routerLink","/ConfigureSamComponent"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==i["\u0275nov"](e,14).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),i["\u0275did"](14,671744,null,0,zg,[Fg,kf,id.LocationStrategy],{routerLink:[0,"routerLink"]},null),(e()(),i["\u0275eld"](15,0,null,null,0,"div",[["class","card-img-top bgimg2"]],null,null,null,null,null)),(e()(),i["\u0275eld"](16,0,null,null,6,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275eld"](17,0,null,null,1,"h4",[["class","card-title titleofcard"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Add New Component"])),(e()(),i["\u0275eld"](19,0,null,null,3,"p",[["class","card-text descriptionofcard"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Got a new SAM ?"])),(e()(),i["\u0275eld"](21,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,[" No problem follow our configuration wizard here to setup your new SAM"])),(e()(),i["\u0275eld"](23,0,null,null,8,"div",[["class","card"]],null,null,null,null,null)),(e()(),i["\u0275eld"](24,0,null,null,7,"a",[["routerLink","/Dashboard"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==i["\u0275nov"](e,25).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),i["\u0275did"](25,671744,null,0,zg,[Fg,kf,id.LocationStrategy],{routerLink:[0,"routerLink"]},null),(e()(),i["\u0275eld"](26,0,null,null,0,"div",[["class","card-img-top bgimg3"]],null,null,null,null,null)),(e()(),i["\u0275eld"](27,0,null,null,4,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),i["\u0275eld"](28,0,null,null,1,"h4",[["class","card-title titleofcard"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["DashBoard"])),(e()(),i["\u0275eld"](30,0,null,null,1,"p",[["class","card-text descriptionofcard"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Keep track of all your components designs and more.."]))],function(e,t){e(t,14,0,"/ConfigureSamComponent"),e(t,25,0,"/Dashboard")},function(e,t){e(t,13,0,i["\u0275nov"](t,14).target,i["\u0275nov"](t,14).href),e(t,24,0,i["\u0275nov"](t,25).target,i["\u0275nov"](t,25).href)})}function nC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-home",[],null,null,null,tC,eC)),i["\u0275did"](1,114688,null,0,Jw,[gm,mm,Bw,$w.SimpleModalService,Fg,pm],null,null)],function(e,t){e(t,1,0)},null)}var iC=i["\u0275ccf"]("app-home",Jw,nC,{},{},[]),rC=function(){function e(e,t,n,i,r,o){this.formBuilder=e,this.route=t,this.router=n,this.authenticationService=i,this.alertService=r,this.sharedData=o,this.loading=!1,this.submitted=!1}return e.prototype.ngOnInit=function(){this.loginForm=this.formBuilder.group({email:["",Dm.required],password:["",Dm.required]}),this.authenticationService.logout(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"},Object.defineProperty(e.prototype,"f",{get:function(){return this.loginForm.controls},enumerable:!0,configurable:!0}),e.prototype.onSubmit=function(){var e=this;this.submitted=!0,this.loginForm.invalid||(this.loading=!0,this.authenticationService.login(this.f.email.value,this.f.password.value).pipe(Vd()).subscribe(function(t){e.router.navigate([e.returnUrl]),e.sharedData.changeLogin(!0)},function(t){e.alertService.error(t),e.loading=!1}))},e}(),oC=i["\u0275crt"]({encapsulation:0,styles:[[".title[_ngcontent-%COMP%]{color:#fff;margin-top:10%;font-size:500%}.rmpaddin[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.description[_ngcontent-%COMP%]{font-size:200%;color:#fff}.landingpg1[_ngcontent-%COMP%]{height:100%;background-image:url(IMG_7339.f7c8b1c67f41396b58fb.JPG);background-position:center;background-repeat:no-repeat;background-size:cover;text-align:center}.landingpg2[_ngcontent-%COMP%]{height:100%;background-image:url(IMG_7350.943046efa97205dfecd9.JPG);background-position:center;background-repeat:no-repeat;background-size:cover;text-align:center}.landingpg3[_ngcontent-%COMP%]{height:100%;background-image:url(IMG_7376.bfddb18eb4f15674fe35.JPG);background-position:center;background-repeat:no-repeat;background-size:cover;text-align:center}.second[_ngcontent-%COMP%]{background-color:#faebd7}"]],data:{}});function sC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Email is required"]))],null,null)}function aC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","invalid-feedback"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,sC)),i["\u0275did"](2,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,2,0,t.component.f.email.errors.required)},null)}function lC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Password is required"]))],null,null)}function cC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","invalid-feedback"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,lC)),i["\u0275did"](2,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,2,0,t.component.f.password.errors.required)},null)}function hC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,0,"img",[["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],null,null,null,null,null))],null,null)}function dC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,27,"div",[["class","container-fluid rmpaddin "]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,26,"div",[["class","carousel slide"],["data-interval","3000"],["data-ride","carousel"],["id","carouselExampleIndicators"]],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,3,"ol",[["class","carousel-indicators"]],null,null,null,null,null)),(e()(),i["\u0275eld"](3,0,null,null,0,"li",[["class","active"],["data-slide-to","0"],["data-target","#carouselExampleIndicators"]],null,null,null,null,null)),(e()(),i["\u0275eld"](4,0,null,null,0,"li",[["data-slide-to","1"],["data-target","#carouselExampleIndicators"]],null,null,null,null,null)),(e()(),i["\u0275eld"](5,0,null,null,0,"li",[["data-slide-to","2"],["data-target","#carouselExampleIndicators"]],null,null,null,null,null)),(e()(),i["\u0275eld"](6,0,null,null,21,"div",[["class","carousel-inner  "]],null,null,null,null,null)),(e()(),i["\u0275eld"](7,0,null,null,6,"div",[["class","carousel-item active min-vh-100 landingpg1"]],null,null,null,null,null)),(e()(),i["\u0275eld"](8,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](9,0,null,null,4,"div",[["class","col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275eld"](10,0,null,null,1,"h1",[["class","title"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Welcome to The SAM platform"])),(e()(),i["\u0275eld"](12,0,null,null,1,"div",[["class","description"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["An Experiance like no other"])),(e()(),i["\u0275eld"](14,0,null,null,6,"div",[["class","carousel-item  min-vh-100 landingpg2"]],null,null,null,null,null)),(e()(),i["\u0275eld"](15,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](16,0,null,null,4,"div",[["class","col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275eld"](17,0,null,null,1,"h1",[["class","title"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Welcome to The SAM platform"])),(e()(),i["\u0275eld"](19,0,null,null,1,"div",[["class","description"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["connect all your boards remotely anywhere anytime"])),(e()(),i["\u0275eld"](21,0,null,null,6,"div",[["class","carousel-item  min-vh-100 landingpg3"]],null,null,null,null,null)),(e()(),i["\u0275eld"](22,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](23,0,null,null,4,"div",[["class","col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275eld"](24,0,null,null,1,"h1",[["class","title"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Welcome to The SAM platform"])),(e()(),i["\u0275eld"](26,0,null,null,1,"div",[["class","description"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["connect all your boards remotely anywhere anytime"])),(e()(),i["\u0275eld"](28,0,null,null,42,"div",[["class","container-fluid second "],["id","login"]],null,null,null,null,null)),(e()(),i["\u0275eld"](29,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Login"])),(e()(),i["\u0275eld"](31,0,null,null,39,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var r=!0,o=e.component;return"submit"===t&&(r=!1!==i["\u0275nov"](e,33).onSubmit(n)&&r),"reset"===t&&(r=!1!==i["\u0275nov"](e,33).onReset()&&r),"ngSubmit"===t&&(r=!1!==o.onSubmit()&&r),r},null,null)),i["\u0275did"](32,16384,null,0,By,[],null,null),i["\u0275did"](33,540672,null,0,My,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),i["\u0275prd"](2048,null,Om,null,[My]),i["\u0275did"](35,16384,null,0,my,[[4,Om]],null,null),(e()(),i["\u0275eld"](36,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["\u0275eld"](37,0,null,null,1,"label",[["for","email"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Email"])),(e()(),i["\u0275eld"](39,0,null,null,7,"input",[["class","form-control"],["formControlName","email"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0;return"input"===t&&(r=!1!==i["\u0275nov"](e,42)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==i["\u0275nov"](e,42).onTouched()&&r),"compositionstart"===t&&(r=!1!==i["\u0275nov"](e,42)._compositionStart()&&r),"compositionend"===t&&(r=!1!==i["\u0275nov"](e,42)._compositionEnd(n.target.value)&&r),r},null,null)),i["\u0275did"](40,278528,null,0,id.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](41,{"is-invalid":0}),i["\u0275did"](42,16384,null,0,Lm,[i.Renderer2,i.ElementRef,[2,Rm]],null,null),i["\u0275prd"](1024,null,Mm,function(e){return[e]},[Lm]),i["\u0275did"](44,671744,null,0,_y,[[3,Om],[8,null],[8,null],[6,Mm],[2,Ty]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,zm,null,[_y]),i["\u0275did"](46,16384,null,0,gy,[[4,zm]],null,null),(e()(),i["\u0275and"](16777216,null,null,1,null,aC)),i["\u0275did"](48,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](49,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["\u0275eld"](50,0,null,null,1,"label",[["for","password"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Password"])),(e()(),i["\u0275eld"](52,0,null,null,7,"input",[["class","form-control"],["formControlName","password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0;return"input"===t&&(r=!1!==i["\u0275nov"](e,55)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==i["\u0275nov"](e,55).onTouched()&&r),"compositionstart"===t&&(r=!1!==i["\u0275nov"](e,55)._compositionStart()&&r),"compositionend"===t&&(r=!1!==i["\u0275nov"](e,55)._compositionEnd(n.target.value)&&r),r},null,null)),i["\u0275did"](53,278528,null,0,id.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](54,{"is-invalid":0}),i["\u0275did"](55,16384,null,0,Lm,[i.Renderer2,i.ElementRef,[2,Rm]],null,null),i["\u0275prd"](1024,null,Mm,function(e){return[e]},[Lm]),i["\u0275did"](57,671744,null,0,_y,[[3,Om],[8,null],[8,null],[6,Mm],[2,Ty]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,zm,null,[_y]),i["\u0275did"](59,16384,null,0,gy,[[4,zm]],null,null),(e()(),i["\u0275and"](16777216,null,null,1,null,cC)),i["\u0275did"](61,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](62,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["\u0275eld"](63,0,null,null,1,"button",[["class","btn btn-primary"]],[[8,"disabled",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Login"])),(e()(),i["\u0275and"](16777216,null,null,1,null,hC)),i["\u0275did"](66,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](67,0,null,null,3,"a",[["class","btn btn-link"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==i["\u0275nov"](e,68).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),i["\u0275did"](68,671744,null,0,zg,[Fg,kf,id.LocationStrategy],{routerLink:[0,"routerLink"]},null),i["\u0275pad"](69,1),(e()(),i["\u0275ted"](-1,null,["Register"]))],function(e,t){var n=t.component;e(t,33,0,n.loginForm);var i=e(t,41,0,n.submitted&&n.f.email.errors);e(t,40,0,"form-control",i),e(t,44,0,"email"),e(t,48,0,n.submitted&&n.f.email.errors);var r=e(t,54,0,n.submitted&&n.f.password.errors);e(t,53,0,"form-control",r),e(t,57,0,"password"),e(t,61,0,n.submitted&&n.f.password.errors),e(t,66,0,n.loading);var o=e(t,69,0,"/register");e(t,68,0,o)},function(e,t){var n=t.component;e(t,31,0,i["\u0275nov"](t,35).ngClassUntouched,i["\u0275nov"](t,35).ngClassTouched,i["\u0275nov"](t,35).ngClassPristine,i["\u0275nov"](t,35).ngClassDirty,i["\u0275nov"](t,35).ngClassValid,i["\u0275nov"](t,35).ngClassInvalid,i["\u0275nov"](t,35).ngClassPending),e(t,39,0,i["\u0275nov"](t,46).ngClassUntouched,i["\u0275nov"](t,46).ngClassTouched,i["\u0275nov"](t,46).ngClassPristine,i["\u0275nov"](t,46).ngClassDirty,i["\u0275nov"](t,46).ngClassValid,i["\u0275nov"](t,46).ngClassInvalid,i["\u0275nov"](t,46).ngClassPending),e(t,52,0,i["\u0275nov"](t,59).ngClassUntouched,i["\u0275nov"](t,59).ngClassTouched,i["\u0275nov"](t,59).ngClassPristine,i["\u0275nov"](t,59).ngClassDirty,i["\u0275nov"](t,59).ngClassValid,i["\u0275nov"](t,59).ngClassInvalid,i["\u0275nov"](t,59).ngClassPending),e(t,63,0,n.loading),e(t,67,0,i["\u0275nov"](t,68).target,i["\u0275nov"](t,68).href)})}function uC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,dC,oC)),i["\u0275did"](1,114688,null,0,rC,[Ny,kf,Fg,fm,pm,$h],null,null)],function(e,t){e(t,1,0)},null)}var pC=i["\u0275ccf"]("ng-component",rC,uC,{},{},[]),fC=[{id:1,name:"Arduino",image_path:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/Arduino_Uno_-_R3.jpg/220px-Arduino_Uno_-_R3.jpg"},{id:2,name:"Pi",image_path:"https://in.element14.com/wcsstore/ExtendedSitesCatalogAssetStore/cms/asset/images/common/raspberry-pi-landing-page/rasp-pi-3-b+-board.png"},{id:3,name:"Tivac",image_path:"http://processors.wiki.ti.com/images/3/32/EK-TM4C123GXL.jpg"},{id:4,name:"Custom board",image_path:"https://www.transonics.com/pub/media/wysiwyg/PCBS_1.png"}],gC={headers:new lw({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"})},mC=function(){function e(e,t){this.http=e,this.sharedData=t,this.baseurl=this.sharedData.baseurl+"/design"}return e.prototype.getcomponents=function(){return this.http.get(this.sharedData.baseurl+"/users/components")},e.prototype.getUserIP=function(){return this.http.get(this.sharedData.localhost_trayapp+"UserIP")},e.prototype.addcomponent=function(e,t,n){return this.http.post(this.sharedData.baseurl+"/users/component",{component_id:e,USBPORT:n,UDPPORT:t},gC)},e.prototype.setwifiname=function(e){return this.http.post(this.sharedData.localhost_trayapp+"setwifiname",{wifiname:e},gC)},e.prototype.setwifipass=function(e){return this.http.post(this.sharedData.localhost_trayapp+"setwifipass",{wifipass:e},gC)},e.prototype.setserver=function(e){return this.http.post(this.sharedData.localhost_trayapp+"setserver",{server:e},gC)},e.prototype.setid=function(e){return this.http.post(this.sharedData.localhost_trayapp+"setid",{id:e},gC)},e.prototype.getVersion=function(){return this.http.get(this.sharedData.localhost_trayapp+"GET_BOARD_TYPE",{})},e.prototype.sethellomsg=function(e){return this.http.post(this.sharedData.localhost_trayapp+"sethellomessage",{helloMessage:e},gC)},e.prototype.Sendhellomsg=function(){return this.http.get(this.sharedData.localhost_trayapp+"SEND_HELLO_MESSAGE",gC)},e.prototype.sendfinish=function(){return this.http.get(this.sharedData.localhost_trayapp+"FINISH_CONFIGURATIONS",gC)},e.prototype.unBindAll=function(){return this.http.post(this.sharedData.localhost_trayapp+"UnBindAll","",{headers:new lw({"Access-Control-Allow-Origin":"*"})})},e.prototype.sendBindIPPort=function(e,t){return this.http.post(this.sharedData.localhost_trayapp+"Bind",{ip:e,port:t})},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e(i.inject(xw),i.inject($h))},token:e,providedIn:"root"}),e}(),yC=function(){function e(e,t,n,i){this.configservice=e,this.router=t,this.route=n,this.sharedData=i,this.serverurl="192.168.1.30/SAM",this.boards=fC,this.EthernetAvailable=!1}return e.prototype.ngOnInit=function(){var e=this;this.configservice.getcomponents().subscribe(function(t){e.boards=t},function(e){alert(e)}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"},e.prototype.next=function(){document.getElementById("carousel_next").click()},e.prototype.getversion=function(){var e=this;this.configservice.getVersion().subscribe(function(t){t.toString().includes("E")?(e.EthernetAvailable=!0,e.next()):e.next()},function(e){alert(e)})},e.prototype.onSelect=function(e){this.selectedBoard=e},e.prototype.setcomponent=function(e){var t=this;this.configservice.setid(e).subscribe(function(n){t.configservice.setserver(t.serverurl).subscribe(function(n){t.configservice.sethellomsg("hello_"+e).subscribe(function(n){t.configservice.Sendhellomsg().subscribe(function(n){t.configservice.addcomponent(e,t.portvarUDP,t.portvarUSB).subscribe(function(e){t.configservice.sendfinish().subscribe(function(e){t.router.navigate(["homex"])},function(e){console.log("the error is "+e),alert(e)})},function(e){console.log("the error is "+e),alert(e)})},function(e){console.log("the error is "+e),alert(e)})},function(e){console.log("the error is "+e),alert(e)})},function(e){console.log("the error is "+e),alert(e.res)})},function(e){console.log("the error is "+e),alert(e.res)})},e.prototype.setport=function(){console.log("entered here"),console.log(this.portvarUDP),console.log(this.portvarUSB),this.next()},e.prototype.getimage=function(e){return""+this.sharedData.imageUrl+e+"/image"},e.prototype.setwifi=function(){var e=this;console.log("entered here"),this.configservice.setwifiname(this.wifinamevar).subscribe(function(t){"failled"==t.res?console.log("the data is failed"):e.configservice.setwifipass(e.wifipassvar).subscribe(function(e){"failled"==e.res?console.log("the data is failed"):(document.getElementById("carousel_next").click(),console.log("the data is correct"))},function(e){console.log("the error is "+e),alert(e.res)})},function(e){console.log("the error is "+e),alert(e.res)})},e}(),vC=i["\u0275crt"]({encapsulation:0,styles:[[".selected[_ngcontent-%COMP%]{background-color:#cfd8dc!important;color:#fff}.boardselection[_ngcontent-%COMP%]{margin-left:auto}.Intsruction-Set[_ngcontent-%COMP%], .boards[_ngcontent-%COMP%], .connection-type[_ngcontent-%COMP%]{right:0;list-style-type:none;padding:0}.boards[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]:hover{background-color:#bbd8dc!important;color:#fff}.boards[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#607d8b;background-color:#ddd;left:.1em}.boards[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{position:relative;top:-3px}.badge[_ngcontent-%COMP%]{display:inline-block;font-size:small;color:#fff;background-color:#607d8b;line-height:1em;position:relative;left:-1px;top:-4px;height:1.8em;margin-right:.8em;border-radius:4px 0 0 4px}.welcome_title[_ngcontent-%COMP%]{color:#607d8b;position:relative;margin-left:auto;margin-right:auto;text-align:center;padding:2%}.sectionTitle[_ngcontent-%COMP%]{text-align:center;color:#607d8b}.container[_ngcontent-%COMP%]{border-style:outset;border-width:10px}.boardimg[_ngcontent-%COMP%]{position:relative;float:right;width:100px;height:100px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{height:400px;overflow:hidden;overflow-y:scroll}li[_ngcontent-%COMP%]{clear:right;padding:3px}.btn[_ngcontent-%COMP%]{float:right}.instruction_block[_ngcontent-%COMP%]{display:grid}.instruction_text[_ngcontent-%COMP%]{font-size:100%}"]],data:{}});function bC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"button",[["class","btn"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.next()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Use Ethernet"]))],null,null)}function wC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,5,"li",[],[[2,"selected",null]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.onSelect(e.context.$implicit)&&i),i},null,null)),(e()(),i["\u0275eld"](1,0,null,null,1,"span",[["class","badge"]],null,null,null,null,null)),(e()(),i["\u0275ted"](2,null,["",""])),(e()(),i["\u0275eld"](3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](4,null,["",""])),(e()(),i["\u0275eld"](5,0,null,null,0,"img",[["class","boardimg"]],[[8,"src",4]],null,null,null,null))],null,function(e,t){var n=t.component;e(t,0,0,t.context.$implicit===n.selectedBoard),e(t,2,0,t.context.$implicit.id),e(t,4,0,t.context.$implicit.name),e(t,5,0,n.getimage(t.context.$implicit.id))})}function CC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,1,"button",[["class","btn"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0,r=e.component;return"click"===t&&(i=!1!==r.setcomponent(r.selectedBoard.id)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Next"]))],null,null)}function xC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,108,"div",[["class","bg"]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,107,"div",[["class","container"]],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,3,"div",[["class","row welcome_title"]],null,null,null,null,null)),(e()(),i["\u0275eld"](3,0,null,null,2,"div",[["class","col-xl-12"]],null,null,null,null,null)),(e()(),i["\u0275eld"](4,0,null,null,1,"h1",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["welcome to SAM configuration menu"])),(e()(),i["\u0275eld"](6,0,null,null,102,"div",[["class","row mainSection"]],null,null,null,null,null)),(e()(),i["\u0275eld"](7,0,null,null,0,"div",[["class","col-xl-2"]],null,null,null,null,null)),(e()(),i["\u0275eld"](8,0,null,null,99,"div",[["class","col-xl-8"]],null,null,null,null,null)),(e()(),i["\u0275eld"](9,0,null,null,98,"div",[["class","carousel slide"],["data-interval","false"],["data-ride","carousel"],["id","carouselExampleControls"]],null,null,null,null,null)),(e()(),i["\u0275eld"](10,0,null,null,89,"div",[["class","carousel-inner"]],null,null,null,null,null)),(e()(),i["\u0275eld"](11,0,null,null,9,"div",[["class","carousel-item active"]],null,null,null,null,null)),(e()(),i["\u0275eld"](12,0,null,null,8,"div",[["class","instruction_block"]],null,null,null,null,null)),(e()(),i["\u0275eld"](13,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),i["\u0275eld"](14,0,null,null,1,"span",[["class","badge"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["1"])),(e()(),i["\u0275eld"](16,0,null,null,1,"span",[["class","instruction_text"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["please connect your sam board to electrical outlet and make sure the red led is on"])),(e()(),i["\u0275eld"](18,0,null,null,0,"img",[["class","boardimg"],["src","https://static.dezeen.com/uploads/2018/04/tug-plug-design-technology_dezeen_sq.gif"]],null,null,null,null,null)),(e()(),i["\u0275eld"](19,0,null,null,1,"button",[["class","btn"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.next()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Next"])),(e()(),i["\u0275eld"](21,0,null,null,9,"div",[["class","carousel-item "]],null,null,null,null,null)),(e()(),i["\u0275eld"](22,0,null,null,8,"div",[["class","instruction_block"]],null,null,null,null,null)),(e()(),i["\u0275eld"](23,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),i["\u0275eld"](24,0,null,null,1,"span",[["class","badge"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["2"])),(e()(),i["\u0275eld"](26,0,null,null,1,"span",[["class","instruction_text"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["please connect your sam board to usb cable with your computer using cable included"])),(e()(),i["\u0275eld"](28,0,null,null,0,"img",[["class","boardimg"],["src","https://i.stack.imgur.com/Bnx0H.gif"]],null,null,null,null,null)),(e()(),i["\u0275eld"](29,0,null,null,1,"button",[["class","btn"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.getversion()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Next"])),(e()(),i["\u0275eld"](31,0,null,null,29,"div",[["class","carousel-item "]],null,null,null,null,null)),(e()(),i["\u0275eld"](32,0,null,null,28,"div",[["class","instruction_block"]],null,null,null,null,null)),(e()(),i["\u0275eld"](33,0,null,null,23,"div",[],null,null,null,null,null)),(e()(),i["\u0275eld"](34,0,null,null,1,"span",[["class","badge"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["3"])),(e()(),i["\u0275eld"](36,0,null,null,1,"span",[["class","instruction_text"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["please enter your wifi cridentials"])),(e()(),i["\u0275eld"](38,0,null,null,0,"img",[["class","boardimg"],["src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTime7aH4loQkjXri7Ybz9-Xfqkn7zZCLL7-ZAVPOY5txDhjbvB1A"]],null,null,null,null,null)),(e()(),i["\u0275eld"](39,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Wifi Name :"])),(e()(),i["\u0275eld"](41,0,null,null,5,"input",[["aria-describedby","basic-addon1"],["aria-label","Wifi Name"],["class","form-control"],["placeholder","Wifi Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==i["\u0275nov"](e,42)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==i["\u0275nov"](e,42).onTouched()&&r),"compositionstart"===t&&(r=!1!==i["\u0275nov"](e,42)._compositionStart()&&r),"compositionend"===t&&(r=!1!==i["\u0275nov"](e,42)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(o.wifinamevar=n)&&r),r},null,null)),i["\u0275did"](42,16384,null,0,Lm,[i.Renderer2,i.ElementRef,[2,Rm]],null,null),i["\u0275prd"](1024,null,Mm,function(e){return[e]},[Lm]),i["\u0275did"](44,671744,null,0,Py,[[8,null],[8,null],[8,null],[6,Mm]],{model:[0,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,zm,null,[Py]),i["\u0275did"](46,16384,null,0,gy,[[4,zm]],null,null),(e()(),i["\u0275eld"](47,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),i["\u0275eld"](48,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Wifi Password"])),(e()(),i["\u0275eld"](50,0,null,null,5,"input",[["aria-describedby","basic-addon1"],["aria-label","Wifi password"],["class","form-control"],["placeholder","Wifi password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==i["\u0275nov"](e,51)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==i["\u0275nov"](e,51).onTouched()&&r),"compositionstart"===t&&(r=!1!==i["\u0275nov"](e,51)._compositionStart()&&r),"compositionend"===t&&(r=!1!==i["\u0275nov"](e,51)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(o.wifipassvar=n)&&r),r},null,null)),i["\u0275did"](51,16384,null,0,Lm,[i.Renderer2,i.ElementRef,[2,Rm]],null,null),i["\u0275prd"](1024,null,Mm,function(e){return[e]},[Lm]),i["\u0275did"](53,671744,null,0,Py,[[8,null],[8,null],[8,null],[6,Mm]],{model:[0,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,zm,null,[Py]),i["\u0275did"](55,16384,null,0,gy,[[4,zm]],null,null),(e()(),i["\u0275eld"](56,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),i["\u0275eld"](57,0,null,null,1,"button",[["class","btn"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.setwifi()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Next"])),(e()(),i["\u0275and"](16777216,null,null,1,null,bC)),i["\u0275did"](60,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](61,0,null,null,29,"div",[["class","carousel-item "]],null,null,null,null,null)),(e()(),i["\u0275eld"](62,0,null,null,28,"div",[["class","instruction_block"]],null,null,null,null,null)),(e()(),i["\u0275eld"](63,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),i["\u0275eld"](64,0,null,null,1,"span",[["class","badge"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["4"])),(e()(),i["\u0275eld"](66,0,null,null,1,"span",[["class","instruction_text"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Please enable port forwarding in your router configuration and write ports here"])),(e()(),i["\u0275eld"](68,0,null,null,1,"a",[["href","https://www.lifewire.com/how-to-port-forward-4163829"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["How to Port Forward"])),(e()(),i["\u0275eld"](70,0,null,null,0,"img",[["class","boardimg"],["src","https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Internet_port_forwarding.png/1200px-Internet_port_forwarding.png"]],null,null,null,null,null)),(e()(),i["\u0275eld"](71,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),i["\u0275eld"](72,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["UDPPort"])),(e()(),i["\u0275eld"](74,0,[["UDPport",1]],null,5,"input",[["aria-describedby","basic-addon1"],["aria-label","Port"],["class","form-control"],["placeholder","UDPPort"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==i["\u0275nov"](e,75)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==i["\u0275nov"](e,75).onTouched()&&r),"compositionstart"===t&&(r=!1!==i["\u0275nov"](e,75)._compositionStart()&&r),"compositionend"===t&&(r=!1!==i["\u0275nov"](e,75)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(o.portvarUDP=n)&&r),r},null,null)),i["\u0275did"](75,16384,null,0,Lm,[i.Renderer2,i.ElementRef,[2,Rm]],null,null),i["\u0275prd"](1024,null,Mm,function(e){return[e]},[Lm]),i["\u0275did"](77,671744,null,0,Py,[[8,null],[8,null],[8,null],[6,Mm]],{model:[0,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,zm,null,[Py]),i["\u0275did"](79,16384,null,0,gy,[[4,zm]],null,null),(e()(),i["\u0275eld"](80,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["USBPort"])),(e()(),i["\u0275eld"](82,0,[["USBport",1]],null,5,"input",[["aria-describedby","basic-addon1"],["aria-label","Port"],["class","form-control"],["placeholder","USBPort"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==i["\u0275nov"](e,83)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==i["\u0275nov"](e,83).onTouched()&&r),"compositionstart"===t&&(r=!1!==i["\u0275nov"](e,83)._compositionStart()&&r),"compositionend"===t&&(r=!1!==i["\u0275nov"](e,83)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(o.portvarUSB=n)&&r),r},null,null)),i["\u0275did"](83,16384,null,0,Lm,[i.Renderer2,i.ElementRef,[2,Rm]],null,null),i["\u0275prd"](1024,null,Mm,function(e){return[e]},[Lm]),i["\u0275did"](85,671744,null,0,Py,[[8,null],[8,null],[8,null],[6,Mm]],{model:[0,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,zm,null,[Py]),i["\u0275did"](87,16384,null,0,gy,[[4,zm]],null,null),(e()(),i["\u0275eld"](88,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),i["\u0275eld"](89,0,null,null,1,"button",[["class","btn"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.setport()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Next"])),(e()(),i["\u0275eld"](91,0,null,null,8,"div",[["class","carousel-item"]],null,null,null,null,null)),(e()(),i["\u0275eld"](92,0,null,null,7,"div",[["class","connectedTo"]],null,null,null,null,null)),(e()(),i["\u0275eld"](93,0,null,null,1,"h2",[["class","sectionTitle"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["What will you connect the SAM to ?"])),(e()(),i["\u0275eld"](95,0,null,null,4,"ul",[["class","boards"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,wC)),i["\u0275did"](97,278528,null,0,id.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,CC)),i["\u0275did"](99,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](100,0,null,null,3,"a",[["class","carousel-control-prev"],["data-slide","prev"],["href","#carouselExampleControls"],["role","button"],["style","display: none;"]],null,null,null,null,null)),(e()(),i["\u0275eld"](101,0,null,null,0,"span",[["aria-hidden","true"],["class","carousel-control-prev-icon"]],null,null,null,null,null)),(e()(),i["\u0275eld"](102,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Previous"])),(e()(),i["\u0275eld"](104,0,null,null,3,"a",[["class","carousel-control-next"],["data-slide","next"],["href","#carouselExampleControls"],["id","carousel_next"],["role","button"],["style","display: none;"]],null,null,null,null,null)),(e()(),i["\u0275eld"](105,0,null,null,0,"span",[["aria-hidden","true"],["class","carousel-control-next-icon"]],null,null,null,null,null)),(e()(),i["\u0275eld"](106,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Next"])),(e()(),i["\u0275eld"](108,0,null,null,0,"div",[["class","col-xl-2"]],null,null,null,null,null))],function(e,t){var n=t.component;e(t,44,0,n.wifinamevar),e(t,53,0,n.wifipassvar),e(t,60,0,n.EthernetAvailable),e(t,77,0,n.portvarUDP),e(t,85,0,n.portvarUSB),e(t,97,0,n.boards),e(t,99,0,n.selectedBoard)},function(e,t){e(t,41,0,i["\u0275nov"](t,46).ngClassUntouched,i["\u0275nov"](t,46).ngClassTouched,i["\u0275nov"](t,46).ngClassPristine,i["\u0275nov"](t,46).ngClassDirty,i["\u0275nov"](t,46).ngClassValid,i["\u0275nov"](t,46).ngClassInvalid,i["\u0275nov"](t,46).ngClassPending),e(t,50,0,i["\u0275nov"](t,55).ngClassUntouched,i["\u0275nov"](t,55).ngClassTouched,i["\u0275nov"](t,55).ngClassPristine,i["\u0275nov"](t,55).ngClassDirty,i["\u0275nov"](t,55).ngClassValid,i["\u0275nov"](t,55).ngClassInvalid,i["\u0275nov"](t,55).ngClassPending),e(t,74,0,i["\u0275nov"](t,79).ngClassUntouched,i["\u0275nov"](t,79).ngClassTouched,i["\u0275nov"](t,79).ngClassPristine,i["\u0275nov"](t,79).ngClassDirty,i["\u0275nov"](t,79).ngClassValid,i["\u0275nov"](t,79).ngClassInvalid,i["\u0275nov"](t,79).ngClassPending),e(t,82,0,i["\u0275nov"](t,87).ngClassUntouched,i["\u0275nov"](t,87).ngClassTouched,i["\u0275nov"](t,87).ngClassPristine,i["\u0275nov"](t,87).ngClassDirty,i["\u0275nov"](t,87).ngClassValid,i["\u0275nov"](t,87).ngClassInvalid,i["\u0275nov"](t,87).ngClassPending)})}function AC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-configure-sam",[],null,null,null,xC,vC)),i["\u0275did"](1,114688,null,0,yC,[mC,Fg,kf,$h],null,null)],function(e,t){e(t,1,0)},null)}var SC=i["\u0275ccf"]("app-configure-sam",yC,AC,{},{},[]),OC=function(){function e(e,t,n,i,r,o){this.userService=e,this.designService=t,this.customBoardService=n,this.simpleModalService=i,this.router=r,this.alertService=o}return e.prototype.ngOnInit=function(){this.loadUserDesigns(),this.loadUserBoards()},e.prototype.loadUserDesigns=function(){var e=this;this.userService.getDesignFiles().pipe(Vd()).subscribe(function(t){e.design_files=t})},e.prototype.loadUserBoards=function(){var e=this;this.userService.getUserBoards().pipe(Vd()).subscribe(function(t){e.user_boards=t})},e.prototype.customBoardDesign=function(){this.router.navigateByUrl("/customboard")},e.prototype.deleteDesignFile=function(e,t){var n=this;confirm("if you delete this file ,you will not be able to restore again,sure about delete?")&&this.designService.deleteDesignFile(e).subscribe(function(i){n.loadUserDesigns(),n.alertService.success("File "+t+"("+e+") deleted")},function(i){n.alertService.error("Sorry file "+t+" ("+e+") couldn't be deleted")})},e.prototype.deleteBoard=function(e,t){var n=this;confirm("if you delete this file ,you will not be able to restore again,sure about delete?")&&this.customBoardService.deleteBoard(e).subscribe(function(){n.loadUserBoards(),n.alertService.success("Board "+t+" ("+e+") created")},function(i){n.alertService.error("Sorry board "+t+" ("+e+") couldn't be deleted")})},e.prototype.createNewFile=function(){var e=this;this.simpleModalService.addModal(Kw,{title:"Download Digram as file",question:"File name",isdownload:!1}).subscribe(function(t){""!=t&&e.designService.createDesignFile(t).subscribe(function(n){e.loadUserDesigns(),e.alertService.success("file "+t+" created")},function(n){e.alertService.error("Sorry File "+t+" couldn't be created")})})},e}(),EC=i["\u0275crt"]({encapsulation:0,styles:[[".sidebar_dashboard[_ngcontent-%COMP%]{background-color:#faebd7}.dashboard_main[_ngcontent-%COMP%]{background-image:url(IMG_7309.88dc3642c18cf002c5b2.JPG);background-size:cover}"]],data:{}});function IC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,9,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,2,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==i["\u0275nov"](e,3).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),i["\u0275did"](3,671744,null,0,zg,[Fg,kf,id.LocationStrategy],{routerLink:[0,"routerLink"]},null),(e()(),i["\u0275ted"](4,null,[" ",""])),(e()(),i["\u0275eld"](5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),i["\u0275eld"](6,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),i["\u0275ted"](7,null,["id: ",""])),(e()(),i["\u0275eld"](8,0,null,null,1,"button",[["class","btn-outline-danger"],["style","float: right;"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.deleteDesignFile(e.context.$implicit.id,e.context.$implicit.original_file_name)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Delete"]))],function(e,t){e(t,3,0,i["\u0275inlineInterpolate"](1,"/design/",t.context.$implicit.id,""))},function(e,t){e(t,2,0,i["\u0275nov"](t,3).target,i["\u0275nov"](t,3).href),e(t,4,0,t.context.$implicit.original_file_name),e(t,7,0,t.context.$implicit.id)})}function DC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,11,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,4,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==i["\u0275nov"](e,3).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),i["\u0275did"](3,671744,null,0,zg,[Fg,kf,id.LocationStrategy],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),i["\u0275pod"](4,{board_id:0}),i["\u0275pad"](5,1),(e()(),i["\u0275ted"](6,null,[" ",""])),(e()(),i["\u0275eld"](7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),i["\u0275eld"](8,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),i["\u0275ted"](9,null,["id: ",""])),(e()(),i["\u0275eld"](10,0,null,null,1,"button",[["class","btn-outline-danger"],["style","float: right;"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.deleteBoard(e.context.$implicit.id,e.context.$implicit.name)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Delete"]))],function(e,t){var n=e(t,4,0,t.context.$implicit.id),i=e(t,5,0,"/customboard");e(t,3,0,n,i)},function(e,t){e(t,2,0,i["\u0275nov"](t,3).target,i["\u0275nov"](t,3).href),e(t,6,0,t.context.$implicit.name),e(t,9,0,t.context.$implicit.id)})}function kC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,32,"div",[["class","container-fluid"]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,31,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,14,"div",[["class","col-sm-2 sidebar_dashboard"]],null,null,null,null,null)),(e()(),i["\u0275eld"](3,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),i["\u0275eld"](4,0,null,null,12,"div",[["class","nav flex-sm-column"]],null,null,null,null,null)),(e()(),i["\u0275eld"](5,0,null,null,1,"a",[["class","nav-link d-none d-sm-inline"],["href",""]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Sidebar"])),(e()(),i["\u0275eld"](7,0,null,null,1,"a",[["class","nav-link"],["href",""]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Link"])),(e()(),i["\u0275eld"](9,0,null,null,1,"a",[["class","nav-link"],["href",""]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Link"])),(e()(),i["\u0275eld"](11,0,null,null,1,"a",[["class","nav-link"],["href",""]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Link"])),(e()(),i["\u0275eld"](13,0,null,null,1,"a",[["class","nav-link"],["href",""]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Link"])),(e()(),i["\u0275eld"](15,0,null,null,1,"a",[["class","nav-link"],["href",""]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Link"])),(e()(),i["\u0275eld"](17,0,null,null,7,"div",[["class","col-sm-5"],["style","background-color:yellow;"]],null,null,null,null,null)),(e()(),i["\u0275eld"](18,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Design Files"])),(e()(),i["\u0275eld"](20,0,null,null,1,"button",[["class","btn btn-outline-dark"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.createNewFile()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["create new file"])),(e()(),i["\u0275eld"](22,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,IC)),i["\u0275did"](24,278528,null,0,id.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["\u0275eld"](25,0,null,null,7,"div",[["class","col-sm-5"],["style","background-color:pink;"]],null,null,null,null,null)),(e()(),i["\u0275eld"](26,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["User Boards"])),(e()(),i["\u0275eld"](28,0,null,null,1,"button",[["class","btn btn-outline-dark"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.customBoardDesign()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["create new Board"])),(e()(),i["\u0275eld"](30,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,DC)),i["\u0275did"](32,278528,null,0,id.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,24,0,n.design_files),e(t,32,0,n.user_boards)},null)}function PC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-dashboard",[],null,null,null,kC,EC)),i["\u0275did"](1,114688,null,0,OC,[gm,mm,Bw,$w.SimpleModalService,Fg,pm],null,null)],function(e,t){e(t,1,0)},null)}var TC=i["\u0275ccf"]("app-dashboard",OC,PC,{},{},[]),MC=function(){function e(e,t,n,i){this.formBuilder=e,this.router=t,this.userService=n,this.alertService=i,this.loading=!1,this.submitted=!1}return e.prototype.ngOnInit=function(){this.registerForm=this.formBuilder.group({username:["",Dm.required],email:["",Dm.required],password:["",[Dm.required,Dm.minLength(6)]]})},Object.defineProperty(e.prototype,"f",{get:function(){return this.registerForm.controls},enumerable:!0,configurable:!0}),e.prototype.onSubmit=function(){var e=this;this.submitted=!0,this.registerForm.invalid||(this.loading=!0,this.userService.register(this.registerForm.value).pipe(Vd()).subscribe(function(t){e.alertService.success("Registration successful",!0),e.router.navigate(["/login"])},function(t){e.alertService.error(t),e.loading=!1}))},e}(),jC=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function RC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Username is required"]))],null,null)}function LC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","invalid-feedback"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,RC)),i["\u0275did"](2,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,2,0,t.component.f.username.errors.required)},null)}function _C(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["email is required"]))],null,null)}function NC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","invalid-feedback"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,_C)),i["\u0275did"](2,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,2,0,t.component.f.email.errors.required)},null)}function BC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Password is required"]))],null,null)}function FC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Password must be at least 6 characters"]))],null,null)}function zC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"div",[["class","invalid-feedback"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,BC)),i["\u0275did"](2,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,FC)),i["\u0275did"](4,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,2,0,n.f.password.errors.required),e(t,4,0,n.f.password.errors.minlength)},null)}function HC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,0,"img",[["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],null,null,null,null,null))],null,null)}function VC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Register"])),(e()(),i["\u0275eld"](2,0,null,null,52,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var r=!0,o=e.component;return"submit"===t&&(r=!1!==i["\u0275nov"](e,4).onSubmit(n)&&r),"reset"===t&&(r=!1!==i["\u0275nov"](e,4).onReset()&&r),"ngSubmit"===t&&(r=!1!==o.onSubmit()&&r),r},null,null)),i["\u0275did"](3,16384,null,0,By,[],null,null),i["\u0275did"](4,540672,null,0,My,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),i["\u0275prd"](2048,null,Om,null,[My]),i["\u0275did"](6,16384,null,0,my,[[4,Om]],null,null),(e()(),i["\u0275eld"](7,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["\u0275eld"](8,0,null,null,1,"label",[["for","username"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Username"])),(e()(),i["\u0275eld"](10,0,null,null,7,"input",[["class","form-control"],["formControlName","username"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0;return"input"===t&&(r=!1!==i["\u0275nov"](e,13)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==i["\u0275nov"](e,13).onTouched()&&r),"compositionstart"===t&&(r=!1!==i["\u0275nov"](e,13)._compositionStart()&&r),"compositionend"===t&&(r=!1!==i["\u0275nov"](e,13)._compositionEnd(n.target.value)&&r),r},null,null)),i["\u0275did"](11,278528,null,0,id.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](12,{"is-invalid":0}),i["\u0275did"](13,16384,null,0,Lm,[i.Renderer2,i.ElementRef,[2,Rm]],null,null),i["\u0275prd"](1024,null,Mm,function(e){return[e]},[Lm]),i["\u0275did"](15,671744,null,0,_y,[[3,Om],[8,null],[8,null],[6,Mm],[2,Ty]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,zm,null,[_y]),i["\u0275did"](17,16384,null,0,gy,[[4,zm]],null,null),(e()(),i["\u0275and"](16777216,null,null,1,null,LC)),i["\u0275did"](19,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](20,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["\u0275eld"](21,0,null,null,1,"label",[["for","email"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Email"])),(e()(),i["\u0275eld"](23,0,null,null,7,"input",[["class","form-control"],["formControlName","email"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0;return"input"===t&&(r=!1!==i["\u0275nov"](e,26)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==i["\u0275nov"](e,26).onTouched()&&r),"compositionstart"===t&&(r=!1!==i["\u0275nov"](e,26)._compositionStart()&&r),"compositionend"===t&&(r=!1!==i["\u0275nov"](e,26)._compositionEnd(n.target.value)&&r),r},null,null)),i["\u0275did"](24,278528,null,0,id.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](25,{"is-invalid":0}),i["\u0275did"](26,16384,null,0,Lm,[i.Renderer2,i.ElementRef,[2,Rm]],null,null),i["\u0275prd"](1024,null,Mm,function(e){return[e]},[Lm]),i["\u0275did"](28,671744,null,0,_y,[[3,Om],[8,null],[8,null],[6,Mm],[2,Ty]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,zm,null,[_y]),i["\u0275did"](30,16384,null,0,gy,[[4,zm]],null,null),(e()(),i["\u0275and"](16777216,null,null,1,null,NC)),i["\u0275did"](32,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](33,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["\u0275eld"](34,0,null,null,1,"label",[["for","password"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Password"])),(e()(),i["\u0275eld"](36,0,null,null,7,"input",[["class","form-control"],["formControlName","password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0;return"input"===t&&(r=!1!==i["\u0275nov"](e,39)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==i["\u0275nov"](e,39).onTouched()&&r),"compositionstart"===t&&(r=!1!==i["\u0275nov"](e,39)._compositionStart()&&r),"compositionend"===t&&(r=!1!==i["\u0275nov"](e,39)._compositionEnd(n.target.value)&&r),r},null,null)),i["\u0275did"](37,278528,null,0,id.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](38,{"is-invalid":0}),i["\u0275did"](39,16384,null,0,Lm,[i.Renderer2,i.ElementRef,[2,Rm]],null,null),i["\u0275prd"](1024,null,Mm,function(e){return[e]},[Lm]),i["\u0275did"](41,671744,null,0,_y,[[3,Om],[8,null],[8,null],[6,Mm],[2,Ty]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,zm,null,[_y]),i["\u0275did"](43,16384,null,0,gy,[[4,zm]],null,null),(e()(),i["\u0275and"](16777216,null,null,1,null,zC)),i["\u0275did"](45,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](46,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["\u0275eld"](47,0,null,null,1,"button",[["class","btn btn-primary"]],[[8,"disabled",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Register"])),(e()(),i["\u0275and"](16777216,null,null,1,null,HC)),i["\u0275did"](50,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](51,0,null,null,3,"a",[["class","btn btn-link"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==i["\u0275nov"](e,52).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),i["\u0275did"](52,671744,null,0,zg,[Fg,kf,id.LocationStrategy],{routerLink:[0,"routerLink"]},null),i["\u0275pad"](53,1),(e()(),i["\u0275ted"](-1,null,["Cancel"]))],function(e,t){var n=t.component;e(t,4,0,n.registerForm);var i=e(t,12,0,n.submitted&&n.f.username.errors);e(t,11,0,"form-control",i),e(t,15,0,"username"),e(t,19,0,n.submitted&&n.f.username.errors);var r=e(t,25,0,n.submitted&&n.f.email.errors);e(t,24,0,"form-control",r),e(t,28,0,"email"),e(t,32,0,n.submitted&&n.f.email.errors);var o=e(t,38,0,n.submitted&&n.f.password.errors);e(t,37,0,"form-control",o),e(t,41,0,"password"),e(t,45,0,n.submitted&&n.f.password.errors),e(t,50,0,n.loading);var s=e(t,53,0,"/login");e(t,52,0,s)},function(e,t){var n=t.component;e(t,2,0,i["\u0275nov"](t,6).ngClassUntouched,i["\u0275nov"](t,6).ngClassTouched,i["\u0275nov"](t,6).ngClassPristine,i["\u0275nov"](t,6).ngClassDirty,i["\u0275nov"](t,6).ngClassValid,i["\u0275nov"](t,6).ngClassInvalid,i["\u0275nov"](t,6).ngClassPending),e(t,10,0,i["\u0275nov"](t,17).ngClassUntouched,i["\u0275nov"](t,17).ngClassTouched,i["\u0275nov"](t,17).ngClassPristine,i["\u0275nov"](t,17).ngClassDirty,i["\u0275nov"](t,17).ngClassValid,i["\u0275nov"](t,17).ngClassInvalid,i["\u0275nov"](t,17).ngClassPending),e(t,23,0,i["\u0275nov"](t,30).ngClassUntouched,i["\u0275nov"](t,30).ngClassTouched,i["\u0275nov"](t,30).ngClassPristine,i["\u0275nov"](t,30).ngClassDirty,i["\u0275nov"](t,30).ngClassValid,i["\u0275nov"](t,30).ngClassInvalid,i["\u0275nov"](t,30).ngClassPending),e(t,36,0,i["\u0275nov"](t,43).ngClassUntouched,i["\u0275nov"](t,43).ngClassTouched,i["\u0275nov"](t,43).ngClassPristine,i["\u0275nov"](t,43).ngClassDirty,i["\u0275nov"](t,43).ngClassValid,i["\u0275nov"](t,43).ngClassInvalid,i["\u0275nov"](t,43).ngClassPending),e(t,47,0,n.loading),e(t,51,0,i["\u0275nov"](t,52).target,i["\u0275nov"](t,52).href)})}function UC(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,VC,jC)),i["\u0275did"](1,114688,null,0,MC,[Ny,Fg,gm,pm],null,null)],function(e,t){e(t,1,0)},null)}var WC=i["\u0275ccf"]("ng-component",MC,UC,{},{},[]),GC=function(e){function t(){var t=e.call(this)||this;return t.isError=!1,t.readingEnded=function(e){t.result=e.target.result},t}return s.c(t,e),t.prototype.setFile=function(e){this.file=e.target.files[0]},t.prototype.load=function(){if(null!=this.file){var e=new FileReader;e.onloadend=this.readingEnded,e.readAsText(this.file),this.close()}else this.isError=!0},t.prototype.ngOnInit=function(){},t}(Zw.SimpleModalComponent);function qC(e){return function(t){return t.lift(new QC(e))}}var QC=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new YC(e),i=Object(Ld.a)(n,this.notifier);return i&&!n.seenValue?(n.add(i),t.subscribe(n)):n},e}(),YC=function(e){function t(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return s.c(t,e),t.prototype.notifyNext=function(e,t,n,i,r){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(jd.a),XC=function(){function e(e,t,n,i){this.simpleModalService=e,this.sharedData=t,this.designService=n,this.router=i,this.open_id="open",this.save_id="save",this.download_id="download",this.load_id="load",this.menuItems=[{text:"File",iconCss:"em-icons e-file",items:[{id:this.open_id,text:"Open",iconCss:"em-icons e-open"},{id:this.save_id,text:"Save",iconCss:"e-icons e-save"},{id:this.download_id,text:"Download diagram on your computer",iconCss:"e-icons e-save"},{id:this.load_id,text:"Load Diagram from your computer",iconCss:"e-icons e-load"}]},{text:"Saved",iconCss:"em-icons e-check-mark"}],this.saved_undo_stack_length=0,this.sim_mode=!1}return e.prototype.ngOnInit=function(){var e=this;this.sharedData.diagram.historyChange.subscribe(function(){e.setSaveStatus(e.saved_undo_stack_length==e.sharedData.diagram.historyManager.undoStack.length)}),this.sharedData.currentMode.pipe(qC(this.sharedData.unsubscribe_sim)).subscribe(function(t){e.sim_mode=t})},e.prototype.setSaveStatus=function(e){this.sharedData.saved_design=e,e?(this.saved_undo_stack_length=this.sharedData.diagram.historyManager.undoStack.length,this.menubar.items[1].iconCss="em-icons e-check-mark"):this.menubar.items[1].iconCss="em-icons e-cross-mark"},e.prototype.select=function(e){var t=this;if(!this.sim_mode)switch(e.item.id){case this.save_id:this.designService.saveDesign(this.sharedData.diagram.saveDiagram(),this.file_id).subscribe(function(){t.setSaveStatus(!0),alert("file edited")},function(e){});break;case this.download_id:this.simpleModalService.addModal(Kw,{title:"Download Digram as file",question:"File name",file_content:this.sharedData.diagram.saveDiagram(),isdownload:!0}).subscribe(function(e){});break;case this.load_id:this.simpleModalService.addModal(GC).subscribe(function(e){if(e)try{t.sharedData.diagram.loadDiagram(e)}catch(n){alert("corrupted file"),t.sharedData.diagram.reset()}})}},e}(),ZC=i["\u0275crt"]({encapsulation:0,styles:[["@font-face{font-family:e-menu;src:url(data:application/x-font-ttf;charset=utf-8;base64,AAEAAAAKAIAAAwAgT1MvMjvJSpgAAAEoAAAAVmNtYXBsm2feAAABpAAAAGxnbHlmmEcyrQAAAiQAAAWIaGVhZBJ0bwcAAADQAAAANmhoZWEHmQNyAAAArAAAACRobXR4I0AAAAAAAYAAAAAkbG9jYQaGB+4AAAIQAAAAFG1heHABGACaAAABCAAAACBuYW1lc0cOBgAAB6wAAAIlcG9zdJbKd4kAAAnUAAAAfQABAAADUv9qAFoEAAAA//4D6gABAAAAAAAAAAAAAAAAAAAACQABAAAAAQAAhka7o18PPPUACwPoAAAAANe2FRwAAAAA17YVHAAAAAAD6gPqAAAACAACAAAAAAAAAAEAAAAJAI4ABQAAAAAAAgAAAAoACgAAAP8AAAAAAAAAAQPrAZAABQAAAnoCvAAAAIwCegK8AAAB4AAxAQIAAAIABQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUGZFZABA5anohgNS/2oAWgPqAJYAAAABAAAAAAAABAAAAAPoAAAD6AAAA+gAAAPoAAAD6AAAA+gAAAPoAAAD6AAAAAAAAgAAAAMAAAAUAAMAAQAAABQABABYAAAADgAIAAIABuWp5bPluefo6CLohv//AADlqeWy5bnn6Ogi6IX//wAAAAAAAAAAAAAAAAABAA4ADgAQABAAEAAQAAAABQAGAAcACAABAAIAAwAEAAAAAACsASoBRAGwAhICUAKEAsQABAAAAAAD6gNZAD8AfwCDAI0AAAEzHw0dAQ8OLw8/DiMzHw0dAQ8OLw8/DgMhAyEBIRU3EyUVBQMjAwgJCAgIBwcHBgUFBAQDAgEBAgMEBAUFBgcHBwgICAkJCAgIBwcHBgUFBAQDAgEBAQECAwQEBQUGBwcHCAgI5AgJCAgHBwcGBQUEBAIDAQEDAgQEBQUGBwcHCAgJCAkICAgIBwYGBQUFAwMCAQEBAQIDAwUFBQYGBwgICAijAnyQ/qj+EgEKAssBcf5Yy9UBTwICAgQEBQYGBgcHCAgJCAkICQcIBwYGBgQFAwMCAQEBAQIDAwUEBgYGBwgHCQgJCAkICAcHBgYGBQQEAgICAgICBAQFBgYGBwcICAkICQgJBwgHBgYGBAUDAwIBAQEBAgMDBQQGBgYHCAcJCAkICQgIBwcGBgYFBAQCAgIBu/67AZUBAf5LAj0CAbUAAAAFAAAAAAPqA+oAAgAWABgAPABkAAA3OQEnMx8PFQc3MQE7AR8OAQcvDwEzHwoPBi8PPwP/nAgODg4NDAwLCwoICAcFBAMC6k4CdAgHEA4PDQ0MDAoJCAcGBAIB/kWFAQMEBgcJCgsLDQ0NDg4ODgLaBg0GBgYGBjwFBAMBAQECAgYJNAEDBAYHCQoKDAwNDQ4ODg40GQkKZJsBAwQFBwcJCQoMCw0NDg8OCE7pAnUDBQYHCQkLDAwNDg0ODg7+SIgODg4NDg0MDAsKCAgGBAMBArUCAgMDBQU9CQkJCQgICAcNDjQNDg4ODQ0MDAsJCQcGBAMBNA4DAgAAAAABAAAAAAPqA60ACgAAEyEVIRUhAxMhAyEVAcwBzPzEN5MDHrj84gOtXFz9/QGn/boAAAAABQAAAAADjgPqAAMABwALAA8AUwAAEyEVITUhFSE1IRUhJxEhESUhHw8RDw8hLw8RPw7qAij92AIo/dgCKP3YOwKi/XICeggICAgHBwYGBQUEAwMCAQEBAQIDAwQFBQYGBwcICAgI/YYICAgIBwcGBgUFBAMDAgEBAQECAwMEBQUGBgcHCAgIAQs+9j72Prj9XgKi9gEBAgMDBAUFBgYHBwgICAj8zggICAgHBwYGBQUEAwMCAQEBAQIDAwQFBQYGBwcICAgIAzIICAgIBwcGBgUFBAMDAgEABQAAAAADqQOpAAQACgAUAB4AOwAACQEXATUBFAcmNDIDBgcuATQ2MhYUAwYHLgE0NjIWFBc2NS4BIgYUFhcyNxcHJiMOARQWMjY3NCc3ATM1Ayb++FkBMv5fFRUq3xglJjExSzEZGCUmMTFLMUoOAmKUY2JLJyFmZiEnS2JilWICDmcBM4MDgP74WQE2K/50FQICKv6lGQICMkoyMkoB9xkCAjJKMjJKIyEnSmNjlGMCDmdnDgJjlGNjSichZ/7NKwAAAAMAAAAAA4oD5gAHABAAJwAAARUhNTMRIRElHgEGIiY0NjInBgcjIgYVERQWMyEyNjURNCYrAS4BIgEZAbZd/ZABWAwBGiYZGSZhIg+8JjU1JgJ2JjU1JrwPRFgDLn59/TICz1IMJxkZJxlAGSkzJv0pJzMzJwLXJjMpMwADAAAAAAOpA+cAAwAUAB4AAAERIREnBhURFBYXIT4BNRE0JiMhIicGFREzESE1IQYDTP4MQxs2JgH3JzU1J/4JJtgZXQIT/egmAs/9jwJxRBkm/YcmMwICMyYCeSYynxon/Y8CcV4CAAIAAAAAA+cD5wALACMAAAEOAQcuASc+ATceAQUeARcyNj8BARYyNjQnATc+ATUuAScOAQLYA7SHiLMEBLOIh7T9KwXnrkeBNAMBAQ4kHA7+/wMpLgTora7nAk6HtAMDtIeIswQEs4it6AQuKQP+/w4bJQ4BAQM0gUeu5wUF5wAAAAASAN4AAQAAAAAAAAABAAAAAQAAAAAAAQAHAAEAAQAAAAAAAgAHAAgAAQAAAAAAAwAHAA8AAQAAAAAABAAHABYAAQAAAAAABQALAB0AAQAAAAAABgAHACgAAQAAAAAACgAsAC8AAQAAAAAACwASAFsAAwABBAkAAAACAG0AAwABBAkAAQAOAG8AAwABBAkAAgAOAH0AAwABBAkAAwAOAIsAAwABBAkABAAOAJkAAwABBAkABQAWAKcAAwABBAkABgAOAL0AAwABBAkACgBYAMsAAwABBAkACwAkASMgZS1pY29uc1JlZ3VsYXJlLWljb25zZS1pY29uc1ZlcnNpb24gMS4wZS1pY29uc0ZvbnQgZ2VuZXJhdGVkIHVzaW5nIFN5bmNmdXNpb24gTWV0cm8gU3R1ZGlvd3d3LnN5bmNmdXNpb24uY29tACAAZQAtAGkAYwBvAG4AcwBSAGUAZwB1AGwAYQByAGUALQBpAGMAbwBuAHMAZQAtAGkAYwBvAG4AcwBWAGUAcgBzAGkAbwBuACAAMQAuADAAZQAtAGkAYwBvAG4AcwBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIAB1AHMAaQBuAGcAIABTAHkAbgBjAGYAdQBzAGkAbwBuACAATQBlAHQAcgBvACAAUwB0AHUAZABpAG8AdwB3AHcALgBzAHkAbgBjAGYAdQBzAGkAbwBuAC4AYwBvAG0AAAAAAgAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJAQIBAwEEAQUBBgEHAQgBCQEKAA1zaG9wcGluZy1jYXJ0B2VkaXQtMDUMZmlsZS1vcGVuLTAxDGZpbGUtdGV4dC0wMQNDdXQFUGFzdGUEQ29weQZTZWFyY2gAAAAAAA==) format('truetype');font-weight:400;font-style:normal}.e-menu-wrapper[_ngcontent-%COMP%]{width:100%}.em-icons[_ngcontent-%COMP%]{font-family:e-menu;font-style:normal;font-variant:normal;font-weight:400;line-height:1;text-transform:none}.e-file[_ngcontent-%COMP%]::before{content:'\\e886'}.e-edit[_ngcontent-%COMP%]::before{content:'\\e822'}.e-cut[_ngcontent-%COMP%]::before{content:'\\e5a9'}.e-copy[_ngcontent-%COMP%]::before{content:'\\e5b3'}.e-paste[_ngcontent-%COMP%]::before{content:'\\e5b2'}.e-open[_ngcontent-%COMP%]::before{content:'\\e885'}.e-save[_ngcontent-%COMP%]::before{content:'\\e98e'}.e-check-mark[_ngcontent-%COMP%]::before{content:'\\2713';color:#3b5998;background:#09d609fa}.e-cross-mark[_ngcontent-%COMP%]::before{content:'\\292B';color:#3b5998;background:#ff2205fa}"]],data:{}});function KC(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{menubar:0}),(e()(),i["\u0275eld"](1,16777216,null,null,3,"ejs-menu",[],null,[[null,"select"]],function(e,t,n){var i=!0;return"select"===t&&(i=!1!==e.component.select(n)&&i),i},Kb,Zb)),i["\u0275did"](2,6537216,[[1,4],["menu",4]],2,qb,[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector],{items:[0,"items"]},{select:"select"}),i["\u0275qud"](335544320,2,{childItems:0}),i["\u0275qud"](335544320,3,{template:0})],function(e,t){e(t,2,0,t.component.menuItems)},null)}new lw({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});var JC,$C=function(){function e(e){this.http=e}return e.prototype.sendCodeFiles=function(e){var t=new FormData;for(var n in e)t.append("files",e[n]),t.append("boards[]",n);return this.http.post("http://localhost:3000/api/design/code/4",t)},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e(i.inject(xw))},token:e,providedIn:"root"}),e}(),ex=function(){function e(e,t,n){this.visibility=vn.Visible,this.constraints=_n.InConnect|_n.OutConnect,this.offset={x:e,y:t},this.id=n}return e.prototype.toJSON=function(){var e;return{id:this.id,offset:{x:this.offset.x,y:this.offset.y},visibility:this.visibility,constraints:this.constraints,addInfo:(e={},e.sim_value="2",e)}},e}(),tx=function(){function e(e){this.sharedVariables=e,this.sharedData=e}return e.prototype.hell=function(){},e.prototype.ngOnInit=function(){},e.constraints=An.Default&~An.InConnect&~An.OutConnect,e}(),nx=" data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAMDAwMDAwMEBAMFBQQFBQcGBgYGBwoHCAcIBwoPCgsKCgsKDw4QDQwNEA4YExERExgcGBYYHCIeHiIrKSs4OEsBAwMDAwMDAwQEAwUFBAUFBwYGBgYHCgcIBwgHCg8KCwoKCwoPDhANDA0QDhgTERETGBwYFhgcIh4eIispKzg4S//CABEIAKwArAMBIgACEQEDEQH/xAAeAAEBAAMAAwEBAQAAAAAAAAAACQEHCAIDBgQFCv/aAAgBAQAAAACqYHr4M4m+O8+hqL7hAAfmjj9zRnYnhylM6n3UgAE4vlKj5Gu4s3B+pADwgfdX+8Ccv9vv8ANdSOtrkHNfFNagA1TLO0OQaE4Ar0AGqZZ2hyDQnAFegA1TLO0OQaE4Ar0AGqZZ2hyDQnAFegA1DKOsHkDR/JNfgBiLWjPIDHosN0yAY/z8fVAHzlBu+wDEB/k/LGB5Y9dPe6wB6dOR7rrvA/NJf7Snf6cgBH3tHrEPVDutu3AAxGGo+2AR+oPvoAMRhqPtgEfqD76ADEYaj7YBH6g++gAxGGo+2AR+oPvoAMRhqPtgEfqD76ADEYaj7YBH6g++gATNpB/SBODvT6sH/8QAGgEBAQEBAQEBAAAAAAAAAAAAAAYFAwQBAv/aAAgBAhAAAAAe/a59JziCpln7pJgO2zgFLNB318EpJsO+5hlBMBQxA2Pb4BpUWfz9qb8wU8w+0syClmilmgUs0Us0DfwCgnz/xAAcAQEBAQADAAMAAAAAAAAAAAAABgUCAwQBBwj/2gAIAQMQAAAAHhyefXQdoJqlcZ+iDqyNwn6AOnK2yfoA6cbZMOiDD/X/AMkP9De0Z+Z7+fk4a/oCcoydogT1CT1CCeoSeoQYe4Ye4f/EAEsQAAAEBAIDCA8EBwkAAAAAAAECAwQABQYHCBESMDcgITFBYXGytBMUFRgiUVNUV3JzdZSiwiNik9EWMjZCgZGSJTM0Q4KDs8Hx/9oACAEBAAE/AN2/mDKWM3Lt27SbNUEzKLLLHBNNMhd8TGMbIAAPHF08bkolSzmXUDKyTRYmZBmj0DEaB7FIMjqxVd97vVoqcJrXsy7ErwNWinaSPMCaGhnCVJVxNi9sJ0vPXgG3+ygycrZ/6tEYbTau6HckOhMZ7I3BR3hBRwyH+Q6MUFjHuxSiyCc5cIVJLi8JHhQRdAX7jhIOmBotLfigLvNspQ/M2m6aem4ljvIjpIOMxeJQn3ya+bTaXySXP5jMHiTVgzROuusqOiRJNMMzGMPiCMQOIedXemi7Biqqyo1srm2afqGdiTgXc/STgJFkcIk/r1uzntWrryWQLACiDcgZPnhOI3h7yKYxRNoLbW9bpEp+kWLRUob7kUwWdH9ZZTSOMZQ+lcvmbZRs9ZouWpwyOmumVUhucpwEIuhg8ttWKDp3TrcKanG+Yh2hc2apvEo3/wC04q6jK/spWLdvMSLyucNDg4Yvmqg6CoFHeWbKhwh/4aMNOIhvdqWHks8OihV7BHSVKUNAj9Eu8LhIvEbyhNdjau0sZ0yt1LHIlSIRN7ORIP65jb6DcemaMIlhm1Yvf04qNiC0kYOBJLWyoZkdukuFU4caSPzH3V2bVU3dik3kjmqQFVAoqM3hS5qs3GXgqk+ov7wQctY2XuOIZiyqSnZjzkMYnSRWIP8AEoxbytpZcOjaeqZgOTaYtSq9j40VA8FRIeUhwEo6x65QZNXLhdQCIIpHVUHxEIGkYf5BE7mU3ulcR+9LmeZVJOvsS+IzxUCJF5iAIBFG0xLaMpeQyCXJAmyljNJqnxCIJhkY4/eOOZh3eO2gUUFqTrdqgBTLGGUvjBxiUBVbn6RYwH1io4k9a0ourmDJdGZtS/cdfZq/OQB1l6JkpLLS3Ldp7x0qcmGhyCZESxhllqcyvrbdA4eCk+Ucfxat1FC9GA3eLyWJv7C1aqcu+yXYOk/WK5IT64wRv1Gl5HjcDZEd0+8Ib/aUSUDWYgdi90OSnXvQjCjt/oH133U1dRiuLlh/uF7Fp1tKMF+29v7kmP0azEDsXuhyU696EYUdv9A+u+6mrqMVxcsP9wvYtOtpRgv23t/ckx+jWYgdi90OSnXvQjCjt/oH133U1dRiuLlh/uF7Fp1tKMF+29v7kmP0azEDsXuhyU696EYUdv8AQPrvupq6jFcXLD/cL2LTraUYL9t7f3JMfo1mIJVJCytzhVVITSkDsgaY5ZmOTIpecYw4T+SUxemi5rOpmgwljc7vszlwcCJE02qhA0hguIOypS7UKf8AjCx3wllvShT/AMYWO+Est6UKf+MLHfCWW9KFP/GFjvhLLelCn/jCx3wllvShT/xhY74Sy3pQp/4wsYj7yWuqiy9bymT15J38ycotgQbNnJTqH0HKZxApYwZrIpXvZAoqUgqSeYEJmOWkYQJvBrMSN151cm4k8bHeKBIJO+WZS5oA5JB2uYUzrmLxqKGCAlExEAEG/wAwR3HmXkPmLHceZeQ+Ysdx5l5D5ix3HmXkPmLHceZeQ+Ysdx5l5D5ix3HmXkPmLHceZeb/ADFhRu9lyqChgOkoBgOmcpsjFMXgEpi74CEYT7qza5duFSTpyLicyV2DBdwffM5SEgHRVP8Afy3jaoYq79sKp98vusH1VRf3TX1jRgH/AGeuP70Zf8BtUMXGlUxkNe1kxmTRRq7SnD0TJqhojkdYximDxlMA5gMdvOPPT/iDAPHXnSv9YwL10HC7UDnOMdvOPPT/AIgx28489P8AiDHbzjz0/wCIMdvOPPT/AIgx24786V/rGBfOQ4XigD64wo5OrkCjgT5cGkbOMB8qmTSjq2frslUmb6aoA1VOUSlWBBHI4k1a8vZLmAy7VFU+WWZ0ynEA5zAMXnuRRdnKVPNX8taOH64mSlrAqaZTu1w6KZOE54duq1vJXgGBuaY1FOXIESQQIBCF8RCF4E0Ui/yDfGLGWBp20lMggsk3fz94Up5k/MmBgMbiRR0uBEkBJZXxy5rl7FP8oCSyvjlzXL2Kf5QEllfHLmuXsU/yhan5K5RWQWlDNRFQgpqEOgmJTEMGQgYMt8BAYxLYdXNqpmpPpCgorRzxb1zSxU/AioPkh/yzxhav/L5G4Y0PWQNzSpY4IyqYrkIIsznHebrG8iYf1DfuQSTSs4ZjLWoB7FP8oTTIkQpCEApChkAAGQAGsxjz99Nr3TdgssItZOxZtGxOIoKpAucecxjxhGtJT9JUDJ6rFIHE/qBiRwq5OH+Hbqb5G6XJxn3U4lMsn0sfyyYskXbF0iZBdBYukmomcMhKYB4hi/NuWFrrnT6nZe4UWlgERdNey76hEXRdIEzjxiTgziwFRP6ps1b2aPljKPFZURJZQeE5mxjIaY8pgJrcWG3+vOdj1RKMPexa1/JT7Po7vGVtzmXuiW9A0YWtgdt+Rkv1pXW4sNv9ec7HqiUYe9i1r+Sn2fR3eMrbnMvdEt6BowtbA7b8jJfrSutxYbf6852PVEow97FrX8lPs+ju8ZW3OZe6Jb0DRha2B235GS/Wldbiw2/15zseqJRh72LWv5KfZ9Hd4ytucy90S3oGjC1sDtvyMl+tK63Fht/rznY9USjD3sWtfyU+z6O7xlbc5l7olvQNGFrYHbfkZL9aV1uLDb/XnOx6olGHvYta/kp9n0d3jK25zL3RLegaMLWwO2/IyX60rrcYlAyILp0ZMkjuUnNSdiQfaJy5fYGBEpyZl3j6EUrTsspOnZJJZamYjCXM0Wjcpx0jAmiXRDMeMR4x3eN2iZISoqJqJLsycwmn9nusjBoGTbj4B/X8OLfUtKqKoympDKyqAwYMUk0xVNpnNpBpmMYeMxjGER3f/8QAPhEAAQIEAQQNCQkAAAAAAAAAAQIDAAQFESASE1SSBhAUFyExNUFxobGy0hUiMjRCUXJzohYkVWFjgZHR4f/aAAgBAgEBPwDbkKe7PuEJ81CfSV7oXM0mmHIaYzzo41cB6/6j7RX4FSSSn3ZX+QGKXVknMDMzAF7Wt1RMMOyzq2nE2UMc8vyXTmJZs2dcHnEde22tbS0rQohSTcERUcmoUxmcAAcRwK/mxxS4BmGAedxPbGyI/fGR+kO04JDhok+DxAr7oxS3rMv8xPbGyH1xr5Q7Tgp3ItQ6V90Ypb1mX+YntivsvOTbRQ0tQzQ4QCecxuaZ0dzVMbmmdHc1TG5pnR3NUxItuN0afC0KSbrNiLeyMWx5tBemHCm6kJFvyvG+JWtFk9VfijfErWjSeovxRviVrRpPUX4o3xK1o0nqL8UUDZpU6pVpOTfl5YNulQJQlQIskq51GKm2hqfmUoTZOUCB0i+Gm1Hyet05rLCwBa9uKJFctOoW4aYy00n2iEm9v2h2rU5Di0opja0g2CrJF+qPLEl+ENfT4YkZ2mzjuaVINNqPo3CSD1RNTzVOmMk0pAPGhaSBcasTcwZqYdeycnLPFx2sLYqitTdHkEoNkrSjKtz+bfbBIIINjFVUXaTT3Fm6yU3PSnHVeSaZ8KO5gqXItO6Ud046ryTTPhR3MFS5Fp3SjunHUnkrplMSAb5I+kWwT7yVUenJAN7j6BbB/8QAPhEAAQIDAwYHDgcAAAAAAAAAAgEDBAURACAhBhITMXGxFDVyk6Ky0wcIEBUYIjI0QUJTVXOSIzNRVqHS4f/aAAgBAwEBPwDwx0c1BN1XE19Ef1sMPM5j57rytNLqH/LeIaYjFkhcm2mmUrJNN+KxXXr/AJsw83ENC42VRW/Bh4yj3ohzFttfNTd4TAXAICGoqlFS0BnQMxehFWrZ4jvS8/gw9yC3WkPqjv1V3JcjcJzBbB3reiPyH+QW60h9Ud+qu5LkdxxA8kest6I9Xf5BbrSN1oIVxCcEV0q61p7EtwiH+OH3JbhEP8cPuS3CIf44fclowwObwKiaKlB1LX3lvTwz0cO2hUEzotk72HISiVm0755jsbeTDkH81nfPMdjbyYcg/ms755jsbeTDkH81nfPMdjbuj9wXJPJDIudzuAmU0OKgxZIBfcaJtc90W1qgtivvWlzhuwUORLUs3XsuzCA4cLaaXMUFrWlddo2PnMIYNpP41x1fdR1xKdKzYz8gFTygjAJUxHSmtOlbRz39xxnOOf2tGO5QQjWkGeRjgp6VHnEp0rNeMppCqhz6JcbLA23DMkqmOKKVoVjgzDbWdnZqa70AIuTaOIkqQkWbX2edTwqiKiotpYKNzOObHAEQsNhX5ZxnMdpda5Acbx+wusl+WcZzHaXWuQHG8fsLrJflzRDMZiSqlM5ektbkE0QzWPKqaustbn//2Q==",ix=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.c(t,e),t.simBehaviour=function(e,t){var n;e=t.ports[0].addInfo.sim_value!=t.ports[1].addInfo.sim_value&&"2"!=t.ports[1].addInfo.sim_value&&"2"!=t.ports[0].addInfo.sim_value,console.log("led sim behavur",e,t.id),console.log(t.ports[0].addInfo.sim_value,t.ports[1].addInfo.sim_value),n=e?" data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCACsAKwDAREAAhEBAxEB/8QAHwABAAIBBAMBAAAAAAAAAAAAAAkLCgEGBwgCAwUE/8QAUBAAAAYCAAIDBw4KCAYDAAAAAAECAwQFBgcIEQkSOQoWITGUtdETFBc2VVZhcXN3eJG31CJBcnaBlbGytLYVIzJSYpKW1SQ0NTc4RlGz0//EAB8BAQADAAIDAQEBAAAAAAAAAAAGBwgJCgEDBQIEC//EAF4RAAAFAgMCAw4ODwYEBwAAAAABAgMEBQYHERIIIRMxNgkUFxgiQVN0dZOztNLVIzI3UVJWV1hxlZaXsdQZOWFyc4GEkrK1trfR09YVFiQ0QmIlQ5HBJjNFdqHG8P/aAAwDAQACEQMRAD8Az+AAAAAAAAAAAAAAfByjKsawjHrrLsyyClxTFscrZdzkGSZHaQaSho6iAyqROtLi3s341fW10NhCnZU2ZIZjsNpNTjiSHsaZdfcbZYaceedWlttppCnHHFqPJKEIQRqUpR7iSkjMz4iHrddaYbW884hpptJrcccWltttCSzUta1mSUpSW9SjMiIhiZ8e3dSGvMDsLrXfAXgVduK6hLkQJG9dlNW9VqliSj1Rlx7CMLhvVWXbAYQZkuPdW9hhdA+40T1e3kNc6iQ5c1t4QypKG5VxSFQW1kSip8U0LmGncfo8hROMxjPiNCEPuZHkrglEZFUlwYqRoy3I1BjpmOoNSTmyScRFJRbvQmCNDrxFmZa1rZTqTmSHEGShi87+6WPpF+JiVPPaHFrttFNYKPr4Xru8PU2ENMeEm4iMb1u3jjc1ltJ+ppVdSbeW4XM35TzilLO3qbZlr0lJHEosHU2nqpMpvnx5JllqWp+WbpN+ueng0l1iIhVdRu+46o4lEirS83lmTUWM5zsT2o8kNNxo3Bm+ZH1JElDi1GeR6syHQ2anKb19dhZd8l3KeM1uz7FdvbynVKPmanJk1Up9w1GfMzW6Zmfh8Y9j112hT187yLmtiC4ndwD1do0VSTLrcEuYg0n9zSR/cEqpuC+NFwRyn0fCPFiuRXE60zabhxfFSjrQfVa0yY1DeaUkyPPUSzLL4ByHrzem/wDSFpHttV7i3Fqe2jLS5Hl4PsLNcOcQtBkaf6mpt4UZ0i5EZtPMOtKLwLbUnwD+lv8Au5cbR8CdDrzOXVHHXTaqjI/XUwqRlx8ZGR/d3743V6LfFiyEs3BR7vsuVq6lqvUmu2y6ai6yUVaLANR/7SI/g3CbLhL7pP6QPQM+rq9zW2O8Weu46mGZtZsiHDxfZTEBK0qdOk2liNXHcfnqSSuq7m2L5gTpn1Vvs8/VUwytYVW1UkrVAQ7RpR55LiqU9ENe/LhIb6zIklu3R3mMuPIfcpGJtfgKQU426rG3HpfSTcgm8t3By2yJRmo95rfRI3GeRGMzjo+elk4R+kYoVtahyuTi22KmtTYZdorYPrGm2VQsIJCJdpWRWJUmrzbFWZCvU++nEJtnCjJcjIvWKKdIRAKiblsyt2u5/jWSehrVpZqMbU5FcPjJCzMiXHeMv+S8lCjMj4M3ElqF029dtIuNs+c3uDkoSZuwn8kSEEXGpCczJ9riPhGjVpI08KhpSiSJNRExKAAAAAAAAAAAAAAAAAAAAAAAAAABtHPs9w3VuE5XsfYWSVOIYNg9Ba5TluUXspEKnoMfpIbs+1tbGUvwNRYcRlx1fVJTjhklpltx5xttfujRn5j7MWK0t+RIcQyyy2WpbjjiiShCS65moyL7nGeREZj0yJDERh2TJdQyww2t151w8kNttpNS1qPrEki/7FmZkQraOmB6ZHZ3SNZ9Z4Bgk28wHg9xO5V3ka6Nx2ustmyK6QfrPZG2mGVl6+ny1oTOxXB5K3qXCIi47j7E7LFTbVrVFj2JFteOiVJSiTXH0ZPyMiWmKSyyOLCPLNJFnodfTk5IVmRaWdKDzVel6yLieXGjrVHo7KjU20atHD6N/PEo88jPdrSgz4NhJFlmvW4uJvEtYzblDdjduO11e7ycZYSRFYTEK8JOcnCNMVlfPml1xK3XE/hNs9Q0uHRWMG1NRbLkS7cshiJc1yRlLjzai6tS7doshHUrYUqOtDlZnsKI0uxorzUKO4RtyJi3UuRi5aNiDmQF+Y8UyjYo4/VCtYTYVVNqPUqBbMKM0zidfVMeSTrFQbZqTD0axrcntGlyHVatCnVypxlpk02hswnY9UXzpVYzQ0iEprKuLHUkuRvqbJ6Uv4VynvVHjPnzP8FaE8z8CSLwDBV3Yn3/AH08ty6Lqq1RaWozTT0SVwaQyRn6RikwTjwUpItxGtl1wyLq3FnmZ9jfBTZH2bdniBHiYR4O2XbMxltKHbmk0tm4b1nKSW96feVwlUrgdeWrNayjzYsUlGfAxWUZIL73WV/eV/mP0iAcG32JrvaPJGkueZWRFz1KyLiIpL5EWXFkXCZFl1suIep5pqQhTchtuQ2rwKbfQh5tRH4yNDpLTy/QP64UuVTX0SqdJkU+S2ZKRJgPvQZCFFkZKS9FWy6kyy3GSx8iuUekXRT36Tc9JpdzUqS2pqRS7kpsGv019tZGSkPQKxHmxHEqIzIyWye4xxzkGr8ftkLdrkFSzuRmhUVJnBcV+InofPkgj/vxjbNPjNtzwJGlcPNqjEK0no8S5X13xQkmlDjNUdS3XozWe9UGuEjhH1pLelirImNry08PHz4QuKbad5j3sz41QqjWcKae1s+4iuIdfizbRiuycOqpMMjUhq4bAU8UensvK6lyoWa/RZMbUbx02paSjL4noL3ZGjc/xvNsMyTIMA2BhltHyHDc1xK0k1N1TWkNf/D21DcxDbeZX4DafbPm1Jjrer7OK/EfkRHOQ+zr2s/FS3FVSgSmqnTpCedalT5baW5tPkKRrVAq0BSlqjvkXVtqzWxIQRSIb7reThdYHH/Z1xl2TsSHLDxXt963q6wlVRt+uU99cy2rso6HjZauC0a822y1VKatZE2+g0R6lSpKjgVmBAmkbB2H/Qj9MlUdIXgz+nN1yKbG+L3W1E3OvY0JlmqpN0YfDNiG7svD61syYrbqBIeix9iYfEL1tTzpkO/oUJxy2KDRUnf9iuWxJKbAJx2iSnNLZqM1uQX1ZqKK8rjW2oiM4zx71pSptz0VGpz7NkXm3cUfnSWaG6tGQSnEp0oTLaLcchtO4kuJPLh20lpI1E40WhSkMz9itxPwAAAAAAAAAAAAAAAAAAAAAAABhR91E9IZZSL3Gejv1nePRaiDBodm8Sb1fJUg7abOUi01dq+eSCQr1jBjNM7IyOC4p1mbIlYGSyJESU07feEVsJJD1zy2yNZqciUolF6Qk9TLlo/3KMzitKLI0kUjj1JFI4qXGrU3bsVzJOSJFT0mXVai1Roqi4yIiykLIyPUamcjI0GQxPNY4aizc74bRonIMZ40V8d1PNEuW2f9ZIdSrwLjxVckoSZGl6TzJXNDLiF1VtS41SbXilh3asxcavVaGmRcVTjOGiRR6PLSZMU+K62etipVdrU468k0uw6ZpNo0vTmnGuWrmQWwTSsXasraexhobNUw4s6uOU7DC1KrGJ6m3ve9HdQqoXLV4j6TZqFrWVK4KPDguociVu7CWiWl6Db8uNM7Djjh9YiLIi3ERcRF6xDtKmZqM1KM1KUZqUpR5qUo+M1Ge8zP1zAB4AAAAAAHwsix6BklY7XTUkkz6zkWUSSN2HJ6vJD7Z+AzLxJeb5kl5rmg+SuopE/w2xFr+GNzxLjobqlpI0R6tSluKRErdLNZKep8ot6SWW92DK0m5BmEh9s9BvNu5t2qtl7Dna1wkrGFuIMVuO8pL9Rsu8WIyHq1YF2pjqbg3HSFmROOMGZIi3BR+ETFuCiqfgSU8OmDKh8P6X3BtPhS3rge5tXXK8a2jqDL4OS45PSpZw35MJSm5VTaMpUkrDGMqqH5lFf1zvNmzx+2mxnEc3Umnl8pVUt/Eaz4dVgr58oFy01L7RqIkvNpczJbTqSz4CfT5Ta2nkZ6mJcZRFmRFn0fcS8Or82e8Wrrw1vaCVHvjDq4pNGqrLZqciSFx9LsSpU95Wg5lEr1Mfi1WlydyZlKnx1ryUpaU2v/AAecTeE8Y/DRp7iU1/8A1OPbVw+DfOVLjyH5WM5Cyt2ry3ELBxCUEqwxLKIFvj8xfUQTzlf65Qn1J9szyjW6TIodWnUqTvdhvqbJeRkTzR5LZfSR/wCl5lSHUl1iVke8jF40eqMVmmQ6lH3Ny2UuacyUbbhZoeaMy3Gpp1K2zMtx6cy3GQ7LD5Q+mAAAAAAAAAAAAAAAAAAAAPj5DeVmM0N1kd3KbhU1BVWN3bzHeXqcWrqYb9hYyHOZkRIZhxn3FGZlyJJmP202t5xDTaTUtxaW0JLrrWokpL8ajIh+HHEtNrcWZJQhKlrUfESEJNSz/EkjP8QqD+I3dWS8VHEhuHfGQvOP3279qZPmqG3VLWUGBkdy4WMU7JHzNuJQ4ymkpIjJcksxK5ltJJSjwbM1QLOtdx6SaUU626I/LlrLIs2KZCcly1mZ8a3jadVn13HN28yzzBQaFXcUcQ6DatDbU9ceIF30e2KIyrNX/FLmrEaj0xGkiz4KO9NZUpOXUstKzMiIzLmOtgMVUCHWxi6rEGO3Gb/xE2XJThn+NTq+s6s/Ga1qM/CY4VLmuKoXbcNauequG5UK7UpVTkmZ5k2clepqOgt+lqJHJmIygtyGmEJIiIh38sKMMrawXw0sTCaz46I1t4d2vSbTpZISSTkopUcmplTfMt7kytVI5tanPKzW9NqEh1RmazMftHwxYAAAAAAAAAAA4J3FTpL+jL5pBEpajrJhkXLrdVKn4TiuXg6xIJ9kzPxpbaTz/BIhvfYxvV1abow+lOmpthCLpoqFKz4JLjrUCuR28+JCnV06cSC3E45KcyzWoz64nN38BYcd3CLaXo8NDMqovPYQX8803p57diw5lw4fVOUaSIlPoiMXNb5uuZqVGjUmOSso7SBmEdyccSE251zxOcKN1YLebwDJsZ3bgMR0ycUxSbDZk4tncOMpR9dqHEyjGKK4NhJG0U7KZr34K5CjVd+M1LS3LpNYbSRHJaegSTLdm5GMno6j6xqNl5xGeeZpZSXWHCRhJUlORKlSnFGZR3W5kcjPUeh8jakJT10oQ42yrTxanVHnvyGYMKRFxAAAAAAAAAAAAAAAAAAAADo50meXy8E6PHjcyqvWbU6q4Wd4qhupPktmVM17e1rLyD8aVsrmk4hRHzSpJGXh5CQWowmRc9vsq9KusU/UR9dKZTSjL8ZJyHwrneUxbtcdT6ZFKn6T9ZSoziCMj9fNW4VSeu4qF5hj0cyLqR3zUkj8JF6yhvONfUplHL4hc+0TOcp+CuIDzSjQuRSo9OzTuMkVSrU+C98BGw+6g/vvxCcczBt+Lcm3rs1QpraHmKfelTuc0OFqI5Fp2dc1wwVZHxqbqFPiup4zJSCMt5EO2xeIviHECfGfwmO7oksiIj4yIi/+BqPA8gAAAAAAAAADYOzWUvYZaKMvDHcgSEH/APCkzWWjMuf4zbeWn4jP9Gg9lyc5CxrtZtBmSajEuCmPER+mbfokySRGXXJL8Jlwi370luHGjzXm3o1d2BcYJL6Eqetas4aXXBWaSNTMmBftFpTi0H/pU5T67OjmZZZodUXEZiZLuXHLJtD0k+RUDDqkw844YNpVk5ojPquqoMt1nkkFai8Rmy5FkdQz8KfVl8uXWPnyI4vMpdtVlzLqmKtDWk/wrEto/u7yMv8AoOojhU4tu5HkkfUvUyS2pPrmh2O6k/W3cGZfj4xYiDMY0YAAAAAAAAAAAAAAAAAAAAI5+l07Mbju+i7t3+WJQk9l8rbd7rwvDJEcu/kvXu5krwZirS1z7d6f5Wd/ATBaW0z6iN7feUP9oqULf5k79sBwA7YxB/dfeY7WjiOHdUAAAAAAAAAAAAGyNj+0q8+SiecIgvPZq9W6w+26v+ztXHHtzVf7X9tF9xrK/ebZQlc7mT7Uej+j1vD97BxyT4sckT7pU76JA6dOGHKU+0pn0IFjmMujR4AAAAAAAAAAAAAAAAAAAAjn6XXsxuO76Lu3f5YlCT2Xytt3uvC8MkRy7+S9e7mSvBmKtLXPt3p/lZ38BMFpbTPqI3t95Q/2ipQt/mTv2wHADtjEH9195jtaOI4d1QAAAAAAAAAAAAbI2P7Srz5KJ5wiC89mr1brD7bq/wCztXHHtzVf7X9tF9xrK/ebZQlc7mT7Uej+j1vD97BxyT4sckT7pU76JA6dOGHKU+0pn0IFjmMujR4AAAAAAAAAAAAAAAAAAAAjn6XXsxuO76Lu3f5YlCT2Xytt3uvC8MkRy7+S9e7mSvBmKtLXPt3p/lZ38BMFpbTPqI3t95Q/2ipQt/mTv2wHADtjEH9195jtaOI4d1QAAAAAAAAAAAAbI2P7Srz5KJ5wiC89mr1brD7bq/7O1cce3NV/tf20X3Gsr95tlCVzuZPtR6P6PW8P3sHHJPixyRPulTvokDp04YcpT7SmfQgWOYy6NHgAAAAAAAAAAAAAAAAAAACOfpdezG47vou7d/liUJPZfK23e68LwyRHLv5L17uZK8GYq0tc+3en+VnfwEwWltM+oje33lD/AGipQt/mTv2wHADtjEH9195jtaOI4d1QAAAAAAAAAAAAbI2P7Srz5KJ5wiC89mr1brD7bq/7O1cce3NV/tf20X3Gsr95tlCVzuZPtR6P6PW8P3sHHJPixyRPulTvokDp04YcpT7SmfQgWOYy6NHgAAAAAAAAAAAAAAAAAAACNrpgrKurejE45nLGfCr25fDXs+riuTpTEREiytKF6HW17C5DjaHZ1hLdbiwYbZqkzJDiGIzTrqiQcpshC13bbxISpRpqsRZkkjUZJQ6SlKMiIzJKUkZqUe5JFmZkQjV4rQi167qUlJHTZKSNRkkjUpBpSkjPLNSlHkkuMz3FvFWtgs2JX5dVzJ0lmJFZcmG7IfV1GkEqFJbT1l8jIustaUl8JkLj2gKLV7hwiu6j0KmzKvVZiKQUSnQGTflyDZrlNfdJpojI18Gy046vI+pbQpXWE05mvftlYYba+Ct84i3VQ7Js2hv3sqs3Pck1NOotMKfh5dVNhHNmLSpLJSqhMiw2TNJ65EhpvcayMdke/PEvfJUeVJ9A4yugpi77m14/FDn8wdsjp+tiT31eB3y1j/Vw788S98lR5Wn0B0FMXfc1vH4oc/mB0/WxJ76vA75ax/q4d+eJe+So8rT6A6CmLvua3j8UOfzA6frYk99Xgd8tY/1cO/PEvfJUeVp9AdBTF33Nbx+KHP5gdP1sSe+rwO+Wsf6uHfniXvkqPK0+gOgpi77mt4/FDn8wOn62JPfV4HfLWP8AVw788S98lR5Wn0B0FMXfc1vH4oc/mB0/WxJ76vA75ax/q4d+eJe+So8rT6A6CmLvua3j8UOfzA6frYk99Xgd8tY/1cbQzzJ8dsMTuIcG7rZcp5uMTUdiQS3XDTNjOKJCSLwmlCFKP/CRmLhwCwtxIt/FyzazXLHuWk0qFJqa5dQn01bESMl2h1NhtTzprMkEt55tpO7etaU9cYh5o/tgbLGJmxTjpY2Hm0HhTel5V+lWm1RLZt26WKhWaq7DxBtOoym4MNLKFPKjwIcqY6RGWiPHdc3kgyEtncz9lX13SkYsmfOhwlWWiN11dcmXKYjKn2T6MOkMV0JLziFS5zzESU8zDjk5JcajvuIaUhl1Sd2YroWq0XNKVK0VCnqXpIzJCS4cjUrLPSkjMiNR7szIs95Dq64YrQm5iJS0pNcOYlBKURGtRpQZJSRmRqMyI9xbxZAEZGXMvCRjLY0iAAAAAAAAAAAAAAAAAANFHyLn+PwEXPxczMiLny/FzMuYAKwzpsekC2bxscZe1sam5LZo0JofYmWay01r2PKeaxpnvIt5mLX2xbCrQpMWyzPM7yts5ybqay/NqccXUY9Wuxo0WUczWtgW1DoFChvk2j+0ajFZlz5SsuELh0JfRGJw/wDy48dtSEqRmSFOE48v027L183DMrlakxiW4cKFJciwYzZKVrU2o2TdJtGZuvyXNWjSjhDSpDKSVpSQiqRrjNFoSsqVSSWlKyJyZBbWRKLmRKQuSSkK5GXWSoiUk+aVERkIK/tLYJMPPR13s0tbDrjK1MUavyGFLaWaFmy+1S1tPtaknoeaUptxOS21KQZKPbNO5lHt+1KBBqUfAGYwxPiRpzDNRvrDimVBpmWyh9pE2nTLsamQJSW3E8PDltNSozmpmQ008hbafL2Ns19xi8vr/vI9PTN4H+3MviC4/NI/t+xMc0F9wg/nIww/rEPY2zX3GLy+v+8h0zeB/tzL4guPzSH2JjmgvuEH85GGH9Yh7G2a+4xeX1/3kOmbwP8AbmXxBcfmkPsTHNBfcIP5yMMP6xD2Ns19xi8vr/vIdM3gf7cy+ILj80h9iY5oL7hB/ORhh/WIextmvuMXl9f95Dpm8D/bmXxBcfmkPsTHNBfcIP5yMMP6xD2Ns19xi8vr/vIdM3gf7cy+ILj80h9iY5oL7hB/ORhh/WIextmvuMXl9f8AeQ6ZvA/25l8QXH5pD7ExzQX3CD+cjDD+sQ9jbNfcYvL6/wC8h0zeB/t0L4guPzSPB8yX5oIe48B8y9Y8SMMD/wDuA+VNp8mw2dVWL6JtJYsSmrGms4E5UebCsK95t6PNrrOtkJlV1lBe9SkRZUWRGnRXSbfjOtrSlwp/ZmJNi4kNVL+6FcYrSabwLVSYOLNiPMImJd4BTkaoRozjkeQTTzaXUIcZUttxlZkstJ5tx62VNoTZalWw3jhh5PsVV2oqD9sTjq1BrtNqjlFXF/tOMxU7cqlVhtVCn8+QnpECS8xMTHlR5SGlx18IVkD3Pxx77B44eDCdE3Pdycp3Jw95qWqcqzGfyctc6xt+grsiwHLsgkJ6pSsmfppcvH8hnm0l65ssbcvpS3JttKUKPxKtuNb9eScBsmoNSj8+MsJ9JHdJ1bUllst+lolpS62nPJCXiaTkSCIfSw+uCRXaKfPpmuZBe51cdM81PtcGS2H1meajcNOppZqzUs2uEUalLNRztiuxPAAAAAAAAAAAAAAAAB4Of2S/Lb/+xIDwfF+MvpIU9nER/wCR++/n+3H9qmUja7HJ5juEn9VmMmMcsYP/ALqpf68iDn4z5eMj/wAp+gcF+pO7q08RZZrTxdbjMf6JSmXtSsmXvTH/AMpz1z/2jTmXw/UfoDUn2aPz0/xH54F7sL3enPJDmXw/UfoDUn2aPz0/xDgXuwvd6c8kOZfD9R+gNSfZo/PT/EOBe7C93pzyQ5l8P1H6A1J9mj89P8Q4F7sL3enPJDmXw/UfoDUn2aPz0/xDgXuwvd6c8kOZfD9R+gNSfZo/PT/EOBe7C93pzyQ5l8P1H6A1J9mj89P8Q4F7sL3enPJDmXw/UfoDUn2aPz0/xDgXuwvd6c8kcLbn/wCRoD/Ecqw+DxNRRuHYlMjreImRpMyo1ucRkf8A6lUvWzHX35vwhaLA2Y9aFozvrFH0yFJz/wDC1peyIs+v/wDjGYP3JB/2f41fnd1P9nlyNC40f56h9pTfGmxwJ4R/5KrdsQ/BSBl9ikhcAAAAAAAAAAAAAAAAA8F/2fiUgz+IlpMz/QRGYDwf/cvpIVDHGhgOZan4teJPB9i49Z4dlVTvbbMiVUXkZ2vkqhW2f5DcUtrCOQltE+nuqifBtqa3hKfr7Oulx5kKS804ShtigyI8+h0t+OtuRHcp0RGpJktJ6YzbbrayLPJSVEtt1tXVJMlJWRbyGQK21IgVyelwnI0lie46g81NuNrQ+brLzaupURkaUOsuoy/0ONq9KodfO+u4981j+u5H3ofC6GeHftAsz5LUT6iLi6azag98jjx6/qu375/HtTkl+pJKTf3Cknz6qk2s1SVcjMj6qifMj5GRkfIz5GRl4yMh46GmHPtBsv5L0T6iPPTV7UPvkcefndv7z+PFeT3rfL1TIrVvrc+r6pby0dbly59XrSC58uZc+XPlzLny5lzdDTDo+KwLLP4LWon1EOmr2oS49pHHn53b+8/jw767j3zWP67kfeh56GeHftAsz5LUT6iPHTWbUHvkcePnev7z+HfXce+ax/Xcj70HQzw79oFmfJaifUQ6azag98jjx871/efw767j3zWP67kfeg6GeHftAsz5LUT6iHTWbUHvkcePnev7z+HfXcH/AOzWP67kfeg6GeHXtAsz5LUT6iHTWbUHvkcePndv7z+Pd3xZD7u3P6znf/uPHQ0w59oNl/JeifUR56avah98hjz87t/efx61ZTdIM0ryOzQovGldxKQovARlzSqSRlzIyMuZeEjIy8BkPPQzw69oFmfJaifUR46azag98jjx87t/efx+KXdybAm0zrh6cTRqU0mXYqkk2aiIlG2TzyyQaiSRKNPIzIi5+Ih9mj2rbdvLfcoFuUSiOSkNtyXKRSINNXIbZUpbSH1Q47KnUNKWtTaXDUlClKNJEZmYg174u4q4mMU6NiPifiBiBGo70mTSY97XncN0sUuRNbaZmP05quVGc3CelssstSXY6W1vttNocUpKEkWdf3Jxr7Ncf4buKLP7zGreoxDYm5MNZwe9sYUiFCytGH4M/X5HNolyW2zs6utsrSPWOWsQna92yanQWJDkmvmNs0jjLJYcqtJjNuoW/GgvnIbQolKZN+SS2kuZGehSkINRIVkokmlRlkojE9wmjvIpdQkLbUlmRKYSytSTSTnAtOk4aMyLWlJuJTqTmnVqTnmlRFlkimRbQAAAAAAAAAAAAAAAAAA2/aYpjF2+iVc49R20ltsmW5FnT1tg+hklKWTSHpkV9xDRKUpRNpUSCUpRkkjMx7EPOtlpQ64hJnmaULUkjP18iMizHrWy04ZKW22oy3EakIUeXrZqSZ/9BGv0mHGxwy9GzoGXtXPMJw3JM+yZc+g0vqiJTUEW62TmkeKh9TBvFWuuVGIY82/Gsc3ylbLjNJWOsRYrcy/tqOrnym1Lfqt1VIocZ95qO1pcnzFLcU3FYMzLPLWWt90yNEdkjzcWRmZpbQ4tMYuet0y2qeqXIZZdfc1IhxCbbJcl4iI8s9BmhlvNKnncskJMkp1OLQk64DIb3id6SnizTKbqZe1eIXfWVRqqgxbFayLT08Fllk26zH8frWSRV4drvBKBhSnZs11MHH8er5t9kNlKmLsbGXqdpukWnRTLWmHTacya3HnlmtxRqPNbjqzzW/Jku8SUlqcdUltpCUkhKc2OLql0VjPQcmoT3UoQ00kkoQkiyS22kupZjsNlxmZJbQlS3FenWdid0VvRJ6a6OzRyKO1rca2XxAZ/FrbDde1J1NGnMTrCOk34mD4M1bRXJFPrnFH3nkVbSm49jktkcnKb9KZkqFXU+YLwvOddFQ4RK3otNjGtMCGlwyNKT3KkSNBkS5LxEWvLNDScmm80kpbmj7WtKFb0AmlIZkTniSqXKNBKzUW8mmdaTNLLZ8R5Ep1XoiyLqENyj+x3gPvJxH/TNF/t4iHPEjs73fV+UJRzsx2FrvTXkB7HeA+8nEf9M0X+3hzxI7O931flBzsx2FrvTXkB7HeA+8nEf9M0X+3hzxI7O931flBzsx2FrvTXkD8FpqfWF3WWNLca6wW1qLiBMqrWrscQx6ZX2VZYxnYdhXz4j9atiXCnRH3osuM8hTUiO6404lSFmQ/SJcttaXG5UhC0KStC0POJUhaTJSVJUSiNKkqIjSZHmRkRlvIflcOK4hSFx2FoWlSVoWy0pKkqI0qSojRvSojMjLrkZkK87pvOhnu+AXNpe+NEVFndcHmeXqWo7KDk2U/QGU28g/WuCZJLcN2TIwK0kr9b65yyctbkdZtYTkclVu1R2WS6aw/vtu42E02orQ3W47eZnuSmpNITvkNJIiIpKCIzlMJLIyzkNFwZuJaztfdluUF9VRgIW5R5DnFvUqA6szyZcPeamFn/AJd5XEfoLqjc0Kd7O9Ap0vOIaruMT4IuMNGMS9V3c+Lj2gtxZRUUzzur7qzmG3A1hnNvMhqcVrq7s5fqWH5JOeWrBrmWmjtn+9GfBk4v8jEiyXpaH7hohulLQk3ajBZUsiloSXVS46Eqy56bQRcM0kv8Q2XCILh0qJ76uH13sxlNUKsE0cYzJunzHEINUZSlHlGfUojM46lK9CcM/wDDqPSvNhWbOdF7HeAmXtJxH8Ze1mi+Iy/6f+gZ655kdne76vyhe3O0fsLXemvIG64sWNBjsxIcdmLFjtpZYjR2m2GGGkF1UNMstJQ002hJckNtoShJeBKSHqMzUZqUZqM95mZmZmfrmZ7zHuJKUkRJIkkW4iIsiIi4iIi3EX3C3D9A8DyAAAAAAAAAAAAAAAAAAB+DwgArdO6TduZTsTpRthYJb2Mh3GNGa71XgOGVilqKJXtZLh9XszJ5zUYj9SKZcXuXkibJIvVpMWmqWXVG3Cjpb1PhVBZi2jGkoQnhqhKmSX1EXVKNp9cRlJqPfpQhg9JcRGtZl6Y8804mznpN0SIq1GbVPjxGWk59T6KwiS4rTxajW8ojVxmkklnkkhkz9zw9HpqHh24Q9b8Vq4MfJ9/cUOvqvMbnM58dpx3C9e30hVjjutcP66TXWVpxGK+2zGa2aZmT5GaSmOnU0tFBh1Nibc02qVuXRyUbNNpMlbCI6TP0eS2Wh2U/1lq1GtDCfSstF1JEtbilWjh3bkKmUiNVMidqFTYJ5chRb2o61ZtxmeuhOSUreP0zjnGehCEpyJBWIsUAAAAAAAAbO2Dr/CtrYTlWt9jYxS5pgubUVljOWYrkUFmypb+it4y4lhWWUN8jQ9GksLNKuXVcaWSH2HGpDTTqPfGkvw5DMqK84xIjuIdZeaUaHG3EGSkrQouIyMvg6xkZZkPTIjsS2HY0lpDzD6FNutOJJSHEKLJSVJPjIy/GXGRkZEZVaXSz8F+I8B/HNtjh2wG4s7zW8evxTOMDVdvHIvanD9iVTlnFxW3n9Y12kvGJbVlSR7pw0y7eri11hPIrJ6YtevrKrz9x29DqcltCJRqejydGRNrfjLJBvITxIS8nS4aCLS2s1pTmjSMq3hRGqBXJMGMtSouTT8bWebiG3m0ucGs8sjNozNBKzzUREoyIzMhYfdELuLLd99Gnwc7Qzue9bZbcadqqS9t5Szdm3M/A7S31+q5nvK5rkWFuzizNjPkOGbkiZJfecM3HFGeY71gs026q5DjpJDKJy3G0J3JbTJQiTwaS6yUG8aEl1kkRZFkNGWhNdqFtUeU8o1uriJQtat6lnHccja1n11LJklKPrqMz64kgEWEkAAAAAAAAAAAAAAAAAAAAGh+I/iP9gAKx7ugntdeK38rS32E63GtMM+RVG/L/ANZSxlzETljV/gg+IRxnh9EF2YXAn9GTVnmFsZzvblbcXdaZ4UxoC0OTFD7nR/0RI+IuJGAAAAAAAAAAK3fuljtV85+ZHQ3ma/Gp8J+R0ft+f4RAzZifymX2pF8CgZh3QK9kbwV/mHmH2tbCFHYjcta92xH8Sii4rB5JUb8A/wCOyhL0ISJiAAAAAAAAAAAAAAAAAAAAND8R/Ef7AAVj3dBPa68Vv5WlvsJ1uNaYZ8iqN+X/AKyljLmInLGr/BB8QjjPD6ILswuBP6MmrPMLYzne3K24u60zwpjQFocmKH3Oj/oiR8RcSMAAAAAAAAAAVu/dLHar5z8yOhvM1+NT4T8jo/b8/wAIgZsxP5TL7Ui+BQMw7oFeyN4K/wAw8w+1rYQo7EblrXu2I/iUUXFYPJKjfgH/AB2UJehCRMQAAAAAAAAAAAAAAAAAAABofiP4j/YACse7oJ7XXit/K0t9hOtxrTDPkVRvy/8AWUsZcxE5Y1f4IPiEcZ4fRBdmFwJ/Rk1Z5hbGc725W3F3WmeFMaAtDkxQ+50f9ESPiLiRgAAAAAAAAACt37pY7VfOfmR0N5mvxqfCfkdH7fn+EQM2Yn8pl9qRfAoGYd0CvZG8Ff5h5h9rWwhR2I3LWvdsR/EoouKweSVG/AP+OyhL0ISJiAAAAAAAAAAAAAAAAAAAAND8R/Ef7AAVj3dBPa68Vv5WlvsJ1uNaYZ8iqN+X/rKWMuYicsav8EHxCOM8PoguzC4E/oyas8wtjOd7crbi7rTPCmNAWhyYofc6P+iJHxFxIwAAAAAAAAABW790sdqvnPzI6G8zX41PhPyOj9vz/CIGbMT+Uy+1IvgUDMO6BXsjeCv8w8w+1rYQo7EblrXu2I/iUUXFYPJKjfgH/HZQl6EJExAAAAAAAAAAAAAAAAAAAAGh+I/iP9gAKx7ugntdeK38rS32E63GtMM+RVG/L/1lLGXMROWNX+CD4hHGeH0QXZhcCf0ZNWeYWxnO9uVtxd1pnhTGgLQ5MUPudH/REj4i4kYAAAAAAAAAArd+6WO1Xzn5kdDeZr8anwn5HR+35/hEDNmJ/KZfakXwKBmHdAr2RvBX+YeYfa1sIUdiNy1r3bEfxKKLisHklRvwD/jsoS9CEiYgAAAAAAAAAAAAAAAAAAADQ/EfxH+wAFY93QV2uvFb+Vpb7CdbjWmGfIqjfl/6yljLmInLGr/BB8QjjPD6ILswuBP6MmrPMLYzne3K24u60zwpjQFocmKH3Oj/AKIkfEXEjAAAAAAAAAAFbv3Sx2q2cfMjofzNfjU+E/I6P2/P8IgZsxP5TL7Ui+BQMw7oFeyN4K/zDzD7WthCjsRuWte7Yj+JRRcVg8kqN+Af8dlCXoQkTEAAAAAAAAAAAAAAAAAAAAAAYMPdIfCLqtHHvw07Hr5OVVGScWJ45ie11V9lWHCM8OnUeC1OR47GnUk06vIlYy5Cr5rkl2yp5KqiulHTIlev3p2hMLK3NO3KtEVwS2qMTr0LUleoueEuSFtumThEtvhSUpJESVlrWWsy0kmiMSaRE/vBS5JcIlyqqbamZKSSVEwtDCFo6jUlZtaUqPUaT0pMkkeo1Zpej9P4Tw/ad1hpDW8KVX4HqfBMX1/iUWdKOdYIosWqY1TAcsZxttHNspDUb1zYzDaa9dTXpD5NNk4TaaGnzpFSnS6hKUSpM2Q7JfNJaU8I8s1qJCcz0oIzySnM8kkRZnkLsgw2KfCiwYyTSxEjtR2iUepWhpBISalbtSjIs1HkWajM8iHKY/kH9YAAAAAAAAAAwnO6kOF7WUXcvC/xDV39P1uwtxOo09nRxJ8NdJY0OFS47+OXTFfNrJbsXJ4MbKJ1YuWiYdVLr4ta3LpnpEU5Lt+YQVeWcKr0tXBqiwiOdHzSrhEuvkZOINSVkRtGbKVkWnWSlLMl5GRFSOKtMilLpM8iWl+YrnR7JRaDbZNGhRFpzJzS5pM9Rp0oRkkj1GrLT4QNDYBww8MekND6uYtGMG1vr2ipqRV3OTZXMw5LKrm0tbic3Hhx5Nrc3VnZW1i5EhQYfrua6mFBhxEsxmqXrVRk1erT6jLNByJUlxxzg06W05HoQhCTNSiQ2hCUIJSlK0pLUpSszO26PBYptMhQoxKJmPHbQjUZGo9RcItSjSlKdS3HFqVpSlOZ5JSksiHZAfLH0wAAAAAAAAAB/9k=":nx;try{t.shape={type:"Image",source:n}}catch(i){}},t.getObj=function(){var e;return{ports:this.ports,id:this.id,shape:this.shape,constraints:this.constraints,addInfo:(e={},e.name=t.name,e.type=Jh.Software,e)}},t.ports=[new ex(470/960,620/680,"2").toJSON(),new ex(560/960,620/680,"3").toJSON()],t.id="Led",t.shape={type:"Image",source:nx},t}(tx),rx=n("xXU7");!function(e){e.CONNECT="connect",e.DISCONNECT="disconnect",e.CONNECTION_ERROR="connect_error",e.SUCCESSFULL="successful",e.BIND_FAIL="bind_error",e.BIND_SUCCESS="bind_success",e.BIND_ERROR_CONNECT="bind_connect_error"}(JC||(JC={})),n("3tVA");var ox=function(){function e(e){this.sharedData=e}return e.prototype.resetBoard=function(e,t){this.socket.emit("reset",e,t)},e.prototype.sendToBoard=function(e){this.socket.emit("sendToBoard",e)},e.prototype.initSocket=function(){this.socket=td("http://localhost:3003")},e.prototype.close=function(){this.socket.close()},e.prototype.onMessage=function(){var e=this;return new ed.a(function(t){e.socket.on("message",function(e){return t.next(e)})})},e.prototype.onEvent=function(e){var t=this;return new ed.a(function(n){t.socket.on(e,function(e){return n.next(e)})})},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e(i.inject($h))},token:e,providedIn:"root"}),e}(),sx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.c(t,e),t.Toggle=function(e,t){void 0===t&&(t=!0),e.addInfo.sim_value||!t?(e.shape=this.shape_off,e.addInfo.sim_value=!1):(e.shape=this.shape_on,e.addInfo.sim_value=!0)},t.SimBehaviour=function(){throw new Error("Method not implemented.")},t.getObj=function(){var e;return{ports:this.ports,id:this.id,shape:this.shape_off,constraints:this.constraints,addInfo:(e={},e.name=t.name,e.type=Jh.Software,e.sim_value=!1,e)}},t.ports=[new ex(470/960,620/680,"2").toJSON(),new ex(560/960,620/680,"3").toJSON()],t.id="Switch",t.shape_on={type:"Image",source:" data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjAiIHk9IjAiIHdpZHRoPSIyOTcuOTA1IiBoZWlnaHQ9IjIzNC4zMzMiIHZpZXdCb3g9IjAsIDAsIDI5Ny45MDUsIDIzNC4zMzMiPgogIDxnIGlkPSJMYXllcl8xIj4KICAgIDxwYXRoIGQ9Ik0wLC0wIEwyOTcuOTA1LC0wIEwyOTcuOTA1LDIzNC4zMzMgTDAsMjM0LjMzMyBMMCwtMCB6IiBmaWxsPSIjRkZGRkZGIi8+CiAgICA8Zz4KICAgICAgPHBhdGggZD0iTTEyNi41NSwxMzUuNjE0IEMxMjYuNTUsMTQxLjU0OCAxMjEuNzQsMTQ2LjM1OCAxMTUuODA3LDE0Ni4zNTggQzEwOS44NzQsMTQ2LjM1OCAxMDUuMDY0LDE0MS41NDggMTA1LjA2NCwxMzUuNjE0IEMxMDUuMDY0LDEyOS42ODEgMTA5Ljg3NCwxMjQuODcxIDExNS44MDcsMTI0Ljg3MSBDMTIxLjc0LDEyNC44NzEgMTI2LjU1LDEyOS42ODEgMTI2LjU1LDEzNS42MTQgeiIgZmlsbD0iI0ZGRkZGRiIvPgogICAgICA8cGF0aCBkPSJNMTI2LjU1LDEzNS42MTQgQzEyNi41NSwxNDEuNTQ4IDEyMS43NCwxNDYuMzU4IDExNS44MDcsMTQ2LjM1OCBDMTA5Ljg3NCwxNDYuMzU4IDEwNS4wNjQsMTQxLjU0OCAxMDUuMDY0LDEzNS42MTQgQzEwNS4wNjQsMTI5LjY4MSAxMDkuODc0LDEyNC44NzEgMTE1LjgwNywxMjQuODcxIEMxMjEuNzQsMTI0Ljg3MSAxMjYuNTUsMTI5LjY4MSAxMjYuNTUsMTM1LjYxNCB6IiBmaWxsLW9wYWNpdHk9IjAiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8L2c+CiAgICA8Zz4KICAgICAgPHBhdGggZD0iTTE5My44NDEsMTM1LjYxNCBDMTkzLjg0MSwxNDEuNTQ4IDE4OS4wMzEsMTQ2LjM1OCAxODMuMDk4LDE0Ni4zNTggQzE3Ny4xNjUsMTQ2LjM1OCAxNzIuMzU1LDE0MS41NDggMTcyLjM1NSwxMzUuNjE0IEMxNzIuMzU1LDEyOS42ODEgMTc3LjE2NSwxMjQuODcxIDE4My4wOTgsMTI0Ljg3MSBDMTg5LjAzMSwxMjQuODcxIDE5My44NDEsMTI5LjY4MSAxOTMuODQxLDEzNS42MTQgeiIgZmlsbD0iI0ZGRkZGRiIvPgogICAgICA8cGF0aCBkPSJNMTkzLjg0MSwxMzUuNjE0IEMxOTMuODQxLDE0MS41NDggMTg5LjAzMSwxNDYuMzU4IDE4My4wOTgsMTQ2LjM1OCBDMTc3LjE2NSwxNDYuMzU4IDE3Mi4zNTUsMTQxLjU0OCAxNzIuMzU1LDEzNS42MTQgQzE3Mi4zNTUsMTI5LjY4MSAxNzcuMTY1LDEyNC44NzEgMTgzLjA5OCwxMjQuODcxIEMxODkuMDMxLDEyNC44NzEgMTkzLjg0MSwxMjkuNjgxIDE5My44NDEsMTM1LjYxNCB6IiBmaWxsLW9wYWNpdHk9IjAiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8L2c+CiAgICA8cGF0aCBkPSJNMTEwLjQzNSwxMjIuNDcxIEwxODguNDcsMTIyLjQ3MSIgZmlsbC1vcGFjaXR5PSIwIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iNiIvPgogICAgPHBhdGggZD0iTTEwNS4wNjQsMTM1LjYxNCBMNDguNTMxLDEzNS42MTQiIGZpbGwtb3BhY2l0eT0iMCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjMiLz4KICAgIDxwYXRoIGQ9Ik0yNTAuMzc0LDEzNS42MTQgTDE5My44NDEsMTM1LjYxNCIgZmlsbC1vcGFjaXR5PSIwIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMyIvPgogIDwvZz4KPC9zdmc+Cg=="},t.shape_off={type:"Image",source:" data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjAiIHk9IjAiIHdpZHRoPSIyOTcuOTA1IiBoZWlnaHQ9IjIzNC4zMzMiIHZpZXdCb3g9IjAsIDAsIDI5Ny45MDUsIDIzNC4zMzMiPgogIDxnIGlkPSJMYXllcl8xIj4KICAgIDxwYXRoIGQ9Ik0wLC0wIEwyOTcuOTA1LC0wIEwyOTcuOTA1LDIzNC4zMzMgTDAsMjM0LjMzMyBMMCwtMCB6IiBmaWxsPSIjRkZGRkZGIi8+CiAgICA8Zz4KICAgICAgPHBhdGggZD0iTTEyNi41NSwxMzUuNjE0IEMxMjYuNTUsMTQxLjU0OCAxMjEuNzQsMTQ2LjM1OCAxMTUuODA3LDE0Ni4zNTggQzEwOS44NzQsMTQ2LjM1OCAxMDUuMDY0LDE0MS41NDggMTA1LjA2NCwxMzUuNjE0IEMxMDUuMDY0LDEyOS42ODEgMTA5Ljg3NCwxMjQuODcxIDExNS44MDcsMTI0Ljg3MSBDMTIxLjc0LDEyNC44NzEgMTI2LjU1LDEyOS42ODEgMTI2LjU1LDEzNS42MTQgeiIgZmlsbD0iI0ZGRkZGRiIvPgogICAgICA8cGF0aCBkPSJNMTI2LjU1LDEzNS42MTQgQzEyNi41NSwxNDEuNTQ4IDEyMS43NCwxNDYuMzU4IDExNS44MDcsMTQ2LjM1OCBDMTA5Ljg3NCwxNDYuMzU4IDEwNS4wNjQsMTQxLjU0OCAxMDUuMDY0LDEzNS42MTQgQzEwNS4wNjQsMTI5LjY4MSAxMDkuODc0LDEyNC44NzEgMTE1LjgwNywxMjQuODcxIEMxMjEuNzQsMTI0Ljg3MSAxMjYuNTUsMTI5LjY4MSAxMjYuNTUsMTM1LjYxNCB6IiBmaWxsLW9wYWNpdHk9IjAiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8L2c+CiAgICA8Zz4KICAgICAgPHBhdGggZD0iTTE5My44NDEsMTM1LjYxNCBDMTkzLjg0MSwxNDEuNTQ4IDE4OS4wMzEsMTQ2LjM1OCAxODMuMDk4LDE0Ni4zNTggQzE3Ny4xNjUsMTQ2LjM1OCAxNzIuMzU1LDE0MS41NDggMTcyLjM1NSwxMzUuNjE0IEMxNzIuMzU1LDEyOS42ODEgMTc3LjE2NSwxMjQuODcxIDE4My4wOTgsMTI0Ljg3MSBDMTg5LjAzMSwxMjQuODcxIDE5My44NDEsMTI5LjY4MSAxOTMuODQxLDEzNS42MTQgeiIgZmlsbD0iI0ZGRkZGRiIvPgogICAgICA8cGF0aCBkPSJNMTkzLjg0MSwxMzUuNjE0IEMxOTMuODQxLDE0MS41NDggMTg5LjAzMSwxNDYuMzU4IDE4My4wOTgsMTQ2LjM1OCBDMTc3LjE2NSwxNDYuMzU4IDE3Mi4zNTUsMTQxLjU0OCAxNzIuMzU1LDEzNS42MTQgQzE3Mi4zNTUsMTI5LjY4MSAxNzcuMTY1LDEyNC44NzEgMTgzLjA5OCwxMjQuODcxIEMxODkuMDMxLDEyNC44NzEgMTkzLjg0MSwxMjkuNjgxIDE5My44NDEsMTM1LjYxNCB6IiBmaWxsLW9wYWNpdHk9IjAiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8L2c+CiAgICA8cGF0aCBkPSJNMTA1LjA2MywxMjQuODcxIEwxNzIuMzU0LDg4Ljk3NiIgZmlsbC1vcGFjaXR5PSIwIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iNiIvPgogICAgPHBhdGggZD0iTTEwNS4wNjQsMTM1LjYxNCBMNDguNTMxLDEzNS42MTQiIGZpbGwtb3BhY2l0eT0iMCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjMiLz4KICAgIDxwYXRoIGQ9Ik0yNTAuMzc0LDEzNS42MTQgTDE5My44NDEsMTM1LjYxNCIgZmlsbC1vcGFjaXR5PSIwIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMyIvPgogIDwvZz4KPC9zdmc+Cg=="},t}(tx),ax=function(){function e(e,t,n,i,r,s,a,l){this.sharedData=e,this.utils=t,this.diagramService=n,this.designService=i,this.modalService=r,this.simComm=s,this.LocalCommService=a,this.configSamService=l,this.boards_code={},this.hide_fileupload=!0,this.hide_component_interacts_sim=!0,this.sim_mode=!1,this.selected_file="no code file selected",this.status="",this.parsed=!1,this.reserved=!1,this.configured=!1,this.validated=!1,this.error_validate=!1,this.error_parsed=!1,this.error_reserved=!1,this.error_config=!1,this.error_binded=!1,this.binded=!1,this.reserve_modal_id="reserve",this.hide_modal_close_btn=!0,this.prepared=!1,this.error_prepared=!1,this.error_send_connections=!1,this.send_connections=!1,this.simulate_modal_id="simulate",this.connected=!1,this.error_connected=!1,this.local_connected=!1,this.error_local_connected=!1,this.undo_id="undo",this.redo_id="redo",this.zoomin_id="zoomin",this.zoomout_id="zoomout",this.connector_id="connector",this.fileupload_id="fileupload",this.simulate_id="simulate",this.reserve_id="reserve",this.reset_id="reset",this.upload_firmware_id="upload_id",this.unsubscribe=new o.a,this.toggle_id="toggle_switch",this.reset_button_index=4,this.toggle_switch_index=5,this.upload_firmware_index=10,this.VCC_pins=[],this.GND_pins=[],this.diagram_before_sim=null}return e.prototype.ngOnInit=function(){var e=this;this.sharedData.currentMode.pipe(qC(this.sharedData.unsubscribe_sim)).subscribe(function(t){e.sim_mode=t,e.resetToolBar()})},e.prototype.resetToolBar=function(){this.sim_mode?(this.simToolbar.hideItem(this.toggle_switch_index,!0),this.simToolbar.hideItem(this.reset_button_index,!0)):this.designToolbar.hideItem(this.upload_firmware_index,!0)},e.prototype.fileInputChange=function(e){var t=e.target.files[0];this.boards_code[this.sharedData.diagram.selectedItems.nodes[0].id]=t,this.selected_file=t.name},e.prototype.setOneBoardActionButtonsVisibility=function(e){this.simToolbar.items.length>4&&this.simToolbar.hideItem(4,!e)},e.prototype.resetToolbarToNormal=function(){this.designToolbar.hideItem(10)},e.prototype.created=function(){this.resetToolBar()},e.prototype.boardSelected=function(e){var t=this.sharedData.diagram.selectedItems.nodes;1==t.length?this.sim_mode?t[0].addInfo.type==Jh.Hardware?(this.selected_board=t[0],this.simToolbar.hideItem(this.reset_button_index,!1)):t[0].addInfo.name==sx.name&&(this.simToolbar.hideItem(this.reset_button_index,!0),this.selected_board=t[0],this.simToolbar.hideItem(this.toggle_switch_index,!1)):this.designToolbar.hideItem(this.upload_firmware_index,t[0].addInfo.type!=Jh.Hardware):this.resetToolBar()},e.prototype.getBoardsCodeFiles=function(e,t){var n=this;e={};var i=0;this.sharedData.diagram.nodes.forEach(function(r){e[i]=n.boards_code[r.id],t[i]=r.id,i++})},e.prototype.resetComponents=function(){this.sharedData.diagram.nodes.forEach(function(e){e.addInfo.name==ix.name?e.shape=ix.shape:e.addInfo.name==sx.name?sx.Toggle(e,!1):e.addInfo.reserved=!1,e.addInfo.sim_value=!1,e.ports.forEach(function(e){var t="2";"VCC"==e.addInfo.pin_type?t="1":"GROUND"==e.addInfo.pin_type&&(t="0"),e.addInfo.sim_value=t})}),this.sharedData.diagram.dataBind()},e.prototype.setComponentsReserveConfigs=function(e){var t={},n=0,i={};this.sharedData.diagram.nodes.forEach(function(r,o){if(r.addInfo.type==Jh.Hardware){if(r.addInfo[Kh]in t){var s=r.addInfo[Kh];r.addInfo.reserved=!0,r.addInfo.connectedComponentId=e[t[s]].id,r.addInfo.IP=e[t[s]].IP,r.addInfo.port=e[t[s]].udp_port,r.annotations[0]={content:r.addInfo.IP},delete t[s]}else{for(var a=!1;n<e.length;n++){if(r.addInfo[Kh]==e[n].ComponentId){r.addInfo.reserved=!0,r.addInfo.connectedComponentId=e[n].id,r.addInfo.IP=e[n].IP,r.addInfo.port=e[n].udp_port,r.annotations[0]={content:r.addInfo.IP},a=!0,n++;break}t[e[o].ComponentId]=n}if(!a)throw Error("error in config")}i[r.addInfo.connectedComponentId]=o}}),this.sharedData.diagram.dataBind(),this.sharedData.connected_component_id_index=i,this.sharedData.nodeid_index={}},e.prototype.PrepareDiagramForOutput=function(){var e=this;this.switch_source_nodes={},this.sharedData.pin_inputs_bit_index={},this.sharedData.pin_inputs_bit_values={},this.VCC_pins=[],this.GND_pins=[],this.sharedData.diagram.connectors.forEach(function(t){var n=e.sharedData.nodeid_index[t.sourceID],i=e.sharedData.nodeid_index[t.targetID],r=e.sharedData.diagram.nodes[n].ports.findIndex(function(e){return e.id==t.sourcePortID}),o=e.sharedData.diagram.nodes[i].ports.findIndex(function(e){return e.id==t.targetPortID}),s=e.sharedData.diagram.nodes[i],a=e.sharedData.diagram.nodes[n];if(e.sharedData.setPinInputBit(n,r,i,o),"VCC"==a.ports[r].addInfo.pin_type&&e.VCC_pins.push([r,n,n,r]),"GROUND"==a.ports[r].addInfo.pin_type&&e.GND_pins.push([r,n,n,r]),s.addInfo.name==ix.name)e.sharedData.addOutputEvent(r,n,o,i).pipe(qC(e.unsubscribe)).subscribe(function(t){var n=e.sharedData.diagram.nodes[t.target_node_index];e.sharedData.changePortValue(t.value,t.target_port_index,t.target_node_index,t.source_node_index,t.source_port_index),ix.simBehaviour(n.ports[t.target_port_index].addInfo.sim_value,n),e.sharedData.diagram.dataBind()},function(e){});else if(s.addInfo.type==Jh.Hardware&&a.addInfo.type==Jh.Software)e.sharedData.addOutputEvent(r,n,o,i).pipe(qC(e.unsubscribe)).subscribe(function(t){e.boardSimBehaviour(t)},function(e){});else if(s.addInfo.name==sx.name){e.switch_source_nodes[i]=e.switch_source_nodes[i]||{},e.switch_source_nodes[i].sourceNodeIndex=n,e.switch_source_nodes[i].sourcePortIndex=r,e.switch_source_nodes[i].switchInputPortIndex=o;var l=Math.abs(1-o);e.sharedData.setPinInputBit(n,r,i,l)}}),this.setSwitchSimConfigs(),0!=this.VCC_pins.length&&Object(rx.a)(8e3).pipe(qC(this.unsubscribe),$d(0)).subscribe(function(){e.VCC_pins.forEach(function(t){e.sharedData.changePortValue(!0,t[0],t[1],t[2],t[3])})}),0!=this.GND_pins.length&&Object(rx.a)(8e3).pipe(qC(this.unsubscribe),$d(0)).subscribe(function(){e.GND_pins.forEach(function(t){e.sharedData.changePortValue(!1,t[0],t[1],t[2],t[3])})})},e.prototype.boardSimBehaviour=function(e){var t=this.sharedData.diagram.nodes[e.source_node_index].ports[e.source_port_index].addInfo.sim_value,n=this.sharedData.diagram.nodes[e.target_node_index],i=parseInt(n.ports[e.target_port_index].id);this.LocalCommService.sendToBoard({IP:n.addInfo.IP,port:n.addInfo.port,value:t,pin_id:i})},e.prototype.setSwitchSimConfigs=function(){var e=this;Object.keys(this.switch_source_nodes).forEach(function(t){var n=parseInt(t),i=e.switch_source_nodes[n],r=i.sourceNodeIndex,o=i.sourcePortIndex,s=Math.abs(1-i.switchInputPortIndex);e.sharedData.addOutputEvent(o,r,s,n).pipe(qC(e.unsubscribe)).subscribe(function(t){e.switchSimBehaviour(t)})})},e.prototype.getValueFromSource=function(e){},e.prototype.switchSimBehaviour=function(e,t){void 0===t&&(t=!1),(this.sharedData.diagram.nodes[e.target_node_index].addInfo.sim_value||t)&&(this.sharedData.changePortValue(!t&&this.sharedData.diagram.nodes[e.source_node_index].ports[e.source_port_index].addInfo.sim_value,e.target_port_index,e.target_node_index,e.source_node_index,e.source_port_index),this.sharedData.diagram.dataBind())},e.prototype.customClose=function(e){this.parsed=!1,this.reserved=!1,this.configured=!1,this.error_parsed=!1,this.error_reserved=!1,this.error_config=!1,this.hide_modal_close_btn=!0,this.binded=!1,this.error_binded=!1,this.prepared=!1,this.error_prepared=!1,this.error_send_connections=!1,this.send_connections=!1,this.connected=!1,this.error_connected=!1,this.local_connected=!1,this.error_local_connected=!1,this.modalService.close(e)},e.prototype.setConnectorSimValue=function(e,t,n){this.sharedData.diagram.getObject(t).ports.findIndex(function(e){return e.id==n}),0==e?(this.sharedData.diagram.connectors[0].style.strokeWidth=5,this.sharedData.diagram.connectors[0].style.strokeColor="#183853"):(this.sharedData.diagram.connectors[0].style.strokeWidth=5,this.sharedData.diagram.connectors[0].style.strokeColor="#31fd08")},e.prototype.setNodeIdIndex=function(){var e=this.sharedData.nodeid_index;this.sharedData.diagram.nodes.forEach(function(t,n){e[t.id]=n})},e.prototype.resetLeds=function(){},e.prototype.closeSimulationMode=function(){this.sharedData.changeMode(!1),this.unsubscribe.next(),this.simComm.close(),this.LocalCommService.close(),this.sharedData.diagram.loadDiagram(this.diagram_before_sim),this.sharedData.diagram.refresh()},e.prototype.isReservedBinded=function(){for(var e=0,t=this.sharedData.diagram.nodes;e<t.length;e++){var n=t[e];if(n.addInfo.type==Jh.Hardware&&0==n.addInfo.isBinded)return!0}return!0},e.prototype.toolbarClick=function(e){var t=this;switch(e.item.id){case this.undo_id:if(this.sharedData.diagram.historyManager.canUndo){this.sharedData.diagram.undo();break}break;case this.redo_id:if(this.sharedData.diagram.historyManager.canRedo){this.sharedData.diagram.redo();break}break;case this.zoomin_id:this.sharedData.diagram.zoom(2);break;case this.zoomout_id:this.sharedData.diagram.zoom(.5);break;case this.connector_id:this.sharedData.diagram.drawingObject=this.utils.getConnector(),this.sharedData.diagram.tool=In.DrawOnce;break;case this.simulate_id:this.sim_mode?this.closeSimulationMode():(this.modalService.open(this.simulate_modal_id),this.configSamService.getUserIP().subscribe(function(e){try{t.diagram_before_sim=t.sharedData.diagram.saveDiagram(),t.sharedData.ip=e.ip,t.sharedData.port=e.port,t.parsed=!0,t.designService.getReservedComponents(t.file_id).pipe(su(function(){t.hide_modal_close_btn=!1})).subscribe(function(e){t.reserved=!0;try{var n=t.utils.getDesignHWComponentsCount(t.sharedData.diagram),i=t.isReservedBinded();if(e.length!=n||!i)throw Error("re-reserve");t.setComponentsReserveConfigs(e),t.configured=!0,t.error_config=!1,t.setNodeIdIndex();try{t.validate(),t.validated=!0,t.error_validate=!1;var r=t.utils.getDesignConnections();t.designService.sendDesignConnections(r,t.file_id).subscribe(function(e){t.send_connections=!0,t.startSockets()},function(e){t.error_send_connections=!0,t.send_connections=!1})}catch(o){t.validated=!1,t.error_validate=!0}}catch(o){t.configured=!1,t.error_config=!0}},function(e){t.reserved=!1,t.error_reserved=!0})}catch(n){t.error_parsed=!0,t.hide_modal_close_btn=!1}},function(e){alert("please open tray application"),t.hide_modal_close_btn=!1}));break;case this.reserve_id:this.modalService.open(this.reserve_modal_id);var n=void 0;try{n=this.utils.getDesignComponents(this.sharedData.diagram),this.parsed=!0}catch(i){this.error_parsed=!0,this.hide_modal_close_btn=!1;break}this.designService.reserve(n,this.file_id).pipe(su(function(){t.hide_modal_close_btn=!1})).subscribe(function(e){t.reserved=!0;try{t.simComm.initSocket(t.file_id,"bind"),t.simComm.onEvent(JC.CONNECTION_ERROR).subscribe(function(){t.designService.unreserve(t.file_id).subscribe(function(e){t.designService.unreserve(t.file_id).subscribe(function(e){alert(e),t.simComm.close()},function(e){alert(e),t.simComm.close()})},function(e){}),t.simComm.close(),t.error_binded=!0,t.binded=!1}),t.simComm.onEvent(JC.BIND_SUCCESS).subscribe(function(){t.error_binded=!1,t.binded=!0;try{t.setComponentsReserveConfigs(e),t.configSamService.unBindAll().subscribe(function(e){"ok"!=e&&(t.simComm.close(),t.designService.unreserve(t.file_id).subscribe(function(e){alert(e)},function(e){alert(e)}))}),e.forEach(function(e){t.configSamService.sendBindIPPort(e.IP,e.usb_ip_port).subscribe(function(n){"ok"!=n?(t.sharedData.diagram.nodes[t.sharedData.nodeid_index[e.id]].addInfo.isBinded=!1,alert("can not bind to local port")):t.sharedData.diagram.nodes[t.sharedData.nodeid_index[e.id]].addInfo.isBinded=!0})}),t.configured=!0,t.error_config=!1}catch(i){t.configured=!1,t.error_config=!0}t.simComm.close()})}catch(i){}},function(e){t.reserved=!1,t.error_reserved=!0});break;case this.reset_id:this.LocalCommService.resetBoard(this.selected_board.addInfo.IP,this.selected_board.addInfo.port);break;case this.toggle_id:this.selected_board.addInfo.name==sx.name&&(sx.Toggle(this.selected_board),this.fireSwitchTogglesEvent(this.selected_board.addInfo.sim_value))}},e.prototype.validate=function(){for(var e={},t={},n=0,i=function(i){var o,s;if(t[i.sourceID]=t[i.sourceID]||{},t[i.sourceID][i.sourcePortID]=n,t[i.targetID]=t[i.targetID]||{},t[i.targetID][i.targetPortID]=n,n++,""==i.sourceID||""==i.targetID)throw Error("float wire");if(e[i.targetID]=e[i.targetID]||((o={})[i.targetPortID]=!1,o),e[i.sourceID]=e[i.sourceID]||((s={})[i.sourceID]=!0,s),"VCC"==r.sharedData.diagram.nodes[r.sharedData.nodeid_index[i.targetID]].ports.find(function(e){return e.id==i.targetPortID}).addInfo.pin_type)throw Error("VCC should be input pin")},r=this,o=0,s=this.sharedData.diagram.connectors;o<s.length;o++)i(s[o]);return!0},e.prototype.startSockets=function(){var e=this;this.LocalCommService.initSocket(),this.LocalCommService.onEvent(JC.CONNECT).subscribe(function(){e.local_connected=!0,e.error_local_connected=!1}),this.LocalCommService.onEvent(JC.CONNECTION_ERROR).subscribe(function(){e.local_connected=!1,e.error_local_connected=!0,e.closeSimulationMode()}),this.LocalCommService.onMessage().subscribe(function(t){t.forEach(function(t){var n=e.utils.globalPinId_boardid_portid[t[0]],i=n.component_index,r=n.port_index;r>-1&&e.sharedData.changePortValue(t[1],r,i,i,r)})}),this.LocalCommService.onEvent(JC.DISCONNECT).subscribe(function(){});try{this.PrepareDiagramForOutput(),this.sim_mode=!0,this.sharedData.changeMode(!0),this.sharedData.diagram.clearSelection(),this.prepared=!0,this.simComm.initSocket(this.file_id),this.simComm.onEvent(JC.SUCCESSFULL).subscribe(function(){e.connected=!0,e.error_connected=!1}),this.simComm.onEvent(JC.CONNECTION_ERROR).subscribe(function(t){e.error_connected=!0,e.connected=!1,e.closeSimulationMode()})}catch(t){this.error_prepared=!0,this.prepared=!1,this.simComm.close()}},e.prototype.fireSwitchTogglesEvent=function(e){var t=this.sharedData.nodeid_index[this.selected_board.id],n=this.switch_source_nodes[t],i=n.sourceNodeIndex,r=n.sourcePortIndex,o=Math.abs(1-n.switchInputPortIndex);this.switchSimBehaviour({source_node_index:i,target_node_index:t,target_port_index:o,value:!0,source_port_index:r},!e)},e}(),lx=i["\u0275crt"]({encapsulation:2,styles:[["#container{visibility:hidden}#loader{color:#008cff;height:40px;left:45%;position:absolute;top:45%;width:30%}@font-face{font-family:toolbar;src:url(data:application/x-font-ttf;charset=utf-8;base64,AAEAAAAKAIAAAwAgT1MvMv1tCfsAAAEoAAAAVmNtYXCnKKeOAAABrAAAAEhnbHlm5CeZPwAAAgwAAApsaGVhZBKvqTUAAADQAAAANmhoZWEIUQQMAAAArAAAACRobXR4LAAAAAAAAYAAAAAsbG9jYRGwFFwAAAH0AAAAGG1heHABGgFNAAABCAAAACBuYW1lQozdSwAADHgAAAIlcG9zdFKJfTQAAA6gAAAAlAABAAAEAAAAAFwEAAAAAAAD9AABAAAAAAAAAAAAAAAAAAAACwABAAAAAQAAtluoWF8PPPUACwQAAAAAANfOsiIAAAAA186yIgAAAAAD9AP0AAAACAACAAAAAAAAAAEAAAALAUEABQAAAAAAAgAAAAoACgAAAP8AAAAAAAAAAQQAAZAABQAAAokCzAAAAI8CiQLMAAAB6wAyAQgAAAIABQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUGZFZABApwCnCQQAAAAAXAQAAAAAAAABAAAAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAACAAAAAwAAABQAAwABAAAAFAAEADQAAAAEAAQAAQAApwn//wAApwD//wAAAAEABAAAAAEAAgADAAQABQAGAAcACAAJAAoAAAAAATwCsAMyA6wDugPQBGQE+gUkBTYABAAAAAAD8wMoAEAAgQDHARwAAAE7AR8ODw8vDjU/DgcdAR8OPw81Lw4PDjcfEA8OKwEvDj8SMycPEhUfEz8TNS8TIw8BAf8BDg4NDQ0LCwsJCAgFBQMCAQECAwUGBwgJCgsLDQ0NDg8PDg0NDQwLCgoIBwYEAwEBAwQFBgcICQoLCwwMDQ28AwQGCAoMDQ8RERITFBQVFRQUExIQEA4NDAoIBwUDAQMFBwgLDA0PEBESEhMUExcTExIREBAODQwKCQcGBOYODh0cHR0dHR8WFhYVFRUUFB0eHx8fISAiFhcWFhUWFhUbGBgXGRgYGSAfHh4dHR0cGBkYGRoaGxwUExQUExQTFBITEhJVFhYWFhYWFhcfHh4dHRwbGwYEAgEDAwQfICEhIiIkJBscGxsbGxsbIAwZGhkZGRogJSUkIyIiIRMFAwICAwUZGBcYGBkZGSIhICEgICEgHBUWFQKMAgQEBgcICQsLCw0NDQ4ODw4NDQ0LCwoJCAcGBQMCAQECBAQHBwkJCwwNDQ0ODw4ODQ0MDAsKCggIBgYEBAKBCwsUFBQTEhEQDgwLCQcFAwEBAwUGCQoLDQ8PERITExUVFBQTExIREA8NDAoJBgUDAQEDBQYICgsMDg8QERETE8sBAgYHCgwOEBMPEBASExQUFh8dGxkXFRMRCggIBgQEAgIEBQcJCgwQExQXGBkcHhoYFxUUExIRCwoJCAcGBQQDAgE4BQYHBwkKDAwTFBYYGRocHggIBwgGBwYFIyAeHBkYFRMNDAkIBgQDAQEBAwQGCAkLDxQXGBwdICMWBwcICAcIBx0YFxUVExISFBIQDQsIBwMCAgIAAAAFAAAAAAP0A9QAIAA+AIIAxgFAAAABDw8jLwY3HwYnMx8DBy8FPQE/DiUfBw8PLwc3Hwc/DzUvBjcXJx8EBy8GKwEPDhUfBgcvBz8SMyUHLwgjDxQVHwsPBB8HPwQfBzM/EjUvDD8DPQEvBg8CAo0BAgQEBgcICQoLDAwNDQ8ODAsLCwoLCQnFBgYFBAMCAY0BEREQD74EAwMCAgEBAwQFBgcICQoKDAwMDQ0BFBYWFhUVFRQUHR4fHx8gISIXFhcWFxYWFhUVFBUVFRYVJw4PDxAQERISFRQUExEREA4NDAoIBwUDAQMDBQcICQsyGswPDh4dHSMNDA4NDg4PDhcTExIREBAODQwKCQcGBAIBAwMFBgcIORsaGhkZGRgZGBkYGhkaGxwUExQUExQTFBITEhIBe74UFBQUFBQUFBwdHB0WFhYWFhYWFx8fHR4cHBwbBQQCAQMDBBoaGhsbHBwc2gQDAQEBAQMEBQUGBgYGBQXoDRwbGxsbGhsaGhkaGRoaGiAlJSQjIiIhFAQDAgIDBRkYFxgYGRkZFRWvBAMCAgMEBQUGBgYGBQIQDw4ODQwMCgoJCAcGBQMCAQICAwQFBQfFCQoKCwoMC4EBAwUHvQgJCAkKCQkKDg0NDAsLCwkJBwcGBAMCBw8QERISFBUWHx0bGRcVEhELCAgGBAQBAQEBAwQFBwgJJwoKBwcFBAIBAQMFBwgKDA0OEBESEhQUFRISERAQEA8OMQ9GAgIFCAokCAYGBAQCAgMFBwgJCw0NDxAREhITFBAQEA8PDw4OOBARExQWFhkaGRgXFhQTEhALCgkIBwYFBQMCAdK/CQcHBQUEAwIBAwQFBQcICQoLDBQUFhcZGxweCAcIBwcGBgYcGxkYFxQUEtoFBgYFBgYGBQQDAQEBAgIE6AcLCwgGBQQBAQMFBgcJCxAUFhkbHiAjFQgHCAcIBwgdGBYWFBQSEQ4MsAQGBgYGBQYFBAMBAQECAgAAAAACAAAAAAO+A/QACwBtAAABFTMVIxUjNSM1MzUnDxEVHxk/BAE3AT8GNS8YDwoBxZ+faJ+fmQ0NDQsLCgkICAcGBgQEAwMBAQECAgQEBQUHBwkJCQsKCgoLFhcYGhkbGxscHBscGxoBCpP+8w8OCwkHBQMBBAYICg0OCQgODg4PEBARERISEhMTExMTHBwcGw4NDQ0MDQwDbqNkn59noDsLDAwNDQ4ODg8PEBAPERAQERARERAREBEQEBAPEA8ODgwLCgoSEQ4MCQgGAwEBAwYHC/6udAFUGBgZGhobGxwbGxsaGhkYDAwQDw0NDAsKCAgHBQUDAwEBAQQGCAUFBgcIBwkAAAIAAAAAA74D9AADAGUAAAEVITU3DxEVHxk/BAE3AT8GNS8YDwoCZ/5XBg0NDQsLCgkICAcGBgQEAwMBAQECAgQEBQUHBwkJCQsKCgoLFhcYGhkbGxscHBscGxoBCpP+8w8OCwkHBQMBBAYICg0OCQgODg4PEBARERISEhMTExMTHBwcGw4NDQ0MDQwCy2dn3gsMDA0NDg4ODw8QEA8REBAREBEREBEQERAQEA8QDw4ODAsKChIRDgwJCAYDAQEDBgcL/q50AVQYGBkaGhsbHBsbGxoaGRgMDBAPDQ0MCwoICAcFBQMDAQEBBAYIBQUGBwgHCQABAAAAAANhA/QAAgAANwkBngLE/TwMAfQB9AAAAgAAAAADxwP0AAMABwAAJSERIQEhESECaQFe/qL90AFe/qIMA+j8GAPoAAABAAAAAAP0AxUAgAAAAQ8HJwMhJz8XHx8PBzM/Ay8eKwEPDQEQDg0MDAsKCQiKIQGhkAUHCAkLDQ4PCwsLDA0MDg0NDg4PDg8PDw8PDg8ODg4ODQ0NDAwMCwsKCgkICAgGBgUFBAMCAgEBAQECAwMFBQaOBwYDAQEBAwMFBgYICAoKDAwNDg8QEBEREhITExQUFBUVFRYVFhUWFBUVFBMTExMSEREQApYOEA8REBESEpr+U6EVFBQUExESEAoKCQgICAYGBQUEAwICAQEBAQICAwQFBQYGCAgICQoKCwsMDAwNDQ0ODg4ODw8ODxAQDxAPDg8OHR4fHxUWFRUVFBQUExMSEhEREBAPDg0NCwoKCAgHBQUDAwICAwMFBQcICAoKCw0NDgAAAAIAAAAAA/QDFQACAIMAADc5AQMPDx8DMy8HPx8fFwchAwcvFisBDw2rIA8ODQwMCgoICAYGBQMDAQEBAwYIjQgFBAMDAQEBAQEBAwMEBQUGBggICAkKCgsLDAwMDQ0NDg4ODg8PDg8PDw8ODw4ODQ4NDA0MCwwLDw0NCwkIBwWQAaEhiggJCgsMDA0OEBARERITEhQTFBUUFRYVFhUWFRUVFBQUExMSEhEREOsBqxAQERESEhMTFBQUFRUVFhUfHx4dFA4ODg8ODw8PDg8PDg4ODg0NDQwMDAsLCgoJCAgIBgYFBQQDAgIBAQEBAgIDBAUFBgYICAgJCgoQEhETFBQUFaEBrZoSEhEQEQ8QDg8ODQ0LCgoICAcFBQMDAgIDAwUGBggICgoMDA0OAAUAAAAAA98D9AADAAYADQARABQAAAEXNycxASETETcRNwEjNxczJzkCAqGeJKABHP2HKuAx/nv7xzRKWwIsliWYAUv+Vf4ZUgGVOQFyMTFWAAAAAAEAAAAAA8gD9AAFAAABETcRASEBqLABcPxwAh/97aIBcQHVAAAAEgDeAAEAAAAAAAAAAQAAAAEAAAAAAAEABwABAAEAAAAAAAIABwAIAAEAAAAAAAMABwAPAAEAAAAAAAQABwAWAAEAAAAAAAUACwAdAAEAAAAAAAYABwAoAAEAAAAAAAoALAAvAAEAAAAAAAsAEgBbAAMAAQQJAAAAAgBtAAMAAQQJAAEADgBvAAMAAQQJAAIADgB9AAMAAQQJAAMADgCLAAMAAQQJAAQADgCZAAMAAQQJAAUAFgCnAAMAAQQJAAYADgC9AAMAAQQJAAoAWADLAAMAAQQJAAsAJAEjIHRvb2xiYXJSZWd1bGFydG9vbGJhcnRvb2xiYXJWZXJzaW9uIDEuMHRvb2xiYXJGb250IGdlbmVyYXRlZCB1c2luZyBTeW5jZnVzaW9uIE1ldHJvIFN0dWRpb3d3dy5zeW5jZnVzaW9uLmNvbQAgAHQAbwBvAGwAYgBhAHIAUgBlAGcAdQBsAGEAcgB0AG8AbwBsAGIAYQByAHQAbwBvAGwAYgBhAHIAVgBlAHIAcwBpAG8AbgAgADEALgAwAHQAbwBvAGwAYgBhAHIARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAdQBzAGkAbgBnACAAUwB5AG4AYwBmAHUAcwBpAG8AbgAgAE0AZQB0AHIAbwAgAFMAdAB1AGQAaQBvAHcAdwB3AC4AcwB5AG4AYwBmAHUAcwBpAG8AbgAuAGMAbwBtAAAAAAIAAAAAAAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwECAQMBBAEFAQYBBwEIAQkBCgELAQwACnNob3ctMDEtd2YIaGlkZTEtd2YHem9vbS1pbgh6b29tLW91dAptZWRpYS1wbGF5C21lZGlhLXBhdXNlBHVuZG8EcmVkbwtmaWx0ZXItbm9uZQZmaWx0ZXIAAA==) format('truetype');font-weight:400;font-style:normal}.e-toolbar.toggle .e-btn .e-icons{font-family:toolbar!important;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;text-transform:none}.e-hide-icon::before{content:'\\a701'}.e-show-icon::before{content:'\\a700'}.e-filter-icon::before{content:'\\a709'}.e-filternone-icon::before{content:'\\a708'}.e-undo-icon::before{content:'\\a706'}.e-redo-icon::before{content:'\\a707'}.e-play-icon::before{content:'\\a704'}.e-pause-icon::before{content:'\\a705'}.e-zoomin-icon::before{content:'\\a702'}.e-zoomout-icon::before{content:'\\a703'}.tb-icon{font-size:17px;color:#6b6b6b;margin-top:4px;margin-left:4px}.icon-Con__Orthogonal::before{content:'\\e61c'}#fileupload{opacity:0;position:absolute;z-index:-1}.button{font:bold 11px Arial;text-decoration:none;background-color:#eee;color:#333;padding:2px 6px;border-top:1px solid #ccc;border-right:1px solid #333;border-bottom:1px solid #333;border-left:1px solid #ccc;cursor:pointer}"]],data:{}});function cx(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{designToolbar:0}),i["\u0275qud"](402653184,2,{simToolbar:0}),i["\u0275qud"](402653184,3,{upload_button:0}),(e()(),i["\u0275eld"](3,0,null,null,66,"div",[["class","control-section e-tbar-section"]],null,null,null,null,null)),(e()(),i["\u0275eld"](4,0,null,null,65,"div",[["class","e-sample-container"],["style","  padding-bottom: 5px;  margin-right: 0px;"]],null,null,null,null,null)),(e()(),i["\u0275eld"](5,0,null,null,39,"div",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275eld"](6,16777216,null,null,38,"ejs-toolbar",[["class","toggle"]],null,[[null,"clicked"],[null,"created"]],function(e,t,n){var i=!0,r=e.component;return"clicked"===t&&(i=!1!==r.toolbarClick(n)&&i),"created"===t&&(i=!1!==r.created()&&i),i},Xb,Yb)),i["\u0275did"](7,6537216,[[1,4],["toolbar_design",4]],1,xb,[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector],null,{clicked:"clicked",created:"created"}),i["\u0275qud"](335544320,4,{childItems:0}),(e()(),i["\u0275eld"](9,0,null,null,35,"e-items",[],null,null,null,null,null)),i["\u0275did"](10,7421952,[[4,4]],1,bb,[],null,null),i["\u0275qud"](603979776,5,{children:1}),(e()(),i["\u0275eld"](12,16777216,null,null,2,"e-item",[["prefixIcon","e-undo-icon"],["tooltipText","Undo"]],null,null,null,null,null)),i["\u0275did"](13,11091968,[[5,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],prefixIcon:[1,"prefixIcon"],tooltipText:[2,"tooltipText"]},null),i["\u0275qud"](335544320,6,{template:0}),(e()(),i["\u0275eld"](15,16777216,null,null,2,"e-item",[["prefixIcon","e-redo-icon"],["tooltipText","Redo"]],null,null,null,null,null)),i["\u0275did"](16,11091968,[[5,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],prefixIcon:[1,"prefixIcon"],tooltipText:[2,"tooltipText"]},null),i["\u0275qud"](335544320,7,{template:0}),(e()(),i["\u0275eld"](18,16777216,null,null,2,"e-item",[["type","Separator"]],null,null,null,null,null)),i["\u0275did"](19,11091968,[[5,4]],1,vb,[i.ViewContainerRef],{type:[0,"type"]},null),i["\u0275qud"](335544320,8,{template:0}),(e()(),i["\u0275eld"](21,16777216,null,null,2,"e-item",[["prefixIcon","e-zoomin-icon"],["tooltipText","Zoom In"]],null,null,null,null,null)),i["\u0275did"](22,11091968,[[5,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],prefixIcon:[1,"prefixIcon"],tooltipText:[2,"tooltipText"]},null),i["\u0275qud"](335544320,9,{template:0}),(e()(),i["\u0275eld"](24,16777216,null,null,2,"e-item",[["prefixIcon","e-zoomout-icon"],["tooltipText","Zoom Out"]],null,null,null,null,null)),i["\u0275did"](25,11091968,[[5,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],prefixIcon:[1,"prefixIcon"],tooltipText:[2,"tooltipText"]},null),i["\u0275qud"](335544320,10,{template:0}),(e()(),i["\u0275eld"](27,16777216,null,null,2,"e-item",[["type","Separator"]],null,null,null,null,null)),i["\u0275did"](28,11091968,[[5,4]],1,vb,[i.ViewContainerRef],{type:[0,"type"]},null),i["\u0275qud"](335544320,11,{template:0}),(e()(),i["\u0275eld"](30,16777216,null,null,2,"e-item",[["prefixIcon","icon-Con__Orthogonal  tb-icon"],["tooltipText","Draw Connector"]],null,null,null,null,null)),i["\u0275did"](31,11091968,[[5,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],prefixIcon:[1,"prefixIcon"],tooltipText:[2,"tooltipText"]},null),i["\u0275qud"](335544320,12,{template:0}),(e()(),i["\u0275eld"](33,16777216,null,null,2,"e-item",[["type","Separator"]],null,null,null,null,null)),i["\u0275did"](34,11091968,[[5,4]],1,vb,[i.ViewContainerRef],{type:[0,"type"]},null),i["\u0275qud"](335544320,13,{template:0}),(e()(),i["\u0275eld"](36,16777216,null,null,2,"e-item",[["text","simulate"]],null,null,null,null,null)),i["\u0275did"](37,11091968,[[5,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],text:[1,"text"]},null),i["\u0275qud"](335544320,14,{template:0}),(e()(),i["\u0275eld"](39,16777216,null,null,2,"e-item",[["text","reserve"]],null,null,null,null,null)),i["\u0275did"](40,11091968,[[5,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],text:[1,"text"]},null),i["\u0275qud"](335544320,15,{template:0}),(e()(),i["\u0275eld"](42,16777216,[[3,0],["upload_id",1]],null,2,"e-item",[["text","upload board firmware"]],null,null,null,null,null)),i["\u0275did"](43,11091968,[[5,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],text:[1,"text"]},null),i["\u0275qud"](335544320,16,{template:0}),(e()(),i["\u0275eld"](45,0,null,null,24,"div",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275eld"](46,16777216,null,null,23,"ejs-toolbar",[["class","toggle"]],null,[[null,"clicked"]],function(e,t,n){var i=!0;return"clicked"===t&&(i=!1!==e.component.toolbarClick(n)&&i),i},Xb,Yb)),i["\u0275did"](47,6537216,[[2,4],["toolbar_sim",4]],1,xb,[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector],null,{clicked:"clicked"}),i["\u0275qud"](335544320,17,{childItems:0}),(e()(),i["\u0275eld"](49,0,null,null,20,"e-items",[],null,null,null,null,null)),i["\u0275did"](50,7421952,[[17,4]],1,bb,[],null,null),i["\u0275qud"](603979776,18,{children:1}),(e()(),i["\u0275eld"](52,16777216,null,null,2,"e-item",[["prefixIcon","e-zoomin-icon"],["tooltipText","Zoom In"]],null,null,null,null,null)),i["\u0275did"](53,11091968,[[18,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],prefixIcon:[1,"prefixIcon"],tooltipText:[2,"tooltipText"]},null),i["\u0275qud"](335544320,19,{template:0}),(e()(),i["\u0275eld"](55,16777216,null,null,2,"e-item",[["prefixIcon","e-zoomout-icon"],["tooltipText","Zoom Out"]],null,null,null,null,null)),i["\u0275did"](56,11091968,[[18,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],prefixIcon:[1,"prefixIcon"],tooltipText:[2,"tooltipText"]},null),i["\u0275qud"](335544320,20,{template:0}),(e()(),i["\u0275eld"](58,16777216,null,null,2,"e-item",[["type","Separator"]],null,null,null,null,null)),i["\u0275did"](59,11091968,[[18,4]],1,vb,[i.ViewContainerRef],{type:[0,"type"]},null),i["\u0275qud"](335544320,21,{template:0}),(e()(),i["\u0275eld"](61,16777216,null,null,2,"e-item",[["text","stop simulation"]],null,null,null,null,null)),i["\u0275did"](62,11091968,[[18,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],text:[1,"text"]},null),i["\u0275qud"](335544320,22,{template:0}),(e()(),i["\u0275eld"](64,16777216,null,null,2,"e-item",[["text","reset board"]],null,null,null,null,null)),i["\u0275did"](65,11091968,[[18,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],text:[1,"text"]},null),i["\u0275qud"](335544320,23,{template:0}),(e()(),i["\u0275eld"](67,16777216,null,null,2,"e-item",[["hidden","true"],["text","toggle switch"]],null,null,null,null,null)),i["\u0275did"](68,11091968,[[18,4]],1,vb,[i.ViewContainerRef],{id:[0,"id"],text:[1,"text"]},null),i["\u0275qud"](335544320,24,{template:0}),(e()(),i["\u0275eld"](70,0,null,null,34,"jw-modal",[],null,null,null,ow,rw)),i["\u0275did"](71,245760,null,0,iw,[nw,i.ElementRef],{id:[0,"id"]},null),(e()(),i["\u0275eld"](72,0,null,0,1,"h1",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["reserving components in the desgin"])),(e()(),i["\u0275eld"](74,0,null,0,28,"ul",[],null,null,null,null,null)),(e()(),i["\u0275eld"](75,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](76,0,null,null,1,"p",[["style","display:inline"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["parsing components in design"])),(e()(),i["\u0275eld"](78,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u2705"])),(e()(),i["\u0275eld"](80,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u274c"])),(e()(),i["\u0275eld"](82,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](83,0,null,null,1,"p",[["style","display:inline"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["reserveing components "])),(e()(),i["\u0275eld"](85,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u2705"])),(e()(),i["\u0275eld"](87,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u274c"])),(e()(),i["\u0275eld"](89,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](90,0,null,null,1,"p",[["style","display:inline"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["binding "])),(e()(),i["\u0275eld"](92,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u2705"])),(e()(),i["\u0275eld"](94,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u274c"])),(e()(),i["\u0275eld"](96,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](97,0,null,null,1,"p",[["style","display:inline"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["set configurations of components"])),(e()(),i["\u0275eld"](99,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u2705"])),(e()(),i["\u0275eld"](101,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u274c"])),(e()(),i["\u0275eld"](103,0,null,0,1,"button",[],[[8,"hidden",0]],[[null,"click"]],function(e,t,n){var i=!0,r=e.component;return"click"===t&&(i=!1!==r.customClose(r.reserve_modal_id)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,[" Close"])),(e()(),i["\u0275eld"](105,0,null,null,62,"jw-modal",[],null,null,null,ow,rw)),i["\u0275did"](106,245760,null,0,iw,[nw,i.ElementRef],{id:[0,"id"]},null),(e()(),i["\u0275eld"](107,0,null,0,1,"h1",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["pre simulate "])),(e()(),i["\u0275eld"](109,0,null,0,56,"ul",[],null,null,null,null,null)),(e()(),i["\u0275eld"](110,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](111,0,null,null,1,"p",[["style","display:inline"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["parsing components in design"])),(e()(),i["\u0275eld"](113,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u2705"])),(e()(),i["\u0275eld"](115,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u274c"])),(e()(),i["\u0275eld"](117,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](118,0,null,null,1,"p",[["style","display:inline"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["check reserving"])),(e()(),i["\u0275eld"](120,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u2705"])),(e()(),i["\u0275eld"](122,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u274c"])),(e()(),i["\u0275eld"](124,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](125,0,null,null,1,"p",[["style","display:inline"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["validate"])),(e()(),i["\u0275eld"](127,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u2705"])),(e()(),i["\u0275eld"](129,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u274c"])),(e()(),i["\u0275eld"](131,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](132,0,null,null,1,"p",[["style","display:inline"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["send connections"])),(e()(),i["\u0275eld"](134,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u2705"])),(e()(),i["\u0275eld"](136,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u274c"])),(e()(),i["\u0275eld"](138,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](139,0,null,null,1,"p",[["style","display:inline"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,[" open channel with server "])),(e()(),i["\u0275eld"](141,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u2705"])),(e()(),i["\u0275eld"](143,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u274c"])),(e()(),i["\u0275eld"](145,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](146,0,null,null,1,"p",[["style","display:inline"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,[" open channel with local server "])),(e()(),i["\u0275eld"](148,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u2705"])),(e()(),i["\u0275eld"](150,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u274c"])),(e()(),i["\u0275eld"](152,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](153,0,null,null,1,"p",[["style","display:inline"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,[" prepare design for simulation environemnt "])),(e()(),i["\u0275eld"](155,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u2705"])),(e()(),i["\u0275eld"](157,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u274c"])),(e()(),i["\u0275eld"](159,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),i["\u0275eld"](160,0,null,null,1,"p",[["style","display:inline"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,[" waiting for start flag from server "])),(e()(),i["\u0275eld"](162,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u2705"])),(e()(),i["\u0275eld"](164,0,null,null,1,"span",[["style","display:inline"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u274c"])),(e()(),i["\u0275eld"](166,0,null,0,1,"button",[],[[8,"hidden",0]],[[null,"click"]],function(e,t,n){var i=!0,r=e.component;return"click"===t&&(i=!1!==r.customClose(r.simulate_modal_id)&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,[" Close"]))],function(e,t){var n=t.component;e(t,7,0),e(t,10,0),e(t,13,0,n.undo_id,"e-undo-icon","Undo"),e(t,16,0,n.redo_id,"e-redo-icon","Redo"),e(t,19,0,"Separator"),e(t,22,0,n.zoomin_id,"e-zoomin-icon","Zoom In"),e(t,25,0,n.zoomout_id,"e-zoomout-icon","Zoom Out"),e(t,28,0,"Separator"),e(t,31,0,n.connector_id,"icon-Con__Orthogonal  tb-icon","Draw Connector"),e(t,34,0,"Separator"),e(t,37,0,n.simulate_id,"simulate"),e(t,40,0,n.reserve_id,"reserve"),e(t,43,0,n.upload_firmware_id,"upload board firmware"),e(t,47,0),e(t,50,0),e(t,53,0,n.zoomin_id,"e-zoomin-icon","Zoom In"),e(t,56,0,n.zoomout_id,"e-zoomout-icon","Zoom Out"),e(t,59,0,"Separator"),e(t,62,0,n.simulate_id,"stop simulation"),e(t,65,0,n.reset_id,"reset board"),e(t,68,0,n.toggle_id,"toggle switch"),e(t,71,0,i["\u0275inlineInterpolate"](1,"",n.reserve_modal_id,"")),e(t,106,0,i["\u0275inlineInterpolate"](1,"",n.simulate_modal_id,""))},function(e,t){var n=t.component;e(t,5,0,n.sim_mode),e(t,45,0,!n.sim_mode),e(t,78,0,!n.parsed),e(t,80,0,!n.error_parsed),e(t,85,0,!n.reserved),e(t,87,0,!n.error_reserved),e(t,92,0,!n.binded),e(t,94,0,!n.error_binded),e(t,99,0,!n.configured),e(t,101,0,!n.error_config),e(t,103,0,n.hide_modal_close_btn),e(t,113,0,!n.parsed),e(t,115,0,!n.error_parsed),e(t,120,0,!n.configured),e(t,122,0,!n.error_config),e(t,127,0,!n.validated),e(t,129,0,!n.error_validate),e(t,134,0,!n.send_connections),e(t,136,0,!n.error_send_connections),e(t,141,0,!n.connected),e(t,143,0,!n.error_connected),e(t,148,0,!n.local_connected),e(t,150,0,!n.error_local_connected),e(t,155,0,!n.prepared),e(t,157,0,!n.error_prepared),e(t,162,0,!n.prepared),e(t,164,0,!n.error_prepared),e(t,166,0,n.hide_modal_close_btn)})}var hx=function(){function e(e,t){this.sharedData=e,this.designService=t,this.sim_mode=!1,this.builtin_boards=[],this.user_boards=[],this.total_boards_count=0,this.added_count=0}return e.prototype.getSimulaionComponents=function(){return[ix.getObj(),sx.getObj()]},e.prototype.getConnectors=function(){return[{id:"Link1",type:"Orthogonal",sourcePoint:{x:0,y:0},targetPoint:{x:30,y:30},targetDecorator:{shape:"Arrow"},sourceDecorator:{shape:"Circle"}}]},e.prototype.ngOnInit=function(){var e=this;this.sharedData.currentMode.pipe(qC(this.sharedData.unsubscribe_sim)).subscribe(function(t){e.sim_mode=t,t?e.sidebar.allowDrag=!1:e.palettes&&(e.sidebar.allowDrag=!0)}),this.palettes=[{id:"boards",expanded:!0,title:"Boards",iconCss:"e-ddb-icons e-basic"},{id:"user-boards",expanded:!0,title:"User Boards"},{id:"connectors",expanded:!0,symbols:this.getConnectors(),title:"Connectors",iconCss:"e-ddb-icons e-connector"},{id:"Simulation-components",expanded:!0,symbols:this.getSimulaionComponents(),title:"Simulation Components",iconCss:"e-ddb-icons e-basic"}],this.designService.getSideBarItems().pipe(su(function(){e.sidebar.palettes=e.palettes})).subscribe(function(t){var n=t[1];e.builtin_boards=t[0],e.user_boards=n,e.setBoards()},function(e){console.log(e),alert("error in loading sidebar items")})},e.prototype.addBoardsToPallete=function(){this.sidebar.palettes[0].symbols=this.builtin_boards,this.sidebar.palettes[1].symbols=this.user_boards,this.sidebar.refresh()},e.prototype.setImage=function(e,t){var n=this;this.designService.getImage(e.addInfo[Kh]).subscribe(function(t){var r=new i.EventEmitter;r.pipe(Vd()).subscribe(function(){n.added_count+=1,n.added_count==n.total_boards_count&&n.addBoardsToPallete()});var o=new FileReader;o.onloadend=function(t){e.shape.source=t.target.result,r.emit()},o.readAsDataURL(t)},function(e){n.added_count+=1})},e.prototype.setBoards=function(){var e=this;this.total_boards_count=this.builtin_boards.length+this.user_boards.length,this.added_count=0,this.builtin_boards.forEach(function(t){e.setImage(t,0)}),this.user_boards.forEach(function(t){e.setImage(t,1)})},e.prototype.parseBoards=function(e){return e.forEach(function(e){e.constraints=Xh,e.ports.forEach(function(e){e.constraints=Qh,e.visibility=vn.Visible})}),e},e}(),dx=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ux(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{sidebar:0}),(e()(),i["\u0275eld"](1,16777216,null,null,2,"ejs-symbolpalette",[["enableSearch","true"],["expandMode","Multiple"],["height","100%"],["id","symbolpalette"],["style","border: solid 1px lavender;"],["width","100%"]],null,null,null,tw,ew)),i["\u0275did"](2,6537216,[[1,4],["sidebar",4]],1,Vh,[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector],{enableSearch:[0,"enableSearch"],expandMode:[1,"expandMode"],height:[2,"height"],symbolHeight:[3,"symbolHeight"],symbolWidth:[4,"symbolWidth"],width:[5,"width"]},null),i["\u0275qud"](335544320,2,{childPalettes:0})],function(e,t){e(t,2,0,"true","Multiple","100%",50,50,"100%")},null)}var px=function(e){function t(t,n,i,r,o,s){var a=e.call(this)||this;return a.sharedData=t,a.route=n,a.designService=i,a.approute=r,a.localSocketService=o,a.routingState=s,a.sim_mode=!1,a.connections={},a.title="SAM-interface",a}return s.c(t,e),t.prototype.ngOnInit=function(){var e=this;this.constraints=En.Default|En.Bridging,this.previousRoute=this.routingState.getPreviousUrl(),this.sharedData.diagram=this.diagram,this.contextMenuSettings={show:!0},this.setCommandManager(),this.file_id=+this.route.snapshot.paramMap.get("id"),this.sharedData.currentMode.pipe(qC(this.sharedData.unsubscribe_sim)).subscribe(function(t){e.sim_mode=t,e.setConstraints(t)})},t.prototype.canDeactivate=function(){return this.sharedData.saved_design},t.prototype.setCommandManager=function(){var e=this;this.diagram.commandManager={commands:[{name:"paste",canExecute:function(){return!e.sim_mode}},{name:"cut",canExecute:function(){return!e.sim_mode}},{name:"copy",canExecute:function(){return!e.sim_mode}},{name:"undo",canExecute:function(){return!e.sim_mode}},{name:"redo",canExecute:function(){return!e.sim_mode}}]}},t.prototype.ngOnDestroy=function(){},t.prototype.historyChange=function(e){},t.prototype.setSimContextMenu=function(){},t.prototype.contextClick=function(e){},t.prototype.doubleClick=function(e){},t.prototype.setConstraints=function(e){e?(this.diagram.nodes.forEach(function(e){e.constraints=Zh}),this.diagram.connectors.forEach(function(e){e.constraints=Yh})):(this.diagram.nodes.forEach(function(e){e.constraints=Xh}),this.diagram.connectors.forEach(function(e){e.constraints=Qh}))},t.prototype.loadDesignFile=function(){var e=this;this.designService.getDesignFileById(this.file_id).subscribe(function(t){try{null!=t?(console.log("file: ",t),e.diagram.loadDiagram(JSON.stringify(t)),console.log("HHHHHHHHHHHHHHHHHH"),e.diagram.nodes.forEach(function(e){e.addInfo.IP=null,e.addInfo.port=null,e.addInfo.sim_value=!1,e.addInfo.isBinded=!1,e.addInfo.reserved=!1,e.ports.forEach(function(e){var t="2";"GROUND"==e.addInfo.pin_type?t="0":"VCC"==e.addInfo.pin_type&&(t="1"),e.addInfo.sim_value=t})}),console.log("DDDDDDDDDDDDDDD"),e.diagram.refreshDiagram(),console.log("HHHHHHHHHHHHHHHHHH")):(e.diagram.reset(),e.diagram.dataBind())}catch(n){console.log(n),e.approute.navigate(["home"]),alert("error on loading design ,fie reseted")}},function(t){e.approute.navigate(["home"])})},t.prototype.diagramCreated=function(){this.loadDesignFile(),this.diagram.refreshDiagramLayer()},t.prototype.selectionChangeEvent=function(e){"Changed"==e.state&&this.toolBar.boardSelected(e)},t.prototype.getDesignConnections=function(){var e={};return this.diagram.connectors.forEach(function(t){""!=t.targetID&&""!=t.sourceID&&(t.sourceID in e||(e[t.sourceID]={},e[t.targetID]={}),e[t.sourceID][t.sourcePortID]={nodeId:t.targetID,portId:t.targetPortID,type:"I"},e[t.targetID][t.targetPortID]={nodeId:t.sourceID,portId:t.sourcePortID,type:"O"})}),e},t.prototype.connectorEvent=function(e){"Changed"==e.state&&(""==e.newValue.portId?"ConnectorSourceEnd"===e.connectorEnd?e.connector.sourceDecorator={shape:"Circle",style:{fill:"Black"}}:"ConnectorTargetEnd"===e.connectorEnd&&(e.connector.targetDecorator={shape:"Arrow",style:{fill:"Black"}}):"ConnectorSourceEnd"===e.connectorEnd?e.connector.sourceDecorator={shape:"Circle",style:{fill:"Green"}}:e.connector.targetDecorator={shape:"Arrow",style:{fill:"Green"}})},t}(Fw),fx=i["\u0275crt"]({encapsulation:0,styles:[[".main-wrapper[_ngcontent-%COMP%]{height:100vh}"]],data:{}});function gx(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{diagram:0}),i["\u0275qud"](402653184,2,{toolBar:0}),(e()(),i["\u0275eld"](2,0,null,null,3,"div",[["class","row "],["style","background-color:lightgray"]],null,null,null,null,null)),(e()(),i["\u0275eld"](3,0,null,null,2,"div",[["class","col-6"]],null,null,null,null,null)),(e()(),i["\u0275eld"](4,0,null,null,1,"app-menu-bar",[],null,null,null,KC,ZC)),i["\u0275did"](5,114688,null,0,XC,[$w.SimpleModalService,$h,mm,Fg],{file_id:[0,"file_id"]},null),(e()(),i["\u0275eld"](6,0,null,null,3,"div",[["class","row "],["style","background-color:lightgray"]],null,null,null,null,null)),(e()(),i["\u0275eld"](7,0,null,null,2,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),i["\u0275eld"](8,0,null,null,1,"app-tool-bar",[],null,null,null,cx,lx)),i["\u0275did"](9,114688,[[2,4]],0,ax,[$h,ym,$C,mm,nw,nd,ox,mC],{file_id:[0,"file_id"]},null),(e()(),i["\u0275eld"](10,0,null,null,9,"div",[["class","row nopadding"]],null,null,null,null,null)),(e()(),i["\u0275eld"](11,0,null,null,2,"div",[["class","col-3 nopadding"]],null,null,null,null,null)),(e()(),i["\u0275eld"](12,0,null,null,1,"app-side-bar",[],null,null,null,ux,dx)),i["\u0275did"](13,114688,null,0,hx,[$h,mm],null,null),(e()(),i["\u0275eld"](14,0,null,null,5,"div",[["class","col-9 w-80 nopadding main-wrapper"]],null,null,null,null,null)),(e()(),i["\u0275eld"](15,16777216,null,null,4,"ejs-diagram",[["height","600px"],["id","diagram"],["width","100%"]],null,[[null,"connectionChange"],[null,"selectionChange"],[null,"contextMenuClick"],[null,"created"],[null,"historyChange"],[null,"doubleClick"]],function(e,t,n){var i=!0,r=e.component;return"connectionChange"===t&&(i=!1!==r.connectorEvent(n)&&i),"selectionChange"===t&&(i=!1!==r.selectionChangeEvent(n)&&i),"contextMenuClick"===t&&(i=!1!==r.contextClick(n)&&i),"created"===t&&(i=!1!==r.diagramCreated()&&i),"historyChange"===t&&(i=!1!==r.historyChange(n)&&i),"doubleClick"===t&&(i=!1!==r.doubleClick(n)&&i),i},$b,Jb)),i["\u0275did"](16,6537216,[[1,4],["diagram",4]],3,Bh,[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector],{commandManager:[0,"commandManager"],constraints:[1,"constraints"],contextMenuSettings:[2,"contextMenuSettings"],height:[3,"height"],width:[4,"width"]},{connectionChange:"connectionChange",contextMenuClick:"contextMenuClick",created:"created",doubleClick:"doubleClick",historyChange:"historyChange",selectionChange:"selectionChange"}),i["\u0275qud"](335544320,3,{childLayers:0}),i["\u0275qud"](335544320,4,{childConnectors:0}),i["\u0275qud"](335544320,5,{childNodes:0}),(e()(),i["\u0275eld"](20,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),i["\u0275did"](21,212992,null,0,Wg,[Ug,i.ViewContainerRef,i.ComponentFactoryResolver,[8,null],i.ChangeDetectorRef],null,null)],function(e,t){var n=t.component;e(t,5,0,n.file_id),e(t,9,0,n.file_id),e(t,13,0),e(t,16,0,n.commandManager,n.constraints,n.contextMenuSettings,"600px","100%"),e(t,21,0)},null)}function mx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-design",[],null,[["window","beforeunload"]],function(e,t,n){var r=!0;return"window:beforeunload"===t&&(r=!1!==i["\u0275nov"](e,1).unloadNotification(n)&&r),r},gx,fx)),i["\u0275did"](1,245760,null,0,px,[$h,kf,mm,Fg,ox,um],null,null)],function(e,t){e(t,1,0)},null)}var yx=i["\u0275ccf"]("app-design",px,mx,{},{},[]),vx=n("CYgj"),bx=n("91uq"),wx=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Cx(e){return i["\u0275vid"](0,[(e()(),i["\u0275and"](0,null,null,0))],null,null)}function xx(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{viewContainer:0}),(e()(),i["\u0275and"](16777216,[[1,3],["viewContainer",2]],null,0,null,Cx))],null,null)}function Ax(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"simple-modal-holder",[],null,null,null,xx,wx)),i["\u0275did"](1,49152,null,0,vx.SimpleModalHolderComponent,[i.ComponentFactoryResolver,bx.DefaultSimpleModalOptionConfig],null,null)],null,null)}var Sx=i["\u0275ccf"]("simple-modal-holder",vx.SimpleModalHolderComponent,Ax,{},{},[]),Ox=n("DYXb"),Ex=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ix(e){return i["\u0275vid"](0,[(e()(),i["\u0275and"](0,null,null,0))],null,null)}function Dx(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{viewContainer:0}),i["\u0275qud"](402653184,2,{wrapper:0}),(e()(),i["\u0275eld"](2,0,[[2,0],["wrapper",1]],null,4,"div",[["role","dialog"]],null,null,null,null,null)),i["\u0275did"](3,278528,null,0,id.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngClass:[0,"ngClass"]},null),i["\u0275did"](4,278528,null,0,id.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),i["\u0275pod"](5,{display:0}),(e()(),i["\u0275and"](16777216,[[1,3],["viewContainer",2]],null,0,null,Ix))],function(e,t){e(t,3,0,t.component.modalClasses);var n=e(t,5,0,"block");e(t,4,0,n)},null)}function kx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"simple-modal-wrapper",[],null,null,null,Dx,Ex)),i["\u0275did"](1,180224,null,0,Ox.SimpleModalWrapperComponent,[i.ComponentFactoryResolver],null,null)],null,null)}var Px=i["\u0275ccf"]("simple-modal-wrapper",Ox.SimpleModalWrapperComponent,kx,{},{},[]);n("gI3B"),n("p0ib"),n("bne5"),n("W0Ae"),n("T1DM"),n("60iU"),n("S1nX");var Tx=function(){function e(){this.dismissible=!0,this.type="warning"}return e.ngInjectableDef=Object(i.defineInjectable)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Mx=function(){function e(e,t,n){this._renderer=t,this._element=n,this.close=new i.EventEmitter,this.dismissible=e.dismissible,this.type=e.type}return e.prototype.closeHandler=function(){this.close.emit(null)},e.prototype.ngOnChanges=function(e){var t=e.type;t&&!t.firstChange&&(this._renderer.removeClass(this._element.nativeElement,"alert-"+t.previousValue),this._renderer.addClass(this._element.nativeElement,"alert-"+t.currentValue))},e.prototype.ngOnInit=function(){this._renderer.addClass(this._element.nativeElement,"alert-"+this.type)},e}(),jx=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}();"undefined"!=typeof navigator&&navigator.userAgent&&navigator;var Rx=i["\u0275crt"]({encapsulation:2,styles:["ngb-alert{display:block}"],data:{}});function Lx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.closeHandler()&&i),i},null,null)),(e()(),i["\u0275eld"](1,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\xd7"]))],null,null)}function _x(e){return i["\u0275vid"](2,[(e()(),i["\u0275and"](16777216,null,null,1,null,Lx)),i["\u0275did"](1,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275ncd"](null,0)],function(e,t){e(t,1,0,t.component.dismissible)},null)}function Nx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"ngb-alert",[["class","alert"],["role","alert"]],[[2,"alert-dismissible",null]],null,null,_x,Rx)),i["\u0275did"](1,638976,null,0,Mx,[Tx,i.Renderer2,i.ElementRef],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,i["\u0275nov"](t,1).dismissible)})}var Bx=i["\u0275ccf"]("ngb-alert",Mx,Nx,{dismissible:"dismissible",type:"type"},{close:"close"},["*"]),Fx=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function zx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}function Hx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"a",[],[[8,"href",4],[8,"download",0]],null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.download()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Download"]))],null,function(e,t){var n=t.component;e(t,0,0,n.fileUrl,i["\u0275inlineInterpolate"](1,"",n.filename+".json",""))})}function Vx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.create()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Create File"]))],null,null)}function Ux(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,19,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,2,"div",[["class","modal-header"]],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,["",""])),(e()(),i["\u0275eld"](4,0,null,null,8,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),i["\u0275eld"](5,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),i["\u0275ted"](6,null,["",""])),(e()(),i["\u0275eld"](7,0,null,null,5,"input",[["class","form-control"],["name","name"],["placeholder","diagramfile"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==i["\u0275nov"](e,8)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==i["\u0275nov"](e,8).onTouched()&&r),"compositionstart"===t&&(r=!1!==i["\u0275nov"](e,8)._compositionStart()&&r),"compositionend"===t&&(r=!1!==i["\u0275nov"](e,8)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(o.filename=n)&&r),r},null,null)),i["\u0275did"](8,16384,null,0,Lm,[i.Renderer2,i.ElementRef,[2,Rm]],null,null),i["\u0275prd"](1024,null,Mm,function(e){return[e]},[Lm]),i["\u0275did"](10,671744,null,0,Py,[[8,null],[8,null],[8,null],[6,Mm]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,zm,null,[Py]),i["\u0275did"](12,16384,null,0,gy,[[4,zm]],null,null),(e()(),i["\u0275eld"](13,0,null,null,6,"div",[["class","modal-footer"]],null,null,null,null,null)),(e()(),i["\u0275eld"](14,0,null,null,1,"button",[["class","btn btn-outline-danger"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.myClose()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Cancel"])),(e()(),i["\u0275and"](16777216,null,null,1,null,zx)),i["\u0275did"](17,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"],ngIfThen:[1,"ngIfThen"],ngIfElse:[2,"ngIfElse"]},null),(e()(),i["\u0275and"](0,[["thenBlock",2]],null,0,null,Hx)),(e()(),i["\u0275and"](0,[["elseBlock",2]],null,0,null,Vx))],function(e,t){var n=t.component;e(t,10,0,"name",n.filename),e(t,17,0,n.isdownload,i["\u0275nov"](t,18),i["\u0275nov"](t,19))},function(e,t){var n=t.component;e(t,3,0,n.title),e(t,6,0,n.question),e(t,7,0,i["\u0275nov"](t,12).ngClassUntouched,i["\u0275nov"](t,12).ngClassTouched,i["\u0275nov"](t,12).ngClassPristine,i["\u0275nov"](t,12).ngClassDirty,i["\u0275nov"](t,12).ngClassValid,i["\u0275nov"](t,12).ngClassInvalid,i["\u0275nov"](t,12).ngClassPending)})}function Wx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-filename-dialog",[],null,[["document","keydown.escape"]],function(e,t,n){var r=!0;return"document:keydown.escape"===t&&(r=!1!==i["\u0275nov"](e,1).onKeydownHandler(n)&&r),r},Ux,Fx)),i["\u0275did"](1,180224,null,0,Kw,[lp],null,null)],null,null)}var Gx=i["\u0275ccf"]("app-filename-dialog",Kw,Wx,{},{},[]),qx=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Qx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"ngb-alert",[["class","alert"],["role","alert"]],[[2,"alert-dismissible",null]],null,null,_x,Rx)),i["\u0275did"](1,638976,null,0,Mx,[Tx,i.Renderer2,i.ElementRef],{dismissible:[0,"dismissible"],type:[1,"type"]},null),(e()(),i["\u0275eld"](2,0,null,0,1,"strong",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Error!"])),(e()(),i["\u0275ted"](-1,0,[" Please choose file or cancel loading "]))],function(e,t){e(t,1,0,!1,t.component.danger)},function(e,t){e(t,0,0,i["\u0275nov"](t,1).dismissible)})}function Yx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,14,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,2,"div",[["class","modal-header"]],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["load file"])),(e()(),i["\u0275eld"](4,0,null,null,5,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,Qx)),i["\u0275did"](6,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](7,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["select file from computer"])),(e()(),i["\u0275eld"](9,0,[["input",1]],null,0,"input",[["accept",".txt,.json"],["class","form-control"],["type","file"]],null,[[null,"change"]],function(e,t,n){var i=!0;return"change"===t&&(i=!1!==e.component.setFile(n)&&i),i},null,null)),(e()(),i["\u0275eld"](10,0,null,null,4,"div",[["class","modal-footer"]],null,null,null,null,null)),(e()(),i["\u0275eld"](11,0,null,null,1,"button",[["class","btn btn-outline-danger"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.close()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Cancel"])),(e()(),i["\u0275eld"](13,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.load()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Load"]))],function(e,t){e(t,6,0,t.component.isError)},null)}function Xx(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-load-file",[],null,[["document","keydown.escape"]],function(e,t,n){var r=!0;return"document:keydown.escape"===t&&(r=!1!==i["\u0275nov"](e,1).onKeydownHandler(n)&&r),r},Yx,qx)),i["\u0275did"](1,245760,null,0,GC,[],null,null)],function(e,t){e(t,1,0)},null)}var Zx=i["\u0275ccf"]("app-load-file",GC,Xx,{},{},[]),Kx=function(){function e(e){this.alertService=e}return e.prototype.ngOnInit=function(){var e=this;this.subscription=this.alertService.getMessage().subscribe(function(t){e.message=t})},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e}(),Jx=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function $x(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),i["\u0275did"](1,278528,null,0,id.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngClass:[0,"ngClass"]},null),i["\u0275pod"](2,{alert:0,"alert-success":1,"alert-danger":2}),(e()(),i["\u0275ted"](3,null,[" ",""]))],function(e,t){var n=t.component,i=e(t,2,0,n.message,"success"===n.message.type,"error"===n.message.type);e(t,1,0,i)},function(e,t){e(t,3,0,t.component.message.text)})}function eA(e){return i["\u0275vid"](0,[(e()(),i["\u0275and"](16777216,null,null,1,null,$x)),i["\u0275did"](1,16384,null,0,id.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,1,0,t.component.message)},null)}var tA=i["\u0275crt"]({encapsulation:0,styles:[[".logo[_ngcontent-%COMP%]{height:50px;width:10%}.menuitem[_ngcontent-%COMP%]{padding:0 2%}.menucontainer[_ngcontent-%COMP%]{background-color:#faebd7}.menubarLoginBtn[_ngcontent-%COMP%]{float:right}.btns[_ngcontent-%COMP%]{margin:1%}.accountbtns[_ngcontent-%COMP%]{float:right}"]],data:{}});function nA(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"alert",[],null,null,null,eA,Jx)),i["\u0275did"](1,245760,null,0,Kx,[pm],null,null),(e()(),i["\u0275eld"](2,0,null,null,17,"div",[["class","container-fluid menucontainer"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275eld"](3,0,null,null,16,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](4,0,null,null,15,"div",[["class","col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275eld"](5,0,null,null,1,"a",[["href","/"]],null,null,null,null,null)),(e()(),i["\u0275eld"](6,0,null,null,0,"img",[["class","logo"],["src","https://static.rfstat.com/renderforest/images/v2/logos/renderforest-logo2.jpg"]],null,null,null,null,null)),(e()(),i["\u0275eld"](7,0,null,null,12,"span",[["class","menu"]],null,null,null,null,null)),(e()(),i["\u0275eld"](8,0,null,null,1,"a",[["class","menuitem"],["href","/"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,[" Home"])),(e()(),i["\u0275eld"](10,0,null,null,1,"a",[["class","menuitem"],["href","/"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,[" About"])),(e()(),i["\u0275eld"](12,0,null,null,1,"a",[["class","menuitem"],["href","/"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,[" Support"])),(e()(),i["\u0275eld"](14,0,null,null,1,"a",[["class","btn btn-link accountbtns"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.ScrollToBottom()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Login"])),(e()(),i["\u0275eld"](16,0,null,null,3,"a",[["class","btn btn-link accountbtns "]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==i["\u0275nov"](e,17).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),i["\u0275did"](17,671744,null,0,zg,[Fg,kf,id.LocationStrategy],{routerLink:[0,"routerLink"]},null),i["\u0275pad"](18,1),(e()(),i["\u0275ted"](-1,null,["Register"])),(e()(),i["\u0275eld"](20,0,null,null,13,"div",[["class","container-fluid menucontainer"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["\u0275eld"](21,0,null,null,12,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](22,0,null,null,11,"div",[["class","col-sm-12"]],null,null,null,null,null)),(e()(),i["\u0275eld"](23,0,null,null,1,"a",[["href","/"]],null,null,null,null,null)),(e()(),i["\u0275eld"](24,0,null,null,0,"img",[["class","logo"],["src","https://static.rfstat.com/renderforest/images/v2/logos/renderforest-logo2.jpg"]],null,null,null,null,null)),(e()(),i["\u0275eld"](25,0,null,null,8,"span",[["class","menu"]],null,null,null,null,null)),(e()(),i["\u0275eld"](26,0,null,null,1,"a",[["class","menuitem"],["href","/"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,[" Home"])),(e()(),i["\u0275eld"](28,0,null,null,1,"a",[["class","menuitem"],["href","/"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,[" About"])),(e()(),i["\u0275eld"](30,0,null,null,1,"a",[["class","menuitem"],["href","/"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,[" Support"])),(e()(),i["\u0275eld"](32,0,null,null,1,"button",[["class","btn btn-primary accountbtns"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.logout()&&i),i},null,null)),(e()(),i["\u0275ted"](-1,null,["Logout"])),(e()(),i["\u0275eld"](34,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),i["\u0275did"](35,212992,null,0,Wg,[Ug,i.ViewContainerRef,i.ComponentFactoryResolver,[8,null],i.ChangeDetectorRef],null,null)],function(e,t){e(t,1,0);var n=e(t,18,0,"/register");e(t,17,0,n),e(t,35,0)},function(e,t){var n=t.component;e(t,2,0,n.logedin),e(t,16,0,i["\u0275nov"](t,17).target,i["\u0275nov"](t,17).href),e(t,20,0,!n.logedin)})}function iA(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-root",[],null,null,null,nA,tA)),i["\u0275did"](1,114688,null,0,vm,[nd,$h,Fg,fm,um,Fg],null,null)],function(e,t){e(t,1,0)},null)}var rA=i["\u0275ccf"]("app-root",vm,iA,{},{},[]),oA=function(){function e(){}return e.prototype.intercept=function(e,t){var n=JSON.parse(localStorage.getItem("currentUser"));return n&&n.token&&(e=e.clone({setHeaders:{Authorization:"Bearer "+n.token}})),t.handle(e)},e}(),sA=n("XlPw"),aA=function(){function e(e){this.authenticationService=e}return e.prototype.intercept=function(e,t){var n=this;return t.handle(e).pipe(_d(function(e){401===e.status&&(n.authenticationService.logout(),location.reload(!0));var t=e.error.message||e.statusText;return Object(sA.a)(t)}))},e}(),lA=function(){function e(e){this.router=e}return e.prototype.canActivate=function(e,t){return!!localStorage.getItem("currentUser")||(this.router.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1)},e}(),cA=function(){function e(){}return e.prototype.canDeactivate=function(e){return!!e.canDeactivate()||!!confirm("You have unsaved changes! If you leave, your changes will be lost.")},e}(),hA=n("DtyJ"),dA=function(){function e(){}return e.prototype.initSocket=function(e){var t=JSON.parse(localStorage.getItem("currentUser")).token;e.token=t,this.socket=td("http://localhost:3001",{query:e})},e.prototype.send=function(e){this.socket.emit("message",e)},e.prototype.close=function(){this.socket.close()},e.prototype.onMessage=function(){var e=this;return new hA.Observable(function(t){e.socket.on("message",function(e){return t.next(e)})})},e.prototype.onEvent=function(e){var t=this;return new hA.Observable(function(n){t.socket.on(e,function(e){return n.next(e)})})},e}(),uA=function(){return function(){}}(),pA=function(){function e(e){this.intl=new at,m(e)||(this.intl.culture=e)}return e.prototype.getFormatFunction=function(e){return e.type?this.intl.getDateFormat(e):this.intl.getNumberFormat(e)},e.prototype.getParserFunction=function(e){return e.type?this.intl.getDateParser(e):this.intl.getNumberParser(e)},e.prototype.fromView=function(e,t,n){return"date"!==n&&"datetime"!==n&&"number"!==n||m(t)?e:t(e)},e.prototype.toView=function(e,t){var n=e;return m(t)||m(e)||(n=t(e)),n},e.prototype.setCulture=function(e){m(e)||function(e){nt.notify("notifyExternalChange",{locale:ot=e})}(e)},e}(),fA=function(){function e(e){var t=this;this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.sortDirection="Descending",this.getEditTemplate=function(){return t.editTemplateFn},this.getFilterTemplate=function(){return t.filterTemplateFn},f(this,e),this.uid=KA("grid-column");var n=new pA;if(e.format&&(e.format.skeleton||e.format.format)&&(this.setFormatter(n.getFormatFunction(e.format)),this.setParser(n.getParserFunction(e.format))),this.toJSON=function(){for(var e={},n=["headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate"],i=Object.keys(t),r=0;r<i.length;r++)if("columns"===i[r]){e[i[r]]=[];for(var o=0;o<t[i[r]].length;o++)e[i[r]].push(t[i[r]][o].toJSON())}else n.indexOf(i[r])<0&&(e[i[r]]=t[i[r]]);return e},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(function(e){return e.allowResizing}))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=UA(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=UA(this.headerTemplate)),this.filter.itemTemplate&&(this.fltrTemplateFn=UA(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=UA(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=UA(this.filterTemplate)),this.isForeignColumn()&&(m(this.editType)||"dropdownedit"===this.editType)&&(this.editType="dropdownedit",this.edit.params=g({dataSource:this.dataSource,query:new Zc,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){var i=this.sortComparer;this.sortComparer=function(e,t){if("string"==typeof i&&(i=dS(i,window)),"Descending"===this.sortDirection){var n=e;e=t,t=n}return i(e,t)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(e,n){return e=dS(t.foreignKeyValue,aS(t,{},e)[0]),n=dS(t.foreignKeyValue,aS(t,{},n)[0]),"Descending"===t.sortDirection?Jc.fnDescending(e,n):Jc.fnAscending(e,n)})}return e.prototype.getSortDirection=function(){return this.sortDirection},e.prototype.setSortDirection=function(e){this.sortDirection=e},e.prototype.setProperties=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)this[t[n]]=e[t[n]]},e.prototype.isForeignColumn=function(){return!(!this.dataSource||!this.foreignKeyValue)},e.prototype.getFormatter=function(){return this.formatFn},e.prototype.setFormatter=function(e){this.formatFn=e},e.prototype.getParser=function(){return this.parserFn},e.prototype.setParser=function(e){this.parserFn=e},e.prototype.getColumnTemplate=function(){return this.templateFn},e.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},e.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},e.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},e}(),gA="actionBegin",mA="actionComplete",yA="dataBound",vA="columnDragStart",bA="columnDrag",wA="columnDrop",CA="content-ready",xA="ui-update",AA="on-empty",SA="inbound-model-changed",OA="colgroup-refresh",EA="destroy",IA="column-visible-changed",DA="column-position-changed",kA="rows-added",PA="rows-removed",TA="column-drag-stop",MA="header-drop",jA="datasource-modified",RA="update-data",LA="add-delete-Action",_A="freezerender",NA="hierarchyprint",BA="row-position-changed",FA=function(){function e(e,t){this.isAsyncPrint=!1,this.defered=new sh,this.parent=e,this.parent.isDestroyed||(this.parent.on(CA,this.isContentReady(),this),this.parent.addEventListener(gA,this.actionBegin.bind(this)),this.parent.on(AA,this.onEmpty.bind(this)),this.parent.on(NA,this.hierarchyPrint,this),this.scrollModule=t)}return e.prototype.isContentReady=function(){var e=this;return!this.isPrintGrid()||"None"!==this.parent.hierarchyPrintMode&&this.parent.childGrid?function(){e.defered.promise.then(function(){e.contentReady()}),e.isPrintGrid()&&e.hierarchyPrint()}:this.contentReady},e.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var e=window.printGridObj;e&&!e.element.querySelector("[aria-busy=true")&&e.printModule.defered.resolve()},e.prototype.print=function(){this.renderPrintGrid(),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight)},e.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},e.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},e.prototype.renderPrintGrid=function(){var e=this.parent,t=k("div",{id:this.parent.element.id+"_print",className:e.element.className+" e-print-grid"});document.body.appendChild(t);var n=new dE(function e(t,n){void 0===n&&(n="Expanded");var i={};if(!t)return i;for(var r=0,o=FA.printGridProp;r<o.length;r++){var s=o[r];i[s]="columns"===s?YA(t[s]):"allowPaging"===s?"CurrentPage"===t.printMode:qA(t[s])}return t.childGrid&&"None"!==n&&(i.expandedRows=function(t,n){for(var i={},r=0,o=t.getRowsObject();r<o.length;r++){var s=o[r];if(s.isExpand&&!s.isDetailRow){var a=t.allowPaging&&"AllPages"===t.printMode?s.index+t.pageSettings.currentPage*t.pageSettings.pageSize-t.pageSettings.pageSize:s.index;i[a]={},i[a].isExpand=!0,i[a].gridModel=e(s.childGrid,n),i[a].gridModel.query=t.childGrid.query}}return i}(t,n)),i}(e,e.hierarchyPrintMode));n.query=e.getQuery().clone(),window.printGridObj=n,n.isPrinting=!0;var i=n.getInjectedModules(),r=e.getInjectedModules();i&&i.length===r.length||n.setInjectedModules(r),e.notify("printGrid-Init",{element:t,printgrid:n}),this.parent.log("exporting_begin",this.getModuleName()),n.appendTo(t),n.registeredTemplate=this.parent.registeredTemplate,n.trigger=e.trigger},e.prototype.contentReady=function(){if(this.isPrintGrid()){var e=this.parent;if(this.isAsyncPrint)return void this.printGrid();var t={requestType:"print",element:e.element,selectedRows:e.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:e.hierarchyPrintMode};if(this.isAsyncPrint||e.trigger("beforePrint",t),t.cancel)return void N(e.element);this.isAsyncPrint||this.printGrid()}},e.prototype.printGrid=function(){var e=this.parent;if("auto"!==e.height){var t=this.scrollModule.getCssProperties(),n=e.element.querySelector(".e-content"),i=e.element.querySelector(".e-gridheader");n.style.height="auto",n.style.overflowY="auto",i.style[t.padding]="",i.firstElementChild.style[t.border]=""}e.allowGrouping&&(e.groupSettings.columns.length?this.removeColGroup(e):e.element.querySelector(".e-groupdroparea").style.display="none");for(var r=0,o=[].slice.call(e.element.querySelectorAll(".e-content"));r<o.length;r++)o[r].style.overflowX="hidden";for(var s=e.element.querySelectorAll(".e-spin-show"),a=0,l=[].slice.call(s);a<l.length;a++)W(l[a],["e-spin-hide"],["e-spin-show"]);this.printGridElement(e),e.isPrinting=!1,delete window.printGridObj,e.trigger("printComplete",{element:e.element}),this.parent.log("exporting_complete",this.getModuleName())},e.prototype.printGridElement=function(e){W(e.element,["e-print-grid-layout"],["e-print-grid"]),e.isPrinting&&N(e.element),this.printWind=function(e,t){var n=document.createElement("div"),i=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("link, style")),r="";m(t)&&(t=window.open("","print","height=452,width=1024,tabbar=no")),n.appendChild(e.cloneNode(!0));for(var o=0,s=i.length;o<s;o++)r+=i[o].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+r+"</head><body>"+n.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var a=setInterval(function(){t.ready&&(t.print(),t.close(),clearInterval(a))},500);return t}(e.element,this.printWind)},e.prototype.removeColGroup=function(e){var t=e.groupSettings.columns.length,n=e.element,i="#"+e.element.id;if(t){for(var r=n.querySelectorAll(i+"captioncell.e-groupcaption"),o=r[t-1].getAttribute("colspan"),s=0;s<r.length;s++)r[s].setAttribute("colspan",o);var a=n.querySelectorAll("colgroup"+i+"colGroup");for(s=0;s<a.length;s++)for(var l=0;l<t;l++)a[s].childNodes[l].style.display="none"}},e.prototype.isPrintGrid=function(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting},e.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(CA,this.contentReady.bind(this)),this.parent.removeEventListener(gA,this.actionBegin.bind(this)),this.parent.off(AA,this.onEmpty.bind(this)),this.parent.off(NA,this.hierarchyPrint))},e.prototype.getModuleName=function(){return"print"},e.printGridProp=["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings"].concat(["beforePrint","printComplete"]),e}();function zA(e,t,n){return m(e)||""===e?"":Jc.getObject(e,t)}function HA(e,t){requestAnimationFrame(function(){try{t(null,e())}catch(n){t(n)}})}function VA(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=t(e[i],i);m(o)||n.push(o)}return n}function UA(e){if(e)try{if(document.querySelectorAll(e).length)return _t(document.querySelector(e).innerHTML.trim())}catch(t){return _t(e)}}function WA(e,t){var n={},i=["style","class"];g(n,t,{}),"style"in n&&(U(e,n[i[0]]),delete n[i[0]]),"class"in n&&(P([e],n[i[1]]),delete n[i[1]]),F(e,n)}function GA(e,t){for(var n=0,i=e.length;n<i;n++){var r=void 0;"string"==typeof e[n]?r=new fA({field:e[n]}):e[n]instanceof fA?r=e[n]:e[n].columns?(e[n].columns=GA(e[n].columns),r=new fA(e[n])):r=new fA(e[n]),r.headerText=m(r.headerText)?r.foreignKeyValue||r.field||"":r.headerText,r.foreignKeyField=r.foreignKeyField||r.field,r.valueAccessor=("string"==typeof r.valueAccessor?h(r.valueAccessor,window):r.valueAccessor)||zA,r.width=t&&m(r.width)?200:r.width,m(r.visible)&&(r.visible=!0),e[n]=r}return e}function qA(e){return e instanceof Le?h("properties",e):e}function QA(e,t,n){for(var i=e;i&&(n?i.id!==t:!i.classList.contains(t));)i=i.parentElement;return i}function YA(e){for(var t=[],n=0,i=e.length;n<i;n++)e[n].hasOwnProperty("properties")?t.push(e[n].properties):t.push(e[n]);return t}function XA(e){var t={};return t.x=m(e.clientX)?e.changedTouches[0].clientX:e.clientX,t.y=m(e.clientY)?e.changedTouches[0].clientY:e.clientY,t}var ZA=0;function KA(e){return e+ZA++}function JA(e,t){for(var n=0,i=t.length;n<i;n++)e.appendChild(i===t.length?t[n]:t[0]);return e}var $A,eS=null;function tS(){if(null!==eS)return eS;var e,t=document.createElement("div");return t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t),e=t.offsetWidth-t.clientWidth|0,document.body.removeChild(t),eS=e}function nS(e){var t=e.element.querySelector("#"+e.element.id+"EditConfirm");return"Batch"===e.editSettings.mode&&e.element.querySelectorAll(".e-updatedtd").length&&e.editSettings.showConfirmDialog&&(!t||t.classList.contains("e-popup-close"))}function iS(e,t){e=e instanceof Array?e:[e];for(var n=0;n<e.length;n++)t?e[n].classList.add("e-wrap"):e[n].classList.remove("e-wrap")}function rS(e,t){var n=e.getService("valueFormatter");switch(t.type){case"date":t.setFormatter(n.getFormatFunction({type:"date",skeleton:t.format})),t.setParser(n.getParserFunction({type:"date",skeleton:t.format}));break;case"datetime":t.setFormatter(n.getFormatFunction({type:"dateTime",skeleton:t.format})),t.setParser(n.getParserFunction({type:"dateTime",skeleton:t.format}));break;case"number":t.setFormatter(n.getFormatFunction({format:t.format})),t.setParser(n.getParserFunction({format:t.format}))}}function oS(e,t,n){var i=k("div",{className:n});return i.appendChild(t),i.setAttribute("uid",e),i}function sS(e,t){T([e],["e-check","e-stop","e-uncheck"]),e.classList.add(t?"e-check":"e-uncheck")}function aS(e,t,n,i){var r=e.foreignKeyField,o=m(n)?zA(e.field,t):n;o=m(o)?"":o;var s=new Zc,a=i||(e.dataSource instanceof oh&&e.dataSource.dataSource.json.length?e.dataSource.dataSource.json:e.columnData);return o.getDay?s.where(cS({field:r,operator:"equal",value:o,matchCase:!1})):s.where(r,"==",o,!1),new oh(a).executeLocal(s)}function lS(e,t){var n;return t.some(function(t){return n=t,t.foreignKeyValue===e})&&n}function cS(e,t){var n,i,r,o=g({},qA(e)),s=g({},qA(e));if(null===e.value)return new Kc(o.field,o.operator,o.value,!1);var a=new Date(e.value);if("equal"===e.operator||"notequal"===e.operator){"datetime"===t?(i=new Date(a.setSeconds(a.getSeconds()-1)),r=new Date(a.setSeconds(a.getSeconds()+2)),e.value=new Date(a.setSeconds(r.getSeconds()-1))):(i=new Date(a.setHours(0)-1),r=new Date(a.setHours(24))),o.value=i,s.value=r,"equal"===e.operator?(o.operator="greaterthan",s.operator="lessthan"):"notequal"===e.operator&&(o.operator="lessthanorequal",s.operator="greaterthanorequal");var l=new Kc(o.field,o.operator,o.value,!1),c=new Kc(s.field,s.operator,s.value,!1);n="equal"===e.operator?l.and(c):l.or(c)}else"string"==typeof o.value&&(o.value=new Date(o.value)),n=new Kc(o.field,o.operator,o.value,!1);return e.setProperties?e.setProperties({ejpredicate:n},!0):e.ejpredicate=n,n}function hS(e){return e.enableVirtualization&&e.groupSettings.columns.length>0&&e.isVirtualAdaptive}function dS(e,t){if(void 0===e&&(e=""),e){for(var n=t,i=e.split("."),r=0;r<i.length&&!m(n);r++)n=n[i[r]];return n}}function uS(e,t,n,i){var r=e||{},o=arguments.length;i&&(o-=1);for(var s=function(e){if(!a[e])return"continue";var t=a[e];(Object.keys(Object.getPrototypeOf(t)).length?Object.keys(t).concat(function(e){for(var t=[];Object.getPrototypeOf(e)&&Object.keys(Object.getPrototypeOf(e)).length;)t=t.concat(Object.keys(Object.getPrototypeOf(e))),e=Object.getPrototypeOf(e);return t}(t)):Object.keys(t)).forEach(function(e){var n=r[e],o=t[e];r[e]=i&&(u(o)||Array.isArray(o))?u(o)?g({},n||{},o,i):g([],n||[],o,i):o})},a=arguments,l=1;l<o;l++)s(l);return r}function pS(e,t){var n=t,i=[];if(e.columns){t++;for(var r=0;r<e.columns.length;r++)i[r]=pS(e.columns[r],t);for(var o=0;o<i.length;o++)n<i[o]&&(n=i[o]);t=n}return t}var fS,gS,mS,yS,vS,bS,wS,CS,xS=function(e){return e[e.Data=0]="Data",e[e.Header=1]="Header",e[e.Summary=2]="Summary",e[e.GroupSummary=3]="GroupSummary",e[e.CaptionSummary=4]="CaptionSummary",e[e.Filter=5]="Filter",e[e.Indent=6]="Indent",e[e.GroupCaption=7]="GroupCaption",e[e.GroupCaptionEmpty=8]="GroupCaptionEmpty",e[e.Expand=9]="Expand",e[e.HeaderIndent=10]="HeaderIndent",e[e.StackedHeader=11]="StackedHeader",e[e.DetailHeader=12]="DetailHeader",e[e.DetailExpand=13]="DetailExpand",e[e.CommandColumn=14]="CommandColumn",e[e.DetailFooterIntent=15]="DetailFooterIntent",e[e.RowDragIcon=16]="RowDragIcon",e[e.RowDragHIcon=17]="RowDragHIcon",e}({}),AS=function(e){return e[e.Header=0]="Header",e[e.Content=1]="Content",e[e.Summary=2]="Summary",e}({}),SS=["north-west","north","north-east","west","east","south-west","south","south-east"],OS=0,ES=0,IS=0,DS=0,kS=0,PS=0,TS="e-resize-handle",MS="e-focused-handle",jS=["e-restrict-left"],RS="e-resize-viewport",LS=null,_S=null,NS=null,BS=!0,FS=0,zS=!0;function HS(e){var t;return m(e)||(t="string"==typeof e?document.querySelector(e):e),t}function VS(e){return e.indexOf("mouse")>-1?"mouse":"touch"}function US(e){if(e.preventDefault(),fS=e.target.parentElement,GS(),kS=e.pageX,PS=e.pageY,e.target.classList.add(MS),m(LS)||!0!==LS(e)){var t=m(wS)?document:wS;I.add(t,"mousemove",QS,this),I.add(document,"mouseup",WS,this);for(var n=0;n<jS.length;n++)BS=!fS.classList.contains(jS[n])}}function WS(e){var t="msie"===re.info.name?"pointermove":"touchmove",n="msie"===re.info.name?"pointerup":"touchend",i=m(wS)?document:wS;I.remove(i,"mousemove",QS),I.remove(i,t,QS),I.remove(i,"msie"===re.info.name?"pointerdown":"touchstart",QS),m(document.body.querySelector("."+MS))||document.body.querySelector("."+MS).classList.remove(MS),m(NS)||NS(e),I.remove(document,"mouseup",WS),I.remove(document,n,WS)}function GS(){OS=parseFloat(getComputedStyle(fS,null).getPropertyValue("width").replace("px","")),ES=parseFloat(getComputedStyle(fS,null).getPropertyValue("height").replace("px","")),IS=fS.getBoundingClientRect().left,DS=fS.getBoundingClientRect().top}function qS(e){if(fS=e.target.parentElement,GS(),kS=e.touches[0].pageX,PS=e.touches[0].pageY,m(LS)||!0!==LS(e)){var t="msie"===re.info.name?"pointermove":"touchmove",n="msie"===re.info.name?"pointerup":"touchend",i=m(wS)?document:wS;I.add(i,t,QS,this),I.add(document,n,WS)}}function QS(e){if(e.target.classList.contains(TS)&&e.target.classList.contains(MS)?gS=e.target:m(document.body.querySelector("."+MS))||(gS=document.body.querySelector("."+MS)),!m(gS)){for(var t="",n=0;n<SS.length;n++)gS.classList.contains("e-"+SS[n])&&(t=SS[n]);switch(m(_S)||_S(e),t){case"south":XS(e);break;case"north":ZS(e);break;case"west":KS(e);break;case"east":JS(e);break;case"south-east":XS(e),JS(e);break;case"south-west":XS(e),KS(e);break;case"north-east":ZS(e),JS(e);break;case"north-west":ZS(e),KS(e)}}}function YS(e){return e.getBoundingClientRect()}function XS(e){var t,n=document.documentElement.clientHeight,i=!1,r="mouse"===VS(e.type)?e.pageY:e.touches[0].pageY,o=YS(fS);m(wS)||(t=YS(wS)),m(wS)?m(wS)&&(n-r>=0||o.top<0)&&(i=!0):i=!0;var s=ES+(r-PS);s=s>mS?s:mS;var a=0;m(wS)||(a=t.top);var l=m(wS)?0:wS.offsetHeight-wS.clientHeight,c=o.top-a-l/2;if(c=c<0?0:c,o.top>0&&c+s>yS){if(i=!1,fS.classList.contains(RS))return;fS.style.height=yS-parseInt(c.toString(),10)+"px"}else{var h=0;if(i){o.top<0&&n+(o.height+o.top)>0&&s+(h=o.top)<=30&&(s=o.height-(o.height+o.top)+30),s+o.top>=yS&&(fS.style.height=o.height+(n-(o.height+o.top))+"px");var d=m(wS)?h:c;s>=mS&&s+d<=yS&&(fS.style.height=s+"px")}}}function ZS(e){var t,n=!1,i="mouse"===VS(e.type)?e.pageY:e.touches[0].pageY,r=YS(fS);m(wS)||(t=YS(wS)),!m(wS)&&r.top-t.top>0?n=!0:m(wS)&&i>0&&(n=!0);var o=ES-(i-PS);if(YS(fS).bottom+o>yS&&(n=!1,fS.style.height=yS-YS(fS).bottom+"px"),n&&o>=mS&&o<=yS){var s=0;m(wS)||(s=t.top);var a=DS-s+(i-PS);a=a>0?a:1,fS.style.height=o+"px",fS.style.top=a+"px"}}function KS(e){var t,n=document.documentElement.clientWidth,i=!1;m(wS)||(t=YS(wS));var r="mouse"===VS(e.type)?e.pageX:e.touches[0].pageX,o=YS(fS),s=m(wS)?0:wS.offsetWidth-wS.clientWidth,a=m(wS)?0:t.left,l=m(wS)?0:t.width;m(CS)&&(m(wS)?CS=n:(CS=o.left-a-s/2+o.width,CS+=l-s-CS)),!m(wS)&&o.left-t.left+o.width+(t.right-o.right)-s<=bS?i=!0:m(wS)&&r>=0&&(i=!0);var c=OS-(r-kS);if(BS&&(c=c>CS?CS:c),i&&c>=vS&&c<=bS){var h=0;m(wS)||(h=t.left);var d=IS-h+(r-kS);d=d>0?d:1,c!==FS&&zS&&(fS.style.width=c+"px"),BS&&(fS.style.left=d+"px",zS=1!==d)}FS=c}function JS(e){var t,n=document.documentElement.clientWidth,i=!1;m(wS)||(t=YS(wS));var r="mouse"===VS(e.type)?e.pageX:e.touches[0].pageX,o=YS(fS);!m(wS)&&(o.left-t.left+o.width<bS||o.right-t.left>o.width)?i=!0:m(wS)&&n-r>0&&(i=!0);var s=OS+(r-kS),a=0;if(m(wS)||(a=t.left),o.left-a+s>bS){if(i=!1,fS.classList.contains(RS))return;fS.style.width=bS-(o.left-a)+"px"}i&&s>=vS&&s<=bS&&(fS.style.width=s+"px")}function $S(){for(var e=fS.querySelectorAll("."+TS),t=0;t<e.length;t++)N(e[t])}var eO,tO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye()],t.prototype,"buttonModel",void 0),Object(s.b)([ye("Button")],t.prototype,"type",void 0),Object(s.b)([ye()],t.prototype,"click",void 0),t}(Le),nO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("Fade")],t.prototype,"effect",void 0),Object(s.b)([ye(400)],t.prototype,"duration",void 0),Object(s.b)([ye(0)],t.prototype,"delay",void 0),t}(Le),iO="Information",rO=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(s.c)(t,e),t.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight())},t.prototype.preRender=function(){var e=this;this.headerContent=null,this.allowMaxHeight=!0;for(var t=[],n=0;n<this.element.classList.length;n++)m(this.element.classList[n].match("e-control"))&&m(this.element.classList[n].match("e-dialog"))||t.push(this.element.classList[n]);if(T([this.element],t),this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(t){e.hide(t)},this.dlgOverlayClickEventHandler=function(t){e.trigger("overlayClick",t)},this.l10n=new yt("dialog",{close:"Close"},this.locale),this.checkPositionData(),m(this.target)){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=i}},t.prototype.isNumberValue=function(e){return/^[-+]?\d*\.?\d+$/.test(e)},t.prototype.checkPositionData=function(){if(!m(this.position)){if(!m(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=e}m(this.position.Y)||"number"==typeof this.position.Y||this.isNumberValue(this.position.Y)&&(e=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=e)}},t.prototype.getMinHeight=function(){var e="0px",t="0px";m(this.element.querySelector(".e-dlg-header-content"))||(e=getComputedStyle(this.headerContent).height),m(this.element.querySelector(".e-footer-content"))||(t=getComputedStyle(this.element.querySelector(".e-footer-content")).height);var n=parseInt(e.slice(0,e.indexOf("p")),10),i=parseInt(t.slice(0,t.indexOf("p")),10);mS=n+30+i},t.prototype.onResizeStart=function(e){return this.trigger("resizeStart",e),e.cancel},t.prototype.onResizing=function(e){this.trigger("resizing",e)},t.prototype.onResizeComplete=function(e){this.trigger("resizeStop",e)},t.prototype.setResize=function(){if(this.enableResize){this.element.classList.add("e-dlg-resizable");var e=getComputedStyle(this.element).minHeight,t=getComputedStyle(this.element).minWidth,n=this.enableRtl?"south-west":"south-east";this.isModal&&this.enableRtl?this.element.classList.add("e-restrict-left"):this.isModal&&this.target===document.body&&this.element.classList.add("e-resize-viewport"),function(e){LS=e.resizeBegin,_S=e.resizing,NS=e.resizeComplete,fS=HS(e.element),wS=HS(e.boundary);for(var t=e.direction.split(" "),n=0;n<t.length;n++){var i=k("div",{className:"e-icons "+TS+" e-"+t[n]});fS.appendChild(i)}mS=e.minHeight,vS=e.minWidth,bS=e.maxWidth,yS=e.maxHeight,function(){for(var e=fS.querySelectorAll("."+TS),t=0;t<e.length;t++)I.add(gS=e[t],"mousedown",US,this),I.add(gS,"msie"===re.info.name?"pointerdown":"touchstart",qS,this)}()}({element:this.element,direction:n,minHeight:parseInt(e.slice(0,t.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(t.slice(0,t.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this)})}else $S(),this.element.classList.remove(this.isModal?"e-restrict-left":"e-resize-viewport"),this.element.classList.remove("e-dlg-resizable")},t.prototype.keyDown=function(e){var t=this;if(9===e.keyCode&&this.isModal){var n=void 0;m(this.btnObj)||(n=this.btnObj[this.btnObj.length-1]),m(n)||document.activeElement!==n.element||e.shiftKey||(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),m(n)||n.element.focus())}var i,r=document.activeElement,o=["input","textarea"].indexOf(r.tagName.toLowerCase())>-1,s=!1;o||(s=r.hasAttribute("contenteditable")&&"true"===r.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape&&this.hide(e),(13===e.keyCode&&!e.ctrlKey&&"textarea"!==r.tagName.toLowerCase()&&o&&!m(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===r.tagName.toLowerCase()||s)&&!m(this.primaryButtonEle))&&this.buttons.some(function(e,t){i=t;var n=e.buttonModel;return!m(n)&&!0===n.isPrimary})&&"function"==typeof this.buttons[i].click&&setTimeout(function(){t.buttons[i].click.call(t,e)})},t.prototype.initialize=function(){m(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),P([this.element],"e-dialog"),re.isDevice&&P([this.element],"e-device"),this.setCSSClass(),this.setMaxHeight()},t.prototype.initRender=function(){var e=this;this.initialRender=!0,F(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.setTargetContent(),""===this.header||m(this.header)||this.setHeader(),this.showCloseIcon&&this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||m(this.footerTemplate)?m(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate(),this.allowDragging&&!m(this.headerContent)&&this.setAllowDragging(),F(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal(),m(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new Ki(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",open:function(t){e.focusContent();var n={container:e.isModal?e.dlgContainer:e.element,element:e.element,target:e.target};e.enableResize&&e.getMinHeight(),e.trigger("open",n)},close:function(t){e.isModal&&P([e.dlgOverlay],"e-fade"),e.unBindEvent(e.element),e.isModal&&(e.dlgContainer.style.display="none"),e.trigger("close",e.closeArgs),m(document.activeElement.blur)||document.activeElement.blur(),m(e.storeActiveElement)||(document.activeElement.blur(),e.storeActiveElement.focus())}}),this.positionChange(),this.setEnableRTL(),P([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex(),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1},t.prototype.setOverlayZindex=function(e){var t;t=m(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()},t.prototype.positionChange=function(){this.isModal?"number"==typeof this.position.X&&"number"==typeof this.position.Y?this.setPopupPosition():"string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setAllowDragging=function(){var e=this;this.dragObj=new pt(this.element,{clone:!1,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(t){e.trigger("dragStart",t)},dragStop:function(t){e.isModal&&(m(e.position)||e.dlgContainer.classList.remove("e-dlg-"+e.position.X+"-"+e.position.Y),e.element.style.position="relative"),e.trigger("dragStop",t),e.element.classList.remove("e-restrict-left")},drag:function(t){e.trigger("drag",t)}}),m(this.targetEle)||(this.dragObj.dragArea=this.targetEle)},t.prototype.setButton=function(){this.buttonContent=[],this.btnObj=[];for(var e=0;e<this.buttons.length;e++){var t=m(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),n=this.createElement("button",{attrs:{type:t}});this.buttonContent.push(n.outerHTML)}for(this.setFooterTemplate(),e=0;e<this.buttons.length;e++)this.btnObj[e]=new Gy(this.buttons[e].buttonModel),"function"==typeof this.buttons[e].click&&I.add(this.ftrTemplateContent.children[e],"click",this.buttons[e].click,this),this.btnObj[e].appendTo(this.ftrTemplateContent.children[e]),this.btnObj[e].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]},t.prototype.setContent=function(){F(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(m(this.content)||""===this.content)&&this.initialRender||("string"==typeof this.content?this.contentEle.innerHTML=this.content:this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle)),m(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&this.setMaxHeight()},t.prototype.setTemplate=function(e,t){for(var n=[],i=0,r=_t(e)({});i<r.length;i++)n.push(r[i]);L([].slice.call(n),t)},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!m(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e}},t.prototype.setEnableRTL=function(){this.enableRtl?P([this.element],"e-rtl"):T([this.element],"e-rtl"),m(this.element.querySelector(".e-resize-handle"))||($S(),this.setResize())},t.prototype.setTargetContent=function(){if(m(this.content)||""===this.content){var e=""!==this.element.innerHTML.replace(/\s/g,"");if(this.element.children.length>0||e)for(this.innerContentElement=document.createDocumentFragment();0!==this.element.childNodes.length;)this.innerContentElement.appendChild(this.element.childNodes[0])}},t.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:"e-dlg-header"}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle),F(this.element,{"aria-labelledby":this.element.id+"_title"}),this.element.insertBefore(this.headerContent,this.element.children[0])},t.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:"e-footer-content"}),""===this.footerTemplate||m(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent),this.element.appendChild(this.ftrTemplateContent)},t.prototype.createHeaderContent=function(){m(this.headerContent)&&(this.headerContent=this.createElement("div",{className:"e-dlg-header-content"}))},t.prototype.renderCloseIcon=function(){this.closeIcon=this.createElement("button",{className:"e-dlg-closeicon-btn",attrs:{type:"button"}}),this.closeIconBtnObj=new Gy({cssClass:"e-flat",iconCss:"e-icon-dlg-close e-icons"}),this.closeIconTitle(),m(this.headerContent)?(this.createHeaderContent(),R([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):R([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon)},t.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e)},t.prototype.setCSSClass=function(e){this.cssClass&&P([this.element],this.cssClass.split(" ")),e&&T([this.element],e.split(" "))},t.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.element.classList.remove("e-popup-open"),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),P([this.element],"e-dlg-modal"),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},t.prototype.getValidFocusNode=function(e){for(var t,n=0;n<e.length;n++)if(((t=e[n]).clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;return t},t.prototype.focusableElements=function(e){if(!m(e)){var t=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null},t.prototype.getAutoFocusNode=function(e){var t=e.querySelector(".e-dlg-closeicon-btn"),n=e.querySelectorAll("[autofocus]"),i=this.getValidFocusNode(n);if(m(i)){if(!m(i=this.focusableElements(this.contentEle)))return i;if(!m(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=i;return t},t.prototype.disableElement=function(e,t){var n=e?e.matches||e.webkitMatchesSelector||e.msMatchesSelector:null;if(n)for(;e;e=e.parentNode)if(e instanceof Element&&n.call(e,t))return e;return null},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element);(m(e)?this.element:e).focus(),this.bindEvent(this.element)},t.prototype.bindEvent=function(e){I.add(e,"keydown",this.keyDown,this)},t.prototype.unBindEvent=function(e){I.remove(e,"keydown",this.keyDown)},t.prototype.getModuleName=function(){return"dialog"},t.prototype.onPropertyChanged=function(e,t){if(this.element.classList.contains("e-dialog"))for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"content":m(this.content)||""===this.content?m(this.contentEle)||(N(this.contentEle),this.contentEle=null):m(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?this.setContent():(this.contentEle.innerHTML="","string"==typeof this.content?this.contentEle.innerHTML=this.content:this.contentEle.appendChild(this.content),this.setMaxHeight());break;case"header":""===this.header||m(this.header)?this.headerEle&&(N(this.headerEle),this.headerEle=null):this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||m(this.footerTemplate)){if(!this.ftrTemplateContent)return;N(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName("e-icon-dlg-close").length>0?this.showCloseIcon||""!==this.header&&!m(this.header)?this.showCloseIcon||N(this.closeIcon):(N(this.headerContent),this.headerContent=null):(this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":U(this.element,{height:x(e.height)});break;case"width":U(this.element,{width:x(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.calculatezIndex=!1;break;case"cssClass":this.setCSSClass(t.cssClass);break;case"buttons":var r=this.buttons.length;m(this.ftrTemplateContent)||(N(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var o=0;o<r;o++)m(this.buttons[o].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!m(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.popupObj.relateTo=e.target;break;case"position":if(this.checkPositionData(),this.isModal){var s=m(t.position.X)?this.position.X:t.position.X,a=m(t.position.Y)?this.position.Y:t.position.Y;this.dlgContainer.classList.contains("e-dlg-"+s+"-"+a)&&this.dlgContainer.classList.remove("e-dlg-"+s+"-"+a)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}},t.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",m(this.targetEle)||this.targetEle.appendChild(this.dlgContainer);else{for(T([this.element],"e-dlg-modal"),T([document.body],"e-scroll-disabled"),N(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange()},t.prototype.setzIndex=function(e,t){var n=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.zIndex=$i(e),this.isProtectedOnChange=n,t&&(this.popupObj.zIndex=this.zIndex)},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){if(this.element.classList.contains("e-dialog")){if(this.unWireEvents(),e.prototype.destroy.call(this),T([this.element,this.element],["e-dialog","e-rtl","e-dlg-modal"]),this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),!m(this.btnObj))for(var t=void 0;t<this.btnObj.length;t++)this.btnObj[t].destroy();for(this.isModal&&(N(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),N(this.dlgContainer)),this.element.innerHTML="";this.element.attributes.length>0;)this.element.removeAttribute(this.element.attributes[0].name);for(var n=0;n<this.clonedEle.attributes.length;n++)this.element.setAttribute(this.clonedEle.attributes[n].name,this.clonedEle.attributes[n].value)}},t.prototype.wireEvents=function(){this.showCloseIcon&&I.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&I.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.unWireEvents=function(){if(this.showCloseIcon&&I.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&I.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),!m(this.buttons[0].buttonModel))for(var e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&I.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)},t.prototype.refreshPosition=function(){this.popupObj.refreshPosition()},t.prototype.show=function(e){if(this.element.classList.contains("e-dialog")&&(!this.element.classList.contains("e-popup-open")||!m(e))){m(e)||this.fullScreen(e);var t={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};if(this.trigger("beforeOpen",t),t.cancel)return;this.element.style.maxHeight!==t.maxHeight&&(this.allowMaxHeight=!1,this.element.style.maxHeight=t.maxHeight),this.storeActiveElement=document.activeElement,this.element.tabIndex=-1,this.isModal&&!m(this.dlgOverlay)&&(this.dlgOverlay.style.display="block",this.dlgContainer.style.display="flex",T([this.dlgOverlay],"e-fade"),m(this.targetEle)?P([document.body],"e-scroll-disabled"):(this.dlgContainer.style.position=this.targetEle===document.body?"fixed":"absolute",this.dlgOverlay.style.position="absolute",this.element.style.position="relative",P([this.targetEle],"e-scroll-disabled")));var n={name:this.animationSettings.effect+"In",duration:this.animationSettings.duration,delay:this.animationSettings.delay};this.calculatezIndex&&(this.setzIndex(this.isModal?this.element.parentElement:this.element,!0),U(this.element,{zIndex:this.zIndex}),this.isModal&&this.setOverlayZindex(this.zIndex)),"None"===this.animationSettings.effect?this.popupObj.show():this.popupObj.show(n),this.dialogOpen=!0;var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!0,this.isProtectedOnChange=i}},t.prototype.hide=function(e){if(this.element.classList.contains("e-dialog")){var t={cancel:!1,isInteraction:!!e,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e};if(this.trigger("beforeClose",t),this.closeArgs=t,!t.cancel){this.isModal&&(m(this.targetEle)?T([document.body],"e-scroll-disabled"):T([this.targetEle],"e-scroll-disabled"));var n={name:this.animationSettings.effect+"Out",duration:this.animationSettings.duration,delay:this.animationSettings.delay};"None"===this.animationSettings.effect?this.popupObj.hide():this.popupObj.hide(n),this.dialogOpen=!1;var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!1,this.isProtectedOnChange=i}}},t.prototype.fullScreen=function(e){if(e){P([this.element],"e-dlg-fullscreen");var t=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=m(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=t,P([document.body],"e-scroll-disabled"),this.allowDragging&&!m(this.dragObj)&&this.dragObj.destroy()}else T([this.element],"e-dlg-fullscreen"),T([document.body],"e-scroll-disabled"),this.allowDragging&&!m(this.headerContent)&&this.setAllowDragging();return e},t.prototype.getButtons=function(e){return m(e)?this.btnObj:this.btnObj[e]},Object(s.b)([ye("")],t.prototype,"content",void 0),Object(s.b)([ye(!1)],t.prototype,"showCloseIcon",void 0),Object(s.b)([ye(!1)],t.prototype,"isModal",void 0),Object(s.b)([ye("")],t.prototype,"header",void 0),Object(s.b)([ye(!0)],t.prototype,"visible",void 0),Object(s.b)([ye(!1)],t.prototype,"enableResize",void 0),Object(s.b)([ye("auto")],t.prototype,"height",void 0),Object(s.b)([ye("100%")],t.prototype,"width",void 0),Object(s.b)([ye("")],t.prototype,"cssClass",void 0),Object(s.b)([ye(1e3)],t.prototype,"zIndex",void 0),Object(s.b)([ye(null)],t.prototype,"target",void 0),Object(s.b)([ye("")],t.prototype,"footerTemplate",void 0),Object(s.b)([ye(!1)],t.prototype,"allowDragging",void 0),Object(s.b)([we([{}],tO)],t.prototype,"buttons",void 0),Object(s.b)([ye(!0)],t.prototype,"closeOnEscape",void 0),Object(s.b)([ve({},nO)],t.prototype,"animationSettings",void 0),Object(s.b)([ve({X:"center",Y:"center"},Zi)],t.prototype,"position",void 0),Object(s.b)([xe()],t.prototype,"created",void 0),Object(s.b)([xe()],t.prototype,"open",void 0),Object(s.b)([xe()],t.prototype,"beforeOpen",void 0),Object(s.b)([xe()],t.prototype,"close",void 0),Object(s.b)([xe()],t.prototype,"beforeClose",void 0),Object(s.b)([xe()],t.prototype,"dragStart",void 0),Object(s.b)([xe()],t.prototype,"dragStop",void 0),Object(s.b)([xe()],t.prototype,"drag",void 0),Object(s.b)([xe()],t.prototype,"overlayClick",void 0),Object(s.b)([xe()],t.prototype,"resizeStart",void 0),Object(s.b)([xe()],t.prototype,"resizing",void 0),Object(s.b)([xe()],t.prototype,"resizeStop",void 0),Object(s.b)([Ae],t)}(ht);!function(e){function t(e,t){var n=new rO(e);return n.appendTo(t),n}function n(e,t){return e.header=m(t.title)?iO:t.title,e.content=m(t.content)?"":t.content,e.isModal=!!m(t.isModal)||t.isModal,e.showCloseIcon=!m(t.showCloseIcon)&&t.showCloseIcon,e.allowDragging=!m(t.isDraggable)&&t.isDraggable,e.closeOnEscape=!m(t.closeOnEscape)&&t.closeOnEscape,e.position=m(t.position)?{X:"center",Y:"top"}:t.position,e.animationSettings=m(t.animationSettings)?{effect:"Fade",duration:400,delay:0}:t.animationSettings,e.cssClass=m(t.cssClass)?"":t.cssClass,e.zIndex=m(t.zIndex)?1e3:t.zIndex,e.open=m(t.open)?null:t.open,e}function i(e,t,n){var i=n;return m(t.text)||(i.buttonModel.content=t.text),m(t.icon)||(i.buttonModel.iconCss=t.icon),m(t.cssClass)||(i.buttonModel.cssClass=t.cssClass),m(t.click)||(i.click=t.click),i}e.alert=function(e){var r,o,s=k("div",{className:"e-alert-dialog"});return document.body.appendChild(s),(r=t("string"==typeof e?{content:e,position:{X:"center",Y:"top"},isModal:!0,header:iO,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function(e,t){var n=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return m(t.okButton)?e.buttons=n:e.buttons[0]=i(0,t.okButton,n[0]),e}(n({buttons:[]},o=e),o),s)).close=function(){e&&e.close&&e.close.apply(r),r.destroy(),r.element.classList.contains("e-dlg-modal")?(r.element.parentElement.remove(),r.target.classList.remove("e-scroll-disabled")):r.element.remove()},r},e.confirm=function(e){var r,o,s=k("div",{className:"e-confirm-dialog"});return document.body.appendChild(s),(r=t("string"==typeof e?{position:{X:"center",Y:"top"},content:e,isModal:!0,header:iO,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function(e,t){var n={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},r={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return e.buttons[0]=m(t.okButton)?n:i(0,t.okButton,n),e.buttons[1]=m(t.cancelButton)?r:i(0,t.cancelButton,r),e}(n({buttons:[]},o=e),o),s)).close=function(){e&&e.close&&e.close.apply(r),r.destroy(),r.element.classList.contains("e-dlg-modal")?(r.element.parentElement.remove(),r.target.classList.remove("e-scroll-disabled")):r.element.remove()},r}}(eO||(eO={}));var oO=function(){function e(e,t,n){this.existingPredicate={},this.foreignKeyQuery=new Zc,this.filterState=!0,this.values={},this.renderEmpty=!1,this.parent=e,this.id=this.parent.element.id,this.serviceLocator=n,this.filterSettings=t,this.valueFormatter=new pA(this.parent.locale),this.cBoxTrue=Uy(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=Uy(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&P([this.cBoxTrue,this.cBoxFalse],["e-rtl"])}return e.prototype.destroy=function(){this.closeDialog()},e.prototype.wireEvents=function(){I.add(this.dlg,"click",this.clickHandler,this),this.searchHandler=b(this.searchBoxKeyUp,200),I.add(this.dlg.querySelector(".e-searchinput"),"keyup",this.searchHandler,this)},e.prototype.unWireEvents=function(){I.remove(this.dlg,"click",this.clickHandler);var e=this.dlg.querySelector(".e-searchinput");e&&I.remove(e,"keyup",this.searchHandler)},e.prototype.foreignKeyFilter=function(e,t,n){var i=this,r={},o=[],s=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(s.where(n)).then(function(n){i.options.column.columnData=n.result,i.parent.notify("generateQuery",{predicate:r,column:i.options.column}),e.ejpredicate=r.predicate.predicates,r.predicate.predicates.forEach(function(e){o.push({field:e.field,predicate:"or",matchCase:e.ignoreCase,ignoreAccent:e.ignoreAccent,operator:e.operator,value:e.value,type:i.options.type})}),e.filterCollection=o.length?o:t.filter(function(e){return e.field=i.options.field}),i.options.handler(e)})},e.prototype.foreignFilter=function(e,t){var n=this.parent.getDataModule().isRemote()?"string"===this.options.column.type?"contains":"equal":this.options.column.type?"startswith":"contains",i=new Kc(this.options.column.foreignKeyValue,n,t,!0,this.parent.filterSettings.ignoreAccent);this.foreignKeyFilter(e,[e.filterCollection],i)},e.prototype.searchBoxClick=function(e){e.target.classList.contains("e-searchclear")&&(this.sInput.value="",this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},e.prototype.searchBoxKeyUp=function(e){this.refreshCheckboxes(),this.updateSearchIcon()},e.prototype.updateSearchIcon=function(){this.sInput.value.length?W(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]):W(this.sIcon,["e-search-icon"],["e-chkcancel-icon"])},e.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},e.prototype.updateDataSource=function(){var e=this.options.dataSource;if(!(e instanceof oh))for(var t=0;t<e.length;t++)if("object"!=typeof e){var n={};n[this.options.field]=e[t],e[t]=n}},e.prototype.updateModel=function(e){this.options=e,this.existingPredicate=e.actualPredicate||{},this.options.dataSource=e.dataSource,this.updateDataSource(),this.parent.log("column_type_missing",{column:e.column}),this.options.type=e.type,this.options.format=e.format||"",this.options.filteredColumns=e.filteredColumns||this.parent.filterSettings.columns,this.options.sortedColumns=e.sortedColumns||this.parent.sortSettings.columns,this.options.query=e.query||new Zc,this.options.allowCaseSensitive=e.allowCaseSensitive||!1,this.values={},this.localeObj=e.localeObj,this.isFiltered=e.filteredColumns.length},e.prototype.getAndSetChkElem=function(e){if(this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),!e.hideSearchbox){this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox);var t={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search")}};Wy.createInput(t,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)}return this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},e.prototype.showDialog=function(e){var t={requestType:"filterbeforeopen",filterModel:this,columnName:this.options.field,columnType:this.options.type,cancel:!1};this.parent.trigger(gA,t),t.cancel||(this.dialogObj=new rO({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),width:!m(QA(e.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this)}),this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight="800px",this.dialogObj.show(),this.wireEvents(),Sv({target:this.spinner},this.parent.createElement),Rv(this.spinner),this.getAllData())},e.prototype.dialogCreated=function(e){re.isDevice?this.dialogObj.position={X:"center",Y:"center"}:function(e,t,n){var i=t.element.style.display;t.element.style.display="block";var r,o,s=t.width;n.enableRtl?(r=xi(e,"left","bottom"),t.element.style.top=r.top+e.getBoundingClientRect().height-35+"px",t.element.style.display=i,t.element.style.left=(o=r.left-s+e.clientWidth)<1?s+o+-16+"px":o-16+"px"):(r=Ci(e,t.element),t.element.style.display=i,t.element.style.top=r.top+e.getBoundingClientRect().height-5+"px",t.element.style.left=(o=r.left-s+e.clientWidth)<1?s+o-16+"px":o+-4+"px")}(this.options.target,this.dialogObj,this.parent),this.parent.notify("filterDialogCreated",e)},e.prototype.openDialog=function(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e)},e.prototype.closeDialog=function(){this.dialogObj&&!this.dialogObj.isDestroyed&&(this.parent.getColumns().filter(function(e){return e.getFilterItemTemplate()}).length&&this.parent.destroyTemplate(["filterItemTemplate"]),this.parent.notify("filter-menu-close",{field:this.options.field}),this.dialogObj.destroy(),this.unWireEvents(),B(this.dlg),this.dlg=null)},e.prototype.clearFilter=function(){nS(this.parent)?this.parent.notify("prevent-batch",{instance:this,handler:this.clearFilter}):this.options.handler({action:"clear-filter",field:this.options.field})},e.prototype.btnClick=function(e){if(this.filterState){if("input"===e.target.tagName.toLowerCase()){var t=e.target.value;"boolean"===this.options.column.type&&(void 0!==t&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(t.toLowerCase())?t="true":void 0!==t&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(t.toLowerCase())&&(t="false"));var n={action:"filtering",filterCollection:{field:this.options.field,operator:this.parent.getDataModule().isRemote()?"string"===this.options.column.type?"contains":"equal":"date"===this.options.column.type||"datetime"===this.options.column.type||"boolean"===this.options.column.type?"equal":"contains",value:t,matchCase:!1,type:this.options.column.type},field:this.options.field};t?this.options.column.isForeignColumn()?this.foreignFilter(n,t):this.options.handler(n):this.closeDialog()}else{var i=e.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===i?this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===i&&this.clearFilter()}this.closeDialog()}else"input"!==e.target.tagName.toLowerCase()&&(this.clearFilter(),this.closeDialog())},e.prototype.fltrBtnHandler=function(){var e,t,n=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall)")),i="equal",r={field:this.options.field,predicate:"or",operator:i,type:this.options.type,matchCase:"string"!==this.options.type||this.options.allowCaseSensitive,ignoreAccent:this.parent.filterSettings.ignoreAccent},o=this.itemsCnt!==n.length&&this.itemsCnt-n.length<n.length;o&&(i="notequal",n=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),r.predicate="and",r.operator="notequal");var s=[],a=this.searchBox.querySelector(".e-searchinput");if(n.length!==this.itemsCnt||a.value&&""!==a.value){for(var l=0;l<n.length;l++)if(t=g({},{value:e=this.values[QA(n[l],"e-ftrchk").getAttribute("uid")]},r),e&&!e.toString().length&&(t.operator=o?"notequal":"equal"),""===e||m(e)?(s.push({field:r.field,ignoreAccent:r.ignoreAccent,matchCase:r.matchCase,operator:r.operator,predicate:r.predicate,value:""}),s.push({field:r.field,matchCase:r.matchCase,operator:r.operator,predicate:r.predicate,value:null}),s.push({field:r.field,matchCase:r.matchCase,operator:r.operator,predicate:r.predicate,value:void 0})):s.push(t),nS(this.parent))return void this.parent.notify("prevent-batch",{instance:this,handler:this.fltrBtnHandler,arg1:t.field,arg2:t.predicate,arg3:t.operator,arg4:t.matchCase,arg5:t.ignoreAccent,arg6:t.value});this.initiateFilter(s)}else this.clearFilter()},e.prototype.initiateFilter=function(e){var t,n=e[0];if(!m(n)){t=n.ejpredicate?n.ejpredicate:new Kc(n.field,n.operator,n.value,!n.matchCase,n.ignoreAccent);for(var i=1;i<e.length;i++)t=void 0!==e[i].ejpredicate?t[e[i].predicate](e[i].ejpredicate):t[e[i].predicate](e[i].field,e[i].operator,e[i].value,!e[i].matchCase,e[i].ignoreAccent);var r={action:"filtering",filterCollection:e,field:this.options.field,ejpredicate:Kc.or(t)};this.options.handler(r)}},e.prototype.refreshCheckboxes=function(){var e=this,t=this.sInput.value,n=this.options.column,i=n.isForeignColumn()?this.foreignKeyQuery.clone():this.options.query.clone(),r=this.options.query.clone();i.queries=[],r.queries=[];var o,s="string"!==this.options.type&&parseFloat(t)?parseFloat(t):t,a=this.parent.getDataModule().isRemote()?"string"===this.options.type?"contains":"equal":this.options.type?"startswith":"contains",l=this.parent.filterSettings.ignoreAccent,c=n.isForeignColumn()?n.foreignKeyValue:n.field;s=""===s||void 0===s?void 0:s,"boolean"===this.options.type&&(void 0!==s&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(s.toLowerCase())?s="true":void 0!==s&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(s.toLowerCase())&&(s="false"),a="equal"),this.addDistinct(i);var h={requestType:"filtersearchbegin",filterModel:this,columnName:c,column:n,operator:a,matchCase:!0,ignoreAccent:l,filterChoiceCount:null,query:i};if(this.parent.trigger(gA,h),o=new Kc(c,h.operator,s,h.matchCase,h.ignoreAccent),"date"===this.options.type||"datetime"===this.options.type){if(a="equal",m(s=this.valueFormatter.fromView(t,this.options.parserFn,this.options.type))&&t.length)return;o=cS({field:c,operator:a,value:s,matchCase:!0,ignoreAccent:l},this.options.type)}t.length&&i.where(o),h.filterChoiceCount=m(h.filterChoiceCount)?1e3:h.filterChoiceCount;var d={};Rv(this.spinner),this.renderEmpty=!1,n.isForeignColumn()&&t.length?n.dataSource.executeQuery(i).then(function(t){var i=e.options.column.columnData;e.options.column.columnData=t.result,e.parent.notify("generateQuery",{predicate:d,column:n}),d.predicate.predicates.length?r.where(d.predicate):e.renderEmpty=!0,e.options.column.columnData=i,r.take(h.filterChoiceCount),e.search(h,r)}):(i.take(h.filterChoiceCount),this.search(h,i))},e.prototype.search=function(e,t){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(e,t):this.processSearch(t)},e.prototype.getPredicateFromCols=function(t){for(var n=e.getPredicate(t),i=[],r={},o=this.parent.getForeignKeyColumns(),s=0,a=Object.keys(n);s<a.length;s++){var l=a[s],c=lS(l,o);c?(this.parent.notify("generateQuery",{predicate:r,column:c}),r.predicate.predicates.length&&i.push(Kc.or(r.predicate.predicates))):i.push(n[l])}return i.length&&Kc.and(i)},e.prototype.getAllData=function(){var e=this.parent.getQuery().clone();e.requiresCount(),this.addDistinct(e);var t={requestType:"filterchoicerequest",filterModel:this,query:e,filterChoiceCount:null};this.parent.trigger(gA,t),t.filterChoiceCount=m(t.filterChoiceCount)?1e3:t.filterChoiceCount,e.take(t.filterChoiceCount),this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(t,e):this.processDataOperation(e,!0)},e.prototype.addDistinct=function(e){var t=Jc.distinct(this.parent.filterSettings.columns,"field");return t.indexOf(this.options.column.field)<=-1&&(t=t.concat(this.options.column.field)),e.distinct(t),e},e.prototype.filterEvent=function(e,t){var n=this;this.eventPromise(e,t).promise.then(function(e){n.dataSuccess(e)})},e.prototype.eventPromise=function(e,t){var n;n=this.getStateEventArgument(t);var i=new sh;return n.dataSource=i.resolve,n.action=e,this.parent.trigger("dataStateChange",n),i},e.prototype.getStateEventArgument=function(e){var t=new th,n=new oh({url:"",adaptor:new th}),i=t.processQuery(n,e);return JSON.parse(i.data)},e.prototype.processDataOperation=function(e,t){var n=this;this.options.dataSource=this.options.dataSource instanceof oh?this.options.dataSource:new oh(this.options.dataSource);var i=[],r=[];this.options.column.isForeignColumn()&&t&&(i.push(this.options.column.dataSource.executeQuery(this.foreignKeyQuery)),r.push(function(e){return n.foreignKeyData=e})),i.push(this.options.dataSource.executeQuery(e)),r.push(this.dataSuccess.bind(this));var o=0;Promise.all(i).then(function(e){e.forEach(function(e){r[o++](e.result)})})},e.prototype.dataSuccess=function(t){this.fullData=t;var n=new Zc;if(this.parent.searchSettings.key.length){var i=this.parent.searchSettings,r=i.fields.length?i.fields:this.parent.getColumns().map(function(e){return e.field});n.search(i.key,r,i.operator,i.ignoreCase,i.ignoreAccent)}if(this.options.filteredColumns.length){for(var o=[],s=0;s<this.options.filteredColumns.length;s++)this.options.filteredColumns[s].field!==this.options.field&&this.options.filteredColumns[s].field!==this.options.foreignKeyValue&&o.push(this.options.filteredColumns[s]);var a=this.getPredicateFromCols(o);a&&n.where(a)}var l=new oh(this.fullData).executeLocal(n);this.filteredData=e.getDistinct(l,this.options.field,this.options.column,this.foreignKeyData).records||[],this.processDataSource(null,!0,this.filteredData),this.sInput.focus(),this.parent.trigger(mA,{requestType:"filterafteropen",filterModel:this,columnName:this.options.field,columnType:this.options.type})},e.prototype.processDataSource=function(e,t,n){Rv(this.spinner),this.updateResult(),this.createFilterItems(n,t)},e.prototype.processSearch=function(e){this.processDataOperation(e)},e.prototype.updateResult=function(){this.result={};var e=this.getPredicateFromCols(this.options.filteredColumns),t=new Zc;e&&t.where(e);for(var n=0,i=new oh(this.fullData).executeLocal(t);n<i.length;n++)this.result[h(this.options.field,i[n])]=!0},e.prototype.clickHandler=function(e){var t=e.target,n=QA(t,"e-checkbox-wrapper");if(QA(t,"e-searchbox")&&this.searchBoxClick(e),n){var i=n.querySelector(".e-selectall");i?this.updateAllCBoxes(!i.classList.contains("e-check")):function(e){var t=e.querySelector(".e-frame");t.classList.contains("e-check")?W(t,["e-uncheck"],["e-check"]):W(t,["e-check"],["e-uncheck"])}(n.parentElement),this.updateIndeterminatenBtn(),n.querySelector(".e-chk-hidden").focus()}},e.prototype.updateAllCBoxes=function(e){for(var t=0,n=[].slice.call(this.cBox.querySelectorAll(".e-frame"));t<n.length;t++)sS(n[t],e)},e.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.dialogObj.element.querySelector(".e-btn").focus())},e.prototype.createCheckbox=function(e,t,n){var i=t?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0),r=i.querySelector(".e-label");return r.innerHTML=!m(e)&&e.toString().length?e:this.getLocalizedLabel("Blanks"),P([r],["e-checkboxfiltertext"]),this.options.template&&(r.innerHTML="",JA(r,this.options.template(n,this.parent,"filterItemTemplate"))),i},e.prototype.updateIndeterminatenBtn=function(){var e=this.cBox.children.length-1,t=[],n=this.cBox.querySelector(".e-selectall"),i=this.cBox.querySelectorAll(".e-check:not(.e-selectall)").length,r=this.dialogObj.btnObj[0];r.disabled=!1,e===i?t=["e-check"]:i?t=["e-stop"]:(t=["e-uncheck"],r.disabled=!0),this.filterState=!r.disabled,r.dataBind(),T([n],["e-check","e-stop","e-uncheck"]),P([n],t)},e.prototype.createFilterItems=function(e,t){for(var n,i=this.parent.createElement("div"),r=this.dialogObj.btnObj[0],o=-1,s=0;s<e.length;s++){var a=h("ejValue",e[s]);(""===a||m(a))&&(o+=1)}if(this.itemsCnt=-1!==o?e.length-o:e.length,e.length&&!this.renderEmpty){var l=this.getLocalizedLabel("SelectAll"),c=this.createCheckbox(l,!1,((n={})[this.options.field]=l,n)),d=oS(KA("cbox"),c,"e-ftrchk");d.querySelector(".e-frame").classList.add("e-selectall"),i.appendChild(d);var u=new Kc("field","equal",this.options.field);this.options.foreignKeyValue&&(u=u.or("field","equal",this.options.foreignKeyValue));var p=new oh(this.options.filteredColumns).executeLocal((new Zc).where(u)).length,f=void 0;for(s=0;s<e.length;s++){var g=KA("cbox");this.values[g]=h("ejValue",e[s]);var y=this.valueFormatter.toView(h(this.options.field,e[s]),this.options.formatFn);if(""===y||m(y)){if(f)continue;f=!0}var v=this.createCheckbox(y,this.getCheckedState(p,this.values[g]),h("dataObj",e[s]));i.appendChild(oS(g,v,"e-ftrchk"))}this.cBox.innerHTML="",JA(this.cBox,[].slice.call(i.children)),this.updateIndeterminatenBtn(),r.disabled=!1}else i.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",JA(this.cBox,[].slice.call(i.children)),r.disabled=!0;this.filterState=!r.disabled,r.dataBind(),this.parent.trigger(mA,{requestType:"filterchoicerequest",filterModel:this,dataSource:this.renderEmpty?[]:e}),_v(this.spinner)},e.prototype.getCheckedState=function(e,t){return!this.isFiltered||!e||this.result[t]},e.getDistinct=function(e,t,n,i){for(var r,o=e.length,s=[],a={},l=n&&n.isForeignColumn();o--;)if(!((r=h(t,r=e[o]))in a)){var c={};if(c.ejValue=r,a[r]=!0,l){var u=aS(n,{},r,i)[0];d("foreignKeyData",u,e[o]),r=h(n.foreignKeyValue,u)}d(t,m(r)?null:r,c),d("dataObj",e[o],c),s.push(c)}return Jc.group(Jc.sort(s,t,Jc.fnAscending),"ejValue")},e.getPredicate=function(t){for(var n=Jc.distinct(t,"field",!0)||[],i=[],r={},o=0;o<n.length;o++)0!==(i=new oh(t).executeLocal((new Zc).where("field","equal",n[o].field))).length&&(r[n[o].field]=e.generatePredicate(i));return r},e.generatePredicate=function(t){var n,i,r=t?t.length:0;(i=e.updateDateFilter(t[0])).ignoreAccent=!m(i.ignoreAccent)&&i.ignoreAccent,n="date"===i.type||"datetime"===i.type?cS(i,i.type):i.ejpredicate?i.ejpredicate:new Kc(i.field,i.operator,i.value,!e.getCaseValue(i),i.ignoreAccent);for(var o=1;o<r;o++)t[o]=e.updateDateFilter(t[o]),r>2&&o>1&&"or"===t[o].predicate?n.predicates.push("date"===t[o].type||"datetime"===t[o].type?cS(t[o],t[o].type):new Kc(t[o].field,t[o].operator,t[o].value,!e.getCaseValue(t[o]),t[o].ignoreAccent)):n="date"===t[o].type||"datetime"===t[o].type?n[t[o].predicate](cS(t[o]),t[o].type,t[o].ignoreAccent):t[o].ejpredicate?n[t[o].predicate](t[o].ejpredicate):n[t[o].predicate](t[o].field,t[o].operator,t[o].value,!e.getCaseValue(t[o]),t[o].ignoreAccent);return n||null},e.getCaseValue=function(e){return!!m(e.matchCase)||e.matchCase},e.updateDateFilter=function(e){return("date"===e.type||"datetime"===e.type||e.value instanceof Date)&&(e.type=e.type||"date"),e},e.prototype.getModuleName=function(){return"checkboxFilter"},e}(),sO=function(){function e(e,t){this.dataState={isPending:!1,resolver:null,group:[]},this.parent=e,this.serviceLocator=t,this.initDataManager(),this.parent.isDestroyed||"foreignKey"===this.getModuleName()||(this.parent.on(kA,this.addRows,this),this.parent.on(BA,this.reorderRows,this),this.parent.on(PA,this.removeRows,this),this.parent.on(jA,this.initDataManager,this),this.parent.on(EA,this.destroy,this),this.parent.on(RA,this.crudActions,this),this.parent.on(LA,this.getData,this))}return e.prototype.reorderRows=function(e){this.dataManager.dataSource.json.splice(e.toIndex,0,this.dataManager.dataSource.json.splice(e.fromIndex,1)[0])},e.prototype.getModuleName=function(){return"data"},e.prototype.initDataManager=function(){var e=this.parent;this.dataManager=e.dataSource instanceof oh?e.dataSource:m(e.dataSource)?new oh:new oh(e.dataSource),e.query=e.query instanceof Zc?e.query:new Zc},e.prototype.generateQuery=function(e){var t=this.parent.getQuery().clone();if("ExcludeHidden"===this.parent.columnQueryMode)t.select(this.parent.getColumns().filter(function(e){return!(!0!==e.isPrimaryKey&&!1===e.visible||void 0===e.field)}).map(function(e){return e.field}));else if("Schema"===this.parent.columnQueryMode){for(var n=[],i=this.parent.columns,r=0;r<i.length;r++)n.push(i[r].field);t.select(n)}return this.filterQuery(t),this.searchQuery(t),this.aggregateQuery(t),this.sortQuery(t),hS(this.parent)?this.virtualGroupPageQuery(t):this.pageQuery(t,e),this.groupQuery(t),t},e.prototype.aggregateQuery=function(e,t){return this.parent.aggregates.forEach(function(t){t.columns.forEach(function(t){(t.type instanceof Array?t.type:[t.type]).forEach(function(n){return e.aggregate(n.toLowerCase(),t.field)})})}),e},e.prototype.virtualGroupPageQuery=function(e){if(e.queries.length)for(var t=0;t<e.queries.length;t++)"onPage"===e.queries[t].fn&&e.queries.splice(t,1);return e},e.prototype.pageQuery=function(e,t){var n=this.parent;if((n.allowPaging||n.enableVirtualization)&&!0!==t){if(n.pageSettings.currentPage=Math.max(1,n.pageSettings.currentPage),n.pageSettings.pageCount<=0&&(n.pageSettings.pageCount=8),n.pageSettings.pageSize<=0&&(n.pageSettings.pageSize=12),e.queries.length)for(var i=0;i<e.queries.length;i++)"onPage"===e.queries[i].fn&&e.queries.splice(i,1);e.page(n.pageSettings.currentPage,n.pageSettings.pageSize)}return e},e.prototype.groupQuery=function(e){var t=this.parent;if(t.allowGrouping&&t.groupSettings.columns.length)for(var n=t.groupSettings.columns,i=0,r=n.length;i<r;i++){var o=this.getColumnByField(n[i]);o||this.parent.log("initial_action",{moduleName:"group",columnName:n[i]});var s=o.format;o.enableGroupByFormat?e.group(n[i],this.formatGroupColumn.bind(this),s):e.group(n[i],null)}return e},e.prototype.sortQuery=function(e){var t=this.parent;if((t.allowSorting||t.allowGrouping)&&t.sortSettings.columns.length){for(var n=t.sortSettings.columns,i=[],r=n.length-1;r>-1;r--){var o=this.getColumnByField(n[r].field);if(!o)return this.parent.log("initial_action",{moduleName:"sort",columnName:n[r].field}),e;o.setSortDirection(n[r].direction);var s=n[r].direction;o.sortComparer&&(this.parent.log("grid_sort_comparer"),s=this.isRemote()?n[r].direction:o.sortComparer.bind(o)),-1===t.groupSettings.columns.indexOf(n[r].field)?e.sortBy(o.field,s):i.push({direction:s,field:o.field})}r=0;for(var a=i.length;r<a;r++)e.sortBy(i[r].field,i[r].direction)}return e},e.prototype.searchQuery=function(e){var t=this,n=this.parent.searchSettings,i=n.fields.length?n.fields:this.getSearchColumnFieldNames(),r=[];return this.parent.searchSettings.key.length&&(!this.parent.getForeignKeyColumns().some(function(e){return i.indexOf(e.field)>-1})||this.dataManager.adaptor.getModulename&&"ODataV4Adaptor"===this.dataManager.adaptor.getModulename()?e.search(n.key,i,n.operator,n.ignoreCase,n.ignoreAccent):(i.forEach(function(e){var i=t.getColumnByField(e);i.isForeignColumn()?r=t.fGeneratePredicate(i,r):r.push(new Kc(i.field,n.operator,n.key,n.ignoreCase,n.ignoreAccent))}),e.where(Kc.or(r)))),e},e.prototype.filterQuery=function(e,t,n){var i=this.parent,r=[],o=[],s=this.parent.getForeignKeyColumns();if(i.allowFiltering&&i.filterSettings.columns.length){for(var a=t||i.filterSettings.columns,l={},c=0,h=i.getColumns();c<h.length;c++)l[(C=h[c]).field]=C.filter.type?C.filter.type:i.filterSettings.type;for(var d=[],u=[],p=0,f=a;p<f.length;p++)"CheckBox"===l[(C=f[p]).field]||"Excel"===l[C.field]?d.push(C):u.push(C);if(d.length)for(var g=oO.getPredicate(d),m=0,y=Object.keys(g);m<y.length;m++){var v=y[m];(C=lS(v,s))||this.parent.log("initial_action",{moduleName:"filter",columnName:v}),C&&!n?(r=this.fGeneratePredicate(C,r),o.push(C)):r.push(g[v])}if(u.length)for(var b=0,w=u;b<w.length;b++){var C,x=this.getColumnByField((C=w[b]).field)||lS(C.field,this.parent.getForeignKeyColumns());x||this.parent.log("initial_action",{moduleName:"filter",columnName:C.field});var A=x.type;lS(C.field,s)&&!n?(o.push(C),r=this.fGeneratePredicate(x,r)):r.push("date"!==A&&"datetime"!==A?new Kc(C.field,C.operator,C.value,!C.matchCase,this.parent.filterSettings.ignoreAccent):cS(C,A))}r.length?e.where(Kc.and(r)):this.parent.notify("showEmptyGrid",{})}return e},e.prototype.fGeneratePredicate=function(e,t){var n={};return e&&(this.parent.notify("generateQuery",{predicate:n,column:e}),n.predicate.predicates.length&&t.push(n.predicate)),t},e.prototype.getData=function(e,t){var n=this;void 0===e&&(e={requestType:""});var i=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.dataSource&&"result"in this.parent.dataSource)return this.eventPromise(e,t,i).promise;var r=void 0;switch(e.requestType){case"delete":if(t=t||this.generateQuery(),1===Object.keys(e.data).length)r=this.dataManager.remove(i,e.data[0],t.fromTable,t);else{var o={addedRecords:[],deletedRecords:[],changedRecords:[]};o.deletedRecords=e.data,r=this.dataManager.saveChanges(o,i,t.fromTable,t.requiresCount())}break;case"save":t=t||this.generateQuery(),e.index=m(e.index)?0:e.index,r=this.dataManager.insert(e.data,t.fromTable,t,e.index)}return!r||Array.isArray(r)||r.hasOwnProperty("deletedRecords")?this.insert(t,e):r.then(function(i){return n.insert(t,e)})},e.prototype.insert=function(e,t){return"save"===t.requestType&&this.parent.notify("recordAdded",t),this.executeQuery(e)},e.prototype.executeQuery=function(e){var t=this;if(this.dataManager.ready){var n=new sh;return this.dataManager.ready.then(function(i){t.dataManager.executeQuery(e).then(function(e){n.resolve(e)})}).catch(function(e){n.reject(e)}),n.promise}return this.dataManager.executeQuery(e)},e.prototype.formatGroupColumn=function(e,t){var n=this.serviceLocator,i=this.getColumnByField(t),r=e;return i.type||(i.type=r.getDay?r.getHours()>0||r.getMinutes()>0||r.getSeconds()>0||r.getMilliseconds()>0?"datetime":"date":typeof e),m(i.getFormatter())&&rS(n,i),pA.prototype.toView(e,i.getFormatter())},e.prototype.crudActions=function(e){var t=this.generateQuery(),n=null,i="promise",r=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());switch(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(e,t,r),e.requestType){case"save":n=this.dataManager.update(r,e.data,t.fromTable,t,e.previousData)}e[i]=e[i]?e[i]:n,this.parent.notify("crud-Action",e)},e.prototype.saveChanges=function(e,t,n){var i=this.generateQuery().requiresCount();if("result"in this.parent.dataSource){this.getStateEventArgument(i);var r=new sh,o={requestType:"batchsave",changes:e,key:t,query:i,endEdit:r.resolve};return this.setState({isPending:!0,resolver:r.resolve}),this.parent.trigger("dataSourceChanged",o),r.promise}return this.dataManager.saveChanges(e,t,i.fromTable,i,n)},e.prototype.getKey=function(e){if(e&&e.length)return e[0]},e.prototype.isRemote=function(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url},e.prototype.addRows=function(e){for(var t=e.records.length;t>0;t--)this.dataManager.dataSource.json.splice(e.toIndex,0,e.records[t-1])},e.prototype.removeRows=function(e){this.dataManager.dataSource.json=this.dataManager.dataSource.json.filter(function(t,n){return-1===e.records.indexOf(t)})},e.prototype.getColumnByField=function(e){var t;return this.parent.columnModel.some(function(n){return t=n,n.field===e})&&t},e.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(kA,this.addRows),this.parent.off(PA,this.removeRows),this.parent.off(jA,this.initDataManager),this.parent.off(EA,this.destroy),this.parent.off(RA,this.crudActions),this.parent.off(LA,this.getData))},e.prototype.getState=function(){return this.dataState},e.prototype.setState=function(e){return this.dataState=e},e.prototype.getStateEventArgument=function(e){var t=new th,n=new oh({url:"",adaptor:new th}),i=t.processQuery(n,e);return g(JSON.parse(i.data),i.pvtData)},e.prototype.eventPromise=function(e,t,n){var i,r=this,o=e;i=this.getStateEventArgument(t);var s=new sh,a=new sh;if(void 0!==e.requestType&&!1!==this.dataState.isDataChanged)if(i.action=e,"save"===e.requestType||"delete"===e.requestType){var l=e;l.key=n,l.promise=a.promise,l.state=i,this.setState({isPending:!0,resolver:a.resolve}),o.endEdit=a.resolve,o.cancelEdit=a.reject,this.parent.trigger("dataSourceChanged",l),a.promise.then(function(e){r.setState({isPending:!0,resolver:s.resolve,group:i.group,aggregates:i.aggregates}),r.parent.trigger("dataStateChange",i)}).catch(function(){})}else this.setState({isPending:!0,resolver:s.resolve,group:i.group,aggregates:i.aggregates}),this.parent.trigger("dataStateChange",i);else this.setState({}),s.resolve(this.parent.dataSource);return s},e.prototype.getSearchColumnFieldNames=function(){for(var e=[],t=0,n=this.parent.getColumns();t<n.length;t++){var i=n[t];i.allowSearching&&!m(i.field)&&e.push(i.field)}return e},e}(),aO=function(){function e(e){f(this,e)}return e.prototype.clone=function(){var t=new e({});return f(t,this),t.cells=this.cells.map(function(e){return e.clone()}),t},e}(),lO=function(){function e(e){this.isSpanned=!1,this.isRowSpanned=!1,f(this,e)}return e.prototype.clone=function(){var t=new e({});return f(t,this),t},e}(),cO=function(){function e(e,t){this.serviceLocator=e,this.parent=t}return e.prototype.render=function(e,t,n,i){var r,o=this.serviceLocator.getService("cellRendererFactory").getCellRenderer(t.cells[n].cellType||xS.Data),s=t.cells[n].cellSpan?t.cells[n].cellSpan:e.colSpan+n<=t.cells.length?e.colSpan:t.cells.length-n,a=e.rowSpan,l=0;if(t.index>0){var c=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[t.index-1].isDataRow?this.parent.getRowsObject()[t.index].cells:this.parent.getRowsObject()[t.index-1].cells,h=t.cells[n];r=c.filter(function(e){return e.column.uid===h.column.uid})[0]}for(var d=r&&r.colSpanRange>1&&r.rowSpanRange>1?r.colSpanRange:s,u=n+1;u<n+d&&u<t.cells.length;u++)!1===t.cells[u].visible?l++:t.cells[u].isSpanned=!0;if(l>0){for(u=n+s;u<n+s+l&&u<t.cells.length;u++)t.cells[u].isSpanned=!0;n+s+l>=t.cells.length&&(s-=n+s+l-t.cells.length)}return t.cells[n].cellSpan&&(t.data[e.column.field]=t.cells[n].spanText,i=o.render(t.cells[n],t.data,{index:m(t.index)?"":t.index.toString()})),s>1&&F(i,{colSpan:s.toString(),"aria-colSpan":s.toString()}),a>1&&(F(i,{rowspan:a.toString(),"aria-rowspan":a.toString()}),t.cells[n].isRowSpanned=!0,t.cells[n].rowSpanRange=Number(a),s>1&&(t.cells[n].colSpanRange=Number(s))),t.index>0&&r.rowSpanRange>1&&(t.cells[n].isSpanned=!0,t.cells[n].rowSpanRange=Number(r.rowSpanRange-1),t.cells[n].colSpanRange=r.rowSpanRange>0?r.colSpanRange:1),!this.parent.enableColumnVirtualization||t.cells[n].cellSpan||this.containsKey(e.column.field,e.data[e.column.field])||this.backupMergeCells(e.column.field,e.data[e.column.field],e.colSpan),i},e.prototype.backupMergeCells=function(e,t,n){this.setMergeCells(this.generteKey(e,t),n)},e.prototype.generteKey=function(e,t){return e+"__"+t.toString()},e.prototype.splitKey=function(e){return e.split("__")},e.prototype.containsKey=function(e,t){return this.getMergeCells().hasOwnProperty(this.generteKey(e,t))},e.prototype.getMergeCells=function(){return this.parent.mergeCells},e.prototype.setMergeCells=function(e,t){this.parent.mergeCells[e]=t},e.prototype.updateVirtualCells=function(e){for(var t=this.getMergeCells(),n=0,i=Object.keys(t);n<i.length;n++){var r=i[n],o=t[r],s=this.splitKey(r),a=this.getIndexFromAllColumns(s[0]),l=this.parent.getColumnIndexesInView(),c=o-(l[0]-a);if(a<l[0]&&c>1)for(var h=0,d=e;h<d.length;h++){var u=d[h];if(u.data[s[0]].toString()===s[1].toString()){u.cells[0].cellSpan=c,u.cells[0].spanText=s[1];break}}}return e},e.prototype.getIndexFromAllColumns=function(e){return VA(this.parent.getVisibleColumns(),function(t,n){if(t.field===e)return n})[0]},e}(),hO=function(){function e(e,t,n){this.isSpan=!1,this.cellType=t,this.serviceLocator=e,this.parent=n,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}return e.prototype.render=function(e,t,n,i,r){return this.refreshRow(e,t,n,i,r)},e.prototype.refresh=function(e,t,n,i,r){n&&(e.data=uS({},e.changes),this.refreshMergeCells(e));var o=this.parent.element.querySelector("[data-uid="+e.uid+"]"),s=this.refreshRow(e,t,i,r),a=[].slice.call(s.cells);o.innerHTML="";for(var l=0,c=a;l<c.length;l++)o.appendChild(c[l])},e.prototype.refreshRow=function(e,t,n,i,r){var o=m(r)?this.element.cloneNode():r,s={data:e.data},a={data:e.data},l=g({},n,{}),c=this.parent.getColumns().filter(function(e){return"checkbox"===e.type&&e.field})[0],h=!1;c&&(h=dS(c.field,s.data)),e.isDataRow&&(e.isSelected=this.parent.getSelectedRowIndexes().indexOf(e.index)>-1||h),e.isDataRow&&this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0,-1===this.parent.getSelectedRowIndexes().indexOf(e.index)&&this.parent.getSelectedRowIndexes().push(e.index)),this.buildAttributeFromRow(o,e),F(o,l),WA(o,e.attributes);for(var d=this.serviceLocator.getService("cellRendererFactory"),u=function(t,n){var i=e.cells[t];i.isSelected=e.isSelected;var r=d.getCellRenderer(e.cells[t].cellType||xS.Data),s={index:m(e.index)?"":e.index.toString()};e.isExpand&&e.cells[t].cellType===xS.DetailExpand&&(s.class=p.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");var l=r.render(e.cells[t],e.data,s,e.isExpand);if(e.cells[t].cellType!==xS.Filter){if(e.cells[t].cellType===xS.Data||e.cells[t].cellType===xS.CommandColumn){p.parent.trigger("queryCellInfo",g(a,{cell:l,column:i.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[t].foreignKeyData,requestType:p.parent.requestTypeAction}));var c=!1;if(e.index>0&&p.isSpan){var h=(p.parent.groupSettings.columns.length>0&&!p.parent.getRowsObject()[e.index-1].isDataRow?p.parent.getRowsObject()[e.index].cells:p.parent.getRowsObject()[e.index-1].cells).filter(function(n){return n.column.uid===e.cells[t].column.uid})[0];c=h.isRowSpanned?h.isRowSpanned:h.rowSpanRange>1}(a.colSpan>1||e.cells[t].cellSpan>1||a.rowSpan>1||c)&&(p.isSpan=!0,l=new cO(p.serviceLocator,p.parent).render(a,e,t,l))}e.cells[t].isSpanned||o.appendChild(l)}},p=this,f=0,y=e.cells.length;f<y;f++)u(f);if(e.isDataRow&&(this.parent.trigger("rowDataBound",g(s,{row:o,rowHeight:this.parent.rowHeight})),this.parent.childGrid||this.parent.isRowDragable()||this.parent.detailTemplate)){var v=o.querySelectorAll(".e-rowcell:not(.e-hide)")[0];v&&v.classList.add("e-detailrowvisible")}if(this.parent.enableVirtualization&&(s.rowHeight=this.parent.rowHeight),s.rowHeight?o.style.height=s.rowHeight+"px":this.parent.rowHeight&&(o.querySelector(".e-headercell")||o.querySelector(".e-groupcaption"))&&(o.style.height=this.parent.rowHeight+"px"),e.cssClass&&o.classList.add(e.cssClass),this.parent.element.scrollHeight>this.parent.height&&this.parent.aggregates.length)for(f=0;f<this.parent.aggregates.length;f++)if(this.parent.aggregates[f].properties.columns[0].footerTemplate){var b=o.querySelectorAll(".e-summarycell");b.length&&P([b[b.length-1]],["e-lastsummarycell"])}return o},e.prototype.refreshMergeCells=function(e){for(var t=0,n=e.cells;t<n.length;t++)n[t].isSpanned=!1;return e},e.prototype.buildAttributeFromRow=function(e,t){var n={},i=[];t.isDataRow&&i.push("e-row"),t.isAltRow&&i.push("e-altrow"),m(t.index)||(n["aria-rowindex"]=t.index),t.rowSpan&&(n.rowSpan=t.rowSpan),t.uid&&(n["data-uid"]=t.uid),t.isSelected&&(n["aria-selected"]=!0),!1===t.visible&&i.push("e-hide"),n.class=i,WA(e,n)},e}(),dO=function(){function e(e){this.parent=e}return e.prototype.generateRows=function(e,t){for(var n=[],i=this.parent.enableVirtualization?t.startIndex:0,r=0,o=Object.keys(e).length;r<o;r++,i++)n[r]=this.generateRow(e[r],i);return n},e.prototype.ensureColumns=function(){var e=[];return(this.parent.detailTemplate||this.parent.childGrid)&&e.push(this.generateCell({},null,xS.DetailExpand)),this.parent.isRowDragable()&&e.push(this.generateCell({},null,xS.RowDragIcon)),e},e.prototype.generateRow=function(e,t,n,i,r,o){var s={foreignKeyData:{}};s.uid=KA("grid-row"),s.data=e,s.index=t,s.indent=i,s.tIndex=o,s.isDataRow=!0,s.parentGid=r,this.parent.isPrinting&&("All"===this.parent.hierarchyPrintMode?s.isExpand=!0:"Expanded"===this.parent.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[t]&&(s.isExpand=this.parent.expandedRows[t].isExpand)),s.cssClass=n,s.isAltRow=!!this.parent.enableAltRow&&t%2!=0,s.isSelected=this.parent.getSelectedRowIndexes().indexOf(t)>-1,this.refreshForeignKeyRow(s);var a=this.ensureColumns(),l=new aO(s);return l.cells=a.concat(this.generateCells(s)),l},e.prototype.refreshForeignKeyRow=function(e){this.parent.getForeignKeyColumns().forEach(function(t){d(t.field,aS(t,e.data),e.foreignKeyData)})},e.prototype.generateCells=function(e){var t=this,n=this.parent.getColumns(),i=[];return n.forEach(function(n,r){return i.push(t.generateCell(n,e.uid,m(n.commands)?void 0:xS.CommandColumn,null,r,e.foreignKeyData))}),i},e.prototype.generateCell=function(e,t,n,i,r,o){var s={visible:e.visible,isDataCell:!m(e.field||e.template),isTemplate:!m(e.template),rowID:t,column:e,cellType:m(n)?xS.Data:n,colSpan:i,commands:e.commands,isForeignKey:e.isForeignColumn&&e.isForeignColumn(),foreignKeyData:e.isForeignColumn&&e.isForeignColumn()&&h(e.field,o)};return(s.isDataCell||"checkbox"===s.column.type)&&(s.index=r),new lO(s)},e.prototype.refreshRows=function(e){var t=this;return e.forEach(function(e){t.refreshForeignKeyRow(e),e.cells=t.generateCells(e)}),e},e}(),uO=function(){function e(e){this.parent=e}return e.prototype.getData=function(){var e=this,t=[];return this.parent.aggregates.slice().forEach(function(n){var i=n.columns.filter(function(t){return!(t.footerTemplate||t.groupFooterTemplate||t.groupCaptionTemplate)||e.columnSelector(t)});i.length&&t.push({columns:i})}),t},e.prototype.columnSelector=function(e){return void 0!==e.footerTemplate},e.prototype.getColumns=function(e,t){var n=[];return this.parent.allowGrouping&&this.parent.groupSettings.columns.forEach(function(e){return n.push(new fA({}))}),(this.parent.detailTemplate||!m(this.parent.childGrid)||this.parent.isRowDragable())&&n.push(new fA({})),n.push.apply(n,this.parent.getColumns()),m(e)?n:n.slice(e,t)},e.prototype.generateRows=function(e,t,n,i){var r=this;if(0===this.parent.currentViewData.length)return[];var o=this.buildSummaryData(e,t),s=[];return this.getData().forEach(function(e,a){s.push(r.getGeneratedRow(e,o[a],t?t.level:void 0,n,i))}),s},e.prototype.getGeneratedRow=function(e,t,n,i,r){var o=this,s=[],a=this.getIndentByLevel(n),l=!m(this.parent.childGrid),c=this.parent.groupSettings.columns.length+(this.parent.detailTemplate||!m(this.parent.childGrid)?1:0);this.parent.isRowDragable()&&(c++,a=["e-indentcelltop"]),this.getColumns(i,r).forEach(function(t,n){return s.push(o.getGeneratedCell(t,e,n>=c?o.getCellType():n<o.parent.groupSettings.columns.length?xS.Indent:xS.DetailFooterIntent,a[n],l))});var h=new aO({data:t,attributes:{class:"e-summaryrow"}});return h.cells=s,h.uid=KA("grid-row"),h.visible=s.some(function(e){return e.isDataCell&&e.visible}),h},e.prototype.getGeneratedCell=function(e,t,n,i,r){var o=t.columns.filter(function(t){return t.columnName===e.field})[0],s={style:{textAlign:e.textAlign}};i&&(s.class=i),m(i)&&r&&(s.class="e-detailindentcelltop");var a={visible:e.visible,isDataCell:!m(o),isTemplate:o&&!m(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate),column:o||{},attributes:s,cellType:n};return new lO(a)},e.prototype.buildSummaryData=function(e,t){var n=this,i=[],r=this.getData(),o={};return r.forEach(function(r){o={},r.columns.forEach(function(i){o=n.setTemplate(i,t&&t.aggregates?t:e,o)}),i.push(o)}),i},e.prototype.getIndentByLevel=function(e){return this.parent.groupSettings.columns.map(function(){return"e-indentcelltop"})},e.prototype.setTemplate=function(e,t,n){var i=this,r=e.type,o={},s=e.getFormatter()||function(e){return e},a=t;return r instanceof Array||(r=[e.type]),r.forEach(function(r){var o=e.field+" - "+r.toLowerCase(),l=e.columnName,c="Custom"!==r&&a.aggregates&&o in a.aggregates?a.aggregates[o]:function(e,t,n,i){if("Custom"===e){var r=n.customAggregate;return"string"==typeof r&&(r=h(r,window)),r?r.call(i,t,n):""}return n.field in t||t instanceof Array?Jc.aggregates[e.toLowerCase()](t,n.field):null}(r,a.aggregates?a:t,e,i.parent);n[l]=n[l]||{},n[l][o]=c,n[l][r]=m(c)?" ":s(c),a.field&&(n[l].field=a.field,n[l].key=a.key)}),o.format=e.getFormatter(),e.setTemplate(o),n},e.prototype.getCellType=function(){return xS.Summary},e}(),pO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.columnSelector=function(e){return void 0!==e.groupFooterTemplate},t.prototype.getIndentByLevel=function(e){return void 0===e&&(e=this.parent.groupSettings.columns.length),this.parent.groupSettings.columns.map(function(t,n){return n<=e-1?"":"e-indentcelltop"})},t.prototype.getCellType=function(){return xS.GroupSummary},t}(uO),fO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.columnSelector=function(e){return void 0!==e.groupCaptionTemplate},t.prototype.getData=function(){return[e.prototype.getData.call(this).reduce(function(e,t){return e.columns=e.columns.concat(t.columns),e},{columns:[]})]},t.prototype.isEmpty=function(){return 0===(this.getData()[0].columns||[]).length},t.prototype.getCellType=function(){return xS.CaptionSummary},t}(uO),gO=function(e){function t(t){var n=e.call(this,t)||this;return n.rows=[],n.index=0,n.parent=t,n.summaryModelGen=new pO(t),n.captionModelGen=new fO(t),n}return Object(s.c)(t,e),t.prototype.generateRows=function(t,n){if(0===this.parent.groupSettings.columns.length)return e.prototype.generateRows.call(this,t,n);this.rows=[],this.index=this.parent.enableVirtualization?n.startIndex:0;for(var i=0,r=t.length;i<r;i++)this.getGroupedRecords(0,t[i],t.level,i,void 0,this.rows.length);return this.index=0,this.rows},t.prototype.getGroupedRecords=function(e,t,n,i,r,o){var s,a=n;if(m(t.items))if(m(t.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(t,e,i,this.rows.length));else for(var l=0,c=t.length;l<c;l++)this.getGroupedRecords(e,t[l],t.level,i,e,this.rows.length);else this.rows=this.rows.concat(this.generateCaptionRow(t,e,i,r,o)),t.items&&t.items.length&&this.getGroupedRecords(e+1,t.items,t.items.level,i,e+1,this.rows.length),this.parent.aggregates.length&&(s=this.rows).push.apply(s,this.summaryModelGen.generateRows(t,{level:a}))},t.prototype.getCaptionRowCells=function(e,t,n){var i=this,r=[],o=[],s=this.parent.getColumnByField(e),a=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(s=this.parent.columns.filter(function(t){return t.field===e})[0]);var l=this.parent.groupSettings.columns.length,c=this.parent;if(!this.parent.enableColumnVirtualization||-1!==a.indexOf(t)){for(var h=0;h<t;h++)r.push(this.generateIndentCell());r.push(this.generateCell({},null,xS.Expand))}if(t=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+l+(c.detailTemplate||c.childGrid?1:0)-t+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){var d=this.captionModelGen.generateRows(n)[0];g(n,d.data);var u=0;d.cells.some(function(e,t){return u=t,e.visible&&e.isDataCell}),o=d.cells.slice(u).filter(function(e){return e.visible}),d.visible&&o[0].column.field===this.parent.getVisibleColumns()[0].field&&(o=o.slice(1)),1===this.parent.getVisibleColumns().length&&(o=[]),t-=o.length}var p=this.parent.enableColumnVirtualization?this.parent.getColumns():[s],f=!0;return p.forEach(function(e,n){var o=f&&-1!==a.indexOf(t);o&&(f=!1);var h=!i.parent.enableColumnVirtualization||o?xS.GroupCaption:xS.GroupCaptionEmpty;t=i.parent.enableColumnVirtualization&&h===xS.GroupCaption?t+l:t,c.isRowDragable()&&t++,r.push(i.generateCell(s,null,h,t))}),r.push.apply(r,o),r},t.prototype.generateCaptionRow=function(e,t,n,i,r){var o={},s=this.parent.getColumnByField(e.field);o.data=g({},e),s&&(o.data.field=e.field),o.isDataRow=!1,o.isExpand=!0,o.parentGid=n,o.childGid=i,o.tIndex=r,o.gSummary=m(e.items.records)?e.items.length:e.items.records.length,o.uid=KA("grid-row");var a=new aO(o);return a.indent=t,this.getForeignKeyData(a),a.cells=this.getCaptionRowCells(e.field,t,a.data),a},t.prototype.getForeignKeyData=function(e){var t=e.data,n=this.parent.getColumnByField(t.field);n&&n.isForeignColumn&&n.isForeignColumn()&&d("foreignKey",m(t.key)?"":n.valueAccessor(n.foreignKeyValue,aS(n,{},t.key)[0],n),e.data)},t.prototype.generateDataRows=function(e,t,n,i){for(var r=[],o=this.parent.getColumnIndexesInView(),s=0,a=e.length;s<a;s++,i++){r[s]=this.generateRow(e[s],this.index,s?void 0:"e-firstchildrow",t,n,i);for(var l=0;l<t;l++)this.parent.enableColumnVirtualization&&-1===o.indexOf(t)||r[s].cells.unshift(this.generateIndentCell());this.index++}return r},t.prototype.generateIndentCell=function(){return this.generateCell({},null,xS.Indent)},t.prototype.refreshRows=function(e){var t=this,n=this.parent.getColumnIndexesInView();return e.forEach(function(e){if(e.isDataRow){e.cells=t.generateCells(e);for(var i=0;i<e.indent;i++)t.parent.enableColumnVirtualization&&-1===n.indexOf(e.indent)||e.cells.unshift(t.generateIndentCell())}else{var r=t.generateCaptionRow(e.data,e.indent);e.cells=r.cells}}),e},t}(dO),mO=function(){function e(e,t){var n=this;this.rows=[],this.freezeRows=[],this.movableRows=[],this.isLoaded=!0,this.drop=function(e){n.parent.notify(wA,{target:e.target,droppedElement:e.droppedElement}),B(e.droppedElement)},this.rafCallback=function(e){var t=e;return function(){if(n.ariaService.setBusy(n.getPanel().firstChild,!1),!n.parent.isDestroyed){var i=n.rows.slice(0);if(0!==n.parent.getFrozenColumns()&&(i=e.isFrozen?n.freezeRows:n.movableRows),n.parent.notify(CA,{rows:i,args:t}),n.isLoaded&&(n.parent.trigger(yA,{}),n.parent.allowTextWrap&&n.parent.notify(_A,{case:"textwrap"})),t){var r=(t.requestType||"").toLowerCase()+"-complete";n.parent.notify(r,t),"batchsave"===e.requestType&&(e.cancel=!1,n.parent.trigger(mA,e))}n.isLoaded&&n.parent.hideSpinner()}}},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.generator=this.getModelGenerator(),this.parent.isDestroyed||(this.parent.on(IA,this.setVisible,this),this.parent.on(OA,this.colGroupRefresh,this),this.parent.on(xA,this.enableAfterRender,this))}return e.prototype.renderPanel=function(){var e=this.parent,t=this.parent.createElement("div",{className:"e-gridcontent"}),n=this.parent.createElement("div",{className:"e-content"});this.ariaService.setOptions(n,{busy:!1}),t.appendChild(n),this.setPanel(t),e.element.appendChild(t)},e.prototype.renderTable=function(){var e=this.getPanel(),t=e.querySelector(".e-virtualtable"),n=e.querySelector(".e-virtualtrack");!this.parent.enableVirtualization||m(t)||m(n)||(B(t),B(n)),e.appendChild(this.createContentTable("_content_table")),this.setTable(e.querySelector(".e-table")),this.ariaService.setOptions(this.getTable(),{multiselectable:"Multiple"===this.parent.selectionSettings.type}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdrcont")},e.prototype.createContentTable=function(e){var t=this.getPanel().firstChild;this.getTable()&&B(this.getTable());var n=this.parent.createElement("table",{className:"e-table",attrs:{cellspacing:"0.25px",role:"grid",id:this.parent.element.id+e}});return this.setColGroup(this.parent.element.querySelector(".e-gridheader").querySelector("colgroup").cloneNode(!0)),n.appendChild(this.getColGroup()),n.appendChild(this.parent.createElement("tbody")),t.appendChild(n),t},e.prototype.splitRows=function(e){this.parent.getFrozenColumns()&&(0===e?(this.freezeRows=this.rows,this.freezeRowElements=this.rowElements):this.movableRows=this.rows)},e.prototype.refreshContentRows=function(e){var t=this;void 0===e&&(e={});var n=this.parent;if(0!==n.currentViewData.length){var i,r,o=n.currentViewData,s=document.createDocumentFragment(),a=document.createDocumentFragment(),l=n.getColumns(),c=n.getFrozenColumns(),h=new hO(this.serviceLocator,null,this.parent);this.rowElements=[],this.rows=[];var d=this.getPanel().querySelector(".e-frozencontent"),u=this.getPanel().querySelector(".e-movablecontent"),p=this.getPanel().querySelector(".e-content");hS(n)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some(function(t){return e.requestType===t})&&(n.vcRows=[],n.vRows=[]);var f=this.generator.generateRows(o,e);m(f[0].cells[0])&&(u.querySelector("tbody").innerHTML="");var y=f[0].cells[0].index;if(this.parent.registeredTemplate&&this.parent.registeredTemplate.template&&!e.isFrozen){for(var v=[],b=0;b<this.parent.registeredTemplate.template.length;b++)for(var w=0;w<this.parent.registeredTemplate.template[b].rootNodes.length;w++)m(this.parent.registeredTemplate.template[b].rootNodes[w].parentNode)&&v.push(this.parent.registeredTemplate.template[b]);this.parent.destroyTemplate(["template"],v)}this.parent.enableColumnVirtualization&&new cO(this.serviceLocator,this.parent).updateVirtualCells(f),this.tbody=c&&y>=c?u.querySelector("tbody"):this.getTable().querySelector("tbody");var C=0;if(hS(n)&&n.vcRows.length){var x=m(e.virtualInfo.offsets)?m(e.scrollTop)?0:e.scrollTop.top:e.virtualInfo.offsets.top;if(0!==x)for(var A=n.vGroupOffsets,S=n.pageSettings.pageSize/2,O=Object.keys(A).map(function(e){return A[e]}),E=0;E<O.length;E++)if(x<O[E]){if(m(e.virtualInfo)||"up"!==e.virtualInfo.direction){e.virtualInfo.blockIndexes=0===E||1===E?[1,2]:[E,E+1],C=0===E||1===E?0:E*S;break}e.virtualInfo.blockIndexes=0===E||1===E?[1,2]:[E,E+1],C=0===E||1===E?0:E*S;break}}b=C;for(var I=f.length;b<I&&(this.rows.push(f[b]),!(hS(n)&&this.rows.length>=n.pageSettings.pageSize));b++){if(n.rowTemplate){var D=n.getRowTemplate()(g({index:b},o[b]),n,"rowTemplate");if("TBODY"===D[0].tagName){for(w=0;w<D.length;w++){var k="tr"===D[w].nodeName.toLowerCase();(k||D[w].querySelectorAll&&D[w].querySelectorAll("tr").length)&&(i=k?D[w]:D[w].querySelector("tr"))}n.frozenRows&&b<n.frozenRows?a.appendChild(i):s.appendChild(i)}else i=JA(n.frozenRows&&b<n.frozenRows?a:s,D);this.parent.trigger("rowDataBound",{data:f[b].data,row:i})}else i=h.render(f[b],l),n.frozenRows&&b<n.frozenRows?a.appendChild(i):s.appendChild(i),f[b].isExpand&&n.notify("expandchildgrid",i.cells[n.groupSettings.columns.length]);f[b].isDataRow&&this.rowElements.push(i),this.ariaService.setOptions(this.getTable(),{colcount:n.getColumns().length.toString()})}this.splitRows(y),n.frozenRows&&((r=c?n.getHeaderContent().querySelector(0===y?".e-frozenheader":".e-movableheader").querySelector("tbody"):n.getHeaderTable().querySelector("tbody")).innerHTML="",r.appendChild(a)),n.frozenRows&&0===y&&p.offsetHeight===Number(n.height)&&(p.style.height=p.offsetHeight-r.offsetHeight+"px"),c&&0===y&&(this.getPanel().firstChild.style.overflowY="hidden"),e.rows=this.rows.slice(0),e.isFrozen=0!==this.parent.getFrozenColumns()&&!e.isFrozen,this.index=y,HA(function(){t.parent.notify("beforeFragAppend",e),t.parent.enableVirtualization||(B(t.tbody),t.tbody=t.parent.createElement("tbody")),c?(t.tbody.appendChild(s),0===t.index?(t.isLoaded=!1,d.querySelector("table").appendChild(t.tbody)):(t.tbody.childElementCount<1&&t.tbody.appendChild(t.parent.createElement("tr").appendChild(t.parent.createElement("td"))),t.isLoaded=!0,u.querySelector("table").appendChild(t.tbody),d.style.height=u.offsetHeight-tS()+"px",u.style.overflowY="auto"!==t.parent.height?"scroll":"auto",d.style.borderRightWidth="1px")):t.appendContent(t.tbody,s,e),c&&0===y&&t.refreshContentRows(g({},e)),s=null},this.rafCallback(g({},e)))}},e.prototype.appendContent=function(e,t,n){e.appendChild(t),this.getTable().appendChild(e)},e.prototype.getPanel=function(){return this.contentPanel},e.prototype.setPanel=function(e){this.contentPanel=e},e.prototype.getTable=function(){return this.contentTable},e.prototype.setTable=function(e){this.contentTable=e},e.prototype.getRows=function(){return this.parent.getFrozenColumns()?this.freezeRows:this.rows},e.prototype.getMovableRows=function(){return this.movableRows},e.prototype.getRowElements=function(){return this.parent.getFrozenColumns()?this.freezeRowElements:this.rowElements},e.prototype.getMovableRowElements=function(){return this.rowElements},e.prototype.setRowElements=function(e){this.rowElements=e},e.prototype.getColGroup=function(){return this.colgroup},e.prototype.setColGroup=function(e){return this.colgroup=e},e.prototype.setVisible=function(e){var t,n=this.parent,i=n.getFrozenColumns(),r=[];if(i)for(var o=this.freezeRows,s=this.movableRows,a=o.length,l=void 0,c=0,h=void 0;c<a;c++){l=s[c].cells.length,h=o[c].clone();for(var d=0;d<l;d++)h.cells.push(s[c].cells[d]);r.push(h)}else r=this.getRows();r.some(function(e){return e.isDataRow&&(t=e),e.isDataRow});for(var u=0,p=e.length;u<p;u++){var f=e[u],g=this.parent.getNormalizedColumnIndex(f.uid);if(-1!==g&&t&&g<t.cells.length){if(this.canSkip(f,t,g))continue;var m=!0===f.visible?"":"none";U(i?g<i?this.getColGroup().childNodes[g]:n.getContent().querySelector(".e-movablecontent").querySelector("colgroup").childNodes[g-i]:this.getColGroup().childNodes[g],{display:m})}}this.refreshContentRows({requestType:"refresh"})},e.prototype.colGroupRefresh=function(){if(this.getColGroup()){var e=this.parent.element.querySelector(".e-gridheader").querySelector("colgroup").cloneNode(!0);this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)}},e.prototype.initializeContentDrop=function(){new ft(this.parent.getContent(),{accept:".e-dragclone",drop:this.drop})},e.prototype.canSkip=function(e,t,n){return m(t)||m(e.visible)||t.cells[n].visible===e.visible},e.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new gO(this.parent):new dO(this.parent)},e.prototype.renderEmpty=function(e){this.getTable().appendChild(e),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector("tbody").innerHTML="")},e.prototype.setSelection=function(e,t,n){this.parent.getFrozenColumns()&&this.getMovableRows().filter(function(t){return n||e===t.uid}).forEach(function(e){return e.isSelected=t}),this.getRows().filter(function(t){return n||e===t.uid}).forEach(function(e){e.isSelected=t,e.cells.forEach(function(e){return e.isSelected=t})})},e.prototype.getRowByIndex=function(e){return this.parent.getDataRows()[e]},e.prototype.getVirtualRowIndex=function(e){return e},e.prototype.getMovableRowByIndex=function(e){return this.parent.getMovableDataRows()[e]},e.prototype.enableAfterRender=function(e){"group"===e.module&&e.enable&&(this.generator=this.getModelGenerator())},e.prototype.setRowObjects=function(e){this.rows=e},e}(),yO=function(){function e(e,t){var n=this;this.frzIdx=0,this.notfrzIdx=0,this.helper=function(e){var t=n.parent,i=e.sender.target,r=QA(i,"e-headercell");if(!t.allowReordering&&!t.allowGrouping||!m(r)&&r.querySelectorAll(".e-checkselectall").length>0)return!1;var o=n.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),s=i.classList.contains("e-headercell")?i:r;if(!s||!t.allowReordering&&s.classList.contains("e-stackedheadercell"))return!1;var a,l=s.offsetHeight,c=s.querySelector(".e-headercelldiv")||s.querySelector(".e-stackedheadercelldiv");if(c){if(a=s.querySelector(".e-stackedheadercelldiv")?t.getStackedHeaderColumnByHeaderText(c.innerText.trim(),t.columns):t.getColumnByUid(c.getAttribute("e-mappinguid")),n.column=a,n.column.lockColumn)return!1;o.setAttribute("e-mappinguid",n.column.uid)}if(a&&!m(a.headerTemplate))if(m(a.headerTemplate))o.innerHTML=a.headerTemplate;else{var h=t.getColumnIndexByField(a.field);JA(o,a.getHeaderTemplate()(g({index:h},a),t,"headerTemplate"))}else o.innerHTML=c?a.headerText:s.firstElementChild.innerHTML;return o.style.width=s.offsetWidth+"px",o.style.height=s.offsetHeight+"px",o.style.lineHeight=(l-6).toString()+"px",t.element.appendChild(o),o},this.dragStart=function(e){var t=n.parent;t.element.querySelector(".e-gridpopup").style.display="none",t.notify(vA,{target:e.target,column:n.column,event:e.event})},this.drag=function(e){var t=n.parent,i=e.target;if(i){var r=V(i,".e-grid"),o=n.parent.element.querySelector(".e-cloneproperties");if(!r||r.getAttribute("id")!==t.element.getAttribute("id"))return W(o,["e-notallowedcur"],["e-defaultcur"]),void(t.allowReordering&&(t.element.querySelector(".e-reorderuparrow").style.display="none",t.element.querySelector(".e-reorderdownarrow").style.display="none"));t.notify(bA,{target:e.target,column:n.column,event:e.event})}},this.dragStop=function(e){var t,i=n.parent;i.element.querySelector(".e-gridpopup").style.display="none",(!QA(e.target,"e-headercell")&&!QA(e.target,"e-groupdroparea")||!i.allowReordering&&QA(e.target,"e-headercell")||!e.helper.getAttribute("e-mappinguid")&&QA(e.target,"e-groupdroparea"))&&(B(e.helper),t=!0),i.notify(TA,{target:e.target,event:e.event,column:n.column,cancel:t})},this.drop=function(e){var t=n.parent,i=e.droppedElement.getAttribute("e-mappinguid"),r=V(e.target,".e-grid");B(e.droppedElement),r&&r.getAttribute("id")!==t.element.getAttribute("id")||!t.allowReordering&&!t.allowGrouping||t.notify(MA,{target:e.target,uid:i})},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),this.parent.isDestroyed||(this.parent.on(IA,this.setVisible,this),this.parent.on(DA,this.colPosRefresh,this))}return e.prototype.renderPanel=function(){var e=this.parent.createElement("div",{className:"e-gridheader"}),t=this.parent.createElement("div",{className:"e-headercontent"});this.parent.columns.some(function(e){return void 0!==e.columns})&&e.classList.add("e-stackedheader"),e.appendChild(t),this.setPanel(e),this.parent.element.appendChild(e)},e.prototype.renderTable=function(){var e=this.getPanel();e.appendChild(this.createHeaderTable()),this.setTable(e.querySelector(".e-table")),this.parent.getFrozenColumns()||(this.initializeHeaderDrag(),this.initializeHeaderDrop()),this.parent.notify("header-refreshed",{rows:this.rows,args:{isFrozen:0!==this.parent.getFrozenColumns()}})},e.prototype.getPanel=function(){return this.headerPanel},e.prototype.setPanel=function(e){this.headerPanel=e},e.prototype.getTable=function(){return this.headerTable},e.prototype.setTable=function(e){this.headerTable=e},e.prototype.getColGroup=function(){return this.colgroup},e.prototype.setColGroup=function(e){return this.colgroup=e},e.prototype.getRows=function(){return this.getTable().tHead.rows},e.prototype.createHeaderTable=function(){var e=this.createTable(),t=this.getPanel().firstChild;return t.appendChild(e),t},e.prototype.createTable=function(){var e=this.parent;this.getTable()&&!e.getFrozenColumns()&&B(this.getTable()),e.getColumns();var t=this.parent.createElement("table",{className:"e-table",attrs:{cellspacing:"0.25px",role:"grid"}}),n=(this.getPanel(),this.createHeaderContent()),i=n.thead,r=this.parent.createElement("tbody",{className:this.parent.frozenRows?"":"e-hide"});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});for(var o,s=this.parent.createElement("colgroup"),a=this.parent.createElement("tr"),l=this.rows=n.rows,c=(new hO(this.serviceLocator,xS.Header,this.parent),0),h=l.length;c<h;c++)for(var d=0,u=l[c].cells.length;d<u;d++)o=this.parent.createElement("td"),a.appendChild(o);return(e.allowFiltering||e.allowSorting||e.allowGrouping)&&t.classList.add("e-sortfilter"),this.updateColGroup(s),r.appendChild(a),t.appendChild(this.setColGroup(s)),t.appendChild(i),t.appendChild(r),t.appendChild(this.caption),this.ariaService.setOptions(t,{colcount:e.getColumns().length.toString()}),t},e.prototype.createHeaderContent=function(){var e=this.parent,t=e.getColumns(),n=this.parent.createElement("thead"),i=this.parent.createElement("tr",{className:"e-columnheader"}),r=new hO(this.serviceLocator,xS.Header,e);r.element=i;var o,s=[];this.colDepth=function(e){for(var t=0,n=0;n<e.length;n++){var i=pS(e[n],0);t<i&&(t=i)}return t+1}(e.columns);for(var a=0,l=this.colDepth;a<l;a++)s[a]=this.generateRow(a),s[a].cells=[];for(s=this.ensureColumns(s),s=this.getHeaderCells(s),a=0,l=this.colDepth;a<l;a++)o=r.render(s[a],t),this.parent.rowHeight&&o.querySelector(".e-headercell")&&(o.style.height=this.parent.rowHeight+"px"),n.appendChild(o);return{thead:n,rows:s}},e.prototype.updateColGroup=function(e){var t,n=this.parent.getColumns(),i=this.parent.getColumnIndexesInView();if(e.id=this.parent.element.id+"colGroup",this.parent.allowGrouping)for(var r=0,o=this.parent.groupSettings.columns.length;r<o;r++)this.parent.enableColumnVirtualization&&-1===i.indexOf(r)||(t=this.parent.createElement("col",{className:"e-group-intent"}),e.appendChild(t));for((this.parent.detailTemplate||this.parent.childGrid)&&(t=this.parent.createElement("col",{className:"e-detail-intent"}),e.appendChild(t)),this.parent.isRowDragable()&&(t=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(t)),r=0,o=n.length;r<o;r++)t=this.parent.createElement("col"),!1===n[r].visible&&U(t,{display:"none"}),e.appendChild(t);return e},e.prototype.ensureColumns=function(e){for(var t=this.parent,n=this.parent.getColumnIndexesInView(),i=0,r=e.length;i<r;i++){if(t.allowGrouping)for(var o=0,s=t.groupSettings.columns.length;o<s;o++)this.parent.enableColumnVirtualization&&-1===n.indexOf(o)||e[i].cells.push(this.generateCell({},xS.HeaderIndent));(t.detailTemplate||t.childGrid)&&e[i].cells.push(this.generateCell({},xS.DetailHeader)),t.isRowDragable()&&e[i].cells.push(this.generateCell({},xS.RowDragHIcon))}return e},e.prototype.getHeaderCells=function(e){var t=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),n=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(var i=0;i<n.length;i++)this.lockColsRendered=!1,e=this.appendCells(n[i],e,0,0===i,!1,i===n.length-1,t);i=0;for(var r=n.length;i<r;i++)this.notfrzIdx=0,this.lockColsRendered=!0,e=this.appendCells(n[i],e,0,0===i,!1,i===r-1,t);return e},e.prototype.appendCells=function(e,t,n,i,r,o,s){var a=o?"e-lastcell":"",l=this.parent.getFrozenColumns();if(e.columns){var c=this.getCellCnt(e,0);if(c){var h=this.refreshFrozenHdr(e.columns,{isPartial:!1,isComp:!0,cnt:0}),d=this.getStackedLockColsCount(e,0);(!l&&(!this.parent.lockcolPositionCount||!this.lockColsRendered&&d||this.lockColsRendered&&c-d)||l&&(!s&&(this.parent.frozenColumns-this.frzIdx>0||h.isPartial)||s&&c+this.frzIdx>this.parent.frozenColumns&&!h.isComp))&&t[n].cells.push(new lO({cellType:xS.StackedHeader,column:e,colSpan:this.getColSpan(c,s,h.cnt,d)}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(var u=0;u<e.columns.length;u++)t=this.appendCells(e.columns[u],t,n+1,i,0===u,u===e.columns.length-1&&o,s);if(this.lockColsRendered){u=0;for(var p=e.columns.length;u<p;u++)t=this.appendCells(e.columns[u],t,n+1,i,0===u,u===p-1&&o,s)}}else(!l&&(!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)||l&&(!s&&(this.frzIdx+this.notfrzIdx<this.parent.frozenColumns||e.isFrozen)&&(!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)||s&&this.frzIdx+this.notfrzIdx>=this.parent.frozenColumns&&!e.isFrozen&&(!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)))&&t[n].cells.push(this.generateCell(e,xS.Header,this.colDepth-n,(i?"":r?"e-firstcell":"")+a,n,this.parent.getColumnIndexByUid(e.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;return t},e.prototype.getStackedLockColsCount=function(e,t){if(e.columns)for(var n=0;n<e.columns.length;n++)t=this.getStackedLockColsCount(e.columns[n],t);else e.lockColumn&&t++;return t},e.prototype.refreshFrozenHdr=function(e,t){for(var n=0;n<e.length;n++)e[n].columns?t=this.refreshFrozenHdr(e[n].columns,t):(e[n].isFrozen&&(t.isPartial=!0,t.cnt++),t.isComp=t.isComp&&(e[n].isFrozen||this.parent.getColumnIndexByField(e[n].field)<this.parent.frozenColumns));return t},e.prototype.getColSpan=function(e,t,n,i){var r=this.parent.frozenColumns;return this.parent.getFrozenColumns()&&this.frzIdx+e>r?t?e=e-(r>this.frzIdx?r-this.frzIdx:0)-n:e-=e-(r>this.frzIdx?r+n-this.frzIdx:n):this.parent.lockcolPositionCount&&(e=this.lockColsRendered?e-i:i),e},e.prototype.generateRow=function(e){return new aO({})},e.prototype.generateCell=function(e,t,n,i,r,o){var s={visible:e.visible,isDataCell:!1,isTemplate:!m(e.headerTemplate),rowID:"",column:e,cellType:t,rowSpan:n,className:i,index:r,colIndex:o};return(!s.rowSpan||s.rowSpan<2)&&delete s.rowSpan,new lO(s)},e.prototype.setVisible=function(e){for(var t,n=this.parent,i=([].slice.call(this.getRows()),""),r=n.getFrozenColumns(),o=0,s=e.length;o<s;o++){var a=e[o];t=n.getNormalizedColumnIndex(a.uid),!1===a.visible&&(i="none"),U(r?t<r?this.getColGroup().children[t]:n.getHeaderContent().querySelector(".e-movableheader").querySelector("colgroup").children[t-r]:this.getColGroup().children[t],{display:i}),this.refreshUI()}},e.prototype.colPosRefresh=function(){this.refreshUI()},e.prototype.refreshUI=function(){var e=this.getPanel(),t=this.getTable(),n=this.parent.getFrozenColumns();if(this.getTable()){B(this.getTable()),t.removeChild(t.firstChild),t.removeChild(t.childNodes[0]);var i=this.parent.createElement("colgroup"),r=this.createHeaderContent();this.rows=r.rows,t.insertBefore(r.thead,t.firstChild),this.updateColGroup(i),t.insertBefore(this.setColGroup(i),t.firstChild),this.setTable(t),this.appendContent(t),this.parent.notify(OA,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),n||this.initializeHeaderDrag();for(var o=[].slice.call(e.querySelectorAll("tr.e-columnheader")),s=0,a=o;s<a.length;s++){var l=[].slice.call(a[s].querySelectorAll(".e-grouptopleftcell"));l.length&&l[l.length-1].classList.add("e-lastgrouptopleftcell")}n||this.parent.notify("header-refreshed",{rows:this.rows,args:{isFrozen:0!==this.parent.getFrozenColumns()}}),this.parent.allowTextWrap&&"Header"===this.parent.textWrapSettings.wrapMode&&iS(o,!0)}},e.prototype.appendContent=function(e){this.getPanel().firstChild.appendChild(e)},e.prototype.getCellCnt=function(e,t){if(e.columns)for(var n=0,i=e.columns.length;n<i;n++)t=this.getCellCnt(e.columns[n],t);else e.visible&&t++;return t},e.prototype.initializeHeaderDrag=function(){if(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)for(var e=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-columnheader")),t=0,n=e.length;t<n;t++)new pt(e[t],{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler"})},e.prototype.initializeHeaderDrop=function(){new ft(this.parent.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})},e}(),vO=function(){function e(e,t){this.localizer=t.getService("localization"),this.formatter=t.getService("valueFormatter"),this.parent=e,this.element=this.parent.createElement("TD",{className:"e-rowcell",attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox"}})}return e.prototype.getGui=function(){return""},e.prototype.format=function(e,t,n){return m(e.format)||(t=this.formatter.toView(t,e.getFormatter())),m(t)?"":t.toString()},e.prototype.evaluate=function(e,t,n,i,r){var o,s;if(t.column.template){var a=uS({},n,((o={}).foreignKeyData=r,o));return JA(e,s=t.column.getColumnTemplate()(g({index:i.index},a),this.parent,"template")),this.parent.notify("template-result",{template:s}),s=null,e.setAttribute("aria-label",e.innerText+" is template cell column header "+t.column.headerText),!1}return!0},e.prototype.invokeFormatter=function(e,t,n){var i;return m(e.formatter)||(t=(i=e.formatter).prototype&&"getValue"in i.prototype?(new(0,e.formatter)).getValue(e,n):"function"==typeof e.formatter?e.formatter(e,n):e.formatter.getValue(e,n)),t},e.prototype.render=function(e,t,n){return this.refreshCell(e,t,n)},e.prototype.refreshTD=function(e,t,n,i){var r=this.refreshCell(t,n,i);e.innerHTML="";for(var o=0,s=[].slice.call(r.childNodes);o<s.length;o++)e.appendChild(s[o])},e.prototype.refreshCell=function(e,t,n){var i,r,o=this.element.cloneNode(),s=e.column;e.isForeignKey&&(r=e.foreignKeyData[0]||((i={})[s.foreignKeyValue]=s.format?null:"",i));var a=this.getGui(),l=e.isForeignKey?this.getValue(s.foreignKeyValue,r,s):this.getValue(s.field,t,s);if("date"!==s.type&&"datetime"!==s.type||m(l)||(l=new Date(l)),a=(l=this.format(s,l,t)).toString(),"boolean"===s.type&&!s.displayAsCheckBox){var c="true"!==l&&"false"!==l?null:"true"===l?"True":"False";a=c?this.localizer.getConstant(c):a}var h=this.invokeFormatter(s,l,t);if(a=m(s.formatter)?a:m(h)?"":h.toString(),o.setAttribute("aria-label",(""===a?"empty":a)+" column header "+e.column.headerText),m(e.column.headerText)||o.setAttribute("aria-label",a+" column header "+e.column.headerText),this.evaluate(o,e,t,n,r)&&"checkbox"!==s.type?this.appendHtml(o,a,s.getDomSetter?s.getDomSetter():"innerHTML"):"checkbox"===s.type&&(o.classList.add("e-gridchkbox"),o.setAttribute("aria-label","checkbox"),(u=Uy(this.parent.createElement,!1,{checked:l=!!this.parent.selectionSettings.persistSelection&&"true"===l,label:" "})).insertBefore(this.rowChkBox.cloneNode(),u.firstChild),o.appendChild(u)),"Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0),this.setAttributes(o,e,n),"boolean"===s.type&&s.displayAsCheckBox){var d=isNaN(parseInt(l.toString(),10))?"true"===l:parseInt(l.toString(),10)>0,u=Uy(this.parent.createElement,!1,{checked:d,label:" "});o.innerHTML="",u.classList.add("e-checkbox-disabled"),o.appendChild(u),o.setAttribute("aria-label",d+" column header "+e.column.headerText)}return o},e.prototype.appendHtml=function(e,t,n){return void 0===n&&(n="innerHTML"),e[n]=t,e},e.prototype.setAttributes=function(e,t,n){var i=t.column;this.buildAttributeFromCell(e,t,"checkbox"===i.type),WA(e,n),WA(e,t.attributes),i.customAttributes&&WA(e,i.customAttributes),i.textAlign&&(e.style.textAlign=i.textAlign),"Clip"===i.clipMode?e.classList.add("e-gridclip"):"EllipsisWithTooltip"===i.clipMode&&e.classList.add("e-ellipsistooltip")},e.prototype.buildAttributeFromCell=function(e,t,n){var i={},r=[];t.colSpan&&(i.colSpan=t.colSpan),t.rowSpan&&(i.rowSpan=t.rowSpan),t.isTemplate&&r.push("e-templatecell"),t.isSelected&&(r.push.apply(r,["e-selectionbackground","e-active"]),n&&e.querySelector(".e-frame").classList.add("e-check")),m(t.index)||(i["aria-colindex"]=t.index),t.visible||r.push("e-hide"),i.class=r,WA(e,i)},e.prototype.getValue=function(e,t,n){return n.valueAccessor(e,t,n)},e}(),bO=function(){function e(){}return e.prototype.setOptions=function(e,t){Object.keys(t).forEach(function(n){return wO(e,xO[n],t[n])})},e.prototype.setExpand=function(e,t){wO(e,xO.expand,t)},e.prototype.setSort=function(e,t){wO(e,xO.sort,t,"boolean"==typeof t)},e.prototype.setBusy=function(e,t){wO(e,xO.busy,t),wO(e,xO.invalid,null,!0)},e.prototype.setGrabbed=function(e,t,n){wO(e,xO.grabbed,t,n)},e.prototype.setDropTarget=function(e,t){wO(e,xO.dropeffect,"copy",!t)},e}();function wO(e,t,n,i){i?e.removeAttribute(t):e&&e.setAttribute(t,n)}var CO,xO={expand:"aria-expanded",role:"role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount"},AO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-headercell",attrs:{role:"columnheader",tabindex:"-1"}}),t.ariaService=new bO,t.hTxtEle=t.parent.createElement("span",{className:"e-headertext"}),t.sortEle=t.parent.createElement("div",{className:"e-sortfilterdiv e-icons"}),t.gui=t.parent.createElement("div"),t.chkAllBox=t.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox"}}),t}return Object(s.c)(t,e),t.prototype.getGui=function(){return this.gui.cloneNode()},t.prototype.render=function(e,t,n){var i=this.element.cloneNode(),r=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,i,r)},t.prototype.refresh=function(e,t){this.clean(t);var n=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,t,n)},t.prototype.clean=function(e){e.innerHTML=""},t.prototype.prepareHeader=function(e,t,n){var i,r=e.column,o={},s=this.getGui();if(F(s,{"e-mappinguid":r.uid,class:"e-headercelldiv"}),"checkbox"!==r.type){var a=r.headerText,l=this.hTxtEle.cloneNode();l[r.getDomSetter()]=a,s.appendChild(l)}else{r.editType="booleanedit";var c=Uy(this.parent.createElement,!1,{checked:!1,label:" "});c.insertBefore(this.chkAllBox.cloneNode(),c.firstChild),s.appendChild(c),s.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(t,e),this.appendHtml(t,s),t.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&r.allowFiltering&&!m(r.field)&&(!this.parent.showColumnMenu||!r.showColumnMenu)){F(n,{"e-mappinguid":"e-flmenu-"+r.uid}),t.classList.add("e-fltr-icon");var h=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==h.length)for(var d=0;d<this.parent.columns.length;d++)for(var u=0;u<this.parent.filterSettings.columns.length;u++)if(this.parent.filterSettings.columns[u].field===r.field){n.classList.add("e-filtered"),h.push(r.field);break}t.appendChild(n.cloneNode())}e.className&&t.classList.add(e.className),r.customAttributes&&WA(t,r.customAttributes),r.allowSorting&&(o.sort="none"),r.allowGrouping&&(o.grabbed=!1),t=this.extendPrepareHeader(r,t);var p=this.parent,f=p.getColumnIndexByField(r.field);if(m(r.headerTemplate)||(i=r.getHeaderTemplate()(g({index:f},r),p,"headerTemplate"),t.firstElementChild.innerHTML="",JA(t.firstElementChild,i)),this.ariaService.setOptions(t,o),!m(r.headerTextAlign)||!m(r.textAlign)){var y=r.headerTextAlign||r.textAlign;s.style.textAlign=y,"Right"===y||"Left"===y?t.classList.add("Right"===y?"e-rightalign":"e-leftalign"):"Center"===y&&t.classList.add("e-centeralign")}return"Clip"===r.clipMode?t.classList.add("e-gridclip"):"EllipsisWithTooltip"===r.clipMode&&t.classList.add("e-ellipsistooltip"),t.setAttribute("aria-rowspan",(m(e.rowSpan)?1:e.rowSpan).toString()),t.setAttribute("aria-colspan","1"),this.parent.trigger("headerCellInfo",{cell:e,node:t}),t},t.prototype.extendPrepareHeader=function(e,t){if(this.parent.showColumnMenu&&e.showColumnMenu&&!m(e.field)){var n=this.parent.createElement("div",{className:"e-icons e-columnmenu"}),i=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==i.length)for(var r=0;r<this.parent.columns.length;r++)for(var o=0;o<this.parent.filterSettings.columns.length;o++)if(this.parent.filterSettings.columns[o].field===e.field){n.classList.add("e-filtered"),i.push(e.field);break}t.classList.add("e-fltr-icon"),t.appendChild(n)}if(this.parent.allowResizing){var s=this.parent.createElement("div");s.className=e.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",t.appendChild(s)}return t},t.prototype.appendHtml=function(e,t){return e.appendChild(t),e},t}(vO),SO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{role:"columnheader",tabindex:"-1"}}),t}return Object(s.c)(t,e),t.prototype.render=function(e,t,n){var i=this.element.cloneNode(),r=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":e.column.uid}});if(i.appendChild(r),r.innerHTML=e.column.headerText,e.column.toolTip&&i.setAttribute("title",e.column.toolTip),m(e.column.textAlign)||(r.style.textAlign=e.column.textAlign),e.column.customAttributes&&WA(i,e.column.customAttributes),i.setAttribute("colspan",e.colSpan.toString()),i.setAttribute("aria-colspan",e.colSpan.toString()),i.setAttribute("aria-rowspan","1"),this.parent.allowResizing){var o=this.parent.createElement("div");o.className=e.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",i.appendChild(o)}return this.parent.trigger("headerCellInfo",{cell:e,node:i}),i},t}(vO),OO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-indentcell"}),t}return Object(s.c)(t,e),t.prototype.render=function(e,t){var n=this.element.cloneNode();return WA(n,e.attributes),n},t}(vO),EO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:t.parent.element.id+"captioncell",role:"gridcell",tabindex:"-1"}}),t}return Object(s.c)(t,e),t.prototype.render=function(e,t){var n,i=this.element.cloneNode(),r=this.parent;t.headerText=e.column.headerText,e.isForeignKey&&(n=this.format(e.column,e.column.valueAccessor("foreignKey",t,e.column)));var o=e.isForeignKey?n:e.column.enableGroupByFormat?t.key:this.format(e.column,e.column.valueAccessor("key",t,e.column));return m(r.groupSettings.captionTemplate)?i.innerHTML=e.column.headerText+": "+o+" - "+t.count+" "+this.localizer.getConstant(t.count<2?"Item":"Items"):JA(i,UA(r.groupSettings.captionTemplate)(t)),i.setAttribute("colspan",e.colSpan.toString()),i.setAttribute("aria-label",i.innerHTML+" is groupcaption cell"),i.setAttribute("title",i.innerHTML),i},t}(vO),IO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-groupcaption"}),t}return Object(s.c)(t,e),t.prototype.render=function(e,t){var n=this.element.cloneNode();return n.innerHTML="&nbsp;",n.setAttribute("colspan",e.colSpan.toString()),n},t}(vO),DO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.render=function(e,t,n,i){var r=this.element.cloneNode();return r.className=i?"e-recordplusexpand":"e-recordpluscollapse",r.setAttribute("ej-mappingname",t.field),r.setAttribute("ej-mappingvalue",t.key),r.setAttribute("aria-expanded",i?"true":"false"),r.setAttribute("tabindex","-1"),r.appendChild(this.parent.createElement("div",{className:i?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow"})),r},t}(OO),kO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-grouptopleftcell"}),t}return Object(s.c)(t,e),t.prototype.render=function(e,t){var n=this.element.cloneNode();return n.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),n},t}(vO),PO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-detailheadercell"}),t}return Object(s.c)(t,e),t.prototype.render=function(e,t){var n=this.element.cloneNode();return n.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),n},t}(vO),TO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",role:"gridcell",tabindex:"-1"}}),t}return Object(s.c)(t,e),t.prototype.render=function(e,t,n){var i=this.element.cloneNode();return n&&!m(n.class)?(i.className="",i.className=n.class,i.appendChild(this.parent.createElement("div",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow"}))):i.appendChild(this.parent.createElement("div",{className:"e-icons e-dtdiagonalright e-icon-grightarrow"})),i},t}(vO),MO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-rowdragdrop",attrs:{role:"gridcell",tabindex:"-1"}}),t}return Object(s.c)(t,e),t.prototype.render=function(e,t){var n=this.element.cloneNode();return n.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon"})),n},t}(vO),jO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-rowdragheader"}),t}return Object(s.c)(t,e),t.prototype.render=function(e,t){var n=this.element.cloneNode();return n.appendChild(k("div",{className:"e-emptycell"})),n},t}(vO),RO=function(){function e(e,t){this.emptyGrid=!1,this.parent=e,this.locator=t,this.data=new sO(e,t),this.l10n=t.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return e.prototype.render=function(){var e=this.parent;this.headerRenderer=this.renderer.getRenderer(AS.Header),this.contentRenderer=this.renderer.getRenderer(AS.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),e.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.refreshDataManager()},e.prototype.refresh=function(e){void 0===e&&(e={requestType:"refresh"});var t=this.parent;if(t.notify(e.requestType+"-begin",e),t.trigger(gA,e),e.cancel)t.notify("cancel-Begin",e);else{if("delete"===e.requestType&&t.allowPaging){var n=e.data.length,i=t.pageSettings.totalRecordsCount-n;t.currentViewData.length-n||!i||(t.prevPageMoving=!0,t.setProperties({pageSettings:{totalRecordsCount:i,currentPage:Math.ceil(i/t.pageSettings.pageSize)}},!0),t.pagerModule.pagerObj.totalRecordsCount=i)}this.refreshDataManager(e)}},e.prototype.refreshComplete=function(e){this.parent.trigger(mA,e)},e.prototype.refreshDataManager=function(e){var t,n=this;void 0===e&&(e={}),"virtualscroll"!==e.requestType&&this.parent.showSpinner(),this.emptyGrid=!1;var i=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().firstChild,!0),i){var r=new sh;t=this.getFData(r)}if(t=t?t.then(function(t){var i=n.data.generateQuery().requiresCount();if(n.emptyGrid){var r=new sh;return r.resolve({result:[],count:0}),r.promise}return n.data.getData(e,i)}):this.data.getData(e,this.data.generateQuery().requiresCount()),this.parent.getForeignKeyColumns().length&&(!i||this.parent.searchSettings.key.length)){var o=new sh;t=t.then(function(e){return n.parent.notify("getForeignKeyData",{dataManager:t,result:e,promise:o}),o.promise})}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(t=t.then(function(e){return n.validateGroupRecords(e)})),t.then(function(t){return n.dataManagerSuccess(t,e)}).catch(function(t){return n.dataManagerFailure(t,e)})},e.prototype.getFData=function(e){return this.parent.notify("getForeignKeyData",{isComplex:!0,promise:e}),e.promise},e.prototype.isNeedForeignAction=function(){var e=this.parent;return!!(e.allowFiltering&&e.filterSettings.columns.length||e.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},e.prototype.foreignKey=function(e){var t=this;return e.some(function(e){return!(!t.parent.filterSettings.columns.some(function(t){return e.foreignKeyValue===t.field})&&!t.parent.searchSettings.key.length)})},e.prototype.sendBulkRequest=function(e){var t=this;e.requestType="batchsave";var n=this.data.saveChanges(e.changes,this.parent.getPrimaryKeyFieldNames()[0],e.original),i=this.data.generateQuery().requiresCount();this.data.dataManager.dataSource.offline?this.refreshDataManager({requestType:"batchsave"}):n.then(function(n){t.data.getData(e,i).then(function(n){return t.dmSuccess(n,e)}).catch(function(n){return t.dmFailure(n,e)})}).catch(function(n){return t.dmFailure(n,e)})},e.prototype.dmSuccess=function(e,t){this.dataManagerSuccess(e,t)},e.prototype.dmFailure=function(e,t){this.dataManagerFailure(e,t)},e.prototype.renderEmptyRow=function(){this.emptyRow(!0)},e.prototype.emptyRow=function(e){var t,n=this.parent,i=this.contentRenderer.getTable().querySelector("tbody");m(i)||B(i),i=this.parent.createElement("tbody"),(t=this.parent.createElement("tr",{className:"e-emptyrow"})).appendChild(this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:n.getColumns().length.toString()}})),i.appendChild(t),this.contentRenderer.renderEmpty(i),e&&(this.parent.trigger(yA,{}),this.parent.notify(AA,{rows:[new aO({isDataRow:!0,cells:[new lO({isDataCell:!0,visible:!0})]})]}))},e.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},e.prototype.updateColumnType=function(e){for(var t,n=this.parent.getColumns(),i=e&&e.items?e.items[0]:e,r=this.locator.getService("valueFormatter"),o=0,s=n.length;o<s;o++){t=dS(n[o].field||"",i),m(n[o].customFormat)||(n[o].format=n[o].customFormat),m(n[o].validationRules)||m(n[o].validationRules.equalTo)||(n[o].validationRules.equalTo[0]=this.parent.element.id+n[o].validationRules.equalTo[0]),n[o].isForeignColumn()&&n[o].columnData&&(t=dS(n[o].foreignKeyValue||"",n[o].columnData[0])),m(t)?n[o].type=n[o].type||null:(this.isColTypeDef=!0,n[o].type||(n[o].type=t.getDay?t.getHours()>0||t.getMinutes()>0||t.getSeconds()>0||t.getMilliseconds()>0?"datetime":"date":typeof t));var a=new pA;n[o].format&&(n[o].format.skeleton||n[o].format.format)&&(n[o].setFormatter(a.getFormatFunction(n[o].format)),n[o].setParser(a.getParserFunction(n[o].format))),"string"==typeof n[o].format?rS(this.locator,n[o]):n[o].format||"number"!==n[o].type||n[o].setParser(r.getParserFunction({format:"n2"}))}},e.prototype.dataManagerSuccess=function(e,t){var n=this.parent;if(this.contentRenderer=this.renderer.getRenderer(AS.Content),this.headerRenderer=this.renderer.getRenderer(AS.Header),e.actionArgs=t,n.trigger("beforeDataBound",e),!e.cancel){var i=Object.keys(e.result).length;if(!this.parent.isDestroyed)if(n.getColumns().length||i||n.columns.length&&n.columns[0]instanceof fA){if(this.parent.isEdit=!1,this.parent.notify("tooltip-destroy",{}),n.currentViewData=e.result,!i&&e.count&&n.allowPaging&&t&&"delete"!==t.requestType)return n.prevPageMoving=!0,n.pageSettings.totalRecordsCount=e.count,n.pageSettings.currentPage=Math.ceil(e.count/n.pageSettings.pageSize),void n.dataBind();if((n.getColumns().length||!i)&&this.isLayoutRendered||hS(n)||this.updatesOnInitialRender(e),!this.isColTypeDef&&n.getCurrentViewRecords()&&this.updateColumnType(n.getCurrentViewRecords()[0]),this.parent.isInitialLoad||!this.parent.groupSettings.disablePageWiseAggregates||this.parent.groupSettings.columns.length||(e.result=this.parent.dataSource instanceof Array?this.parent.dataSource:this.parent.currentViewData),this.parent.notify("data-ready",g({count:e.count,result:e.result,aggregates:e.aggregates},t)),(n.groupSettings.columns.length||t&&"ungrouping"===t.requestType)&&t&&"filtering"!==t.requestType&&this.headerRenderer.refreshUI(),i)hS(n)&&(t.scrollTop={top:this.contentRenderer.content.scrollTop}),this.contentRenderer.refreshContentRows(t);else{if(!n.getColumns().length)return n.element.innerHTML="",void alert(this.l10n.getConstant("EmptyDataSourceError"));if(this.contentRenderer.setRowElements([]),this.contentRenderer.setRowObjects([]),this.ariaService.setBusy(this.parent.getContent().firstChild,!1),this.renderEmptyRow(),t){var r=(t.requestType||"").toLowerCase()+"-complete";this.parent.notify(r,t),"batchsave"===t.requestType&&(t.cancel=!1,t.rows=[],t.isFrozen=0!==this.parent.getFrozenColumns()&&!t.isFrozen,this.parent.trigger(mA,t))}this.parent.hideSpinner()}this.parent.notify("toolbar-refresh",{})}else n.hideSpinner()}},e.prototype.dataManagerFailure=function(e,t){this.ariaService.setOptions(this.parent.getContent().firstChild,{busy:!1,invalid:!0}),this.parent.trigger("actionFailure",{error:e}),this.parent.hideSpinner(),"save"!==t.requestType&&"delete"!==t.requestType&&"bulk-save"!==t.name&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.log("actionfailure",{error:e}))},e.prototype.updatesOnInitialRender=function(e){this.isLayoutRendered=!0,this.parent.columns.length<1&&this.buildColumns(e.result[0]),GA(this.parent.columns),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.notify("auto-col",{})},e.prototype.buildColumns=function(e){for(var t=Object.keys(e),n=[],i=0,r=t.length;i<r;i++)n[i]={field:t[i]},this.parent.enableColumnVirtualization&&(n[i].width=m(n[i].width)?200:n[i].width);this.parent.setProperties({columns:n},!0)},e.prototype.instantiateRenderer=function(){this.renderer.addRenderer(AS.Header,new yO(this.parent,this.locator)),this.renderer.addRenderer(AS.Content,new mO(this.parent,this.locator));var e=this.locator.getService("cellRendererFactory");e.addCellRenderer(xS.Header,new AO(this.parent,this.locator)),e.addCellRenderer(xS.Data,new vO(this.parent,this.locator)),e.addCellRenderer(xS.StackedHeader,new SO(this.parent,this.locator)),e.addCellRenderer(xS.Indent,new OO(this.parent,this.locator)),e.addCellRenderer(xS.GroupCaption,new EO(this.parent,this.locator)),e.addCellRenderer(xS.GroupCaptionEmpty,new IO(this.parent,this.locator)),e.addCellRenderer(xS.Expand,new DO(this.parent,this.locator)),e.addCellRenderer(xS.HeaderIndent,new kO(this.parent,this.locator)),e.addCellRenderer(xS.StackedHeader,new SO(this.parent,this.locator)),e.addCellRenderer(xS.DetailHeader,new PO(this.parent,this.locator)),e.addCellRenderer(xS.RowDragHIcon,new jO(this.parent,this.locator)),e.addCellRenderer(xS.DetailExpand,new TO(this.parent,this.locator)),e.addCellRenderer(xS.DetailFooterIntent,new OO(this.parent,this.locator)),e.addCellRenderer(xS.RowDragIcon,new MO(this.parent,this.locator))},e.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(this.parent.on("initial-load",this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on("model-changed",this.refresh,this),this.parent.on("refresh-complete",this.refreshComplete,this),this.parent.on("bulk-save",this.sendBulkRequest,this),this.parent.on("showEmptyGrid",function(){e.emptyGrid=!0},this),this.parent.on("auto-col",this.dynamicColumnChange,this))},e.prototype.validateGroupRecords=function(e){var t=this,n=e.result.length-1;if(n<0)return Promise.resolve(e);var i=e.result[0],r=e.result[n],o=[],s=function(e){[i,r].forEach(function(e){return o.push(new Kc("field","==",e.field).and(t.getPredicate("key","equal",e.key)))}),e.where(Kc.or(o))},a=new Zc;s(a);var l=new oh(e.result).executeLocal(a),c=this.data.generateQuery(!0),h=[];this.data.isRemote()?([i,r].forEach(function(e){return h.push(t.getPredicate(e.field,"equal",e.key))}),c.where(Kc.or(h))):s(c);var d=new sh;return this.data.getData({},c).then(function(n){t.updateGroupInfo(l,n.result),d.resolve(e)}).catch(function(e){return d.reject(e)}),d.promise},e.prototype.getPredicate=function(e,t,n){return n instanceof Date?cS({field:e,operator:t,value:n}):new Kc(e,t,n)},e.prototype.updateGroupInfo=function(e,t){var n=this,i=new oh(t);return e.forEach(function(e,t,r){var o=i.executeLocal((new Zc).where(new Kc("field","==",e.field).and(n.getPredicate("key","equal",e.key))))[0];e.count=o.count;var s=e.items,a=o.items;s.GroupGuid&&(e.items=n.updateGroupInfo(e.items,o.items)),n.parent.aggregates.forEach(function(t){return t.columns.forEach(function(t){(t.type instanceof Array?t.type:[t.type]).forEach(function(i){var r=t.field+" - "+i.toLowerCase(),l=s.level?a.records:o.items;e.aggregates[r]="Custom"===i?t.customAggregate?t.customAggregate.call(n.parent,s.level?a:o,t):"":Jc.aggregates[i.toLowerCase()](l,t.field)})})})}),e},e}(),LO=function(){function e(){this.cellRenderMap={}}return e.prototype.addCellRenderer=function(e,t){e="string"==typeof e?e:p(xS,e),m(this.cellRenderMap[e])&&(this.cellRenderMap[e]=t)},e.prototype.getCellRenderer=function(e){if(e="string"==typeof e?e:p(xS,e),m(this.cellRenderMap[e]))throw"The cellRenderer "+e+" is not found";return this.cellRenderMap[e]},e}(),_O=function(){function e(){this.services={}}return e.prototype.register=function(e,t){m(this.services[e])&&(this.services[e]=t)},e.prototype.getService=function(e){if(m(this.services[e]))throw"The service "+e+" is not registered";return this.services[e]},e}(),NO=function(){function e(){this.rendererMap={}}return e.prototype.addRenderer=function(e,t){var n=p(AS,e);m(this.rendererMap[n])&&(this.rendererMap[n]=t)},e.prototype.getRenderer=function(e){var t=p(AS,e);if(m(this.rendererMap[t]))throw"The renderer "+t+" is not found";return this.rendererMap[t]},e}(),BO=function(){function e(e){this.parent=e}return e.prototype.setWidthToColumns=function(){var e=this,t=0,n=this.parent.getColumnIndexesInView(),i=!0;if(this.parent.allowGrouping)for(var r=this.parent.groupSettings.columns.length;t<r;t++)this.parent.enableColumnVirtualization&&-1===n.indexOf(t)?i=!1:this.setColumnWidth(new fA({width:"30px"}),t);(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new fA({width:"30px"}),t),t++),this.parent.isRowDragable()&&(this.setColumnWidth(new fA({width:"30px"}),t),t++),this.parent.getColumns().forEach(function(n,r){e.setColumnWidth(n,i&&e.parent.enableColumnVirtualization?void 0:r+t)})},e.prototype.setColumnWidth=function(e,t,n){var i=m(t)?this.parent.getNormalizedColumnIndex(e.uid):t,r=this.getWidth(e);null!==r&&(this.setWidth(r,i),(this.parent.allowResizing&&"resize"===n||this.parent.getFrozenColumns()&&this.parent.allowResizing)&&this.setWidthToTable(),this.parent.notify("column-width-changed",{index:i,width:r,column:e,module:n}))},e.prototype.setWidth=function(e,t){if("string"==typeof e&&-1!==e.indexOf("%")&&(!Boolean(window.chrome)||!Boolean(window.chrome.webstore))&&this.parent.allowGrouping){var n=this.parent.element.offsetWidth;e=parseInt(e,10)/100*n}var i,r,o=this.parent.getHeaderTable(),s=this.parent.getContentTable(),a=x(e),l=this.parent.getFrozenColumns(),c=this.parent.getHeaderContent().querySelector(".e-movableheader");(i=l&&t>=l&&c&&c.querySelector("colgroup")?c.querySelector("colgroup").children[t-l]:o.querySelector("colgroup").children[t])&&(i.style.width=a),(r=l&&t>=l?this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup").children[t-l]:s.querySelector("colgroup").children[t])&&(r.style.width=a);for(var h=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),d=[],u=0;u<h.length;u++)for(var p=0;p<h[u].querySelector("colgroup").children.length;p++)d.push(h[u].querySelector("colgroup").children[p]);h.length&&(d[t].style.width=a)},e.prototype.getSiblingsHeight=function(e){return this.getHeightFromDirection(e,"previous")+this.getHeightFromDirection(e,"next")},e.prototype.getHeightFromDirection=function(e,t){for(var n=e[t+"ElementSibling"],i=0,r=["e-gridheader","e-gridfooter","e-groupdroparea","e-gridpager","e-toolbar"];n;)r.some(function(e){return n.classList.contains(e)})&&(i+=n.offsetHeight),n=n[t+"ElementSibling"];return i},e.prototype.getWidth=function(e){if(m(e.width)&&this.parent.allowResizing&&(e.width=200),!e.width)return null;var t=parseInt(e.width.toString(),10);return e.minWidth&&t<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&t>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width},e.prototype.getTableWidth=function(e){for(var t=0,n=0,i=e;n<i.length;n++){var r=i[n],o=this.getWidth(r);!1!==r.visible&&null!==o&&(t+=parseInt(o.toString(),10))}return t},e.prototype.calcMovableOrFreezeColWidth=function(e){var t=this.parent.getColumns().slice();return"movable"===e?t.splice(0,this.parent.getFrozenColumns()):"freeze"===e&&t.splice(this.parent.getFrozenColumns(),t.length),x(this.getTableWidth(t))},e.prototype.setWidthToFrozenTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze");this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e},e.prototype.setWidthToMovableTable=function(){var e=this.calcMovableOrFreezeColWidth("movable");this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild&&(this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild.style.width=e),this.parent.getContent().querySelector(".e-movablecontent").firstElementChild.style.width=e},e.prototype.setWidthToFrozenEditTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze");this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=e},e.prototype.setWidthToMovableEditTable=function(){var e=this.calcMovableOrFreezeColWidth("movable");this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=e},e.prototype.setWidthToTable=function(){var e=x(this.getTableWidth(this.parent.getColumns()));this.parent.getFrozenColumns()?(this.setWidthToFrozenTable(),this.setWidthToMovableTable()):((this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new fA({width:"30px"})),this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e);var t=this.parent.element.querySelector(".e-table.e-inline-edit");t&&this.parent.getFrozenColumns()?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):t&&(t.style.width=e)},e}(),FO=function(){function e(e){this.currentInfo={},this.oneTime=!0,this.swap={},this.forget=!0,this.skipFocus=!0,this.focusByClick=!1,this.prevIndexes={},this.parent=e,this.addEventListener()}return e.prototype.focusCheck=function(e){var t=e.target;this.focusByClick=!0,this.skipFocus=t.classList.contains("e-grid")},e.prototype.onFocus=function(){if(!(this.parent.isDestroyed||re.isDevice||this.parent.enableVirtualization)){this.setActive(0===this.parent.frozenRows,0!==this.parent.frozenColumns);var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.skipFocus&&(this.focus(),this.skipFocus=!1)}},e.prototype.passiveFocus=function(e){this.parent.isDestroyed||e.target&&e.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,P([this.currentInfo.element],["e-focused","e-focus"]))},e.prototype.onBlur=function(e){this.parent.isEdit||e&&(!e.relatedTarget||V(e.relatedTarget,".e-grid"))||(this.removeFocus(),this.skipFocus=!1,this.currentInfo.skipAction=!1,this.getContent().getFocusInfo().elementToFocus&&(this.getContent().getFocusInfo().elementToFocus.tabIndex=0))},e.prototype.onClick=function(e,t){var n=!m(V(e.target,".e-gridcontent")),i=!m(V(e.target,".e-gridheader"));n=n&&i?!n:n;var r=!m(V(e.target,".e-frozencontent"))||!m(V(e.target,".e-frozenheader"));if(!(!n&&m(V(e.target,".e-gridheader"))||e.target.classList.contains("e-content"))&&m(V(e.target,".e-unboundcell")))if(this.setActive(n,r),!n&&m(V(e.target,".e-gridheader"))||e.target.classList.contains("e-filtermenudiv"))this.clearOutline();else{var o={cancel:!1,byKey:!1,byClick:!m(e.target),clickArgs:e};if(this.parent.notify("beforecellfocused",o),!o.cancel&&!V(e.target,".e-inline-edit")&&(this.setActive(n,r),this.getContent())){if(!1===this.getContent().onClick(e,t))return;this.focus()}}},e.prototype.onKeyPress=function(e){if(!this.skipOn(e)){var t={cancel:!1,byKey:!0,byClick:!1,keyArgs:e};if(this.parent.notify("beforecellfocused",t),!t.cancel){var n=this.getContent().matrix.current;this.currentInfo.outline=!0;var i=this.getContent().jump(e.action,n);this.swap=i,i.swap&&(this.setActive(!i.toHeader,i.toFrozen),this.getContent().matrix.current=this.getContent().getNextCurrent(n,i,this.active,e.action),this.prevIndexes={}),this.setActiveByKey(e.action,this.getContent()),!1!==this.getContent().onKeyPress(e)?(e.preventDefault(),this.focus(e)):this.clearIndicator()}}},e.prototype.skipOn=function(e){var t=e.target;return!!t&&(this.currentInfo.skipAction?(this.clearIndicator(),!0):["pageUp","pageDown"].indexOf(e.action)>-1?(this.clearIndicator(),!0):"delete"===e.action||"Batch"!==this.parent.editSettings.mode&&(this.parent.isEdit||["insert","f2"].indexOf(e.action)>-1)||null!==V(document.activeElement,".e-filterbarcell")||null!==V(document.activeElement,"#"+this.parent.element.id+"_searchbar")&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(e.action)>-1||null===V(t,".e-gridcontent")&&null===V(t,".e-gridheader")||"space"===e.action&&!t.classList.contains("e-gridchkbox")&&null===V(t,".e-gridchkbox")&&null===V(t,".e-headerchkcelldiv"))},e.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},e.prototype.getContent=function(){return this.active||this.content},e.prototype.setActive=function(e,t){this.active=e?t?this.fContent:this.content:t?this.fHeader:this.header},e.prototype.setFocusedElement=function(e){var t=this;this.currentInfo.elementToFocus=e,setTimeout(function(){return t.currentInfo.elementToFocus.focus()},0)},e.prototype.focus=function(e){this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)},e.prototype.removeFocus=function(e){this.currentInfo.element&&(T([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1)},e.prototype.addFocus=function(e,t){if(this.currentInfo=e,this.currentInfo.outline=e.outline&&!m(t),e.element){var n=e.elementToFocus.classList.contains("e-focus");if(!n){this.currentInfo.outline&&P([e.element],["e-focused"]),P([e.elementToFocus],["e-focus"]),e.element.tabIndex=0,n||this.setFocusedElement(e.elementToFocus),this.parent.notify("cellfocused",{element:e.elementToFocus,parent:e.element,indexes:this.getContent().matrix.current,byKey:!m(t),byClick:m(t),keyArgs:t,isJump:this.swap.swap,container:this.getContent().getInfo(t),outline:!m(t),swapInfo:this.swap});var i=this.getContent().matrix.current,r=i[1];this.prevIndexes={rowIndex:i[0],cellIndex:r},this.focusedColumnUid=this.parent.getColumnByIndex(r).uid,this.focusByClick=!1}}},e.prototype.refreshMatrix=function(e){var t=this;return function(n){e&&n.args&&n.args.isFrozen&&!t.fContent?t.fContent=new UO(t.parent):e&&!t.content&&(t.content=new HO(t.parent)),!e&&n.args&&n.args.isFrozen&&!t.fHeader?t.fHeader=new WO(t.parent):e||t.header||(t.header=new VO(t.parent));var i,r=e?n.args&&n.args.isFrozen?t.fContent:t.content:n.args&&n.args.isFrozen?t.fHeader:t.header,o=e?n.rows.slice(t.parent.frozenRows):n.rows,s=e?n.rows.slice(0,t.parent.frozenRows):n.rows,a=!m(t.parent.rowTemplate),l=r.matrix.generate(s,r.selector,a),c=t.parent.getFrozenColumns();if("batchAdd"===n.name&&c){for(var h=o.map(function(e){return e.clone()}),d=o.map(function(e){return e.clone()}),u=0;u<o.length;u++)o[u].cells.length>c&&(d[u].cells=o[u].cells.slice(0,c),h[u].cells=o[u].cells.slice(c));t.fContent.matrix.generate(d,t.fContent.selector,a),r.matrix.generate(h,r.selector,a)}else r.matrix.generate(o,r.selector,a);if(r.generateRows(s,{matrix:l,handlerInstance:n.args&&n.args.isFrozen?t.fHeader:t.header}),!re.isDevice&&!t.focusByClick&&n&&n.args&&"paging"===n.args.requestType&&(t.skipFocus=!1,t.parent.element.focus()),n&&n.args&&"virtualscroll"===n.args.requestType)if(t.currentInfo.uid){if(n.rows.some(function(e,n){return i=n,e.uid===t.currentInfo.uid})&&(t.content.matrix.current[0]=i,t.content.matrix.current[1]=t.parent.getColumnIndexByUid(t.focusedColumnUid)||0,g=t.getContent().getFocusInfo().elementToFocus)){var p=g.getBoundingClientRect(),f=t.parent.element.getBoundingClientRect();p.top>=0&&p.left>=0&&p.right<=Math.min(f.right,window.innerWidth||document.documentElement.clientWidth)&&p.bottom<=Math.min(f.bottom,window.innerHeight||document.documentElement.clientHeight)&&t.focus()}}else if(n.args.focusElement&&n.args.focusElement.classList.contains("e-filtertext")){var g;(g=t.parent.element.querySelector("#"+n.args.focusElement.id))&&g.focus()}}},e.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(I.add(this.parent.element,"mousedown",this.focusCheck,this),I.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(t){return e.passiveFocus(t)},!0),I.add(this.parent.element,"focusout",this.onBlur,this),this.parent.on("key-pressed",this.onKeyPress,this),this.parent.on("click",this.onClick,this),this.parent.on(CA,this.refreshMatrix(!0),this),this.parent.on("header-refreshed",this.refreshMatrix(),this),this.parent.on("close-edit",this.restoreFocus,this),["start-edit","start-add"].forEach(function(t){return e.parent.on(t,e.clearIndicator,e)}),["sorting"].forEach(function(t){return e.parent.on(t+"-complete",e.restoreFocus,e)}),this.parent.on("batchAdd",this.refreshMatrix(!0),this),this.parent.on("batchCancel",this.refreshMatrix(!0),this),this.parent.on("batchDelete",this.refreshMatrix(!0),this),this.parent.on("detailDataBound",this.refreshMatrix(!0),this),this.parent.on(AA,this.refreshMatrix(!0),this),this.parent.on("cellfocused",this.internalCellFocus,this))},e.prototype.removeEventListener=function(){var e=this;this.parent.isDestroyed||(I.remove(this.parent.element,"mousedown",this.focusCheck),I.remove(this.parent.element,"focus",this.onFocus),I.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),this.parent.off("key-pressed",this.onKeyPress),this.parent.off("click",this.onClick),this.parent.off(CA,this.refreshMatrix(!0)),this.parent.off("header-refreshed",this.refreshMatrix()),this.parent.off("close-edit",this.restoreFocus),["start-edit","start-add"].forEach(function(t){return e.parent.off(t,e.clearOutline)}),["sorting"].forEach(function(t){return e.parent.off(t+"-complete",e.restoreFocus)}),this.parent.off("batchAdd",this.refreshMatrix(!0)),this.parent.off("batchDelete",this.refreshMatrix(!0)),this.parent.off("batchCancel",this.refreshMatrix(!0)),this.parent.off("detailDataBound",this.refreshMatrix(!0)),this.parent.off(AA,this.refreshMatrix(!0)),this.parent.off("cellfocused",this.internalCellFocus))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.restoreFocus=function(){this.addFocus(this.getContent().getFocusInfo())},e.prototype.clearOutline=function(){this.getContent().matrix.current=this.getContent().matrix.get(0,-1,[0,1],"downArrow",this.getContent().validator()),this.clearIndicator()},e.prototype.clearIndicator=function(){this.currentInfo.element&&this.currentInfo.elementToFocus&&T([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},e.prototype.getPrevIndexes=function(){var e=this.forget;return this.forget=!1,e?{rowIndex:null,cellIndex:null}:this.prevIndexes},e.prototype.forgetPrevious=function(){this.forget=!0},e.prototype.setActiveByKey=function(e,t){var n=this;if(0!==this.parent.frozenColumns||0!==this.parent.frozenRows){var i,r={home:function(){return{toHeader:!i.isContent,toFrozen:!0}},end:function(){return{toHeader:!i.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:0!==n.parent.frozenColumns}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}};if(e in r){i=t.getInfo();var o=r[e]();this.setActive(!o.toHeader,o.toFrozen),this.getContent().matrix.current=t.matrix.current}}},e.prototype.internalCellFocus=function(e){if(e.byKey&&e.container.isContent&&"enter"===e.keyArgs.action&&(e.parent.classList.contains("e-detailcell")||e.parent.classList.contains("e-unboundcell")||e.parent.classList.contains("e-templatecell"))){this.clearIndicator();var t=this.getContent().getFocusable(this.getFocusedElement());this.setFocusedElement(t),this.currentInfo.skipAction=!0}},e}(),zO=function(){function e(){this.matrix=[],this.current=[]}return e.prototype.set=function(e,t,n){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.columns)),this.matrix[e]=this.matrix[e]||[],this.matrix[e][t]=n?1:0},e.prototype.get=function(e,t,n,i,r){var o=t;if(e+n[0]<0)return[e,t];if(e=Math.max(0,Math.min(e+n[0],this.rows)),m(this.matrix[e]))return null;if(t=Math.max(0,Math.min(t+n[1],this.matrix[e].length-1)),o+n[1]>this.matrix[e].length-1&&r(e,t,i))return[e,o];var s=this.first(this.matrix[e],t,n,!0,i),a=h(e+"."+(t=null===s?o:s),this.matrix);return e===this.rows&&"downArrow"===i&&(n[0]=-1),this.inValid(a)||!r(e,t,i)?this.get(e,o,n,i,r):[e,t]},e.prototype.first=function(e,t,n,i,r){return(t<0||t===e.length)&&this.inValid(e[t])&&"upArrow"!==r&&"downArrow"!==r||!e.some(function(e){return 1===e})?null:this.inValid(e[t])?this.first(e,-1!==["upArrow","downArrow","shiftUp","shiftDown"].indexOf(r)?i?0:++t:t+n[1],n,!1,r):t},e.prototype.select=function(e,t){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.matrix[e].length-1)),this.current=[e,t]},e.prototype.generate=function(e,t,n){var i=this;return this.rows=e.length-1,this.matrix=[],e.forEach(function(e,r){var o=e.cells.filter(function(e){return!0!==e.isSpanned});i.columns=Math.max(o.length-1,0|i.columns),o.forEach(function(o,s){i.set(r,s,t(e,o,n))})}),this.matrix},e.prototype.inValid=function(e){return 0===e||void 0===e},e}(),HO=function(){function e(e){var t=this;this.matrix=new zO,this.parent=e,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(e){return{home:[t.matrix.current[0],-1,0,1],end:[t.matrix.current[0],t.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[t.matrix.rows,t.matrix.columns+1,0,-1]}[e]||null}}return e.prototype.getTable=function(){return this.parent.frozenColumns?this.parent.getContent().querySelector(".e-movablecontent .e-table"):this.parent.getContentTable()},e.prototype.onKeyPress=function(e){var t=this.getCurrentFromAction(e.action,this.keyActions[e.action],e.action in this.keyActions,e);if(t){if((["tab","shiftTab"].indexOf(e.action)>-1&&this.matrix.current||[]).toString()===t.toString()){if(t.toString()===[this.matrix.rows,this.matrix.columns].toString()||t.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===t.toString())return!1;t=this.editNextRow(t[0],t[1],e.action)}this.matrix.select(t[0],t[1])}},e.prototype.editNextRow=function(e,t,n){var i=this.parent,r=i.editSettings.allowNextRowEdit&&(i.isEdit||i.isLastCellPrimaryKey),o=i.getColumnIndexByField(i.getVisibleColumns()[0].field);return"tab"===n&&r&&(e++,t=o+(this.getTable().rows[e].querySelectorAll(".e-indentcell").length+this.getTable().rows[e].querySelectorAll(".e-detailrowcollapse").length)),"shiftTab"===n&&r&&(e--,t=i.getColumnIndexByField(i.getVisibleColumns()[i.getVisibleColumns().length-1].field)),this.getTable().rows[e].cells[t].classList.contains("e-rowcell")?[e,t]:this.editNextRow(e,t,n)},e.prototype.getCurrentFromAction=function(e,t,n,i){if(void 0===t&&(t=[0,0]),!n&&!this.indexesByKey(e)||0===this.matrix.current.length)return null;if(!this.shouldFocusChange(i))return this.matrix.current;var r=this.indexesByKey(e)||this.matrix.current.concat(t);return this.matrix.get(r[0],r[1],[r[2],r[3]],e,this.validator())},e.prototype.onClick=function(e,t){var n=e.target;if(n=(n=n.classList.contains("e-rowcell")?n:V(n,"td"))||V(e.target,"td.e-detailrowcollapse")||V(e.target,"td.e-detailrowexpand"),!(n=(n=V(e.target,"td.e-detailcell")&&m(V(V(e.target,".e-grid"),"td.e-detailcell"))?null:n)&&V(n,"table").classList.contains("e-table")?n:null))return!1;var i=[n.parentElement.rowIndex,n.cellIndex],r=i[0],o=i[1],s=this.matrix.current,a=s[0],l=s[1],c=h(r+"."+o,this.matrix.matrix);if(this.matrix.inValid(c)||!t&&a===r&&l===o)return!1;this.matrix.select(r,o)},e.prototype.getFocusInfo=function(){var e={},t=this.matrix.current,n=t[0],i=void 0===n?0:n,r=t[1],o=void 0===r?0:r;return this.matrix.current=[i,o],e.element=m(this.getTable().rows[i])?null:this.getTable().rows[i].cells[o],e.element?(e.elementToFocus=e.element.classList.contains("e-unboundcell")||e.element.classList.contains("e-detailcell")?e.element:this.getFocusable(e.element),e.outline=!0,e.uid=e.element.parentElement.getAttribute("data-uid"),e):e},e.prototype.getFocusable=function(e){var t='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])';this.parent.isEdit&&(t='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea');var n=[].slice.call(e.querySelectorAll(t));return n.length?n[0]:e},e.prototype.selector=function(e,t,n){return(e.isDataRow&&t.visible&&(t.isDataCell||t.isTemplate)||e.isDataRow&&t.cellType===xS.DetailExpand||!e.isDataRow&&[xS.Expand,xS.GroupCaption,xS.CaptionSummary,xS.GroupSummary].indexOf(t.cellType)>-1||t.column&&"checkbox"===t.column.type||t.cellType===xS.CommandColumn||e.isDataRow&&n)&&!("delete"===e.edit&&e.isDirty)},e.prototype.jump=function(e,t){var n=this.parent.frozenColumns>0&&("leftArrow"===e||"shiftTab"===e)&&0===t[1],i=0!==this.parent.frozenRows&&"shiftEnter"===e;return{swap:("upArrow"===e||i)&&0===t[0]||n,toHeader:("upArrow"===e||i)&&0===t[0],toFrozen:n}},e.prototype.getNextCurrent=function(e,t,n,i){void 0===e&&(e=[]);var r=[];return"rightArrow"===i||"tab"===i?(r[0]=e[0],r[1]=-1):"downArrow"!==i&&"enter"!==i||(r[0]=-1,r[1]=e[1]),r},e.prototype.generateRows=function(e,t){var n,i=t.matrix,r=t.handlerInstance,o=r.matrix.matrix.length,s=this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type?o+1:o;r.matrix.matrix=r.matrix.matrix.slice(0,s),r.matrix.rows=s,(n=r.matrix.matrix).push.apply(n,i),r.matrix.rows+=i.length},e.prototype.getInfo=function(e){var t=this.getFocusInfo(),n=this.matrix.current,i=n[0],r=n[1],o=t.element.classList.contains("e-rowcell"),s=o||e&&"enter"!==e.action&&(t.element.classList.contains("e-detailrowcollapse")||t.element.classList.contains("e-detailrowexpand")),a=[Math.min(parseInt(t.element.parentElement.getAttribute("aria-rowindex"),10),i),Math.min(parseInt(t.element.getAttribute("aria-colindex"),10),r)];return{isContent:!0,isDataCell:o,indexes:[a[0],a[1]],isSelectable:s}},e.prototype.validator=function(){var e=this.getTable();return function(t,n,i){var r=e.rows[t].cells[n];return"enter"===i||"shiftEnter"===i?r.classList.contains("e-rowcell"):!("shiftUp"!==i&&"shiftDown"!==i||!r.classList.contains("e-rowcell"))||"shiftUp"!==i&&"shiftDown"!==i&&0!==r.getBoundingClientRect().width}},e.prototype.shouldFocusChange=function(e){var t=this.matrix.current,n=t[0],i=void 0===n?-1:n,r=t[1],o=void 0===r?-1:r;if(i<0||o<0)return!0;var s=h(i+".cells."+o,this.getTable().rows);return!s||"enter"!==e.action&&"shiftEnter"!==e.action||s.classList.contains("e-rowcell")&&!s.classList.contains("e-unboundcell")&&!s.classList.contains("e-templatecell")&&!s.classList.contains("e-detailcell")},e}(),VO=function(e){function t(t){return e.call(this,t)||this}return Object(s.c)(t,e),t.prototype.getTable=function(){return this.parent.getFrozenColumns()?this.parent.getHeaderContent().querySelector(".e-movableheader .e-table"):this.parent.getHeaderTable()},t.prototype.onClick=function(e){var t=e.target;if((t=t.classList.contains("e-headercell")?t:V(t,"th"))||0===this.parent.frozenRows||(t=e.target.classList.contains("e-rowcell")?e.target:V(e.target,"td")),t){var n=[t.parentElement.rowIndex,t.cellIndex],i=h(n[0]+"."+n[1],this.matrix.matrix);if(this.matrix.inValid(i))return!1;this.matrix.select(t.parentElement.rowIndex,t.cellIndex)}},t.prototype.getFocusInfo=function(){var e={},t=this.matrix.current,n=t[0],i=void 0===n?0:n,r=t[1],o=void 0===r?0:r;return e.element=this.getTable().rows[i].cells[o],e.elementToFocus=this.getFocusable(e.element),e.outline=!e.element.classList.contains("e-filterbarcell"),e},t.prototype.selector=function(e,t){return t.visible&&(void 0!==t.column.field||t.isTemplate)||"checkbox"===t.column.type||t.cellType===xS.StackedHeader},t.prototype.jump=function(e,t){var n=this.parent.frozenColumns>0&&("leftArrow"===e||"shiftTab"===e)&&0===t[1];return{swap:("downArrow"===e||0!==this.parent.frozenRows&&"enter"===e)&&t[0]===this.matrix.matrix.length-1||n,toHeader:n,toFrozen:n}},t.prototype.getNextCurrent=function(e,t,n,i){void 0===e&&(e=[]);var r=[];return"upArrow"===i||"shiftEnter"===i?(r[0]=this.matrix.matrix.length,r[1]=e[1]):"rightArrow"!==i&&"tab"!==i||(r[0]=e[0],r[1]=-1),r},t.prototype.generateRows=function(e){var t=this,n=this.matrix.matrix.length;this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type&&(this.matrix.rows=++this.matrix.rows,e[0].cells.forEach(function(e,i){return t.matrix.set(n,i,e.visible&&!1!==e.column.allowFiltering)}))},t.prototype.getInfo=function(t){return g(e.prototype.getInfo.call(this,t),{isContent:!1,isHeader:!0})},t.prototype.validator=function(){return function(){return!0}},t.prototype.shouldFocusChange=function(e){var t=this.matrix.current,n=t[0],i=t[1];if(n<0||i<0)return!0;var r=h(n+".cells."+i,this.getTable().rows);return!r||"enter"!==e.action&&"altDownArrow"!==e.action||!r.classList.contains("e-headercell")},t}(HO),UO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.getTable=function(){return this.parent.getContent().querySelector(".e-frozencontent .e-table")},t.prototype.jump=function(e,t){var n=0!==this.parent.frozenRows&&"shiftEnter"===e;return{swap:("upArrow"===e||n)&&0===t[0]||("tab"===e||"rightArrow"===e)&&t[1]===this.matrix.columns,toHeader:("upArrow"===e||n)&&0===t[0],toFrozen:("upArrow"===e||n)&&0===t[0]}},t.prototype.getNextCurrent=function(e,t,n,i){void 0===e&&(e=[]);var r=[];return"leftArrow"===i||"shiftTab"===i?(r[0]=e[0],r[1]=n.matrix.columns+1):"downArrow"!==i&&"enter"!==i||(r[0]=-1,r[1]=e[1]),r},t}(HO),WO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),t.prototype.jump=function(e,t){var n=0!==this.parent.frozenRows&&"enter"===e;return{swap:("downArrow"===e||n)&&t[0]===this.matrix.matrix.length-1||("rightArrow"===e||"tab"===e)&&t[1]===this.matrix.columns,toHeader:("rightArrow"===e||"tab"===e)&&t[1]===this.matrix.columns,toFrozen:("downArrow"===e||n)&&t[0]===this.matrix.matrix.length-1}},t.prototype.getTable=function(){return this.parent.getHeaderContent().querySelector(".e-frozenheader .e-table")},t.prototype.getNextCurrent=function(e,t,n,i){void 0===e&&(e=[]);var r=[];return"leftArrow"===i||"shiftTab"===i?(r[0]=e[0],r[1]=n.matrix.columns+1):"upArrow"!==i&&"shiftEnter"!==i||(r[0]=this.matrix.matrix.length,r[1]=e[1]),r},t}(VO),GO=function(){function e(e){this.searchBox=e}return e.prototype.searchFocus=function(e){e.target.parentElement.classList.add("e-input-focus")},e.prototype.searchBlur=function(e){e.target.parentElement.classList.remove("e-input-focus")},e.prototype.wireEvent=function(){this.searchBox&&(I.add(this.searchBox,"focus",this.searchFocus,this),I.add(this.searchBox,"blur",this.searchBlur,this))},e.prototype.unWireEvent=function(){this.searchBox&&(I.remove(this.searchBox,"focus",this.searchFocus),I.remove(this.searchBox,"blur",this.searchBlur))},e}(),qO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(12)],t.prototype,"pageSize",void 0),Object(s.b)([ye(8)],t.prototype,"pageCount",void 0),Object(s.b)([ye(1)],t.prototype,"currentPage",void 0),Object(s.b)([ye()],t.prototype,"totalRecordsCount",void 0),Object(s.b)([ye(!1)],t.prototype,"enableQueryString",void 0),Object(s.b)([ye(!1)],t.prototype,"pageSizes",void 0),Object(s.b)([ye(null)],t.prototype,"template",void 0),t}(Le),QO=function(){return(QO=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},YO=function(){function e(e,t,n){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.enableSelectMultiTouch=!1,this.selectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.parent=e,this.selectionSettings=t,this.factory=n.getService("rendererFactory"),this.focus=n.getService("focus"),this.addEventListener()}return e.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),I.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this)},e.prototype.onActionBegin=function(e,t){this.parent.trigger(t,this.fDataUpdate(e))},e.prototype.fDataUpdate=function(e){if(e.cellIndex||e.rowIndex){var t=this.getRowObj(m(e.rowIndex)?m(e.cellIndex)?this.currentIndex:e.cellIndex.rowIndex:e.rowIndex);e.foreignKeyData=t.foreignKeyData}return e},e.prototype.onActionComplete=function(e,t){this.parent.trigger(t,this.fDataUpdate(e))},e.prototype.getModuleName=function(){return"selection"},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.hidePopUp(),this.clearSelection(),this.removeEventListener(),I.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler))},e.prototype.isEditing=function(){return("Normal"===this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.isPersistSelection},e.prototype.getSelectedMovableRow=function(e){var t=this.parent;return t.getFrozenColumns()?t.getMovableRowByIndex(e):null},e.prototype.getCurrentBatchRecordChanges=function(){var e=this.parent;if("Batch"===e.editSettings.mode&&e.editModule){var t=function(e){for(var t=[],n=0;n<e.length;n++)t.push(g({},qA(e[n]),{},!0));return t}(this.parent.getCurrentViewRecords());t=this.parent.editModule.getBatchChanges().addedRecords.concat(t);for(var n=this.parent.editModule.getBatchChanges().deletedRecords,i=this.parent.getPrimaryKeyFieldNames()[0],r=0;r<n.length;r++)for(var o=0;o<t.length;o++)if(n[r][i]===t[o][i]){t.splice(o,1);break}return t}return e.getCurrentViewRecords()},e.prototype.selectRow=function(e,t){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection)this.addRowsToSelection([e]);else{var n,i=this.parent,r=i.getRowByIndex(e),o=this.getSelectedMovableRow(e),s=!1;if(n=i.enableVirtualization&&r?i.getRowObjectFromUID(r.getAttribute("data-uid")).data:this.getCurrentBatchRecordChanges()[e],this.isRowType()&&r&&!this.isEditing()){var a,l=r.hasAttribute("aria-selected");(t=t?!!this.selectedRowIndexes.length&&1===this.selectedRowIndexes.length&&e===this.selectedRowIndexes[0]:t)||(a={data:n,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:r,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1},a=this.addMovableArgs(a,o),this.onActionBegin(a,"rowSelecting")),(m(a)||!0!==a.cancel)&&(l&&this.selectionSettings.persistSelection&&(this.clearSelectedRow(e),s=!0),this.selectionSettings.persistSelection||this.clearRow(),t||s||(this.selectedRowIndexes.indexOf(e)<=-1&&(this.updateRowSelection(r,e),i.getFrozenColumns()&&this.updateRowSelection(o,e)),this.selectRowIndex(e)),t||(a={data:n,rowIndex:e,row:r,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget},a=this.addMovableArgs(a,o),this.onActionComplete(a,"rowSelected")),this.updateRowProps(e))}}},e.prototype.addMovableArgs=function(e,t){if(this.parent.getFrozenColumns()){var n={mRow:t,previousMovRow:this.parent.getMovableRows()[this.prevRowIndex]};e=QO({},e,n)}return e},e.prototype.selectRowsByRange=function(e,t){this.selectRows(this.getCollectionFromIndexes(e,t)),this.selectRowIndex(t)},e.prototype.selectRows=function(e){var t=this.parent,n=this.isSingleSel()?e[e.length-1]:e[0],i=t.getRowByIndex(n),r=this.getSelectedMovableRow(n),o=t.getFrozenColumns(),s=this.getCurrentBatchRecordChanges()[e[0]];if(this.isRowType()&&!this.isEditing()){var a={rowIndexes:e,row:i,rowIndex:n,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:s};if(a=this.addMovableArgs(a,r),this.onActionBegin(a,"rowSelecting"),m(a)||!0!==a.cancel){if(this.clearRow(),this.selectRowIndex(e.slice(-1)[0]),this.isSingleSel())this.updateRowSelection(t.getRowByIndex(n),n),o&&this.updateRowSelection(t.getMovableRowByIndex(n),n),this.updateRowProps(n);else for(var l=0,c=e;l<c.length;l++){var h=c[l];this.updateRowSelection(t.getRowByIndex(h),h),o&&this.updateRowSelection(t.getMovableRowByIndex(h),h),this.updateRowProps(n)}a={rowIndexes:e,row:i,rowIndex:n,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,data:s},a=this.addMovableArgs(a,r),this.onActionComplete(a,"rowSelected")}}},e.prototype.addRowsToSelection=function(e){var t=this.parent,n=this.target,i=this.isSingleSel()?t.getRowByIndex(e[e.length-1]):t.getRowByIndex(e[0]),r=this.isSingleSel()?this.getSelectedMovableRow(e[e.length-1]):this.getSelectedMovableRow(e[0]),o=t.getFrozenColumns();if(this.isRowType()&&!this.isEditing())for(var s,a=this.parent.getColumns().filter(function(e){return"checkbox"===e.type}),l=0,c=e;l<c.length;l++){var h=c[l],d=this.getRowObj(h),u=this.selectedRowIndexes.indexOf(h)>-1;if(this.selectRowIndex(h),u&&(a.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.rowDeselect("rowDeselecting",[h],[d.data],[i],[d.foreignKeyData],n),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(h),1),this.selectedRecords.splice(this.selectedRecords.indexOf(i),1),i.removeAttribute("aria-selected"),this.addRemoveClassesForRow(i,!1,null,"e-selectionbackground","e-active"),r&&(this.selectedRecords.splice(this.selectedRecords.indexOf(r),1),r.removeAttribute("aria-selected"),this.addRemoveClassesForRow(r,!1,null,"e-selectionbackground","e-active")),this.rowDeselect("rowDeselected",[h],[d.data],[i],[d.foreignKeyData],n,[r]),this.isInteracted=!1}else{if(s={data:d.data,rowIndex:h,row:i,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:d.foreignKeyData},s=this.addMovableArgs(s,r),this.onActionBegin(s,"rowSelecting"),!m(s)&&!0===s.cancel)return;this.isSingleSel()&&this.clearRow(),this.updateRowSelection(i,h),o&&this.updateRowSelection(r,h)}if(u||(s={data:d.data,rowIndex:h,row:i,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:d.foreignKeyData},s=this.addMovableArgs(s,r),this.onActionComplete(s,"rowSelected")),this.updateRowProps(h),this.isSingleSel())break}},e.prototype.getCollectionFromIndexes=function(e,t){for(var n=[],i=e<=t?{i:e,max:t}:{i:t,max:e},r=i.i,o=i.max;r<=o;r++)n.push(r);return e>t&&n.reverse(),n},e.prototype.clearRow=function(){this.clearRowSelection(),this.isCancelDeSelect&&"Check"!==this.parent.checkAllRows||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},e.prototype.clearSelectedRow=function(e){if(this.target){var t=this.target.parentElement;this.disableUI||(t.removeAttribute("aria-selected"),this.addRemoveClassesForRow(t,!1,!0,"e-selectionbackground","e-active")),this.updatePersistCollection(t,!1),this.updateCheckBoxes(t),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)),1)}},e.prototype.updateRowProps=function(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0},e.prototype.updatePersistCollection=function(e,t){var n=this;if(this.parent.isPersistSelection&&!m(e)){var i=this.getRowObj(e),r=i.data?i.data[this.primaryKey]:null;if(null===r)return;i.isSelected=t,t?(this.selectedRowState[r]=t,this.persistSelectedData.some(function(e){return e[n.primaryKey]===r})||this.persistSelectedData.push(i.data)):this.updatePersistDelete(r)}},e.prototype.updatePersistDelete=function(e){var t,n=this;delete this.selectedRowState[e],this.persistSelectedData.some(function(i,r){return t=r,i[n.primaryKey]===e})&&this.persistSelectedData.splice(t,1)},e.prototype.updateCheckBoxes=function(e,t,n){if(!m(e)){var i=e.querySelector(".e-checkselect");m(i)||(sS(i.nextElementSibling,t),(m(this.checkedTarget)||!m(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(n))}},e.prototype.updateRowSelection=function(e,t){if(e){this.selectedRowIndexes.push(t);var n=this.selectedRowIndexes.length;if(this.parent.getFrozenColumns()&&n>1&&this.selectedRowIndexes[n-2]===this.selectedRowIndexes[n-1]&&this.selectedRowIndexes.pop(),this.selectedRecords.push(e),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),!this.preventFocus){var i=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(!i)return;this.focus.onClick({target:i},!0)}}},e.prototype.clearSelection=function(){if(!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!m(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var e=this.parent.element.querySelector(".e-gridpopup").querySelector("span");e.classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.isInteracted=!1,this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.enableSelectMultiTouch=!1}},e.prototype.clearRowSelection=function(){var e=this;if(this.isRowSelected){for(var t=this.parent,n=this.parent.getDataRows(),i=[],r=[],o=[],s=[],a=t.getFrozenColumns(),l=[],c=this.target,h=(this.parent.getCurrentViewRecords(),0),d=this.selectedRowIndexes.length;h<d;h++){var u="Batch"===this.parent.editSettings.mode?this.parent.getRows()[this.selectedRowIndexes[h]]:this.parent.getDataRows()[this.selectedRowIndexes[h]],p=this.getRowObj(u);p&&(i.push(p.data),r.push(u),s.push(this.selectedRowIndexes[h]),l.push(p.foreignKeyData)),a&&o.push(t.getMovableRows()[this.selectedRowIndexes[h]])}if(this.selectionSettings.persistSelection&&(this.isInteracted=!!this.checkSelectAllClicked),this.rowDeselect("rowDeselecting",s,i,r,l,c,o),this.isCancelDeSelect&&(this.isInteracted||this.checkSelectAllClicked)){if(this.parent.isPersistSelection)if("Intermediate"===this.getCheckAllStatus(this.parent.element.querySelector(".e-checkselectall")))for(h=0;h<this.selectedRecords.length;h++)this.updatePersistCollection(this.selectedRecords[h],!0);else this.parent.checkAllRows="Check",this.updatePersistSelectedData(!0);return}for(n.filter(function(e){return e.hasAttribute("aria-selected")}).forEach(function(t){e.disableUI||(t.removeAttribute("aria-selected"),e.addRemoveClassesForRow(t,!1,!0,"e-selectionbackground","e-active")),e.updatePersistCollection(t,!1),e.updateCheckBoxes(t)}),h=0,d=this.selectedRowIndexes.length;h<d;h++){var f=this.getSelectedMovableRow(this.selectedRowIndexes[h]);f&&(this.disableUI||(f.removeAttribute("aria-selected"),this.addRemoveClassesForRow(f,!1,!0,"e-selectionbackground","e-active")),this.updatePersistCollection(f,!1))}this.selectedRowIndexes=[],this.selectedRecords=[],this.isRowSelected=!1,this.selectRowIndex(-1),this.rowDeselect("rowDeselected",s,i,r,l,c,o),this.isInteracted=!1}},e.prototype.rowDeselect=function(e,t,n,i,r,o,s){if(this.selectionSettings.persistSelection&&this.isInteracted||!this.selectionSettings.persistSelection){var a={rowIndex:t,data:n,row:i,foreignKeyData:r,cancel:!1,target:o,isInteracted:this.isInteracted};this.parent.trigger(e,this.parent.getFrozenColumns()?QO({},a,{mRow:s}):a),this.isCancelDeSelect=a.cancel,this.isCancelDeSelect&&(this.isInteracted||this.checkSelectAllClicked)||(this.updatePersistCollection(i[0],!1),this.updateCheckBoxes(i[0],void 0,t[0]))}},e.prototype.getRowObj=function(e){return void 0===e&&(e=this.currentIndex),m(e)?{}:("number"==typeof e&&(e=this.parent.getRowByIndex(e)),e&&this.parent.getRowObjectFromUID(e.getAttribute("data-uid"))||{})},e.prototype.getSelectedMovableCell=function(e){var t=this.parent,n=t.getFrozenColumns();return n&&e.cellIndex>=n?t.getMovableCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex)):null},e.prototype.selectCell=function(e,t){if(this.isCellType()){var n,i=this.parent,r=this.getSelectedMovableCell(e);r||(r=i.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex))),this.currentIndex=e.rowIndex;var o=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isCellType()&&r&&!this.isEditing()){var s=r.classList.contains("e-cellselectionbackground");(t=t?!y(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&s:t)||(n={data:o,cellIndex:e,currentCell:r,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCellIndex:this.prevECIdxs,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1},this.onActionBegin(n,"cellSelecting")),(m(n)||!0!==n.cancel)&&(this.clearCell(),t||this.updateCellSelection(r,e.rowIndex,e.cellIndex),this.updateCellProps(e,e),t||this.onActionComplete({data:o,cellIndex:e,currentCell:r,previousRowCellIndex:this.prevECIdxs,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},"cellSelected"))}}},e.prototype.getCellIndex=function(e,t){return this.parent.getFrozenColumns()&&t>=this.parent.getFrozenColumns()?this.parent.getMovableCellFromIndex(e,t):this.parent.getCellFromIndex(e,t)},e.prototype.selectCellsByRange=function(e,t){if(this.isCellType()){var n,i,r=this.parent,o=this.getSelectedMovableCell(e),s=r.getFrozenColumns();o||(o=r.getCellFromIndex(e.rowIndex,e.cellIndex));var a,l=e,c=t=t||e;this.currentIndex=e.rowIndex;var h=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var d={data:h,cellIndex:e,currentCell:o,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCellIndex:this.prevECIdxs,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};if(this.onActionBegin(d,"cellSelecting"),m(d)||!0!==d.cancel){if(this.clearCell(),e.rowIndex>t.rowIndex){var u=e;e=t,t=u}for(var p=e.rowIndex;p<=t.rowIndex;p++){this.selectionSettings.cellSelectionMode.indexOf("Box")<0?(n=p===e.rowIndex?e.cellIndex:0,i=p===t.rowIndex?t.cellIndex:this.getLastColIndex(p)):(n=e.cellIndex,i=t.cellIndex),a=[];for(var f=n<i?n:i,g=n>i?n:i;f<=g;f++)(o=s?f<s?r.getCellFromIndex(p,f):r.getMovableCellFromIndex(p,f):r.getCellFromIndex(p,f))&&(a.push(f),this.updateCellSelection(o),this.addAttribute(o));this.selectedRowCellIndexes.push({rowIndex:p,cellIndexes:a})}this.updateCellProps(l,c),this.onActionComplete({data:h,cellIndex:e,currentCell:o,previousRowCellIndex:this.prevECIdxs,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},"cellSelected")}}}},e.prototype.selectCells=function(e){if(this.isCellType()){var t=this.parent,n=this.getSelectedMovableCell(e[0]),i=t.getFrozenColumns();n||(n=t.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0])),this.currentIndex=e[0].rowIndex;var r=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){this.onActionBegin({data:r,cellIndex:e[0].cellIndexes[0],currentCell:n,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCellIndex:this.prevECIdxs,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},"cellSelecting");for(var o=0,s=e.length;o<s;o++)for(var a=0,l=e[o].cellIndexes.length;a<l;a++)(n=i?e[o].cellIndexes[a]<i?t.getCellFromIndex(e[o].rowIndex,e[o].cellIndexes[a]):t.getMovableCellFromIndex(e[o].rowIndex,e[o].cellIndexes[a]):t.getCellFromIndex(e[o].rowIndex,e[o].cellIndexes[a]))&&(this.updateCellSelection(n),this.addAttribute(n),this.addRowCellIndex({rowIndex:e[o].rowIndex,cellIndex:e[o].cellIndexes[a]}));this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]}),this.onActionComplete({data:r,cellIndex:e[0].cellIndexes[0],currentCell:n,previousRowCellIndex:this.prevECIdxs,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},"cellSelected")}}},e.prototype.addCellsToSelection=function(e){if(this.isCellType()){var t,n,i=this.parent,r=i.getFrozenColumns();this.currentIndex=e[0].rowIndex;var o=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var s;this.hideAutoFill(),s=r&&e[0].cellIndex>=r?i.getMovableRowsObject()[e[0].rowIndex]:this.getRowObj(e[0].rowIndex);for(var a=[],l=0,c=e;l<c.length;l++){for(var h=c[l],d=0,u=this.selectedRowCellIndexes.length;d<u;d++)if(this.selectedRowCellIndexes[d].rowIndex===h.rowIndex){n=d;break}(t=this.getSelectedMovableCell(h))||(t=i.getCellFromIndex(h.rowIndex,this.getColIndex(h.rowIndex,h.cellIndex))),a.push(s.cells[r&&e[0].cellIndex>=r?h.cellIndex-r:h.cellIndex].foreignKeyData);var p={data:o,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,previousRowCellIndex:this.prevECIdxs,currentCell:t,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?i.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},f=n>-1;if(f){var g=this.selectedRowCellIndexes[n].cellIndexes;g.indexOf(h.cellIndex)>-1?(this.cellDeselect("cellDeselecting",[{rowIndex:h.rowIndex,cellIndexes:[h.cellIndex]}],o,[t],a),g.splice(g.indexOf(h.cellIndex),1),t.classList.remove("e-cellselectionbackground"),t.removeAttribute("aria-selected"),this.cellDeselect("cellDeselected",[{rowIndex:h.rowIndex,cellIndexes:[h.cellIndex]}],o,[t],a)):(f=!1,this.onActionBegin(p,"cellSelecting"),this.addRowCellIndex({rowIndex:h.rowIndex,cellIndex:h.cellIndex}),this.updateCellSelection(t),this.addAttribute(t))}else this.onActionBegin(p,"cellSelecting"),this.updateCellSelection(t,h.rowIndex,h.cellIndex);this.updateCellProps(h,h),f||this.onActionComplete({data:o,cellIndex:e[0],currentCell:t,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,previousRowCellIndex:this.prevECIdxs,selectedRowCellIndex:this.selectedRowCellIndexes},"cellSelected")}}}},e.prototype.getColIndex=function(e,t){var n,i=this.parent.getFrozenColumns();if(i&&t>=i&&(n=this.parent.getMovableDataRows()[e]&&this.parent.getMovableDataRows()[e].querySelectorAll("td.e-rowcell")),n||(n=this.parent.getDataRows()[e]&&this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell")),n)for(var r=0;r<n.length;r++)if(parseInt(n[r].getAttribute("aria-colindex"),10)===t)return i&&t>=i&&(r+=i),r;return-1},e.prototype.getLastColIndex=function(e){var t=this.parent.getFrozenColumns()?this.parent.getMovableDataRows()[e].querySelectorAll("td.e-rowcell"):this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute("aria-colindex"),10)},e.prototype.clearCell=function(){this.clearCellSelection()},e.prototype.cellDeselect=function(e,t,n,i,r){i[0]&&i[0].classList.contains("e-gridchkbox")&&this.updateCheckBoxes(V(i[0],"tr"));var o={cells:i,data:n,cellIndexes:t,foreignKeyData:r,cancel:!1};this.parent.trigger(e,o),this.isPreventCellSelect=o.cancel},e.prototype.updateCellSelection=function(e,t,n){m(t)||this.addRowCellIndex({rowIndex:t,cellIndex:n}),e.classList.add("e-cellselectionbackground"),e.classList.contains("e-gridchkbox")&&this.updateCheckBoxes(V(e,"tr"),!0),this.addAttribute(e)},e.prototype.addAttribute=function(e){this.target=e,m(e)||(e.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:e},!0))},e.prototype.updateCellProps=function(e,t){this.prevCIdxs=e,this.prevECIdxs=t,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},e.prototype.addRowCellIndex=function(e){for(var t,n,i=0,r=this.selectedRowCellIndexes.length;i<r;i++)if(this.selectedRowCellIndexes[i].rowIndex===e.rowIndex){t=!0,n=i;break}t?this.selectedRowCellIndexes[n].cellIndexes.indexOf(e.cellIndex)<0&&this.selectedRowCellIndexes[n].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})},e.prototype.clearCellSelection=function(){if(this.isCellSelected){var e=this.parent,t=this.getSelectedCellsElement(),n=this.selectedRowCellIndexes,i=[],r=[],o=[],s=this.getCurrentBatchRecordChanges(),a=e.getFrozenColumns();this.hideAutoFill();for(var l=0,c=n.length;l<c;l++){i.push(s[n[l].rowIndex]);for(var h=this.getRowObj(n[l].rowIndex),d=0,u=n[l].cellIndexes.length;d<u;d++)a?r.push(n[l].cellIndexes[d]<a?e.getCellFromIndex(n[l].rowIndex,n[l].cellIndexes[d]):e.getMovableCellFromIndex(n[l].rowIndex,n[l].cellIndexes[d])):(h.cells&&o.push(h.cells[n[l].cellIndexes[d]].foreignKeyData),r.push(e.getCellFromIndex(n[l].rowIndex,n[l].cellIndexes[d])))}if(this.cellDeselect("cellDeselecting",n,i,r,o),!0===this.isPreventCellSelect)return;for(l=0,c=t.length;l<c;l++)t[l].classList.remove("e-cellselectionbackground"),t[l].removeAttribute("aria-selected");this.selectedRowCellIndexes=[],this.isCellSelected=!1,this.cellDeselect("cellDeselected",n,i,r,o)}},e.prototype.getSelectedCellsElement=function(){var e,t=this.parent,n=t.getDataRows();t.getFrozenColumns()&&(e=t.getMovableDataRows(),n=t.addMovableRows(n,e));for(var i=[],r=0,o=n.length;r<o;r++)i=i.concat([].slice.call(n[r].querySelectorAll(".e-cellselectionbackground")));return i},e.prototype.mouseMoveHandler=function(e){e.preventDefault();var t,n=this.parent.element.getBoundingClientRect(),i=this.x,r=this.y,o=XA(e),s=o.x-n.left,a=o.y-n.top,l=V(e.target,"tr");if(this.isDragged=!0,this.isCellDrag||(l||(l=V(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),i>s&&(t=s,s=i,i=t),r>a&&(t=a,a=r,r=t),this.element.style.left=i+"px",this.element.style.top=r+"px",this.element.style.width=s-i+"px",this.element.style.height=a-r+"px"),l&&!e.ctrlKey&&!e.shiftKey){var c=parseInt(l.getAttribute("aria-rowindex"),10);if(this.isCellDrag){var h=QA(e.target,"e-rowcell");h&&(this.startAFCell=this.startCell,this.endAFCell=QA(e.target,"e-rowcell"),this.selectLikeExcel(e,c,parseInt(h.getAttribute("aria-colindex"),10)))}else this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,c)}},e.prototype.selectLikeExcel=function(e,t,n){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(e)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:n}),this.drawBorders())},e.prototype.drawBorders=function(){"BoxWithBorder"===this.selectionSettings.cellSelectionMode&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.bdrBottom||this.createBorders(),this.positionBorders()):this.hideBorders()},e.prototype.positionBorders=function(){if(this.updateStartEndCells(),this.startCell&&this.bdrLeft&&this.selectedRowCellIndexes.length){this.showBorders();var e=this.startCell.getBoundingClientRect(),t=this.endCell.getBoundingClientRect(),n=this.startCell.offsetParent.getBoundingClientRect();this.bdrLeft.style.left=e.left-n.left+"px",this.bdrLeft.style.top=e.top-n.top+"px",this.bdrLeft.style.height=t.top-e.top>0?t.top-n.top+t.height+1-(e.top-n.top)+"px":t.height+"px",this.bdrRight.style.left=t.left-n.left+t.width+"px",this.bdrRight.style.top=this.bdrLeft.style.top,this.bdrRight.style.height=this.bdrLeft.style.height,this.bdrTop.style.left=this.bdrLeft.style.left,this.bdrTop.style.top=this.bdrRight.style.top,this.bdrTop.style.width=parseInt(this.bdrRight.style.left,10)-parseInt(this.bdrLeft.style.left,10)+1+"px",this.bdrBottom.style.left=this.bdrLeft.style.left,this.bdrBottom.style.top=parseInt(this.bdrLeft.style.top,10)+parseInt(this.bdrLeft.style.height,10)+"px",this.bdrBottom.style.width=this.bdrTop.style.width}},e.prototype.createBorders=function(){this.bdrLeft||(this.bdrLeft=this.parent.getContentTable().parentElement.appendChild(k("div",{className:"e-xlsel",id:this.parent.element.id+"_bdrleft",styles:"width: 2px;"})),this.bdrRight=this.parent.getContentTable().parentElement.appendChild(k("div",{className:"e-xlsel",id:this.parent.element.id+"_bdrright",styles:"width: 2px;"})),this.bdrBottom=this.parent.getContentTable().parentElement.appendChild(k("div",{className:"e-xlsel",id:this.parent.element.id+"_bdrbottom",styles:"height: 2px;"})),this.bdrTop=this.parent.getContentTable().parentElement.appendChild(k("div",{className:"e-xlsel",id:this.parent.element.id+"_bdrtop",styles:"height: 2px;"})))},e.prototype.showBorders=function(){this.bdrLeft&&(this.bdrLeft.style.display="",this.bdrRight.style.display="",this.bdrBottom.style.display="",this.bdrTop.style.display="")},e.prototype.hideBorders=function(){this.bdrLeft&&(this.bdrLeft.style.display="none",this.bdrRight.style.display="none",this.bdrBottom.style.display="none",this.bdrTop.style.display="none")},e.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},e.prototype.positionAFBorders=function(){if(this.startCell&&this.bdrAFLeft){this.showBorders();var e=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),n=this.startAFCell.offsetParent.getBoundingClientRect();this.bdrAFLeft.style.left=e.left-n.left+"px",this.bdrAFLeft.style.top=e.top-n.top+"px",this.bdrAFLeft.style.height=t.top-e.top>0?t.top-n.top+t.height+1-(e.top-n.top)+"px":t.height+"px",this.bdrAFRight.style.left=t.left-n.left+t.width+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=this.bdrAFLeft.style.height,this.bdrAFTop.style.left=this.bdrAFLeft.style.left,this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)+1+"px",this.bdrAFBottom.style.left=this.bdrAFLeft.style.left,this.bdrAFBottom.style.top=parseInt(this.bdrAFLeft.style.top,10)+parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFBottom.style.width=this.bdrAFTop.style.width}},e.prototype.createAFBorders=function(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.getContentTable().parentElement.appendChild(k("div",{className:"e-xlsel",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.getContentTable().parentElement.appendChild(k("div",{className:"e-xlsel",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.getContentTable().parentElement.appendChild(k("div",{className:"e-xlsel",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.getContentTable().parentElement.appendChild(k("div",{className:"e-xlsel",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))},e.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},e.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},e.prototype.updateValue=function(e,t,n){var i=this.parent.getColumnByIndex(t);this.parent.editModule&&n&&this.parent.editModule.updateCell(e,i.field,"number"===i.type?parseInt(n.textContent,10):n.textContent)},e.prototype.selectLikeAutoFill=function(e,t){var n=parseInt(QA(this.startAFCell,"e-row").getAttribute("aria-rowindex"),10),i=parseInt(this.startAFCell.getAttribute("aria-colindex"),10),r=parseInt(QA(this.endAFCell,"e-row").getAttribute("aria-rowindex"),10),o=parseInt(this.endAFCell.getAttribute("aria-colindex"),10),s=this.selectedRowCellIndexes.length-1,a=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!QA(e.target,"e-rowcell"):this.startAFCell=this.parent.getCellFromIndex(n,i),this.endAFCell=this.parent.getCellFromIndex(n+s,i+a),this.drawAFBorders();break;case i+a<o&&o-i-a+1>r-n-s&&o-i-a+1>n-r:if(this.endAFCell=this.parent.getCellFromIndex(n+s,o),r=parseInt(QA(this.endAFCell,"e-row").getAttribute("aria-rowindex"),10),o=parseInt(this.endAFCell.getAttribute("aria-colindex"),10),t){for(var l=parseInt(this.endCell.getAttribute("aria-colindex"),10),c=n;c<=r;c++)for(var h=[].slice.call(this.parent.getDataRows()[c].querySelectorAll(".e-cellselectionbackground")),d=0,u=l+1;u<=o;u++)d>a&&(d=0),this.updateValue(c,u,h[d]),d++;this.selectCellsByRange({rowIndex:n,cellIndex:this.startCellIndex},{rowIndex:r,cellIndex:o})}else this.drawAFBorders();break;case i>o&&i-o+1>r-n-s&&i-o+1>n-r:if(this.startAFCell=this.parent.getCellFromIndex(n,o),this.endAFCell=this.endCell,t){for(c=n;c<=n+s;c++)for((h=[].slice.call(this.parent.getDataRows()[c].querySelectorAll(".e-cellselectionbackground"))).reverse(),d=0,u=this.startCellIndex-1;u>=o;u--)d>a&&(d=0),this.updateValue(c,u,h[d]),d++;this.selectCellsByRange({rowIndex:n,cellIndex:o},{rowIndex:n+s,cellIndex:this.startCellIndex+a})}else this.drawAFBorders();break;case n>r:if(this.startAFCell=this.parent.getCellFromIndex(r,i),this.endAFCell=this.endCell,t){var p=f=parseInt(this.endCell.parentElement.getAttribute("aria-rowindex"),10);for(c=n-1;c>=r;c--)for(p===this.startIndex-1&&(p=f),h=[].slice.call(this.parent.getDataRows()[p].querySelectorAll(".e-cellselectionbackground")),d=0,p--,u=this.startCellIndex;u<=this.startCellIndex+a;u++)this.updateValue(c,u,h[d]),d++;this.selectCellsByRange({rowIndex:r,cellIndex:i+a},{rowIndex:n+s,cellIndex:i})}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(r,i+a),t){var f=parseInt(this.endCell.parentElement.getAttribute("aria-rowindex"),10);for(p=this.startIndex,c=f+1;c<=r;c++){p===f+1&&(p=this.startIndex),h=[].slice.call(this.parent.getDataRows()[p].querySelectorAll(".e-cellselectionbackground")),p++,d=0;for(var g=this.startCellIndex;g<=this.startCellIndex+a;g++)this.updateValue(c,g,h[d]),d++}this.selectCellsByRange({rowIndex:f-s,cellIndex:i},{rowIndex:r,cellIndex:i+a})}else this.drawAFBorders()}},e.prototype.mouseUpHandler=function(e){document.body.classList.remove("e-disableuserselect"),this.element&&B(this.element),this.mUPTarget=this.isDragged&&1===this.selectedRowCellIndexes.length&&1===this.selectedRowCellIndexes[0].cellIndexes.length?QA(e.target,"e-rowcell"):null,this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel&&(this.startAFCell=this.startCell,this.endAFCell=QA(e.target,"e-rowcell"),this.updateStartCellsIndex(),this.selectLikeAutoFill(e,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.isAutoFillSel=!1),I.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),I.remove(document.body,"mouseup",this.mouseUpHandler)},e.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},e.prototype.updateAutoFillPosition=function(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var e=[].slice.call(this.parent.getDataRows()[this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex].querySelectorAll(".e-cellselectionbackground"));this.parent.element.querySelector("#"+this.parent.element.id+"_autofill")||(this.autofill=this.parent.getContentTable().parentElement.appendChild(k("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"})));var t=e[e.length-1];if(t&&t.offsetParent){var n=t.getBoundingClientRect(),i=t.offsetParent.getBoundingClientRect();this.autofill.style.left=n.left-i.left+n.width-3+"px",this.autofill.style.top=n.top-i.top+n.height-3+"px"}this.autofill.style.display=""}else this.hideAutoFill()},e.prototype.mouseDownHandler=function(e){var t,n=e.target,i=this.parent,r=QA(n,"e-grid");if(!r||r.id===i.element.id){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),QA(n,"e-rowcell")&&!e.shiftKey&&!e.ctrlKey){if(i.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,t=!0;else if(i.allowRowDragAndDrop){if(!this.isRowType()||this.isSingleSel()||V(n,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);t=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),i.getContent().appendChild(this.element)}t&&this.enableDrag(e,!0)}this.updateStartEndCells(),n.classList.contains("e-autofill")&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e))}},e.prototype.updateStartEndCells=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute("aria-rowindex"),10),this.startCellIndex=parseInt(QA(this.startCell,"e-rowcell").getAttribute("aria-colindex"),10))},e.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute("aria-rowindex"),10),this.startCellIndex=parseInt(QA(this.startCell,"e-rowcell").getAttribute("aria-colindex"),10))},e.prototype.enableDrag=function(e,t){var n=this.parent;if(t){var i=V(e.target,"tr");this.startDIndex=parseInt(i.getAttribute("aria-rowindex"),10),this.startDCellIndex=parseInt(QA(e.target,"e-rowcell").getAttribute("aria-colindex"),10)}document.body.classList.add("e-disableuserselect");var r=n.element.getBoundingClientRect(),o=XA(e);this.x=o.x-r.left,this.y=o.y-r.top,I.add(n.getContent(),"mousemove",this.mouseMoveHandler,this),I.add(document.body,"mouseup",this.mouseUpHandler,this)},e.prototype.clearSelAfterRefresh=function(e){"virtualscroll"===e.requestType||this.parent.isPersistSelection||this.clearSelection()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(xA,this.enableAfterRender,this),this.parent.on("initial-end",this.initializeSelection,this),this.parent.on("rowselected",this.onActionComplete,this),this.parent.on("cellselected",this.onActionComplete,this),this.parent.on(SA,this.onPropertyChanged,this),this.parent.on("cellfocused",this.onCellFocused,this),this.parent.on("beforeFragAppend",this.clearSelAfterRefresh,this),this.parent.on(DA,this.columnPositionChanged,this),this.parent.on(CA,this.initialEnd,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(gA,this.actionBeginFunction),this.parent.addEventListener(mA,this.actionCompleteFunction),this.parent.on(PA,this.rowsRemoved,this),this.parent.on("header-refreshed",this.refreshHeader,this),this.addEventListener_checkbox())},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(xA,this.enableAfterRender),this.parent.off("initial-end",this.initializeSelection),this.parent.off("rowselected",this.onActionComplete),this.parent.off("cellselected",this.onActionComplete),this.parent.off(SA,this.onPropertyChanged),this.parent.off("cellfocused",this.onCellFocused),this.parent.off("beforeFragAppend",this.clearSelAfterRefresh),this.parent.off(DA,this.columnPositionChanged),this.parent.removeEventListener(gA,this.actionBeginFunction),this.parent.removeEventListener(mA,this.actionCompleteFunction),this.parent.off(PA,this.rowsRemoved),this.parent.off("header-refreshed",this.refreshHeader),this.removeEventListener_checkbox())},e.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},e.prototype.refreshHeader=function(){this.setCheckAllState()},e.prototype.rowsRemoved=function(e){for(var t=0;t<e.records.length;t++)delete this.selectedRowState[e.records[t][this.primaryKey]],--this.totalRecordsCount;this.setCheckAllState()},e.prototype.beforeFragAppend=function(e){"virtualscroll"===e.requestType||this.parent.isPersistSelection||this.clearSelection()},e.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.render()},e.prototype.render=function(e){I.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){var t=this.parent;m(e.properties.type)||"Single"!==this.selectionSettings.type||(this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()),m(e.properties.mode)&&m(e.properties.cellSelectionMode)||(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.initPerisistSelection(),this.parent.getColumns().filter(function(e){return"checkbox"===e.type}).length&&(t.isCheckBoxSelection=!("ResetOnRowClick"===this.selectionSettings.checkboxMode)),this.drawBorders()}},e.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").querySelectorAll(".e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},e.prototype.initialEnd=function(){this.parent.off(CA,this.initialEnd),this.selectRow(this.parent.selectedRowIndex)},e.prototype.checkBoxSelectionChanged=function(){this.parent.off(CA,this.checkBoxSelectionChanged);var e=this.parent,t=e.getColumns().filter(function(e){return"checkbox"===e.type});t.length>0&&(e.isCheckBoxSelection=!0,this.chkField=t[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,m(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(e.selectionSettings.type="Multiple",e.dataBind()):this.initPerisistSelection()),e.isCheckBoxSelection||this.isPersisted||(this.chkField=null,this.initPerisistSelection())},e.prototype.initPerisistSelection=function(){var e=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(e.isPersistSelection=!1,this.selectedRowState={})},e.prototype.ensureCheckboxFieldSelection=function(){var e=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!e.enableVirtualization&&this.chkField&&(e.isPersistSelection&&0===Object.keys(this.selectedRowState).length||!e.isPersistSelection)){var t=this.parent.getDataModule(),n=(new Zc).where(this.chkField,"equal",!0);n.params||(n.params=this.parent.query.params);var i=t.getData({},n),r=this;this.parent.showSpinner(),i.then(function(e){r.dataSuccess(e.result),r.refreshPersistSelection(),r.parent.hideSpinner()})}},e.prototype.dataSuccess=function(e){for(var t=0;t<e.length;t++)m(this.selectedRowState[e[t][this.primaryKey]])&&e[t][this.chkField]&&(this.selectedRowState[e[t][this.primaryKey]]=e[t][this.chkField]);this.persistSelectedData=e},e.prototype.setRowSelection=function(e){if(!this.parent.getDataModule().isRemote())if(e)for(var t=0,n=this.getData();t<n.length;t++)this.selectedRowState[n[t][this.primaryKey]]=!0;else this.selectedRowState={}},e.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},e.prototype.refreshPersistSelection=function(){var e=this.parent.getRows();if(e.length>0&&(this.parent.isPersistSelection||this.chkField)){for(var t=[],n=0;n<e.length;n++){var i=this.getRowObj(e[n]),r=i?i.data[this.primaryKey]:null;if(null===r)return;var o=void 0,s=e[n].querySelector(".e-checkselect");this.selectedRowState[r]||"Check"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(r)<0||"Uncheck"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(r)>0||"Intermediate"===this.parent.checkAllRows&&!m(this.chkField)&&i.data[this.chkField]?(t.push(parseInt(e[n].getAttribute("aria-rowindex"),10)),o=!0):(o=!1,this.checkedTarget!==s&&this.parent.isCheckBoxSelection&&sS(s.nextElementSibling,o)),this.updatePersistCollection(e[n],o)}this.isSingleSel()&&t.length>0?this.selectRow(t[0],!0):this.selectRows(t)}this.parent.isCheckBoxSelection&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},e.prototype.actionBegin=function(e){if("save"===e.requestType&&this.parent.isPersistSelection){var t=this.parent.element.querySelector(".e-edit-checkselect");if(!m(t)){var n=V(t,".e-editedrow");if(n){"Dialog"===this.parent.editSettings.mode&&(n=this.parent.element.querySelector(".e-dlgeditrow"));var i=this.getRowObj(n);if(!i)return;this.selectedRowState[i.data[this.primaryKey]]=i.isSelected=t.checked}else this.isCheckedOnAdd=t.checked}}},e.prototype.actionComplete=function(e){var t=this;if("save"===e.requestType&&this.parent.isPersistSelection){if("add"===e.action&&this.isCheckedOnAdd){var n=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));this.selectedRowState[n.data[this.primaryKey]]=n.isSelected=this.isCheckedOnAdd}this.refreshPersistSelection()}"delete"===e.requestType&&this.parent.isPersistSelection&&(e.data.slice().forEach(function(e){m(e[t.primaryKey])||t.updatePersistDelete(e[t.primaryKey])}),this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),"paging"===e.requestType&&(this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0)},e.prototype.onDataBound=function(){!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.refreshPersistSelection()},e.prototype.updatePersistSelectedData=function(e){if(this.parent.isPersistSelection){for(var t=this.parent.getRows(),n=0;n<t.length;n++)this.updatePersistCollection(t[n],e);"Uncheck"===this.parent.checkAllRows?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:[]):"Check"===this.parent.checkAllRows&&(this.setRowSelection(!0),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:this.getData().slice())}},e.prototype.checkSelectAllAction=function(e){var t=this.getRenderer(),n=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),e&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(e),this.selectRowsByRange(t.getVirtualRowIndex(0),t.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(e),this.clearSelection()),this.chkAllCollec=[],!m(n)){var i=n.querySelector(".e-edit-checkselect");m(i)||sS(i.nextElementSibling,e)}},e.prototype.checkSelectAll=function(e){var t=this,n=this.getCheckAllStatus(e),i="Check"===n;"Intermediate"===n&&(i=this.getCurrentBatchRecordChanges().some(function(e){return e[t.primaryKey]in t.selectedRowState})),this.checkSelectAllAction(!i),this.target=null,this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState(),this.triggerChkChangeEvent(e,!i)},e.prototype.getCheckAllStatus=function(e){var t=e?e.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList;return t.contains("e-check")?"Check":t.contains("e-uncheck")?"Uncheck":t.contains("e-stop")?"Intermediate":"None"},e.prototype.checkSelect=function(e){var t=V(this.checkedTarget,".e-rowcell"),n=this.parent;this.isMultiCtrlRequest=!0;var i=0;if(hS(n)){var r=t.parentElement.getAttribute("data-uid");i=n.getRows().map(function(e){return e.getAttribute("data-uid")}).indexOf(r)}else i=parseInt(t.parentElement.getAttribute("aria-rowindex"),10);this.parent.isPersistSelection&&this.parent.element.querySelectorAll(".e-addedrow").length>0&&++i,this.rowCellSelectionHandler(i,parseInt(t.getAttribute("aria-colindex"),10)),this.moveIntoUncheckCollection(V(t,".e-row")),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))},e.prototype.moveIntoUncheckCollection=function(e){if("Check"===this.parent.checkAllRows||"Uncheck"===this.parent.checkAllRows){var t=this.getRowObj(e),n=t&&t.data?t.data[this.primaryKey]:null;if(!n)return;this.chkAllCollec.indexOf(n)<0?this.chkAllCollec.push(n):this.chkAllCollec.splice(this.chkAllCollec.indexOf(n),1)}},e.prototype.triggerChkChangeEvent=function(e,t){this.parent.trigger("checkBoxChange",{checked:t,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)},e.prototype.updateSelectedRowIndex=function(e){if(this.parent.isCheckBoxSelection&&this.parent.enableVirtualization&&!this.parent.getDataModule().isRemote())if("Check"===this.parent.checkAllRows){this.selectedRowIndexes=[];for(var t=0;t<this.getData().length;t++)this.selectedRowIndexes.push(t)}else if("Uncheck"===this.parent.checkAllRows)this.selectedRowIndexes=[];else if(e&&"false"===this.parent.getRowByIndex(e).getAttribute("aria-selected")){var n=this.selectedRowIndexes.indexOf(e);this.selectedRowIndexes.splice(n,1)}},e.prototype.setCheckAllState=function(e,t){if(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode){var n=Object.keys(this.selectedRowState).length;if(this.parent.isPersistSelection||(n=this.selectedRecords.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.getCheckAllBox()){var i=this.getCheckAllBox().nextElementSibling;T([i],["e-check","e-stop","e-uncheck"]),n===this.totalRecordsCount&&this.totalRecordsCount||this.parent.enableVirtualization&&!this.parent.allowPaging&&!this.parent.getDataModule().isRemote()&&n===this.getData().length?(P([i],["e-check"]),t&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):0===n||0===this.getCurrentBatchRecordChanges().length?(P([i],["e-uncheck"]),t&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck",0===n&&0===this.getCurrentBatchRecordChanges().length?P([i.parentElement],["e-checkbox-disabled"]):T([i.parentElement],["e-checkbox-disabled"])):(P([i],["e-stop"]),this.parent.checkAllRows="Intermediate"),!this.parent.enableVirtualization||this.parent.allowPaging||this.parent.getDataModule().isRemote()||this.updateSelectedRowIndex(e)}}},e.prototype.clickHandler=function(e){var t=e.target;this.actualTarget=t,this.isInteracted=!0,this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch,this.isMultiShiftRequest=e.shiftKey,this.popUpClickHandler(e);var n,i=!1;this.preventFocus=!0;var r=QA(t,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!(!r||!r.querySelectorAll(".e-checkselectall")),r&&r.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(n=r.querySelector('input[type="checkbox"]'),i=!0),this.drawBorders(),(t=QA(t,"e-rowcell"))&&t.parentElement.classList.contains("e-row")&&!this.parent.selectionSettings.checkboxOnly||i){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=t,m(n)){var o=this.parent,s=0;if(hS(o)){var a=t.parentElement.getAttribute("data-uid");s=o.getRows().map(function(e){return e.getAttribute("data-uid")}).indexOf(a)}else s=parseInt(t.parentElement.getAttribute("aria-rowindex"),10);this.parent.isPersistSelection&&this.parent.element.querySelectorAll(".e-addedrow").length>0&&++s,this.mUPTarget&&this.mUPTarget.isEqualNode(t)||this.rowCellSelectionHandler(s,parseInt(t.getAttribute("aria-colindex"),10)),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(V(t,".e-row")),this.setCheckAllState())}else this.checkedTarget=n,n.classList.contains("e-checkselectall")?this.checkSelectAll(n):this.checkSelect(n);this.parent.isCheckBoxSelection||!re.isDevice||this.isSingleSel()||this.showPopup(e)}this.isMultiCtrlRequest=!1,this.isMultiShiftRequest=!1,m(V(e.target,".e-unboundcell"))&&(this.preventFocus=!1)},e.prototype.popUpClickHandler=function(e){var t=e.target;V(t,".e-headercell")||e.target.classList.contains("e-rowcell")||V(t,".e-gridpopup")?t.classList.contains("e-rowselect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},e.prototype.showPopup=function(e){this.selectionSettings.enableSimpleMultiRowSelection||function(e,t,n){var i,r=e.querySelector("span"),o=e.parentElement.getBoundingClientRect(),s=t.target.getBoundingClientRect();r.className=n,e.style.display="",i=(m(t.clientY)?t.changedTouches[0].clientY:t.clientY)>e.offsetHeight+10,e.style.top=s.top-o.top+(i?-(e.offsetHeight+10):e.offsetHeight+10)+"px",e.style.left=function(t,n,i,r){var o=e.offsetWidth/2,s=XA(n).x;return s-i.left<o?i.left-r:i.right-s<o?i.right-r-2*o:s-r-o}(0,t,s,o.left)+"px",i?(e.querySelector(".e-downtail").style.display="",e.querySelector(".e-uptail").style.display="none"):(e.querySelector(".e-downtail").style.display="none",e.querySelector(".e-uptail").style.display="")}(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>(this.parent.getFrozenColumns()?2:1)||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},e.prototype.rowCellSelectionHandler=function(e,t){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?(this.isDragged||this.selectRow(e,this.selectionSettings.enableToggle),this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders()):this.isMultiShiftRequest?(this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!V(this.target,".e-rowcell").classList.contains("e-gridchkbox")?this.selectRowsByRange(y(this.prevRowIndex)?e:this.prevRowIndex,e):this.addRowsToSelection([e]),this.selectCellsByRange(y(this.prevCIdxs)?{rowIndex:e,cellIndex:t}:this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.updateAutoFillPosition(),this.drawBorders()):(this.addRowsToSelection([e]),this.addCellsToSelection([{rowIndex:e,cellIndex:t}]),this.hideBorders()),this.isDragged=!1},e.prototype.onCellFocused=function(e){if(this.parent.frozenRows&&e.container.isHeader&&e.byKey)if("upArrow"===e.keyArgs.action)e.isJump=this.parent.allowFiltering?"INPUT"===e.element.tagName:"TH"===e.element.tagName;else if("downArrow"===e.keyArgs.action){var t=Number(e.element.parentElement.getAttribute("aria-rowindex"));e.isJump=0===t}else"ctrlHome"===e.keyArgs.action&&(e.isJump=!0);var n=this.parent.getFrozenColumns()?(e.container.isHeader&&"TD"!==e.element.tagName&&e.isJump||(e.container.isContent||"TD"===e.element.tagName)&&!(e.container.isSelectable||"TD"===e.element.tagName))&&!(e.byKey&&"space"===e.keyArgs.action):(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&"space"===e.keyArgs.action),i=e.container.isHeader&&"TD"!==e.element.tagName&&!V(e.element,".e-rowcell")&&!(e.byKey&&"space"===e.keyArgs.action);if(e.byKey&&!n){var r=e.container.isContent?e.container.indexes:e.indexes,o=r[0],s=r[1],a=this.focus.getPrevIndexes();if(this.parent.frozenRows)if(e.container.isHeader&&("TD"===e.element.tagName||V(e.element,".e-rowcell"))){var l=this.parent.getHeaderTable().querySelector("thead").childElementCount;o-=l,a.rowIndex=a.rowIndex?a.rowIndex-l:null}else o+=this.parent.frozenRows,a.rowIndex=0!==a.rowIndex&&m(a.rowIndex)?null:a.rowIndex+this.parent.frozenRows;if(this.parent.getFrozenColumns()){var c=Number(e.element.getAttribute("aria-colindex"));a.cellIndex=a.cellIndex?a.cellIndex===s?c:c-1:null,s=c}if(!(i||-1===["ctrlPlusA","escape"].indexOf(e.keyArgs.action)&&"space"!==e.keyArgs.action&&o===a.rowIndex&&s===a.cellIndex)){switch(this.preventFocus=!0,e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.applyDownUpKey(o,s);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(o,s);break;case"shiftDown":case"shiftUp":this.shiftDownKey(o,s);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(o,s);break;case"home":case"end":s="end"===e.keyArgs.action?this.getLastColIndex(o):0,this.applyHomeEndKey(o,s);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(o,s);break;case"escape":this.clearSelection();break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(e.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(o)}this.preventFocus=!1,this.positionBorders(),this.updateAutoFillPosition()}}else n&&!this.parent.isCheckBoxSelection&&this.clearSelection()},e.prototype.ctrlPlusA=function(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.parent.getRows().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},e.prototype.applySpaceSelection=function(e){e.classList.contains("e-checkselectall")?(this.checkedTarget=e,this.checkSelectAll(this.checkedTarget)):e.classList.contains("e-checkselect")&&(this.checkedTarget=e,this.checkSelect(this.checkedTarget))},e.prototype.applyDownUpKey=function(e,t){var n=this.parent;this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&!this.selectionSettings.persistSelection&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&(this.selectRow(e,!0),this.applyUpDown(n.selectedRowIndex)),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)},e.prototype.applyUpDown=function(e){if(!(e<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var t=parseInt(this.target.getAttribute("aria-colindex"),10),n=this.parent.getFrozenColumns();this.target=n&&t>=n?this.contentRenderer.getMovableRowByIndex(e).querySelectorAll(".e-rowcell")[t-n]:this.contentRenderer.getRowByIndex(e).querySelectorAll(".e-rowcell")[t],this.addAttribute(this.target)}},e.prototype.applyRightLeftKey=function(e,t){this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:t},!0),this.addAttribute(this.target))},e.prototype.applyHomeEndKey=function(e,t){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:t},!0):this.addAttribute(this.parent.getCellFromIndex(e,t))},e.prototype.shiftDownKey=function(e,t){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(y(this.prevRowIndex)?this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},e.prototype.applyShiftLeftRightKey=function(e,t){this.isMultiShiftRequest=!0,this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},e.prototype.applyCtrlHomeEndKey=function(e,t){this.isRowType()&&(this.selectRow(e,!0),this.addAttribute(this.parent.getCellFromIndex(e,t))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)},e.prototype.addRemoveClassesForRow=function(e,t,n){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];if(e){var o=[].slice.call(e.querySelectorAll(".e-rowcell")),s=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand"),a=e.querySelector(".e-rowdragdrop");s&&o.push(s),a&&o.push(a),(function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];for(var r=0,o=e.length;r<o;r++)t?(W(e[r],n.slice(),[]),e[r].setAttribute("aria-selected","true")):(W(e[r],[],n.slice()),e[r].removeAttribute("aria-selected"))}).apply(void 0,[o,t].concat(i))}this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,t,n)},e.prototype.isRowType=function(){return"Row"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},e.prototype.isCellType=function(){return"Cell"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},e.prototype.isSingleSel=function(){return"Single"===this.selectionSettings.type},e.prototype.getRenderer=function(){return m(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(AS.Content)),this.contentRenderer},e.prototype.getSelectedRecords=function(){return this.selectionSettings.persistSelection?this.persistSelectedData:this.parent.getRowsObject().filter(function(e){return e.isSelected}).map(function(e){return e.data})},e.prototype.addEventListener_checkbox=function(){var e=this;this.parent.on("data-ready",this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(yA,this.onDataBoundFunction),this.parent.on(CA,this.checkBoxSelectionChanged,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(mA,this.actionCompleteFunc),this.parent.on("click",this.clickHandler,this),this.resizeEndFn=function(){e.updateAutoFillPosition(),e.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener("resizeStop",this.resizeEndFn)},e.prototype.removeEventListener_checkbox=function(){this.parent.off("data-ready",this.dataReady),this.parent.removeEventListener(yA,this.onDataBoundFunction),this.parent.removeEventListener(mA,this.actionCompleteFunc),this.parent.off("click",this.clickHandler)},e.prototype.dataReady=function(e){"virtualscroll"===e.requestType||this.parent.isPersistSelection||(this.disableUI=!0,this.clearSelection(),this.disableUI=!1)},e.prototype.actionCompleteHandler=function(e){"save"===e.requestType&&this.parent.isPersistSelection&&this.refreshPersistSelection()},e.prototype.selectRowIndex=function(e){this.parent.isSelectedRowIndexUpdating=!0,this.parent.selectedRowIndex=e},e}(),XO=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.search=function(e){var t=this.parent;e=m(e)?"":e,nS(t)?t.notify("prevent-batch",{instance:this,handler:this.search,arg1:e}):e!==t.searchSettings.key?(t.searchSettings.key=e.toString(),t.dataBind()):this.refreshSearch&&t.refresh()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(SA,this.onPropertyChanged,this),this.parent.on("searching-complete",this.onSearchComplete,this),this.parent.on(EA,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(mA,this.actionCompleteFunc),this.parent.on("cancel-Begin",this.cancelBeginEvent,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(SA,this.onPropertyChanged),this.parent.off("searching-complete",this.onSearchComplete),this.parent.off(EA,this.destroy),this.parent.removeEventListener(mA,this.actionCompleteFunc),this.parent.off("cancel-Begin",this.cancelBeginEvent))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(m(e.properties.key)?this.parent.notify("model-changed",{requestType:"searching",type:gA}):this.parent.notify("model-changed",{requestType:"searching",type:gA,searchString:this.parent.searchSettings.key}))},e.prototype.onSearchComplete=function(e){this.parent.trigger(mA,g(e,{searchString:this.parent.searchSettings.key,requestType:"searching",type:mA}))},e.prototype.onActionComplete=function(e){this.refreshSearch="searching"!==e.requestType},e.prototype.cancelBeginEvent=function(e){"searching"===e.requestType&&this.parent.setProperties({searchSettings:{key:""}},!0)},e.prototype.getModuleName=function(){return"search"},e}(),ZO=function(){function e(e){this.parent=e}return e.prototype.show=function(e,t){var n=this.getToggleFields(e),i=this.getColumns(n,t);this.parent.notify("tooltip-destroy",{module:"edit"}),i.forEach(function(e){e.visible=!0}),this.setVisible(i)},e.prototype.hide=function(e,t){var n=this.getToggleFields(e),i=this.getColumns(n,t);this.parent.notify("tooltip-destroy",{module:"edit"}),i.forEach(function(e){e.visible=!1}),this.setVisible(i)},e.prototype.getToggleFields=function(e){return"string"==typeof e?[e]:e},e.prototype.getColumns=function(e,t){var n=this;return VA(e,function(e,i){return VA(n.parent.columnModel,function(n,i){if(n[t]===e)return n})[0]})},e.prototype.setVisible=function(e){if(nS(this.parent))this.parent.notify("prevent-batch",{instance:this,handler:this.setVisible,arg1:e});else{var t=this.parent.getColumns();e=m(e)?t:e,this.parent.allowSelection&&this.parent.getSelectedRecords().length&&this.parent.clearSelection(),this.parent.enableColumnVirtualization?e.filter(function(e){return t.some(function(t){return e.field===t.field})}).length&&this.parent.notify(IA,e):this.parent.notify(IA,e),"All"!==this.parent.columnQueryMode&&this.parent.refresh()}},e}(),KO=function(){function e(e){this.lastScrollTop=0,this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.widthService=new BO(e),this.addEventListener()}return e.prototype.getModuleName=function(){return"scroll"},e.prototype.setWidth=function(){this.parent.element.style.width=x(this.parent.width),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element&&this.parent.toolbarModule.toolbar.refreshOverflow()},e.prototype.setHeight=function(){var e=0,t=this.parent.getContent().firstChild;this.parent.frozenRows&&"auto"!==this.parent.height?(e=this.parent.getHeaderContent().querySelector("tbody").offsetHeight,t.style.height=x(this.parent.height-e)):t.style.height=x(this.parent.height),this.ensureOverflow(t)},e.prototype.setPadding=function(){var t=this.parent.getHeaderContent(),n=e.getScrollBarWidth()-this.getThreshold(),i=this.getCssProperties();t.firstChild.style[i.border]=n>0?"1px":"0px",t.style[i.padding]=n>0?n+"px":"0px"},e.prototype.removePadding=function(e){var t=this.getCssProperties(e);this.parent.getHeaderContent().firstChild.style[t.border]="",this.parent.getHeaderContent().firstChild.parentElement.style[t.padding]=""},e.prototype.refresh=function(){if("100%"===this.parent.height){var e=this.parent.getContent();this.parent.element.style.height="100%";var t=this.widthService.getSiblingsHeight(e);e.style.height="calc(100% - "+t+"px)"}},e.prototype.getThreshold=function(){return"mozilla"===re.info.name?.5:1},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(AA,this.wireEvents,this),this.parent.on(CA,this.wireEvents,this),this.parent.on(xA,this.onPropertyChanged,this),this.parent.on("header-refreshed",this.setScrollLeft,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(AA,this.wireEvents),this.parent.off(CA,this.wireEvents),this.parent.off(xA,this.onPropertyChanged),this.parent.off("header-refreshed",this.setScrollLeft))},e.prototype.setScrollLeft=function(){this.parent.frozenColumns&&(this.parent.headerModule.getMovableHeader().scrollLeft=this.previousValues.left)},e.prototype.onContentScroll=function(e){var t=this,n=e,i=n.classList.contains("e-headercontent");return function(e){if(null!==t.content.querySelector("tbody")&&!t.parent.isPreventScrollEvent){var r=e.target,o=r.scrollLeft,s=r.classList.contains("e-summarycontent");t.previousValues.left!==o?(n.scrollLeft=o,s&&(t.header.scrollLeft=o),t.previousValues.left=o,t.parent.notify("scroll",{left:o})):t.previousValues.top=i?r.scrollTop:t.previousValues.top}}},e.prototype.onFreezeContentScroll=function(e){var t=this,n=e;return function(e){if(null!==t.content.querySelector("tbody")){var i=e.target.scrollTop;t.previousValues.top!==i&&(n.scrollTop=i,t.previousValues.top=i)}}},e.prototype.onWheelScroll=function(e){var t=this,n=e;return function(e){if(null!==t.content.querySelector("tbody")){var i=n.scrollTop+(1===e.deltaMode?30*e.deltaY:e.deltaY);t.previousValues.top!==i&&(e.preventDefault(),t.parent.getContent().querySelector(".e-frozencontent").scrollTop=i,n.scrollTop=i,t.previousValues.top=i)}}},e.prototype.onTouchScroll=function(e){var t=this,n=e;return function(e){if("mouse"!==e.pointerType){var i,r,o=t.getPointXY(e),s=n.scrollTop+(t.pageXY.y-o.y),a=n.scrollLeft+(t.pageXY.x-o.x);if(t.parent.getHeaderContent().contains(e.target)){if(r=t.parent.getFrozenColumns()?t.parent.getHeaderContent().querySelector(".e-movableheader"):t.parent.getHeaderContent().firstChild,t.previousValues.left===a||a<0||r.scrollWidth-r.clientWidth<a)return;e.preventDefault(),r.scrollLeft=a,n.scrollLeft=a,t.pageXY.x=o.x,t.previousValues.left=a}else{if(i=t.parent.getContent().querySelector(".e-frozencontent"),t.previousValues.top===s&&(s<0||i.scrollHeight-i.clientHeight<s)||s<0||i.scrollHeight-i.clientHeight<s)return;e.preventDefault(),i.scrollTop=s,n.scrollTop=s,t.pageXY.y=o.y,t.previousValues.top=s}}}},e.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},e.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},e.prototype.wireEvents=function(){var e=this;if(this.oneTimeReady){var t=this.parent.getFrozenColumns();this.content=this.parent.getContent().firstChild,this.header=this.parent.getHeaderContent().firstChild;var n=this.content.querySelector(".e-movablecontent"),i=this.content.querySelector(".e-frozencontent"),r=this.header.querySelector(".e-movableheader");this.parent.frozenRows&&(I.add(t?r:this.header,"touchstart pointerdown",this.setPageXY(),this),I.add(t?r:this.header,"touchmove pointermove",this.onTouchScroll(t?n:this.content),this)),t?(I.add(n,"scroll",this.onContentScroll(r),this),I.add(n,"scroll",this.onFreezeContentScroll(i),this),I.add(i,"scroll",this.onFreezeContentScroll(n),this),I.add(r,"scroll",this.onContentScroll(n),this),I.add(i,"wheel",this.onWheelScroll(n),this),I.add(i,"touchstart pointerdown",this.setPageXY(),this),I.add(i,"touchmove pointermove",this.onTouchScroll(n),this)):(I.add(this.content,"scroll",this.onContentScroll(this.header),this),I.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.aggregates.length&&I.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.refresh(),this.oneTimeReady=!1}var o,s,a,l=this.parent.getContentTable();HA(function(){o=e.header.scrollLeft,s=l.scrollHeight,a=e.parent.getContent().clientHeight},function(){e.parent.enableVirtualization||(s<a&&(P(l.querySelectorAll("tr:last-child td"),"e-lastrowcell"),e.parent.getFrozenColumns()&&P(e.parent.getContent().querySelector(".e-movablecontent").querySelectorAll("tr:last-child td"),"e-lastrowcell")),(e.parent.frozenRows>0||e.parent.frozenColumns>0)&&e.header.querySelector(".e-movableheader")?e.header.querySelector(".e-movableheader").scrollLeft=e.previousValues.left:e.header.scrollLeft=e.previousValues.left,e.content.scrollLeft=e.previousValues.left,e.content.scrollTop=e.previousValues.top),e.parent.enableColumnVirtualization||(e.content.scrollLeft=o),e.parent.frozenColumns&&e.header.querySelector(".e-movableheader")&&(e.header.querySelector(".e-movableheader").scrollLeft=e.content.querySelector(".e-movablecontent").scrollLeft)}),this.parent.isPreventScrollEvent=!1},e.prototype.getCssProperties=function(e){var t={},n=m(e)?this.parent.enableRtl:e;return t.border=n?"borderLeftWidth":"borderRightWidth",t.padding=n?"paddingLeft":"paddingRight",t},e.prototype.ensureOverflow=function(e){this.parent.getFrozenColumns()?e.querySelector(".e-movablecontent").style.overflowY="auto"===this.parent.height?"auto":"scroll":e.style.overflowY="auto"===this.parent.height?"auto":"scroll"},e.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(this.setPadding(),this.oneTimeReady=!0,"auto"===this.parent.height&&this.removePadding(),this.wireEvents(),this.setHeight(),this.setWidth())},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.removeEventListener(),this.removePadding(),T([this.parent.getHeaderContent().firstChild],"e-headercontent"),T([this.parent.getContent().firstChild],"e-content"),this.parent.getContent().firstChild.style.height="",this.parent.element.style.width="",I.remove(this.parent.getContent().firstChild,"scroll",this.onContentScroll))},e.getScrollBarWidth=function(){return tS()},e}(),JO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.templateFn={},t}return Object(s.c)(t,e),t.prototype.setFormatter=function(e){var t=new pA(e);this.format&&(this.format.skeleton||this.format.format)&&(this.formatFn=t.getFormatFunction(this.format))},t.prototype.getFormatter=function(){return this.formatFn},t.prototype.setTemplate=function(e){void 0===e&&(e={}),void 0!==this.footerTemplate&&(this.templateFn[p(xS,xS.Summary)]={fn:_t(this.footerTemplate,e),property:"footerTemplate"}),void 0!==this.groupFooterTemplate&&(this.templateFn[p(xS,xS.GroupSummary)]={fn:_t(this.groupFooterTemplate,e),property:"groupFooterTemplate"}),void 0!==this.groupCaptionTemplate&&(this.templateFn[p(xS,xS.CaptionSummary)]={fn:_t(this.groupCaptionTemplate,e),property:"groupCaptionTemplate"})},t.prototype.getTemplate=function(e){return this.templateFn[p(xS,e)]},t.prototype.setPropertiesSilent=function(e){this.setProperties(e,!0)},Object(s.b)([ye()],t.prototype,"type",void 0),Object(s.b)([ye()],t.prototype,"field",void 0),Object(s.b)([ye()],t.prototype,"columnName",void 0),Object(s.b)([ye()],t.prototype,"format",void 0),Object(s.b)([ye()],t.prototype,"footerTemplate",void 0),Object(s.b)([ye()],t.prototype,"groupFooterTemplate",void 0),Object(s.b)([ye()],t.prototype,"groupCaptionTemplate",void 0),Object(s.b)([ye()],t.prototype,"customAggregate",void 0),t}(Le),$O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([we([],JO)],t.prototype,"columns",void 0),t}(Le),eE=function(){function e(e){this.copyContent="",this.isSelect=!1,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(CA,this.initialEnd,this),this.parent.on("key-pressed",this.keyDownHandler,this),this.parent.on("click",this.clickHandler,this),I.add(this.parent.element,"keydown",this.pasteHandler,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("key-pressed",this.keyDownHandler),this.parent.off("click",this.clickHandler),I.remove(this.parent.element,"keydown",this.pasteHandler))},e.prototype.clickHandler=function(e){var t=e.target;t=QA(t,"e-rowcell")},e.prototype.pasteHandler=function(e){var t=this;if(86===e.keyCode&&e.ctrlKey&&!this.parent.isEdit){var n=V(document.activeElement,".e-rowcell");if(!n)return;this.activeElement=document.activeElement,this.clipBoardTextArea.value="";var i=window.scrollX,r=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(function(){t.activeElement.focus(),window.scrollTo(i,r),t.paste(t.clipBoardTextArea.value,parseInt(n.parentElement.getAttribute("aria-rowindex"),10),parseInt(n.getAttribute("aria-colindex"),10))},10)}},e.prototype.paste=function(e,t,n){var i,r,o,s=this.parent,a=n,l=t;if(s.editSettings.allowEditing&&"Batch"===s.editSettings.mode&&"Cell"===s.selectionSettings.mode&&"Flow"!==s.selectionSettings.cellSelectionMode){var c,h,d=e.split("\n"),u=s.getDataRows(),p=this.parent.getFrozenColumns();p&&(h=s.getMovableDataRows());for(var f=0;f<d.length;f++){if(c=d[f].split("\t"),a=n,f===d.length-1&&""===d[f]||y(s.getRowByIndex(l))){a++;break}for(var g=0;g<c.length;g++){if(o=s.getCellFromIndex(l,a),p){var m=h[l];o=!!u[l].querySelector('[aria-colindex="'+a+'"]')||m.querySelector('[aria-colindex="'+a+'"]')}if(!o){a++;break}r=(i=s.getColumnByIndex(a)).getParser()?i.getParser()(c[g]):c[g],!i.allowEditing||i.isPrimaryKey||i.template||s.editModule&&("number"===i.type?this.parent.editModule.updateCell(l,i.field,parseInt(r,10)):s.editModule.updateCell(l,i.field,r)),a++}l++}s.selectionModule.selectCellsByRange({rowIndex:t,cellIndex:n},{rowIndex:l-1,cellIndex:a-1});var v=this.parent.getCellFromIndex(l-1,a-1);v&&W(v,["e-focus","e-focused"],[])}},e.prototype.initialEnd=function(){this.parent.off(CA,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":"clipboard"}}),this.parent.element.appendChild(this.clipBoardTextArea)},e.prototype.keyDownHandler=function(e){"ctrlPlusC"===e.action?this.copy():"ctrlShiftPlusH"===e.action&&this.copy(!0)},e.prototype.setCopyData=function(e){if(""===window.getSelection().toString()){var t=this.parent.getFrozenColumns();this.clipBoardTextArea.value=this.copyContent="";var n=void 0,i=this.parent.getRows();if(t&&(n=this.parent.getMovableDataRows()),"Cell"!==this.parent.selectionSettings.mode){var r=this.parent.getSelectedRowIndexes().sort(function(e,t){return e-t});if(e){for(var o=[],s=0;s<this.parent.getVisibleColumns().length;s++)o[s]=this.parent.getVisibleColumns()[s].headerText;this.getCopyData(o,!1,"\t",e),this.copyContent+="\n"}for(s=0;s<r.length;s++){s>0&&(this.copyContent+="\n");var a=[].slice.call(i[r[s]].querySelectorAll(".e-rowcell"));t&&a.push.apply(a,[].slice.call(n[r[s]].querySelectorAll(".e-rowcell"))),this.getCopyData(a,!1,"\t",e)}}else{var l=this.checkBoxSelection();if(l.status){if(e){var c=[];for(s=0;s<l.colIndexes.length;s++)c.push(this.parent.getColumnHeaderByIndex(l.colIndexes[s]));this.getCopyData(c,!1,"\t",e),this.copyContent+="\n"}for(s=0;s<l.rowIndexes.length;s++)s>0&&(this.copyContent+="\n"),a=[].slice.call(i[l.rowIndexes[s]].querySelectorAll(".e-cellselectionbackground")),t&&a.push.apply(a,[].slice.call(n[l.rowIndexes[s]].querySelectorAll(".e-cellselectionbackground"))),this.getCopyData(a,!1,"\t",e)}else this.getCopyData([].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),!0,"\n",e)}var h={data:this.copyContent,cancel:!1};if(this.parent.trigger("beforeCopy",h),h.cancel)return;this.clipBoardTextArea.value=this.copyContent=h.data,re.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},e.prototype.getCopyData=function(e,t,n,i){for(var r="string"!=typeof e[0],o=0;o<e.length;o++)i&&t&&(this.copyContent+=this.parent.getColumns()[parseInt(e[o].getAttribute("aria-colindex"),10)].headerText+"\n"),r?e[o].classList.contains("e-hide")||(this.copyContent+=e[o].textContent):this.copyContent+=e[o],o<e.length-1&&(this.copyContent+=n)},e.prototype.copy=function(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},e.prototype.getModuleName=function(){return"clipboard"},e.prototype.destroy=function(){this.removeEventListener(),this.clipBoardTextArea&&B(this.clipBoardTextArea)},e.prototype.checkBoxSelection=function(){var e=this.parent,t={status:!1};if("Cell"===e.selectionSettings.mode){var n=e.getSelectedRowCellIndexes(),i=void 0,r=[],o=void 0;for(o=0;o<n.length&&(n[o].cellIndexes.length&&r.push(n[o].rowIndex),!n[o].cellIndexes.length||(i||(i=JSON.stringify(n[o].cellIndexes.sort())),i===JSON.stringify(n[o].cellIndexes.sort())));o++);r.sort(function(e,t){return e-t}),o===n.length&&r[r.length-1]-r[0]==r.length-1&&(t={status:!0,rowIndexes:r,colIndexes:n[0].cellIndexes})}return t},e}(),tE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye()],t.prototype,"field",void 0),Object(s.b)([ye()],t.prototype,"direction",void 0),t}(Le),nE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([we([],tE)],t.prototype,"columns",void 0),Object(s.b)([ye(!0)],t.prototype,"allowUnsort",void 0),t}(Le),iE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye()],t.prototype,"field",void 0),Object(s.b)([ye()],t.prototype,"operator",void 0),Object(s.b)([ye()],t.prototype,"value",void 0),Object(s.b)([ye()],t.prototype,"matchCase",void 0),Object(s.b)([ye()],t.prototype,"ignoreAccent",void 0),Object(s.b)([ye()],t.prototype,"predicate",void 0),Object(s.b)([ye({})],t.prototype,"actualFilterValue",void 0),Object(s.b)([ye({})],t.prototype,"actualOperator",void 0),Object(s.b)([ye()],t.prototype,"type",void 0),Object(s.b)([ye()],t.prototype,"ejpredicate",void 0),t}(Le),rE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([we([],iE)],t.prototype,"columns",void 0),Object(s.b)([ye("FilterBar")],t.prototype,"type",void 0),Object(s.b)([ye()],t.prototype,"mode",void 0),Object(s.b)([ye(!0)],t.prototype,"showFilterBarStatus",void 0),Object(s.b)([ye(1500)],t.prototype,"immediateModeDelay",void 0),Object(s.b)([ye()],t.prototype,"operators",void 0),Object(s.b)([ye(!1)],t.prototype,"ignoreAccent",void 0),t}(Le),oE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("Row")],t.prototype,"mode",void 0),Object(s.b)([ye("Flow")],t.prototype,"cellSelectionMode",void 0),Object(s.b)([ye("Single")],t.prototype,"type",void 0),Object(s.b)([ye(!1)],t.prototype,"checkboxOnly",void 0),Object(s.b)([ye(!1)],t.prototype,"persistSelection",void 0),Object(s.b)([ye("Default")],t.prototype,"checkboxMode",void 0),Object(s.b)([ye(!1)],t.prototype,"enableSimpleMultiRowSelection",void 0),Object(s.b)([ye(!0)],t.prototype,"enableToggle",void 0),t}(Le),sE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye([])],t.prototype,"fields",void 0),Object(s.b)([ye("")],t.prototype,"key",void 0),Object(s.b)([ye("contains")],t.prototype,"operator",void 0),Object(s.b)([ye(!0)],t.prototype,"ignoreCase",void 0),Object(s.b)([ye(!1)],t.prototype,"ignoreAccent",void 0),t}(Le),aE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye()],t.prototype,"targetID",void 0),t}(Le),lE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye("Both")],t.prototype,"wrapMode",void 0),t}(Le),cE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(!0)],t.prototype,"showDropArea",void 0),Object(s.b)([ye(!1)],t.prototype,"showToggleButton",void 0),Object(s.b)([ye(!1)],t.prototype,"showGroupedColumn",void 0),Object(s.b)([ye(!0)],t.prototype,"showUngroupButton",void 0),Object(s.b)([ye(!1)],t.prototype,"disablePageWiseAggregates",void 0),Object(s.b)([ye([])],t.prototype,"columns",void 0),Object(s.b)([ye()],t.prototype,"captionTemplate",void 0),t}(Le),hE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.c)(t,e),Object(s.b)([ye(!1)],t.prototype,"allowAdding",void 0),Object(s.b)([ye(!1)],t.prototype,"allowEditing",void 0),Object(s.b)([ye(!1)],t.prototype,"allowDeleting",void 0),Object(s.b)([ye("Normal")],t.prototype,"mode",void 0),Object(s.b)([ye(!0)],t.prototype,"allowEditOnDblClick",void 0),Object(s.b)([ye(!0)],t.prototype,"showConfirmDialog",void 0),Object(s.b)([ye(!1)],t.prototype,"showDeleteConfirmDialog",void 0),Object(s.b)([ye("")],t.prototype,"template",void 0),Object(s.b)([ye("Top")],t.prototype,"newRowPosition",void 0),Object(s.b)([ye({})],t.prototype,"dialog",void 0),Object(s.b)([ye(!1)],t.prototype,"allowNextRowEdit",void 0),t}(Le),dE=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.isPreventScrollEvent=!1,r.inViewIndexes=[],r.freezeRefresh=ht.prototype.refresh,r.isVirtualAdaptive=!1,r.vRows=[],r.vcRows=[],r.vGroupOffsets={},r.currentViewData=[],r.lockcolPositionCount=0,r.prevPageMoving=!1,r.pageTemplateChange=!1,r.enableLogger=!0,r.needsID=!0,n.Inject(YO),d("mergePersistData",r.mergePersistGridData,r),r}var n;return Object(s.c)(t,e),n=t,t.prototype.getPersistData=function(){var e=this,t=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],n={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]};return t.forEach(function(t){for(var i=e[t],r=0,o=n[t];r<o.length;r++)delete i[o[r]]}),this.pageSettings.template=void 0,this.pageTemplateChange=!0,this.addOnPersist(t)},t.prototype.requiredModules=function(){var e=[];return this.isDestroyed?e:(this.allowFiltering&&e.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator]}),this.allowExcelExport&&e.push({member:"ExcelExport",args:[this,this.serviceLocator]}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this]}),this.allowSorting&&e.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator]}),this.allowPaging&&e.push({member:"pager",args:[this,this.pageSettings]}),this.allowSelection&&e.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator]}),e.push({member:"resize",args:[this]}),this.allowReordering&&e.push({member:"reorder",args:[this]}),this.allowRowDragAndDrop&&e.push({member:"rowDragAndDrop",args:[this]}),this.allowGrouping&&e.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator]}),this.aggregates.length&&e.push({member:"aggregate",args:[this,this.serviceLocator]}),this.isDetail()&&e.push({member:"detailRow",args:[this,this.serviceLocator]}),(this.toolbar||this.toolbarTemplate)&&e.push({member:"toolbar",args:[this,this.serviceLocator]}),(this.enableVirtualization||this.enableColumnVirtualization)&&e.push({member:"virtualscroll",args:[this,this.serviceLocator]}),(this.getFrozenColumns()||this.frozenRows)&&e.push({member:"freeze",args:[this,this.serviceLocator]}),this.isCommandColumn(this.columns)&&e.push({member:"commandColumn",args:[this,this.serviceLocator]}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&e.push({member:"edit",args:[this,this.serviceLocator]}),this.extendRequiredModules(e),e)},t.prototype.extendRequiredModules=function(e){this.contextMenuItems&&e.push({member:"contextMenu",args:[this,this.serviceLocator]}),this.showColumnMenu&&e.push({member:"columnMenu",args:[this,this.serviceLocator]}),this.showColumnChooser&&e.push({member:"columnChooser",args:[this,this.serviceLocator]}),this.isForeignKeyEnabled(this.columns)&&e.push({member:"foreignKey",args:[this,this.serviceLocator]}),this.enableLogger&&e.push({member:"logger",args:[this]})},t.prototype.preRender=function(){this.serviceLocator=new _O,this.initProperties(),this.initializeServices()},t.prototype.initProperties=function(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.freezeRefresh=ht.prototype.refresh,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",SearchColumns:"search columns",Matchs:"No Matches Found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No Matches Found",ClearFilter:"Clear Filter",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H"}},t.prototype.render=function(){this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{role:"grid"}),Sv({target:this.element},this.createElement),this.renderModule=new RO(this,this.serviceLocator),this.getMediaColumns(),this.searchModule=new XO(this),this.scrollModule=new KO(this),this.notify("initial-load",{}),!0!==this.getDataModule().dataManager.dataSource.offline&&void 0!==this.getDataModule().dataManager.dataSource.url||(this.isVirtualAdaptive=!0),this.trigger("load"),GA(this.columns,this.enableColumnVirtualization),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),this.showSpinner(),this.notify("initial-end",{})},t.prototype.showSpinner=function(){Rv(this.element)},t.prototype.hideSpinner=function(){_v(this.element)},t.prototype.updateStackedFilter=function(){this.allowFiltering&&"FilterBar"===this.filterSettings.type&&this.getHeaderContent().querySelectorAll(".e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},t.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var e=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!m(e))for(var t=0;t<e.length;t++)if(!m(e[t].hideAtMedia)){this.mediaCol.push(e[t]);var n=window.matchMedia(e[t].hideAtMedia);this.mediaQueryUpdate(t,n),n.addListener(this.mediaQueryUpdate.bind(this,t))}}},t.prototype.mediaQueryUpdate=function(e,t){var n=this.getColumns()[e];n.visible=t.matches,this.isInitialLoad&&(n.visible?this.showHider.show(n.headerText,"headerText"):this.showHider.hide(n.headerText,"headerText"))},t.prototype.refreshMediaCol=function(){this.isInitialLoad=!0,this.aggregates.length&&this.element.scrollHeight>this.height&&P([this.element.querySelector(".e-gridfooter")],["e-footerpadding"]),this.getColumns().filter(function(e){return"checkbox"===e.type}).length&&"ResetOnRowClick"===this.selectionSettings.checkboxMode&&(this.isCheckBoxSelection=!1,this.refreshHeader())},t.prototype.eventInitializer=function(){},t.prototype.destroy=function(){var t=this.element;if(t){var n=!(!t.querySelector(".e-gridheader")||!t.querySelector(".e-gridcontent"));n&&this.unwireEvents(),this.removeListener(),this.notify(EA,{}),this.destroyDependentModules(),n&&e.prototype.destroy.call(this),this.toolTipObj.destroy();for(var i=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"],r=0;r<i.length;r++)this[i[r]]&&(this[i[r]]=null);this.element.innerHTML="",W(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"])}},t.prototype.destroyDependentModules=function(){var e=this.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy())},t.prototype.getModuleName=function(){return"grid"},t.prototype.enableBoxSelection=function(){this.enableAutoFill&&(this.selectionSettings.cellSelectionMode="BoxWithBorder")},t.prototype.onPropertyChanged=function(e,t){var n,i=!1,r=!1,o=!1;if(!this.isDestroyed){this.log("module_missing");var s=Object.keys(e);s.indexOf("columns")>-1&&(this.updateColumnObject(),r=!0);for(var a=0,l=s;a<l.length;a++){var c=l[a];switch(c){case"allowPaging":this.notify(xA,{module:"pager",enable:this.allowPaging}),i=!0;break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1;break}this.notify(SA,{module:"pager",properties:e.pageSettings}),(m(e.pageSettings.currentPage)&&m(e.pageSettings.totalRecordsCount)||!m(t.pageSettings)&&e.pageSettings.currentPage!==t.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(i=!0);break;case"allowSorting":this.notify(xA,{module:"sort",enable:this.allowSorting}),i=!0,n=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(xA,{module:"filter",enable:this.allowFiltering}),i=!0,"FilterBar"!==this.filterSettings.type&&this.refreshHeader();break;case"height":case"width":this.notify(xA,{module:"scroll",properties:{width:e.width,height:e.height}});break;case"allowReordering":this.headerModule.refreshUI(),n=!0;break;case"allowRowDragAndDrop":this.notify(xA,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop});break;case"allowSelection":this.notify(xA,{module:"selection",enable:this.allowSelection});break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=UA(this.rowTemplate),i=!0;break;case"detailTemplate":this.detailTemplateFn=UA(this.detailTemplate),i=!0;break;case"allowGrouping":this.notify(xA,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),i=!0,n=!0;break;case"childGrid":i=!0;break;case"toolbar":this.notify(xA,{module:"toolbar"});break;case"groupSettings":this.notify(SA,{module:"group",properties:e.groupSettings,oldProperties:t.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(i=!0),this.notify(xA,{module:"aggregate",properties:e});break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"currencyCode":case"locale":this.log("frozen_rows_columns"),o=!0,r=!0;break;default:this.extendedPropertyChange(c,e,r)}}n&&this.updateDefaultCursor(),r?o||this.frozenColumns||this.frozenRows?this.freezeRefresh():this.refresh():i&&(this.notify("model-changed",{requestType:"refresh"}),i=!1,this.maintainSelection(e.selectedRowIndex))}},t.prototype.extendedPropertyChange=function(e,t,n){switch(e){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=t.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),"auto"!==this.height&&(this.scrollModule.removePadding(!t.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=t.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=t.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=t.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),this.notify("rtl-updated",{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?P([this.element],"e-grid-min-height"):T([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(xA,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(xA,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(xA,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(xA,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(SA,{module:"filter",properties:t.filterSettings});break;case"searchSettings":this.notify(SA,{module:"search",properties:t.searchSettings});break;case"sortSettings":this.notify(SA,{module:"sort"});break;case"selectionSettings":this.notify(SA,{module:"selection",properties:t.selectionSettings});break;case"editSettings":this.notify(SA,{module:"edit",properties:t.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(_A,{case:"textwrap",isModeChg:"textWrapSettings"===e});break;case"dataSource":var i=this.getDataModule().getState();if(Object.getPrototypeOf(t).deepWatch)for(var r=this.getPrimaryKeyFieldNames()[0],o=0,s=Object.keys(t.dataSource);o<s.length;o++)this.setRowData(this.dataSource[s[o]][r],this.dataSource[s[o]]);else if(i.isPending){var a=m(this.dataSource)?[]:this.dataSource.result;(i.group||[]).forEach(function(e){a=Jc.group(a,e,i.aggregates||[])}),this.dataSource={result:a,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),i.resolver(this.dataSource)}else this.getDataModule().setState({isDataChanged:!1}),this.notify(jA,{}),n||this.renderModule.refresh();break;case"enableHover":(t.enableHover?P:T)([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(t.selectedRowIndex),this.isSelectedRowIndexUpdating=!1}},t.prototype.maintainSelection=function(e){var t=this;if(-1!==e){var n=function(){t.selectRow(e),t.off(CA,n)};this.on(CA,n,this)}},t.prototype.setProperties=function(t,n){e.prototype.setProperties.call(this,t,n),t.filterSettings&&this.filterModule&&n&&this.filterModule.refreshFilter()},t.prototype.updateDefaultCursor=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-columnheader"));e<t.length;e++){var n=t[e];this.allowSorting||this.allowGrouping&&this.groupSettings.showDropArea||this.allowReordering?n.classList.remove("e-defaultcursor"):n.classList.add("e-defaultcursor")}},t.prototype.updateColumnModel=function(e){for(var t=0,n=e.length;t<n;t++)e[t].columns?this.updateColumnModel(e[t].columns):this.columnModel.push(e[t]);this.updateFrozenColumns(),this.updateLockableColumns()},t.prototype.updateFrozenColumns=function(){for(var e=this.columnModel,t=0,n=0,i=e.length;n<i;n++)e[n].isFrozen&&(e.splice(this.frozenColumns+t,0,e.splice(n,1)[0]),t++)},t.prototype.updateLockableColumns=function(){for(var e=this.columnModel,t=0,n=0,i=this.getFrozenColumns(),r=0;r<e.length;r++)e[r].lockColumn&&(r<i?(e.splice(t,0,e.splice(r,1)[0]),t++):(e.splice(i+n,0,e.splice(r,1)[0]),n++))},t.prototype.checkLockColumns=function(e){for(var t=0;t<e.length;t++)e[t].columns?this.checkLockColumns(e[t].columns):e[t].lockColumn&&this.lockcolPositionCount++},t.prototype.getColumns=function(e){var t=this,n=this.inViewIndexes.map(function(e){return e-t.groupSettings.columns.length}).filter(function(e){return e>-1}),i=n.length;return(!this.enableColumnVirtualization||m(this.columnModel)||0===this.columnModel.length||e)&&(this.columnModel=[],this.updateColumnModel(this.columns)),0===i?this.columnModel:this.columnModel.slice(n[0],n[i-1]+1)},t.prototype.getStackedHeaderColumnByHeaderText=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(i.field===e||i.headerText===e){this.stackedColumn=i;break}i.columns&&this.getStackedHeaderColumnByHeaderText(e,i.columns)}return this.stackedColumn},t.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},t.prototype.getQuery=function(){return this.query},t.prototype.getLocaleConstants=function(){return this.defaultLocale},t.prototype.setColumnIndexesInView=function(e){this.inViewIndexes=e},t.prototype.getVisibleColumns=function(){for(var e=[],t=0,n=this.columnModel;t<n.length;t++){var i=n[t];i.visible&&e.push(i)}return e},t.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},t.prototype.setGridHeaderContent=function(e){this.headerModule.setPanel(e)},t.prototype.getContentTable=function(){return this.contentModule.getTable()},t.prototype.setGridContentTable=function(e){this.contentModule.setTable(e)},t.prototype.getContent=function(){return this.contentModule.getPanel()},t.prototype.setGridContent=function(e){this.contentModule.setPanel(e)},t.prototype.getHeaderTable=function(){return this.headerModule.getTable()},t.prototype.setGridHeaderTable=function(e){this.headerModule.setTable(e)},t.prototype.getFooterContent=function(){return m(this.footerElement)&&(this.footerElement=this.element.getElementsByClassName("e-gridfooter")[0]),this.footerElement},t.prototype.getFooterContentTable=function(){return m(this.footerElement)&&(this.footerElement=this.element.getElementsByClassName("e-gridfooter")[0]),this.footerElement.firstChild.firstChild},t.prototype.getPager=function(){return this.gridPager},t.prototype.setGridPager=function(e){this.gridPager=e},t.prototype.getRowByIndex=function(e){return this.contentModule.getRowByIndex(e)},t.prototype.getMovableRowByIndex=function(e){return this.contentModule.getMovableRowByIndex(e)},t.prototype.getRows=function(){return this.contentModule.getRowElements()},t.prototype.getRowInfo=function(e){var t=e,n={target:e};if(!m(e)&&m(QA(t,"e-detailrowcollapse")&&m(QA(t,"e-recordplusexpand")))&&!this.isEdit){var i=V(t,".e-rowcell");if(!i)return n;var r=parseInt(i.getAttribute("aria-colindex"),10);if(!m(i)&&!isNaN(r)){var o=V(i,".e-row"),s=parseInt(o.getAttribute("aria-rowindex"),10),a=this.getFrozenColumns(),l=!!a&&r>=a,c=(l?this.contentModule.getMovableRows():this.contentModule.getRows()).filter(function(e){return e.uid===o.getAttribute("data-uid")}),h={},d=void 0;Object.keys(c).length&&(h=c[0].data,d=c[0].cells[l?r-a:r].column),n={cell:i,cellIndex:r,row:o,rowIndex:s,rowData:h,column:d,target:e}}}return n},t.prototype.getMovableRows=function(){return this.contentModule.getMovableRowElements()},t.prototype.getDataRows=function(){var e=[].slice.call(this.getContentTable().querySelector("tbody").children);if(this.frozenRows){var t=[].slice.call(this.getHeaderTable().querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},t.prototype.addMovableRows=function(e,t){for(var n=0,i=t.length;n<i;n++)e.push(t[n]);return e},t.prototype.generateDataRows=function(e){for(var t=[],n=0,i=e.length;n<i;n++)e[n].classList.contains("e-row")&&!e[n].classList.contains("e-hiddenrow")&&t.push(e[n]);return t},t.prototype.getMovableDataRows=function(){var e=[].slice.call(this.getContent().querySelector(".e-movablecontent").querySelector("tbody").children);if(this.frozenRows){var t=[].slice.call(this.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},t.prototype.setCellValue=function(e,t,n){var i,r,o,s,a,l=this.getPrimaryKeyFieldNames()[0],c=new vO(this,this.serviceLocator),u={},p=this.contentModule.getRows(),f=this.contentModule.getMovableRows();if(i=this.getColumnIndexByField(t),(this.groupSettings.columns.length>0||this.childGrid||this.detailTemplate)&&(i+=1),r=this.getColumnByField(t),a=p.filter(function(t){return h(l,t.data)===e})[0],u=f.filter(function(t){return h(l,t.data)===e})[0],o=m(a)?null:this.element.querySelector("[data-uid="+a.uid+"]"),s=m(u)?null:this.element.querySelector("[data-uid="+u.uid+"]"),!m(o)){d(t,n,a.data);var g=m(o.childNodes[i])?s.childNodes[i-this.frozenColumns]:o.childNodes[i];if(!m(g)){var y=a.cells[i],v=void 0;this.frozenColumns&&(v=u.cells[i-this.frozenColumns]),c.refreshTD(g,m(y)?v:y,a.data,{index:a.index}),this.aggregates.length>0&&(this.notify("refresh-footer-rendered",{}),this.groupSettings.columns.length>0&&this.notify("group-aggregates",{})),m(u)||m(u.changes)||(u.changes[t]=n),this.trigger("queryCellInfo",{cell:g,column:r,data:a.data})}}},t.prototype.setRowData=function(e,t){var n,i,r,o,s=this.contentModule.getRows(),a=this.getPrimaryKeyFieldNames()[0],l=new hO(this.serviceLocator,null,this);this.groupSettings.columns.length>0&&this.aggregates.length>0&&(s=s.filter(function(e){return e.isDataRow})),!m(n=s.filter(function(t){return h(a,t.data)===e})[0])&&this.element.querySelectorAll("[data-uid="+n.uid+"]").length&&(n.changes=t,i=n,r=this.getForeignKeyColumns(),o=n.changes,r.forEach(function(e){d(e.field,aS(e,o),i.foreignKeyData)}),i.cells.forEach(function(e){e.isForeignKey&&d("foreignKeyData",h(e.column.field,i.foreignKeyData),e)}),l.refresh(n,this.getColumns(),!0),this.aggregates.length>0&&(this.notify("refresh-footer-rendered",{}),this.groupSettings.columns.length>0&&this.notify("group-aggregates",{})))},t.prototype.getCellFromIndex=function(e,t){return this.getDataRows()[e]&&this.getDataRows()[e].querySelectorAll(".e-rowcell")[t]},t.prototype.getMovableCellFromIndex=function(e,t){return this.getMovableDataRows()[e]&&this.getMovableDataRows()[e].querySelectorAll(".e-rowcell")[t-this.getFrozenColumns()]},t.prototype.getColumnHeaderByIndex=function(e){return this.getHeaderTable().querySelectorAll(".e-headercell")[e]},t.prototype.getRowObjectFromUID=function(e){var t=this.contentModule.getRows(),n=this.rowObject(t,e);return this.getFrozenColumns()&&!n?n=this.rowObject(this.contentModule.getMovableRows(),e):n},t.prototype.rowObject=function(e,t){for(var n=0,i=e;n<i.length;n++){var r=i[n];if(r.uid===t)return r}return null},t.prototype.getRowsObject=function(){return this.contentModule.getRows()},t.prototype.getMovableRowsObject=function(){return this.contentModule.getMovableRows()},t.prototype.getColumnHeaderByField=function(e){return this.getColumnHeaderByUid(this.getColumnByField(e).uid)},t.prototype.getColumnHeaderByUid=function(e){return this.getHeaderContent().querySelector("[e-mappinguid="+e+"]").parentElement},t.prototype.getColumnByIndex=function(e){var t;return this.getColumns().some(function(n,i){return t=n,i===e}),t},t.prototype.getColumnByField=function(e){return VA(this.getColumns(),function(t,n){if(t.field===e)return t})[0]},t.prototype.getColumnIndexByField=function(e){for(var t=this.getColumns(),n=0;n<t.length;n++)if(t[n].field===e)return n;return-1},t.prototype.getColumnByUid=function(e){return VA(this.getColumns().concat(this.getStackedColumns(this.columns)),function(t,n){if(t.uid===e)return t})[0]},t.prototype.getStackedColumns=function(e,t){void 0===t&&(t=[]);for(var n=0,i=e;n<i.length;n++){var r=i[n];r.columns&&(t.push(r),this.getStackedColumns(r.columns,t))}return t},t.prototype.getColumnIndexByUid=function(e){var t=VA(this.getColumns(),function(t,n){if(t.uid===e)return n})[0];return m(t)?-1:t},t.prototype.getUidByColumnField=function(e){return VA(this.getColumns(),function(t,n){if(t.field===e)return t.uid})[0]},t.prototype.getNormalizedColumnIndex=function(e){var t=this.getColumnIndexByUid(e);return this.allowGrouping&&(t+=this.groupSettings.columns.length),this.isDetail()&&t++,t},t.prototype.getColumnFieldNames=function(){for(var e,t=[],n=0,i=this.getColumns().length;n<i;n++)(e=this.getColumns()[n]).visible&&t.push(e.field);return t},t.prototype.getRowTemplate=function(){return this.rowTemplateFn},t.prototype.getDetailTemplate=function(){return this.detailTemplateFn},t.prototype.getEditTemplate=function(){return this.editTemplateFn},t.prototype.getPrimaryKeyFieldNames=function(){for(var e=[],t=0;t<this.columnModel.length;t++)this.columnModel[t].isPrimaryKey&&e.push(this.columnModel[t].field);return e},t.prototype.refresh=function(){this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh()},t.prototype.refreshHeader=function(){this.headerModule.refreshUI()},t.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},t.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},t.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},t.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},t.prototype.getDataModule=function(){return this.renderModule.data},t.prototype.showColumns=function(e,t){this.showHider.show(e,t=t||"headerText")},t.prototype.hideColumns=function(e,t){this.showHider.hide(e,t=t||"headerText")},t.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0)},t.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},t.prototype.getVisibleFrozenColumnsCount=function(){for(var e=0,t=this.columns,n=0;n<this.frozenColumns;n++)t[n].visible&&e++;return e},t.prototype.getVisibleFrozenCount=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].columns?t=this.getVisibleFrozenCount(e[n].columns,t):e[n].isFrozen&&e[n].visible&&t++;return t},t.prototype.getFrozenCount=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].columns?t=this.getFrozenCount(e[n].columns,t):e[n].isFrozen&&t++;return t},t.prototype.goToPage=function(e){this.pagerModule&&this.pagerModule.goToPage(e)},t.prototype.updateExternalMessage=function(e){this.pagerModule&&this.pagerModule.updateExternalMessage(e)},t.prototype.sortColumn=function(e,t,n){this.sortModule&&this.sortModule.sortColumn(e,t,n)},t.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},t.prototype.removeSortColumn=function(e){this.sortModule&&this.sortModule.removeSortColumn(e)},t.prototype.filterByColumn=function(e,t,n,i,r,o,s,a){this.filterModule&&this.filterModule.filterByColumn(e,t,n,i,r,o,s,a)},t.prototype.clearFiltering=function(){this.filterModule&&this.filterModule.clearFiltering()},t.prototype.removeFilteredColsByField=function(e,t){this.filterModule&&this.filterModule.removeFilteredColsByField(e,t)},t.prototype.selectRow=function(e,t){this.selectionModule&&this.selectionModule.selectRow(e,t)},t.prototype.selectRows=function(e){this.selectionModule&&this.selectionModule.selectRows(e)},t.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},t.prototype.selectCell=function(e,t){this.selectionModule&&this.selectionModule.selectCell(e,t)},t.prototype.selectCellsByRange=function(e,t){this.selectionModule.selectCellsByRange(e,t)},t.prototype.search=function(e){this.searchModule&&this.searchModule.search(e)},t.prototype.print=function(){this.printModule&&this.printModule.print()},t.prototype.deleteRecord=function(e,t){this.editModule&&this.editModule.deleteRecord(e,t)},t.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},t.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},t.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},t.prototype.addRecord=function(e,t){this.editModule&&this.editModule.addRecord(e,t)},t.prototype.deleteRow=function(e){this.editModule&&this.editModule.deleteRow(e)},t.prototype.copy=function(e){this.clipboardModule&&this.clipboardModule.copy(e)},t.prototype.recalcIndentWidth=function(){if(this.getHeaderTable().querySelector(".e-emptycell")&&(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())&&!this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")&&this.getContentTable()){var e=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,t=[].slice.call(this.getHeaderTable().querySelector("colgroup").childNodes),n=[].slice.call(this.getContentTable().querySelector("colgroup").childNodes),i=e/30,r=0;for(i>=1&&(e=30/i),this.enableColumnVirtualization&&(e=30);r<this.groupSettings.columns.length;)t[r].style.width=e+"px",n[r].style.width=e+"px",this.notify("column-width-changed",{index:r,width:e}),r++;this.isDetail()&&(t[r].style.width=e+"px",n[r].style.width=e+"px",this.notify("column-width-changed",{index:r,width:e}),r++),this.isRowDragable()&&(t[r].style.width=e+"px",n[r].style.width=e+"px",this.notify("column-width-changed",{index:r,width:e})),this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}},t.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},t.prototype.reorderColumns=function(e,t){this.reorderModule&&this.reorderModule.reorderColumns(e,t)},t.prototype.reorderColumnByIndex=function(e,t){this.reorderModule&&this.reorderModule.reorderColumnByIndex(e,t)},t.prototype.reorderColumnByTargetIndex=function(e,t){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(e,t)},t.prototype.reorderRows=function(e,t){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(e,t)},t.prototype.refreshDataSource=function(e,t){this.notify("refreshdataSource",e)},t.prototype.disableRowDD=function(e){var t=this.getHeaderTable(),n=this.getContentTable(),i=t.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),r=this.getRows(),o=e?"none":"";U(t.querySelector("colgroup").childNodes[0],{display:o}),U(n.querySelector("colgroup").childNodes[0],{display:o});for(var s=0;s<this.getRows().length;s++){var a=r[s].firstElementChild;e?P([a],"e-hide"):T([a],["e-hide"])}for(var l=0;l<t.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;l++)a=i[l],e?P([a],"e-hide"):T([a],["e-hide"])},t.prototype.autoFitColumns=function(e){this.resizeModule&&this.resizeModule.autoFitColumns(e)},t.prototype.createColumnchooser=function(e,t,n){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(e,t,n)},t.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new BO(this)),this.serviceLocator.register("cellRendererFactory",new LO),this.serviceLocator.register("rendererFactory",new NO),this.serviceLocator.register("localization",this.localeObj=new yt(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new pA(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new ZO(this)),this.serviceLocator.register("ariaService",this.ariaService=new bO),this.serviceLocator.register("focus",this.focusModule=new FO(this))},t.prototype.processModel=function(){var e,t,n=this,i=this.groupSettings.columns,r=this.sortSettings.columns;if(this.allowGrouping)for(var o=function(n,o){t=0;for(var a=r.length;t<a;t++)if(r[t].field===i[n]){e=!0;break}if(e?s.allowSorting?s.sortedColumns.push(r[t].field):r[t].direction="Ascending":r.push({field:i[n],direction:"Ascending"}),!s.groupSettings.showGroupedColumn){var l=s.enableColumnVirtualization?s.columns.filter(function(e){return e.field===i[n]})[0]:s.getColumnByField(i[n]);l?l.visible=!1:s.log("initial_action",{moduleName:"group",columnName:i[n]})}},s=this,a=0,l=i.length;a<l;a++)o(a);if(i.length||r.forEach(function(e){n.sortedColumns.push(e.field)}),this.rowTemplateFn=UA(this.rowTemplate),this.detailTemplateFn=UA(this.detailTemplate),this.editTemplateFn=UA(this.editSettings.template),!m(this.parentDetails)){var c=m(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",c,!0)}this.initForeignColumn()},t.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify("initForeignKeyColumn",this.getForeignKeyColumns())},t.prototype.gridRender=function(){this.updateRTL(),this.enableHover&&this.element.classList.add("e-gridhover"),re.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),W(this.element,["e-responsive","e-default"],[]);var e=this.serviceLocator.getService("rendererFactory");this.headerModule=e.getRenderer(AS.Header),this.contentModule=e.getRenderer(AS.Content),this.printModule=new FA(this,this.scrollModule),this.clipboardModule=new eE(this),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()},t.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),"auto"!==this.height&&this.scrollModule.setPadding()},t.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.createGridPopUpElement=function(){var e=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),t=this.createElement("div",{className:"e-content",attrs:{tabIndex:"-1"}});L([t,this.createElement("div",{className:"e-uptail e-tail"})],e),t.appendChild(this.createElement("span")),L([t,this.createElement("div",{className:"e-downtail e-tail"})],e),this.element.appendChild(e)},t.prototype.updateGridLines=function(){switch(W(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines")}this.updateResizeLines()},t.prototype.updateResizeLines=function(){this.allowResizing&&"Vertical"!==this.gridLines&&"Both"!==this.gridLines?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},t.prototype.applyTextWrap=function(){if(this.allowTextWrap){var e=[].slice.call(this.element.querySelectorAll(".e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":iS(this.element,!1),iS(this.getContent(),!1),iS(e,!0);break;case"Content":iS(this.getContent(),!0),iS(this.element,!1),iS(e,!1);break;default:iS(this.element,!0),iS(this.getContent(),!1),iS(e,!1)}}},t.prototype.removeTextWrap=function(){iS(this.element,!1),iS([].slice.call(this.element.querySelectorAll(".e-columnheader")),!1),iS(this.getContent(),!1)},t.prototype.createTooltip=function(){this.toolTipObj=new nr({opensOn:"custom",content:""},this.element)},t.prototype.getTooltipStatus=function(e){var t,n=this.getHeaderTable(),i=(this.getContentTable(),this.createTable(n,"e-gridheader","header")),r=this.createTable(n,"e-gridheader","content"),o=n.contains(e)?i:r,s=n.contains(e)?"th":"tr";return o.querySelector(s).className=e.className,o.querySelector(s).innerHTML=e.innerHTML,t=o.querySelector(s).getBoundingClientRect().width,document.body.removeChild(i),document.body.removeChild(r),t>e.getBoundingClientRect().width},t.prototype.mouseMoveHandler=function(e){if(this.isEllipsisTooltip()){var t=QA(e.target,"e-ellipsistooltip");if(this.prevElement===t&&"mouseout"!==e.type||this.toolTipObj.close(),t&&"mouseout"!==e.type&&(!re.isDevice||-1===["A","BUTTON","INPUT"].indexOf(e.target.tagName))){if(t.getAttribute("aria-describedby"))return;this.getTooltipStatus(t)&&(this.toolTipObj.content=t.getElementsByClassName("e-headertext").length?t.getElementsByClassName("e-headertext")[0].innerText:t.innerText,this.prevElement=t,this.toolTipObj.open(t))}}},t.prototype.isEllipsisTooltip=function(){for(var e=this.getColumns(),t=0;t<e.length;t++)if("EllipsisWithTooltip"===e[t].clipMode)return!0;return!1},t.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},t.prototype.createTable=function(e,t,n){var i=this.createElement("div");i.className=this.element.className,i.style.cssText="display: inline-block;visibility:hidden;position:absolute";var r=this.createElement("div");r.className=t;var o=this.createElement("table");o.className=e.className,o.style.cssText="table-layout: auto;width: auto";var s="header"===n?"th":"td",a=this.createElement("tr"),l=this.createElement(s);return a.appendChild(l),o.appendChild(a),r.appendChild(o),i.appendChild(r),document.body.appendChild(i),i},t.prototype.keyPressed=function(e){"tab"!==e.action&&"shiftTab"!==e.action||this.toolTipObj.close()},t.prototype.wireEvents=function(){I.add(this.element,"click",this.mouseClickHandler,this),I.add(this.element,"touchend",this.mouseClickHandler,this),I.add(this.element,"focusout",this.focusOutHandler,this),I.add(this.getContent(),"dblclick",this.dblClickHandler,this),this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex),this.keyboardModule=new mt(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),I.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),I.add(this.element,"mousemove",this.mouseMoveHandler,this),I.add(this.element,"mouseout",this.mouseMoveHandler,this)},t.prototype.unwireEvents=function(){I.remove(this.element,"click",this.mouseClickHandler),I.remove(this.element,"touchend",this.mouseClickHandler),I.remove(this.element,"focusout",this.focusOutHandler),I.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),I.remove(this.element,"mousemove",this.mouseMoveHandler),I.remove(this.element,"mouseout",this.mouseMoveHandler)},t.prototype.addListener=function(){this.isDestroyed||(this.on("data-ready",this.dataReady,this),this.on(CA,this.recalcIndentWidth,this),this.on("header-refreshed",this.recalcIndentWidth,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(yA,this.dataBoundFunction),this.on("key-pressed",this.keyPressed,this))},t.prototype.removeListener=function(){this.isDestroyed||(this.off("data-ready",this.dataReady),this.off(CA,this.recalcIndentWidth),this.off("header-refreshed",this.recalcIndentWidth),this.removeEventListener(yA,this.dataBoundFunction),this.off("key-pressed",this.keyPressed))},t.prototype.getCurrentViewRecords=function(){return hS(this)?m(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length?this.currentViewData.records:this.currentViewData},t.prototype.mouseClickHandler=function(e){this.isChildGrid(e)||QA(e.target,"e-gridpopup")&&e.touches||this.element.querySelectorAll(".e-cloneproperties").length||this.checkEdit(e)||(!this.allowRowDragAndDrop&&(QA(e.target,"e-gridcontent")||"TD"===e.target.tagName)||!this.allowGrouping&&!this.allowReordering&&QA(e.target,"e-gridheader"))&&e.touches||(QA(e.target,"e-gridheader")&&this.allowRowDragAndDrop&&e.preventDefault(),this.notify("click",e))},t.prototype.checkEdit=function(e){var t=QA(e.target,"e-row"),n="Batch"!==this.editSettings.mode&&this.isEdit&&t&&(t.classList.contains("e-editedrow")||t.classList.contains("e-addedrow"));return!QA(e.target,"e-unboundcelldiv")&&(n||QA(e.target,"e-rowcell")&&QA(e.target,"e-rowcell").classList.contains("e-editedbatchcell"))},t.prototype.dblClickHandler=function(e){var t=QA(e.target,"e-grid");if(!m(t)&&t.id===this.element.id&&!V(e.target,".e-unboundcelldiv")){var n=this.getRowInfo(e.target);n.target=e.target,this.trigger("recordDoubleClick",n),this.notify("dblclick",e)}},t.prototype.focusOutHandler=function(e){if(!this.isChildGrid(e)){QA(e.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");var t=this.element.querySelector(".e-cancel:not(.e-hide)");t&&t.classList.add("e-hide");var n=e.relatedTarget,i=n?n.getAttribute("aria-owns"):null;n&&(QA(n,"e-grid")||(!m(i)&&i)===e.target.getAttribute("aria-owns"))||this.keyPress||!this.isEdit||re.isDevice||("Batch"===this.editSettings.mode&&(this.editModule.saveCell(),this.notify("editNextValCell",{})),"Normal"===this.editSettings.mode&&this.editModule.editFormValidate()),this.keyPress=!1}},t.prototype.isChildGrid=function(e){var t=QA(e.target,"e-grid");return!(!t||t.id===this.element.id)},t.prototype.mergePersistGridData=function(){var e=window.localStorage.getItem(this.getModuleName()+this.element.id);if(!m(e)&&""!==e){var t=JSON.parse(e);this.enableVirtualization&&(t.pageSettings.currentPage=1);var n=Object.keys(t);this.isProtectedOnChange=!0;for(var i=0,r=n;i<r.length;i++){var o=r[i];"object"!=typeof this[o]||m(this[o])?this[o]=t[o]:Array.isArray(this[o])&&"columns"===o?(this.mergeColumns(t[o],this[o]),this[o]=t[o]):g(this[o],t[o])}this.isProtectedOnChange=!1}},t.prototype.mergeColumns=function(e,t){var n=this;e.forEach(function(e,i,r){var o,s=n.getColumnByField(e.field)||t.some(function(t,n){return o=n,t.headerText===e.headerText})&&t[o];m(s)||(s.columns&&s.columns.length?n.mergeColumns(e.columns,s.columns):r[i]=g({},s,e,!0))})},t.prototype.isDetail=function(){return!m(this.detailTemplate)||!m(this.childGrid)},t.prototype.isCommandColumn=function(e){var t=this;return e.some(function(e){return e.columns?t.isCommandColumn(e.columns):!(!e.commands&&!e.commandsTemplate)})},t.prototype.isForeignKeyEnabled=function(e){var t=this;return e.some(function(e){return e.columns?t.isForeignKeyEnabled(e.columns):!(!e.dataSource||!e.foreignKeyValue)})},t.prototype.keyActionHandler=function(e){this.keyPress="space"!==e.action,this.isChildGrid(e)||this.isEdit&&"escape"!==e.action&&"enter"!==e.action&&"shiftEnter"!==e.action&&"tab"!==e.action&&"shiftTab"!==e.action||this.allowKeyboard&&("ctrlPlusP"===e.action&&(e.preventDefault(),this.print()),this.notify("key-pressed",e))},t.prototype.setInjectedModules=function(e){this.injectedModules=e},t.prototype.updateColumnObject=function(){GA(this.columns,this.enableColumnVirtualization),this.initForeignColumn(),this.notify("auto-col",{})},t.prototype.getForeignKeyColumns=function(){return this.getColumns().filter(function(e){return e.isForeignColumn()})},t.prototype.getRowHeight=function(){return this.rowHeight?this.rowHeight:function(e){if(void 0!==$A)return $A;var t=k("table",{className:"e-table",styles:"visibility: hidden"});t.innerHTML='<tr><td class="e-rowcell">A<td></tr>',e.appendChild(t);var n=t.querySelector("td").getBoundingClientRect();return e.removeChild(t),$A=Math.ceil(n.height)}(this.element)},t.prototype.refreshColumns=function(){this.isPreventScrollEvent=!0,this.updateColumnObject(),this.refresh()},t.prototype.excelExport=function(e,t,n,i){return this.excelExportModule?this.excelExportModule.Map(this,e,t,n,!1,i):null},t.prototype.csvExport=function(e,t,n,i){return this.excelExportModule?this.excelExportModule.Map(this,e,t,n,!0,i):null},t.prototype.pdfExport=function(e,t,n,i){return this.pdfExportModule?this.pdfExportModule.Map(this,e,t,n,i):null},t.prototype.groupColumn=function(e){this.groupModule&&this.groupModule.groupColumn(e)},t.prototype.ungroupColumn=function(e){this.groupModule&&this.groupModule.ungroupColumn(e)},t.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},t.prototype.ensureModuleInjected=function(e){return this.getInjectedModules().indexOf(e)>=0},t.prototype.destroyTemplate=function(e,t){this.clearTemplate(e,t)},t.prototype.log=function(e,t){this.loggerModule&&this.loggerModule.log(e,t)},t.prototype.getPreviousRowData=function(){return this.getRowsObject()[this.getRows().length-1].data},t.prototype.hideScroll=function(){var e=this.getContent().querySelector(".e-content"),t=e.querySelector(".e-movablecontent")?e.querySelector(".e-movablecontent"):e;if(t.scrollHeight<=t.clientHeight&&(this.scrollModule.removePadding(),t.style.overflowY="auto"),this.frozenColumns&&t.scrollWidth<=t.clientWidth){var n=this.getContent().querySelector(".e-frozencontent");n.style.height=t.offsetHeight+1+"px",n.style.borderBottom="0",t.style.overflowX="auto"}},t.prototype.getRowIndexByPrimaryKey=function(e){var t=this.getPrimaryKeyFieldNames()[0];e="object"==typeof e?e[t]:e;for(var n=0;n<this.getRowsObject().length;n++)if(this.getRowsObject()[n].data[t]===e)return this.getRowsObject()[n].index;return-1},Object(s.b)([ye([])],t.prototype,"columns",void 0),Object(s.b)([ye(!0)],t.prototype,"enableAltRow",void 0),Object(s.b)([ye(!0)],t.prototype,"enableHover",void 0),Object(s.b)([ye(!1)],t.prototype,"enableAutoFill",void 0),Object(s.b)([ye(!0)],t.prototype,"allowKeyboard",void 0),Object(s.b)([ye(!1)],t.prototype,"allowTextWrap",void 0),Object(s.b)([ve({},lE)],t.prototype,"textWrapSettings",void 0),Object(s.b)([ye(!1)],t.prototype,"allowPaging",void 0),Object(s.b)([ve({},qO)],t.prototype,"pageSettings",void 0),Object(s.b)([ye(!1)],t.prototype,"enableVirtualization",void 0),Object(s.b)([ye(!1)],t.prototype,"enableColumnVirtualization",void 0),Object(s.b)([ve({},sE)],t.prototype,"searchSettings",void 0),Object(s.b)([ye(!1)],t.prototype,"allowSorting",void 0),Object(s.b)([ye(!0)],t.prototype,"allowMultiSorting",void 0),Object(s.b)([ye(!1)],t.prototype,"allowExcelExport",void 0),Object(s.b)([ye(!1)],t.prototype,"allowPdfExport",void 0),Object(s.b)([ve({},nE)],t.prototype,"sortSettings",void 0),Object(s.b)([ye(!0)],t.prototype,"allowSelection",void 0),Object(s.b)([ye(-1)],t.prototype,"selectedRowIndex",void 0),Object(s.b)([ve({},oE)],t.prototype,"selectionSettings",void 0),Object(s.b)([ye(!1)],t.prototype,"allowFiltering",void 0),Object(s.b)([ye(!1)],t.prototype,"allowReordering",void 0),Object(s.b)([ye(!1)],t.prototype,"allowResizing",void 0),Object(s.b)([ye(!1)],t.prototype,"allowRowDragAndDrop",void 0),Object(s.b)([ve({},aE)],t.prototype,"rowDropSettings",void 0),Object(s.b)([ve({},rE)],t.prototype,"filterSettings",void 0),Object(s.b)([ye(!1)],t.prototype,"allowGrouping",void 0),Object(s.b)([ye(!1)],t.prototype,"showColumnMenu",void 0),Object(s.b)([ve({},cE)],t.prototype,"groupSettings",void 0),Object(s.b)([ve({},hE)],t.prototype,"editSettings",void 0),Object(s.b)([we([],$O)],t.prototype,"aggregates",void 0),Object(s.b)([ye(!1)],t.prototype,"showColumnChooser",void 0),Object(s.b)([ye("auto")],t.prototype,"height",void 0),Object(s.b)([ye("auto")],t.prototype,"width",void 0),Object(s.b)([ye("Default")],t.prototype,"gridLines",void 0),Object(s.b)([ye()],t.prototype,"rowTemplate",void 0),Object(s.b)([ye()],t.prototype,"detailTemplate",void 0),Object(s.b)([ye()],t.prototype,"childGrid",void 0),Object(s.b)([ye()],t.prototype,"queryString",void 0),Object(s.b)([ye("AllPages")],t.prototype,"printMode",void 0),Object(s.b)([ye("Expanded")],t.prototype,"hierarchyPrintMode",void 0),Object(s.b)([ye([])],t.prototype,"dataSource",void 0),Object(s.b)([ye(null)],t.prototype,"rowHeight",void 0),Object(s.b)([ye()],t.prototype,"query",void 0),Object(s.b)([ye("USD")],t.prototype,"currencyCode",void 0),Object(s.b)([ye()],t.prototype,"toolbar",void 0),Object(s.b)([ye()],t.prototype,"contextMenuItems",void 0),Object(s.b)([ye()],t.prototype,"columnMenuItems",void 0),Object(s.b)([ye()],t.prototype,"toolbarTemplate",void 0),Object(s.b)([ye()],t.prototype,"pagerTemplate",void 0),Object(s.b)([ye(0)],t.prototype,"frozenRows",void 0),Object(s.b)([ye(0)],t.prototype,"frozenColumns",void 0),Object(s.b)([ye("All")],t.prototype,"columnQueryMode",void 0),Object(s.b)([xe()],t.prototype,"created",void 0),Object(s.b)([xe()],t.prototype,"destroyed",void 0),Object(s.b)([xe()],t.prototype,"load",void 0),Object(s.b)([xe()],t.prototype,"rowDataBound",void 0),Object(s.b)([xe()],t.prototype,"queryCellInfo",void 0),Object(s.b)([xe()],t.prototype,"headerCellInfo",void 0),Object(s.b)([xe()],t.prototype,"actionBegin",void 0),Object(s.b)([xe()],t.prototype,"actionComplete",void 0),Object(s.b)([xe()],t.prototype,"actionFailure",void 0),Object(s.b)([xe()],t.prototype,"dataBound",void 0),Object(s.b)([xe()],t.prototype,"recordDoubleClick",void 0),Object(s.b)([xe()],t.prototype,"rowSelecting",void 0),Object(s.b)([xe()],t.prototype,"rowSelected",void 0),Object(s.b)([xe()],t.prototype,"rowDeselecting",void 0),Object(s.b)([xe()],t.prototype,"rowDeselected",void 0),Object(s.b)([xe()],t.prototype,"cellSelecting",void 0),Object(s.b)([xe()],t.prototype,"cellSelected",void 0),Object(s.b)([xe()],t.prototype,"cellDeselecting",void 0),Object(s.b)([xe()],t.prototype,"cellDeselected",void 0),Object(s.b)([xe()],t.prototype,"columnDragStart",void 0),Object(s.b)([xe()],t.prototype,"columnDrag",void 0),Object(s.b)([xe()],t.prototype,"columnDrop",void 0),Object(s.b)([xe()],t.prototype,"printComplete",void 0),Object(s.b)([xe()],t.prototype,"beforePrint",void 0),Object(s.b)([xe()],t.prototype,"pdfQueryCellInfo",void 0),Object(s.b)([xe()],t.prototype,"pdfHeaderQueryCellInfo",void 0),Object(s.b)([xe()],t.prototype,"exportDetailDataBound",void 0),Object(s.b)([xe()],t.prototype,"excelQueryCellInfo",void 0),Object(s.b)([xe()],t.prototype,"excelHeaderQueryCellInfo",void 0),Object(s.b)([xe()],t.prototype,"beforeExcelExport",void 0),Object(s.b)([xe()],t.prototype,"excelExportComplete",void 0),Object(s.b)([xe()],t.prototype,"beforePdfExport",void 0),Object(s.b)([xe()],t.prototype,"pdfExportComplete",void 0),Object(s.b)([xe()],t.prototype,"rowDragStartHelper",void 0),Object(s.b)([xe()],t.prototype,"detailDataBound",void 0),Object(s.b)([xe()],t.prototype,"rowDragStart",void 0),Object(s.b)([xe()],t.prototype,"rowDrag",void 0),Object(s.b)([xe()],t.prototype,"rowDrop",void 0),Object(s.b)([xe()],t.prototype,"toolbarClick",void 0),Object(s.b)([xe()],t.prototype,"beforeOpenColumnChooser",void 0),Object(s.b)([xe()],t.prototype,"batchAdd",void 0),Object(s.b)([xe()],t.prototype,"batchDelete",void 0),Object(s.b)([xe()],t.prototype,"batchCancel",void 0),Object(s.b)([xe()],t.prototype,"beforeBatchAdd",void 0),Object(s.b)([xe()],t.prototype,"beforeBatchDelete",void 0),Object(s.b)([xe()],t.prototype,"beforeBatchSave",void 0),Object(s.b)([xe()],t.prototype,"beginEdit",void 0),Object(s.b)([xe()],t.prototype,"cellEdit",void 0),Object(s.b)([xe()],t.prototype,"cellSave",void 0),Object(s.b)([xe()],t.prototype,"cellSaved",void 0),Object(s.b)([xe()],t.prototype,"resizeStart",void 0),Object(s.b)([xe()],t.prototype,"resizing",void 0),Object(s.b)([xe()],t.prototype,"resizeStop",void 0),Object(s.b)([xe()],t.prototype,"beforeDataBound",void 0),Object(s.b)([xe()],t.prototype,"contextMenuOpen",void 0),Object(s.b)([xe()],t.prototype,"contextMenuClick",void 0),Object(s.b)([xe()],t.prototype,"columnMenuOpen",void 0),Object(s.b)([xe()],t.prototype,"columnMenuClick",void 0),Object(s.b)([xe()],t.prototype,"checkBoxChange",void 0),Object(s.b)([xe()],t.prototype,"beforeCopy",void 0),Object(s.b)([xe()],t.prototype,"dataStateChange",void 0),Object(s.b)([xe()],t.prototype,"dataSourceChanged",void 0),n=Object(s.b)([Ae],t)}(ht),uE={root:"e-dropdownbase",rtl:"e-rtl",content:"e-content",selected:"e-active",hover:"e-hover",noData:"e-nodata",fixedHead:"e-fixed-head",focus:"e-item-focus",li:lh.li,group:lh.group,disabled:lh.disabled,grouping:"e-dd-group"},pE={root:"e-dropdownlist",hover:uE.hover,selected:uE.selected,rtl:uE.rtl,li:uE.li,disable:uE.disabled,base:uE.root,focus:uE.focus,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"};pE.root="e-combobox",pE.root="e-autocomplete",pE.icon="e-input-group-icon e-ddl-icon e-search-icon",(CO||(CO={})).createListItems=function(e,t,n,i,r,o){var s,a,l=6e4*o,c=[],h=[];for(s=+t.setMilliseconds(0),a=+n.setMilliseconds(0);a>=s;)h.push(s),c.push(i.formatDate(new Date(s),{format:r,type:"time"})),s+=l;return{collection:h,list:Cc.createList(e,c,null,!0)}};var fE,gE,mE=function(){function e(e){this.pagerModule=e}return e.prototype.render=function(){this.pagerElement=this.pagerModule.element,this.renderNumericContainer(),this.refreshNumericLinks(),this.wireEvents()},e.prototype.refresh=function(){this.pagerModule.updateTotalPages(),this.links.length&&this.updateLinksHtml(),this.updateStyles()},e.prototype.refreshNumericLinks=function(){var e,t=this.pagerModule,n=t.element.querySelector(".e-numericcontainer"),i=document.createDocumentFragment();n.innerHTML="";for(var r=1;r<=t.pageCount;r++)e=k("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{role:"link",tabindex:"-1","aria-label":"Goto Page "+r,href:"javascript:void(0);",name:"Goto page"+r}}),t.currentPage===r&&W(e,["e-currentitem","e-active"],["e-pager-default"]),i.appendChild(e);n.appendChild(i),this.links=[].slice.call(n.childNodes)},e.prototype.wireEvents=function(){I.add(this.pagerElement,"click",this.clickHandler,this)},e.prototype.unwireEvents=function(){I.remove(this.pagerElement,"click",this.clickHandler)},e.prototype.destroy=function(){this.unwireEvents()},e.prototype.renderNumericContainer=function(){this.element=k("div",{className:"e-pagercontainer",attrs:{role:"navigation"}}),this.renderFirstNPrev(this.element),this.renderPrevPagerSet(this.element),this.element.appendChild(k("div",{className:"e-numericcontainer"})),this.renderNextPagerSet(this.element),this.renderNextNLast(this.element),this.pagerModule.element.appendChild(this.element)},e.prototype.renderFirstNPrev=function(e){this.first=k("div",{className:"e-first e-icons e-icon-first",attrs:{title:this.pagerModule.getLocalizedLabel("firstPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}}),this.prev=k("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:this.pagerModule.getLocalizedLabel("previousPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}),L([this.first,this.prev],e)},e.prototype.renderPrevPagerSet=function(e){var t=k("div");this.PP=k("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),role:"link","aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1",name:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.PP),e.appendChild(t)},e.prototype.renderNextPagerSet=function(e){var t=k("div");this.NP=k("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),role:"link","aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1",name:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.NP),e.appendChild(t)},e.prototype.renderNextNLast=function(e){this.next=k("div",{className:"e-next e-icons e-icon-next",attrs:{title:this.pagerModule.getLocalizedLabel("nextPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}}),this.last=k("div",{className:"e-last e-icons e-icon-last",attrs:{title:this.pagerModule.getLocalizedLabel("lastPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}),L([this.next,this.last],e)},e.prototype.clickHandler=function(e){var t=this.pagerModule,n=e.target;return t.previousPageNo=t.currentPage,n.classList.contains("e-disable")||m(n.getAttribute("index"))||(t.currentPage=parseInt(n.getAttribute("index"),10),t.dataBind()),!1},e.prototype.updateLinksHtml=function(){var e,t,n=this.pagerModule;n.currentPage=1===n.totalPages?1:n.currentPage,n.currentPage>n.totalPages&&n.totalPages&&(n.currentPage=n.totalPages),e=parseInt((n.currentPage/n.pageCount).toString(),10),n.currentPage%n.pageCount==0&&e>0&&(e-=1);for(var i=0;i<n.pageCount;i++)(t=e*n.pageCount+1+i)<=n.totalPages?(this.links[i].style.display="",this.links[i].setAttribute("index",t.toString()),this.links[i].innerHTML=n.customText?n.customText+t:t.toString(),n.currentPage!==t?this.links[i].classList.add("e-pager-default"):this.links[i].classList.remove("e-pager-default")):(this.links[i].innerHTML=n.customText?n.customText+t:t.toString(),this.links[i].style.display="none"),W(this.links[i],[],["e-currentitem","e-active"]);this.first.setAttribute("index","1"),this.last.setAttribute("index",n.totalPages.toString()),this.prev.setAttribute("index",(n.currentPage-1).toString()),this.next.setAttribute("index",(n.currentPage+1).toString()),this.pagerElement.querySelector(".e-mfirst").setAttribute("index","1"),this.pagerElement.querySelector(".e-mlast").setAttribute("index",n.totalPages.toString()),this.pagerElement.querySelector(".e-mprev").setAttribute("index",(n.currentPage-1).toString()),this.pagerElement.querySelector(".e-mnext").setAttribute("index",(n.currentPage+1).toString()),this.PP.setAttribute("index",(parseInt(this.links[0].getAttribute("index"),10)-n.pageCount).toString()),this.NP.setAttribute("index",(parseInt(this.links[this.links.length-1].getAttribute("index"),10)+1).toString())},e.prototype.updateStyles=function(){this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length&&W(this.links[(this.pagerModule.currentPage-1)%this.pagerModule.pageCount],["e-currentitem","e-active"],[])},e.prototype.updateFirstNPrevStyles=function(){var e=["e-firstpage","e-pager-default"],t=["e-firstpagedisabled","e-disable"],n=["e-prevpage","e-pager-default"],i=["e-prevpagedisabled","e-disable"];this.pagerModule.totalPages>0&&this.pagerModule.currentPage>1?(W(this.prev,n,i),W(this.first,e,t),W(this.pagerElement.querySelector(".e-mfirst"),e,t),W(this.pagerElement.querySelector(".e-mprev"),n,i)):(W(this.prev,i,n),W(this.first,t,e),W(this.pagerElement.querySelector(".e-mprev"),i,n),W(this.pagerElement.querySelector(".e-mfirst"),t,e))},e.prototype.updatePrevPagerSetStyles=function(){this.pagerModule.currentPage>this.pagerModule.pageCount?W(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):W(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])},e.prototype.updateNextPagerSetStyles=function(){var e=this.pagerModule,t=this.links[0].innerHTML.replace(e.customText,"");!t.length||!this.links.length||parseInt(t,10)+e.pageCount>e.totalPages?W(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):W(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])},e.prototype.updateNextNLastStyles=function(){var e=["e-lastpage","e-pager-default"],t=["e-lastpagedisabled","e-disable"],n=["e-nextpage","e-pager-default"],i=["e-nextpagedisabled","e-disable"],r=this.pagerModule;r.currentPage===r.totalPages||0===r.totalRecordsCount?(W(this.last,t,e),W(this.next,i,n),W(this.pagerElement.querySelector(".e-mlast"),t,e),W(this.pagerElement.querySelector(".e-mnext"),i,n)):(W(this.last,e,t),W(this.next,n,i),W(this.pagerElement.querySelector(".e-mlast"),e,t),W(this.pagerElement.querySelector(".e-mnext"),n,i))},e}(),yE=function(){function e(e){this.pagerModule=e}return e.prototype.render=function(){var e=k("div",{className:"e-parentmsgbar",attrs:{"aria-label":"Pager Information"}});this.pageNoMsgElem=k("span",{className:"e-pagenomsg",styles:"textalign:right"}),this.pageCountMsgElem=k("span",{className:"e-pagecountmsg",styles:"textalign:right"}),L([this.pageNoMsgElem,this.pageCountMsgElem],e),this.pagerModule.element.appendChild(e),this.refresh()},e.prototype.refresh=function(){var e=this.pagerModule;this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("currentPageInfo"),[0===e.totalRecordsCount?0:e.currentPage,e.totalPages||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel("totalItemsInfo"),[e.totalRecordsCount||0]),this.pageNoMsgElem.parentElement.setAttribute("aria-label",this.pageNoMsgElem.textContent+this.pageCountMsgElem.textContent)},e.prototype.hideMessage=function(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none"),this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")},e.prototype.showMessage=function(){this.pageNoMsgElem||this.render(),this.pageNoMsgElem.style.display="",this.pageCountMsgElem.style.display=""},e.prototype.destroy=function(){},e.prototype.format=function(e,t){for(var n,i=0;i<t.length;i++)n=new RegExp("\\{"+i+"\\}","gm"),e=e.replace(n,t[i].toString());return e},e}(),vE=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(s.c)(t,e),t.prototype.requiredModules=function(){var e=[];return this.enableExternalMessage&&e.push({member:"externalMessage",args:[this]}),this.checkpagesizes()&&e.push({member:"pagerdropdown",args:[this]}),e},t.prototype.preRender=function(){this.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager",previousPagerTooltip:"Go to previous pager",pagerDropDown:"Items per page",pagerAllDropDown:"Items",All:"All"},this.containerModule=new mE(this),this.pagerMessageModule=new yE(this)},t.prototype.render=function(){this.template?this.pagerTemplate():(this.initLocalization(),this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount}))},t.prototype.getPersistData=function(){return this.addOnPersist(["currentPage","pageSize"])},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.element.innerHTML=""},t.prototype.getModuleName=function(){return"pager"},t.prototype.onPropertyChanged=function(e,t){if(!this.isDestroyed){e.pageCount!==t.pageCount&&(this.containerModule.refreshNumericLinks(),this.containerModule.refresh());for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"currentPage":this.checkGoToPage(e.currentPage,t.currentPage)&&this.currentPageChanged();break;case"pageSize":case"totalRecordsCount":case"customText":this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.setDropDownValue("value",this.pageSize),this.refresh();break;case"pageSizes":this.checkpagesizes()&&this.pagerdropdownModule&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render()),this.refresh();break;case"template":this.templateFn=this.compile(this.template),this.refresh();break;case"locale":this.initLocalization(),this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage()}}},t.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},t.prototype.goToPage=function(e){this.checkGoToPage(e)&&(this.currentPage=e,this.dataBind())},t.prototype.checkpagesizes=function(){return!(!0!==this.pageSizes&&!this.pageSizes.length)},t.prototype.checkGoToPage=function(e,t){return e!==this.currentPage&&(this.previousPageNo=this.currentPage),m(t)||(this.previousPageNo=t),this.previousPageNo!==e&&e>=1&&e<=this.totalPages},t.prototype.currentPageChanged=function(){this.enableQueryString&&this.updateQueryString(this.currentPage);var e={currentPage:this.currentPage,cancel:!1};this.trigger("click",e),e.cancel||this.refresh()},t.prototype.pagerTemplate=function(){var e;this.element.classList.add("e-pagertemplate"),this.compile(this.template);var t={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages};e=this.getPagerTemplate()(t),JA(this.element,e)},t.prototype.updateTotalPages=function(){this.totalPages=this.totalRecordsCount%this.pageSize==0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1},t.prototype.getPagerTemplate=function(){return this.templateFn},t.prototype.compile=function(e){if(e)try{document.querySelectorAll(e).length&&(this.templateFn=_t(document.querySelector(e).innerHTML.trim()))}catch(t){this.templateFn=_t(e)}},t.prototype.refresh=function(){this.template?(this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate()):(this.updateRTL(),this.containerModule.refresh(),this.enablePagerMessage&&this.pagerMessageModule.refresh(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh())},t.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.initLocalization=function(){this.localeObj=new yt(this.getModuleName(),this.defaultConstants,this.locale)},t.prototype.updateQueryString=function(e){var t=this.getUpdatedURL(window.location.href,"page",e.toString());window.history.pushState({path:t},"",t)},t.prototype.getUpdatedURL=function(e,t,n){var i=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");if(e.match(i))return e.replace(i,"$1"+t+"="+n+"$2");var r="";return-1!==e.indexOf("#")&&(r=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+(-1!==e.indexOf("?")?"&":"?")+t+"="+n+r},t.prototype.renderFirstPrevDivForDevice=function(){this.element.appendChild(k("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}})),this.element.appendChild(k("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))},t.prototype.renderNextLastDivForDevice=function(){this.element.appendChild(k("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}})),this.element.appendChild(k("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))},t.prototype.addAriaLabel=function(){var e=this;re.isDevice||[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"].forEach(function(t){var n=e.element.querySelector(t);n.setAttribute("aria-label",n.getAttribute("title"))})},Object(s.b)([ye(!1)],t.prototype,"enableQueryString",void 0),Object(s.b)([ye(!1)],t.prototype,"enableExternalMessage",void 0),Object(s.b)([ye(!0)],t.prototype,"enablePagerMessage",void 0),Object(s.b)([ye(12)],t.prototype,"pageSize",void 0),Object(s.b)([ye(10)],t.prototype,"pageCount",void 0),Object(s.b)([ye(1)],t.prototype,"currentPage",void 0),Object(s.b)([ye()],t.prototype,"totalRecordsCount",void 0),Object(s.b)([ye()],t.prototype,"externalMessage",void 0),Object(s.b)([ye(!1)],t.prototype,"pageSizes",void 0),Object(s.b)([ye()],t.prototype,"template",void 0),Object(s.b)([ye("")],t.prototype,"customText",void 0),Object(s.b)([xe()],t.prototype,"click",void 0),Object(s.b)([xe()],t.prototype,"dropDownChanged",void 0),Object(s.b)([xe()],t.prototype,"created",void 0),Object(s.b)([Ae],t)}(ht),bE=function(){function e(e,t){this.predefinedItems={},this.items=["Add","Edit","Update","Delete","Cancel","Print","Search","ColumnChooser","PdfExport","ExcelExport","CsvExport","WordExport"],this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}return e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization");for(var e=0,t=["Add","Edit","Update","Delete","Cancel","Print","PdfExport","ExcelExport","WordExport","CsvExport"];e<t.length;e++){var n=t[e],i=n.toLowerCase(),r=i[0].toUpperCase()+i.slice(1);this.predefinedItems[n]={id:this.gridID+"_"+i,prefixIcon:"e-"+i,text:this.l10n.getConstant(r),tooltipText:this.l10n.getConstant(r)}}this.predefinedItems.Search={id:this.gridID+"_search",template:'<div class="e-input-group e-search" role="search">            <input id="'+this.gridID+'_searchbar" class="e-input" name="input" type="search"             placeholder= "'+this.l10n.getConstant("Search")+'"/>            <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"             tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search"></span>             </div>',tooltipText:this.l10n.getConstant("Search"),align:"Right",cssClass:"e-search-wrapper"},this.predefinedItems.ColumnChooser={id:this.gridID+"_columnchooser",cssClass:"e-cc e-ccdiv e-cc-toolbar",suffixIcon:"e-columnchooser-btn",text:this.l10n.getConstant("Columnchooser"),tooltipText:this.l10n.getConstant("Columnchooser"),align:"Right"},this.createToolbar()},e.prototype.getToolbar=function(){return this.toolbar.element},e.prototype.destroy=function(){this.toolbar&&!this.toolbar.isDestroyed&&(this.toolbar.element?this.toolbar.destroy():this.parent.destroyTemplate(["toolbarTemplate"]),this.unWireEvent(),this.removeEventListener(),B(this.element))},e.prototype.bindSearchEvents=function(){this.searchElement=this.element.querySelector("#"+this.gridID+"_searchbar"),this.wireEvent(),this.refreshToolbarItems(),this.parent.searchSettings&&this.updateSearchBox()},e.prototype.createToolbar=function(){var e=this.getItems();this.toolbar=new Xy({items:e,clicked:this.toolbarClickHandler.bind(this),enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,created:this.bindSearchEvents.bind(this)});var t="viewContainerRef";this.parent[t]&&(this.toolbar.registeredTemplate={},this.toolbar[t]=this.parent[t]),this.element=this.parent.createElement("div",{id:this.gridID+"_toolbarItems"}),this.parent.toolbarTemplate?"string"==typeof this.parent.toolbarTemplate?(this.toolbar.appendTo(this.parent.toolbarTemplate),this.element=this.toolbar.element):JA(this.element,UA(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate")):this.toolbar.appendTo(this.element),this.parent.element.insertBefore(this.element,this.parent.getHeaderContent()),this.bindSearchEvents()},e.prototype.refreshToolbarItems=function(e){var t=this.parent,n=[],i=[],r=t.editSettings,o=t.currentViewData&&t.currentViewData.length;r.allowAdding?n.push(this.gridID+"_add"):i.push(this.gridID+"_add"),r.allowEditing&&o?n.push(this.gridID+"_edit"):i.push(this.gridID+"_edit"),r.allowDeleting&&o?n.push(this.gridID+"_delete"):i.push(this.gridID+"_delete"),"Batch"===t.editSettings.mode?t.element.querySelectorAll(".e-updatedtd").length&&(r.allowAdding||r.allowEditing)?(n.push(this.gridID+"_update"),n.push(this.gridID+"_cancel")):(i.push(this.gridID+"_update"),i.push(this.gridID+"_cancel")):t.isEdit&&(r.allowAdding||r.allowEditing)?(n=[this.gridID+"_update",this.gridID+"_cancel"],i=[this.gridID+"_add",this.gridID+"_edit",this.gridID+"_delete"]):(i.push(this.gridID+"_update"),i.push(this.gridID+"_cancel")),this.enableItems(n,!0),this.enableItems(i,!1)},e.prototype.getItems=function(){var e=[];if("string"==typeof this.parent.toolbar)return[];for(var t=0,n=this.parent.toolbar||[];t<n.length;t++){var i=n[t];switch(typeof i){case"number":e.push(this.getItemObject(this.items[i]));break;case"string":e.push(this.getItemObject(i));break;default:e.push(this.getItem(i))}}return e},e.prototype.getItem=function(e){var t=this.predefinedItems[e.text];return t?g(t,t,e):e},e.prototype.getItemObject=function(e){return this.predefinedItems[e]||{text:e,id:this.gridID+"_"+e}},e.prototype.enableItems=function(e,t){for(var n=0,i=e;n<i.length;n++){var r=this.element.querySelector("#"+i[n]);r&&this.toolbar.enableItems(r.parentElement,t)}},e.prototype.toolbarClickHandler=function(e){var t=this.parent,n=this.gridID;if(g(e,{cancel:!1}),t.trigger("toolbarClick",e),!e.cancel)switch(!m(e.item)&&e.item.id){case n+"_print":t.print();break;case n+"_edit":t.startEdit();break;case n+"_update":t.endEdit();break;case n+"_cancel":t.closeEdit();break;case n+"_add":t.addRecord();break;case n+"_delete":t.deleteRecord();break;case n+"_search":e.originalEvent.target.id===n+"_searchbutton"&&this.search();break;case n+"_columnchooser":var i=this.parent.element.querySelector(".e-ccdiv"),r=i.getBoundingClientRect(),o=i.getBoundingClientRect().left,s=e.originalEvent.target;r=i.getBoundingClientRect().top+i.offsetTop,t.createColumnchooser(o,r,s)}},e.prototype.modelChanged=function(e){"edit"===e.module&&this.refreshToolbarItems()},e.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&this.parent.toolbar&&(this.element&&B(this.element),this.render())},e.prototype.keyUpHandler=function(e){13===e.keyCode&&this.search()},e.prototype.search=function(){this.parent.search(this.searchElement.value)},e.prototype.updateSearchBox=function(){this.searchElement&&(this.searchElement.value=this.parent.searchSettings.key)},e.prototype.wireEvent=function(){this.searchElement&&(this.searchBoxObj=new GO(this.searchElement),I.add(this.searchElement,"keyup",this.keyUpHandler,this),this.searchBoxObj.wireEvent())},e.prototype.unWireEvent=function(){this.searchElement&&(I.remove(this.searchElement,"keyup",this.keyUpHandler),this.searchBoxObj.unWireEvent())},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("initial-end",this.render,this),this.parent.on(xA,this.onPropertyChanged,this),this.parent.on(SA,this.updateSearchBox.bind(this)),this.parent.on("model-changed",this.refreshToolbarItems,this),this.parent.on("toolbar-refresh",this.refreshToolbarItems,this),this.parent.on(SA,this.modelChanged,this),this.parent.on(yA,this.refreshToolbarItems,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("initial-end",this.render),this.parent.off(xA,this.onPropertyChanged),this.parent.off(SA,this.updateSearchBox),this.parent.off("model-changed",this.refreshToolbarItems),this.parent.off("toolbar-refresh",this.refreshToolbarItems),this.parent.off(SA,this.modelChanged),this.parent.off(yA,this.refreshToolbarItems))},e.prototype.getModuleName=function(){return"toolbar"},e}();!function(e){e.timer=null}(fE||(fE={})),Array,Array,Array,function(e){e.ForceEncoding=function(e){return e[e.None=0]="None",e[e.Ascii=1]="Ascii",e[e.Unicode=2]="Unicode",e}(e.ForceEncoding||{})}(gE||(gE={}));var wE=[],CE=function(e){function t(t){var n=e.call(this)||this;return n.viewContainerRef=t,Ht("currentInstance",n,n.viewContainerRef),n.registerEvents(wE),n}return Object(s.c)(t,e),t}(Vt);Object(s.b)([qt(),Object(s.d)("design:type",Object)],CE.prototype,"template",void 0),Object(s.b)([qt(),Object(s.d)("design:type",Object)],CE.prototype,"headerTemplate",void 0),Object(s.b)([qt(),Object(s.d)("design:type",Object)],CE.prototype,"commandsTemplate",void 0),Object(s.b)([qt(),Object(s.d)("design:type",Object)],CE.prototype,"filter_itemTemplate",void 0),Object(s.b)([qt(),Object(s.d)("design:type",Object)],CE.prototype,"editTemplate",void 0),Object(s.b)([qt(),Object(s.d)("design:type",Object)],CE.prototype,"filterTemplate",void 0);var xE=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},AE=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},SE=[],OE=function(e){function t(t){var n=e.call(this)||this;return n.viewContainerRef=t,Ht("currentInstance",n,n.viewContainerRef),n.registerEvents(SE),n}return Object(s.c)(t,e),t}(Vt);xE([qt(),AE("design:type",Object)],OE.prototype,"footerTemplate",void 0),xE([qt(),AE("design:type",Object)],OE.prototype,"groupFooterTemplate",void 0),xE([qt(),AE("design:type",Object)],OE.prototype,"groupCaptionTemplate",void 0);var EE=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},IE=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},DE=["actionBegin","actionComplete","actionFailure","batchAdd","batchCancel","batchDelete","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beforeCopy","beforeDataBound","beforeExcelExport","beforeOpenColumnChooser","beforePdfExport","beforePrint","beginEdit","cellDeselected","cellDeselecting","cellEdit","cellSave","cellSaved","cellSelected","cellSelecting","checkBoxChange","columnDrag","columnDragStart","columnDrop","columnMenuClick","columnMenuOpen","contextMenuClick","contextMenuOpen","created","dataBound","dataSourceChanged","dataStateChange","destroyed","detailDataBound","excelExportComplete","excelHeaderQueryCellInfo","excelQueryCellInfo","exportDetailDataBound","headerCellInfo","load","pdfExportComplete","pdfHeaderQueryCellInfo","pdfQueryCellInfo","printComplete","queryCellInfo","recordDoubleClick","resizeStart","resizeStop","resizing","rowDataBound","rowDeselected","rowDeselecting","rowDrag","rowDragStart","rowDragStartHelper","rowDrop","rowSelected","rowSelecting","toolbarClick","dataSourceChange"],kE=["dataSource"],PE=function(e){function t(t,n,i,r){var o=e.call(this)||this;o.ngEle=t,o.srenderer=n,o.viewContainerRef=i,o.injector=r,o.tags=["columns","aggregates"],o.element=o.ngEle.nativeElement,o.injectedModules=o.injectedModules||[];try{var s=o.injector.get("GridsFilter");-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(a){}try{s=o.injector.get("GridsPage"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(l){}try{s=o.injector.get("GridsSelection"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(c){}try{s=o.injector.get("GridsSort"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(h){}try{s=o.injector.get("GridsGroup"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(d){}try{s=o.injector.get("GridsReorder"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(u){}try{s=o.injector.get("GridsRowDD"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(p){}try{s=o.injector.get("GridsDetailRow"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(f){}try{s=o.injector.get("GridsToolbar"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(g){}try{s=o.injector.get("GridsAggregate"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(m){}try{s=o.injector.get("GridsSearch"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(y){}try{s=o.injector.get("GridsVirtualScroll"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(v){}try{s=o.injector.get("GridsEdit"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(b){}try{s=o.injector.get("GridsResize"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(w){}try{s=o.injector.get("GridsExcelExport"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(C){}try{s=o.injector.get("GridsPdfExport"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(x){}try{s=o.injector.get("GridsCommandColumn"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(A){}try{s=o.injector.get("GridsContextMenu"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(S){}try{s=o.injector.get("GridsFreeze"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(O){}try{s=o.injector.get("GridsColumnMenu"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(E){}try{s=o.injector.get("GridsColumnChooser"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(I){}try{s=o.injector.get("GridsForeignKey"),-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(D){}return o.registerEvents(DE),o.addTwoWay.call(o,kE),Ht("currentInstance",o,o.viewContainerRef),o}return Object(s.c)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.ngAfterContentChecked=function(){},t}(dE);EE([qt(),IE("design:type",Object)],PE.prototype,"rowTemplate",void 0),EE([qt(),IE("design:type",Object)],PE.prototype,"detailTemplate",void 0),EE([qt(),IE("design:type",Object)],PE.prototype,"toolbarTemplate",void 0),EE([qt(),IE("design:type",Object)],PE.prototype,"pagerTemplate",void 0),EE([qt(),IE("design:type",Object)],PE.prototype,"editSettings_template",void 0),EE([qt(),IE("design:type",Object)],PE.prototype,"groupSettings_captionTemplate",void 0),PE=EE([Bt([Wt]),IE("design:paramtypes",[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector])],PE);var TE=function(){return function(){}}(),ME=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},jE=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},RE=["click","created","dropDownChanged"],LE=[],_E=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.ngEle=t,o.srenderer=n,o.viewContainerRef=i,o.injector=r,o.element=o.ngEle.nativeElement,o.injectedModules=o.injectedModules||[],o.registerEvents(RE),o.addTwoWay.call(o,LE),Ht("currentInstance",o,o.viewContainerRef),o}return Object(s.c)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.ngAfterContentChecked=function(){},t}(vE);ME([qt(),jE("design:type",Object)],_E.prototype,"template",void 0),_E=ME([Bt([Wt]),jE("design:paramtypes",[i.ElementRef,i.Renderer2,i.ViewContainerRef,i.Injector])],_E);var NE=n("+wA8"),BE=i["\u0275cmf"](r,[vm],function(e){return i["\u0275mod"]([i["\u0275mpd"](512,i.ComponentFactoryResolver,i["\u0275CodegenComponentFactoryResolver"],[[8,[xm,Xw,iC,pC,SC,TC,WC,yx,Sx,Px,Bx,Gx,Zx,rA]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["\u0275mpd"](5120,i.LOCALE_ID,i["\u0275angular_packages_core_core_s"],[[3,i.LOCALE_ID]]),i["\u0275mpd"](4608,id.NgLocalization,id.NgLocaleLocalization,[i.LOCALE_ID,[2,id["\u0275angular_packages_common_common_a"]]]),i["\u0275mpd"](5120,i.APP_ID,i["\u0275angular_packages_core_core_h"],[]),i["\u0275mpd"](5120,i.IterableDiffers,i["\u0275angular_packages_core_core_q"],[]),i["\u0275mpd"](5120,i.KeyValueDiffers,i["\u0275angular_packages_core_core_r"],[]),i["\u0275mpd"](4608,lp,cp,[id.DOCUMENT]),i["\u0275mpd"](6144,i.Sanitizer,null,[lp]),i["\u0275mpd"](4608,tp,ip,[]),i["\u0275mpd"](5120,Du,function(e,t,n,i,r,o,s,a){return[new $u(e,t,n),new ap(i),new rp(r,o,s,a)]},[id.DOCUMENT,i.NgZone,i.PLATFORM_ID,id.DOCUMENT,id.DOCUMENT,tp,i["\u0275Console"],[2,np]]),i["\u0275mpd"](4608,ku,ku,[Du,i.NgZone]),i["\u0275mpd"](135680,Mu,Mu,[id.DOCUMENT]),i["\u0275mpd"](4608,Fu,Fu,[ku,Mu,i.APP_ID]),i["\u0275mpd"](6144,i.RendererFactory2,null,[Fu]),i["\u0275mpd"](6144,Tu,null,[Mu]),i["\u0275mpd"](4608,i.Testability,i.Testability,[i.NgZone]),i["\u0275mpd"](5120,kf,am,[Fg]),i["\u0275mpd"](4608,Yg,Yg,[]),i["\u0275mpd"](6144,qg,null,[Yg]),i["\u0275mpd"](135680,Xg,Xg,[Fg,i.NgModuleFactoryLoader,i.Compiler,i.Injector,qg]),i["\u0275mpd"](4608,Qg,Qg,[]),i["\u0275mpd"](5120,Zg,nm,[Fg,id.ViewportScroller,Kg]),i["\u0275mpd"](5120,dm,hm,[lm]),i["\u0275mpd"](5120,i.APP_BOOTSTRAP_LISTENER,function(e){return[e]},[dm]),i["\u0275mpd"](4608,Ny,Ny,[]),i["\u0275mpd"](4608,Hm,Hm,[]),i["\u0275mpd"](4608,$w.SimpleModalService,$w.SimpleModalService,[i.ComponentFactoryResolver,i.ApplicationRef,i.Injector,[2,$w.SimpleModalServiceConfig]]),i["\u0275mpd"](4608,Mw,jw,[id.DOCUMENT,i.PLATFORM_ID,Pw]),i["\u0275mpd"](4608,Rw,Rw,[Mw,Tw]),i["\u0275mpd"](4608,Dw,Dw,[]),i["\u0275mpd"](6144,Iw,null,[Dw]),i["\u0275mpd"](4608,kw,kw,[Iw]),i["\u0275mpd"](6144,aw,null,[kw]),i["\u0275mpd"](4608,sw,Lw,[aw,i.Injector]),i["\u0275mpd"](4608,xw,xw,[sw]),i["\u0275mpd"](4608,$h,$h,[]),i["\u0275mpd"](4608,fm,fm,[xw,$h]),i["\u0275mpd"](5120,Sw,function(e,t){return[e,new oA,new aA(t)]},[Rw,fm]),i["\u0275mpd"](4608,ym,ym,[$h]),i["\u0275mpd"](4608,lA,lA,[Fg]),i["\u0275mpd"](4608,cA,cA,[]),i["\u0275mpd"](4608,pm,pm,[Fg]),i["\u0275mpd"](4608,gm,gm,[xw,$h]),i["\u0275mpd"](4608,mm,mm,[xw,$h]),i["\u0275mpd"](4608,mC,mC,[xw,$h]),i["\u0275mpd"](4608,dA,dA,[]),i["\u0275mpd"](4608,nd,nd,[$h]),i["\u0275mpd"](1073742336,id.CommonModule,id.CommonModule,[]),i["\u0275mpd"](1024,i.ErrorHandler,vp,[]),i["\u0275mpd"](1024,i.NgProbeToken,function(){return[em()]},[]),i["\u0275mpd"](512,lm,lm,[i.Injector]),i["\u0275mpd"](1024,i.APP_INITIALIZER,function(e,t){return[(n=e,Ou("probe",Iu),Ou("coreTokens",Object(s.a)({},Eu,(n||[]).reduce(function(e,t){return e[t.name]=t.token,e},{}))),function(){return Iu}),cm(t)];var n},[[2,i.NgProbeToken],lm]),i["\u0275mpd"](512,i.ApplicationInitStatus,i.ApplicationInitStatus,[[2,i.APP_INITIALIZER]]),i["\u0275mpd"](131584,i.ApplicationRef,i.ApplicationRef,[i.NgZone,i["\u0275Console"],i.Injector,i.ErrorHandler,i.ComponentFactoryResolver,i.ApplicationInitStatus]),i["\u0275mpd"](1073742336,i.ApplicationModule,i.ApplicationModule,[i.ApplicationRef]),i["\u0275mpd"](1073742336,bp,bp,[[3,bp]]),i["\u0275mpd"](1024,Jg,rm,[[3,Fg]]),i["\u0275mpd"](512,af,lf,[]),i["\u0275mpd"](512,Ug,Ug,[]),i["\u0275mpd"](256,Kg,{},[]),i["\u0275mpd"](1024,id.LocationStrategy,im,[id.PlatformLocation,[2,id.APP_BASE_HREF],Kg]),i["\u0275mpd"](512,id.Location,id.Location,[id.LocationStrategy]),i["\u0275mpd"](512,i.Compiler,i.Compiler,[]),i["\u0275mpd"](512,i.NgModuleFactoryLoader,i.SystemJsNgModuleLoader,[i.Compiler,[2,i.SystemJsNgModuleLoaderConfig]]),i["\u0275mpd"](1024,Mg,function(){return[[{path:"customboard",component:zw,canActivate:[lA]},{path:"",component:Jw,canActivate:[lA]},{path:"login",component:rC},{path:"ConfigureSamComponent",component:yC,canActivate:[lA]},{path:"Dashboard",component:OC,canActivate:[lA]},{path:"register",component:MC},{path:"design/:id",component:px,canActivate:[lA],canDeactivate:[cA]},{path:"**",redirectTo:""}]]},[]),i["\u0275mpd"](1024,Fg,sm,[i.ApplicationRef,af,Ug,id.Location,i.Injector,i.NgModuleFactoryLoader,i.Compiler,Mg,Kg,[2,Rg],[2,Pg]]),i["\u0275mpd"](1073742336,tm,tm,[[2,Jg],[2,Fg]]),i["\u0275mpd"](1073742336,uA,uA,[]),i["\u0275mpd"](1073742336,Fy,Fy,[]),i["\u0275mpd"](1073742336,Hy,Hy,[]),i["\u0275mpd"](1073742336,Fh,Fh,[]),i["\u0275mpd"](1073742336,TE,TE,[]),i["\u0275mpd"](1073742336,Ab,Ab,[]),i["\u0275mpd"](1073742336,Uh,Uh,[]),i["\u0275mpd"](1073742336,Qb,Qb,[]),i["\u0275mpd"](1073742336,NE.SimpleModalModule,NE.SimpleModalModule,[]),i["\u0275mpd"](1073742336,zy,zy,[]),i["\u0275mpd"](1073742336,jx,jx,[]),i["\u0275mpd"](1073742336,_w,_w,[]),i["\u0275mpd"](1073742336,Nw,Nw,[]),i["\u0275mpd"](1073742336,r,r,[]),i["\u0275mpd"](256,i["\u0275APP_ROOT"],!0,[]),i["\u0275mpd"](256,bx.DefaultSimpleModalOptionConfig,NE["\u02750"],[]),i["\u0275mpd"](256,Pw,"XSRF-TOKEN",[]),i["\u0275mpd"](256,Tw,"X-XSRF-TOKEN",[]),i["\u0275mpd"](256,"GridsToolbar",bE,[]),i["\u0275mpd"](256,"DiagramsUndoRedo",ah,[]),i["\u0275mpd"](256,"DiagramsDiagramContextMenu",Ah,[])])});Object(i.enableProdMode)(),yp().bootstrapModuleFactory(BE).catch(function(e){return console.error(e)})},zotm:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("rPjj"),r=n("Fxb1");function o(e,t,n,o,s){if(void 0===s&&(s=new i.a(e,n,o)),!s.closed)return Object(r.a)(t)(s)}}},[[0,0]]]);